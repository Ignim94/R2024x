define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMemberFilterView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"teamfilter",tagName:"div",className:"chg-member-view",setup:function(){this.template='                                                <div class="'+this.getClassNames("-role-filter")+'">                                                    <table class="filter-table table">                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByName+'</td>                                                            <td>                                                                <div class="filter-input">                                                                    <input type="text" placeholder="'+t.CHG_Member_SearchMembers_PlaceHolder+'" class="form-control form-control-root filtertext">                                                                    <div class="clear-filter fonticon fonticon-cancel-circled"></div>                                                                </div>                                                            </td>                                                        </tr>                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByResponsibilities+'</td>                                                            <td class="chg-member-view-filter toggle-primary">                                                                <div class="toggle-container toggle-filter-view">                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="allToggle" class="roleFilter" checked>                                                                        <label class="control-label" for="allToggle" style="color: gray;">'+t.CHG_Member_Filter_All+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="contributorToggle" class="roleFilter">                                                                        <label class="control-label" for="contributorToggle" style="color: gray;">'+t.CHG_Member_Filter_Assignees+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="revMemToggle" class="roleFilter">                                                                        <label class="control-label" for="revMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Approvers+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="followMemToggle" class="roleFilter">                                                                        <label class="control-label" for="followMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Followers+"</label>                                                                    </div>                                                                </div>                                                            </td>                                                        </tr>                                                    </table>                                                </div>",this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view-role-filter",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"keyup .filtertext":function(e){var t=e.target.value,i=this.container.getElement(".clear-filter");t.length>0?i.setStyle("visibility","visible"):i.setStyle("visibility","hidden"),this.dispatchEvent("memberRoleFilter",arguments)},"click .clear-filter":function(e){this.container.getElement(".clear-filter").setStyle("visibility","hidden");var t=this.container.getElement(".filtertext");if(t){t.value=""}this.dispatchEvent("memberRoleFilter",arguments)},"focus .filtertext":function(){var e=document.getElementsByClassName("searchfiler-input-container");e.addClassName("highlighted-border"),e.removeClassName("border-without-focus")},"click .roleFilter":function(){this.dispatchEvent("memberRoleFilter",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCreateChangeRequest",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require"],function(e,t,i,n,o,a,s){return{launchCreateChangeRequestDialog:function(r){console.log("launchCreateChangeRequestDialog ............................");let l=i.getUserPreference(n.keys.createKeys.CR_DEF_TYPE),d={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_REQUEST_FORM,type:"Change Request",silentMode:!1,overlay:!0,options:{typeName:"Change Request",preferedType:l,select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){r&&(r.isClickProcessing=!1);var t=document.getElementsByClassName("moduleWrapper")[0];null==t&&"undefined"==t||a.mask(t);let o=e.result[0].identifier,l={};l.context=o,l.type="ChangeRequest";let d=s("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),c=s("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil");d.launchPropertyPanelContext(l),c.displayObjectInfoInsideIDcard(o,!0);let u={};u[n.keys.createKeys.CR_DEF_TYPE]=e.result[0].type,i.saveUserPreference(u)},onFailure:function(e){console.log("onFailure..............."+e),r&&(r.isClickProcessing=!1)},onCancel:function(e){r&&(r.isClickProcessing=!1)}}};var c={commandInfo:{type:"Change Request",facet:"Start a New Activity",action:"CR>Start a New Activity>New Change Request"}};s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:c}),(new e).CreateNew(d)}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddRelatedScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveRelatedScope,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTagNavigatorProxy",["DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){"use strict";var i=null,n=null,o=[],a={init:function(o){var s={widgetId:widget.id,filteringMode:"FilteringOnServer",colorize:!0};i&&i.die(),n=o.DataContext,(i=e.createProxy(s)).addOpenTaggerListener(function(){require(["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t,i){var n={level:"info",title:i.WARNING_TAGGER_INFO,subtitle:i.WARNING_TAGGER,sticky:!1};window.notif=e,t.removeLastNotificationDisplayed(),t.setNotificationManager(window.notif),t.setFadeOutPolicy(2),t.setStackingPolicy(1),t.setRemoveStackOnFirstTimeoutFlag(!0),null!=t._notifScreen&&t._notifScreen.addClassName("ca-align-center"),e.addNotif(n)})}),i.addEvent("onFilterChange",function(e){var o=i.getCurrentFilter();n.ChgCOlayoutModel.empty(),Object.keys(o.allfilters).length>0?(t.getGlobalVariable().indexMode="true",n.refreshGrid(e,o)):(t.getGlobalVariable().indexMode="true",n.refreshGrid(e,o),t.getGlobalVariable().indexMode="false",n.refreshGrid(e,o))}),i.addEvent("colorize",function(e){var t=e.tagColors;a._colorize(t)}),i.addEvent("unColorize",function(e){a._uncolorize()})},setTags:function(e,t){if(i&&t){var n=a.getTagsList(t);t.forEach(function(e){if(-1!=n.indexOf(e.sixw)){for(var t=!1,i=0;i<o.length;i++)if(o[i].sixw==e.sixw&&o[i].object==e.object){o[i]=e,t=!0;break}t||o.push(e)}})}i.setTags(e,o)},deactivate:function(){i&&i.deactivate()},activate:function(){i&&i.activate()},clearLocalFilter:function(){i&&i.clearLocalFilter()},getTaglistData:function(){return[{sixw:"ds6w:what/ds6w:status",modelField:"maturity",compareType:"AcontainsB"},{sixw:"ds6w:why/ds6w:fulfills/ds6w:severity",modelField:"severity",compareType:"String"},{sixw:"ds6w:who/ds6w:responsible",modelField:"responsible",compareType:"String"},{sixw:"ds6w:when/ds6w:ends/ds6w:dueDate",modelField:"dueDate",compareType:"date"}]},getTagsList:function(e){var t=[];return e&&e.forEach(function(e){t.push(e.sixw)}),a.getTaglistData().forEach(function(e){t.push(e.sixw)}),t},tagCompare:function(e,t,i){if(t&&e)if("String"==i){if(e==t)return!0}else if("AcontainsB"==i){if(e.contains(t))return!0}else if("BcontainsA"==i){if(t.contains(e))return!0}else if("Array"==i){if(t.indexOf(e)>-1)return!0}else if("date"==i)return o=t,a=n=e,n.length>7?a=new UWA.Date(n).strftime("%Y-%m-%d"):n.length>4&&(a=new UWA.Date(n).strftime("%Y-%m")),!!o.contains(a);var n,o,a;return!1},_uncolorize:function(){"tree"==n.coGridView.options.columns[0].dataIndex&&(n.coGridView.options.columns[0].getCellKPIColor=null,n.coGridView.coDatagrid.prepareUpdateView(),n.coGridView.coDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.coGridView.tilesView&&(n.coGridView.tilesView.getColor=function(){},n.coGridView.tilesView.prepareUpdateView(),n.coGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))},_colorize:function(e){var t=a.getTagsList().indexOf(e[0].predicate);if(t>=0){var i=a.getTaglistData()[t];"tree"==n.coGridView.options.columns[0].dataIndex&&(n.coGridView.options.columns[0].getCellKPIColor=function(t){for(var n=0;n<e.length;n++)if(a.tagCompare(e[n].object,t.nodeModel.options.grid[i.modelField],i.compareType))return e[n].color;return null},n.coGridView.caDatagrid.prepareUpdateView(),n.coGridView.caDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.coGridView.tilesView&&(n.coGridView.tilesView.getColor=function(t){t.options.grid;for(var n=0;n<e.length;n++)if(a.tagCompare(e[n].object,t.options.grid[i.modelField],i.compareType))return e[n].color},n.coGridView.tilesView.prepareUpdateView(),n.coGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))}}};return a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersFeaturesUtil",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i){"use strict";var n={showRMBMenuOnGrid:function(e,t){return new Promise(function(o,a){var s="false",r={},l=i("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil"),d=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),c=d[0].options.grid.roles;r.currentObjType=d[0].options.grid.type;var u=0;d.length>1&&(s="true"),c.indexOf("Approver")>=0?(r.Approver="DISCONNECT",u++):r.Approver="CONNECT",c.indexOf("Coordinator")>=0?(r.Coordinator="DISCONNECT",u++):r.Coordinator="CONNECT",c.indexOf("Follower")>=0?(r.Follower="DISCONNECT",u++):r.Follower="CONNECT",c.indexOf("Assignee")>=0?(r.Assignee="DISCONNECT",u++):r.Assignee="CONNECT";var p=c.indexOf("Owner")>=0||c.indexOf("Originator")>=0;if(0==p&&1==u&&(r.showConfirmation=!0),"false"==s)i("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout");var g=[],h=t.cellInfos.nodeModel.options.grid.id,m=t.cellInfos.nodeModel.options.grid.type,C=t.cellInfos.nodeModel.options.grid.name,f=t.cellInfos.nodeModel.options.grid.displayType;"Group"==m&&(m="foaf:Group",C=t.cellInfos.nodeModel.options.grid.fullName,f=t.cellInfos.nodeModel.options.grid.type);var v={objectId:h,objectType:m,displayName:C,displayType:f,facetName:"dependency"};[].push(v);var D=i("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(v),b=[];b.push(D),Promise.all(b).then(function(i){"Person"==r.currentObjType&&((1!=l.isChangeCoordinatorConnected||1==l.isChangeCoordinatorConnected&&"DISCONNECT"==r.Coordinator)&&g.push(n.getChangeCoordinatorMenu(e,t,r)),g.push(n.getFollowerMenu(e,t,r)),g.push(n.getAssigneeMenu(e,t,r))),"Group"==r.currentObjType&&(g.push(n.getFollowerMenu(e,t,r)),g.push(n.getAssigneeMenu(e,t,r))),0==p&&g.push(n.getDeleteMenu(e,t,r)),i[0]&&g.push(i[0]),o(g)})})},getChangeCoordinatorMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Change_Coordinator,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){console.log("Coordinator : "+n.Coordinator),n.role="Coordinator",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Coordinator&&(o.state="selected"),o},getFollowerMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Follower,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){console.log("Follower : "+n.Follower),n.role="Follower",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Follower&&(o.state="selected"),o},getAssigneeMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Assignee,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){console.log("Assignee : "+n.Assignee),n.role="Assignee",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Assignee&&(o.state="selected"),o},getDeleteMenu:function(e,i,n){return{type:"PushItem",title:t.CHG_Member_Menu_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){console.log("remove "),n.role=[],"DISCONNECT"==n.Follower&&n.role.push("Follower"),"DISCONNECT"==n.Approver&&n.role.push("Approver"),"DISCONNECT"==n.Coordinator&&n.role.push("Coordinator"),"DISCONNECT"==n.Assignee&&n.role.push("Assignee"),n.showConfirmation=!0,e.updatePersonRole(i.cellInfos,n)})}}}}};return n}),define("DS/ENOChgGovernanceUX/scripts/model/facets/issue/ChgIssueDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";let p=u.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),g=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"CO_Issue",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",p)},loadIssueData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let o=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var a=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:o,grid:e,customTooltip:a,icons:[e.icon],thumbnail:e.thumbnail,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId;e.forEach(e=>{var a=e.id,s=e.type?e.type:"",d=e.serviceId?e.serviceId:"3DSpace",u={resolvedBy:[]};u.physicalId=a,u.resolvedBy.push({physicalId:o,envId:"OnPremise",objectType:s,serviceId:d});let p=document.getElementById("outer-CO-issue-grid-div");"undefined"!=p&&null!=p&&c.mask(p),r.updateExistingIssue(a,u).then(function(e){r.getIssueDetails(a).then(function(n){let o=n.body;l.processedChangeRequestNewIssueList(o).then(function(n){g.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e)}),c.unmask(p)})},function(e){c.unmask(p),n(e)})})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId;e.forEach(e=>{var s=e.id,l={resolvedBy:[]};l.physicalId=s,l.resolvedBy.push({physicalId:o});let u=document.getElementById("outer-issue-grid-div");"undefined"!=u&&null!=u&&c.mask(u),r.removeExistingIssue(s,l).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);d.success(a.CHG_GOV_Issue_Remove_Success),c.unmask(u)},function(e){c.unmask(u),n()})})})},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return g}),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/group/ChgChangeGroupModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet"],function(e,t,i,n){"use strict";return e.extend({init:function(){},createTreeDocument:function(){return new t({})},loadData:function(e,t,i){e.prepareUpdate();for(var n=t.groups,o=0;o<n.length;o++){var a=this.createNode(n[o].title,n[o].id);i&&n[o].id==i.id||e.addRoot(a)}e.pushUpdate()},createNode:function(e,t){return new i({label:e,value:t})}})}),define("DS/ENOChgGovernanceUX/scripts/model/ChgCODataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,o,a,s,r,l){"use strict";var d=r.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new n,i=new t({id:"coSummary",dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",d)},loadIndexedChangeOrders:function(e,t){var o=e,a=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var r=this.createCustomNameField(t[s]);t[s].co_name=r;var l=this.createCustomSeverity(t[s]);t[s].sev=l;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var c=this.createCustomOwnerField(t[s]);t[s].co_Owner=c;var u=this.getStatusBarIcons(t[s]),p=this.statusbarIconsTooltips(t[s]),g=this.getSubLevel(t[s]),h=this.getDescription(t[s]);t[s].maturityWithBadge=t[s].maturityNLS;for(var m=this.createCustomTooltip(t[s]),C=!1,f=o.getChildren(),v=0;v<f.length;v++){f[v].options.grid.id==t[s].id&&(C=!0)}if(!C){var D=i.createTreeNodeDataModel(a,{label:t[s].title,subLabel:g,description:h,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:u,statusbarIconsTooltips:p,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(D)}}e.pushUpdate()},loadChangeOrderData:function(e,t){var a=e,s=new n;e.prepareUpdate();for(var r=0;r<t.length;r++){var l=this.createCustomNameField(t[r],"NonIndex");t[r].co_name=l;var d=this.createCustomSeverity(t[r]);t[r].sev=d;var c=this.createCustomChangeCoordinatorField(t[r]);t[r].co_Coordinator=c;var u=this.createCustomOwnerField(t[r]);t[r].co_Owner=u;var p=this.getStatusBarIcons(t[r],"NonIndex"),g=this.statusbarIconsTooltips(t[r],"NonIndex"),h=this.getSubLevel(t[r]),m=this.getDescription(t[r]);t[r].maturityWithBadge=t[r].maturityNLS;for(var C=this.createCustomTooltip(t[r]),f=!1,v=(o.getGlobalVariable().existingCOIds,f=!1,a.getChildren()),D=0;D<v.length;D++){v[D].options.grid.id==t[r].id&&(f=!0)}if(!f){var b=i.createTreeNodeDataModel(s,{label:t[r].title,subLabel:h,description:m,grid:t[r],icons:[t[r].iconURL],thumbnail:t[r].thumbnail,statusbarIcons:p,statusbarIconsTooltips:g,customTooltip:C,contextualMenu:["Copy1","Move1"]});e.addChild(b,0)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"coSummaryNotEmpty"}),e.unselectAll();var o=new n,a=this.createCustomNameField(t[0]);t[0].co_name=a;var s=this.createCustomSeverity(t[0]);t[0].sev=s;var r=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=r;var l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;var d=this.getStatusBarIcons(t[0]),c=this.statusbarIconsTooltips(t[0]),u=this.getSubLevel(t[0]),p=this.getDescription(t[0]),g=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(o,{label:t[0].title,subLabel:u,description:p,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:g});e.addChild(h,0),e.getXSO().add(h)},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_TOOLTIP_NEW_ORDER});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var l=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(a);var d=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),d.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{var l=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(i);var d=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),d.inject(t)}return t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomMaturity:function(e){var t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");var i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){var i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){var i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(a.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(a.CHG_TOOLTIP_NEW_ORDER),i},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){return e.name+" | "+e.ownerFullName},getDescription:function(e){return e.maturityNLS},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s){return{findRealizedChanges:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Search Realized Changes"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_RealizedDGV_FIND:"+(widget?widget.id:""))},ignoreRealizedChange:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Ignore Realized Changes"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:""))},moveMenuHandler:function(e){var i={};"New"===e.mode?i.commandInfo={type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Move>New Change Action"}:i.commandInfo={type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Move>Existing Change Action"},s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:e.mode})},downloadRealizedChange:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Download"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_Realized_Download:"+(widget?widget.id:""))},launchCustomColumnManager:function(e){i.launchCustomViewManager(e.custom_view_options)},refreshRealizedDGV:function(e){t.publish("ECM_GOV_RealizedDGV_REFRESH:"+(widget?widget.id:""),{filter:"selected"===e.menu[0].state?"TRACKED":"selected"===e.menu[1].state?"MOVED":"IGNORED"})},filterViewHandler:function(e){if("TRACKED"===e.filter){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Tracked View"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"change-action-realized"}}},tooltip:a.CHG_GOV_Realized_Tracked}),e.context.nodeModel.options.grid.data.menu[0].state="selected",e.context.nodeModel.options.grid.data.menu[1].state="unselected",e.context.nodeModel.options.grid.data.menu[2].state="unselected",e.context.nodeModel.options.grid.data.menu[3]&&(e.context.nodeModel.options.grid.data.menu[3].state="unselected")}else if("MOVED"===e.filter){i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Moved View"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"move-to"}}},tooltip:a.CHG_GOV_Realized_Moved}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="selected",e.context.nodeModel.options.grid.data.menu[2].state="unselected",e.context.nodeModel.options.grid.data.menu[3]&&(e.context.nodeModel.options.grid.data.menu[3].state="unselected")}else if("IGNORED"===e.filter){i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Ignored View"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"ignore"}}},tooltip:a.CHG_GOV_Realized_Ignored}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="unselected",e.context.nodeModel.options.grid.data.menu[2].state="selected",e.context.nodeModel.options.grid.data.menu[3]&&(e.context.nodeModel.options.grid.data.menu[3].state="unselected")}else"GROUPED"===e.filter&&(e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"select-all-checkboxes"}}},tooltip:a.CHG_GOV_Realized_Grouped_MF}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="unselected",e.context.nodeModel.options.grid.data.menu[2].state="unselected",e.context.nodeModel.options.grid.data.menu[3]&&(e.context.nodeModel.options.grid.data.menu[3].state="selected"));t.publish("ECM_GOV_RealizedDGV_FILTER:"+(widget?widget.id:""),{filter:e.filter})},expandCollapseHandler:function(e){if("EXPAND"===e.action){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Expand All"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"flow-tree-expand-down"}}},tooltip:a.CHG_GOV_Expanded_All}),e.context.nodeModel.options.grid.data.menu[0].state="selected",e.context.nodeModel.options.grid.data.menu[1].state="unselected"}else if("COLLAPSE"===e.action){i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>Collapse All"}};s.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"flow-tree-expand-up"}}},tooltip:a.CHG_GOV_Collapsed_All}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="selected"}t.publish("ECM_GOV_RealizedDGV_EXPAND_COLLAPSE:"+(widget?widget.id:""),{action:e.action})},switchViewHandler:function(e){"DGV"===e.type?(e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:a.CHG_TOOLTIP_GRID_VIEW}),e.context.nodeModel.options.grid.data.menu[0].state="selected",e.context.nodeModel.options.grid.data.menu[1].state="unselected",t.publish("ECM_GOV_RealizedDGV_I_ON:"+(widget?widget.id:""))):"LTLV"===e.type&&(e.context.nodeModel.updateOptions({grid:{semantics:{icon:{iconName:"view-big-tile"}}},tooltip:a.CHG_TOOLTIP_LARGE_TILE_VIEW}),e.context.nodeModel.options.grid.data.menu[0].state="unselected",e.context.nodeModel.options.grid.data.menu[1].state="selected",!0===n.getGlobalVariable().is3DSpace?t.publish("ECM_GOV_Realized_LTV_ON_3DSpace"):t.publish("ECM_GOV_Realized_LTV_ON:"+(widget?widget.id:"")))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMemberFilterView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"teamfilter",tagName:"div",className:"chg-member-view",setup:function(){this.template='                                                <div class="'+this.getClassNames("-role-filter")+'">                                                    <table class="filter-table table">                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByName+'</td>                                                            <td>                                                                <div class="filter-input">                                                                    <input type="text" placeholder="'+t.CHG_Member_SearchMembers_PlaceHolder+'" class="form-control form-control-root filtertext">                                                                    <div class="clear-filter fonticon fonticon-cancel-circled"></div>                                                                </div>                                                            </td>                                                        </tr>                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByResponsibilities+'</td>                                                            <td class="chg-member-view-filter toggle-primary">                                                                <div class="toggle-container toggle-filter-view">                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="allToggle" class="roleFilter" checked>                                                                        <label class="control-label" for="allToggle" style="color: gray;">'+t.CHG_Member_Filter_All+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="originatorToggle" class="roleFilter">                                                                        <label class="control-label" for="originatorToggle" style="color: gray;">'+t.CHG_Member_Filter_Originator+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="revMemToggle" class="roleFilter">                                                                        <label class="control-label" for="revMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Approvers+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="followMemToggle" class="roleFilter">                                                                        <label class="control-label" for="followMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Followers+'</label>                                                                    </div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="assigneeToggle" class="roleFilter">                                                                        <label class="control-label" for="assigneeToggle" style="color: gray;">'+t.CHG_Member_Filter_Assignees+"</label>                                                                    </div>                                                                </div>                                                            </td>                                                        </tr>                                                    </table>                                                </div>",this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view-role-filter",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"keyup .filtertext":function(e){var t=e.target.value,i=this.container.getElement(".clear-filter");t.length>0?i.setStyle("visibility","visible"):i.setStyle("visibility","hidden"),this.dispatchEvent("memberRoleFilter",arguments)},"click .clear-filter":function(e){this.container.getElement(".clear-filter").setStyle("visibility","hidden");var t=this.container.getElement(".filtertext");if(t){t.value=""}this.dispatchEvent("memberRoleFilter",arguments)},"focus .filtertext":function(){var e=document.getElementsByClassName("searchfiler-input-container");e.addClassName("highlighted-border"),e.removeClassName("border-without-focus")},"click .roleFilter":function(){this.dispatchEvent("memberRoleFilter",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil",["DS/ENOChgServices/scripts/services/ChgDataService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i){"use strict";let n=Object.create(null);return n.removeDisposition=function(n,o,a,s){return{type:"PushItem",title:t.CHG_GOV_Investigation_Request_Remove_Disposition,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(t){let r=i("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");for(var l=[],d=0;d<o.length;d++)l.push({id:o[d]});e.removeDisposition(n,l).then(function(e){"RemovedDispositionSuccessful"==e.data[0].id?(a.cellInfos.nodeModel.updateOptions({grid:{dispositionName:r.defaultDispositionNameValue(s),dispositionResolvedBy:r.resolvedByDefaultForDispostion(),dispositionType:void 0,dispositionMaturity:void 0}}),a.cellInfos.nodeModel.options.grid.dispositionInformation=""):console.log("some error is there changes")})}}}},n.removeResolvedBy=function(n,o,a){return{type:"PushItem",title:t.CHG_GOV_Investigation_Request_Remove_ResolvedBy,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(t){let s=i("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");for(var r=[],l=0;l<o.length;l++)r.push({id:o[l]});e.removeResolvedBy(n,r).then(function(e){"RemovedResolvedBySuccessful"==e.data[0].id?(a.cellInfos.nodeModel.updateOptions({grid:{dispositionResolvedBy:s.resolvedByDefaultForDispostion()}}),a.cellInfos.nodeModel.options.grid.dispositionInformation[0].resolvedByInformation=""):console.log("some error is there in resolved by")})}}}},n.reviseDisposition=function(i,n,o){return{type:"PushItem",title:t.CHG_GOV_Investigation_Request_Revise_Disposition,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-line-add"},action:{callback:function(t){e.reviseDisposition(i,[]).then(function(e){})}}}},n.replaceDisposition=function(n,o,a,s){return{type:"PushItem",title:t.CHG_GOV_Investigation_Request_ReplaceByNew_Disposition,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},action:{callback:function(t){let r=i("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");for(var l=[],d=0;d<a.length;d++)l.push({id:a[d],dispositionId:o});e.replaceDisposition(n,l).then(function(e){if(console.log("Result is "+e),e&&e.data&&e.data.length>0){let t=e.data[0];s.cellInfos.nodeModel.options.grid.dispositionInformation=[];let i=null;if(t.dispositionType){let e=t.dispositionType;i="DOCUMENT"==e?"documentKey":"NO_FIX"==e?"notFixKey":"FIX"==e?"fixKey":"NOT_IMPACTED"==e?"notImpactedTypeKey":"noneKey"}s.cellInfos.nodeModel.options.grid.dispositionInformation[0]={dispostionId:t.id,dispositionName:t.dispositionName,dispositionCurrentState:t.dispositionCurrentState,dispositionPolicy:t.dispositionPolicy,dispositionType:i,dispositionRevision:t.dispositionRevision,dispositionOwner:t.dispositionOwner,dispositionOwnerFullName:t.dispositionOwnerFullName,dispositionIcon:t.icon,dispositionPreviewIcon:t.previewicon};let n=s.cellInfos.nodeModel.options.grid.dispositionInformation[0];s.cellInfos.nodeModel.updateOptions({grid:{dispositionName:r.dispositionNameMethod("",n.dispositionName),dispositionMaturity:n.dispositionCurrentState,dispositionResolvedBy:r.resolvedByDefaultForDispostion(),dispositionType:n.dispositionType,dispositionRevision:n.dispositionRevision,dispositionOwner:n.dispositionOwnerFullName}})}})}}}},n.createDisposition=async function(t,n){let o=i("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");console.log("Into subscribe");var a=[],s={id:t.model.id};a[0]=s;try{const i=await e.createDispositionFromIR(t.InvestigationRequestId,a);console.log("Successful");let s=n.getAllDescendants().length;for(let e=0;e<s;e++){var r=n.getAllDescendants()[e];if(r.options.grid.id==i.data[0].AffectedItemId){var l={dispositionInformation:[]};l.dispositionInformation.push(i.data[0]);let e=i.data[0].dispositionType,t=null,n=i.data[0].dispositionRevision,a=i.data[0].dispositionOwner,s=i.data[0].dispositionOwnerFullName;e&&(t="DOCUMENT"==e?"documentKey":"NO_FIX"==e?"notFixKey":"FIX"==e?"fixKey":"NOT_IMPACTED"==e?"notImpactedTypeKey":"noneKey"),r.options.grid.dispositionInformation=[],r.options.grid.dispositionInformation[0]={dispostionId:i.data[0].id,dispositionName:i.data[0].dispositionName,dispositionCurrentState:i.data[0].dispositionCurrentState,dispositionPolicy:i.data[0].dispositionPolicy,dispositionType:e,dispositionRevision:n,dispositionOwner:a,dispositionOwnerFullName:s},r.updateOptions({grid:{dispositionName:o.dispositionNameMethod("",l.dispositionInformation[0].dispositionName),dispositionMaturity:i.data[0].dispositionCurrentState,dispositionType:t,dispositionRevision:n,dispositionOwner:s}});break}}}catch(e){console.error("Error:",e)}},n.getDispositionTransferMenu=function(e){return{type:"PushItem",title:"Move",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid.dispositionInformation);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialogForDisposition(n)})}}}},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsCreateIA",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","require","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o,a,s,r,l,d){return{launchAffectedItemsCreateNewIADialog:function({contextCRId:r},d,c){console.log("launchCreateChangeIADialog ............................");let u=i.getUserPreference(n.keys.createKeys.IA_DEF_TYPE),p={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ANALYSIS_FORM,type:"Change Analysis",silentMode:!1,overlay:!0,options:{typeName:"Change Analysis",preferedType:u,select:[],parentPIDs:[r]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isLibrary:!0}}],events:{onSuccess:function(e){document.getElementsByClassName("moduleWrapper")[0];try{let t=l("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var r=e.result[0];r.isKindOfType="Change Analysis",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:r,View:"Impact Analysis"})}catch(e){console.log(e)}l("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil").filterView("activeIA"),t.TriggerCustomeUpdate="false";let u={};u[n.keys.createKeys.IA_DEF_TYPE]=e.result[0].type;let p=[],g=[];var h=[];for(let e of d)h.push({id:e.options.grid.id,service:e.options.grid.serviceName,type:e.options.grid.type,environment:t.getGlobalVariable().tenant});g.push({id:e.result[0].identifier}),p.push({impactAnalysisIds:g,objectIdToSend:h,updateAction:"CONNECT"}),console.log(p),0!=g.length&&0!=h.length&&a.connecteIAwithAffactedItem(p).then(function(e){!0===e.success&&e.data.length==e.items&&s.success(o.CHG_GOV_Affected_Item_Objects_Processed_Success_Analysis_Basis_New_CA);let t=0;for(let i of d){for(let n of e.data)n&&n.affectedItemIds&&n.affectedItemIds.includes(i.options.grid.id)&&t++;let n=i.options.grid.countImpactAnalysis+t;i.updateOptions({grid:{countImpactAnalysis:n}}),t=0}t=0,c.publish({event:"update_AnalysisBasis_count_IA_grid",data:e.data})}),i.saveUserPreference(u)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};var g={commandInfo:{type:"Impact Analysis",facet:"Affected Items",action:"CR>Affected Items>Add to New Impact Analysis"}};l("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:g}),(new e).CreateNew(p)}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAAddMemberView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"chg-add-member",tagName:"div",className:"chg-add-member",setup:function(){this.template='                                                <div class="'+this.getClassNames("-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-body")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table class="add-member-table table">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-assignee")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Assignee+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-assignee-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-assignee-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search assignee-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-approver")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Approver+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-approver-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-approver-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search approver-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-informed-user")+' " >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Follower+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-informed-user-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-informed-user-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search informed-user-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-button")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t</div>                                                </div>',this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"click .assignee-field-search":function(){this.dispatchEvent("searchAssignee",arguments)},"click .approver-field-search":function(){this.dispatchEvent("searchApprover",arguments)},"click .informed-user-field-search":function(){this.dispatchEvent("searchInformedUser",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t){var i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"PushItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"PushItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){var n=i.accessBits;const o="true"==(n=t.processAccessBitIA(n)).AddAssignee;n.RemoveAssignee;return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Contributors_Toolbar_AddContributor,position:"far",visibleFlag:o,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Contributors_Toolbar_RemoveContributor,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",func:"removeHandler"}}}]}},i}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView",["DS/ENOChangeActionUX/scripts/Views/CARealizedView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o){"use strict";return{createRealizedChangesView:function(n){var a={};a=UWA.merge(a,n),this._modelEvents=a.contextDetails._modelEvents,this.id=a.id;var s="pid:"+a.id;let r=a.contextDetails.title;var l="";a.targetclassName=a.target.className;let d={caModel:{id:s,name:a.contextDetails.name,title:r,description:a.contextDetails.description,severity:a.contextDetails.severity,maturity:a.contextDetails.maturity,invokedFrom:"gov",isSelected:a.isSelected},init_options:a},c=a.target,u=new(new e(d).buildRealizedView());u.container=c,t.getChangeActionUserAccess(a.id).then(function(e){l=e.data[0],l=i.processAccessBitCA(l),u.model={id:s,name:a.contextDetails.name,title:r,description:a.contextDetails.description,severity:a.contextDetails.severity,maturity:a.contextDetails.maturity,invokedFrom:"gov",isSelected:a.isSelected,get:function(e){return"userAccess"==e?l:"id"==e?s:"synopsis"===e?r:void 0},fetch:function(e){console.log("dummy fetch called...!"),e.onComplete(),o.publish("load-dependency"+widget.id,s)}},c.addContent(u.render())})}}}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgSearchConfigServcies"],function(e,t,i,n){"use strict";return{reviewerType:{typeOfReviewer:"",labelSelected:!1},fetchMembersList:function(e){var n=this,o=(e.categoryId,e.contextUser),a=e.text,s=e.searchQuery,r=e.supportType;return new Promise(function(e,l){void 0===s&&(s=n.constructQueryString(o,a,r));var d=n.constructInputJson(s),c={isfederated:!0};i.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",d,function(i){var o=[];if(i&&i.results&&Array.isArray(i.results)){var a=i.results,s="OnPremise"===t.getGlobalVariable().tenant;a.forEach(function(e){var t=e.attributes,i=n.processRouteSelected(t,s);o.push(i)})}e(o)},function(e){l(e)},c)})},constructQueryString:function(e,i,n){t.getGlobalVariable().ECM_SearchRouteTemplateEnforcementForCA,t.getGlobalVariable().ECM_EnableRouteTemplateEnforcementForCA,n||(n=this.supportType);let o="",a=n?n.map(e=>e.toLowerCase()):this.supportType.map(e=>e.toLowerCase());switch(!0){case a.includes("person")&&a.includes("group"):o='((([ds6w:type]:"Person" AND [ds6w:identifier]:(*'+i+'*)) OR ([ds6w:type]:"Person" AND [ds6wg:fullname]:(*'+i+'*)) OR ([ds6w:type]:"Person" AND [firstname]:(*'+i+'*)) OR ([ds6w:type]:"Person" AND [lastname]:(*'+i+'*))) AND policycurrent:"Person.Active") OR ((([ds6w:type]:"Group" AND [ds6w:label]:(*'+i+'*))) AND current:"Active")';break;case a.includes("routetemplate")&&""===this.reviewerType.typeOfReviewer:o=this.getQueryParameterForRouteTemplate(e)+' OR (flattenedtaxonomies:"types/Person" AND policycurrent:"Person.Active" )';break;case a.includes("person")||"Person"===this.reviewerType.typeOfReviewer:o='((([ds6w:type]:"Person" AND [ds6w:identifier]:(*'+i+'*)) OR ([ds6w:type]:"Person" AND [ds6wg:fullname]:(*'+i+'*)) OR ([ds6w:type]:"Person" AND [firstname]:(*'+i+'*)) OR ([ds6w:type]:"Person" AND [lastname]:(*'+i+'*))) AND policycurrent:"Person.Active")';break;case a.includes("group"):o='(flattenedtaxonomies:"types/Group" AND current:"active")';break;case a.includes("routetemplate")&&"Route Template"===this.reviewerType.typeOfReviewer:o=this.getQueryParameterForRouteTemplate(e)}return o},constructInputJson:function(e){let i={"3dspace":{SecurityContext:t.getGlobalVariable().getSecurityContext()}};var n={with_indexing_date:!0,with_nls:!1,label:"yus-1515078503005",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:responsible","ds6wg:fullname"],select_file:["icon","thumbnail_2d"],query:e,order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:t.getGlobalVariable().tenant,login:i};return JSON.stringify(n)},processRouteSelected:function(e,t){var i={};return e.forEach(function(e){switch(e.name){case"ds6w:what/ds6w:type":i.type=t?e.value:e.value.includes("foaf")?e.value.slice(5):e.value;break;case"resourceid":i.id=e.value;break;case"ds6w:identifier":i.identifier=e.value;break;case"ds6w:label":i.name=e.value,"Person"===i.type&&"ds6wg:fullname"===e.name&&(i.name=e.value);break;case"ds6wg:fullname":"Person"===i.type&&(i.name=e.value)}}),i},getQueryParameterForRouteTemplate:function(e){return'(flattenedtaxonomies:"types/Route Template" AND (route_95_base_95_purpose:"Approval" OR (route_95_base_95_purpose:"Standard" AND bo_46_route_46_template_46_isstandard:"true")) AND (route_95_template_95_availability: "Enterprise" OR route_95_template_95_availability: "'+e+'" ) AND policycurrent:"Route Template.Active"AND route_95_completion_95_action:"Promote Connected Object" AND latestrevision:"TRUE")'},getAvatarDetails:function(e){var t={},i="",n=[[7,139,250],[249,87,83],[111,188,75],[158,132,106],[170,75,178],[26,153,123],[245,100,163],[255,138,46]],o=e.split(" "),a=o[0].charAt(0),s=o[o.length-1];s&&(i=s.charAt(0));var r=a+i,l=Math.ceil((a.charCodeAt(0)+i.charCodeAt(0))%n.length),d="rgb("+n[l][0]+","+n[l][1]+","+n[l][2]+")";return t.name=e,t.avatarStr=r,t.avatarColor=d,t},getMembersByObjectType:function(e,t){var n="";if("ChangeRequest"===t)n="investigationRequest";else if("ChangeOrder"===t)n="changeorder";else if("ChangeAction"===t)n="changeaction";else{if("InvestigationRequest"!==t)return Promise.reject("Unsupported object type");n="investigationRequest"}var o=`/resources/v1/chguxservices/${n}/${e}/membersByRole`;return new Promise(function(e,t){i.makeWSCallWithCSRF(o,"GET","enovia","application/json","",function(t){e(t)},t,!1)})},updateMembers:function(e,t,n){return new Promise(function(o,a){var s="";switch(e){case"ChangeRequest":s="investigationRequest";break;case"ChangeAction":s="changeaction";break;case"ChangeOrder":s="changeorder";break;case"InvestigationRequest":s="investigationRequest";break;default:return void a("Invalid objectType")}var r=`/resources/v1/chguxservices/${s}/${t}/members`,l=JSON.stringify(n);i.makeWSCallWithCSRF(r,"PUT","enovia","application/json",l,function(e){o(e)},a,!1)})},processMembersList:function(e){let t=[],i=e.data;if(void 0!==i&&i.length>0)for(let e=0;e<i.length;e++){let n={};for(const t in i[e])if(Array.isArray(i[e][t])){let o=i[e][t].map(e=>({id:e.id,type:e.type,fullName:e.name,userId:e.userid,thumbnail:i.previewicon,icon:i.icon,title:e.title||"",roles:e.roles}));n[t]=o}t.push(n)}return t},buildQueryStringForSearch:function(e,t,i){let n=t?t.map(e=>e.toLowerCase()):this.types.map(e=>e.toLowerCase());var o="";return n&&(n.includes("person")||n.includes("usergroup"))&&(o+="(",n.includes("person")&&(o+='flattenedtaxonomies:"types/Person" AND policycurrent:"Person.Active")'),n.includes("usergroup")&&(o.length>0&&(o+=" OR "),o+='(flattenedtaxonomies:"types/Group" AND current:"active"'),o+=")"),n&&n.includes("routetemplate")&&(o.length>0&&(o+=" OR "),o+=this.getQueryParameterForRouteTemplate(e)),i&&i.extendedQuery&&(o.length>0&&(o+=" AND "),o+=i.extendedQuery),o},buildQueryForType:function(e,t,i){switch(t.toLowerCase()){case"person":return'flattenedtaxonomies:"types/Person" AND policycurrent:"Person.Active"';case"group":return'flattenedtaxonomies:"types/Group" AND current:"active"';case"routetemplate":return'(flattenedtaxonomies:"types/Route Template" AND (route_95_base_95_purpose:"Approval" OR (route_95_base_95_purpose:"Standard" AND bo_46_route_46_template_46_isstandard:"true")) AND (route_95_template_95_availability: "Enterprise" OR route_95_template_95_availability: "'+e+'" ) AND policycurrent:"Route Template.Active" AND route_95_completion_95_action:"Promote Connected Object" AND latestrevision:"TRUE")';default:return""}},buildAppendedQueries:function(e,t,i){let n="";for(const o of t){const t=this.buildQueryForType(e,o,i);t&&(n&&(n+=" OR "),n+=t)}return n}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeAction/ChgChangeActionDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";let p=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadCAData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let o=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var a=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:o,grid:e,customTooltip:a,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addNewChildren:function(e){if("Change Action"==e.type){var t=document.getElementById("outer-CA-grid-div");"undefined"!=t&&null!=t&&u.mask(t),r.getNewCADetails(e.objectID).then(function(e){var i=l.processChangeActionInContext(e).processData;console.log(i),d.getUserFullName(i[0].owner).then(function(e){i[0].ownerFullName=e.userDisplayName.userInfo[i[0].owner].userDisplayName,require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],function(e){e.addNodesInLayout(i),u.unmask(t)})})},function(e){u.unmask(t)})}},addExistingChildren:function(e){var t=[];this.parentCRId&&(t=this.parentCRId);var i=document.getElementById("outer-CA-grid-div");"undefined"!=i&&null!=i&&u.mask(i),r.addExistingChangeActionImpactAnalysis(t,e).then(function(e){var t=l.processedCAList(e);require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],function(e){e.addNodesInLayout(t),e.modelEvents.publish({event:"CA-Creation-Update",data:{}}),u.unmask(i)})},function(e){u.unmask(i)})},removeChildren:function(e){var t=e.getSelectedNodes(),i=document.getElementById("outer-CA-grid-div");if("undefined"!=i&&null!=i&&u.mask(i),t.length){let l="Change Action";var n;n=this.parentCRId;for(var o=[],s=0;s<t.length;s++)o.push({id:t[s].options.grid.id,type:t[s].options.grid.type});r.removeInCRChangeActionView(n,l,o).then(function(n){for(var o=0;o<t.length;o++)e.removeRoot(t[o]);0==e.getChildren().length&&e._modelEvents.publish({event:"treeEmpty"}),u.unmask(i),c.success(a.CHG_GOV_ChangeOrchestration_Toolbar_Remove_Success),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],function(e){e.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"remove"}})})},function(e){u.unmask(i)})}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},removeExistingChildren:function(e){},addNodesInLayoutModel:function(e,t){let i,n=p.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(n);else for(let t=n.length-1;t>=0;t--){i=0;for(let o=0;o<e.getRoots().length;o++)e.getRoots()[o].options.grid.id==n[t].options.grid.id&&i++;0==i&&e.addRoot(n[t],0)}e.pushUpdate()}});return p}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s){"use strict";var r=n.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e),this.options=e,this.treeDocument=null},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",r)},resetModel:function(){this.treeDocument.empty()},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){this.treeDocument=new t({id:"ChgCAResolutionItemTreeDoc",useAsyncPreExpand:!0})},emptyTreeDocument:function(){this.treeDocument.empty()},updateTreeDocument:function(e){this.treeDocument.prepareUpdate();for(var t=0;t<e.length;t++)this.treeDocument.addRoot(this.createTreeNode(e[t]));this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},createTreeNode:function(e){return this.getResolutionTreeNode(e)},getResolutionTreeNode:function(e){return e.maturityWithBadge=e.maturityNLS,new i({id:e.id,label:e.title,title:e.title,name:e.name,revision:e.revision,type:e.type,typeNLS:e.typeNLS,maturity:e.maturity,maturityNLS:e.maturityNLS,description:e.description,organization:e.organization,organizationNLS:e.organizationNLS,collabspace:e.collabspace,collabspaceNLS:e.collabspaceNLS,isLastRevision:e.isLastRevision,icons:[e.icon],thumbnail:e.previewIcon,change:e.change,change_details:e.change_details,proposedPID:e.proposedPID,proposedStatus:e.proposedStatus,reasonForChange:e.proposedWhy,activityIcon:e.activityIcon,subLabel:e.type+" | "+e.revision+" | "+e.name,grid:e,useAsyncPreExpand:!0})},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})}})}),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o,a){"use strict";return{hideFacet:function(e){for(var i=0;i<e.elements.container._lFacets.length;i++){var n=e.elements.container._lFacets[i];n.facet.name!=t.FACET_PROPERTIES&&(n.alwaysVisible=!1)}},addAllFacet:function(i,n){var o=[];if(o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/applicability/ChgApplicabilityfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Applicability",icon:"evolution-effectivity",text:e.CHG_GOV_Header_Applicability},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/dependency/ChgDependencyfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Dependency",icon:"dependencies",text:e.CHG_GOV_Header_Dependency},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CO_RelatedScope",icon:"object-related-cog",text:e.CHG_GOV_Header_RelatedScope},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssuefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Issue",icon:"issue-type",text:e.CHG_GOV_Header_Issue},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRRelatedScopefacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CR_RelatedScope",icon:"object-related-cog",text:e.CHG_GOV_Header_RelatedScope},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/decision/ChgDecisionfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Decision",icon:"legal-ok",text:e.CHG_GOV_Header_Decision},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactBasis",icon:"change-request-alert",text:e.CHG_GOV_DataGrid_Column_ImpactBasis},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactItem",icon:"change-request-impacted-items",text:e.CHG_GOV_DataGrid_Column_ImpactedItem},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ChangeAction",icon:"change-action",text:e.CHG_GOV_DataGrid_Column_IA_CA},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_Assignee",icon:"users",text:e.CHG_GOV_DataGrid_Column_Contributors},options:{data:n}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CA_Context",icon:"3d-object",text:e.CHG_GOV_Header_Contexts},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Attachment",icon:"attach",text:e.CHG_GOV_Header_Attachments},options:{}}),o.push({require:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownfacet",alwaysVisible:!1,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"CA_Flowdown",icon:"flow-down",text:e.CHG_GOV_Header_Flowdown},options:{}}),i.addFacets(o),n&&n[0]&&n[0].isViaHeader){require(["DS/ENORIPE_Relations/RelationsTabSettings"],function(e){o.push(t.FACET_RELATIONS),o.push(t.FACET_SWYMCOMMENTS),o.push(t.FACET_GENERALHISTORY),i.addFacets(o),e.setProfile("Change_Traceability")},function(e){console.warn("Cannot load "+e.requireModules),o.push(t.FACET_SWYMCOMMENTS),o.push(t.FACET_GENERALHISTORY),i.addFacets(o)})}else o.push(t.FACET_RELATIONS),o.push(t.FACET_SWYMCOMMENTS),o.push(t.FACET_GENERALHISTORY),i.addFacets(o)},getUpdateIMpactAnalysisFacet:function(e){var t=this;return new Promise(function(s,r){1==e.length?n.getImpactAnalysisUserAccess(e[0].physicalId).then(function(t){var n=t.data[0].dataelements;n=o.processAccessBitIA(n),e[0].accessBits=n;var r={id:t.data[0].id,type:t.data[0].type,accessBits:n};i.getGlobalVariable().IAAccessBitsData={widgetID:widget.id,iaID:t.data[0].id,type:t.data[0].type,accessBits:n},a.publish("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",r),s(r)}):s(t.getImpactAnalysisFacets(e))})},getImpactAnalysisFacets:function(t){return[{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactBasis",icon:"change-request-alert",text:e.CHG_GOV_DataGrid_Column_ImpactBasis},options:{data:t},actions:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",func:"onTabClickAction"}},{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_ImpactItem",icon:"change-request-impacted-items",text:e.CHG_GOV_DataGrid_Column_ImpactedItem},options:{data:t}},{require:"DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"Attachment",icon:"attach",text:e.CHG_GOV_Header_Attachments},options:{}},{require:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",alwaysVisible:!0,visible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"IA_Assignee",icon:"users",text:e.CHG_GOV_DataGrid_Column_Contributors},options:{data:t}}]},updateFacetOnSelection:function(e,t,i){null==e?this.hideFacet(i):"ChangeOrder"==e?this.getChangeOrderTab(t,i):"ChangeAction"==e?this.getChangeActionTab(t,i):"ChangeRequest"==e?this.getChangeRequestTab(t,i):"ChangeAnalysis"==e?this.getImpactAnalysisTab(t,i):"InvestigationRequest"==e?this.getInvestigationRequestTab(t,i):this.getDefaultTab(t,i)},getDefaultTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"history"==n.facet.name&&(n.alwaysVisible=!0)}},getChangeRequestTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CR_RelatedScope"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0),"history"==n.facet.name&&(n.alwaysVisible=!0)}},getChangeOrderTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Dependency"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CO_RelatedScope"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0),"history"==n.facet.name&&(n.alwaysVisible=!0)}},getChangeActionTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"Dependency"==n.facet.name&&(n.alwaysVisible=!0),"Applicability"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"CA_Context"==n.facet.name&&(n.alwaysVisible=!0),"CA_Flowdown"==n.facet.name&&(n.alwaysVisible=!0),"Issue"==n.facet.name&&(n.alwaysVisible=!0),"Decision"==n.facet.name&&(n.alwaysVisible=!0),"history"==n.facet.name&&(n.alwaysVisible=!0)}},getImpactAnalysisTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"IA_ImpactBasis"==n.facet.name&&(n.alwaysVisible=!0),"IA_ImpactItem"==n.facet.name&&(n.alwaysVisible=!0),"IA_Assignee"==n.facet.name&&(n.alwaysVisible=!0),"IA_ChangeAction"==n.facet.name&&(n.alwaysVisible=!0),"Attachment"==n.facet.name&&(n.alwaysVisible=!0),"history"==n.facet.name&&(n.alwaysVisible=!0)}},getInvestigationRequestTab:function(e,t){if(e.length>1)this.hideFacet(t);else for(var i=0;i<t.elements.container._lFacets.length;i++){var n=t.elements.container._lFacets[i];"history"==n.facet.name&&(n.alwaysVisible=!0)}}}}),define("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceSlideIn",["UWA/Class/View","UWA/Core"],function(e,t){"use strict";return e.extend({init:function(e,t,i){this.slideinContainer=e,this.parentContainer=t,this.content=i,this._parent.call(this)},setup:function(){this.layoutResizer=new UWA.createElement("div",{id:"layout-resizer-div",class:"layout-resizer"})},render:function(){return this},buildSlideIn:function(){const e=UWA.createElement("div",{id:"slideInContent"});this.getHeaderCommand().inject(e),this.getBody().inject(e),e.inject(this.slideinContainer),e.set({events:{touchmove:function(e){e.stopPropagation()}}}),this._handlerKeyUp=function(e){27==e.which&&that.hideSlideIn()},UWA.extendElement(document).addEvent("keyup",this._handlerKeyUp)},getHeaderCommand:function(){const e=UWA.createElement("div",{id:"slideInHeaderCommand",styles:{padding:"2px 14px",position:"absolute","z-index":"1",right:"0px"}});return UWA.createElement("span",{class:"close fonticon fonticon-cancel cursorPointer",title:"Close"}).inject(e).addEvent("click",this.onCloseButtonClick.bind(this)),e},onCloseButtonClick:function(){this.hideSlideIn()},getBody:function(){const e=UWA.createElement("div",{id:"slideInBody"});return"string"==typeof this.content?e.innerHTML=this.content:this.content instanceof HTMLElement?e.appendChild(this.content):void 0!==this.content.render&&this.content.render().inject(e),e},showSlideIn:function(){if(UWA.is(this.slideinContainer)){this.resizerContainer&&(this.resizerContainer.style.display="block"),window.matchMedia("(max-width: 768px)").matches?(this.slideinContainer.style.width="100%",this.resizerContainer&&(this.resizerContainer.style.right="100%")):(this.slideinContainer.style.width="600px",this.resizerContainer&&(this.resizerContainer.style.right="600px"),this.slideinContainer.style.minWidth="250px",this.slideinContainer.style.borderLeftWidth="1px")}},hideSlideIn:function(){if(UWA.is(this.slideinContainer)){this.slideinContainer.style.width="0",this.slideinContainer.style.minWidth="0",this.resizerContainer&&(this.resizerContainer.style.right="0px",this.resizerContainer.style.display="none"),this.slideinContainer.style.borderLeftWidth="0";this.parentContainer.setStyle("width","calc( 100% - 0px )"),this.destroy()}},destroy:function(){}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){let i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCA,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"filterView",argument:{filter:"activeCA"}},tooltip:e.CHG_Filter_ActiveCA_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"filterView",argument:{filter:"inactiveCA"}},tooltip:e.CHG_Filter_InactiveCA_Def}]},i.writetoolbarDefination=function(i){let n={entries:[{id:"duplicateCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",fontIconFamily:WUXManagedFontIcons.Font3DS},position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"duplicateChangeAction"},tooltip:e.CHG_GOV_Change_Action_Duplicate,disabled:!0}},{id:"ca_summary_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:i.custom_view_options}}}},{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};var o={id:"creategroup",className:"menuCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"group-add",fontIconFamily:1},position:"far",tooltip:e.CHG_TOOLTIP_CREATE_GROUP,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",func:"assignGroupToCAs"}},category:"View"};let a="true";return"false"==t.getGlobalVariable().isFullLicence&&(a="false"),"true"===t.getGlobalVariable().CHG_CHANGE_GROUP&&"true"==a&&n.entries.unshift(o),n},i}),define("DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields",["UWA/Core","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices"],function(e,t,i,n){"use strict";return{createCustomNameField:function(t){var n=new e.Element("div",{});e.createElement("span",{html:t.name}).inject(n);var o=new e.Element("div",{class:"iconsDiv"});if("true"==t.onHold){var a=new e.Element("div",{class:"gridIconContainer",title:i.CHG_GOV_TOOLTIP_HOLD});e.createElement("div",{class:"fonticon fonticon-pause"}).inject(a),a.inject(o)}return o.inject(n),n.outerHTML},createCustomSeverity:function(t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==t.severity?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==t.severity&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new e.Element("div",{}),o=new e.Element("div",{class:"gridIconContainer"});e.createElement("div",{class:i}).inject(o);var a=e.createElement("span",{html:t.severityNLS});return o.inject(n),a.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(i){var o=new e.Element("div",{class:"members"});if(""!=i.changeCoordinatorFullName){var a=new e.Element("div",{class:"assignee"}),s="/api/user/getpicture/login/"+i.changeCoordinator+"/format/normal",r=t.getGlobalVariable().computeSwymUrl(s),l="";if(t.getGlobalVariable().isSwymInstalled)l=e.createElement("img",{class:"userIcon",src:r});else{var d=n.getAvatarDetails(i.changeCoordinatorFullName);(l=e.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(a);var c=e.createElement("span",{class:"userName",html:i.changeCoordinatorFullName});a.inject(o),c.inject(o)}return o.outerHTML},createCustomOwnerField:function(i){var o="/api/user/getpicture/login/"+i.owner+"/format/normal",a=t.getGlobalVariable().computeSwymUrl(o),s=new e.Element("div",{class:"members"}),r=new e.Element("div",{class:"assignee"}),l="";if(t.getGlobalVariable().isSwymInstalled)l=e.createElement("img",{class:"userIcon",src:a});else{var d=n.getAvatarDetails(i.ownerFullName);(l=e.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=e.createElement("span",{class:"userName",html:i.ownerFullName});return r.inject(s),c.inject(s),s.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),"true"==e.onHold&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),"true"==e.onHold&&t.push(i.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return i.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+i.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+i.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+i.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+i.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS}}}),define("DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig",[],function(){"use strict";var e={LEFT_PANEL_SIZE_EXPANDED:300,LEFT_PANEL_SIZE_COLLAPSED:40,MOBILE_CUTOFF:500,TABLET_CUTOFF:768,MOBILE_BREAKPOINT:500,PATH_HOME:"/home",PATH_LANDING_PAGE:"LandingPage",PATH_CO_INFO:"COInfo",PATH_CO_DETAILS:"CODetails",PATH_CA_INFO:"CAInfo",PATH_CA_DETAILS:"CADetails",PATH_CR_INFO:"CRInfo",PATH_CR_DETAILS:"CRDetails",PATH_IR_INFO:"IRInfo",PATH_IR_DETAILS:"IRDetails",PATH_CR_ORCHESTRATION_LEVEL1:"CROrchestrationL1",PATH_CR_ORCHESTRATION_LEVEL2:"CROrchestrationL2",PATH_CR_ORCHESTRATION_LEVEL3:"CROrchestrationL3",PATH_CO_ORCHESTRATION_LEVEL1:"COOrchestrationL1",PATH_CO_ORCHESTRATION_LEVEL2:"COOrchestrationL2",PATH_CO_ORCHESTRATION_LEVEL3:"COOrchestrationL3",PATH_NEW_CHANGE_ORDER:"NewChangeOrder",PATH_NEW_CHANGE_REQUEST:"NewChangeRequest",PATH_NEW_INVESTIGATION_REQUEST:"NewInvestigationRequest",PATH_NEW_CHANGE_ACTION:"NewChangeAction",PATH_OPEN_CHANGE_ORDER:"OpenChangeOrder",PATH_OPEN_CHANGE_REQUEST:"OpenChangeRequest",PATH_RECENTY_OPENED:"RecentlyOpened",PATH_MY_CHANGE_ORDERS:"MyChangeOrders",PATH_MY_CHANGE_REQUESTS:"MyChangeRequests",PATH_MY_INVESTIGATION_REQUESTS:"MyInvestigationRequests",PATH_MY_CHANGE_ACTIONS:"MyChangeActions",PATH_CO_IDCard:"Change Order ID Card",ROUTE_HOME:"home",ROUTE_LANDING_PAGE:"home.LandingPage",ROUTE_CO_INFO:"home.COInfo",ROUTE_CR_INFO:"home.CRInfo",ROUTE_CA_INFO:"home.CAInfo",ROUTE_IR_INFO:"home.IRInfo",ROUTE_CO_DETAILS:"home.COInfo.CODetails",ROUTE_CR_DETAILS:"home.CRInfo.CRDetails",ROUTE_CA_DETAILS:"home.CAInfo.CADetails",ROUTE_IR_DETAILS:"home.IRInfo.IRDetails",ROUTE_CR_ORCHESTRATION_LEVEL1:"home.CRInfo.CRDetails.OrchestrationL1",ROUTE_CR_ORCHESTRATION_LEVEL2:"home.CRInfo.CRDetails.OrchestrationL1.OrchestrationL2",ROUTE_CR_ORCHESTRATION_LEVEL3:"home.CRInfo.CRDetails.OrchestrationL1.OrchestrationL2.OrchestrationL3",ROUTE_CO_ORCHESTRATION_LEVEL1:"home.COInfo.CODetails.OrchestrationL1",ROUTE_CO_ORCHESTRATION_LEVEL2:"home.COInfo.CODetails.OrchestrationL1.OrchestrationL2",ROUTE_CO_ORCHESTRATION_LEVEL3:"home.COInfo.CODetails.OrchestrationL1.OrchestrationL2.OrchestrationL3",ROUTE_CR_DETAILS_LEVEL3PLUS:"home.CRInfo.CRDetails.OrchestrationL3plus",ROUTE_CO_DETAILS_LEVEL3PLUS:"home.COInfo.CODetails.OrchestrationL3plus",ROUTE_RECENTY_OPENED:"home.RecentlyOpened",ROUTE_MY_CHANGE_ORDERS:"home.MyChangeOrders",ROUTE_MY_CHANGE_REQUESTS:"home.MyChangeRequests",ROUTE_MY_INVESTIGATION_REQUESTS:"home.MyInvestigationRequests",ROUTE_MY_CHANGE_ACTIONS:"home.MyChangeActions"};return e}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm",["UWA/Class/View","i18n!DS/ENOChangeActionUX/assets/nls/ChangeAction","css!DS/ENOChangeActionUX/ENOChangeActionUX","UWA/Core","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Form","UWA/Class/Model","DS/UIKIT/Scroller","DS/PlatformAPI/PlatformAPI","DS/ENOChgRouter5/scripts/ChgRouter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Windows/ImmersiveFrame","DS/Windows/Dialog"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";var h=e.extend({slideinProposedContainer:void 0,slideinPropertiesContainer:void 0,triptychMain:void 0,mainContainer:void 0,form:void 0,buildSlideIn:function(e){this.form=e},getDialogTitle:function(e){return this.form.getHeading()},buildAddMemberDialog:function(e){this.form=e,e.slideInReference=this;var t=UWA.createElement("div",{id:"chgAddMemberMainContainer",class:"chgAddMemberMainContainer"}),i=UWA.createElement("div",{id:"chgAddMemberChildContainer",class:"chgAddMemberChildContainer"});let n=this.showAddMemberDialog(t);e.addMemberPanelImmerSiveFrame=n,this.getBody().inject(i),this.getFooter().inject(i),i.inject(t),document.getElementsByClassName("wux-windows-window-content")[0].style.overflow="hidden"},showAddMemberDialog:function(e){console.log("Hi");var t=new p({identifier:"ADD_MEMBER_PANEl"});t.reactToPointerEventsFlag=!1;new g({immersiveFrame:t,title:this.form.getHeading(),content:e,height:247,width:759,resizableFlag:!0,modalFlag:!0,identifier:"ADD_MEMBER_PANEl",closeButtonFlag:!1});return t.inject(widget.body),h.addMemberImmersiveFrame=t,t},getBody:function(){var e=UWA.createElement("div",{id:"chgAddMemberSlideinBody",class:"chgAddMemberSlideinBody"});return this.form.getBody().inject(e),e},getFooter:function(){var e=this,t=this.form.getFooter();return new a({value:u.CHG_GOV_Button_Cancel,className:"default"}).inject(t).addEvent("onClick",function(){e.cancelHandler()}),UWA.createElement("div",{id:"chgAddMemberSlideinFooter",class:"chgAddMemberSlideinFooter",html:t})},cancelHandler:function(){this.form.addMemberPanelImmerSiveFrame.remove()}});return h}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){var i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(){let i=!1;return"true"===t.getGlobalVariable().ECM_EnableAddMemberGenericComponent&&(i=!0),{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_AddMember,position:"far",category:"addRemove",action:{module:i?"DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCOAddMemberHandler":"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgAddMemberLayout",func:"launchAddMemberPanel"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Remove,position:"far",disabled:!0,category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout",func:"removeHandler"}}},{id:"filter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"filter",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Filter,position:"far",category:"View",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMemberFilterLayout",func:"launchFilterMemberPanel"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},i}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter",["UWA/Class","UWA/Class/Promise","UWA/Core","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n){"use strict";return{_initializationPromiseBIFilter:null,_isBIFilterInitialized:!1,_biFilter:null,_currentView:"",_inputDocument:null,_isBIFilterActivated:!1,initializeBIFilter:function(e){this._inputDocument=e,this._cleanBIFilterProxy(),this._initializationPromiseBIFilter=this._createBIFilterProxy(),this._isBIFilterActivated=!0},cleanPathTag:function(){if(!0===this._isBIFilterInitialized){this._biFilter.setPathTags({nodes:[],paths:[]})}},_createBIFilterProxy:function(){var e=this;return new t(function(t,i){require(["DS/ENOFilterBIUX/FilterBIComponentProxy","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(n,o){var a=widget.id,s={tenant:o.getGlobalVariable().tenant,processingMode:"appProcessing",colorize:!0,widgetId:a,appId:widget.getValue("appId"),isWebInWin:o.getGlobalVariable().isNative,platformServices:o.getGlobalVariable().tenantMappings};1==o.getGlobalVariable().is3DSpace&&(s.contextId="context1");try{e._biFilter=new n(s),e._biFilter.addEvent("fetchFilterBIColorizeEvent",e._onFilterBIColorize,e),e._biFilter.addEvent("FilterBIUnColorize",e._onFilterBIUnColorize,e),e._biFilter.addEvent("fetchFilterBIFilteringEvent",e._onFilterBIFilteringEvent,e)}catch(e){i(new Error("The BIFilter proxy could not be initialized: "+e))}e._isBIFilterInitialized=!0,t()})})},focusOnSubjects:function(e){var t=this._biFilter;if(t&&t._biFilter){if(0===e.length)return void t._biFilter.unfocus();for(var i={},n=[],o=0;o<e.length;o++)i[e[o].options.physicalId]="3DSpace",n.push("pid://"+e[o].options.physicalId);t._biFilter.myTagProxy.focusOnSubjects(n,!0,i)}},_onSetPathTags:function(e,t){var i;if((i=this)._inputDocument=t,!1!==(i=this)._isBIFilterInitialized){var n={nodes:[],paths:[]};if(e&&e.data)e.data.roots.map(e=>{let t=e.options.grid.id;n.nodes.push(t)});i._biFilter.setTagsWithFetchSynthesis(n.nodes,function(){widget.dispatchEvent("onSetPathTags")})}else i._initializationPromiseBIFilter.then(function(){i._onSetPathTags(e,t)})},_onSetPathTagsForProposedRealized:function(e,t){var i;(i=this)._inputDocument=t,!1!==(i=this)._isBIFilterInitialized?i._biFilter.setTagsWithFetchSynthesis(e,function(){widget.dispatchEvent("onSetPathTags")}):i._initializationPromiseBIFilter.then(function(){i._biFilter.setTagsWithFetchSynthesis(e,function(){widget.dispatchEvent("onSetPathTags")})})},_cleanBIFilterProxy:function(){this._biFilter&&this._biFilter.cleanProxy&&this._biFilter.cleanProxy()},_activate:function(){this._biFilter&&this._biFilter.cleanProxy&&this._biFilter.activate()},_deactivate:function(){this._biFilter&&this._biFilter.cleanProxy&&this._biFilter.deactivate()},_taggerWebInWinEvent:function(e){this._biFilter&&this._biFilter.taggerWebInWinEvent&&this._biFilter.taggerWebInWinEvent(e)},_onFilterBIFilteringEvent:function(e){n.publish(`${this._inputDocument.options.id} of ${widget.id}`,e),e&&i.is(e.localfilters,"object")&&Object.keys(e.localfilters).length>0?widget.setValue("pathTags",e.localfilters):widget.deleteValue("pathTags")},_onFilterBIColorize:function(e,t,i){n.publish(`${this._inputDocument.options.id} colorize ${widget.id}`,e)},_onFilterBIUnColorize:function(e){n.publish(`${this._inputDocument.options.id} uncolorize ${widget.id}`,e)}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/applicability/ChgApplicabilityfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"applicability-container"}))},updateFacet:function(){var e=this;o.mask(this.elements.container),require(["DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView"],function(t){if(e.elements&&e.elements.container){var i=e.getModel();if(!i)return!1;if(1==i.isMergedModel())return;var n={model:i,container:e.elements.container};e.elements.container.setContent(""),new t(n).build(),o.unmask(e.elements.container)}})},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovCRTagNavigatorProxy",["DS/TagNavigatorProxy/TagNavigatorProxy","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){"use strict";var i=null,n=null,o=[],a={init:function(o){var s={widgetId:widget.id,filteringMode:"FilteringOnServer",colorize:!0};i&&i.die(),n=o.DataContext,(i=e.createProxy(s)).addOpenTaggerListener(function(){require(["DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","i18n!DS/ENOChgActionGridUX/assets/nls/ENOChgActionDataGridNLS"],function(e,t,i){var n={level:"info",title:i.WARNING_TAGGER_INFO,subtitle:i.WARNING_TAGGER,sticky:!1};window.notif=e,t.removeLastNotificationDisplayed(),t.setNotificationManager(window.notif),t.setFadeOutPolicy(2),t.setStackingPolicy(1),t.setRemoveStackOnFirstTimeoutFlag(!0),null!=t._notifScreen&&t._notifScreen.addClassName("ca-align-center"),e.addNotif(n)})}),i.addEvent("onFilterChange",function(e){var o=i.getCurrentFilter();n.ChgCRlayoutModel.empty(),Object.keys(o.allfilters).length>0?(t.getGlobalVariable().indexCRMode="true",n.refreshGrid(e,o)):(t.getGlobalVariable().indexCRMode="true",n.refreshGrid(e,o),t.getGlobalVariable().indexCRMode="false",n.refreshGrid(e,o))}),i.addEvent("colorize",function(e){var t=e.tagColors;a._colorize(t)}),i.addEvent("unColorize",function(e){a._uncolorize()})},setTags:function(e,t){if(i&&t){var n=a.getTagsList(t);t.forEach(function(e){if(-1!=n.indexOf(e.sixw)){for(var t=!1,i=0;i<o.length;i++)if(o[i].sixw==e.sixw&&o[i].object==e.object){o[i]=e,t=!0;break}t||o.push(e)}})}i.setTags(e,o)},deactivate:function(){i&&i.deactivate()},activate:function(){i&&i.activate()},clearLocalFilter:function(){i&&i.clearLocalFilter()},getTaglistData:function(){return[{sixw:"ds6w:what/ds6w:status",modelField:"maturity",compareType:"AcontainsB"},{sixw:"ds6w:why/ds6w:fulfills/ds6w:severity",modelField:"severity",compareType:"String"},{sixw:"ds6w:who/ds6w:responsible",modelField:"responsible",compareType:"String"},{sixw:"ds6w:when/ds6w:ends/ds6w:dueDate",modelField:"dueDate",compareType:"date"}]},getTagsList:function(e){var t=[];return e&&e.forEach(function(e){t.push(e.sixw)}),a.getTaglistData().forEach(function(e){t.push(e.sixw)}),t},tagCompare:function(e,t,i){if(t&&e)if("String"==i){if(e==t)return!0}else if("AcontainsB"==i){if(e.contains(t))return!0}else if("BcontainsA"==i){if(t.contains(e))return!0}else if("Array"==i){if(t.indexOf(e)>-1)return!0}else if("date"==i)return o=t,a=n=e,n.length>7?a=new UWA.Date(n).strftime("%Y-%m-%d"):n.length>4&&(a=new UWA.Date(n).strftime("%Y-%m")),!!o.contains(a);var n,o,a;return!1},_uncolorize:function(){"tree"==n.crGridView.options.columns[0].dataIndex&&(n.crGridView.options.columns[0].getCellKPIColor=null,n.crGridView.coDatagrid.prepareUpdateView(),n.crGridView.coDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.crGridView.tilesView&&(n.crGridView.tilesView.getColor=function(){},n.crGridView.tilesView.prepareUpdateView(),n.crGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))},_colorize:function(e){var t=a.getTagsList().indexOf(e[0].predicate);if(t>=0){var i=a.getTaglistData()[t];"tree"==n.crGridView.options.columns[0].dataIndex&&(n.crGridView.options.columns[0].getCellKPIColor=function(t){for(var n=0;n<e.length;n++)if(a.tagCompare(e[n].object,t.nodeModel.options.grid[i.modelField],i.compareType))return e[n].color;return null},n.crGridView.caDatagrid.prepareUpdateView(),n.crGridView.caDatagrid.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0)),n.crGridView.tilesView&&(n.crGridView.tilesView.getColor=function(t){t.options.grid;for(var n=0;n<e.length;n++)if(a.tagCompare(e[n].object,t.options.grid[i.modelField],i.compareType))return e[n].color},n.crGridView.tilesView.prepareUpdateView(),n.crGridView.tilesView.pushUpdateView({updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1},!0))}}};return a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(t){let i=t.accessBits;const n=!(!i||"true"!==i.AddImpactBasis);!i||i.RemoveImpactBasis,!i||i.AddImpactedItems;return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_AddImpactBasis,position:"far",visibleFlag:n,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"addExistingHandler"}}},{id:"changeAssessment",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_ChangeAssessment,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"changeAssessmentHandler"}}},{id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:"Mass Update",position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"massUpdateHandler"}}},{id:"addImpactedItem",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"change-request-impacted-items",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_AddImpactedItem,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"addImpactedItemHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",func:"removeHandler"}}},{id:"impactBasis_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable",["DS/DataDragAndDrop/DataDragAndDrop","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o){"use strict";var a={makeDroppable:function(n,s){e.droppable(n,{drop:function(e,r,l){if(l.stopPropagation&&l.stopPropagation(),l.preventDefault&&l.preventDefault(),l.dataTransfer&&l.dataTransfer.dropEffect&&(l.dataTransfer.dropEffect="copy"),UWA.is(e)&&""!=e){var d=JSON.parse(e),c=i.checkTenantInforamation(d);if(0!=c.TenantInfoMissing.length)t.error(o.CHG_GOV_Pref_PlatformMissing_Error);else if(0!=c.DiffTenantData.length)t.error(o.CHG_GOV_Pref_PlatformDoesNotMatch_Error);else{d=i.removeDuplicatesToBeDroppedObjects(d);var u=i.filterBasedOnServiceId(d);if(u.incorrectServiceInfo&&Array.isArray(u.incorrectServiceInfo)&&u.incorrectServiceInfo.length>0){var p=o.CHG_GOV_WARN_DROP_SKIPPED+"<br/>";for(var g in u.incorrectServiceInfo)p+=u.incorrectServiceInfo[g]+"<br/>";t.warn(p,"false")}a.ExecuteDrop(d,s)}}else t.error(o.CHG_GOV_Drop_Not_Supported);n.style.borderWidth="0px"},over:function(){arguments[0].setStyles({borderStyle:"solid",borderColor:"#368ec4",borderWidth:"1px"})},leave:function(){arguments[0].setStyle("borderWidth","0px")}})},ExecuteDrop:function(e,i){if(e){var n=e.data.items;UWA.is(n)&&UWA.is(n.length)&&n.length>0&&i(n)}else t.error(o.CHG_GOV_Drop_Not_Supported)}};return a}),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/view/ChgIDCardHeaderBuilder",["UWA/Class/View","UWA/Core","DS/Handlebars/Handlebars","DS/ResizeSensor/js/ResizeSensor","DS/UIKIT/DropdownMenu","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/IDCardHeaderMain.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/AttributesPartial.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/MinifiedAttributesPartial.html","text!DS/ENOChgGovernanceUX/scripts/components/idCardHeader/template/AttributeSectionPartial.html","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChangeIDCard","DS/PlatformAPI/PlatformAPI","DS/Controls/Loader","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ChangeMaturityWidget/ChangeMaturityWidget","DS/Controls/TooltipModel","DS/ENOChgRouter5/scripts/ChgRouter","css!DS/ChangeMaturityWidget/ChangeMaturityWidget","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D){"use strict";var b=e.extend({name:"chg-id-card",className:function(){return this.getClassNames("-container")},domEvents:{"click .toggle-minified-icon":"toggleMinified","click .attribute-value":"_triggerClickOnAttributeEvent"},init:function(e){console.log("inside init ChgIDCardHeaderBuilder");this._parent.call(this,e)},setup:function(){this.container&&(this.container.empty(),this.container.destroy()),this.modelEvents=this.model.get("modelEvents"),this.modelEventsTokens=[],this._subscribeToModelEvents(),this._subscribeToPlatformEvents();var e=this._parseAttributes(this.model.get("attributes"),this.model.get("attributesLayout"));this.templateOptions={withHomeButton:void 0!==this.model.get("withHomeButton")&&this.model.get("withHomeButton"),withExpandCollapseButton:void 0!==this.model.get("withExpandCollapseButton")&&this.model.get("withExpandCollapseButton"),withActionsButton:void 0===this.model.get("withActionsButton")||this.model.get("withActionsButton"),withInformationButton:void 0!==this.model.get("withInformationButton")&&this.model.get("withInformationButton"),withToggleMinifiedButton:void 0!==this.model.get("withToggleMinifiedButton")&&this.model.get("withToggleMinifiedButton"),showBackButton:void 0!==this.model.get("showBackButton")&&this.model.get("showBackButton"),thumbnail:this.model.get("thumbnail"),smallIcon:this.model.get("thumbnail"),title:this.model.get("title"),version:"-"!=this.model.get("version")?this.model.get("version"):"",attributes:e,dropdown:void 0!==this.model.get("dropdown")&&this.model.get("dropdown"),freezones:this.model.get("freezones"),minified:this.model.get("minified"),nls:d.templateNLS},void 0===this.model.get("customEvents")&&this.model.set("customEvents",{}),this.modelOnChangeListener=function(e){},this.model.addEvent("onChange",this.modelOnChangeListener)},render:function(){var e=this,t=i.compile(a);i.compile(s),i.compile(r);i.registerPartial("Attributes",s),i.registerPartial("MinifiedAttributes",r),i.registerPartial("AttributeSection",l),e.container.setHTML(t(e.templateOptions)),e.addLoaderInAttributes(e.templateOptions.attributes),e.addCustomTooltipsInAttributes(e.templateOptions.attributes),e.templateOptions.withHomeButton||e.templateOptions.withExpandCollapseButton||e.templateOptions.showBackButton||(e.container.addClassName("no-sidebar-buttons"),e.container.getElement(".sidebar-buttons").addClassName("hidden")),e.templateOptions.withActionsButton&&e.templateOptions.dropdown&&(e.templateOptions.dropdown.target=e.container.getElement(".actions-menu-icon"),e.templateOptions.dropdown.items.length?(e.container.getElement(".actions-menu-icon").removeClassName("hidden"),e.templateOptions.dropdownElement=new o(e.templateOptions.dropdown)):e.container.getElement(".actions-menu-icon").addClassName("hidden"));var n=e.model.get("freezones");void 0!==n&&n.length>0&&n.forEach(function(t,i){var n=e.container.getElement(".free-zone-"+i);if("string"==typeof t){var o=D.escapeHTML(t);n.innerHTML=o,""!=t&&(n.tooltipInfos=new m({title:v.CHG_Common_Dialog_Description,longHelp:t,mouseRelativePosition:!1,allowUnsafeHTMLLongHelp:!1,position:"left",moreHelpCB:function(){C.getDependency("xChangeApp")._applicationChannel.publish({event:"information-panel-open",data:null})}}))}else t instanceof HTMLElement?n.appendChild(t):void 0!==t.render&&t.render().inject(n)}),e.requestID=window.requestAnimationFrame(function(){e.resize()}),e.templateOptions.minified&&e.container.addClassName("minified");var d=e.getMaturityContainer();return e.createMaturitySpan(d),e},addLoaderInAttributes:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){var o,a,s,r=i[n];if(r.showLoader)if(r.displayWhenMinified?(o=this.container.getElements("#"+r.command)[0].getElementsByClassName("attribute-value")[0].firstChild,a=this.container.getElements("#"+r.command)[1].getElementsByClassName("attribute-value")[0].firstChild):a=this.container.getElements("#"+r.command)[0].getElementsByClassName("attribute-value")[0].firstChild,(s=new u).height="15",s.inject(a),s.on(),o)(s=new u).height="15",s.inject(o),s.on()}},addCustomTooltipsInAttributes:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){i[n].valueCustomTooltip}},createMaturitySpan:function(e,t){var i=this;if(!i.maturityCmd||"true"==t){i.stateDiv=UWA.createElement("div",{styles:{overflow:"hidden",height:"100%"},class:"maturity-container"});var n={securityContext:{SecurityContext:g.getGlobalVariable().getSecurityContext(),tenant:g.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}};i.maturityCmd&&"true"!=t||(i.maturityCmd=new p),i.maturityCmd.executeCompactViewAsync(widget,i.stateDiv,n,i.model.id).then(function(){var t=i.maturityCmd.changeMaturityWidget.currentState,n=i.maturityCmd.changeMaturityWidget.current,o={valueDisplay:t,valueActual:n};i.model.set("currentState",o),console.log("Maturity  updated"),i.modelEvents.publish({event:"maturity-updated",data:o});let a={valueDisplay:t,valueActual:n,id:i.model.id};c.publish("Change-Maturity-Update",a),i.createMaturitySpan(e,"true")})}if(e){i.model.get("accessBits");if(i.model.get("onHold")){var o="["+v.CHG_GOV_DataGrid_Column_Maturity_Hold+"]";e.innerText=i.model.get("currentState").valueDisplay+" "+o,e.classList.remove("type-hyperlink")}else if(e.innerText="",i.stateDiv.inject(e),e.classList.add("type-hyperlink"),this.container.hasClassName("minified"))if("Complete"===i.model.get("currentState").valueActual&&"ChangeOrder"!=i.model.get("isKindOfType")){const e=i.container.getElement(".attributes-section-when-minified-container > .attribute-section#maturity .wrapper");null!=e&&(e.style.paddingTop="10px")}else if("Implemented"===i.model.get("currentState").valueActual&&"ChangeOrder"===i.model.get("isKindOfType")){const e=i.container.getElement(".attributes-section-when-minified-container > .attribute-section#maturity .wrapper");null!=e&&(e.style.paddingTop="10px")}}},createNewAttributes:function(e){for(var t=this.model.get("attributes"),i=this.model.get("accessBits"),n=0;n<t.length;n++){var o=(l=t[n]).accessBit;if(o){var a=i[o];l.editable="false"!=a}}for(var s=e.attributes,r=0;r<t.length;r++){var l=t[r];for(var c in s)c==l.command&&(null!=s[c].editable&&(l.editable=s[c].editable),null!=s[c].displayWhenMinified&&(l.displayWhenMinified=s[c].displayWhenMinified),null!=s[c].fieldNLS&&(l.name=s[c].fieldNLS),null!=s[c].valueActual&&(l.valueActual=s[c].valueActual),null!=s[c].valueDisplay&&(l.valueDisplay=s[c].valueDisplay,l.valueTooltip=s[c].valueDisplay),null!=s[c].valueTooltip&&(l.valueTooltip=s[c].valueTooltip),null!=s[c].valueCustomTooltip&&(l.valueTooltip="",l.valueCustomTooltip=s[c].valueCustomTooltip),1==s[c].showLoader?(l.valueDisplay="",l.valueActual="",l.valueDisplay="",l.valueTooltip=d.loading):0==s[c].showLoader&&(l.showLoader=!1))}return t},createNewMenu:function(){var e=[],t=[],i=this.model.get("accessBits");this.templateOptions.dropdown.items.concat(this.templateOptions.dropdown.hiddenItems).forEach(function(n,o){"true"==i[n.accessBit]?e.unshift(n):t.push(n)}),this.templateOptions.dropdown.items=e,this.templateOptions.dropdown.hiddenItems=t},reRenderHeaderNonAttributeFields(e){var t=this;e.title&&(t.container.getElement(".name").innerHTML=e.title,t.container.getElement(".name").title=e.title),e.freezones&&e.freezones.constructor===Array&&e.freezones.forEach(function(e,i){var n=t.container.getElement(".free-zone-"+i);"string"==typeof e?n.innerHTML=e:e instanceof HTMLElement?n.appendChild(e):void 0!==e.render&&e.render().inject(n)})},reRenderHeaderAttributes:function(e){this.templateOptions.attributes=this._parseAttributes(e,this.model.get("attributesLayout"));var t=i.compile(s),n=i.compile(r);this.container.getElement(".attributes-placeholder").innerHTML=t({attributes:this.templateOptions.attributes}),this.container.getElement(".attributes-section-when-minified-container").innerHTML=n({attributes:this.templateOptions.attributes}),this.addLoaderInAttributes(this.templateOptions.attributes),this.addCustomTooltipsInAttributes(this.templateOptions.attributes);var o=this.getMaturityContainer();this.createMaturitySpan(o),this.resize()},getMaturityContainer:function(){for(var e,t,i=!0,n=this.templateOptions.attributes,o=0;o<n.length;o++)for(var a=n[o],s=0;s<a.length;s++){var r=a[s];"maturity"==r.command&&(i=r.displayWhenMinified)}return i?(e=this.container.getElements("#maturity")[0].getElementsByClassName("attribute-value")[0].firstChild,t=this.container.getElements("#maturity")[1].getElementsByClassName("attribute-value")[0].firstChild):t=this.container.getElements("#maturity")[0].getElementsByClassName("attribute-value")[0].firstChild,this.templateOptions.minified?e:t},reRenderHeaderMenu:function(){this.templateOptions.dropdownElement&&this.templateOptions.dropdownElement.destroy(),0==this.templateOptions.dropdown.items.length?this.container.getElement(".actions-menu-icon").addClassName("hidden"):(this.container.getElement(".actions-menu-icon").removeClassName("hidden"),this.templateOptions.dropdownElement=new o(this.templateOptions.dropdown))},attachResizeSensor:function(){var e=this;e.resizeSensor=new n(e.container,function(){e.resize()}),e.container.getElements(".attributes-placeholder .attribute-section").forEach(function(e){var t=e.getElement(".attribute-value");t.style.width=e.offsetWidth-e.getElement(".attribute-name").offsetWidth-21+"px",t.style.overflow="hidden",t.style.textOverflow="ellipsis"})},resize:function(){var e=this.container.offsetWidth;this.container.hasClassName("minified")&&this._checkMinifiedAttributesOverflow();this.container.offsetWidth;var t=this.container.getElement('.attribute-columns[data-column-index="0"]'),i=this.container.getElement('.attribute-columns[data-column-index="1"]'),n=this.container.getElement('.attribute-columns[data-column-index="2"]'),o=this.container.getElement('.attribute-columns[data-column-index="3"]'),a=this.container.getElement(".image-placeholder"),s=this.container.getElement(".free-zone-0"),r=0;a&&(a.hasClassName("hidden")?(a.removeClassName("hidden"),r=a.offsetWidth,a.addClassName("hidden")):r=a.offsetWidth),e-20<t.offsetWidth+r?(this.container.addClassName("no-image-placeholder"),a.addClassName("hidden")):(this.container.removeClassName("no-image-placeholder"),a.removeClassName("hidden"));var l=0;i&&(i.hasClassName("hidden")?(i.removeClassName("hidden"),l=i.offsetWidth,i.addClassName("hidden")):l=i.offsetWidth),null!=i&&(e-40<t.offsetWidth+a.offsetWidth+l?i.addClassName("hidden"):i.removeClassName("hidden"));var d=0;n&&(n.hasClassName("hidden")?(n.removeClassName("hidden"),d=n.offsetWidth,n.addClassName("hidden")):d=n.offsetWidth),null!=n&&(e-60<t.offsetWidth+a.offsetWidth+i.offsetWidth+d?n.addClassName("hidden"):n.removeClassName("hidden"));var c=0;o&&(o.hasClassName("hidden")?(o.removeClassName("hidden"),c=o.offsetWidth,o.addClassName("hidden")):c=o.offsetWidth),null!=o&&(e-100<t.offsetWidth+a.offsetWidth+i.offsetWidth+n.offsetWidth+c?o.addClassName("hidden"):o.removeClassName("hidden"));null!=o?0==o.offsetWidth||e-200<t.offsetWidth+a.offsetWidth+i.offsetWidth+n.offsetWidth+450?s.addClassName("hidden"):s.removeClassName("hidden"):e-80<t.offsetWidth+a.offsetWidth+i.offsetWidth+n.offsetWidth+450?s.addClassName("hidden"):s.removeClassName("hidden")},minify:function(){if(this.templateOptions.minified=!0,!this.container.hasClassName("minified")){this.container.addClassName("minified"),this.modelEvents.publish({event:"idcard-minified"}),console.log("idcard-minified");var e=this.getMaturityContainer();this.createMaturitySpan(e)}},expand:function(){if(this.templateOptions.minified=!1,this.container.hasClassName("minified")){this.container.removeClassName("minified"),this.modelEvents.publish({event:"idcard-expanded"});var e=this.getMaturityContainer();this.createMaturitySpan(e)}},toggleMinified:function(){var e=this.container.querySelector(".toggle-minified-icon"),t=this.container.hasClassName("minified");if(t){const t=this.container.getElement(".attributes-section-when-minified-container > .attribute-section#maturity .wrapper");null!=t&&(t.style.paddingTop="0px"),this.expand(),null!==e&&(e.classList.remove("fonticon-expand-down"),e.classList.add("fonticon-expand-up"),e.title=d.templateNLS.collapse)}else this.minify(),null!==e&&(e.classList.remove("fonticon-expand-up"),e.classList.add("fonticon-expand-down"),e.title=d.templateNLS.expand);var i=!t;console.log("idcard-header-minified"+i),i?(widget.getElement(".outerContainerTabDiv").removeClassName("expanded-header-height"),widget.getElement(".outerContainerTabDiv").addClassName("minified-header-height")):(widget.getElement(".outerContainerTabDiv").addClassName("expanded-header-height"),widget.getElement(".outerContainerTabDiv").removeClassName("minified-header-height"))},_checkMinifiedAttributesOverflow:function(){for(var e=this.container.getElement(".attributes-section-when-minified-container"),t=e.getElements(".attribute-section"),i=0;i<t.length;i++)t[i].removeClassName("hidden");if(!(e.scrollWidth<=e.offsetWidth))for(var n=0,o=0;o<t.length;o++)(n+=t[o].offsetWidth)>e.offsetWidth&&t[o].addClassName("hidden")},_triggerClickOnAttributeEvent:function(e){var t={index:parseInt(e._uwaTarget.parentElement.getAttribute("data-attribute-index"),10),attributeName:e._uwaTarget.parentElement.querySelector(".attribute-name").innerHTML};this.modelEvents.publish({event:"idcard-attributes-clicked",data:t})},_parseAttributes:function(e,t){var i=[],n=0;return void 0!==e&&(i.push(e.slice(0,t[0])),t[1]&&i.push(e.slice(t[0],t[0]+t[1])),t[2]&&i.push(e.slice(t[0]+t[1],t[0]+t[1]+t[2])),t[3]&&i.push(e.slice(t[0]+t[1]+t[2],t[0]+t[1]+t[2]+t[3])),i.forEach(function(e){e.forEach(function(e){e.index=n++})})),i},idCardHeaderUpdate:function(e){if(console.log("idcard-header-update modelEvents"),e.accessBits&&(this.model.set("accessBits",e.accessBits),this.createNewMenu(),this.reRenderHeaderMenu()),e.attributes||e.accessBits){var t=this.createNewAttributes(e);this.reRenderHeaderAttributes(t),e.attributes&&e.attributes.owner&&this.model.set("owner",e.attributes.owner.valueActual)}var i=!1;if(e.title&&(this.model.set("title",e.title),i=!0),e.freezones&&e.freezones.constructor===Array&&e.freezones[0]){var n=this.model.get("freezones");n[0]=e.freezones[0].data,this.model.set("freezones",n),i=!0}i&&this.reRenderHeaderNonAttributeFields(e)}});return b.prototype._subscribeToPlatformEvents=function(){var e=this;c.unsubscribe("idcard-header-update"+widget.id),c.subscribe("idcard-header-update"+widget.id,function(t){e.idCardHeaderUpdate(t)}),c.unsubscribe("idcard-header-update-maturity"),c.subscribe("idcard-header-update-maturity",function(){console.log("====subscribe--idcard-header-update-maturity---");var t=e.getMaturityContainer();e.createMaturitySpan(t,"true")}),b.prototype.platformEventsSubscribed=!0},b.prototype._subscribeToModelEvents=function(){var e=this;e.model.get("modelEvents").subscribe({event:"idcard-header-update"+widget.id},function(t){e.idCardHeaderUpdate(t)}),e.model.get("modelEvents").subscribe({event:"idcard-header-update-maturity"},function(){var t=e.getMaturityContainer();e.createMaturitySpan(t,"true")})},b}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovExpandInputTextBox",["UWA/Core","DS/Controls/Abstract","DS/Controls/LineEditor","DS/Controls/Button","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o){"use strict";var a=null,s=function(){null!=a&&(a.that.lineEditor._myInput.setStyle("width","auto"),a.that.createList.inject(a.that.dropdown),a.that.lineEditor.inject(a.that.createCAContainer,"top"),a.remove(),a=null)};return t.inherit({name:"ExpandInput",_preBuildView:function(){this.elements.container=new UWA.Element("div",{class:"container-expandInput wux-tweakers",id:"quickCreateContainer"}),this.createCAContainer=new UWA.Element("div",{class:"hideBox transition"}),this.lineEditor=new i({placeholder:o.CHG_GOV_CREATE_NEW_PLACEHOLDER,sizeInCharNumber:25,selectAllOnFocus:!0,displayClearFieldButtonFlag:!0}),this.lineEditor.inject(this.createCAContainer),this.lineEditor.getContent().addClassName("prevent-ios-zoom-in"),this.dropdown=new UWA.Element("div",{class:"createCAdropdown"}),this.createList=new UWA.Element("ul",{class:"createUL"});new UWA.Element("li",{class:"createLI"});this.dropdownParent=new UWA.Element("div",{class:"dropdownParent"});new UWA.Element("span",{class:"item-icon fonticon fonticon-doc cursorPointer"}),UWA.createElement("span",{class:"item-text",html:o.CHG_CreateCA,title:o.CHG_CreateCA,id:"idCreateCA"});this.createList.addEvents({click:function(){console.log("CO title entered.."),s()}}),this.cancelBtn=new n({label:"Cancel",emphasize:"primary",domId:"expandInput_cancel_btn"}),this.cancelBtn.getContent().addClassName("expandInput_cancel_btn"),this.createCAContainer.inject(this.elements.container);var e={icon:{}};e.icon.iconName="plus",e.icon.fontIconFamily=1,e.tooltip="YOLO";this.createCAContainer,this.lineEditor;this.plusBtn=new n(e),this.plusBtn.getContent().addClassName("wux-tweakers-multirep-button").addClassName("wux-tweaker-function").addClassName("wux-ui-style-icon"),this.plusBtn.inject(this.elements.container),this._parent(),this.isMultiSelection=!1;this.cancelBtn.addEventListener("click",function(){s()}),this.createList.addEventListener("click",function(){s()}),document.getElementById("zPlaneid")&&document.getElementById("zPlaneid").addEventListener("mouseup",function(e){if(s(),e.target.hasClassName("prevent-ios-zoom-in")||e.target.getParent().hasClassName("prevent-ios-zoom-in"));else if(e.target.getParent().hasClassName("icon-blue"));else{var t=document.querySelectorAll("#quickCreateContainer")[0];t&&(t.getChildren()[0].removeClassName("showBox"),t.getChildren()[1].removeClassName("icon-blue"))}}),a=null},toggleDisplayLineEditor:function(){console.log(arguments,this)},getModalInputBox:function(e){return null==a&&(a=UWA.createElement("div",{class:"input_FloatingDiv",id:"input_FloatingDiv"}),this.lineEditor.remove(),this.createList.remove(),a.addContent(this.lineEditor),a.addContent(this.createList),a.addContent(this.cancelBtn),a.that=this,a.that.lineEditor._myInput.setStyle("width","100%"),e.top&&a.setStyle("top",e.top),e.left&&(e.left+164>widget.body.getBoundingClientRect().width?(a.setStyle("left",0),a.setStyle("width","100%")):a.setStyle("left",e.left)),a.addEventListener("click",function(e){e.stopPropagation()})),a},removeModalInputBox:function(){s()}})}),define("DS/ENOChgGovernanceUX/scripts/model/investigationRequest/ChgIRDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,o,a,s,r,l){"use strict";var d=r.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",d)},loadIndexedInvestigationRequest:function(e,t){var o=e,a=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var r=this.createCustomNameField(t[s]);t[s].co_name=r;var l=this.createCustomSeverity(t[s]);t[s].sev=l;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var c=this.createCustomOwnerField(t[s]);t[s].co_Owner=c;var u=this.getStatusBarIcons(t[s]),p=this.statusbarIconsTooltips(t[s]),g=this.getSubLevel(t[s]),h=this.getDescription(t[s]);t[s].maturityWithBadge=t[s].maturityNLS;for(var m=this.createCustomTooltip(t[s]),C=!1,f=o.getChildren(),v=0;v<f.length;v++){f[v].options.grid.id==t[s].id&&(C=!0)}if(!C){var D=i.createTreeNodeDataModel(a,{label:t[s].title,subLabel:g,description:h,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:u,statusbarIconsTooltips:p,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(D)}}e.pushUpdate()},loadInvestigationRequestData:function(e,t){var a=e;let s=new n;e.prepareUpdate();for(let n=0;n<t.length;n++){let c=this.createCustomNameField(t[n],"NonIndex");t[n].co_name=c;let u=this.createCustomSeverity(t[n]);t[n].sev=u;let p=this.createCustomChangeCoordinatorField(t[n]);t[n].co_Coordinator=p;let g=this.createCustomOwnerField(t[n]);t[n].co_Owner=g;let h=this.getStatusBarIcons(t[n],"NonIndex"),m=this.statusbarIconsTooltips(t[n],"NonIndex"),C=this.getSubLevel(t[n]),f=this.getDescription(t[n]);t[n].maturityWithBadge=t[n].maturityNLS;let v=this.createCustomTooltip(t[n]);for(var r=!1,l=(o.getGlobalVariable().existingCRIds,r=!1,a.getChildren()),d=0;d<l.length;d++){l[d].options.grid.id==t[n].id&&(r=!0)}if(!r){let o=i.createTreeNodeDataModel(s,{label:t[n].title,subLabel:C,description:f,grid:t[n],icons:[t[n].iconURL],thumbnail:t[n].thumbnail,statusbarIcons:h,statusbarIconsTooltips:m,customTooltip:v,contextualMenu:["Copy1","Move1"]});e.addChild(o)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"crSummaryNotEmpty"}),e.unselectAll();let o=new n,a=this.createCustomNameField(t[0]);t[0].co_name=a;let s=this.createCustomSeverity(t[0]);t[0].sev=s;let r=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=r;let l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;let d=this.getStatusBarIcons(t[0]),c=this.statusbarIconsTooltips(t[0]),u=this.getSubLevel(t[0]),p=this.getDescription(t[0]),g=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(o,{label:t[0].title,subLabel:u,description:p,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:g});e.getXSO().add(h),e.addChild(h,0)},createCustomNameField:function(e,t){let i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);let n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(e),e.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_TOOLTIP_NEW_REQUEST});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){let t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){let i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{let t=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(i);let l=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),l.inject(t)}return t.outerHTML},createCustomSeverity:function(e){let t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);let o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomMaturity:function(e){let t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");let i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){let i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){let i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(a.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(a.CHG_TOOLTIP_NEW_REQUEST),i},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){let t="";return t=e.name+" | "+e.ownerFullName},getDescription:function(e){let t="";return t=e.maturityNLS},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgVersionExplorerLoader",["DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i){"use strict";return{VersionExplorerLoaderFactory:function(n,o,a,s,r,l,d){let c=i.getGlobalVariable().tenant,u=i.getGlobalVariable().baseURL,p=i.getGlobalVariable().getSecurityContext();const g=UWA.createElement("div",{styles:{height:"100%"}});g.inject(a);const h=l.value=new e({versionGraphContainer:g,customizeColumnHash:d?d.customizeColumnHash:{},customizeColumnAttributeHash:d?d.customizeColumnAttributeHash:{},customizeToolbarHash:d.customizeToolbarHash?d.customizeToolbarHash:{}}),m=[{"3DSpace":u,platformId:c}];t.setOption("platform_services",m),h.setMultiSelectionMode(),h.disableCommands(),h.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:n,securityContext:p,tenantId:c,type:r,context:null,dataModelType:6,onComplete:function(){o()}})}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,o,a,s,r,l){"use strict";var d=r.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",d)},loadIndexedChangeRequests:function(e,t){var o=e,a=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var r=this.createCustomNameField(t[s]);t[s].co_name=r;var l=this.createCustomSeverity(t[s]);t[s].sev=l;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var c=this.createCustomOwnerField(t[s]);t[s].co_Owner=c;var u=this.getStatusBarIcons(t[s]),p=this.statusbarIconsTooltips(t[s]),g=this.getSubLevel(t[s]),h=this.getDescription(t[s]);t[s].maturityWithBadge=t[s].maturityNLS;for(var m=this.createCustomTooltip(t[s]),C=!1,f=o.getChildren(),v=0;v<f.length;v++){f[v].options.grid.id==t[s].id&&(C=!0)}if(!C){var D=i.createTreeNodeDataModel(a,{label:t[s].title,subLabel:g,description:h,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:u,statusbarIconsTooltips:p,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(D)}}e.pushUpdate()},loadChangeRequestData:function(e,t){var a=e;let s=new n;e.prepareUpdate();for(let n=0;n<t.length;n++){let c=this.createCustomNameField(t[n],"NonIndex");t[n].co_name=c;let u=this.createCustomSeverity(t[n]);t[n].sev=u;let p=this.createCustomChangeCoordinatorField(t[n]);t[n].co_Coordinator=p;let g=this.createCustomOwnerField(t[n]);t[n].co_Owner=g;let h=this.getStatusBarIcons(t[n],"NonIndex"),m=this.statusbarIconsTooltips(t[n],"NonIndex"),C=this.getSubLevel(t[n]),f=this.getDescription(t[n]);t[n].maturityWithBadge=t[n].maturityNLS;let v=this.createCustomTooltip(t[n]);for(var r=!1,l=(o.getGlobalVariable().existingCRIds,r=!1,a.getChildren()),d=0;d<l.length;d++){l[d].options.grid.id==t[n].id&&(r=!0)}if(!r){let o=i.createTreeNodeDataModel(s,{label:t[n].title,subLabel:C,description:f,grid:t[n],icons:[t[n].iconURL],thumbnail:t[n].thumbnail,statusbarIcons:h,statusbarIconsTooltips:m,customTooltip:v,contextualMenu:["Copy1","Move1"]});e.addChild(o)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"crSummaryNotEmpty"}),e.unselectAll();let o=new n,a=this.createCustomNameField(t[0]);t[0].co_name=a;let s=this.createCustomSeverity(t[0]);t[0].sev=s;let r=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=r;let l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;let d=this.getStatusBarIcons(t[0]),c=this.statusbarIconsTooltips(t[0]),u=this.getSubLevel(t[0]),p=this.getDescription(t[0]),g=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(o,{label:t[0].title,subLabel:u,description:p,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:g});e.getXSO().add(h),e.addChild(h,0)},createCustomNameField:function(e,t){let i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);let n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(e),e.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_TOOLTIP_NEW_REQUEST});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){let t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){let i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{let t=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(i);let l=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),l.inject(t)}return t.outerHTML},createCustomSeverity:function(e){let t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);let o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomMaturity:function(e){let t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");let i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){let i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){let i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(a.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(a.CHG_TOOLTIP_NEW_REQUEST),i},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){let t="";return t=e.name+" | "+e.ownerFullName},getDescription:function(e){let t="";return t=e.maturityNLS},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberForm",["UWA/Controls/Abstract","DS/UIKIT/Input/Button","DS/WUXAutoComplete/AutoComplete","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Button","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel"],function(e,t,i,n,o,a,s){"use strict";var r=e.extend({init:function(e){this.options=e,this.buttons={add:null,addAnother:null},this.formField={assignee:null,changeCoordinator:null,approver:null,follower:null},this.fieldElement={assignee:null,changeCoordinator:null,approver:null,follower:null}},getHeading:function(){let e=this.options.objectTitle;e=this.getObjectLabel(e);let t=this.options.title?this.options.title:"Add Member";return e?t+"-  "+e:t},getObjectLabel:function(e){return e?e.slice(0,50)+(e.length>50?"... ":" "):""},getBody:function(){var e=this,t=UWA.createElement("div",{id:"addMemberBody",class:"addMemberBody"}),a={id:"",label:"",required:!1,fieldElement:void 0},s={id:"",label:"",required:!1,fieldElement:void 0},l={id:"",label:"",required:!1,fieldElement:void 0},d=[];r.changeCoordinator=e.options.fields[0],r.assignee=e.options.fields[1],r.approver=e.options.fields[2],r.follower=e.options.fields[3],r.getAdditionSwymPersonInfo=e.options.getAdditionSwymPersonInfo,r.getAdditionObjectInfo=e.options.getAdditionObjectInfo,r.activateSearch=e.options.activateSearch,r.search=e.options.search,r.teamlayoutModel=e.options.teamlayoutModel,r.ExecuteDropForAddMemberPanel=e.ExecuteDropForAddMemberPanel,r.searchFromModelAndUniqAndAdd=e.searchFromModelAndUniqAndAdd,r.uniqBy=e.uniqBy,r.makeDroppable=e.options.makeDroppable,a.id="changeCoordinator",a.label=1==r.changeCoordinator.visibleFlag?"Change Coordinator":"",r.autoCompleteChangeCoordinator=e.fieldElement.changeCoordinator=new i({elementsTree:null!=r.changeCoordinator?r.changeCoordinator.changeCoordinatorTreeDocument:"",placeholder:n.CHG_GOV_Proposed_Proposed_Placeholder,multiSearchMode:!1,minLengthBeforeSearch:3,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,disabled:r.changeCoordinator.disabled,visibleFlag:r.changeCoordinator.visibleFlag,columnOptions:{autoRowHeightFlag:!0,typeRepresentation:"detailedUser"},filterCB:function(e){r.changeCoordinator.changeCoordinatorTreeDocument.setFilterModel({value:{filterId:r.changeCoordinator.filterId,filterModel:{text:e}}})}});var c=new o({displayStyle:"lite",label:"Search Change Coordinator",tooltip:"Search Change Coordinator",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1,visibleFlag:r.changeCoordinator.visibleFlag,disabled:r.changeCoordinator.disabled});c.getContent().setStyle("margin-left","12px").setStyle("margin-right","10px"),c.addEventListener("buttonclick",function(){e.searchChangeCoordinator()}),d.push(r.autoCompleteChangeCoordinator),d.push(c),a.fieldElement=d,(e.formField.changeCoordinator=e.getFormField(a)).inject(t),s.id="assignee",s.label=n.CHG_Add_Member_Assignee;d=[];r.autoCompleteAssignee=e.fieldElement.assignee=new i({elementsTree:null!=r.assignee?r.assignee.assigneeTreeDocument:"",placeholder:n.CHG_GOV_Proposed_Proposed_Placeholder,minLengthBeforeSearch:3,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,columnOptions:{autoRowHeightFlag:!0,typeRepresentation:"detailedUser"},filterCB:function(e){r.assignee.assigneeTreeDocument.setFilterModel({value:{filterId:r.assignee.filterId,filterModel:{text:e}}})}});var u=new o({displayStyle:"lite",label:"Search Assignee",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1});u.getContent().setStyle("margin-left","12px").setStyle("margin-right","10px"),u.addEventListener("buttonclick",function(){e.searchAssignee(e)}),d.push(r.autoCompleteAssignee),d.push(u),s.fieldElement=d,(e.formField.assignee=e.getFormField(s)).inject(t),l.id="approver",l.label="Approver";d=[];r.autoCompleteApprover=e.fieldElement.approver=new i({elementsTree:null!=r.approver?r.approver.approverTreeDocument:"",placeholder:n.CHG_GOV_Proposed_Proposed_Placeholder,multiSearchMode:!1,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,disabled:r.approver.disabled,columnOptions:{autoRowHeightFlag:!0,typeRepresentation:"detailedUser"},filterCB:function(e){r.approver.approverTreeDocument.setFilterModel({value:{filterId:r.approver.filterId,filterModel:{text:e}}})}});var p=new o({displayStyle:"lite",label:"Search approver",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1,disabled:r.approver.disabled});p.getContent().setStyle("margin-left","12px").setStyle("margin-right","10px"),p.addEventListener("buttonclick",function(){e.searchApprover(e)}),d.push(r.autoCompleteApprover),d.push(p),l.fieldElement=d,(e.formField.approver=e.getFormField(l)).inject(t),l.id="informedUser",l.label="Informed User";d=[];r.autoCompleteFollower=e.fieldElement.follower=new i({elementsTree:null!=r.follower?r.follower.followerTreeDocument:"",placeholder:n.CHG_GOV_Proposed_Proposed_Placeholder,minLengthBeforeSearch:3,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,columnOptions:{autoRowHeightFlag:!0,typeRepresentation:"detailedUser"},filterCB:function(e){r.follower.followerTreeDocument.setFilterModel({value:{filterId:r.follower.filterId,filterModel:{text:e}}})}});var g=new o({displayStyle:"lite",label:"Search informedUser ",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1});return g.getContent().setStyle("margin-left","12px").setStyle("margin-right","10px"),g.addEventListener("buttonclick",function(){e.searchInformedUser(e)}),d.push(r.autoCompleteFollower),d.push(g),l.fieldElement=d,(e.formField.follower=e.getFormField(l)).inject(t),t},getFormField:function(e){var t=UWA.createElement("div",{id:"memberFormField"+e.id,class:"memberFormField"}),i=UWA.createElement("div",{id:"memberFieldLabel"+e.id,class:"memberFieldLabel"}).inject(t);UWA.createElement("span",{id:"memberFieldText"+e.id,text:e.label,class:"memberFieldText"}).inject(i);if(e.fieldElement){var n=UWA.createElement("div",{id:"memberFieldElement"+e.id,class:"memberFieldElement"}).inject(t);Array.isArray(e.fieldElement)?(e.fieldElement.forEach(function(e){e.inject(n)}),n.setStyle("display","flex")):e.fieldElement.inject(n)}return t},getFooter:function(){var e=this,i=UWA.createElement("div",{id:"addMemberFormFooter"}),o=e.buttons.add=new t({value:n.CHG_Add_Member_Add,className:"primary"}).inject(i);return o.addEvent("onClick",function(){e.addMemberHandler()}),o.addEvent("onClick",function(){e.addMemberHandler()}),e.disableAddButtons(),e.addChangeEventListener(),i},enableAddButtons:function(){this.buttons.add.enable()},disableAddButtons:function(){this.buttons.add.disable()},addMemberHandler:function(){console.log("inside add ");this.addMemberPanelImmerSiveFrame.remove();var e=null!=r.autoCompleteChangeCoordinator.selectedItems?r.autoCompleteChangeCoordinator.selectedItems.options.identifier:"",t={person:[],userGroup:[]};if(null!=r.autoCompleteAssignee.selectedItems)for(var i=0;i<r.autoCompleteAssignee.selectedItems.length;i++){let e=r.autoCompleteAssignee.selectedItems[i].options;"Person"==e.type?t.person.push(e.identifier):"Group"==e.type&&t.userGroup.push(e.id)}var n=null!=this.fieldElement.approver.selectedItems?this.fieldElement.approver.selectedItems.options.id:"",o={person:[],userGroup:[]};if(null!=this.fieldElement.follower.selectedItems)for(i=0;i<this.fieldElement.follower.selectedItems.length;i++){let e=this.fieldElement.follower.selectedItems[i].options;"Person"==e.type?o.person.push(e.identifier):"Group"==e.type&&o.userGroup.push(e.id)}(""!=n||t.person.length>0||t.userGroup.length>0||o.person.length>0||o.userGroup.length>0||""!=e)&&(r.autoCompleteChangeCoordinator.selectedItems=r.autoCompleteApprover.selectedItems=r.autoCompleteAssignee.selectedItems=r.autoCompleteFollower.selectedItems=void 0,this.options.addMemberSubmitHandler(e,n,o,t))},searchChangeCoordinator:function(e){r.searchCategoty="Change Coordinator";var t=r.activateSearch("Person","TransferOwnership");r.search(n.CHG_Add_Member_Change_Coordinator,"Person",this.OnSearchComplete,"Contributors",t,void 0,void 0)},searchAssignee:function(e){r.searchCategoty="Assignee";let t=r.teamlayoutModel.getAllDescendants(),i={condition:"addExistingAssignee",extendedQuery:this.createExcludeListForSearch(t,r.searchCategoty)};var o=r.activateSearch("Person","AddAssignee");r.search(n.CHG_Add_Member_Assignee,"Person",this.OnSearchComplete,"AddAssignee",o,void 0,"assignee",i)},searchApprover:function(e){r.searchCategoty="Approver";var t=r.activateSearch("Person","TransferOwnership");r.search(n.CHG_Add_Member_Approver,"Route Template",this.OnSearchComplete,"Contributors",t,void 0,void 0)},searchInformedUser:function(e){r.searchCategoty="Follower";let t=r.teamlayoutModel.getAllDescendants(),i={condition:"addExistingFollower",extendedQuery:this.createExcludeListForSearch(t,r.searchCategoty)};var o=r.activateSearch("Person","AddFollower");r.search(n.CHG_Add_Member_Follower,"Person",this.OnSearchComplete,"AddFollower",o,void 0,"informedUser",i)},createExcludeListForSearch:function(e,t){let i="";for(let n of e)n.options.grid.role.includes(t)&&(i=i+"NOT (physicalid:"+n.options.grid.id+") ");return i},OnSearchComplete:function(e){var t=[];r.approverFlag=!0;for(var i=0;i<e.length;i++)t.push({objectId:e[i][0],identifier:e[i][1],objectType:e[i][2],displayType:e[i][3],displayName:e[i][5],serviceId:e[i][7]});var n={data:{}};n.data.items=t,r.ExecuteDropForAddMemberPanel(n,r.searchCategoty)},ExecuteDropForAddMemberPanel:function(e,t){var i=this;if(e&&e.data&&e.data.items){var n=e.data.items;if(UWA.is(n)&&UWA.is(n.length)&&n.length>0){var o=[],a=[];let e=[];for(var l=[],d=0;d<n.length;d++)if(n[d].objectId){var c=n[d].serviceId.toLowerCase();"3dspace"==c||c.includes("3dspace")?o.push(n[d].objectId):"3dswym"==c&&"pno:Person"==n[d].objectType?(a.push(n[d].objectId.replace("iam:","")),l.push(n[d].displayName)):c.includes("usersgroup")&&e.push(n[d])}if(0!=o.length||0!=a.length||0!=e.length){var u=[];0!=o.length&&r.getAdditionObjectInfo(o).then(function(e){for(var n=0;n<o.length;n++){var a=null,l=e.additionObjectInfo[o[n]];if("Approver"===t&&l.type&&"Route Template"===l.type)a=new s({label:l.objectTitle,value:l.objectName,name:l.objectTitle,type:l.type,id:l.pid}),u.push(a),r.autoCompleteApprover.selectedItems=u,r.autoCompleteApprover._applySelectedItems();else if("Change Coordinator"===t&&l.type&&"Person"===l.type){var d=new s({label:l.fullName,value:l.objectName,name:l.fullName,type:l.type,id:l.pid,identifier:l.objectName});u.push(d),r.autoCompleteChangeCoordinator.selectedItems=u,r.autoCompleteChangeCoordinator._applySelectedItems()}else if("Follower"!==t||!l.type||"Person"!==l.type&&"Group"!==l.type){if("Assignee"!==t||!l.type||"Person"!==l.type&&"Group"!==l.type)return void console.log("NLS.ECM_ERR_NO_PERSON_NO_ROUTETEMPLATE");{let e="";"Person"===l.type?e=new s({label:l.fullName,value:l.objectName,name:l.fullName,type:l.type,id:l.pid,identifier:l.objectName}):"Group"===l.type&&(e=new s({label:l.objectTitle,value:l.objectName,name:l.objectTitle,type:l.type,id:l.pid})),u.push(e);c=r.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.name==u[0].options.name)return!0});r.autoCompleteAssignee.selectedItems=c<0?u:i.searchFromModelAndUniqAndAdd(e=>e.options.id,r.autoCompleteAssignee,u),r.autoCompleteAssignee._applySelectedItems(),r.approverFlag=!1}}else{let e="";"Person"===l.type?e=new s({label:l.fullName,value:l.objectName,name:l.fullName,type:l.type,id:l.pid,identifier:l.objectName}):"Group"===l.type&&(e=new s({label:l.objectTitle,value:l.objectName,name:l.objectTitle,type:l.type,id:l.pid})),u.push(e);var c=r.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.name==u[0].options.name)return!0});r.autoCompleteFollower.selectedItems=c<0?u:i.searchFromModelAndUniqAndAdd(e=>e.options.id,r.autoCompleteFollower,u),r.autoCompleteFollower._applySelectedItems(),r.approverFlag=!1}}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)}),0!=a.length&&r.getAdditionSwymPersonInfo(a).then(function(e){for(var n=0;n<a.length;n++){var o=null,l=e.additionObjectInfo[a[n]];"Change Coordinator"===t&&l.type&&"Person"===l.type?(o=new s({label:l.fullName,value:l.objectName,name:l.fullName,type:l.type,id:l.pid,identifier:l.objectName}),u.push(o),r.autoCompleteChangeCoordinator.selectedItems=u,r.autoCompleteChangeCoordinator._applySelectedItems()):"Follower"===t&&l.type&&"Person"===l.type?(o=new s({label:l.fullName,value:l.objectName,name:l.fullName,type:l.type,id:l.pid,identifier:l.objectName}),u.push(o),r.autoCompleteFollower.selectedItems=i.searchFromModelAndUniqAndAdd(e=>e.options.id,r.autoCompleteFollower,u),r.autoCompleteFollower._applySelectedItems()):"Assignee"===t&&l.type&&"Person"===l.type&&(o=new s({label:l.fullName,value:l.objectName,name:l.fullName,type:l.type,id:l.pid,identifier:l.objectName}),u.push(o),r.autoCompleteAssignee.selectedItems=i.searchFromModelAndUniqAndAdd(e=>e.options.id,r.autoCompleteAssignee,u),r.autoCompleteAssignee._applySelectedItems())}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)});for(let n=0;n<e.length;n++){var p;p=new s({label:e[n].displayName,value:e[n].objectId,name:e[n].displayName,type:e[n].objectType,id:e[n].objectId}),u.push(p),"Assignee"===t?(r.autoCompleteAssignee.selectedItems=i.searchFromModelAndUniqAndAdd(e=>e.options.id,r.autoCompleteAssignee,u),r.autoCompleteAssignee._applySelectedItems()):"Follower"===t&&(r.autoCompleteFollower.selectedItems=i.searchFromModelAndUniqAndAdd(e=>e.options.id,r.autoCompleteFollower,u),r.autoCompleteFollower._applySelectedItems())}}else ChgErrors.error(NLS.ECM_CA_Drop_Not_Supported)}}else console.log("NLS.ECM_CA_Drop_Not_Supported")},uniqBy:function(e,...t){return t.filter(e=>e).flatMap(e=>[...e]).filter((i=new Set,function(t){return n=e(t),!i.has(n)&&i.add(n);var n}));var i},searchFromModelAndUniqAndAdd:function(e,t,i){return this.uniqBy(e,t.selectedItems,i.map(e).map(i=>t._model.getRoots().find(t=>e(t)===i))||[])},addChangeEventListener:function(){var e=this;r.autoCompleteApprover.addEventListener("change",function(){r.autoCompleteApprover.selectedItems;e.disableButtonFun()||e.disableAddButtons(),e.disableButtonFun()&&e.enableAddButtons()}),r.autoCompleteChangeCoordinator.addEventListener("change",function(){r.autoCompleteChangeCoordinator.selectedItems;e.disableButtonFun()||e.disableAddButtons(),e.disableButtonFun()&&e.enableAddButtons()}),r.autoCompleteAssignee.addEventListener("change",function(){var t=r.autoCompleteAssignee.selectedItems,i=t.length;if(i>0){var n=t[i-1];r.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.name==n.options.name||1==r.approverFlag)return!0})<0&&(r.autoCompleteAssignee._selectionChips.removeChip(n.options.label),r.autoCompleteAssignee.selectedItems.pop(),r.autoCompleteAssignee.value.pop())}e.disableButtonFun()?e.enableAddButtons():e.disableAddButtons()}),r.autoCompleteFollower.addEventListener("change",function(){var t=r.autoCompleteFollower.selectedItems,i=t.length;if(i>0){var n=t[i-1];r.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.name==n.options.name||1==r.approverFlag)return!0})<0&&(r.autoCompleteFollower._selectionChips.removeChip(n.options.label),r.autoCompleteFollower.selectedItems.pop(),r.autoCompleteFollower.value.pop())}e.disableButtonFun()?e.enableAddButtons():e.disableAddButtons()})},disableButtonFun:function(){return!!(r.autoCompleteFollower&&r.autoCompleteFollower.selectedItems&&r.autoCompleteFollower.selectedItems.length>0)||(!!(r.autoCompleteAssignee&&r.autoCompleteAssignee.selectedItems&&r.autoCompleteAssignee.selectedItems.length>0)||(!(!r.autoCompleteChangeCoordinator||!r.autoCompleteChangeCoordinator.selectedItems)||!(!r.autoCompleteApprover||!r.autoCompleteApprover.selectedItems)))},dragAndDropHandler:function(){var e=document.getElementById("memberFieldElementchangeCoordinator");r.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,r.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForChangeCoordinatorField:function(e){var t={data:{}};t.data.items=e,r.ExecuteDropForAddMemberPanel(t,"Change Coordinator")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,r.ExecuteDropForAddMemberPanel(t,"Follower")},ExecuteDropForAssigneeField:function(e){var t={data:{}};t.data.items=e,r.ExecuteDropForAddMemberPanel(t,"Assignee")}});return r}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgImpactAnalysisOnCreateCA",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,o,a){return{createNewChangeActionInContext:function(e){let t=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action";let s=e.parentID,r={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:t,select:[],parentPIDs:[s]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout"],function(i){i.ChgChangeActionDataGridModel.addNewChildren(t);try{let t=a("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var n=e.result[0];n.isKindOfType="Change Action",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:n,View:"Impact Analysis"})}catch(e){console.log(e)}i.modelEvents.publish({event:"CA-Creation-Update",data:{}})})},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new n).CreateNew(r)}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t){let i=Object.create(null);return i.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddCA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"AddNewChangeAction"},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddCA},{type:"PushItem",title:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"addExistingHandler"},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_AddExisting}]},i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){var n=i.accessBits;const o="true"==(n=t.processAccessBitIA(n)).ManageImplementingChanges;return{entries:[{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"plus",fontIconFamily:1},value:this.createData},position:"far",visibleFlag:o,category:"Create"},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_Remove,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"removeHandlerCR"}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_IA_Toolbar_DeleteCA,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},i}),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/context/ChgCAcontextDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask"],function(e,t,i,n,o,a,s,r,l,d,c,u,p){"use strict";let g=e.extend({init:function(e){this.parentCAId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadContextData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=null,n=this.createCustomOwnerField(e);e.chgObjOwner=n;let o=e.thumbnail,a=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName;void 0!==e.currentNLS&&null!==e.currentNLS?(e.current=e.current,e.maturityWithBadge=e.currentNLS,t=e.currentNLS):(e.current=e.maturity?e.maturity:"",e.maturityWithBadge=e.maturityNLS?e.maturityNLS:"",t=e.maturityNLS?e.maturityNLS:"");var s=this.getCustomTooltip(e);return new i({label:e.title,subLabel:a,description:t,grid:e,customTooltip:s,icons:[e.icon],thumbnail:o,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.currentNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCAId;let s=document.getElementById("outer-context-grid-div");"undefined"!=s&&null!=s&&p.mask(s),r.updateExistingCAContext(o,e).then(async function(e){t.treeDocument&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"});var n={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(n=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var r=await l.processCAContextItems(e);g.prototype.addNodesInLayoutModel(t.treeDocument,r),i(e),p.unmask(s);var h={contextid:o,length:e.data.length};if(u.publish("context:update",h),n&&n.length>0){var m=new Map,C=n.length;for(let e=0;e<n.length;e+=50){let i=[];i=C<50?n.slice(e,e+C):n.slice(e,e+50);for(var f=[],v=new Map,D=i,b=0;b<D.length;b++){var w=D[b];f.push(w.id),v.set(w.id,w)}var S=[];if(f.length>0){var I=l.commonPredicatedForFedSearch(),_=await l.callFederatedSearch(f,I);if(_&&_.results&&_.results.length>0)S=await l.processCAContextItemsFederatedSearch(_,v)}g.prototype.addNodesInLayoutModel(t.treeDocument,S),m=new Map([...m,...v]),C-=50}if(m&&m.size>0){u.publish("updateIndexingIconForHideOrShowInContextItem",{});var y=await c.recent();if(y&&y.results&&y.results.length>0){var E=l.filterNonIndexedDataNew(y,m);m.size!=E.length&&d.warn(a.CHG_GOV_Not_Accessable_Data);var O=[];E.length>0&&(O=await l.processInformationForRecentCAContext(E)),g.prototype.addNodesInLayoutModel(t.treeDocument,O)}}}},function(e){p.unmask(s),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCAId,s=document.getElementById("outer-context-grid-div");"undefined"!=s&&null!=s&&p.mask(s),r.updateExistingCAContext(o,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var r={contextid:o,length:t.treeDocument.getAllDescendants().length};u.publish("context:update",r)}d.success(a.CHG_GOV_context_Remove_Success),p.unmask(s)},function(e){p.unmask(s),n()})})},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.getXSO().add(i[t]),e.addRoot(i[t],0);e.pushUpdate()}});return g}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveContexts,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",func:"removeHandler"}}}]}},t}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";let h=g.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"CR_RelatedScope",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadRelatedScopeData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.previewicon,o=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName,a=e.currentNLS||e.maturityNLS?e.currentNLS||e.maturityNLS:"";e.maturityWithBadge=e.currentNLS||e.maturityNLS?e.currentNLS||e.maturityNLS:"";var s=this.getCustomTooltip(e);return new i({label:e.title,subLabel:o,description:a,grid:e,customTooltip:s,icons:[e.icon],thumbnail:n,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.maturityNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId;var s=!0;let g=document.getElementById("outer-relatedScope-grid-div");"undefined"!=g&&null!=g&&p.mask(g),r.updateExistingRelatedScope(o,e).then(async function(e){var i={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(i=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var n=await l.processedChangeRequestRelatedScope(e);if(m.prototype.addNodesInLayoutModel(t.treeDocument,n),p.unmask(g),i&&i.length>0){s=!1;var r=new Map,h=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=h<50?i.slice(e,e+h):i.slice(e,e+50);for(var C=[],f=new Map,v=n,D=0;D<v.length;D++){var b=v[D];C.push(b.id),f.set(b.id,b)}var w=[];if(C.length>0){var S=l.commonPredicatedForFedSearch(),I=await l.callFederatedSearch(C,S);if(I&&I.results&&I.results.length>0)w=await l.processReportedAgainstFederatedSearch(I,f)}m.prototype.addNodesInLayoutModel(t.treeDocument,w),r=new Map([...r,...f]),h-=50}if(r&&r.size>0){u.publish("updateIndexingIconForHideOrShowInCRReportedAgainst",{});var _=await c.recent();if(_&&_.results&&_.results.length>0){var y=l.filterNonIndexedDataNew(_,r);r.size!=y.length&&d.warn(a.CHG_GOV_Not_Accessable_Data);var E=[];y.length>0&&(E=await l.processInformationForRecentReportedAgainst(y)),m.prototype.addNodesInLayoutModel(t.treeDocument,E)}var O=e.data.length,G={contextid:o,length:E.length+O};u.publish("relatedScope:update",G)}}let N=[];if(e&&(N=e.data),t.treeDocument.getAllDescendants()&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),s){G={contextid:o,length:e.data.length};u.publish("relatedScope:update",G)}},function(e){p.unmask(g),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId,s=document.getElementById("outer-relatedScope-grid-div");"undefined"!=s&&null!=s&&p.mask(s),r.removeExistingRelatedScope(o,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var r={contextid:o,length:t.treeDocument.getAllDescendants().length};u.publish("relatedScope:update",r)}d.success(a.CHG_GOV_relatedScope_Remove_Success),p.unmask(s)},function(e){p.unmask(s),n()})})},addNodesInLayoutModel:function(e,t){let i=m.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return m}),define("DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/Controls/Label","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","DS/Controls/ComboBox","DS/Controls/Button","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";var D=m.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),b=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"craffectedItems",useAsyncPreExpand:!0});return e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",D)},loadAffectedItemsData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&h.isMasked(e)&&h.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=e.name+" | "+e.typeNLS;var n,a=e.maturityNLS;e.maturityWithBadge=e.maturityNLS,e.dispositionType="fixKey";var s=this.getCustomTooltip(e);return n=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,e.dispositionInformation&&e.dispositionInformation[0]&&e.dispositionInformation[0].dispostionId?(e.dispositionName=this.dispositionNameMethod(e),e.dispositionInformation[0].resolvedById?e.dispositionResolvedBy=this.resolvedByNameMethod(e):e.dispositionResolvedBy=this.resolvedByDefaultForDispostion()):(e.dispositionName=this.defaultDispositionNameValue(),e.dispositionResolvedBy=this.resolvedByDefaultForDispostion()),new i({label:n,subLabel:t,description:a,grid:e,icons:[e.icon],thumbnail:e.thumbnail,customTooltip:s,contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){var t=this,i=this.contextID,n=document.getElementById("outer-affectedItems-grid-div");"undefined"!=n&&null!=n&&h.mask(n),r.addExistingInIRAffectedItems(i,e).then(async function(e){console.log("AffectedItems list: "+e);var i={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data.splice(0,1));var o=await l.processCRAffectedItems(e);if(b.prototype.addNodesInLayoutModel(t.treeDocument,o),h.unmask(n),i&&i.length>0){var s=new Map,r=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=r<50?i.slice(e,e+r):i.slice(e,e+50);for(var d=[],p=new Map,m=n,C=0;C<m.length;C++){var f=m[C];d.push(f.id),p.set(f.id,f)}var v=[];if(d.length>0){var D=l.commonPredicatedForFedSearch(),w=await l.callFederatedSearch(d,D);if(w&&w.results&&w.results.length>0)v=await l.processCRAffectedItemsFederatedSearch(w,p)}b.prototype.addNodesInLayoutModel(t.treeDocument,v),s=new Map([...s,...p]),r-=50}if(s&&s.size>0){g.publish("updateIndexingIconForHideOrShowInAffectedItem",{});var S=await u.recent();if(S&&S.results&&S.results.length>0){var I=l.filterNonIndexedDataNew(S,s);s.size!=I.length&&c.warn(a.CHG_GOV_Not_Accessable_Data);var _=[];I.length>0&&(_=await l.processInformationForRecentCRAffected(I)),b.prototype.addNodesInLayoutModel(t.treeDocument,_)}}}h.unmask(n)},function(e){h.unmask(n)})},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var i=b.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(var n=i.length-1;n>=0;n--)e.addRoot(i[n],0);e.pushUpdate()},removeChildren:function(){var e=this,t=[...this.treeDocument.getSelectedNodes()];if(this.treeDocument.unselectAll(),t.length){for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,updateAction:"DISCONNECT"});var s=this.contextID;r.removeIRAffectedItems(s,i).then(function([i,n]){if(null!=n)for(let e=0;e<t.length;e++){let i=!1;for(let o=0;o<n.length;o++)if(t[e].options.grid.id==n[o]){t.splice(e,1),i=!0;break}1==i&&e--}for(var s=0;s<t.length;s++)e.treeDocument.removeRoot(t[s]);if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&h.isMasked(e)&&h.unmask(e)}0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"}),null!=n&&0!=n.length||c.success(a.CHG_GOV_AffectedItems_Remove)},function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&h.isMasked(e)&&h.unmask(e)}})}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},dispositionNameMethod:function(e){e.dispositionMaturity=e.dispositionInformation[0].dispositionCurrentState;var t=new UWA.Element("div"),i=new UWA.Element("div",{class:"dispositionIcon",styles:{width:"20%",height:"100%",position:"absolute",left:0,top:0}}),n=new UWA.Element("div",{class:"dispositionTitleName",styles:{width:"80%",height:"100%",position:"absolute",right:0,top:0}});return i.inject(t),n.inject(t),i.addContent({tag:"span",class:"dispositionIcon wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-disposition wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Disposition_Icon,styles:{"font-size":"1.2em"}}),n.addContent({tag:"span",html:e.dispositionInformation[0].dispositionName,title:a.CHG_GOV_Investigation_Request_Disposition_Name,styles:{"font-size":"1em"}}),t.outerHTML},resolvedByNameMethod:function(e){var t=new UWA.Element("div"),i=new UWA.Element("div",{class:"dispositionIcon",styles:{width:"20%",height:"100%",position:"absolute",left:0,top:0}}),n=new UWA.Element("div",{class:"dispositionTitleName",styles:{width:"80%",height:"100%",position:"absolute",right:0,top:0}});return i.inject(t),n.inject(t),i.addContent({tag:"span",class:"dispositionIcon wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-change-action wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_ResolvedBy_Icon,styles:{"font-size":"1.2em"}}),n.addContent({tag:"span",html:e.dispositionInformation[0].resolvedByName,title:a.CHG_GOV_Investigation_Request_ResolvedBy_Name,styles:{"font-size":"1em"}}),t.outerHTML},defaultDispositionNameValue:function(){var e=new UWA.Element("div"),t=new UWA.Element("div",{class:"chgIRAffectedCreateNewDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",left:0,top:0}}),i=new UWA.Element("div",{class:"chgIRAffectedAddExistingDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",left:"33.33%",top:0}}),n=new UWA.Element("div",{class:"chgIRAffectedDragAndDropDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",right:0,top:0}});return t.inject(e),i.inject(e),n.inject(e),t.addContent({tag:"span",class:"chgIRAffectedCreateNewDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-plus wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Create_Disposition,styles:{"font-size":"1.2em"}}),i.addContent({tag:"span",class:"chgIRAffectedAddExistingDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-down-right wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Add_Existing_Disposition,styles:{"font-size":"1.2em"}}),n.addContent({tag:"span",class:"chgIRAffectedAddExistingDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-drag-drop wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Add_Existing_Disposition,styles:{"font-size":"1.2em",right:0}}),e.outerHTML},resolvedByDefaultForDispostion:function(){var e=new UWA.Element("div"),t=new UWA.Element("div",{class:"chgIRAffectedCreateNewCAResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",left:0,top:0}}),i=new UWA.Element("div",{class:"chgIRAffectedCreateAddExistingCAResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",left:"33.33%",top:0}}),n=new UWA.Element("div",{class:"chgIRAffectedAddExistingCADragAndDropResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",right:0,top:0}});return t.inject(e),i.inject(e),n.inject(e),t.addContent({tag:"span",class:"chgIRAffectedCreateNewCAResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-plus wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Create_Resolved_By,styles:{"font-size":"1.2em"}}),i.addContent({tag:"span",class:"chgIRAffectedCreateAddExistingCAResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-down-right wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Add_Existing_ResolvedBy,styles:{"font-size":"1.2em"}}),n.addContent({tag:"span",class:"chgIRAffectedAddExistingCADragAndDropResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-drag-drop wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Drag_And_Drop_ResolvedBy,styles:{"font-size":"1.2em",right:0}}),e.outerHTML},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return b}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o,a,s,r){return{launchCreateChangeIADialog:function({contextCRId:a}){console.log("launchCreateChangeIADialog ............................");let r=i.getUserPreference(n.keys.createKeys.IA_DEF_TYPE),l={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ANALYSIS_FORM,type:"Change Analysis",silentMode:!1,overlay:!0,options:{typeName:"Change Analysis",preferedType:r,select:[],parentPIDs:[a]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isLibrary:!0}}],events:{onSuccess:function(e){document.getElementsByClassName("moduleWrapper")[0];try{let t=s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var o=e.result[0];o.isKindOfType="Change Analysis",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:o,View:"Impact Analysis"})}catch(e){console.log(e)}s("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil").filterView("activeIA"),t.TriggerCustomeUpdate="false";let a={};a[n.keys.createKeys.IA_DEF_TYPE]=e.result[0].type,i.saveUserPreference(a)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};var d={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>New Impact Analysis"}};s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:d}),(new e).CreateNew(l)}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s){"use strict";var r=n.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e),this.options=e,this.treeDocument=null},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",r)},resetModel:function(){this.treeDocument.empty()},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){this.treeDocument=new t({id:"ChgCAProposedChangesTreeDoc",useAsyncPreExpand:!0})},emptyTreeDocument:function(){this.treeDocument.empty()},updateTreeDocument:function(e,t){this.treeDocument.prepareUpdate();for(var i=0;i<e.length;i++)this.treeDocument.addRoot(this.createTreeNode(e[i],t));this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},createTreeNode:function(e,t){return this.getProposedTreeNode(e,t)},getProposedTreeNode:function(e,t){var n=this.createCustomNameField(e);return e.chgObjName=n,e.change_details=this.getChangeDetails(e),e.resolvedBy=this.getResolvedByDetails(e),e.change=this.getChange(e),e.activityIcon=this.getProposedActivityIconName(e),e.proposedStatus=this.getProposedStatus(e),e.maturityWithBadge=e.maturityNLS,e.evolutionPrefix=e.evolutionPrefix?e.evolutionPrefix:"",e.addProposedAccess=t.AddProposed,e.removeProposedAccess=t.DeleteProposed,new i({id:e.id,label:e.title,title:e.title,name:e.name,revision:e.revision,type:e.type,typeNLS:e.typeNLS,maturity:e.maturity,maturityNLS:e.maturityNLS,description:e.description,organization:e.organization,organizationNLS:e.organizationNLS,collabspace:e.collabspace,collabspaceNLS:e.collabspaceNLS,isLastRevision:e.isLastRevision,icons:[e.icon],thumbnail:e.previewIcon,change:e.change,change_details:e.change_details,proposedPID:e.proposedPID,proposedStatus:e.proposedStatus,reasonForChange:e.proposedWhy,activityIcon:e.activityIcon,subLabel:e.type+" | "+e.revision+" | "+e.name,grid:e,useAsyncPreExpand:!0})},createCustomNameField:function(e){var t=new UWA.Element("div",{class:"wux-tweakers wux-tweakers-string wux-tweakers-string-label wux-tweakers-labelonly"}),i=UWA.createElement("span",{html:e.name});i.style.setProperty("text-overflow","ellipsis"),i.inject(t);var n=new UWA.Element("div",{class:"iconsDiv"});if("false"==e.isLastRevision){var o=new UWA.Element("div",{class:"gridIconContainer",title:s.CHG_GOV_Proposed_Higher_Revision_Exists});UWA.createElement("a",{class:"fonticon fonticon-flow-branch-list",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}}).inject(o),o.inject(n)}return n.inject(t),t.outerHTML},getChange:function(e){return s["CHG_GOV_Proposed_Activity_"+e.computedOperation]?s["CHG_GOV_Proposed_Activity_"+e.computedOperation]:""},getChangeDetails:function(e){var t="";e.computedOperation=e.proposedOperation,e.targetState="",e.activity.forEach(function(i){"ChangeStatus"==i.activityOperation&&(e.computedOperation="ChangeStatus",e.targetState=i.targetState),i.activityWhy&&""!=i.activityWhy.trim()&&(""!=t&&(t+="\n"),t+=i.activityWhy)}),e.computedActivityWhy=t;var i=this.getPrefix(e);return""!=i&&(i+="\n"),i+=t},getResolvedByDetails:function(e){var t="";if(e.resolution&&e.resolution.length>0){let r=UWA.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});if(1==e.resolution.length){var i,n=[{tag:"img",src:e.resolution[0].icon,styles:{"padding-left":"5px"}},{tag:"span",text:e.resolution[0].title,styles:{"padding-left":"5px"}},{tag:"span",text:e.resolution[0].revision,class:"proposed_resolution_revision",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}}];n.push({tag:"span",class:"proposed_resolution_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}),r.setContent(n)}else{var o=UWA.createElement("a",{class:"proposed_resolution_multiple",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px"}});o.innerText=e.resolution.length,o.inject(r)}for(var a=0;a<e.resolution.length;a++)if((i=e.resolution[a].maturity?e.resolution[a].maturity:e.resolution[a].status)&&-1==i.indexOf("RELEASED")&&-1==i.indexOf("Release")){r.addContent({tag:"span",class:"wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-attention wux-ui-3ds wux-ui-3ds-lg",title:s.CHG_GOV_Proposed_Resolution_Warning,styles:{"font-size":"1.2em",color:"#e87b00"}});break}t=r.outerHTML}return t},getPrefix:function(e){var t="";if(e&&e.computedOperation)switch(e.computedOperation){case"None":t="";break;case"NewEvolution":t=e.evolutionPrefix&&""!=e.evolutionPrefix?s.CHG_GOV_Proposed_Grammar_Prefix+": "+e.evolutionPrefix:"";break;case"NewVersion":case"NewMinorVersion":t="";break;case"ChangeStatus":t=s.CHG_GOV_Proposed_Grammar_MaturityState+": "+s["CHG_GOV_Proposed_Target_State_"+e.targetState]}return t},getProposedActivityIconName:function(e){var t="";if(e&&e.computedOperation)switch(e.computedOperation){case"None":t="pencil wux-ui-3ds";break;case"NewEvolution":t="flow-branch-add wux-ui-3ds";break;case"NewVersion":case"NewMinorVersion":t="flow-line-add wux-ui-3ds";break;case"ChangeStatus":t="collaborative-lifecycle-management"}return t},getProposedStatus:function(e){var t="";if(e&&e.proposedStatus)switch(e.proposedStatus){case"Not Started":t="notStartedKey";break;case"Started":t="startedKey";break;case"Partial":t="partialKey";break;case"Complete":t="completedKey";break;case"Rejected":t="rejectedKey";break;default:t="notStartedKey"}return t},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})}})}),define("DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/issue/ChgIRIssueDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p=u.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});let g=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",p)},loadIssueData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let o=e.maturityNLS;var a=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:o,grid:e,customTooltip:a,icons:[e.icon],thumbnail:e.thumbnail,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId;var a=e[0].id,s=e[0].type?e[0].type:"",d=e[0].serviceId?e[0].serviceId:"3DSpace",u={resolvedBy:[]};u.physicalId=a,u.resolvedBy.push({physicalId:o,envId:"OnPremise",objectType:s,serviceId:d});let p=document.getElementById("outer-issue-grid-div");"undefined"!=p&&null!=p&&c.mask(p),r.updateExistingIssue(a,u).then(function(e){r.getIssueDetails(a).then(function(n){let o=n.body;l.processedChangeRequestNewIssueList(o).then(function(n){g.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e)}),c.unmask(p)})},function(e){c.unmask(p),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId;var s=e[0].id,l={resolvedBy:[]};l.physicalId=s,l.resolvedBy.push({physicalId:o});let u=document.getElementById("outer-issue-grid-div");"undefined"!=u&&null!=u&&c.mask(u),r.removeExistingIssue(s,l).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);d.success(a.CHG_GOV_Issue_Remove_Success),c.unmask(u)},function(e){c.unmask(u),n()})})},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return g}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant",[],function(){"use strict";var e={_KEY:"xchange-app",_VIEWS_PREFERENCES:"xchange-views-preferences",_MY_CHANGE_ORDERS:"xchange-my-change-orders",_RECENTLY_OPENED:"xchange-recently-opened",_CHANGE_ORDERS_DETAILS:"xchange-change-orders-details",_CHANGE_REQUESTS_DETAILS:"xchange-change-requests-details",_CHANGE_ACTIONS_DETAILS:"xchange-change-actions-details",_INVESTIGATION_REQUESTS_DETAILS:"xchange-investigation-requests-details",_LIST_VIEW:"xchange-list-view",_TAB:"tab",_OBJECTIDs:"objectIDs",_COTAB:"cotab",_CRTAB:"crtab",_FILTERVIEW:"filterview",_MODEL:"model",_ID_CARD:"id-card",_ORCHESTRATION_LEVEL1:"orchestration-level1",_ORCHESTRATION_LEVEL2:"orchestration-level2",_ORCHESTRATION_LEVEL3:"orchestration-level3",_LAST_ROUTE:"last-route",_FILTERS:"filters",_SELECTIONS:"selections",_DATE_FORMAT:"%m/%d/%Y , %I:%M:%S %p"};return e}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMemberFilterView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"teamfilter",tagName:"div",className:"chg-member-view",setup:function(){this.template='                                                <div class="'+this.getClassNames("-role-filter")+'">                                                    <table class="filter-table table">                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByName+'</td>                                                            <td>                                                                <div class="filter-input">                                                                    <input type="text" placeholder="'+t.CHG_Member_SearchMembers_PlaceHolder+'" class="form-control form-control-root filtertext">                                                                    <div class="clear-filter fonticon fonticon-cancel-circled"></div>                                                                </div>                                                            </td>                                                        </tr>                                                        <tr >                                                            <td style="color: gray;">'+t.CHG_Member_Filter_ByResponsibilities+'</td>                                                            <td class="chg-member-view-filter toggle-primary">                                                                <div class="toggle-container toggle-filter-view">                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="allToggle" class="roleFilter" checked>                                                                        <label class="control-label" for="allToggle" style="color: gray;">'+t.CHG_Member_Filter_All+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="assigneeToggle" class="roleFilter">                                                                        <label class="control-label" for="assigneeToggle" style="color: gray;">'+t.CHG_Member_Filter_Assignees+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="revMemToggle" class="roleFilter">                                                                        <label class="control-label" for="revMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Approvers+'</label>                                                                    </div>                                                                    <div class="toggle toggle-root">                                                                        <input type="checkbox" value="option1" id="followMemToggle" class="roleFilter">                                                                        <label class="control-label" for="followMemToggle" style="color: gray;">'+t.CHG_Member_Filter_Followers+"</label>                                                                    </div>                                                                </div>                                                            </td>                                                        </tr>                                                    </table>                                                </div>",this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view-role-filter",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"keyup .filtertext":function(e){var t=e.target.value,i=this.container.getElement(".clear-filter");t.length>0?i.setStyle("visibility","visible"):i.setStyle("visibility","hidden"),this.dispatchEvent("memberRoleFilter",arguments)},"click .clear-filter":function(e){this.container.getElement(".clear-filter").setStyle("visibility","hidden");var t=this.container.getElement(".filtertext");if(t){t.value=""}this.dispatchEvent("memberRoleFilter",arguments)},"focus .filtertext":function(){var e=document.getElementsByClassName("searchfiler-input-container");e.addClassName("highlighted-border"),e.removeClassName("border-without-focus")},"click .roleFilter":function(){this.dispatchEvent("memberRoleFilter",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/attachment/ChgAttachmentfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgDataService","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgDataProcess","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","DS/PlatformAPI/PlatformAPI","require"],function(e,t,i,n,o,a,s,r,l,d){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"attachment-mainContainer"}))},updateFacet:function(){var e=this;a.mask(this.elements.container),require(["DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView"],function(t){var i=e.getModel(),o=i.get("objectId");1!=i.isMergedModel()&&n.getObjectTypeInformation(o).then(function(i){if("Change Order"==i)n.getChangeOrderUserAccess(o).then(function(n){var o=n.data[0].dataelements;if(o=s.processAccessBitCO(o),e.elements&&e.elements.container){var r=e.getModel();if(!r)return!1;e.elements.container.setContent("");var l={id:r.get("objectId"),target:e.elements.container,parentType:i};t.create(l,"false"==o.AddReferential),a.unmask(e.elements.container)}});else if("Change Request"==i)n.getChangeRequestUserAccess(o).then(function(n){var o=n.data[0].dataelements;if(e.elements&&e.elements.container){var s=e.getModel();if(!s)return!1;e.elements.container.setContent("");var r={id:s.get("objectId"),target:e.elements.container,parentType:i};t.create(r,"false"==o.AddReferential),a.unmask(e.elements.container)}});else if("Change Action"==i){d("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").getUserAccess("pid:"+o).then(function(n){var o=n.userAccess;if(e.elements&&e.elements.container){var s=e.getModel();if(!s)return!1;e.elements.container.setContent("");var r={id:s.get("objectId"),target:e.elements.container,parentType:i};t.create(r,"false"==o.AddReferential),a.unmask(e.elements.container)}})}else""==i&&n.getImpactAnalysisUserAccess(o).then(function(n){var o=n.data[0].dataelements;if(e.elements&&e.elements.container){var s=e.getModel();if(!s)return!1;e.elements.container.setContent("");var r={id:s.get("objectId"),target:e.elements.container,parentType:i};t.create(r,"false"==o.ManageAttachments),a.unmask(e.elements.container)}})})})},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersFeaturesUtil",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i){"use strict";return{showRMBMenuOnGrid:function(e,t){return new Promise(function(n,o){var a="false",s={},r=i("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersFeaturesUtil"),l=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),d=l[0].options.grid.roles;s.currentObjType=l[0].options.grid.type;var c=0;l.length>1&&(a="true"),d.indexOf("contributor")>=0?(s.contributor="DISCONNECT",c++):s.contributor="CONNECT",d.indexOf("approver")>=0?(s.approver="DISCONNECT",c++):s.approver="CONNECT",d.indexOf("follower")>=0?(s.follower="DISCONNECT",c++):s.follower="CONNECT";let u,p=d.indexOf("owner")>=0;0==p&&1==c&&(s.showConfirmation=!0),"false"==a&&(u=i("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"));let g=[];var h=t.cellInfos.nodeModel.options.grid.id,m=t.cellInfos.nodeModel.options.grid.type,C=t.cellInfos.nodeModel.options.grid.name,f=t.cellInfos.nodeModel.options.grid.displayType;"Group"==m&&(m="foaf:Group",C=t.cellInfos.nodeModel.options.grid.fullName,f=t.cellInfos.nodeModel.options.grid.type);var v={objectId:h,objectType:m,displayName:C,displayType:f,facetName:"dependency"};[].push(v);var D=i("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(v),b=[];b.push(D),Promise.all(b).then(function(i){if("Person"==s.currentObjType){"true"==u.addContributorAccessBit&&g.push(r.getContributorMenu(e,t,s));let i=u.ChgMembersTreeModel.getChildren();u.isRouteTempleteAttached=!1;for(var o=0;o<i.length;o++){"Route Template"==i[o].options.grid.type&&(u.isRouteTempleteAttached=!0)}u.isRouteTempleteAttached||"true"!=u.addReviewerAccessBit||g.push(r.getReviewerMenu(e,t,s)),"true"==u.addFollowerAccessBit&&g.push(r.getFollowerMenu(e,t,s))}else"Group"==s.currentObjType&&("true"==u.addContributorAccessBit&&g.push(r.getContributorMenu(e,t,s)),"true"==u.addFollowerAccessBit&&g.push(r.getFollowerMenu(e,t,s)));"true"==u.addFollowerAccessBit&&0==p&&g.push(r.getDeleteMenu(e,t,s)),i[0]&&g.push(i[0]),n(g)})})},getContributorMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Assignees,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){console.log("contributor : "+n.contributor),n.role="contributor",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.contributor&&(o.state="selected"),o},getReviewerMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Approvers,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){console.log("approver : "+n.approver),n.role="approver",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.approver&&(o.state="selected"),o},getFollowerMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Follower,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){console.log("follower : "+n.follower),n.role="follower",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.follower&&(o.state="selected"),o},getDeleteMenu:function(e,i,n){return{type:"PushItem",title:t.CHG_Member_Menu_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){console.log("remove "),n.role=[],"DISCONNECT"==n.follower&&n.role.push("follower"),"DISCONNECT"==n.approver&&n.role.push("approver"),"DISCONNECT"==n.contributor&&n.role.push("contributor"),n.showConfirmation=!0,e.updatePersonRole(i.cellInfos,n)})}}}}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t){let i=Object.create(null);return i.createData={menu:[{type:"PushItem",title:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_OrchestrateChangeActions,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"_OrchestrateChangeActions"},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_OrchestrateChangeActions},{id:"newcaImpcatedItem",type:"PushItem",title:t.CHG_GOV_ImpactedItem_Toolbar_Add_New_ChangeAction,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"addNewChangeAction"},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_New_ChangeAction},{type:"PushItem",title:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_ChangeAction,state:"disabled",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"addExistingChangeAction"},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_ChangeAction}]},i.viewData={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"changeImpactView",argument:{view:"GridView"}},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"changeImpactView",argument:{view:"TileView"}},tooltip:t.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(i){const n="true"===i.accessBits.AddImpactedItems,o=(i.accessBits.RemoveImpactedItems,"true"===i.accessBits.ManageImplementingChanges);let a={entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:t.CHG_GOV_ImpactedItem_Toolbar_AddImpactedItem,position:"far",visibleFlag:n,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"addExistingHandler"}}},{id:"changeAssessment",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:t.CHG_GOV_ImpactBasis_Toolbar_ChangeAssessment,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"changeAssessmentHandler"}}},{id:"massUpdate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:"Mass Update",position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"massUpdateHandler"}}},{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"change-action",fontIconFamily:1},value:this.createData,tooltip:t.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_OrchestrateChangeActions_Drop_Down},position:"far",disabled:!1,visibleFlag:o},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:t.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",func:"removeHandler"}}},{id:"ia_impacts_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:t.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:i.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};return e.getGlobalVariable().is3DSpace&&(a.entries=a.entries.filter(e=>"changeAssessment"!=e.id),a.entries[2].dataElements.value.menu=a.entries[2].dataElements.value.menu.filter(e=>"newcaImpcatedItem"!=e.id)),a},i}),define("DS/ENOChgGovernanceUX/scripts/util/DocumentUtils",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/DocumentManagement/DocumentManagement","DS/ENOChgServices/scripts/services/ChgInfraService"],function(e,t,i){"use strict";return{init:function(){},preview:function(e){this._loadCommands(e,"Preview")},edit:function(e){this._loadCommands(e,"Edit")},undoEdit:function(e){this._loadCommands(e,"UndoEdit")},update:function(e){this._loadCommands(e,"Update")},download:function(e){this._loadCommands(e,"Download")},_loadCommands:function(t,n){require(["DS/DocumentCommands/ENOXDocumentCommands","DS/DocumentCommands/DocumentCommandsV2","DS/DocumentManagement/DocumentManagement","DS/CoreEvents/ModelEvents"],function(o,a,s,r){let l=e.getGlobalVariable();var d=decodeURIComponent(l.getSecurityContext()),c=l.tenant,u=l.get3DSpaceURL(),p=t;"Download"!==n&&"Preview"!==n||s.getDocuments(p,{tenant:c,securityContext:d,tenantUrl:u,onComplete:function(e){if(e.success){if(!Array.isArray(e.data))return;var t=new r;t.subscribe({event:"docv2-show-notification"},function(e){e&&i.showNotification(e.level,e.title,e.subtitle,e.message,e.sticky)}),new a({fetchSecurityContext:function(){return decodeURIComponent(l.getSecurityContext())},getSelectedNodes:function(){return e.data},getDocumentFromNodeModel:function(e){return e},platformUrls:{"3DSpace":u},events:t}).commands[n].execute()}},onFailure:function(e){console.log(e)}})})},getDocuments:function(i){let n=e.getGlobalVariable();var o=decodeURIComponent(n.getSecurityContext()),a=n.tenant,s=n.get3DSpaceURL();return UWA.is(i,"array")?new Promise(function(e,n){t.getDocuments(i,{getVersions:!1,additionalURLParams:"$fields=isDocumentType",tenantUrl:s,tenant:a,securityContext:o,onComplete:function(t){e(t.data)},onFailure:n})}):Promise.reject()}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r){var l={onCompleteCallback:function(e){console.log("................................");var t=i.processChangeActionInContext(e).processData;console.log(t),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){e.addNodesInLayout(t)})},onFailureCallback:function(){console.log("ERROR : FAILED CREATE CA")},createNewChange:function(){e.prototype.execute(l.onCompleteCallback)},createNewChangeOrderInContext:function(e){let t=e.parentID;console.log("launchCreateChangeOrderDialog ............................");let i=o.getUserPreference(a.keys.createKeys.CO_DEF_TYPE),l={context:{service:"3DSpace",tenant:n.getGlobalVariable().tenant,header:{SecurityContext:n.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:i,select:[],parentPIDs:[t]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Order"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)});let i={};i[a.keys.createKeys.CO_DEF_TYPE]=e.result[0].type,o.saveUserPreference(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new s).CreateNew(l)},createNewChangeActionInContext:function(e){let t=e.parentID;console.log("createNewChangeActionInContext ............................");let i=o.getUserPreference(a.keys.createKeys.CA_DEF_TYPE),l={context:{service:"3DSpace",tenant:n.getGlobalVariable().tenant,header:{SecurityContext:n.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:i,select:[],parentPIDs:[t]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)});let i={};i[a.keys.createKeys.CA_DEF_TYPE]=e.result[0].type,o.saveUserPreference(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new s).CreateNew(l)},createChangeRequestInContext:function(e){let t=e.parentID,i=[];e.selectedIDs&&(i=e.selectedIDs),console.log("launchCreateChangeRequestDialog ............................");let l=o.getUserPreference(a.keys.createKeys.CR_DEF_TYPE),d={context:{service:"3DSpace",tenant:n.getGlobalVariable().tenant,header:{SecurityContext:n.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_GOV_Welcome_Activity_New_Change_Request,type:"Change Request",silentMode:!1,overlay:!0,options:{typeName:"Change Request",preferedType:l,select:[],parentPIDs:[t],selectedIDs:i},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(t){let i={objectID:t.result[0].identifier,type:"Change Request"};require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(t){t.ChgOrchestrationDataGridModel.addNewChildren(i),e.postComplete&&e.postComplete()});let n={};n[a.keys.createKeys.CR_DEF_TYPE]=t.result[0].type,o.saveUserPreference(n)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new s).CreateNew(d)}};return l}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/applicability/ChgCRApplicabilityfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"applicability-CR-container"}))},updateFacet:function(){var e=UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder});document.getElementById("applicability-CR-container").setContent(""),e.inject(this.elements.container)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_AddIssue,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"addExistingHandler"}}},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_RemoveIssue,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesFilterModel",["UWA/Core"],function(e){"use strict";return{getFilterModel:function(){return{tree:{filterId:"stringRegexp",filterModel:""},title_instance:{filterId:"stringRegexp",filterModel:""},typeNLS:{filterId:"set",filterModel:[]},name:{filterId:"stringRegexp",filterModel:""},revision:{filterId:"set",filterModel:[]},maturityWithBadge:{filterId:"set",filterModel:[]},reasonForChange:{filterId:"stringRegexp",filterModel:""},change:{filterId:"set",filterModel:[]},change_details:{filterId:"stringRegexp",filterModel:""},moved_to:{filterId:"stringRegexp",filterModel:""}}}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/ChgCADataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,o,a,s,r,l){"use strict";var d=r.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",d)},loadIndexedChangeActions:function(e,t){var o=e,a=new n;e.prepareUpdate();for(var s=0;s<t.length;s++){var r=this.createCustomNameField(t[s]);t[s].co_name=r;var l=this.createCustomSeverity(t[s]);t[s].sev=l;var d=this.createCustomChangeCoordinatorField(t[s]);t[s].co_Coordinator=d;var c=this.createCustomOwnerField(t[s]);t[s].co_Owner=c;var u=this.getStatusBarIcons(t[s]),p=this.statusbarIconsTooltips(t[s]),g=this.getSubLevel(t[s]),h=this.getDescription(t[s]);t[s].maturityWithBadge=t[s].maturityNLS;for(var m=this.createCustomTooltip(t[s]),C=!1,f=o.getChildren(),v=0;v<f.length;v++){f[v].options.grid.id==t[s].id&&(C=!0)}if(!C){var D=i.createTreeNodeDataModel(a,{label:t[s].title,subLabel:g,description:h,grid:t[s],icons:[t[s].iconURL],thumbnail:t[s].thumbnail,statusbarIcons:u,statusbarIconsTooltips:p,customTooltip:m,contextualMenu:["Copy1","Move1"]});e.addChild(D)}}e.pushUpdate()},loadChangeActionData:function(e,t,a){var s=e;let r=new n;e.prepareUpdate();for(let n=0;n<t.length;n++){let u=this.createCustomNameField(t[n],"NonIndex");t[n].co_name=u;let p=this.createCustomSeverity(t[n]);t[n].sev=p;let g=this.createCustomChangeCoordinatorField(t[n]);t[n].co_Coordinator=g;let h=this.createCustomOwnerField(t[n]);t[n].co_Owner=h;let m=this.getStatusBarIcons(t[n],"NonIndex"),C=this.statusbarIconsTooltips(t[n],"NonIndex"),f=this.getSubLevel(t[n]),v=this.getDescription(t[n]);t[n].maturityWithBadge=t[n].maturityNLS;let D=this.createCustomTooltip(t[n]);for(var l=!1,d=(o.getGlobalVariable().existingCRIds,l=!1,s.getChildren()),c=0;c<d.length;c++){d[c].options.grid.id==t[n].id&&(l=!0)}if(!l){let o=i.createTreeNodeDataModel(r,{label:t[n].title,subLabel:f,description:v,grid:t[n],icons:[t[n].iconURL],thumbnail:t[n].thumbnail,statusbarIcons:m,statusbarIconsTooltips:C,customTooltip:D,contextualMenu:["Copy1","Move1"]});"true"==a?e.addChild(o,0):e.addChild(o)}}e.pushUpdate()},updateNodeIndexed:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"caSummaryNotEmpty"}),e.unselectAll();let o=new n,a=this.createCustomNameField(t[0]);t[0].co_name=a;let s=this.createCustomSeverity(t[0]);t[0].sev=s;let r=this.createCustomChangeCoordinatorField(t[0]);t[0].co_Coordinator=r;let l=this.createCustomOwnerField(t[0]);t[0].co_Owner=l;let d=this.getStatusBarIcons(t[0]),c=this.statusbarIconsTooltips(t[0]),u=this.getSubLevel(t[0]),p=this.getDescription(t[0]),g=this.createCustomTooltip(t[0]),h=i.createTreeNodeDataModel(o,{label:t[0].title,subLabel:u,description:p,grid:t[0],icons:[t[0].iconURL],thumbnail:t[0].thumbnail,statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:g});e.getXSO().add(h),e.addChild(h,0)},createCustomNameField:function(e,t){let i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);let n=new UWA.Element("div",{class:"iconsDiv"});if("true"==e.onHold){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(e),e.inject(n)}if("NonIndex"==t){let e=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_TOOLTIP_NEW_ACTION});UWA.createElement("div",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-database-add recentCA"}).inject(e),e.inject(n)}return n.inject(i),i.outerHTML},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},createCustomChangeCoordinatorField:function(e){let t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){let i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{let t=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(i);let l=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),l.inject(t)}return t.outerHTML},createCustomSeverity:function(e){let t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);let o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomMaturity:function(e){let t="co-state co-draft";"InWork"==e.maturity?t="co-inwork co-state":"InApproval"==e.maturity?t="co-Inapproval co-state":"Approved"==e.maturity?t="co-approved co-state":"Completed"==e.maturity&&(t="co-completed co-state");let i=new UWA.Element("div",{});return UWA.createElement("span",{html:e.maturityNLS,class:t}).inject(i),i.outerHTML},getStatusBarIcons:function(e,t){let i=[];return"Low"==e.severity?i.push("level-low"):"Medium"==e.severity?i.push("level-medium"):"High"==e.severity&&i.push("level-high"),"true"==e.onHold&&i.push("pause"),"NonIndex"==t&&i.push("database-add"),i},statusbarIconsTooltips:function(e,t){let i=[];return i.push(e.severityNLS),"true"==e.onHold&&i.push(a.CHG_GOV_TOOLTIP_HOLD),"NonIndex"==t&&i.push(a.CHG_TOOLTIP_NEW_ACTION),i},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},getSubLevel:function(e){let t="";return t=e.name+" | "+e.ownerFullName},getDescription:function(e){let t="";return t=e.maturityNLS},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a){return{findProposedChanges:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Search Proposed Changes"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_FIND:"+(widget?widget.id:""))},addProposedChange:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Add Proposed Changes"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_ADD:"+(widget?widget.id:""))},defineProposedChange:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Define Proposed Changes"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_DEFINE:"+(widget?widget.id:""))},addProposedViaAssessment:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Change Assessment"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_ADD_ASSESSMENT:"+(widget?widget.id:""))},massUpdateHandler:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Edit Proposed Change"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_ProposedDGV_EDIT:"+(widget?widget.id:""))},downloadProposedChange:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Download Proposed Change"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_Proposed_Download:"+(widget?widget.id:""))},removeProposedChange:function(e){var i={commandInfo:{type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>DGV>Remove Proposed Change"}};a.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),t.publish("ECM_GOV_Proposed_Remove:"+(widget?widget.id:""))},launchCustomColumnManager:function(e){},switchViewHandler:function(e){"DGV"===e.type||"LTV"===e.type&&t.publish("ECM_GOV_ProposedDGV_OFF:"+(widget?widget.id:""))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbar",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t){let i=Object.create(null);return i.switchViewMenu={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"switchViewHandler",argument:{type:"DGV"}},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_LARGE_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-big-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"switchViewHandler",argument:{type:"LTV"}},tooltip:t.CHG_TOOLTIP_LARGE_TILE_VIEW}]},i.getProposedChangesToolbarDefinition=function(e){return this.switchViewMenu.menu[0].state="selected",this.switchViewMenu.menu[1].state="unselected",{entries:[{id:"findProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"find",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Find,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"findProposedChanges"}}},{id:"addProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Add,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"addProposedChange"}}},{id:"defineProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"attributes-add",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Define,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"defineProposedChange"}}},{id:"changeAssessmentProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_ChangeAssessment,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"addProposedViaAssessment"}}},{id:"editProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Edit,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"massUpdateHandler"}}},{id:"downloadProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"download",fontIconFamily:1},tooltip:t.CHG_GOV_Download,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"downloadProposedChange"}}},{id:"removeProposed",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:t.CHG_GOV_Proposed_Remove,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbarHandler",func:"removeProposedChange"}}},{id:"pc_facet_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:t.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:e.custom_view_options}}}},{id:"switch_view_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"view-list",fontIconFamily:1},tooltip:t.CHG_TOOLTIP_GRID_VIEW,value:this.switchViewMenu},position:"far",category:"view"}]}},i}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_AddRelatedScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"addExistingHandler"}}},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_Toolbar_RemoveRelatedScope,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/components/decisionView/ChgDecisionView",["DS/ENXDecisionMgmt/View/Facets/DecisionTab","DS/ENXDecisionMgmt/View/RightSlideIn/DecisionPropPanelView","DS/ENXDecisionMgmt/Controller/DecisionBootstrap","DS/CoreEvents/ModelEvents","DS/UIKIT/Mask","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o,a,s,r){"use strict";return{createDecisionView:function(n){let l=n.target;null!=widget.decisionEvent&&(widget.decisionEvent.unsubscribe("decision-create-click"),widget.decisionEvent.unsubscribe("decision-preview-click"),widget.decisionEvent.unsubscribe("decision-create-close-click"),widget.decisionEvent.unsubscribe("decision-preview-close-click"));let d=r.getGlobalVariable(),c=d.tenant,u=d.get3DSpaceURL(),p=d.swymURL,g=d.getSecurityContext(),h={id:n.id,securityContext:g,tenant:c};e.init(h,l).then(function(e){i.set3DSpaceURL(u),i.setSwymUrl(p),i.setCollabSpaceTenant(g,c);let n,r,d=UWA.createElement("div",{id:"chg-Decision-container",styles:{height:"540px","min-width":"540px"}}),h=new t(d);widget.decisionEvent.subscribe("decision-create-click",function(e){h.init(e,"decisionCreate"),n=new s,r=new a({titleBarVisibleFlag:!1,closeButtonFlag:!1,resizableFlag:!0,modalFlag:!0,content:d,immersiveFrame:n}),n.inject(widget.body)}),widget.decisionEvent.subscribe("decision-preview-click",function(e){h.init(e,"decision"),n=new s,r=new a({titleBarVisibleFlag:!1,closeButtonFlag:!1,resizableFlag:!0,modalFlag:!0,content:d,immersiveFrame:n}),n.inject(widget.body);var t=document.querySelector(".id-card-detailed-info-section-decision");t&&(t.style.position="relative");var i=document.querySelector(".wux-windows-window-content");i&&(i.style.overflow="hidden")}),widget.decisionEvent.subscribe("decision-preview-close-click",function(e){null!=r&&(r.visibleFlag=!1,r.destroy()),null!=n&&n.destroy()}),widget.decisionEvent.subscribe("decision-create-close-click",function(e){null!=r&&(r.visibleFlag=!1,r.destroy()),null!=n&&n.destroy()}),o.unmask(l)},function(e){reject(e)})}}}),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsGridCol",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t){"use strict";let i=Object.create(null);return i.getColumns=function(){var i=t("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");let n=[];return n.push({text:e.CHG_GOV_DataGrid_Column_ChangeImpacts,dataIndex:"impactTypeNLS",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",width:150,typeRepresentation:"url",filterId:"set",filterModel:[],getCellClassName:function(e){return e&&e.nodeModel?"change-applicability":null},getCellValue:function(e){if(e.nodeModel)return"Applicability"==e.nodeModel.getAttributeValue("impactType")&&"SIGMA"==e.nodeModel.getAttributeValue("applicabilityIcon")?{label:e.nodeModel.getAttributeValue("impactTypeNLS"),icon:"math-summation wux-ui-3ds"}:"Applicability"==e.nodeModel.getAttributeValue("impactType")&&"DELTA"==e.nodeModel.getAttributeValue("applicabilityIcon")?{label:e.nodeModel.getAttributeValue("impactTypeNLS"),icon:"at-risk-status wux-ui-3ds"}:{label:e.nodeModel.getAttributeValue("impactTypeNLS")}}}),n.push(i.getColumnDefinition({dataIndex:"title"})),n.push(i.getColumnDefinition({dataIndex:"typeNLS"})),n.push(i.getColumnDefinition({dataIndex:"co_name"})),n.push(i.getColumnDefinition({dataIndex:"maturityWithBadge"})),n.push(i.getColumnDefinition({dataIndex:"severityNLS"})),n.push({text:e.CHG_CA_Column_Change_Impacts_Applicability,dataIndex:"applicability",width:150,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellValue:function(e){if("Applicability"==e.nodeModel.getAttributeValue("impactType"))return e.nodeModel.getAttributeValue("applicability")}}),n.push(i.getColumnDefinition({dataIndex:"ownerFullName"})),n.push({dataIndex:"change",text:e.CHG_CA_Column_Change_Impacts_Change,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0}),n.push({text:e.CHG_GOV_DataGrid_Column_Status,dataIndex:"status",editableFlag:!1,filterId:"set",filterModel:[]}),n.push({text:e.CHG_GOV_DataGrid_Column_ProposedChange,dataIndex:"proposedChange",minWidth:250,maxWidth:350,allowUnsafeHTMLContent:!0}),n},i}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/dependency/ChgCRDependencyfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"dependency-CR-container"}))},updateFacet:function(){var e=UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder});document.getElementById("dependency-CR-container").setContent(""),e.inject(this.elements.container)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/dependency/ChgDependencyfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"dependency-mainContainer"}))},updateFacet:function(){var e=this;o.mask(this.elements.container),require(["DS/ENOChangeActionUX/scripts/Views/CADependenciesGridView"],function(t){var i=e.getModel(),n=i.get("objectId");1!=i.isMergedModel()&&(a.publish("load-dependency"+widget.id,"pid:"+n),a.subscribe("dependency:update:View"+widget.id,function(i){if(e.elements&&e.elements.container){if(null!=document.getElementById("co-dependency"))document.getElementById("co-dependency").destroy();var n=UWA.createElement("div",{id:"co-dependency"}),r=e.getModel();if(!r)return!1;var l=r.get("objectId"),d="pid:"+l,c={};c.id=d,c.widgetId=widget.id,c.widgetTitle=widget.title,s.getObjectTypeInformation(l).then(function(i){if("Change Action"==i)s.getChangeActionUserAccess(l).then(function(s){c.showFlowdown=s.data[0].FlowdownFrom,null!=document.getElementById("dependency-mainContainer")&&(document.getElementById("dependency-mainContainer").innerHTML=""),(r=new t(c)).container=n,r.render(i),n.inject(e.elements.container),o.unmask(e.elements.container),a.unsubscribe("dependency:update:View"+widget.id)});else{c.showFlowdown=!1;var r=new t(c);if(null==document.getElementById("dependency-mainContainer")){var d=e.elements.container;document.body.appendChild(d)}document.getElementById("dependency-mainContainer").innerHTML="",r.container=n,r.render(i),n.inject(e.elements.container),o.unmask(e.elements.container),a.unsubscribe("dependency:update:View"+widget.id)}})}}))})},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig",["UWA/Class","DS/TreeModel/BaseFilter"],function(e,t){"use strict";return e.extend({init:function(){this.trigramNameFilter=t.inherit({isDataFiltered:function(e){var t=e.options.name,i=e.options.identifier,n=e.options.id;return void 0===i&&void 0!==n&&-1!==n.indexOf("uuid")&&(i=n),this.filterModel&&this.filterModel.text&&t&&i?!(-1!==t.toLowerCase().indexOf(this.filterModel.text.toLowerCase())||-1!==i.toLowerCase().indexOf(this.filterModel.text.toLowerCase())):!this.filterModel||""!==this.filterModel.text},isEmpty:function(){return void 0===this.filterModel.text}})},getTrigramNameFilter:function(){return UWA.clone(this.trigramNameFilter)}})}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper",["DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeOwnerCmd","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t,i,n,o){return{launchTransferDialog:function(e){this.enableTransferCommand(e)},enableTransferCommand:function(t){var i={_selectedItems:[],getSelectedNodes:function(){return this._selectedItems},addSelection:function(e,t){this._selectedItems=[];var i=this;UWA.is(e,"array")?e.forEach(function(e){i._selectedItems.push(e)}):i._selectedItems.push(e)},getReference:function(e){return getID()},getParent:function(e){return e.getParent()},getType:function(e){return getType()},getName:function(e){return getLabel()},securityContext:{SecurityContext:n.getGlobalVariable().getSecurityContext(),tenant:n.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},o=[];for(let e=0;e<t.length;e++){var a=UWA.extend(t[e],{getID:function(){return null!=t[e].serviceBasedObjId?t[e].serviceBasedObjId:t[e].id},getLabel:function(){return t[e].name},getOwner:function(){return t[e].owner},getType:function(){return t[e].type},getDisplayName:function(){return t[e].name},object:{revision:"-"}});o.push(a)}i.addSelection(o),new e({context:i,ID:"ActionBar_ChangeOwner"}).begin()}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRAddMemberView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"chg-add-member",tagName:"div",className:"chg-add-member",setup:function(){this.template='                                                <div class="'+this.getClassNames("-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-body")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table class="add-member-table table">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-change-coordinator")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Change_Coordinator+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-change-coordinator-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-change-coordinator-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search change-coordinator-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-assignee")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Assignee+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-assignee-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-assignee-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search assignee-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-approver")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Approver+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-approver-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-approver-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search approver-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-informed-user")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Follower+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-informed-user-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-informed-user-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search informed-user-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-button")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t</div>                                                </div>',this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"click .change-coordinator-field-search":function(){this.dispatchEvent("searchChangeCoordinator",arguments)},"click .assignee-field-search":function(){this.dispatchEvent("searchAssignee",arguments)},"click .approver-field-search":function(){this.dispatchEvent("searchApprover",arguments)},"click .informed-user-field-search":function(){this.dispatchEvent("searchInformedUser",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){let i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefination=function(e){return{entries:[{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},i}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationFeatureUtil",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService"],function(e,t){"use strict";return{createCustomColumn:function(i){let n=this;return new Promise(function(i,o){let a=e.getGlobalVariable().changeActionSubTypes,s=[...e.getGlobalVariable().changeOrderSubTypes,...a];t.getCombinedClassList(s).then(function(e){t.getPropertyForClassGrid(e).then(function(e){let o=t.makeCombinedColumnList(e),a=n.filterColumn(o);i(a)})})})},filterColumn:function(e){let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project"];for(let t of n)for(let i of e)i.delete(t);for(let n of e)return n.forEach((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:function(e,i){return e.nodeModel.getAttributeValue(t)}}}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationCreateChange",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s){var r={onCompleteCallback:function(e){console.log("................................");var i=t.processChangeActionInContext(e).processData;console.log(i),require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){e.addNodesInLayout(i)})},onFailureCallback:function(){console.log("ERROR : FAILED CREATE CA")},createNewChange:function(){e.prototype.execute(r.onCompleteCallback)},createNewChangeOrderInContext:function(e){let t=e.parentID;console.log("launchCreateChangeOrderDialog ............................");let r=n.getUserPreference(o.keys.createKeys.CO_DEF_TYPE),l={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:s.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:r,select:[],parentPIDs:[t]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Order"};require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)});let i={};i[o.keys.createKeys.CO_DEF_TYPE]=e.result[0].type,n.saveUserPreference(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new a).CreateNew(l)},createNewChangeActionInContext:function(e){let t=n.getUserPreference(o.keys.createKeys.CA_DEF_TYPE);let r=e.parentID,l={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:s.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:t,select:[],parentPIDs:[r]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){let t={objectID:e.result[0].identifier,type:"Change Action"};require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){e.ChgOrchestrationDataGridModel.addNewChildren(t)});let i={};i[o.keys.createKeys.CA_DEF_TYPE]=e.result[0].type,n.saveUserPreference(i)},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new a).CreateNew(l)}};return r}),define("DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView",["UWA/Class/View","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i){"use strict";return e.extend({container:"",setup:function(){},build:function(){UWA.is(this.container)&&this.getBody().inject(this.container)},getBody:function(){var e=UWA.createElement("div",{id:"applicability-body"}),t=new(this._createView_Applicability());return t.container=e,t.model=this.model,t.render(),e},_createView_Applicability:function(){return e.extend({tagName:"div",className:"generic-detail6",render:function(){var e=this.container,i=new UWA.Element("div");i.setAttributes({id:"FacetDivForApplicabilityContext"}),i.setStyles({height:"100%"}),e.addContent(i);var n,o=model.get("objectId");n=t.getGlobalVariable().isNative?"Native":t.getGlobalVariable().is3DSpace?"3DSpace":"Dashboard",require(["DS/CfgEvolutionUX/CfgEvolutionLayoutFactory"],function(e){var a={mode:"Applicability",objectid:o,parent:i,environment:n};a.tenant=t.getGlobalVariable().tenant;e.create(a);"3DSpace"==n&&(enoviaServerFilterWidget.fixForSearchInOpener=!0)})}})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list",className:"info-active"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_AddIssue,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout",func:"addExistingHandler"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeRequest_Toolbar_RemoveIssue,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/issue/ChgCRIssueDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p=u.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});let g=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",p)},loadIssueData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name+" | "+e.ownerFullName;""==e.maturityNLS&&(e.maturityNLS=e.stateNLS);let o=e.maturityNLS;var a=this.getCustomTooltip(e);return new i({label:e.title,subLabel:n,description:o,grid:e,customTooltip:a,icons:[e.icon],thumbnail:e.thumbnail,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId;var a=e[0].id,s=e[0].type?e[0].type:"",d=e[0].serviceId?e[0].serviceId:"3DSpace",u={resolvedBy:[]};u.physicalId=a,u.resolvedBy.push({physicalId:o,envId:"OnPremise",objectType:s,serviceId:d});let p=document.getElementById("outer-issue-grid-div");"undefined"!=p&&null!=p&&c.mask(p),r.updateExistingIssue(a,u).then(function(e){r.getIssueDetails(a).then(function(n){let o=n.body;l.processedChangeRequestNewIssueList(o).then(function(n){g.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e)}),c.unmask(p)})},function(e){c.unmask(p),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId;var s=e[0].id,l={resolvedBy:[]};l.physicalId=s,l.resolvedBy.push({physicalId:o});let u=document.getElementById("outer-issue-grid-div");"undefined"!=u&&null!=u&&c.mask(u),r.removeExistingIssue(s,l).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);d.success(a.CHG_GOV_Issue_Remove_Success),c.unmask(u)},function(e){c.unmask(u),n()})})},addNodesInLayoutModel:function(e,t){let i=g.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return g}),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesServices",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","DS/EditPropWidget/models/EditPropModel","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o){"use strict";return t.singleton({init:function(e){},getSecurityContext:function(){return{SecurityContext:o.getGlobalVariable().mySecurityContext}},getpropOptions:function(e){var t=this,i=[e.FACET_PROPERTIES];return{typeOfDisplay:e.ALL,selectionType:e.NO_SELECTION,readOnly:!1,extraNotif:!0,editMode:!1,facets:i,context:{getSecurityContext:function(){return t.getSecurityContext()}}}},getPropModel:function(e){var t=[];if(e instanceof Array)for(var a=0;a<e.length;a++){var s=new n({metatype:e[a].metatype,objectId:e[a].grid&&e[a].grid.serviceBasedObjId?e[a].grid.serviceBasedObjId:e[a].physicalId,source:o.getGlobalVariable().serviceName,tenant:o.getGlobalVariable().tenant});s.addEvent("onSave",function(e){i.publish("CO-Properties-Update",this)}),""!=s._attributes.objectId&&t.push(s)}return t}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){var t=Object.create(null);return t.toolbar=null,t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(){return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_AddMember,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAAddMemberLayout",func:"launchAddMemberPanel"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Remove,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout",func:"removeHandler"}}},{id:"filter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"filter",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Filter,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMemberFilterLayout",func:"launchFilterMemberPanel"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgSlideinForm",["UWA/Class/Promise","UWA/Class/View","UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgRouter5/scripts/ChgRouter","DS/UIKIT/Input/Button","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s){"use strict";return t.extend({slideinProposedContainer:void 0,slideinPropertiesContainer:void 0,triptychMain:void 0,form:void 0,setup:function(e){var t=this,n=o.getDependency("xChangeApp");o.getDependency("applicationChannel").subscribe({event:"triptych-panel-hidden"},function(e){"right"===e&&t.hideSlideIn()});for(var a=n.infoPanel.childNodes,s=0;s<a.length;s++){var r=a[s].className;i.is(r)&&"secondmainContainer-sidepanel"===r.trim()?this.slideinProposedContainer=a[s]:i.is(r)&&"EditProp_MasterContain editProp_all"===r.trim()&&(this.slideinPropertiesContainer=a[s])}this.triptychMain=i.extendElement(document.body).getElement(".triptych-main")},buildSlideIn:function(e){this.form=e},showSlideIn:function(){this.slideinProposedContainer.style.display="block",this.slideinPropertiesContainer.style.display="none",this.triptychMain.style.opacity=".5",this.triptychMain.style.pointerEvents="none",o.getDependency("applicationChannel").publish({event:"triptych-show-panel",data:"right"})},hideSlideIn:function(){this.triptychMain.style.opacity="1",this.triptychMain.style.pointerEvents="inherit"},buildSlideIn:function(e){if(i.is(this.slideinProposedContainer)){this.slideinProposedContainer.empty(),this.form=e,e.slideInReference=this;var t=i.createElement("div",{id:"chgSlideinForm",class:"chgSlideinForm"});this.getHeader().inject(t),this.getBody().inject(t),this.getFooter().inject(t),t.inject(this.slideinProposedContainer)}},getHeader:function(){var e=this.form.getHeading();return i.createElement("div",{id:"chgSlideinHeader",class:"chgSlideinHeader",html:e})},getBody:function(){var e=i.createElement("div",{id:"chgSlideinBody",class:"chgSlideinBody"});return this.form.getBody().inject(e),e},getFooter:function(){var e=this,t=this.form.getFooter();return new a({value:s.CHG_GOV_Button_Cancel,className:"default"}).inject(t).addEvent("onClick",function(){e.cancelHandler()}),i.createElement("div",{id:"chgSlideinFooter",class:"chgSlideinFooter",html:t})},cancelHandler:function(){o.getDependency("applicationChannel").publish({event:"triptych-hide-panel",data:"right"})}})}),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderMenuSubscriber",["DS/ENOChgServices/scripts/components/ChgCommonDailog","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/SuperModal","DS/ENOChgServices/scripts/services/ChgNativeInitService","require"],function(e,t,i,n,o,a,s,r,l,d){return{init:function(e){this._modelForIdCard=e,this._subscribeToModelEvents()},_subscribeToModelEvents:function(){var n=this;n.modelEvents=n._modelForIdCard.get("modelEvents"),n.modelEvents.subscribe({event:"chg-idcard-dropdown-menu-action"},function(o){if(console.log("in model event subscribe: chg-idcard-dropdown-menu-action"),o.id){var a={};switch(o.id){case"chgHold":a={chgPhysicalId:n._modelForIdCard.id,chgType:n._modelForIdCard.get("isKindOfType"),btnId:o.id,boxTitle:o.text,subTitle:t.CHG_CO_Hold_SubTitle,txtPlaceHolder:t.CHG_CO_Hold_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgResume":a={chgPhysicalId:n._modelForIdCard.id,chgType:n._modelForIdCard.get("isKindOfType"),btnId:o.id,boxTitle:o.text,subTitle:t.CHG_CO_Resume_SubTitle,txtPlaceHolder:t.CHG_CO_Resume_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgCancel":a={chgPhysicalId:n._modelForIdCard.id,chgType:n._modelForIdCard.get("isKindOfType"),btnId:o.id,boxTitle:o.text,subTitle:t.CHG_CO_Cancel_SubTitle,txtPlaceHolder:t.CHG_CO_Cancel_PlaceHolder,DoneCallback:DoneCallback,CancelCallback:CancelCallback};break;case"chgDuplicateCA":let e={btnId:o.id,chgPhysicalId:n._modelForIdCard.id};DoneCallback(e);break;case"chgDuplicateCR":let s={btnId:o.id,chgPhysicalId:n._modelForIdCard.id,chgType:n._modelForIdCard._attributes.type,chgPolicy:n._modelForIdCard._attributes.policy,chgTitle:n._modelForIdCard._attributes.title};DoneCallback(s);break;case"chgCAWorkUnder":let r={btnId:o.id,chgPhysicalId:n._modelForIdCard.id};DoneCallback(r);break;case"chgBOMSync":let l={btnId:o.id,chgPhysicalId:n._modelForIdCard.id};DoneCallback(l);break;case"chgRequestClarification":case"chgProvideClarification":i.warn("Implementation Pending","false")}"chgCAWorkUnder"!=o.id&&"chgBOMSync"!=o.id&&"chgDuplicateCA"!=o.id&&"chgDuplicateCR"!=o.id&&"chgRequestClarification"!=o.id&&"chgProvideClarification"!=o.id&&e.launchInfoDailog(a)}}),DoneCallback=function(n){var a=n.btnId,c=n.chgType;if(a){switch(a){case"chgHold":"ChangeOrder"==c?o.handleContextMenuClickHold(n).then(function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})}):"ChangeRequest"==c?o.handleContextMenuClickHoldForCR(n).then(function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})}):"ChangeAction"==c&&o.handleContextMenuClickHoldForCA(n).then(function(e){l.takeOffFromWorkUnder(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})});break;case"chgResume":"ChangeOrder"==c?o.handleContextMenuClickResume(n).then(function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})}):"ChangeRequest"==c?o.handleContextMenuClickResumeForCR(n).then(function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})}):"ChangeAction"==c&&o.handleContextMenuClickResumeForCA(n).then(function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})});break;case"chgCancel":"ChangeOrder"==c?o.handleContextMenuClickCancel(n).then(function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})}):"ChangeRequest"==c?o.handleContextMenuClickCancelForCR(n).then(function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})}):"ChangeAction"==c?o.handleContextMenuClickCancelForCA(n).then(function(e){l.takeOffFromWorkUnder(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})}):"InvestigationRequest"==c&&i.warn("Implementation Pending","false");break;case"chgCAWorkUnder":console.log("Work under menu clicked...!"),o.handleContextMenuClickWorkUnder(n).then(function(e){s.publish("change-action-work-under",e)});break;case"chgBOMSync":o.handleContextMenuClickBOMSyncForCA(n).then(function(e){var i,n=new r({closable:!0,renderTo:widget.body}),o="";e&&"true"===e.OPERATION_STATUS?o=t.ECM_CA_EBOMSync_Successful:e&&"false"===e.OPERATION_STATUS&&(o=t.ECM_CA_EBOMSync_Failure),i="<p>\t\t\t\t\t\t\t\t\t\t\t\t\t\x3c!--h6></h6--\x3e\t\t\t\t\t\t\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t\t\t\t\t\t\t\t<li>"+o+"</li>\t\t\t\t\t\t\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t\t\t\t\t\t</p>",n.dialog({body:i,title:t.ECM_CA_Action_EBOMSync_CollabStatus,buttons:[{className:"primary",value:t.ECM_CA_Collab_Dialog_Done,action:function(e){e.hide()}}]})});break;case"chgDuplicateCA":var u={commandInfo:{type:"Change Action",facet:"IDCardHeader",action:"CA>IDCardHeader>Duplicate CA"}};d("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:u}),o.duplicateChangeActionCA(n.chgPhysicalId).then(function(e){i.success(t.CHG_GOV_Change_Action_Duplicate_Message+e.data[1].id)});break;case"chgDuplicateCR":u={commandInfo:{type:"Change Request",facet:"IDCardHeader",action:"CR>IDCardHeader>Duplicate CR"}};d("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:u});let e=[],p={id:n.chgPhysicalId,type:n.chgType,policy:n.chgPolicy,title:n.chgTitle};e.push(p),o.duplicateChangeRequestCR(e).then(function(e){e.data[0]["warn report"]?i.warn(t.CHG_GOV_Change_Request_Duplicate_Message+e.data[0].name+"<br/>"+t.CHG_GOV_Error_Duplicate_Message+"<br/>"+e.data[0]["warn report"][0].message):i.success(t.CHG_GOV_Change_Request_Duplicate_Message+e.data[0].name)});break;case"chgRequestClarification":case"chgProvideClarification":break;default:console.log("Match not found")}"chgBOMSync"!=a&&"chgDuplicateCA"!=a&&e.closeDialog()}},CancelCallback=function(t){e.closeDialog(t)}}}}),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","require","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService"],function(e,t,i,n,o,a,s,r,l){"use strict";return{getChangeImpactsContextualMenu:function(e,t){return new Promise(function(i,s){let d=a("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"),c=t.cellInfos.columnID,u=t.cellInfos.nodeModel.options.grid.impactType;if(11===c&&"Resolution Item"===u){const a=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().map(e=>e.options.grid.proposedID);let s={objectId:t.cellInfos.nodeModel.options.grid.proposedID,objectType:t.cellInfos.nodeModel.options.grid.proposedType,displayName:t.cellInfos.nodeModel.options.grid.proposedName,displayType:t.cellInfos.nodeModel.options.grid.proposedType},l=[];var p=r.getGlobalVariable();(h={}).objectID=t.cellInfos.nodeModel.options.grid.proposedID;const c={};c.selectedNodeIDs=a;var g=[];const u=o.openWith(s);g.push(u),Promise.all(g).then(t=>{t[0]&&l.push(t[0]),p.isNative&&(l.push(o.getExploreMenu(e,h)),l.push(o.getExploreWithMenu(e,h)),l.push(o.getOpenMenu(e,h)),l.push(o.getOpenWithNativeMenu(e,h))),l.push(n.createPropertyPushItem(a)),l.push(d.getRelationalExplorerMenu(c)),i(l)})}else{let a=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const s=a.map(e=>e.options.grid.id);let c={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.ChgGovDG_name,displayType:t.cellInfos.nodeModel.options.grid.type},u=[];var h;p=r.getGlobalVariable();(h={}).objectID=t.cellInfos.nodeModel.options.grid.id;g=[];const m=o.openWith(c);o.getOpenMenu(e,t);g.push(m);const C={};C.selectedNodeIDs=s,Promise.all(g).then(t=>{t[0]&&u.push(t[0]),p.isNative&&"Change Action"==c.displayType&&u.push(o.getOpenCAMenu(e,h)),u.push(n.createPropertyPushItem(s)),u.push(d.getRelationalExplorerMenu(C)),u.push(l.getCopyLink(a)),i(u)})}})}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/decision/ChgCRDecisionfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"decision-CR-container"}))},updateFacet:function(){var e=UWA.createElement("div",{html:s.CHG_GOV_Empty_DataGrid_PlaceHolder});document.getElementById("decision-CR-container").setContent(""),e.inject(this.elements.container)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){var t=Object.create(null);return t.toolbar=null,t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCO,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"filterView",argument:{filter:"activeCO"}},tooltip:e.CHG_Filter_ActiveCO_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCO,action:{module:"DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",func:"filterView",argument:{filter:"inactiveCO"}},tooltip:e.CHG_Filter_InactiveCO_Def}]},t.writetoolbarDefination=function(t){return{entries:[{id:"co_summary_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t){return{getMenuInstance:function(e){let i=Object.create(null);return i.moveMenu={menu:[{type:"CheckItem",title:t.CHG_GOV_Realized_Move_New,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"moveMenuHandler",argument:{mode:"New"}},tooltip:t.CHG_GOV_Realized_Move_New},{type:"CheckItem",title:t.CHG_GOV_Realized_Move_Existing,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-insert"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"moveMenuHandler",argument:{mode:"Existing"}},tooltip:t.CHG_GOV_Realized_Move_Existing}]},i.filterMenu={menu:[{type:"CheckItem",title:t.CHG_GOV_Realized_Tracked_SF,state:"TRACKED"===e.filter?"selected":"",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-change-action-realized"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"filterViewHandler",argument:{filter:"TRACKED"}},tooltip:t.CHG_GOV_Realized_Tracked},{type:"CheckItem",title:t.CHG_GOV_Realized_Moved_SF,state:"MOVED"===e.filter?"selected":"",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-move-to"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"filterViewHandler",argument:{filter:"MOVED"}},tooltip:t.CHG_GOV_Realized_Moved},{type:"CheckItem",title:t.CHG_GOV_Realized_Ignored_SF,state:"IGNORED"===e.filter?"selected":"",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-ignore"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"filterViewHandler",argument:{filter:"IGNORED"}},tooltip:t.CHG_GOV_Realized_Ignored},{type:"CheckItem",title:t.CHG_GOV_Realized_Grouped_SF,state:"GROUPED"===e.filter?"selected":"",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-select-all-checkboxes"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"filterViewHandler",argument:{filter:"GROUPED"}},tooltip:t.CHG_GOV_Realized_Grouped}]},i.expandCollapseMenu={menu:[{type:"CheckItem",title:t.CHG_GOV_Expand_All,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-flow-tree-expand-down"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"expandCollapseHandler",argument:{action:"EXPAND"}},tooltip:t.CHG_GOV_Expand_All},{type:"CheckItem",title:t.CHG_GOV_Collapse_All,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-flow-tree-expand-up"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"expandCollapseHandler",argument:{action:"COLLAPSE"}},tooltip:t.CHG_GOV_Collapse_All}]},i.switchViewMenu={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,state:"selected",fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"switchViewHandler",argument:{type:"DGV"}},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_LARGE_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-big-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"switchViewHandler",argument:{type:"LTLV"}},tooltip:t.CHG_TOOLTIP_LARGE_TILE_VIEW}]},i}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgErrors","require"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p=d.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),g=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"crImpactAnalysis",useAsyncPreExpand:!0});return e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",p)},loadImpactAnalysisData:function(e,t){e.prepareUpdate();var n=this.createTreeDocumentNodeModel(t);e.addRoot(n),n.length>1&&"true"==o.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&"Cancelled"!=n[0].options.grid.maturity&&(o.getGlobalVariable().total_ia_row=new i({label:a.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:a.CHG_GOV_IA_LastColumn_label}}),e.addRoot(o.getGlobalVariable().total_ia_row)),e.pushUpdate()},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;var n=this.createCustomNameField(e);e.ia_name=n;var a,s=e.name+" | "+e.ownerFullName,r=e.maturityNLS,l=this.getStatusBarIcons(e),d=this.statusbarIconsTooltips(e);a=o.getGlobalVariable().is3DSpace?UWA.String.escapeHTML(e.title):e.title,e.refinement=this.createCustomRefinementField(e.refinement);var c=this.getCustomTooltip(e);return new i({label:a,subLabel:s,description:r,grid:e,icons:[e.icon],thumbnail:e.thumbnail,contextualMenu:["dummy placeholder"],customTooltip:c,statusbarIcons:l,statusbarIconsTooltips:d,useAsyncPreExpand:!0})},getStatusBarIcons:function(e){var t=[];return"Cancelled"==e.maturity&&t.push("block"),t},statusbarIconsTooltips:function(e){var t=[];return"Cancelled"==e.maturity&&t.push(e.cancelComment),t},createCustomNameField:function(e){var t=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(t);var i=new UWA.Element("div",{class:"iconsDiv"});if("Cancelled"==e.maturity){var n=new UWA.Element("div",{class:"gridIconContainer",title:e.cancelComment});UWA.createElement("div",{class:"fonticon fonticon-block"}).inject(n),n.inject(i)}if(e.Dispatch_From_ParentCR&&e.Dispatch_From_ParentCR.length>0&&e.Dispatch_To&&e.Dispatch_To.length>0){var o=UWA.createElement("div",{class:"fonticon fonticon-graph-egraph",styles:{color:"grey"}}),a=UWA.createElement("div",{class:"fonticon fonticon-up",styles:{color:"grey"}}),s=UWA.createElement("div",{class:"fonticon fonticon-down",styles:{color:"grey",marginLeft:"-5px"}});o.inject(i),a.inject(i),s.inject(i)}else if(e.Dispatch_From_ParentCR&&e.Dispatch_From_ParentCR.length>0){o=UWA.createElement("div",{class:"fonticon fonticon-graph-egraph",styles:{color:"grey"}}),a=UWA.createElement("div",{class:"fonticon fonticon-up",styles:{color:"grey"}});o.inject(i),a.inject(i)}else if(e.Dispatch_To&&e.Dispatch_To.length>0){o=UWA.createElement("div",{class:"fonticon fonticon-graph-egraph",styles:{color:"grey"}}),s=UWA.createElement("div",{class:"fonticon fonticon-down",styles:{color:"grey"}});o.inject(i),s.inject(i)}return i.inject(t),t.outerHTML},createCustomRefinementField:function(e){var t=new UWA.Element("div",{class:"cr-ia-refinement-val"});return(e=UWA.createElement("a",{html:e})).inject(t),t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var l=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(a);var d=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),d.inject(n),n.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},removeNodeInModelFromId:function(e){this.treeDocument.prepareUpdate();for(var t=this.treeDocument.getAllDescendants(),i=0;i<t.length;i++)t[i].options.grid.id===e&&t[i].remove();this.treeDocument.pushUpdate()},addNodeInModelFromId:function(e){const t=this;let n=!1;0==this.treeDocument.getChildren().length&&this.treeDocument._modelEvents.publish({event:"treeNotEmpty"});const s=this.contextDetails.id;r.getImpactAnalysisFromId(e).then(e=>{let r=l.processCRImpactAnalysis(e,s);var d=g.prototype.createTreeDocumentNodeModel(r);if(t.treeDocument.prepareUpdate(),0==t.treeDocument.getRoots().length)t.treeDocument.addRoot(d);else for(var u=d.length-1;u>=0;u--)t.treeDocument.addRoot(d[u],0);t.treeDocument.pushUpdate();for(let e of t.treeDocument.getAllDescendants())if("ia_Total"===e.options.grid.id){n=!0;break}!1===n&&"true"==o.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&"Cancelled"!=d[0].options.grid.maturity&&t.treeDocument.addRoot(new i({label:a.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:a.CHG_GOV_IA_LastColumn_label}})),c.warn(a.CHG_CUSTOM_COLUMN_WARN_IA,!0)})},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return g}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemReportViewToolbar",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t){let i=Object.create(null);return i.viewData={menu:[{type:"CheckItem",title:t.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeImpactView",argument:{view:"GridView"}},tooltip:t.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:t.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeImpactView",argument:{view:"TileView"}},tooltip:t.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(e){let t={entries:[{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]};return JSON.stringify(t)},i}),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsFeatureUtil",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService"],function(e,t){"use strict";return{createCustomColumn:function(i){let n=this;return new Promise(function(i,o){let a=e.getGlobalVariable().changeActionSubTypes;t.getCombinedClassList(a).then(function(e){t.getPropertyForClassGrid(e).then(function(e){let o=t.makeCombinedColumnList(e),a=n.filterColumn(o);i(a)})})})},filterColumn:function(e){let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project"];for(let t of n)for(let i of e)i.delete(t);for(let n of e)return n.forEach((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!0,visibleFlag:!1,dataType:i,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:function(e,i){return e.nodeModel.getAttributeValue(t)}}}}}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.writetoolbarDefinition=function(){return{entries:[]}},t}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgAddMemberView",["UWA/Class/View","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","UWA/Core","DS/Handlebars/Handlebars4"],function(e,t,i,n){return e.extend({name:"chg-add-member",tagName:"div",className:"chg-add-member",setup:function(){this.template='                                                <div class="'+this.getClassNames("-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-body")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t<table class="add-member-table table">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-change-coordinator")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Change_Coordinator+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-change-coordinator-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-change-coordinator-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search change-coordinator-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-assignee")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Assignee+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-assignee-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-assignee-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search assignee-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-approver")+'" >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Approver+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-approver-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-approver-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search approver-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<tr class="'+this.getClassNames("-informed-user")+' " >\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td>'+t.CHG_Add_Member_Follower+'</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<td class="'+this.getClassNames("-informed-user-field-container")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-informed-user-field")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="fonticon fonticon-search informed-user-field-search" title="Search">\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</td>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t\t\t\t\t\t\t\t</table>\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="'+this.getClassNames("-button")+'">\t\t\t\t\t\t\t\t\t\t\t\t\t</div>                                                </div>',this.renderer=this.getTemplate(this.template)},init:function(e){e=i.clone(e||{},!1),this._parent.call(this,e)},render:function(){this.name,this.cid;this.container.empty(),containerReference=this.container;var e=UWA.createElement("div",{class:"chg-member-view",styles:{height:"10%"}}),t=this.renderer();return e.addContent(t),e.inject(containerReference),this},injectSubView:function(e,t){var i=this.container.getElement(t);e&&i&&i.grab(e.render().getContent())},getTemplate:function(e){var t=n.compile(e),i=this;return i.data={placeholder:i.options.placeholder},function(){return t(i.data)}},domEvents:{"click .change-coordinator-field-search":function(){this.dispatchEvent("searchChangeCoordinator",arguments)},"click .assignee-field-search":function(){this.dispatchEvent("searchAssignee",arguments)},"click .approver-field-search":function(){this.dispatchEvent("searchApprover",arguments)},"click .informed-user-field-search":function(){this.dispatchEvent("searchInformedUser",arguments)}}})}),define("DS/ENOChgGovernanceUX/scripts/model/facets/relatedScope/ChgRelatedScopeDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";let h=g.inherit({publishedProperties:{},isDataFiltered:function(e){let t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e){this.parentCRId=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadRelatedScopeData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.previewicon,o=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName,a=e.currentNLS||e.maturityNLS?e.currentNLS||e.maturityNLS:"";e.maturityWithBadge=e.maturityNLS||e.currentNLS;var s=this.getCustomTooltip(e);return new i({label:e.title,subLabel:o,description:a,grid:e,customTooltip:s,icons:[e.icon],thumbnail:n,useAsyncPreExpand:!0})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.maturityNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId;var s=!0;let g=document.getElementById("outer-CO-relatedScope-grid-div");"undefined"!=g&&null!=g&&p.mask(g),r.updateExistingCORelatedScope(o,e).then(async function(e){var i={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(i=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var n=await l.processedChangeRequestRelatedScope(e);if(m.prototype.addNodesInLayoutModel(t.treeDocument,n),p.unmask(g),i&&i.length>0){s=!1;var r=new Map,h=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=h<50?i.slice(e,e+h):i.slice(e,e+50);for(var C=[],f=new Map,v=n,D=0;D<v.length;D++){var b=v[D];C.push(b.id),f.set(b.id,b)}var w=[];if(C.length>0){var S=l.commonPredicatedForFedSearch(),I=await l.callFederatedSearch(C,S);if(I&&I.results&&I.results.length>0)w=await l.processReportedAgainstFederatedSearch(I,f)}m.prototype.addNodesInLayoutModel(t.treeDocument,w),r=new Map([...r,...f]),h-=50}if(r&&r.size>0){u.publish("updateIndexingIconForHideOrShowInCOReportedAgainst",{});var _=await c.recent();if(_&&_.results&&_.results.length>0){var y=l.filterNonIndexedDataNew(_,r);r.size!=y.length&&d.warn(a.CHG_GOV_Not_Accessable_Data);var E=[];y.length>0&&(E=await l.processInformationForRecentReportedAgainst(y)),m.prototype.addNodesInLayoutModel(t.treeDocument,E)}var O=e.data.length,G={contextid:o,length:E.length+O};u.publish("relatedScope:update",G)}}if(t.treeDocument.getAllDescendants()&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),s){G={contextid:o,length:e.data.length};u.publish("relatedScope:update",G)}},function(e){p.unmask(g),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.parentCRId,s=document.getElementById("outer-CO-relatedScope-grid-div");"undefined"!=s&&null!=s&&p.mask(s),r.removeExistingCORelatedScope(o,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);if(0==t.treeDocument.getAllDescendants().length){var r={contextid:o,length:t.treeDocument.getAllDescendants().length};u.publish("relatedScope:update",r)}d.success(a.CHG_GOV_relatedScope_Remove_Success),p.unmask(s)},function(e){p.unmask(s),n()})})},addNodesInLayoutModel:function(e,t){let i=m.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return m}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/flowdown/ChgCAFlowdownfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,o,a,s,r,l,d){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"flowdwon-CA-container"}))},updateFacet:function(){var e=this;a.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId")};i.getObjectTypeInformation(n.id).then(function(t){if("Change Action"==t){let t=n.id;i.getChangeActionUserAccess(t).then(function(e){e.data[0].id,e.data[0]});var o=e.elements.container;let r=d("DS/ENOChangeActionUX/scripts/Views/CANewProposedView");r&&r.addProposedWithFlowdown({target:o});let l=()=>{o.empty(),r.addProposedWithFlowdown({target:o})};s.unsubscribe(`CA_Flowdown:${widget.id}`),s.subscribe(`CA_Flowdown:${widget.id}`,function(e){l()}),a.unmask(e.elements.container)}})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersFeaturesUtil",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i){"use strict";var n={showRMBMenuOnGrid:function(e,t){return new Promise(function(o,a){var s="false",r={},l=i("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil"),d=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),c=d[0].options.grid.roles;r.currentObjType=d[0].options.grid.type;var u=0;d.length>1&&(s="true"),c.indexOf("Approver")>=0?(r.Approver="DISCONNECT",u++):r.Approver="CONNECT",c.indexOf("Coordinator")>=0?(r.Coordinator="DISCONNECT",u++):r.Coordinator="CONNECT",c.indexOf("Follower")>=0?(r.Follower="DISCONNECT",u++):r.Follower="CONNECT",c.indexOf("Assignee")>=0?(r.Assignee="DISCONNECT",u++):r.Assignee="CONNECT";var p=c.indexOf("Owner")>=0||c.indexOf("Originator")>=0;if(0==p&&1==u&&(r.showConfirmation=!0),"false"==s)var g=i("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout");var h=[],m=t.cellInfos.nodeModel.options.grid.id,C=t.cellInfos.nodeModel.options.grid.type,f=t.cellInfos.nodeModel.options.grid.name,v=t.cellInfos.nodeModel.options.grid.displayType;"Group"==C&&(C="foaf:Group",f=t.cellInfos.nodeModel.options.grid.fullName,v=t.cellInfos.nodeModel.options.grid.type);var D={objectId:m,objectType:C,displayName:f,displayType:v,facetName:"dependency"};[].push(D);var b=i("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(D),w=[];w.push(b),Promise.all(w).then(function(i){"Person"==r.currentObjType&&(1==g.setCoordinatorAccessBit&&(1!=l.isChangeCoordinatorConnected||1==l.isChangeCoordinatorConnected&&"DISCONNECT"==r.Coordinator)&&h.push(n.getChangeCoordinatorMenu(e,t,r)),1==g.ManageFollowersAccessBit&&h.push(n.getFollowerMenu(e,t,r)),1==g.ManageAssigneesAccessBit&&h.push(n.getAssigneeMenu(e,t,r))),"Group"==r.currentObjType&&(1==g.ManageFollowersAccessBit&&h.push(n.getFollowerMenu(e,t,r)),1==g.ManageAssigneesAccessBit&&h.push(n.getAssigneeMenu(e,t,r))),1==g.setCoordinatorAccessBit&&0==p&&h.push(n.getDeleteMenu(e,t,r)),i[0]&&h.push(i[0]),o(h)})})},getChangeCoordinatorMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Change_Coordinator,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){console.log("Coordinator : "+n.Coordinator),n.role="Coordinator",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Coordinator&&(o.state="selected"),o},getFollowerMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Follower,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){console.log("Follower : "+n.Follower),n.role="Follower",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Follower&&(o.state="selected"),o},getAssigneeMenu:function(e,i,n){var o={type:"CheckItem",title:t.CHG_Member_Menu_Assignee,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){console.log("Assignee : "+n.Assignee),n.role="Assignee",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.Assignee&&(o.state="selected"),o},getDeleteMenu:function(e,i,n){return{type:"PushItem",title:t.CHG_Member_Menu_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){console.log("remove "),n.role=[],"DISCONNECT"==n.Follower&&n.role.push("Follower"),"DISCONNECT"==n.Approver&&n.role.push("Approver"),"DISCONNECT"==n.Coordinator&&n.role.push("Coordinator"),"DISCONNECT"==n.Assignee&&n.role.push("Assignee"),n.showConfirmation=!0,e.updatePersonRole(i.cellInfos,n)})}}}}};return n}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){var i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.writetoolbarDefinition=function(){let i=!1;return"true"===t.getGlobalVariable().ECM_EnableAddMemberGenericComponent&&(i=!0),{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_AddMember,position:"far",category:"addRemove",action:{module:i?"DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCRAddMemberHandler":"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRAddMemberLayout",func:"launchAddMemberPanel"}}},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Remove,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout",func:"removeHandler"}}},{id:"filter",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"filter",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Filter,position:"far",category:"View",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMemberFilterLayout",func:"launchFilterMemberPanel"}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},i}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridReportViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e){let t=Object.create(null);return t.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeCRView",argument:{view:"GridView"}},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeCRView",argument:{view:"TileView"}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},t.writetoolbarDefinition=function(e){return{entries:[{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1,className:"currentView"},value:this.viewData},position:"far",category:"View"}]}},t}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete",["UWA/Core","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/UIKIT/Mask","require"],function(e,t,i,n,o,a,s){"use strict";return{deleteNodes:function(s,r,l,d,c){for(var u=n.CHG_GOV_Delete_Info_Content+"<br><br>",p=[],g=0;g<s.length;g++){var h=s[g];u+=e.String.escapeHTML(h.nodeTitle)+" ("+h.nodeName+")<br>";var m={physicalid:h.physicalid};p.push(m)}var C=function(e){if(e.report&&e.report.length>0){for(var t=[],o=0;o<e.report.length;o++){t.push(e.report[o].physicalids);var s=e.report,c=s[o].displaytype,u=s[o].name,p=s[o].error}i.error(n.CHG_GOV_Operation_Partially_Failed+"<br>"+c+" "+u+": "+p)}else if(e.data&&e.data.length>0){var g=[];for(o=0;o<e.data.length;o++)g.push(e.data[o].id);l(g,d),i.success(n.CHG_GOV_ChangeOrchestration_Toolbar_Delete_Success)}else if(e.results&&e.results.length>0){for(g=[],o=0;o<e.results.length;o++)g.push(e.results[o].physicalid);l(g,d),i.success(n.CHG_GOV_ChangeOrchestration_Toolbar_Delete_Success)}else i.warn(n.CHG_GOV_ChangeOrchestration_Toolbar_Delete_Failure);"undefined"!=r&&null!=r&&a.unmask(r)},f=[{label:n.CHG_GOV_OK_Button_Label,handler:function(){"undefined"!=r&&null!=r&&a.mask(r),"ImpactAnalysis"===c?t.deleteImpactAnalysis(s[0].parentCRId,p).then(function(e){C(e)},function(e){return a.unmask(r),Promise.reject(e)}):t.deleteObjectStructure(p).then(function(e){C(e)},function(e){return a.unmask(r),Promise.reject(e)}),o.closeDialog()},className:"primary"},{label:n.CHG_GOV_CANCEL_Button_Label,handler:function(){o.closeDialog()},className:"default"}],v={title:n.CHG_GOV_Delete_Info_Title,content:u,buttonArray:f};o.launchInfoDailog(v)}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/contributors/ChgCRContributorsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r,l,d){"use strict";let c=e.extend({init:function(e,t){this.parentCRId=e,this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},loadContributor:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t="";e.icon,e.roleList;"Person"==e.type?(t=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):"Group"==e.type||"Group Proxy"==e.type?(t=this.getUserGroupImageDiv(e,!0)).addClassName("chg-member-profile-picture"):t=e.thumbnail;let n=new i({label:e.personFullName,description:d.CHG_Add_Member_Assignee,grid:e,icons:[e.icon],thumbnail:t});return"Group"!=e.type&&"Group Proxy"!=e.type||(n.options.label=e.title),n},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.name+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=a.getAvatarDetails(e.personFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(s);let l=UWA.createElement("span",{class:"userName",html:e.personFullName});return s.inject(n),l.inject(n),n.outerHTML},getPersonImageDiv:function(e,t){null==e.name&&(e.name=e.userid);var i="/api/user/getpicture/login/"+e.name+"/format/normal";i=o.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),s="";if(o.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:i});else{var r=a.getAvatarDetails(e.personFullName);s=UWA.createElement("div",{html:r.avatarStr}),1==t?(s.addClassName("chg-member-profile-picture"),s.addClassName("chg-team-profile-text")):s.addClassName("avatarIcon"),s.style.setProperty("background",r.avatarColor)}return s.inject(n),n},getUserGroupImageDiv:function(e,t){var i=new UWA.Element("div",{}),n="";return n=UWA.createElement("img",{class:"userIcon",src:e.icon}),1==t?(n.addClassName("chg-member-profile-picture"),n.addClassName("chg-team-profile-text")):n.addClassName("avatarIcon"),n.inject(i),i},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.impactAnalysisId,a=t.parentCRId,l=document.getElementById("outer-contributor-grid-div");"undefined"!=l&&null!=l&&r.mask(l),s.updateExistingContributors(a,o,e).then(function(e){let n=[];e&&(n=e.data),c.prototype.addNodesInLayoutModel(t.treeDocument,n),i(e),r.unmask(l)},function(e){r.unmask(l),n(e)})})},addNodesInLayoutModel:function(e,t){let i=c.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate(),e.getRoots().length>0&&e._modelEvents.publish({event:"treeNotEmpty"})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.impactAnalysisId,a=t.parentCRId,c=document.getElementById("outer-contributor-grid-div");"undefined"!=c&&null!=c&&r.mask(c),s.updateExistingContributors(a,o,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);0==t.treeDocument.getRoots().length&&t.treeDocument._modelEvents.publish({event:"treeEmpty"}),l.success(d.CHG_Contributors_Toolbar_RemoveContributor_suceess),r.unmask(c)},function(e){r.unmask(c),n()})})}});return c}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCreateChangeAction",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require"],function(e,t,i,n,o,a,s){return{launchCreateChangeActionDialog:function(r){console.log("launchCreateChangeActionDialog ............................");let l=i.getUserPreference(n.keys.createKeys.CA_DEF_TYPE),d={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:l,select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){r&&(r.isClickProcessing=!1);var t=document.getElementsByClassName("moduleWrapper")[0];null==t&&"undefined"==t||a.mask(t);let o=e.result[0].identifier,l={};l.context=o,l.type="ChangeAction";let d=s("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),c=s("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil");d.launchPropertyPanelContext(l),c.displayObjectInfoInsideIDcard(o,!0);let u={};u[n.keys.createKeys.CA_DEF_TYPE]=e.result[0].type,i.saveUserPreference(u)},onFailure:function(e){r&&(r.isClickProcessing=!1),console.log("onFailure..............."+e)},onCancel:function(e){r&&(r.isClickProcessing=!1)}}};var c={commandInfo:{type:"Change Action",facet:"Start a New Activity",action:"CA>Start a New Activity>New Change Action"}};s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:c}),(new e).CreateNew(d)}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";let h=d.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),m=e.extend({init:function(e,t){this.parentCRId=e,this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"crImpactBasis",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",h)},loadImpactBasisData:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName;var a=e.maturityNLS||e.currentNLS?e.maturityNLS||e.currentNLS:"";e.maturityWithBadge=e.maturityNLS||e.currentNLS?e.maturityNLS||e.currentNLS:"";var s,r=this.getCustomTooltip(e);return s=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:s,subLabel:n,description:a,grid:e,icons:[e.icon],thumbnail:e.previewicon,contextualMenu:["dummy placeholder"],useAsyncPreExpand:!0,customTooltip:r})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.currentNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.impactAnalysisId,s=t.parentCRId;let d=document.getElementById("outer-impactBasis-grid-div");"undefined"!=d&&null!=d&&g.mask(d),r.updateExistingImpactBasis(s,o,e).then(async function(e){var n=void 0,o={},s={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(o=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(s=e.data[0].mapping),e.data.splice(0,1));var r=await u.processIAAnalysisBasis(e);if(t.treeDocument.getAllDescendants()&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),m.prototype.addNodesInLayoutModel(t.treeDocument,r),g.unmask(d),s.length>0&&(n=await m.prototype.i3dxInformationFilteringAndCalling(o,s,t.treeDocument)),o&&o.length>0){var h=new Map,C=o.length;for(let i=0;i<o.length;i+=50){let n=[];n=C<50?o.slice(i,i+C):o.slice(i,i+50);for(var f=[],v=new Map,D=n,b=0;b<D.length;b++){var w=D[b];f.push(w.id),v.set(w.id,w)}var S=[];if(f.length>0){var I=u.commonPredicatedForFedSearch(),_=await u.callFederatedSearch(f,I);_&&_.results&&_.results.length>0&&(S=await u.processIAAnalysisBasisFederatedSearch(_,v))}m.prototype.addNodesInLayoutModel(t.treeDocument,S),h=new Map([...h,...v]),C-=50,e.data=[...e.data,...S]}if(h&&h.size>0){p.publish("updateIndexingIconForHideOrShowInImpactBasis",{});var y=await c.recent();if(y&&y.results&&y.results.length>0){var E=u.filterNonIndexedDataNew(y,h);h.size!=E.length&&l.warn(a.CHG_GOV_Not_Accessable_Data);var O=await u.processInformationForRecentIAImpactBasis(E);let i=[];O&&(i=O);let n=[];for(let e of i)e.reasonForChange="",n.push(e);t.treeDocument.getAllDescendants()&&0==t.treeDocument.getAllDescendants().length&&t.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),t.addNodesInLayoutModel(t.treeDocument,n),e.data=[...e.data,...n]}}}n&&n.length>0&&(e.data=[...e.data,...n]),i(e),g.unmask(d)},function(e){g.unmask(d),n(e)})})},removeExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.impactAnalysisId,s=t.parentCRId,d=document.getElementById("outer-impactBasis-grid-div");"undefined"!=d&&null!=d&&g.mask(d),r.updateExistingImpactBasis(s,o,e).then(function(e){let n=t.treeDocument.getSelectedNodes();i(n);for(let e=0;e<n.length;e++)t.treeDocument.removeRoot(n[e]);l.success(a.CHG_GOV_ImpactBasis_Remove_Success),g.unmask(d)},function(e){g.unmask(d),n()})})},addNodesInLayoutModel:function(e,t){let i=m.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},i3dxInformationFilteringAndCalling:async function(e,t,i){var n=i;let a=t.length;var s=o.getGlobalVariable().tenant,r=[],l=o.getGlobalVariable().tenantMappings.find(e=>e.platformId===s);for(let i=0;i<a;i++){let o=t[i],a=o.uris,s=a.length,C=o.ServiceInfo,f=o.RelativePath,v=l[C];if(null==v||null==f)continue;let D=v+f;for(let t=0;t<a.length;t+=50){var d=[],p=new Map;let i=[];i=s<50?a.slice(t,t+s):a.slice(t,t+50);for(let t=0;t<i.length;t++){const n=i[t],o=e.findIndex(e=>e.id===n);if(-1!==o){const t=e.splice(o,1)[0];d.push(t),p.set(t.id,t)}}try{var g=await c.fetchbyService({ids:i,url:D});console.log("Result of is "+g);var h=await u.processIAAnalysisBasisWithi3dxItems(g,p);console.log("Node information with NLS value"+h),await m.prototype.addNodesInLayoutModel(n,h),r=r.concat(h)}catch(e){console.log(e)}console.log("The sliced array is "+i),s-=50}console.log("The modeler information is "+d),console.log("The modeler information is "+p)}return r},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return m}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgCreateInvestigationRequest",["DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","require"],function(e,t,i,n,o,a,s){return{launchCreateInvestigationRequestDialog:function(r){console.log("launchCreateInvestigationRequestDialog ............................");let l={context:{service:"3DSpace",tenant:t.getGlobalVariable().tenant,header:{SecurityContext:t.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_GOV_Welcome_Activity_New_Investigation_Request,type:"Investigation Request",silentMode:!1,overlay:!0,options:{typeName:"Investigation Request",preferedType:"Investigation Request",select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){r&&(r.isClickProcessing=!1);var t=document.getElementsByClassName("moduleWrapper")[0];null==t&&"undefined"==t||a.mask(t);let o=e.result[0].identifier,l={};l.context=o,l.type="InvestigationRequest";let d=s("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),c=s("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil");d.launchPropertyPanelContext(l),c.displayObjectInfoInsideIDcard(o,!0);let u={};u[n.keys.createKeys.IR_DEF_TYPE]=e.result[0].type,i.saveUserPreference(u)},onFailure:function(e){console.log("onFailure..............."+e),r&&(r.isClickProcessing=!1)},onCancel:function(e){r&&(r.isClickProcessing=!1)}}};var d={commandInfo:{type:"Investigation Request",facet:"Start a New Activity",action:"CR>Start a New Activity>New Investigation Request"}};s("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:d}),(new e).CreateNew(l)}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t){let i=Object.create(null);return i.toolbar=null,i.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},i.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveCR,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"filterView",argument:{filter:"activeCR"}},tooltip:e.CHG_Filter_ActiveCR_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveCR,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"filterView",argument:{filter:"inactiveCR"}},tooltip:e.CHG_Filter_InactiveCR_Def}]},i.writetoolbarDefination=function(t){return{entries:[{id:"duplicateCR",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",fontIconFamily:WUXManagedFontIcons.Font3DS},position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",func:"duplicateChangeRequest"},tooltip:e.CHG_GOV_Change_Request_Duplicate,disabled:!0}},{id:"cr_summary_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}},{id:"filter",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",className:"menuCA",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]}},i}),define("DS/ENOChgGovernanceUX/scripts/view/facets/decision/ChgDecisionfacet",["UWA/Core","DS/ENOChgGovernanceUX/scripts/components/decisionView/ChgDecisionView","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r){"use strict";return i.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"DecisionContainer",class:"decisions-facet-container chg-decisions-facet-container"}))},updateFacet:function(){a.mask(this.elements.container);var e=this.getModel();if(!e||""==e.get("objectId"))return a.unmask(this.elements.container),!1;this.elements.container.setContent("");var i={id:e.get("objectId"),target:this.elements.container};t.createDecisionView(i)},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",["UWA/Core","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOXVersionExplorerController/VersionExplorerController","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/LifecycleServices/LifecycleServicesSettings","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/ModalContainer","require","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/Utilities/Utils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";let D=Object.create(null);return D.getColumnDefinition=function(t){if(t&&t.dataIndex){var o=this;switch(t.dataIndex){case"titleTree":return{dataIndex:"tree",ds6wIndexMapping:"ds6w:label",text:n.CHG_GOV_DataGrid_Column_Title,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!e.is(t.alwaysVisibleFlag)||t.alwaysVisibleFlag,pinned:"left",width:e.is(t.width)?t.width:200,filterId:"stringRegexp",filterModel:""};case"title":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:label",text:n.CHG_GOV_DataGrid_Column_Title,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!e.is(t.alwaysVisibleFlag)||t.alwaysVisibleFlag,width:e.is(t.width)?t.width:200,typeRepresentation:"url",filterId:"stringRegexp",filterModel:"",getCellValue:function(e){if(e.nodeModel)return{icon:e.nodeModel.getAttributeValue("icon"),label:e.nodeModel.getAttributeValue("title")}}};case"name":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:identifier",text:n.CHG_GOV_DataGrid_Column_Name,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!!e.is(t.allowUnsafeHTMLContent)&&t.allowUnsafeHTMLContent,width:e.is(t.width)?t.width:150,filterId:"stringRegexp",filterModel:""};case"chgObjName":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:identifier",text:n.CHG_GOV_DataGrid_Column_Name,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!e.is(t.allowUnsafeHTMLContent)||t.allowUnsafeHTMLContent,width:e.is(t.width)?t.width:150,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}};case"co_name":return{dataIndex:t.dataIndex,text:n.CHG_GOV_DataGrid_Column_Name,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!e.is(t.allowUnsafeHTMLContent)||t.allowUnsafeHTMLContent,width:e.is(t.width)?t.width:150,filterId:"stringRegexp",filterModel:"",getCellGroupingKey:function(e){return e.nodeModel.options.grid.name}};case"typeNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:type",text:n.CHG_GOV_DataGrid_Column_Type,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"set",filterModel:[]};case"revision":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:revision",text:n.CHG_GOV_DataGrid_Column_Revision,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,width:65,filterId:"set",filterModel:[]};case"maturityNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:status",text:n.CHG_GOV_DataGrid_Column_Maturity,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[]};case"maturityWithBadge":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:status",text:n.CHG_GOV_DataGrid_Column_Maturity,typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel){var t,i=e.nodeModel.options.grid.maturity||e.nodeModel.options.grid.current;if(i){if(!1===i.contains("."))i=e.nodeModel.getReferenceValue("policy")+"."+i;t=o.getAndCreateMaturityClass(i,"wux-controls-label")}return t}}};case"currentNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:status",text:n.CHG_GOV_DataGrid_Column_Maturity,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[]};case"collabspaceNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:project",text:n.CHG_GOV_DataGrid_Column_CollabSpace,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"set",filterModel:[]};case"organizationNLS":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:organizationResponsible",text:n.CHG_GOV_DataGrid_Column_Organization,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,sortableFlag:!e.is(t.sortableFlag)||t.sortableFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"set",filterModel:[]};case"reasonForChange":return{dataIndex:t.dataIndex,text:n.Chg_GOV_Reason_For_Change,editableFlag:!e.is(t.editableFlag)||t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,typeRepresentation:"editor",editionPolicy:"EditionOnOver",massUpdateAllowedFlag:!e.is(t.massUpdateAllowedFlag)||t.massUpdateAllowedFlag,filterId:"stringRegexp",filterModel:""};case"applicabilityNLS":return{dataIndex:t.dataIndex,text:n.CHG_GOV_DataGrid_Column_Applicability,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterId:"stringRegexp",filterModel:""};case"modificationDate":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:modified",text:n.CHG_GOV_DataGrid_Column_ModificationDate,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterModel:""};case"creationDate":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:created",text:n.CHG_GOV_DataGrid_Column_CreationDate,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,filterModel:""};case"ApprovalStatus":return{dataIndex:t.dataIndex,text:s.getName(),typeRepresentation:"user",editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,compareFunction:function(e,t){return s.compareApprovalStatus(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("ApprovalStatus"))return{icon:e.nodeModel.getAttributeValue("ApprovalStatus").icon,label:e.nodeModel.getAttributeValue("ApprovalStatus").label,func:e.nodeModel.getAttributeValue("ApprovalStatus").func}}};case"approvalStatusModel":return{dataIndex:t.dataIndex,text:"Approval Status Model",typeRepresentation:"user",editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag};case"severityNLS":return{dataIndex:t.dataIndex,text:n.CHG_GOV_DataGrid_Column_Severity,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,typeRepresentation:"url",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){var t=e.nodeModel.getAttributeValue("severity");let i,n;return"Low"==t?(i="level-low",n="success"):"Medium"==t?(i="level-medium",n="warning"):"High"==t&&(i="level-high",n="error"),{icon:i,label:e.nodeModel.getAttributeValue("severityNLS"),emphasize:n}}},getCellClassName:function(e){return e&&e.nodeModel?"change-sev":null},compareFunction:function(e,t,i,n,o){return"undefined"!=i.options.grid.severityGrade&&"undefined"!=n.options.grid.severityGrade?i.options.grid.severityGrade==n.options.grid.severityGrade?0:i.options.grid.severityGrade<n.options.grid.severityGrade?-1:1:0},getCellGroupingKey:function(e){return e.nodeModel.options.grid.severityNLS}};case"ownerFullName":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:responsible",text:n.CHG_GOV_DataGrid_Column_Owner,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!e.is(t.visibleFlag)||t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){if(i.getGlobalVariable().isSwymInstalled){var t="/api/user/getpicture/login/"+e.nodeModel.getAttributeValue("owner")+"/format/normal";return{icon:t=i.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.getAttributeValue("ownerFullName")}}return{label:e.nodeModel.getAttributeValue("ownerFullName")}}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}};case"changeCoordinatorFullName":return{dataIndex:t.dataIndex,ds6wIndexMapping:"ds6w:changeCoordinator",text:n.CHG_GOV_DataGrid_Column_ChangeCoordinator,editableFlag:!!e.is(t.editableFlag)&&t.editableFlag,visibleFlag:!!e.is(t.visibleFlag)&&t.visibleFlag,alwaysVisibleFlag:!!e.is(t.alwaysVisibleFlag)&&t.alwaysVisibleFlag,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){if(i.getGlobalVariable().isSwymInstalled){var t="/api/user/getpicture/login/"+e.nodeModel.getAttributeValue("changeCoordinator")+"/format/normal";return{icon:t=i.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.getAttributeValue("changeCoordinatorFullName")}}return{label:e.nodeModel.getAttributeValue("changeCoordinatorFullName")}}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.changeCoordinatorFullName}}}}},D.onCustomViewsSave=function(e,i,n){let o={currentCustomViewIdentifier:i,customViews:n.dgvHandle.getCustomViewsManager().getCustomViews()};f.saveUserPreference({[n.dgvHandle.identifier]:JSON.stringify(o)}),t.applyCustomAttributes(e,i,n)},D.registerCustomEventsOnDGV=function(i,n,o){if(Array.isArray(i)&&n){let a=n;for(let s=0;s<i.length;s++)n.addEventListener(i[s],v.debounce(function(n){let r=a.identifier,l=a.getCustomViewsManager().getCurrentCustomViewIdentifier();l=l||"Default View";let d=!1,c={columnWidthChange:void 0,columnVisibleStateChange:void 0};switch(i[s]){case"sortModelChange":a.getCustomViewsManager().getCustomView(l).sortModel=n.dsModel.sortModel,d=!0;break;case"columnOrderChange":break;case"columnWidthChange":e.is(n.options.columnID)?(c.columnWidthChange=n.options.columnID,t.processCustomViews(a.getCustomViewsManager().getCustomViews(),l,o,c),d=!0):e.is(n.options.columnIDs)&&(t.processSizeAllColumnsToFitCustomData(a.getCustomViewsManager().getCustomViews(),l,o,n.options.columnIDs),d=!0);break;case"columnVisibleStateChange":e.is(n.options.columnID)&&(c.columnVisibleStateChange=n.options.columnID,t.processCustomViews(a.getCustomViewsManager().getCustomViews(),l,o,c),d=!0);break;default:console.log(i[s])}if(!0===d){let e={currentCustomViewIdentifier:l,customViews:a.getCustomViewsManager().getCustomViews()};f.saveUserPreference({[r]:JSON.stringify(e)})}}))}},D.showLoader=function(e,t){c.createModal(e,t.elements.container),t.on(n.CHG_GOV_Loader)},D.hideLoader=function(e,t){t.off(),c.removeModal(e)},D.launchCustomColumnManager=function(e){if(e.custom_view_options.dgvHandle._properties.identifier.value){let t=u("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var i={};if("CARealizedChangesDGV_TRACKED"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Action",facet:"Realized Changes TRACKED",action:"CA>Realized Changes>Configure Table View"};else if("CARealizedChangesDGV_MOVED"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Action",facet:"Realized Changes MOVED",action:"CA>Realized Changes>Configure Table View"};else if("CARealizedChangesDGV_IGNORED"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Action",facet:"Realized Changes IGNORED",action:"CA>Realized Changes>Configure Table View"};else if("CAProposedChangesDGV"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Action",facet:"Proposed Changes",action:"CA>Proposed Changes>Configure Table View"};else if("chgCASummaryGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Action",facet:"My Change Actions",action:"CA>My Change Actions>Configure Table View"};else if("chgCOSummaryGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Order",facet:"My Change Orders",action:"CO>My Change Orders>Configure Table View"};else if("chgCRSummaryGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Request",facet:"My Change Requests",action:"CR>My Change Requests>Configure Table View"};else if("chgCRImpactAnalysisGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Request",facet:"Impact Analysis",action:"CR>Impact Analysis>Configure Table View"};else if("chgOrchestrationGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Configure Table View"};else if("chgCROrchestrationGrid"===e.custom_view_options.dgvHandle._properties.identifier.value)i.commandInfo={type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Configure Table View"};else if("ChangeImpactsDGV"===e.custom_view_options.dgvHandle._properties.identifier.value){let t=e.custom_view_options.dataForAnalysis.changeType,n=e.custom_view_options.dataForAnalysis.facet,o=e.custom_view_options.dataForAnalysis.action;i.commandInfo={type:t,facet:n,action:o+">Configure Table View"}}else"chgCRAffectedItemsGrid"===e.custom_view_options.dgvHandle._properties.identifier.value?i.commandInfo={type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Configure Table View"}:"chgCRImpactBasisGrid"===e.custom_view_options.dgvHandle._properties.identifier.value?i.commandInfo={type:"Change Request",facet:"Analysis Basis",action:"CR>IA>Analysis Basis>Configure Table View"}:"chgCRImpactedItemGrid"===e.custom_view_options.dgvHandle._properties.identifier.value&&(i.commandInfo={type:"Change Request",facet:"Impacts",action:"CR>IA>Impacts>Configure Table View"});t.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i})}t.launchCustomViewManager(e.custom_view_options)},D.launchVersionExplorer=function(t){var o=e.createElement("div",{styles:{height:"100%"}}),s=new a({versionGraphContainer:o}),c=[{"3DSpace":i.getGlobalVariable().baseURL,platformId:i.getGlobalVariable().tenant}];r.setOption("platform_services",c),s.setSingleSelectionMode(),s.setCheckVersionExternalFunction("ENOXVersionExplorerOpenVersion",function(e){return!1}),s.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:t.id,securityContext:i.getGlobalVariable().getSecurityContext(),tenantId:i.getGlobalVariable().tenant,type:t.type,context:null,onComplete:function(){}});var u=new l({identifier:"WebUX_IMF_ECM_VERSION_EXP"});new d({immersiveFrame:u,title:(t.title_prefix?t.title_prefix:n.CHG_GOV_VE_Revisions)+" : "+t.name,content:o,height:360,width:620,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_VERSION_EXP"});u.inject(widget.body)},D.getRelationalExplorerMenu=function(e){var t=e.selectedNodeIDs;return{type:"PushItem",title:n.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil"],function(e){e.createProbesData("Relations")}),i.getGlobalVariable().isNative?o.DispatchEventToWin("onRelations",t):require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){e.openRelationalExplorer(t)})}}}},D.getMaturityMenu=function(e,t,i){var o=this;return{type:"PushItem",title:n.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(n){o.executeMaturity(e,t,i)}}}},D.executeMaturity=function(e,t,n){require(["DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil"],function(e){e.createProbesData("Maturity")});var o={securityContext:{SecurityContext:i.getGlobalVariable().getSecurityContext(),tenant:i.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},a=[];if(e)for(var s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),r=0;r<s.length;r++)"ia_Total"!=s[r].options.grid.id&&(null==s[r].options.grid.serviceBasedObjId?a.push({physicalid:s[r].options.grid["@id"]||s[r].options.grid.id}):a.push({physicalid:s[r].options.grid.serviceBasedObjId}));else t&&(Array.isArray(t)?t.forEach(e=>{a.push({physicalid:e})}):""!=t&&a.push({physicalid:t}));new p({context:o,ID:"MaturityHdr"}).executeAsync(a).then(function(){n&&n()})},D.executeMaturityForDisposition=function(e,t,n){require(["DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil"],function(e){e.createProbesData("Maturity")});var o={securityContext:{SecurityContext:i.getGlobalVariable().getSecurityContext(),tenant:i.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},a=[];a.push({physicalid:e.cellInfos.nodeModel.options.grid.dispositionInformation[0].dispostionId}),new p({context:o,ID:"MaturityHdr"}).executeAsync(a).then(function(){n&&n()})},D.getHandleForMaturityUpdate=function(e,t){var i={};if(t&&t.length){for(const t of e.Refresh.modified)t.maturity=t.policy+"."+t.state,i["ds6w:status"]=[t.maturity];e&&e.Refresh&&Array.isArray(e.Refresh.modified)&&g.getNLSValuesPromise(i).then(function(i){if(i)for(const a of e.Refresh.modified)for(const e of t)if(a.physicalid===e.options.grid.serviceBasedObjId||a.physicalid===e.options.grid.id){var n={title:e.options.grid.title,name:e.options.grid.name,severityNLS:e.options.grid.severityNLS,ownerFullName:e.options.grid.ownerFullName,maturityNLS:i["ds6w:status"][a.maturity],currentNLS:i["ds6w:status"][a.maturity]},o=D.getCustomTooltip(n);e.updateOptions({description:i["ds6w:status"][a.maturity],grid:{maturity:a.state,maturityNLS:i["ds6w:status"][a.maturity],maturityWithBadge:i["ds6w:status"][a.maturity],current:a.state,currentNLS:i["ds6w:status"][a.maturity]},customTooltip:o})}})}},D.getHandleForDispostionMaturity=function(e,t){var i={};if(t&&t.length){for(const t of e.Refresh.modified)t.maturity=t.policy+"."+t.state,i["ds6w:status"]=[t.maturity];e&&e.Refresh&&Array.isArray(e.Refresh.modified)&&g.getNLSValuesPromise(i).then(function(i){if(i)for(const a of e.Refresh.modified)for(const e of t)if(a.physicalid===e.options.grid.dispositionInformation[0].dispostionId){var n={title:e.options.grid.dispositionInformation[0].dispositionName,name:e.options.grid.dispositionInformation[0].dispositionName,severityNLS:"Low",ownerFullName:e.options.grid.ownerFullName,maturityNLS:e.options.grid.dispositionInformation[0].dispositionCurrentState,currentNLS:i["ds6w:status"][a.maturity]},o=D.getCustomTooltip(n);e.updateOptions({description:i["ds6w:status"][a.maturity],grid:{dispositionMaturity:a.state},customTooltip:o}),e.options.grid.dispositionInformation[0].dispositionCurrentState=a.state}})}},D.getCustomTooltip=function(e){return void 0!==e.currentNLS?n.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+n.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+n.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+n.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+n.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:n.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+n.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+n.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+n.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+n.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},D.cleanStatusForCSS=function(e){return e.replace(/(\.| )/g,"-")},D.createCSSClass=function(e,t,i){if(null===document.getElementById(e)){var n=document.createElement("style");n.type="text/css",n.id=e;let o=i||"."+e;n.innerHTML=o+t,document.getElementsByTagName("head")[0].appendChild(n)}},D.getAndCreateMaturityClass=function(e,t,i){return"lc-status-"+this.cleanStatusForCSS(e)+(t?"-withClass":"")},D.addCSSMaturityClasses=function(e,t,i){var n={};if(void 0===e)return;let o=i.policies;for(let e=0;o&&e<o.length;e++){n[o[e].policyName]=o[e].states}for(let i=0;i<e.length;i++){let o=e[i];if(n[o]){let e=n[o];for(let i=0;i<e.length;i++){let n=e[i].activeColor,a="{color:"+("#FFFFFF"===n?"#000000":"#FFFFFF")+" ; background-color:"+n+"; cursor:pointer;}",s=this.cleanStatusForCSS(e[i].stateSysName),r="lc-status-"+this.cleanStatusForCSS(o)+"-"+s+(t?"-withClass":""),l="."+r+(t?" ."+t:"");this.createCSSClass(r,a,l)}}}},D.download=function(e){var t=[];h.getDocuments(e).then(function(i){i.forEach(function(e){"TRUE"===e.dataelements.isDocumentType&&t.push(e.id)}),t.length<e.length&&m.warn(n.CHG_GOV_Download_Skipped),h.download(t)})},D.fetchMaturityStateCSS=async function(e){var t=e.map(e=>e.policy).filter(function(e,t,i){return t==i.indexOf(e)});let i=await C.getStatesAttributes(t);D.addCSSMaturityClasses(t,"wux-controls-label",i)},D}),define("DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate",["DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i){"use strict";return{handlePropertiesOnUpdate:function(n,o){var a=n.getAllDescendants();if(a)for(var s=o.objectId,r=0;r<a.length;r++){if(a[r].options.grid.id==s){if(o&&o["PLMEntity.V_Name"]?a[r].options.grid.title=o["PLMEntity.V_Name"].value:o&&o.Synopsis?a[r].options.grid.title=o.Synopsis.value:o&&!o.Title?a[r].options.grid.title=o.label:o&&o.Title&&(a[r].options.grid.title=o.Title.value),o&&o.owner&&(a[r].options.grid.owner=o.owner.valueDB,a[r].options.grid.ownerFullName=o.owner.value.split("\n")[0]),o&&o.Severity&&(a[r].options.grid.severity=o.Severity.value,a[r].options.grid.severityNLS=o.Severity.valueDB),t.getGlobalVariable().is3DSpace)var l='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+s+"\"'>"+a[r].options.grid.title+"</a>";else l=a[r].options.grid.title;var d=o.name?o.name.value:"";a[r].options.grid.description=o.description?o.description.value:"";var c=a[r].options.grid.ecm_change_on_hold,u=d+" | "+a[r].options.grid.ownerFullName,p={};p.name=d,p.title=a[r].options.grid.title,p.ecm_change_on_hold=c,p.severity=a[r].options.grid.severity,p.severityNLS=a[r].options.grid.severityNLS,p.owner=a[r].options.grid.owner,p.ownerFullName=a[r].options.grid.ownerFullName,p.maturityNLS=a[r].options.grid.maturityNLS,a[r].options.grid.sev=e.createCustomSeverity(p),a[r].options.grid.estimatedStartDate=o["Estimated Start Date"].value?o["Estimated Start Date"].value:i.CHG_NOT_VALID_VALUE,a[r].options.grid.estimatedEndDate=o["Estimated Completion Date"].value?o["Estimated Completion Date"].value:i.CHG_NOT_VALID_VALUE,a[r].options.grid["ds6w:plannedStartParametric"]=o["Estimated Start Date"].value,a[r].options.grid["ds6w:dueDateParametric"]=o["Estimated Completion Date"].value;var g=e.createCustomOwnerField(p);o.type&&(a[r].options.grid.co_Owner=g);var h=e.getStatusBarIcons(p),m=e.statusbarIconsTooltips(p),C=e.getCustomTooltip(p);a[r].updateOptions({label:l,grid:a[r].options.grid,customTooltip:C,statusbarIcons:h,statusbarIconsTooltips:m,subLabel:u})}}}}}),define("DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",["UWA/Core","DS/Tweakers/TweakerBase","DS/Utilities/Dom","DS/Utilities/Utils","DS/Core/PointerEvents","DS/Utilities/KeyboardUtils","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovExpandInputTextBox"],function(e,t,i,n,o,a,s){"use strict";var r=t.inherit({name:"TweakerExpandInput",publishedProperties:{displayStyle:{defaultValue:"TextBox",type:"string"},value:{defaultValue:"",type:"string",advancedSetter:!0},valueType:{defaultValue:"string",type:"string"}},computeTweakerContentLength:function(){return this._getCurrentTouchMode()?19:14},_upgradeValue:function(e){return"1"===e||1===e||"true"===e||!0===e||"0"!==e&&0!==e&&"false"!==e&&!1!==e&&"undefined"}}),l=function(e,i){t.prototype.baseViewModule.call(this,e,i)};n.applyMixin(l,t.prototype.baseViewModule);var d=function(e,t){l.call(this,e,t)};return n.applyMixin(d,l),d.prototype.buildView=function(){var e=this._options.viewOptions||{};e.escapeHTML=this._tweaker.escapeHTML,e.touchMode=this._tweaker._getCurrentTouchMode(),e.disabled=this._tweaker.readOnly,e.selectAllOnFocus=!0,e.fireOnlyFromUIInteractionFlag=!0,e.autoCommitFlag=!0;var t=new s(e);this._view=t,this.setValue(this._tweaker.value)},d.prototype.handleEvents=function(){var e=this,t=this._tweaker,n=this._view;n.addEventListener("buttonclick",function(e){if(e.stopPropagation(),document.getElementsByClassName("toolbar-co-div")[0].getBoundingClientRect().width>500)n.createCAContainer.hasClassName("showBox")?(n.createCAContainer.removeClassName("openBox"),n.createCAContainer.removeClassName("showBox"),n.plusBtn.getContent().removeClassName("icon-blue")):(n.createCAContainer.addClassName("showBox"),setTimeout(function(){n.createCAContainer.addClassName("openBox")},20),n.lineEditor._myInput.focus(),n.plusBtn.getContent().addClassName("icon-blue"));else{n.plusBtn.getContent().removeClassName("icon-blue"),n.createCAContainer.style.display="none";var i={};i.top=t.getContent().getBoundingClientRect().bottom,i.left=t.getContent().getBoundingClientRect().right,i.zIndex=40003,document.body.addContent(n.getModalInputBox(i)),n.lineEditor._myInput.focus()}}),n&&t&&(i.addEventOnElement(t,n,"focus",function(e){e.stopPropagation()}),i.addEventOnElement(t,n,"blur",function(e){e.stopPropagation(),t.onPostEdit()}),i.addEventOnElement(t,n,"uncommittedChange",function(e){e.stopPropagation(),t.onPreEdit()}),i.addEventOnElement(t,n.dropdown,"click",function(e){e.stopPropagation(),n.createCAContainer.style.setProperty("display","none"),n.plusBtn.getContent().removeClassName("icon-blue"),n.createCAContainer.removeClassName("showBox")}),i.addEventOnElement(t,n.lineEditor,"keydown",function(e){e.stopPropagation(),e.keyCode===a.ESCAPE&&t.onCancelEdit(),e.keyCode===a.ENTER&&(n.value=n.lineEditor.value,t.keyDownEventCallback&&t.keyDownEventCallback(e,t,n.lineEditor),n.removeModalInputBox())}),i.addEventOnElement(t,n,"change",function(i){i.stopPropagation();var o=n.value,a=void 0;a=null==o?o:function(e,t){switch(e){case"integer":var i=parseInt(t,10);return isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"number":return i=parseFloat(t),isNaN(i)&&(this.valueType="string",i=t?t.toString():""),i;case"boolean":return null!==/true/i.exec(t)||"1"===t;case"string":return t?t.toString():"";case"object":return JSON.parse(t);default:return t}}(t.valueType,o),e.setTweakerValue(a)}))},d.prototype.setValue=function(e){var t,i,n=this._tweaker,o=this._view;o&&n&&(o.value=null==e?e:(t=n.valueType,"string"==typeof(i=e)?i:"object"===t?JSON.stringify(i):"integer"!==t&&"number"!==t||!(Number.isNan&&!0===Number.isNaN(i)||void 0!==isNaN&&!0===isNaN(i))?"integer"===t||"number"===t?i.toString():i:"NaN"))},r.prototype.baseViewModule=l,r.prototype.VIEW_MODULES={TextBox:{classObject:d},readOnly:{classObject:d}},r.prototype.registerViewModule=function(e,t){},r.prototype.registerkeyDownCallback=function(e){this.keyDownEventCallback=e},r}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridViewToolbar"],function(e,t){"use strict";var i=Object.create(null);return i.getColumns=function(){return[{text:e.CHG_Member_DataGrid_Column_Name,dataIndex:"person_name",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.fullName}},{text:e.CHG_Member_DataGrid_Column_Role,dataIndex:"roleList"}]},i.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-member-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".membertileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-member-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".membertileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},i.makeUpdateMemberJson=function(e,t,i,n){var o={data:[]};if(""!=t.person)if("string"!=typeof t.person)for(var a=0;a<t.person.length;a++){let i={updateAction:e,role:"contributor",user:t.person[a],list:""};o.data.push(i)}else o.data.push({updateAction:e,role:"contributor",user:t.person,list:""});if(""!=t.userGroup)if("string"!=typeof t.userGroup)for(a=0;a<t.userGroup.length;a++){let i={updateAction:e,role:"contributor",user:"",list:t.userGroup[a]};o.data.push(i)}else o.data.push({updateAction:e,role:"contributor",user:"",list:t.userGroup});if(""!=i.person)if("string"!=typeof i.person)for(a=0;a<i.person.length;a++){let t={updateAction:e,role:"approver",user:i.person[a],list:""};o.data.push(t)}else o.data.push({updateAction:e,role:"approver",user:i.person,list:""});if(""!=i.routeTemplate&&o.data.push({updateAction:e,role:"approver",user:"",list:i.routeTemplate}),""!=n.person)if("string"!=typeof n.person)for(a=0;a<n.person.length;a++){var s={updateAction:e,role:"follower",user:n.person[a],list:""};o.data.push(s)}else o.data.push({updateAction:e,role:"follower",user:n.person,list:""});if(""!=n.userGroup)if("string"!=typeof n.userGroup)for(a=0;a<n.userGroup.length;a++){var r={updateAction:e,role:"follower",user:"",list:n.userGroup[a]};o.data.push(r)}else o.data.push({updateAction:e,role:"follower",user:"",list:n.userGroup});return o},i.getRoleNLSValue=function(t){let i="";switch(t){case"owner":i=e.CHG_Member_Role_Owner;break;case"originator":i=e.CHG_Member_Role_Originator;break;case"coordinator":i=e.CHG_Member_Role_ChangeCoordinator;break;case"contributor":i=e.CHG_Member_Role_Assignee;break;case"approver":i=e.CHG_Member_Role_Approver;break;case"follower":i=e.CHG_Member_Role_Follower;break;default:console.log("NLS is not defined for : "+t)}return i},i}),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n){"use strict";var o=Object.create(null);return o.getColumns=function(){var t=[{text:e.CHG_GOV_Members_DataGrid_column_Title,dataIndex:"tree",editableFlag:!1,alwaysVisibleFlag:!0,allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.fullName}},{text:e.CHG_GOV_Members_DataGrid_column_Name,dataIndex:"username",editableFlag:!1}];return t.push({dataIndex:"ContextualMenuColumn"}),t},o.makeUpdateMemberJson=function(e,t,i,n,o,a){var s={data:[]};function r(t,i,n){var o={updateAction:e,role:t,user:i,list:n};s.data.push(o)}switch(a){case"Change Action":case"ChangeAction":""!==t.person&&("string"!=typeof t.person?t.person.forEach(e=>r("contributor",e,"")):r("contributor",t.person,"")),""!==t.group&&("string"!=typeof t.group?t.group.forEach(e=>r("contributor","",e)):r("contributor","",t.group)),""!==i.person&&("string"!=typeof i.person?i.person.forEach(e=>r("approver",e,"")):r("approver",i.person,"")),""!=i.routetemplate&&r("approver","",i.routetemplate),""!==n.person&&("string"!=typeof n.person?n.person.forEach(e=>r("follower",e,"")):r("follower",n.person,"")),""!==n.group&&("string"!=typeof n.group?n.group.forEach(e=>r("follower","",e)):r("follower","",n.group));break;case"Change Request":case"ChangeRequest":case"InvestigationRequest":""!=o.person&&r("Coordinator",o.person,""),""!=i&&""!=i.person&&("string"!=typeof i.person?i.person.forEach(e=>r("approver",e,"")):r("approver",i.person,"")),""!=i&&""!=i.routetemplate&&r("Approver","",i.routeTemplate),""!==n.person&&("string"!=typeof n.person?n.person.forEach(e=>r("follower",e,"")):r("follower",n.person,"")),""!==n.group&&("string"!=typeof n.group?n.group.forEach(e=>r("follower","",e)):r("follower","",n.group)),""!==t.person&&("string"!=typeof t.person?t.person.forEach(e=>r("contributor",e,"")):r("contributor",t.person,"")),""!==t.group&&("string"!=typeof t.group?t.group.forEach(e=>r("contributor","",e)):r("contributor","",t.group));break;case"Change Order":case"ChangeOrder":""!==o&&r("Coordinator",o,""),""!==i&&r("Approver","",i),""!==n.person&&("string"!=typeof n.person?n.person.forEach(e=>r("Follower",e,"")):r("Follower",n.person,"")),""!==n.group&&("string"!=typeof n.group?n.group.forEach(e=>r("Follower","",e)):r("Follower","",n.group)),""!==t.person&&("string"!=typeof t.person?t.person.forEach(e=>r("Assignee",e,"")):r("Assignee",t.person,"")),""!==t.group&&("string"!=typeof t.group?t.group.forEach(e=>r("Assignee","",e)):r("Assignee","",t.group));break;default:console.error("Unsupported object type:",a)}return s},o.getRoleNLSValue=function(t){let i="";switch(t){case"Owner":case"owner":i=e.CHG_GOV_Members_DataGrid_Owner;break;case"originator":i=e.CHG_GOV_Members_DataGrid_Originator;break;case"Coordinator":case"coordinator":i=e.CHG_GOV_Members_DataGrid_ChangeCoordinators;break;case"contributor":case"Assignees":case"Assignee":i=e.CHG_GOV_Members_DataGrid_Assignee;break;case"approver":i=e.CHG_GOV_Members_DataGrid_Approver;break;case"Follower":case"follower":i=e.CHG_GOV_Members_DataGrid_InformedUser;break;default:console.log("NLS is not defined for : "+t)}return i},o.getRoleWithoutNLS=function(t){let i="";switch(t){case"Owner":i=e.CHG_GOV_Members_DataGrid_owner;break;case"Assignees":i=e.CHG_GOV_Members_DataGrid_contributor;break;case"Informed Users":i=e.CHG_GOV_Members_DataGrid_follower;break;case"Coordinator":case"Change Coordinators":i=e.CHG_GOV_Members_DataGrid_coordinator;break;case"Approvers":i=e.CHG_GOV_Members_DataGrid_approver;break;default:console.log("NLS is not defined for : "+t)}return i},o}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm",["UWA/Controls/Abstract","DS/UIKIT/Input/Button","DS/WUXAutoComplete/AutoComplete","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Button","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgServices/scripts/services/ChgErrors","require","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p=e.extend({init:function(e){this.options=e,this.buttons={add:null,addAnother:null},this.formField={},this.fieldElement={}},getHeading:function(){const e=this.options,t=this.getObjectLabel(e.objectTitle),i=e.title||"Add Member";return t?`${i} - ${t}`:i},getObjectLabel:function(e){return e?`${e.slice(0,50)}${e.length>50?"... ":" "}`:""},getBody:function(){var e=this;console.log("inside component");var t=UWA.createElement("div",{id:"addMemberBody",class:"addMemberBody"}),s=e.options.fields;return p.teamlayoutModel=e.options.teamlayoutModel,p.type=e.options.type,s.forEach(function(s){var r=[];let l=new a;var d=e.fieldElement[s.id]=new i({elementsTree:function(t){return e.getMembersModel(t,s.supportType,s.searchQuery,l)},placeholder:n.CHG_Add_Member_Type_To_Search,minLengthBeforeSearch:3,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,disabled:null!=s.disabled&&s.disabled,visibleFlag:null==s.visibleFlag||s.visibleFlag,multiSearchMode:null==s.multiSearchMode||s.multiSearchMode,columnOptions:{autoRowHeightFlag:!0,typeRepresentation:"detailedUser"},filterCB:function(t){"Change Action"==p.type?d.selectedItems&&d.selectedItems.length>0&&("Route Template"===d.selectedItems[0].options.type?e.filterApproverAutoCompleteByType(s.supportType,t,!0,l,s.filterId):"Person"===d.selectedItems[0].options.type&&e.filterApproverAutoCompleteByType(s.supportType,t,!1,l,s.filterId)):l.setFilterModel({value:{filterId:s.filterId,filterModel:{text:t}}})},getChipInfo:function(e){let t=this.getDefaultChipInfo(e).label;return"Person"===e.options.type?{label:`${e.options.label} (${e.options.identifier})`}:{label:t}}});s.autoComplete=d,p.elementsTree=d.elementsTree;var c=new o({displayStyle:"lite",label:"Search "+s.label,icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1,disabled:null!=s.disabled&&s.disabled});c.getContent().setStyle("margin-left","12px").setStyle("margin-right","10px"),c.addEventListener("buttonclick",function(){e.searchMembersHandler(s,e)});e.fieldElement[s.id].supportType=[].concat(s.supportType||[]),r.push(d),r.push(c);var g=e.formField[s.id]=e.getFormField({id:s.id,label:s.label,fieldElement:r});g.inject(t),u.makeDroppable(g,e.dropHandler.bind(e,s))}),t},dropHandler:function(e,t){var i={data:{}};i.data.items=t,console.log("Inside the handler");let n=t[0].objectId,o=t[0].serviceId;("3DSPACE"!=(o=o&&o.includes(":")?o.split(":")[0]:o).toUpperCase()||n&&n.contains(":"))&&!t[0].i3dx?(d.warn(NLS.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped"),console.log("Service: "+o+" objectId:"+n+"i3dx:"+t[0].i3dx)):this.ExecuteDropForAddMemberPanel(i,e.id,e.autoComplete)},getMembersModel:async function(e,t,i,o){try{const a={contextUser:r.getGlobalVariable().contextUser,text:e,supportType:t,searchQuery:i};let c={};p.teamlayoutModel.getChildren().forEach(e=>{const t=e.options.grid;c[t.id]=t.roleList});let u=await l.fetchMembersList(a);u.length>999&&d.warn(n.CHG_Add_Member_Warning),o.empty(),o.prepareUpdate();for(let e=0;e<u.length;e++){const t=u[e].id;let i;if("person"===u[e].type.toLowerCase()?i=`${u[e].name}(${u[e].identifier.toUpperCase()})`:"group"!==u[e].type.toLowerCase()&&"route template"!==u[e].type.toLowerCase()||(i=u[e].name),c.hasOwnProperty(t)&&(u[e].personRole=c[t],c[t].includes(n.CHG_Member_Role_Assignee)||c[t].includes("Follower")))continue;let a=new s({label:u[e].name,value:{label:i,subLabel:u[e].personRole},name:u[e].name,identifier:u[e].identifier,type:u[e].type,id:u[e].id});o.addRoot(a)}return o.pushUpdate(),o}catch(e){throw console.error("Error in getMembersModel:",e),e}},getFormField:function(e){var t=UWA.createElement("div",{id:"memberFormField"+e.id,class:"memberFormField",style:"margin-bottom: 5px;"}),i=UWA.createElement("div",{id:"memberFieldLabel"+e.id,class:"memberFieldLabel"}).inject(t);UWA.createElement("span",{id:"memberFieldText"+e.id,text:e.label,class:"memberFieldText"}).inject(i);if(e.fieldElement){var n=UWA.createElement("div",{id:"memberFieldElement"+e.id,class:"memberFieldElement"}).inject(t);Array.isArray(e.fieldElement)?(e.fieldElement.forEach(function(e){e.inject(n)}),n.setStyle("display","flex")):e.fieldElement.inject(n)}return t},getFooter:function(){var e=this,i=UWA.createElement("div",{id:"addMemberFormFooter"});return(e.buttons.add=new t({value:n.CHG_Add_Member_Add,className:"primary"}).inject(i)).addEvent("onClick",function(){e.addMemberHandler()}),i},enableAddButtons:function(){this.buttons.add.enable()},disableAddButtons:function(){this.buttons.add.disable()},isUserAlreadyAdded:function(e,t){let i=p.teamlayoutModel;for(let n of i.getAllDescendants())if(n.options.grid.role===t&&n.options.children&&n.options.children.length>0)for(let t of n.options.children)if(t._options.grid.id===e.pid)return!0;return!1},ExecuteDropForAddMemberPanel:function(e,t,i){try{i||(i=p.roleToSearchInfo.autoComplete);const n=[];if(e&&e.data&&e.data.items){const o=e.data.items;if(UWA.is(o)&&UWA.is(o.length)&&o.length>0){const{object3DSpacePIDArr:e,objectSwymPersonIDArr:a,objectUserUUIDArr:s}=this.getSeparateArrays(o);e.length||a.length||s.length?(this.handle3DSpaceObjects(e,i,n,t),this.handleSwymPersonObjects(a,i,n,t),this.handleUserUUIDObjects(s,i,n,t)):d.error(NLS.ECM_CA_Drop_Not_Supported)}}else console.log("NLS.ECM_CA_Drop_Not_Supported")}catch(e){console.error("An error occurred in ExecuteDropForAddMemberPanel:",e)}},getSeparateArrays:function(e){const t=[],i=[],n=[];for(const o of e)if(o.objectId){const e=o.serviceId.toLowerCase();e.includes("3dspace")?t.push(o.objectId):e.includes("3dswym")&&"pno:Person"===o.objectType?i.push(o.objectId.replace("iam:","")):e.includes("usersgroup")&&n.push(o)}return{object3DSpacePIDArr:t,objectSwymPersonIDArr:i,objectUserUUIDArr:n}},handle3DSpaceObjects:async function(e,t,i,n){let o=c("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices");try{const a=await o.getAdditionObjectInfo(e);for(const o of e){const e=a.additionObjectInfo[o];this.handleObject(e,t,i,n)}}catch(e){return console.log("Failed in getting person id"),Promise.reject(e)}},handleSwymPersonObjects:async function(e,t,i,n){let o=c("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices");try{const a=await o.getAdditionSwymPersonInfo(e);for(const o of e){const e=a.additionObjectInfo[o];this.handleObject(e,t,i,n)}}catch(e){return console.log("Failed in getting person id"),Promise.reject(e)}},handleUserUUIDObjects:function(e,t,i,n){for(const o of e){const e=this.createTempObjectForUserUUID(o);this.handleObject(e,t,i,n)}},handleObject:function(e,t,i,o){const a=o.toLowerCase();if(this.isUserAlreadyAdded(e,"assignee"===a?"Assignees":"approver"===a?"Approvers":"coordinator"===a?"Change Coordinators":"Informed Users"))console.log("This member is already added"),d.info(n.CHG_GOV_Members_AlreadyAdded);else{const n=this.createNodeForPersonOrGroup(e);i.push(n),t.selectedItems=i,t._applySelectedItems()}},createTempObjectForUserUUID:function(e){return{type:e.objectType,fullName:e.displayName,objectName:e.objectId,pid:e.objectId}},createNodeForPersonOrGroup:function(e){if("Person"===e.type)return new s({label:e.fullName,value:e.objectName,name:e.fullName,type:e.type,id:e.pid,identifier:e.objectName});if("Group"===e.type)return new s({label:e.objectTitle,value:e.objectName,name:e.objectTitle,type:e.type,id:e.pid});if(e.type&&"Route Template"===e.type){l.reviewerType.typeOfReviewer;return new s({label:e.fullName,value:e.objectName,name:e.fullName,type:e.type,id:e.pid,identifier:e.objectName})}console.log("Show error message...!")},addMemberHandler:function(){const e=this;e.addMemberPanelImmerSiveFrame.remove();const t={};for(const i in e.fieldElement){t[i]={};const n=e.fieldElement[i];n.supportType.forEach(e=>{t[i][e]=[]});const o=n.supportType.includes("routetemplate");n.selectedItems&&n.selectedItems.forEach(e=>{const a=e.options.type.toLowerCase();n.supportType.includes(a)?t[i][a].push(e.options["group"===a?"id":"identifier"]):o&&"route template"===a&&(t[i].routetemplate=e.options.id)})}let i=e.options.type;e.options.addMemberSubmitHandler(t,i)},searchMembersHandler:function(e){p.roleToSearchInfo=e;let t=e.supportType;console.log("Inside search Handler");var i=e.label;let n="";switch(i){case"Change Coordinators":n='"Change Coordinator';break;case"Assignees":n="Assignee";break;case"Informed Users":n="Follower";break;case"Approvers":n="Approver";break;default:return void console.log("Unknown category: "+i)}this.searchMembers(n,i,t)},searchMembers:function(e,t,i){p.searchCategoty=e;let n=c("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices");if(r.getGlobalVariable().Native){let t=c("DS/ENOChgServices/scripts/services/ChgNativeInitService"),i="CHG_Add_Member",n={categoryId:e,reviewerType:l.reviewerType.typeOfReviewer},o=JSON.stringify(n);t.DispatchEventToWin(i,o)}else{var o=n.activateSearch("Person","TransferOwnership");n.search(t,i,p.prototype.OnSearchComplete,"Contributors",o,void 0,void 0)}},OnSearchComplete:function(e){var t=[];p.approverFlag=!0;for(var i=0;i<e.length;i++)t.push({objectId:e[i][0],identifier:e[i][1],objectType:e[i][2],displayType:e[i][3],displayName:e[i][5],serviceId:e[i][7]});var n={data:{}};n.data.items=t,p.prototype.ExecuteDropForAddMemberPanel(n,p.searchCategoty)},addChangeEventListener:function(){var e=this;p.autoCompleteApprover.addEventListener("change",function(){p.autoCompleteApprover.selectedItems;e.disableButtonFun()||e.disableAddButtons(),e.disableButtonFun()&&e.enableAddButtons()}),p.autoCompleteChangeCoordinator.addEventListener("change",function(){p.autoCompleteChangeCoordinator.selectedItems;e.disableButtonFun()||e.disableAddButtons(),e.disableButtonFun()&&e.enableAddButtons()}),p.autoCompleteAssignee.addEventListener("change",function(){var t=p.autoCompleteAssignee.selectedItems,i=t.length;if(i>0){var n=t[i-1];p.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.name==n.options.name||1==p.approverFlag)return!0})<0&&(p.autoCompleteAssignee._selectionChips.removeChip(n.options.label),p.autoCompleteAssignee.selectedItems.pop(),p.autoCompleteAssignee.value.pop())}e.disableButtonFun()?e.enableAddButtons():e.disableAddButtons()}),p.autoCompleteFollower.addEventListener("change",function(){var t=p.autoCompleteFollower.selectedItems,i=t.length;if(i>0){var n=t[i-1];p.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.name==n.options.name||1==p.approverFlag)return!0})<0&&(p.autoCompleteFollower._selectionChips.removeChip(n.options.label),p.autoCompleteFollower.selectedItems.pop(),p.autoCompleteFollower.value.pop())}e.disableButtonFun()?e.enableAddButtons():e.disableAddButtons()})},disableButtonFun:function(){return!!(p.autoCompleteFollower&&p.autoCompleteFollower.selectedItems&&p.autoCompleteFollower.selectedItems.length>0)||(!!(p.autoCompleteAssignee&&p.autoCompleteAssignee.selectedItems&&p.autoCompleteAssignee.selectedItems.length>0)||(!(!p.autoCompleteChangeCoordinator||!p.autoCompleteChangeCoordinator.selectedItems)||!(!p.autoCompleteApprover||!p.autoCompleteApprover.selectedItems)))},dragAndDropHandler:function(){var e=document.getElementById("memberFieldElementchangeCoordinator");p.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,p.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForChangeCoordinatorField:function(e){var t={data:{}};t.data.items=e,p.ExecuteDropForAddMemberPanel(t,"Change Coordinator")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,p.ExecuteDropForAddMemberPanel(t,"Follower")},ExecuteDropForAssigneeField:function(e){var t={data:{}};t.data.items=e,p.ExecuteDropForAddMemberPanel(t,"Assignee")},filterApproverAutoCompleteByType:function(e,t,i,n,o){var a=[];"Both"==e?(a.push("Route Template"),a.push("Person")):a.push(e),!0===i?"Route Template"===e&&n.setFilterModel({type:{filterId:"set",filterModel:[null]}}):n.setFilterModel({type:{filterId:"set",filterModel:a},value:{filterId:o,filterModel:{text:t}}})}});return p}),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/LifecycleCmd/MaturityCmd","DS/Controls/ProgressBar","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";var D=Object.create(null);return D.getColumns=function(){let e=[];return e.push(C.getColumnDefinition({dataIndex:"titleTree"})),e.push(C.getColumnDefinition({dataIndex:"co_name"})),e.push(C.getColumnDefinition({dataIndex:"maturityWithBadge"})),"true"===i.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(C.getColumnDefinition({dataIndex:"ApprovalStatus"})),e.push(C.getColumnDefinition({dataIndex:"severityNLS"})),e.push(C.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(C.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(C.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(C.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(C.getColumnDefinition({dataIndex:"applicabilityNLS"})),e.push(C.getColumnDefinition({dataIndex:"modificationDate"})),e.push(C.getColumnDefinition({dataIndex:"creationDate"})),e},D.getRelationalExplorerMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){var t={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>RMB>Relations"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){for(var t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<t.length;o++){var a=t[o].options.grid.id;n.push(a)}e.openRelationalExplorer(n)})}}}},D.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){var t={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>RMB>Move"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});for(var n=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(o)})}}}},D.getDeleteMenu=function(t,i,n,o){return{type:"PushItem",title:e.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>RMB>Delete"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});for(var t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),s=[],r=0;r<t.length;r++){var l=t[r],d={physicalid:l.options.grid.id,nodeName:l.options.grid.name,nodeTitle:l.options.grid.title};s.push(d)}a.deleteNodes(s,n,o)}}}},D.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:i.getGlobalVariable().tenant,objectId:e.id,openLink:!0}),t},D.showNotification=function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=p,g.setNotificationManager(window.notifs)),a?g.inject(a):g.elements.container.isInjected()||g.inject(),window.notifs.addNotif(r)},D.changeView=function(i){if(widget.body.getDimensions().width<=n.MOBILE_CUTOFF?o.updateCASummaryViewMobile(i):o.updateCASummaryViewDesktop(i),"GridView"==i)this.currentView="Grid",(a=t.toolbar.getNodeModelByID("view"))&&"view-list"!=a.options.grid.semantics.icon.iconName&&a.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),a.options.grid.data.menu[0].state="selected",a.options.grid.data.menu[1].state="unselected",(s=document.querySelector(".cogridView"))&&(s.removeClassName("hideView"),s.removeClassName("nonVisible"),s.addClassName("showView")),(r=document.querySelector(".cotileView"))&&(r.removeClassName("showView"),r.addClassName("hideView"));else if("TileView"==i){var a,s,r;this.currentView="Tile",(a=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=a.options.grid.semantics.icon.iconName&&a.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),a.options.grid.data.menu[0].state="unselected",a.options.grid.data.menu[1].state="selected",(s=document.querySelector(".cogridView"))&&(s.removeClassName("showView"),s.addClassName("hideView")),(r=document.querySelector(".cotileView"))&&(r.removeClassName("hideView"),r.addClassName("showView"))}},D.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);var a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},D.createCustomOwner=function(e,t){var n="/api/user/getpicture/login/"+t+"/format/normal",o=i.getGlobalVariable().computeSwymUrl(n),a=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{var d=s.getAvatarDetails(t);(l=UWA.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=UWA.createElement("span",{class:"userName",html:t});return r.inject(a),c.inject(a),a.outerHTML},D.filterView=function(e){if("activeCO"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCO"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},D}),define("DS/ENOChgGovernanceUX/scripts/view/ChgInActiveCOFilterView",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil"],function(e,t){"use strict";return{filterView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout"],function(e){e.coGridView.coDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.filterView("inactiveCO")},100)})}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridViewToolbar"],function(e,t){"use strict";var i=Object.create(null);return i.getColumns=function(){return[{text:e.CHG_Member_DataGrid_Column_Name,dataIndex:"person_name",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.fullName}},{text:e.CHG_Member_DataGrid_Column_Role,dataIndex:"roleList"}]},i.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-member-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".membertileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-member-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".membertileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},i.makeUpdateMemberJson=function(e,t,i,n,o){var a={data:[]};if(""!=t&&a.data.push({updateAction:e,dataelements:{role:"Coordinator",user:t,list:""}}),""!=i&&a.data.push({updateAction:e,dataelements:{role:"Approver",user:"",list:i}}),""!=n.person)if("string"!=typeof n.person)for(var s=0;s<n.person.length;s++){var r={updateAction:e,dataelements:{role:"Follower",user:n.person[s],list:""}};a.data.push(r)}else a.data.push({updateAction:e,dataelements:{role:"Follower",user:n.person,list:""}});if(""!=n.userGroup)if("string"!=typeof n.userGroup)for(s=0;s<n.userGroup.length;s++){var l={updateAction:e,dataelements:{role:"Follower",user:"",list:n.userGroup[s]}};a.data.push(l)}else a.data.push({updateAction:e,dataelements:{role:"Follower",user:"",list:n.userGroup}});if(""!=o.person)if("string"!=typeof o.person)for(s=0;s<o.person.length;s++){r={updateAction:e,dataelements:{role:"Assignee",user:o.person[s],list:""}};a.data.push(r)}else a.data.push({updateAction:e,dataelements:{role:"Assignee",user:o.person,list:""}});if(""!=o.userGroup)if("string"!=typeof o.userGroup)for(s=0;s<o.userGroup.length;s++){l={updateAction:e,dataelements:{role:"Assignee",user:"",list:o.userGroup[s]}};a.data.push(l)}else a.data.push({updateAction:e,dataelements:{role:"Assignee",user:"",list:o.userGroup[s]}});return a},i}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridViewToolbar"],function(e,t){"use strict";var i=Object.create(null);return i.getColumns=function(){return[{text:e.CHG_Member_DataGrid_Column_Name,dataIndex:"person_name",editableFlag:!1,alwaysVisibleFlag:!0,pinned:"left",allowUnsafeHTMLContent:!0,width:"200",getCellGroupingKey:function(e){return e.nodeModel.options.grid.fullName}},{text:e.CHG_Member_DataGrid_Column_Role,dataIndex:"roleList"}]},i.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-member-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".membertileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-member-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".membertileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},i.makeUpdateMemberJson=function(e,t,i,n,o){var a={data:[]};if(""!=t&&a.data.push({updateAction:e,role:"Coordinator",user:t,list:""}),""!=i&&a.data.push({updateAction:e,role:"Approver",user:[],list:i}),""!=n.person)if("string"!=typeof n.person)for(var s=0;s<n.person.length;s++){var r={updateAction:e,role:"Follower",user:n.person[s],list:""};a.data.push(r)}else a.data.push({updateAction:e,role:"Follower",user:n.person,list:""});if(""!=n.userGroup)if("string"!=typeof n.userGroup)for(s=0;s<n.userGroup.length;s++){var l={updateAction:e,role:"Follower",user:"",list:n.userGroup[s]};a.data.push(l)}else a.data.push({updateAction:e,role:"Follower",user:"",list:n.userGroup});if(""!=o.person)if("string"!=typeof o.person)for(s=0;s<o.person.length;s++){r={updateAction:e,role:"Assignee",user:o.person[s],list:""};a.data.push(r)}else a.data.push({updateAction:e,role:"Assignee",user:o.person,list:""});if(""!=o.userGroup)if("string"!=typeof o.userGroup)for(s=0;s<o.userGroup.length;s++){l={updateAction:e,role:"Assignee",user:"",list:o.userGroup[s]};a.data.push(l)}else a.data.push({updateAction:e,role:"Assignee",user:"",list:o.userGroup});return a},i.getRoleNLSValue=function(t){let i="";switch(t){case"Owner":i=e.CHG_Member_Role_Owner;break;case"Originator":i=e.CHG_Member_Role_Originator;break;case"Coordinator":i=e.CHG_Member_Role_ChangeCoordinator;break;case"Assignee":i=e.CHG_Member_Role_Assignee;break;case"Approver":i=e.CHG_Member_Role_Approver;break;case"Follower":i=e.CHG_Member_Role_Follower;break;default:console.log("NLS is not defined for : "+t)}return i},i.removeRole=function(e,t){let i=","+t,n=", "+t,o=t+",",a=t+" ,";return e.includes(i)?e=e.replace(i,""):e.includes(n)?e=e.replace(n,""):e.includes(o)?e=e.replace(o,""):e.includes(a)&&(e=e.replace(a,"")),e},i}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager",["DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant"],function(e){"use strict";var t=function(){};return t._KEY=e._KEY,t._LAST_ROUTE=e._LAST_ROUTE,t._MY_CHANGE_ORDERS=e._MY_CHANGE_ORDERS,t._RECENTLY_OPENED=e._RECENTLY_OPENED,t.prototype.initWidgetViewPreferences=function(){if(!widget.getValue(t._KEY)){widget.setValue(t._KEY,JSON.stringify({"xchange-app":{model:{"id-card":{},"orchestration-level1":{},"orchestration-level2":{},"orchestration-level3":{}},"last-route":{},"xchange-views-preferences":{"info-panel":{"info-open":"","info-context":"","info-width":""},"xchange-my-change-orders":{"xchange-list-view":{view:"",filterview:"",sort:{},search:"",selections:[],filters:{},tagFilter:{}}},"xchange-change-orders-details":{tab:""},"xchange-change-requests-details":{tab:""},"xchange-change-actions-details":{tab:""},"xchange-investigation-requests-details":{tab:""},"xchange-recently-opened":{objectIDs:""}}}}))}},t.prototype.updateWidgetViewPreferences=function(e,i){if(this.isPath(e,!1)){var n=JSON.parse(widget.getValue(t._KEY)),o=JSON.parse(JSON.stringify(e));widget.setValue(t._KEY,JSON.stringify(this.recursiveSearch(n,o,i,!0)))}},t.prototype.recursiveSearch=function(e,t,i,n){return n&&2==t.length?e[t[0]][t[1]]=i:2==t.length?e[t[1]]=i:n?this.recursiveSearch(e[t[0]],t,i,!1):(t.shift(),this.recursiveSearch(e[t[0]],t,i,!1)),e},t.prototype.isPath=function(e,i){try{var n=widget.getValue(t._KEY);if(n){if(Array.isArray(e)){for(var o=JSON.parse(n),a=0;a<e.length;a++){if(void 0===o[e[a]]&&""!=o[e[a]])return console.log("xChangeWidgetPreferencesManager isPath() path doesn't exist"),!!i&&void 0;o=o[e[a]]}return!i||o}return console.log("xChangeWidgetPreferencesManager isPath() parameter 1 is not a Array"),!!i&&void 0}return console.log("xChangeWidgetPreferencesManager isPath() widgetPreferences not initialize"),!!i&&void 0}catch(e){return console.error(e),!!i&&void 0}},t.prototype.getValue=function(e){return this.isPath(e,!0)},t}),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],function(e,t,i,n,o,a,s,r,l,d,c){"use strict";return{showRMBMenuOnGrid:async function(e,t,a){let u=[];try{"true"==o.getGlobalVariable().CHG_APPROVAL_COLUMN&&t.cellInfos.nodeModel.options.grid.approvalStatusModel&&await c.getColumnApprovalStatusMenu(t.cellInfos.nodeModel.options.grid.approvalStatusModel).then(function(e){u.push(e)})}catch(e){console.error(e)}return new Promise(function(c,p){var g="false",h=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const m=h.map(e=>e.options.grid.id);h.length>1&&(g="true");var C=[];C.push(n.createPropertyPushItem(m)),C.push(i.getRelationalExplorerMenu(e,t));var f={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(f);var v=l("DS/ENOChgServices/scripts/services/ChgDataService"),D=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),b=null,w=D.openWith(f),S=t.cellInfos.nodeModel.options.grid.isKindOfChangeAction,I=[],_=document.getElementById("outer-co-div");"false"==g&&(I.push(w),b=1==S?D.getUserAccess("pid:"+t.cellInfos.nodeModel.options.grid.id):v.getChangeOrderUserAccess(t.cellInfos.nodeModel.options.grid.id),I.push(b));let y=null;if(a){var E=l("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout");y=E.removeDeletedNodesUsingIDs}else{var O=l("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout");y=O.removeDataFromGrid}Promise.all(I).then(function(n){if(n[0]&&C.push(n[0]),"false"==g&&1==S){var a=n[1].userAccess;if(a=s.processAccessBitCO(a),(n[1]&&"true"==a.Promote||"true"==a.Demote)&&C.push(d.getMaturityMenu(t)),C.push(r.getCopyLink(h)),n[1]&&"true"==a.TransferOwnership&&C.push(i.getTransferMenu(e,t)),n[1]&&"true"==a.Delete&&C.push(i.getDeleteMenu(e,t,_,y)),"true"==o.getGlobalVariable().CHG_APPROVAL_COLUMN&&u.length>0)for(let e=0;e<u[0].length;e++)C.push(u[0][e])}else if("false"==g){a=n[1].data[0].dataelements;a=s.processAccessBitCO(a),(n[1]&&"true"==a.Promote||"true"==a.Demote)&&C.push(d.getMaturityMenu(t)),C.push(r.getCopyLink(h)),n[1]&&"true"==a.TransferOwnership&&C.push(i.getTransferMenu(e,t)),n[1]&&"true"==a.Delete&&C.push(i.getDeleteMenu(e,t,_,y))}else"true"==o.getGlobalVariable().isFullLicence&&C.push(d.getMaturityMenu(t)),C.push(r.getCopyLink(h)),C.push(i.getTransferMenu(e,t)),"true"==o.getGlobalVariable().isFullLicence&&C.push(i.getDeleteMenu(e,t,_,y));c(C)})})},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=o.getGlobalVariable().changeOrderSubTypes;a.getCombinedClassList(n).then(function(i){a.getPropertyForClassGrid(i).then(function(i){let n=a.makeCombinedColumnList(i),o=t.filterColumn(n);e(o)})})})},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:changeCoordinator","ds6w:organizationResponsible","ds6w:modified","ds6w:created"];for(let t of n)e.delete(t);return e.forEach((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:s.getGetCellValueFunction(i,t)}}}}),define("DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel",["DS/Utilities/Utils","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/constants/EditPropConstants","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesServices","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o,a,s){"use strict";function r(){var e=o.getpropOptions(i);this._informationPanel=new t(e)}return r.prototype.start=function(e){if(this.setState(e.objectInfo),e.facets&&Array.isArray(e.facets)){this._informationPanel.addFacets(e.facets);var t=[];e.facets.includes(i.FACET_RELATIONS)||t.push(i.FACET_RELATIONS),t.length>0&&this._informationPanel.removeFacets(t)}if(this._informationPanel.initDatas(this.getPropertyModels()),e.container)this._informationPanel.elements.container.inject(e.container);else{var n=document.querySelectorAll(".gov-triptych-wrapper");let e=document.querySelector(".secondmainContainer-sidepanel");if(e||(e=new UWA.Element("div",{class:"secondmainContainer-sidepanel"})),n){if(n[1].children.length>0)for(var o=n[1].children,a=0;a<o.length;a++)o[0].destroy();this._informationPanel.elements.container.inject(n[1]),e.inject(n[1])}else this._informationPanel.elements.container.inject(widget.body),e.inject(widget.body)}this.reRender=function(){let e=void 0,t=this.getSate();Array.isArray(t)&&t.length>0&&UWA.is(t[0].facetSelect)&&(e=t[0].facetSelect),this._informationPanel.initDatas(this.getPropertyModels(),e),this._informationPanel.elements.container.onResize()}},r.prototype.setState=function(e,t){var n=this;if(this._currentSelection=Array.isArray(e)?e:[],0!=e.length){var o=e[0].type;e[0].facetSelect;a.addAllFacet(n._informationPanel,e),a.hideFacet(n._informationPanel),a.updateFacetOnSelection(o,n._currentSelection,n._informationPanel),UWA.is(this._informationPanel.controller.skeleton.currentFacetName)&&this._informationPanel.controller.skeleton.currentFacetName===i.FACET_PROPERTIES&&("ChangeOrder"==o&&"false"==s.getGlobalVariable().isFullLicence&&"false"==s.getGlobalVariable().isDerivativeLicense?this._informationPanel.setReadonlyStatus(!0):"ChangeAction"==o&&this._informationPanel.setReadonlyStatus(!1)),"ChangeAnalysis"===o?a.getUpdateIMpactAnalysisFacet(e).then(function(e){t&&n.reRender()}):t&&this.reRender()}else t&&this.reRender()},r.prototype.changeSequence=function(e){for(var t=0;t<this._informationPanel.elements.container._lFacets.length;t++){var i=this._informationPanel.elements.container._lFacets[t];if(i.facet.name===e){for(var n=t;n<this._informationPanel.elements.container._lFacets.length-1;n++)this._informationPanel.elements.container._lFacets[n]=this._informationPanel.elements.container._lFacets[n+1];this._informationPanel.elements.container._lFacets[this._informationPanel.elements.container._lFacets.length-1]=i}}},r.prototype.getSate=function(){return this._currentSelection},r.prototype.getPropertyModels=function(){return o.getPropModel(this.getSate())},r.prototype.resizePropertiesPanel=function(){this._informationPanel.onResize()},r}),define("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",["DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceSlideIn","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o){"use strict";let a={slideinview:"",slideInContainer:"",parentContainer:"",modelEvents:null,setContainersForSlideIn:({contextDetails:t,infoPanelContainer:i,target:o,modelEvents:s})=>{a.slideInContainer=i,a.parentContainer=o;let r=UWA.createElement("div",{id:"emptyInitInfoPanel",styles:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)"},html:n.CHG_GOV_Empty_InfoPanel3DSpace_PlaceHolder});a.slideinview=new e(a.slideInContainer,a.parentContainer,r),a.slideinview.buildSlideIn(),a.modelEvents=s,s.subscribe({event:"update-property-panel-data"},function(e){if(e.context&&e.context.getTreeDocument()&&e.context.getTreeDocument().getSelectedNodes().length>0){a.slideinview.content="";let t=e.context.getTreeDocument().getSelectedNodes(),i=a.createJsonForInfoPanel(t);a.launchPropertyPanel(i)}else{let t={physicalId:e.PhysicalID,metatype:"businessobject",type:e.type,modelEvents:a.modelEvents},i=[];i.push(t),a.launchPropertyPanel(i)}}),s.publish({event:"update-property-panel-data",data:{PhysicalID:t.id,type:t.isKindOfType}})},createSlidein:()=>{a.slideinview.showSlideIn()},launchPropertyPanel:e=>{if(a.propertyCmp){o.getGlobalVariable().lastSelectedInfoType!=e[0].type&&(i.hideFacet(a.propertyCmp._informationPanel),o.getGlobalVariable().lastSelectedInfoType=e[0].type);var n=e;a.propertyCmp.setState(n,!0)}else{var s={objectInfo:e,container:a.slideInContainer.getElement("#slideInBody")},r=new t;r.start(s),a.propertyCmp=r,o.getGlobalVariable().lastSelectedInfoType=e[0].type}},createJsonForInfoPanel:function(e){let t=[];for(let i=0;i<e.length;i++){let n={physicalId:e[i].options.grid.id,metatype:"businessobject",type:e[i].options.grid.isKindOfType,modelEvents:a.modelEvents};t.push(n)}return t}};return a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgPropertiesServices","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";var D={showRMBMenuOnGrid:function(e,t,i){return new Promise(function(i,o){var a="false",s=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();s.length>1&&(a="true");var r=[];const l=s.map(e=>e.options.grid.id);r.push(n.createPropertyPushItem(l)),r.push(D.getRelationalExplorerMenu(t)),r.push(m.getCopyLink(s));var d={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(d);var c=C("DS/ENOChgServices/scripts/services/ChgDataService"),u=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),p=C("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"),g=null,h=u.openWith(d),v=t.cellInfos.nodeModel.options.grid.isKindOfChangeAction,b=t.cellInfos.nodeModel.options.grid.isKindOfChangeRequest,w=[],S=document.getElementById("outer-co-div");"false"==a&&w.push(h),"false"==a&&(g=1==v?u.getUserAccess("pid:"+t.cellInfos.nodeModel.options.grid.id):1==b?c.getChangeRequestUserAccess(t.cellInfos.nodeModel.options.grid.id):c.getChangeOrderUserAccess(t.cellInfos.nodeModel.options.grid.id),w.push(g)),Promise.all(w).then(function(n){n[0]&&r.push(n[0]),r.push(f.getMaturityMenu(t)),"false"==a&&1==v?(n[1]&&"true"==n[1].userAccess.Transfer&&r.push(D.getTransferMenu(t)),n[1]&&"true"==n[1].userAccess.Delete&&r.push(D.getDeleteMenu(e,t,S,p.removeDeletedNodesUsingIDs))):"false"==a?(n[1]&&"true"==n[1].data[0].dataelements.TransferOwnership&&r.push(D.getTransferMenu(t)),n[1]&&"true"==n[1].data[0].dataelements.Delete&&r.push(D.getDeleteMenu(e,t,S,p.removeDeletedNodesUsingIDs))):(r.push(D.getTransferMenu(t)),r.push(D.getDeleteMenu(e,t,S,p.removeDeletedNodesUsingIDs))),i(r)})})},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:o.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>RMB>Relations"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++){var a=i[o].options.grid.id;n.push(a)}t.openRelationalExplorer(n)})}}}},getTransferMenu:function(e){return{type:"PushItem",title:o.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>RMB>Move"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(o)})}}}},getDeleteMenu:function(e,t,n,a){return{type:"PushItem",title:o.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){var o={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>RMB>Delete"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:o});for(var s=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),r=[],l=0;l<s.length;l++){var d=s[l],c={physicalid:d.options.grid.id,nodeName:d.options.grid.name,nodeTitle:d.options.grid.title};r.push(c)}i.deleteNodes(r,n,a,e)}}}},makeCopyLinkObject:function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:s.getGlobalVariable().tenant,objectId:e.id,openLink:!0}),t},showNotification:function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=c,u.setNotificationManager(window.notifs)),a?u.inject(a):u.elements.container.isInjected()||u.inject(),window.notifs.addNotif(r)},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=s.getGlobalVariable().changeActionSubTypes,o=[...s.getGlobalVariable().changeOrderSubTypes,...n];h.getCombinedClassList(o).then(function(i){h.getPropertyForClassGrid(i).then(function(i){let n=h.makeCombinedColumnList(i),o=t.filterColumn(n);e(o)})})})},filterColumn:function(e){let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project"];for(let t of n)for(let i of e)i.delete(t);for(let n of e)return n.forEach((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:function(e,i){return e.nodeModel.getAttributeValue(t)}}}};return D}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeRequest,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"createChangeRequestInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeRequest},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"createChangeOrderInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"addExistingHandler"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){"false"===t.getGlobalVariable().isFullLicence&&"false"===t.getGlobalVariable().isDerivativeLicense&&this.createData.menu.splice(1,1);var o={entries:[{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"plus",fontIconFamily:1},value:this.createData},position:"far",category:"Create"},{id:"MergeCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"merge",fontIconFamily:1},tooltip:e.CHG_TOOLTIP_MERGE_CA,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"mergeChangeAction"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"removeHandler"}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",func:"deleteHandler"}}},{id:"cmd_CO_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n);o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.filterData={menu:[{type:"CheckItem",title:e.CHG_Filter_ActiveIA,state:"selected",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"filterActiveView"},tooltip:e.CHG_Filter_ActiveIA_Def},{type:"CheckItem",title:e.CHG_Filter_InactiveIA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"filterInActiveView"},tooltip:e.CHG_Filter_InactiveIA_Def},{type:"CheckItem",title:e.CHG_Filter_RolledUpIA,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"filterRolledUpView"},tooltip:e.CHG_Filter_RolledUpIA_Def}]},n.writetoolbarDefinition=function(n){let o=!0;o=!(!n.contextDetails.accessBits||"true"!=n.contextDetails.accessBits.ManageChangeAnalysis);var a={entries:[{id:"IADispatchMenu",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"graph-egraph-down",fontIconFamily:1},visibleFlag:!1,value:{menu:[{type:"PushItem",title:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchToNew,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"dispatchToNewSubCRDialog",argument:{contextCRId:n.contextDetails.id}},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchToNewSubCR},{type:"PushItem",title:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchToExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"dispatchToExistingSubCRDialog",argument:{contextCRId:n.contextDetails.id}},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchToExistingSubCR}]}},position:"far",tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_DispatchMenu},{id:"refine",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"tree-revision-update",fontIconFamily:1},tooltip:e.CHG_GOV_Refine_ImpactAnalysis,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"refineImpactAnalysis",argument:{contextCRId:n.contextDetails.id}}}},{id:"duplicate",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",fontIconFamily:WUXManagedFontIcons.Font3DS},tooltip:e.CHG_GOV_Duplicate_ImpactAnalysis,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"duplicateImpactAnalysis",argument:{contextCRId:n.contextDetails.id}}}},{id:"cancel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"block",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_CancelImpactAnalysis,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"cancelHandler",argument:{contextCRId:n.contextDetails.id}}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"deleteHandler"}}},{id:"impactedItems",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"change-request-impacted-items",fontIconFamily:1},tooltip:e.ECM_CR_IA_IMPACTED_ITEMS,position:"far",visibleFlag:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"impactsHandler"}}},{id:"ia_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"filter",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"list-filter",fontIconFamily:1},value:this.filterData},position:"far",tooltip:e.CHG_Toolbar_FilterBy,category:"View"},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().CHG_ADD_IA_FROM_PARENT_CR&&1==t.getGlobalVariable().CHG_ADD_IA_FROM_PARENT_CR){var s={id:"IAMenu",visibleFlag:!1,dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"change-request-chart-line-bar",fontIconFamily:1},value:{menu:[{type:"PushItem",title:e.CHG_GOV_ImpactAnalysis_Toolbar_NewImpactAnalysis,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate",func:"launchCreateChangeIADialog",argument:{contextCRId:n.contextDetails.id}},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_NewImpactAnalysis},{type:"PushItem",title:e.CHG_GOV_ImpactAnalysis_Toolbar_AddIAFromParent,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",func:"addIAFromParentCRDialog",argument:{contextCRId:n.contextDetails.id}},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_AddIAFromParent}]}},position:"far",tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_IAMenu};a.entries.unshift(s)}else{var r={id:"newImpactAnalysis",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactAnalysis_Toolbar_NewImpactAnalysis,position:"far",visibleFlag:!1,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate",func:"launchCreateChangeIADialog",argument:{contextCRId:n.contextDetails.id}}}};a.entries.unshift(r)}if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n);var l={id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1}},position:"far",tooltip:e.CHG_GOV_ImpactAnalysis_Information,action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}};a.entries.unshift(l),"ChangeAnalysis"==n.contextDetails.isKindOfType&&(a.entries=a.entries.filter(e=>"delete"!=e.id&&"IAMenu"!=e.id))}return a},n}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"createChangeOrderInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeOrder},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeAction,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"createChangeActionInContext"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_NewChangeAction},{type:"PushItem",title:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"addExistingHandler"},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_AddExisting}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var o={entries:[{id:"create",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"plus",fontIconFamily:1},value:this.createData},position:"far",category:"Create"},{id:"MergeCA",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"merge",fontIconFamily:1},tooltip:e.CHG_TOOLTIP_MERGE_CA,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"mergeChangeAction"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"removeHandler"}}},{id:"delete",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"trash",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Delete,position:"far",disabled:!0,action:{module:"DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",func:"deleteHandler"}}},{id:"cmd_co_co_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"sortingdropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n);o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.createData={menu:[{type:"PushItem",title:e.CHG_GOV_ImpactBasis_Toolbar_OrchestrateImpactAnalysis,action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"_orchestrateImpactAnalysis"},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_OrchestrateImpactAnalysis},{id:"newIAAffectedItem",type:"PushItem",title:e.CHG_GOV_AffactedItem_Toolbar_AddImpactAnalysis,state:"disabled",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"createImpactAnalysisInContext"},tooltip:e.CHG_GOV_AffactedItem_Toolbar_AddImpactAnalysis},{type:"PushItem",title:e.CHG_GOV_AffactedItem_Toolbar_Add_Existing_ImpactAnalysis,state:"disabled",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"addExistingImpactAnalysisInContext"},tooltip:e.CHG_GOV_AffactedItem_Toolbar_Add_Existing_ImpactAnalysis}]},n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var o={entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Toolbar_AddExisting,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"addExistingHandler"}}},{id:"changeAssessment",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"component",fontIconFamily:1},tooltip:e.CHG_GOV_ImpactBasis_Toolbar_ChangeAssessment,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"changeAssessmentHandler"}}},{id:"massUpdate",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"pencil",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Toolbar_MassUpdate,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"massUpdateHandler"}}},{id:"moveToCR",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"exchange wux-ui-3ds",fontIconFamily:1},tooltip:e.CHG_GOV_AffactedItem_Toolbar_Move_AffactedItem_To_CR,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"moveAffactedItemToOtherCR"}}},{id:"create",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"change-request-chart-line-bar wux-ui-3ds",fontIconFamily:1},value:this.createData},position:"far"},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",func:"removeHandler"}}},{id:"cmd_AffectedItem_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n),o.entries=o.entries.filter(e=>"changeAssessment"!=e.id),o.entries[3].dataElements.value.menu=o.entries[3].dataElements.value.menu.filter(e=>"newIAAffectedItem"!=e.id);o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedForm",["UWA/Controls/Abstract","DS/ENO6WPlugins/jQuery","DS/UIKIT/Input/Button","DS/Controls/LineEditor","DS/Controls/Editor","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","UWA/Core","DS/UIKIT/Mask","DS/ENOChgRouter5/scripts/ChgRouter","DS/Controls/Button","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/BaseFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S){"use strict";return e.extend({init:function(e){this.options=e,this.selectedObject=void 0,this.modelForAutocomplete=void 0,this.options.model?1==this.options.model.length?(this.mode="edit",this.selectedObject=this.options.model[0]):this.options.model.length>1&&(this.mode="massEdit",this.selectedObject=this.options.model):this.mode="add",this.buttons={add:null,addAnother:null,save:null},this.formField={proposed:null,change:null,reasonForChange:null,changeDetails:null,targetState:null,prefix:null,details:null,status:null},this.fieldElement={proposed:null,change:null,reasonForChange:null,targetState:null,prefix:null,details:null,status:null},this.elementsList=[{label:S.CHG_GOV_Proposed_Activity_None,icon:"pencil",value:"None"},{label:S.CHG_GOV_Proposed_Activity_ChangeStatus,icon:"collaborative-lifecycle-management",value:"ChangeStatus"},{label:S.CHG_GOV_Proposed_Activity_NewEvolution,icon:"flow-branch-add",value:"NewEvolution"},{label:S.CHG_GOV_Proposed_Activity_NewVersion,icon:"flow-line-add",value:"NewVersion"},{label:S.CHG_GOV_Proposed_Activity_NewMinorVersion,icon:"flow-line-add",value:"NewMinorVersion"}],this.targetStateElementsList=[{label:S.CHG_GOV_Proposed_Target_State_Release,value:"Release"},{label:S.CHG_GOV_Proposed_Target_State_Obsolete,value:"Obsolete"},{label:S.CHG_GOV_Proposed_Target_State_Restore,value:"Restore"}],this.statusElementsList=[{label:S.CHG_GOV_Proposed_ProposalStatus_NotStarted,value:"notStartedKey"},{label:S.CHG_GOV_Proposed_ProposalStatus_Started,value:"startedKey"},{label:S.CHG_GOV_Proposed_ProposalStatus_Partial,value:"partialKey"},{label:S.CHG_GOV_Proposed_ProposalStatus_Complete,value:"completedKey"},{label:S.CHG_GOV_Proposed_ProposalStatus_Rejected,value:"rejectedKey"}],this.subscribeToPlatformEvents()},subscribeToPlatformEvents:function(){var e=this;u.unsubscribe("ECM_GOV_Proposed_Search_Native:"+(widget?widget.id:"")),u.subscribe("ECM_GOV_Proposed_Search_Native:"+(widget?widget.id:""),function(t){var i=t.split("~")[0].split(",");i[0].contains("uuid:")?v.warn(S.CHG_GOV_OrchestrateCA_Unsupported_Message):e.fieldElement.proposed.value={icon:"",id:i[0],label:i[2],maturity:"",name:i[1],owner:"",revision:i[3],sourceid:"3DSpace",subIcon:"",subLabel:"",type:i[4]}})},getHeading:function(){return"add"==this.mode?S.CHG_GOV_Proposed_Define_Title:"edit"==this.mode?S.CHG_GOV_Proposed_Edit_Title:"massEdit"==this.mode?S.CHG_GOV_Proposed_MassUpdate_Title:void 0},getNameLabelFilter:function(){var e=w.inherit({isDataFiltered:function(e){var t=e.options.value.name,i=e.options.value.label,n=this.filterModel;if(n&&""===n.text)return!1;if(n&&n.text&&(t||i)){var o=n.text.split("*"),a=!0,s=!0;return o.forEach(function(e,n){a&&t&&-1==t.toLowerCase().indexOf(e.toLowerCase())&&(a=!1),s&&i&&-1==i.toLowerCase().indexOf(e.toLowerCase())&&(s=!1)}),!(a||s)}return!0},isEmpty:function(){return void 0===this.filterModel.text}});return UWA.clone(e)},parseSearchResultForAutoComplete:function(e){var t=this.modelForAutocomplete=new D;return this.modelForAutocomplete.getFilterManager().registerFilter("nameLabelFilter",this.getNameLabelFilter()),t.prepareUpdate(),e.forEach(function(e){var i=e.attributes,n={value:{label:"",icon:"",subLabel:"",subIcon:"",serviceBasedObjId:"",i3dx:"",id:"",type:"",maturity:"",owner:"",name:"",sourceid:"",revision:""}};i.forEach(function(e){if("resourceid"==e.name)n.value.serviceBasedObjId=e.value;else if("ds6w:i3dx"==e.name)n.value.i3dx=e.value;else if("ds6w:what/ds6w:type"==e.name)n.value.type=e.value;else if("ds6w:what/ds6w:status"==e.name)n.value.maturity=e.value;else if("ds6w:who/ds6w:responsible"==e.name)n.value.owner=e.value;else if("ds6w:label"==e.name)n.value.label=e.value;else if("name"==e.name)n.value.name=e.value;else if("preview_url"==e.name)n.value.icon=e.value;else if("type_icon_url"==e.name)n.value.subIcon=e.value;else if("sourceid"==e.name){var t=e.value;t=t&&t.includes(":")?t.split(":")[0]:t,n.value.sourceid=t}else"ds6wg:revision"==e.name&&(n.value.revision=e.value)}),n.value.subLabel=n.value.name+" "+n.value.revision,n.value.id=n.value.i3dx?n.value.i3dx:n.value.serviceBasedObjId;var o=new b({value:n.value});t.addChild(o)}),t.pushUpdate(),t},suggestionForProposed:function(e){var i=this;return new Promise(function(n,o){e=e.replace(/(^[*\s]+)|([*\s]+$)/g,"");var a=l.getGlobalVariable().proposedSearchType,s="";if("false"==l.getGlobalVariable().CHG_EnableNonChangeGovernedToCA){"string"==typeof a&&a.length>0&&(a=a.split(",")),"string"==typeof s&&s.length>0&&(s=s.split(","));var d="(";s&&s.length>0?(t.each(s,function(e,t){d+=0!==e?" OR ":"NOT(",d+='[ds6w:type]:"'+t.trim()+'"'}),d+=")"):t.each(a,function(e,t){0!==e&&(d+=" OR "),d+='[ds6w:type]:"'+t.trim()+'"'}),e="(([ds6w:label]:(*"+e+"*)) OR ([ds6w:identifier]:(*"+e+"*))) AND "+(d+=")")}else e="(([ds6w:label]:(*"+e+"*)) OR ([ds6w:identifier]:(*"+e+"*)))";var c={with_indexing_date:!0,with_nls:!1,label:"search proposed",locale:"en",select_predicate:["name","ds6w:label","ds6w:type","ds6wg:revision","ds6w:identifier","ds6w:responsible","ds6w:i3dx"],select_file:["icon","thumbnail_2d"],query:e,order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:l.getGlobalVariable().tenant,login:{"3dspace":{SecurityContext:l.getGlobalVariable().getSecurityContext()}}};c=JSON.stringify(c);var u={isfederated:!0};r.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",c,function(e){var t=[];e.results&&(t=i.parseSearchResultForAutoComplete.bind(i,e.results)),n(t)},function(e){e.type="error",o(e)},u)})},fetchAllowedOperation:async function(e,t){return await d.fetchAllowedOperation(e,t).catch(e=>{console.error(e),v.error(S.CHG_GOV_GET_PROPOSED_OPERATION_FAIL)})},proposedSelectionProcessing:async function(){var e=this.fieldElement.proposed.selectedItems;if(e){var t=[],i="";"edit"==this.mode&&this.selectedObject&&!Array.isArray(this.selectedObject)&&(i=this.selectedObject.proposedOperation);var n=e.options.value.sourceid,o={id:e.options.value.id,service:n&&n.includes(":")?n.split(":")[0]:n,type:e.options.value.type,environment:l.getGlobalVariable().tenant,proposedOperationOrg:i};t.push(o);var a,s,r=await this.fetchAllowedOperation(this.options.caID,t),d=r.data[0].default,c=!1,u=!1;if("add"==this.mode&&d.length>0){var p=d[0];"None"==p.operationName&&!p.activityName||"None"==p.operationName&&p.activityName&&"Modify"==p.activityName?a="None":"None"==p.operationName&&p.activityName&&"ChangeStatus"==p.activityName?(a="ChangeStatus",s=p.targetState,c=!0):"NewEvolution"==p.operationName?(a="NewEvolution",u=!0):"NewVersion"==p.operationName?a="NewVersion":"NewMinorVersion"==p.operationName&&(a="NewMinorVersion")}else"ChangeStatus"==(a=this.selectedObject.computedOperation)?(s=this.selectedObject.targetState,c=!0):"NewEvolution"==a&&(u=!0);var g=r.data[0].allowed,h=[],m=[],C=!1,f=!1,D=0,b=0,w=0;g&&0!=g.length||v.warn(S.CHG_GOV_Proposed_No_Allowed_Operation),g.forEach(function(e,t){var i={label:"",icon:"",value:""},n={label:"",value:""};!C&&("None"==e.operationName&&!e.activityName||"None"==e.operationName&&e.activityName&&"Modify"==e.activityName)?(C=!0,i.label=S.CHG_GOV_Proposed_Activity_None,i.icon="pencil",i.value="None",h.push(i)):"None"==e.operationName&&e.activityName&&"ChangeStatus"==e.activityName?(f||(f=!0,i.label=S.CHG_GOV_Proposed_Activity_ChangeStatus,i.icon="collaborative-lifecycle-management",i.value="ChangeStatus",h.push(i)),"Release"==e.targetState?(n.label=S.CHG_GOV_Proposed_Target_State_Release,n.value="Release"):"Obsolete"==e.targetState?(n.label=S.CHG_GOV_Proposed_Target_State_Obsolete,n.value="Obsolete"):"Restore"==e.targetState&&(n.label=S.CHG_GOV_Proposed_Target_State_Restore,n.value="Restore"),s==n.value&&(b=w),m.push(n),w++):"NewEvolution"==e.operationName?(i.label=S.CHG_GOV_Proposed_Activity_NewEvolution,i.icon="flow-branch-add",i.value="NewEvolution",h.push(i)):"NewVersion"==e.operationName?(i.label=S.CHG_GOV_Proposed_Activity_NewVersion,i.icon="flow-line-add",i.value="NewVersion",h.push(i)):"NewMinorVersion"==e.operationName&&(i.label=S.CHG_GOV_Proposed_Activity_NewMinorVersion,i.icon="flow-line-add",i.value="NewMinorVersion",h.push(i)),a==i.value&&(D=t)}),this.formField.reasonForChange.show(),this.fieldElement.change.elementsList=h,this.fieldElement.change.selectedIndex=D,this.fieldElement.targetState.elementsList=m,this.formField.change.show(),this.formField.changeDetails.show(),this.formField.details.show(),c&&(this.fieldElement.targetState.selectedIndex=b,this.formField.targetState.show()),u&&this.formField.prefix.show(),this.enableAddButtons()}else this.clearForm()},updateForOperation:function(){"ChangeStatus"==this.fieldElement.change.value?(this.formField.prefix.hide(),this.formField.targetState.show()):"NewEvolution"==this.fieldElement.change.value?(this.formField.prefix.show(),this.formField.targetState.hide()):(this.formField.prefix.hide(),this.formField.targetState.hide())},searchProposedHandler:function(e){if(l.getGlobalVariable().isNative){f.DispatchEventToWin("Add_Proposed","NewProposedChange")}else{let n={condition:"searchProposed",extendedQuery:""};const o=C.activateSearch();l.getGlobalVariable().is3DSpace&&o.socket.subscribeServer("SearchComServer",getTopWindow());var t=l.getGlobalVariable().proposedSearchType,i=!1;"false"==l.getGlobalVariable().CHG_EnableNonChangeGovernedToCA?i=!0:t=!1,C.search(S.CHG_GOV_Proposed_Search,t,e.OnSearchProposedComplete.bind(e),"proposedChange",o,void 0,void 0,n,void 0,"",i)}},OnSearchProposedComplete:function(e){this.fieldElement.proposed.value={icon:e[0][4],id:e[0][8]?e[0][8]:e[0][0],label:e[0][5],maturity:"",name:e[0][1],owner:"",revision:e[0][6],sourceid:e[0][7]&&e[0][7].includes(":")?e[0][7].split(":")[0]:e[0][7],subIcon:e[0][4],subLabel:"",type:e[0][2]}},getBody:function(){var e=this,t=UWA.createElement("div",{id:"proposedFormBody",class:"proposedFormBody"}),i={id:"",label:"",required:!1,fieldElement:void 0};i.id="proposed",i.label=S.CHG_GOV_Proposed_ProposedItem,i.required=!0;var r=[],l=e.fieldElement.proposed=new s({elementsTree:function(t){return e.suggestionForProposed(t)},placeholder:S.CHG_GOV_Proposed_Proposed_Placeholder,multiSearchMode:!1,minLengthBeforeSearch:3,allowFreeInputFlag:!1,keepSearchResultsFlag:!1,filterCB:function(t){e.modelForAutocomplete&&e.modelForAutocomplete.setFilterModel({value:{filterId:"nameLabelFilter",filterModel:{text:t}}})},columnOptions:{autoRowHeightFlag:!0,typeRepresentation:"detailedInfo"}});l.addEventListener("change",function(){e.proposedSelectionProcessing()});var d=new m({displayStyle:"lite",label:"Search Proposed Change",icon:{iconName:"search",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1});if(d.getContent().setStyle("margin-left","10px"),d.addEventListener("buttonclick",function(){e.searchProposedHandler(e)}),r.push(l),"add"==this.mode?r.push(d):"edit"==this.mode&&(e.fieldElement.proposed.value={icon:this.selectedObject.icon,id:this.selectedObject.id,label:this.selectedObject.title,maturity:this.selectedObject.maturityNLS,name:this.selectedObject.name,owner:this.selectedObject.ownerFullName,revision:this.selectedObject.revision,sourceid:this.selectedObject.serviceName,subIcon:this.selectedObject.icon,subLabel:"",type:this.selectedObject.type},e.fieldElement.proposed.disabled=!0),i.fieldElement=r,(e.formField.proposed=e.getFormField(i)).inject(t),i.id="reasonForChange",i.label=S.CHG_GOV_Proposed_ReasonForChange,i.required=!1,i.fieldElement=e.fieldElement.reasonForChange=new o({value:this.selectedObject&&this.selectedObject.reasonForChange?this.selectedObject.reasonForChange:"",nbRows:4,requiredFlag:!1,resizableFlag:"vertical",placeholder:S.CHG_GOV_Proposed_ReasonForChange_Placeholder,newLineMode:"enter"}),(e.formField.reasonForChange=e.getFormField(i)).inject(t),"massEdit"==this.mode&&this.elementsList.unshift({label:S.CHG_GOV_Proposed_NoChange,value:"noChange"}),i.id="change",i.label=S.CHG_GOV_Proposed_Change,i.required=!0,i.fieldElement=e.fieldElement.change=new a({elementsList:this.elementsList,requiredFlag:!0,enableSearchFlag:!1}),e.fieldElement.change.addEventListener("change",e.updateForOperation.bind(e)),(e.formField.change=e.getFormField(i)).inject(t),i.id="changeDetails",i.label=S.CHG_GOV_Proposed_ChangeDetails,i.required=!1,i.fieldElement=void 0,(e.formField.changeDetails=e.getFormField(i)).inject(t),i.id="targetState",i.label=S.CHG_GOV_Proposed_TargetState,i.required=!0,i.fieldElement=e.fieldElement.targetState=new a({elementsList:this.targetStateElementsList,requiredFlag:!0,enableSearchFlag:!1}),(e.formField.targetState=e.getFormField(i)).inject(t),i.id="prefix",i.label=S.CHG_GOV_Proposed_Prefix,i.required=!1,i.fieldElement=e.fieldElement.prefix=new n({value:this.selectedObject&&this.selectedObject.evolutionPrefix?this.selectedObject.evolutionPrefix:"",requiredFlag:!1,placeholder:S.CHG_GOV_Proposed_Prefix_Placeholder}),i.fieldElement.getContent().setStyle("width","100%"),(e.formField.prefix=e.getFormField(i)).inject(t),i.id="details",i.label=S.CHG_GOV_Proposed_Details,i.required=!1,i.fieldElement=e.fieldElement.details=new o({value:this.selectedObject&&this.selectedObject.computedActivityWhy?this.selectedObject.computedActivityWhy:"",nbRows:4,requiredFlag:!1,resizableFlag:"vertical",placeholder:S.CHG_GOV_Proposed_Details_Placeholder,newLineMode:"enter"}),(e.formField.details=e.getFormField(i)).inject(t),"edit"==this.mode||"massEdit"==this.mode){var u=0;"massEdit"==this.mode?this.statusElementsList.unshift({label:S.CHG_GOV_Proposed_NoChange,value:"noChangeKey"}):this.statusElementsList.forEach(function(t,i){t.value==e.selectedObject.proposedStatus&&(u=i)}),i.id="status",i.label=S.CHG_GOV_Proposed_ProposalStatus,i.required=!1,i.fieldElement=e.fieldElement.status=new a({elementsList:this.statusElementsList,requiredFlag:!1,enableSearchFlag:!1}),e.fieldElement.status.selectedIndex=u,(e.formField.status=e.getFormField(i)).inject(t)}return"massEdit"==this.mode?(e.formField.proposed.hide(),e.formField.targetState.hide(),e.formField.prefix.hide()):(e.formField.reasonForChange.hide(),e.formField.change.hide(),e.formField.changeDetails.hide(),e.formField.targetState.hide(),e.formField.prefix.hide(),e.formField.details.hide()),"add"==this.mode&&c.makeDroppable(t,this.dropHandler.bind(this)),t},getFormField:function(e){var t=UWA.createElement("div",{id:"formField"+e.id,class:"formField"}),i=UWA.createElement("div",{id:"fieldLabel"+e.id,class:"fieldLabel"}).inject(t);UWA.createElement("span",{id:"fieldText"+e.id,text:e.label,class:"fieldText"}).inject(i);if(e.required)UWA.createElement("span",{id:"fieldRequired"+e.id,text:"*",class:"fieldRequired"}).inject(i);if(e.fieldElement){var n=UWA.createElement("div",{id:"fieldElement"+e.id,class:"fieldElement"}).inject(t);Array.isArray(e.fieldElement)?(e.fieldElement.forEach(function(e){e.inject(n)}),n.setStyle("display","flex")):e.fieldElement.inject(n)}return t},getFooter:function(){var e=this,t=UWA.createElement("div",{id:"proposedFormFooter"}),n=e.buttons.add=new i({value:S.CHG_GOV_Proposed_Button_Add,className:"primary"});n.addEvent("onClick",function(){e.createHandler()});var o=e.buttons.addAnother=new i({value:S.CHG_GOV_Proposed_Button_AddAnother,className:"default"});o.addEvent("onClick",function(){e.createAnotherHandler()});var a=e.buttons.save=new i({value:S.CHG_GOV_Proposed_Button_Save,className:"primary"});return a.addEvent("onClick",function(){e.saveHandler()}),"add"==this.mode?(n.inject(t),o.inject(t)):a.inject(t),e.disableAddButtons(),t},dropHandler:function(e){let t=e[0].objectId,i=e[0].serviceId;("3DSPACE"!=(i=i&&i.includes(":")?i.split(":")[0]:i).toUpperCase()||t&&t.contains(":"))&&!e[0].i3dx?(v.warn(S.CHG_GOV_MISSING_INFO_WARNING),console.log("Objects with missing Service or i3dx information will be skipped"),console.log("Service: "+i+" objectId:"+t+"i3dx:"+e[0].i3dx)):this.fieldElement.proposed.value={id:e[0].i3dx?e[0].i3dx:e[0].objectId,label:e[0].displayName,maturity:"",name:e[0].displayName,owner:"",revision:"",sourceid:e[0].serviceId&&e[0].serviceId.includes(":")?e[0].serviceId.split(":")[0]:e[0].serviceId,subLabel:"",type:e[0].objectType}},enableAddButtons:function(){this.buttons.add.enable(),this.buttons.addAnother.enable()},disableAddButtons:function(){this.buttons.add.disable(),this.buttons.addAnother.disable()},getFormDataForAdd:function(){var e=this.fieldElement.proposed.selectedItems;return[{updateAction:"CONNECT",id:e.options.value.id,type:e.options.value.type,service:e.options.value.sourceid,change:this.fieldElement.change.value,reasonForChange:this.fieldElement.reasonForChange.value,details:this.fieldElement.details.value,targetState:this.fieldElement.targetState.value,prefix:this.fieldElement.prefix.value}]},getFormDataForEdit:function(){var e,t,i=this,n=[],o=[];return Array.isArray(i.selectedObject)?o=i.selectedObject:o.push(i.selectedObject),"startedKey"==i.fieldElement.status.value?t="Started":"notStartedKey"==i.fieldElement.status.value?t="Not Started":"partialKey"==i.fieldElement.status.value?t="Partial":"completedKey"==i.fieldElement.status.value?t="Complete":"rejectedKey"==i.fieldElement.status.value?t="Rejected":"noChangeKey"==i.fieldElement.status.value&&(t="noChange"),o.forEach(function(o){e={updateAction:"MODIFY",id:o.id,type:o.type,service:o.serviceName,proposedOperationOrg:o.proposedOperation,computedOperationOrg:o.computedOperation,targetStateOrg:o.targetState,prefixOrg:o.evolutionPrefix,proposedOperation:i.fieldElement.change.value,reasonForChange:i.fieldElement.reasonForChange.value,details:i.fieldElement.details.value,targetState:i.fieldElement.targetState.value?i.fieldElement.targetState.value:"",prefix:i.fieldElement.prefix.value,proposedStatus:t},n.push(e)}),n},createHandler:function(){var e=this.getFormDataForAdd();this.validateForm(e)&&(h.getDependency("applicationChannel").publish({event:"triptych-hide-panel",data:"right"}),u.publish("ECM_GOV_Proposed_Add:"+(widget?widget.id:""),e))},createAnotherHandler:function(){var e=this.getFormDataForAdd();this.validateForm(e)&&(u.publish("ECM_GOV_Proposed_Add:"+(widget?widget.id:""),e),this.clearForm())},saveHandler:function(){var e=this.getFormDataForEdit();this.validateForm(e)&&(h.getDependency("applicationChannel").publish({event:"triptych-hide-panel",data:"right"}),u.publish("ECM_GOV_Proposed_Edit:"+(widget?widget.id:""),e))},validateForm:function(e){return e&&e.length>0?!(e[0]&&!e[0].change&&"add"==this.mode)||(v.error(S.CHG_GOV_Proposed_Mandatory_Change),!1):(console.log("Something is wrong"),!1)},clearForm:function(){this.fieldElement.proposed.selectedItems=void 0,this.fieldElement.change.elementsList=[],this.fieldElement.reasonForChange.value="",this.fieldElement.targetState.elementsList=[],this.fieldElement.prefix.value="",this.fieldElement.details.value="",this.formField.reasonForChange.hide(),this.formField.change.hide(),this.formField.changeDetails.hide(),this.formField.details.hide(),this.formField.targetState.hide(),this.formField.prefix.hide(),this.disableAddButtons()}})}),define("DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper",["DS/Core/PointerEvents","DS/Utilities/TouchUtils","DS/ENOXWelcomePanel/js/ENOXWelcomePanel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o,a,s){"use strict";var r=function(){};return r.prototype.init=function(e,t,o){this._applicationChannel=e;var r=[];0==s.getGlobalVariable().isNative&&(r.push({id:n.PATH_RECENTY_OPENED,text:a.CHG_GOV_Welcome_Activity_Recent,fonticon:"clock",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_Recent,category:"View"}),r.push({id:n.PATH_OPEN_CHANGE_ORDER,text:a.CHG_GOV_Welcome_Activity_Open_Change_Orders,fonticon:"open",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_Open_Change_Orders,category:"View"}),"true"==s.getGlobalVariable().CHG_INVESTIGATION_REQUEST&&r.push({id:n.PATH_MY_INVESTIGATION_REQUESTS,text:a.CHG_GOV_Welcome_Activity_My_Investigation_Requests,fonticon:"investigation-request",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_My_Investigation_Requests,category:"View"}),r.push({id:n.PATH_MY_CHANGE_REQUESTS,text:a.CHG_GOV_Welcome_Activity_My_Change_Requests,fonticon:"change-request",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_My_Change_Requests,category:"View"}),r.push({id:n.PATH_MY_CHANGE_ORDERS,text:a.CHG_GOV_Welcome_Activity_My_Change_Orders,fonticon:"change-order",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_My_Change_Orders,category:"View"})),r.push({id:n.PATH_MY_CHANGE_ACTIONS,text:a.CHG_GOV_Welcome_Activity_My_Change_Actions,fonticon:"change-action",className:"action-new",tooltip:a.CHG_GOV_Welcome_Activity_My_Change_Actions,category:"View"});var l=[];"true"==s.getGlobalVariable().CHG_INVESTIGATION_REQUEST&&l.push({id:n.PATH_NEW_INVESTIGATION_REQUEST,text:a.CHG_GOV_Welcome_Activity_New_Investigation_Request,fonticon:"investigation-request-add",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_New_Investigation_Request,category:"View"}),0==s.getGlobalVariable().isNative&&(l.push({id:n.PATH_NEW_CHANGE_REQUEST,text:a.CHG_GOV_Welcome_Activity_New_Change_Request,fonticon:"change-request-add",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_New_Change_Request,category:"View"}),("true"===s.getGlobalVariable().isFullLicence&&!1===s.getGlobalVariable().isNative||"true"===s.getGlobalVariable().isDerivativeLicense&&!1===s.getGlobalVariable().isNative)&&l.push({id:n.PATH_NEW_CHANGE_ORDER,text:a.CHG_GOV_Welcome_Activity_New_Change_Order,fonticon:"change-order-add",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_New_Change_Order,category:"View"})),l.push({id:n.PATH_NEW_CHANGE_ACTION,text:a.CHG_GOV_Welcome_Activity_New_Change_Action,fonticon:"change-action-add",className:"action-new",isNotHighlightable:!0,tooltip:a.CHG_GOV_Welcome_Activity_New_Change_Action,category:"View"});var d=[{id:"appHeader",title:a.CHG_GOV_Welcome_Activity_AppHeader,actions:[{id:"appInfo",text:a.CHG_GOV_Welcome_Activity_AppIntro,fonticon:"dummy",className:"chg-welcome-panel-appInfo"}]},{id:"quick_access",title:a.CHG_GOV_Welcome_Activity_QuickAccess,actions:r},{id:"start_activities",title:a.CHG_GOV_Welcome_Activity_StartActivities,actions:l}];("ENOWCHA_AP"==widget.getValue("appId")||s.getGlobalVariable().isNative)&&(d[0].title=a.CHG_EXE_Welcome_Activity_AppHeader),new i({collapsed:!1,title:"chgGov",notifications:[],activities:d,parentContainer:o,modelEvents:e}).render(),this._subscribeToEvents()},r.prototype._subscribeToEvents=function(){var i=this;this._applicationChannel.subscribe({event:"welcome-panel-action-selected"},function(i){if(i&&"home"===i.id?o.navigate(n.ROUTE_LANDING_PAGE):i&&i.id===n.PATH_MY_CHANGE_ORDERS?o.navigate(n.ROUTE_MY_CHANGE_ORDERS,{data:"from welcomepanel"}):i&&i.id===n.PATH_RECENTY_OPENED?o.navigate(n.ROUTE_RECENTY_OPENED,{data:"from welcomepanel"}):i&&i.id===n.PATH_MY_CHANGE_REQUESTS?o.navigate(n.ROUTE_MY_CHANGE_REQUESTS,{data:"from welcomepanel"}):i&&i.id===n.PATH_MY_INVESTIGATION_REQUESTS?o.navigate(n.ROUTE_MY_INVESTIGATION_REQUESTS,{data:"from welcomepanel"}):i&&i.id===n.PATH_MY_CHANGE_ACTIONS&&o.navigate(n.ROUTE_MY_CHANGE_ACTIONS,{data:"from welcomepanel"}),t.getTouchMode()){var a=new MouseEvent(e.POINTERDOWN,{bubbles:!1});document.dispatchEvent(a)}}),this._applicationChannel.subscribe({event:"welcome-panel-select-action"},function(e){e&&e.id===n.PATH_MY_CHANGE_ORDERS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_ORDERS,label:a.CHG_GOV_Welcome_Activity_My_Change_Orders}}):e&&e.id===n.PATH_RECENTY_OPENED?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_RECENTY_OPENED,label:a.CHG_GOV_Welcome_Activity_Recent}}):e&&e.id===n.PATH_MY_CHANGE_REQUESTS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_REQUESTS,label:a.CHG_GOV_Welcome_Activity_My_Change_Requests}}):e&&e.id===n.PATH_MY_CHANGE_ACTIONS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_CHANGE_ACTIONS,label:a.CHG_GOV_Welcome_Activity_My_Change_Actions}}):e&&e.id===n.PATH_MY_INVESTIGATION_REQUESTS?i._applicationChannel.publish({event:"topbar-show-title",data:{id:n.ROUTE_MY_INVESTIGATION_REQUESTS,label:a.CHG_GOV_Welcome_Activity_My_Investigation_Requests}}):e&&(e.id,n.PATH_CO_IDCard)})},r}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"revision"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-relatedScope-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-relatedScope-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-relatedScope-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-relatedScope-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCRAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRAddMemberView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";var v={getDataToBuildAddMemberPanel:function(e){v.teamlayoutModel=e.model,v.id=e.id,v.objectTitle=e.title,v.options=e,v.modelForChangeCoordinator=new c,v.modelForAssignee=new c,v.modelForApprover=new c,v.modelForFollower=new c,this.filterByTrigramHandler()},setDataForAddMember:function(e){var t,o=[],s=[],r=[],l=[];return o.push({name:"changeCoordinator",changeCoordinatorTreeDocument:v.modelForChangeCoordinator,allowMultiple:!1,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_CCO",placeholder:g.CHG_Add_Member_Type_To_Search,customFilterMessage:g.CHG_No_Search_found,activateSearch:n.activateSearch,search:n.search,disabled:v.changecordinatorDivDisable,visibleFlag:!0,supportDragAndDrop:!0}),s.push({name:"assignee",assigneeTreeDocument:v.modelForAssignee,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Assignee",placeholder:g.CHG_Add_Member_Type_To_Search,customFilterMessage:g.CHG_No_Search_found}),r.push({name:"approver",approverTreeDocument:v.modelForApprover,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Approver",placeholder:g.CHG_Add_Member_Type_To_Search,customFilterMessage:g.CHG_No_Search_found,disabled:v.approverDivDisable}),l.push({name:"follower",followerTreeDocument:v.modelForFollower,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Follower",placeholder:g.CHG_Add_Member_Type_To_Search,customFilterMessage:g.CHG_No_Search_found}),t=[...o,...s,...r,...l],{title:g.CHG_Member_AddMember_Title,objectTitle:v.objectTitle,target:v.options.target,fields:t,addMemberSubmitHandler:this.addmember,searchFromModelAndUniqAndAdd:a.searchFromModelAndUniqAndAdd,getAdditionSwymPersonInfo:n.getAdditionSwymPersonInfo,getAdditionObjectInfo:n.getAdditionObjectInfo,activateSearch:n.activateSearch,search:n.search,teamlayoutModel:v.teamlayoutModel,makeDroppable:i.makeDroppable}},launchAddMemberPanel:function(){var e={commandInfo:{type:"Change Request",facet:"Members",action:"CR>Members>Add Member"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),v.changecordinatorDivDisable=!1,v.approverDivDisable=!1,1==t.isChangeCoordinatorConnected&&(v.changecordinatorDivDisable=!0),1==t.isRouteTemplateConnected&&(v.approverDivDisable=!0),v.updateAutoCompleteModelNew();var i=v.setDataForAddMember(),n=new m(i);(new C).buildAddMemberDialog(n)},updateAutoCompleteModelNew:function(){var e=r.getGlobalVariable().contextUser;let t={},i=v.teamlayoutModel.getChildren();for(let e=0;e<i.length;e++){let n=i[e].options.grid;t[n.id]=n.role}var n={categoryId:"changeCordinator",contextUser:e},o={categoryId:"assignee",contextUser:e},a={categoryId:"approver",contextUser:e},s={categoryId:"follower",contextUser:e};this.getMembersListForApprover(a),this.getMembersListForFollower(s),this.getMembersListForAssignee(o),this.getMembersListForChangeCoordinator(n)},getMembersListForChangeCoordinator:async function(e){let t={},i=v.teamlayoutModel.getChildren();for(let e=0;e<i.length;e++){let n=i[e].options.grid;t[n.id]=n.role}v.modelForChangeCoordinator.empty();let n=await s.getListCOMember(e);if(null!=n.length){n.length>999&&h.warn(g.CHG_Add_Member_Warning),v.modelForChangeCoordinator.prepareUpdate();for(var o=0;o<n.length;o++){let e,i=n[o].id;"person"===n[o].type.toLowerCase()&&(e=n[o].name+"("+n[o].identifier.toUpperCase()+")"),t.hasOwnProperty(i)&&(n[o].personRole=t[i]);var a=new u({label:n[o].name,value:{label:e,subLabel:n[o].personRole},name:n[o].name,identifier:n[o].identifier,type:n[o].type,id:n[o].id});v.modelForChangeCoordinator.addRoot(a)}v.modelForChangeCoordinator.pushUpdate()}},getMembersListForApprover:async function(e){v.modelForApprover.empty();let t=await s.getListCOMember(e);if(null!=t.length){t.length>1e3&&(v.autoCompleteApprover.placeholder=g.CHG_Add_Member_Type_Letters_To_Search,v.autoCompleteApprover.minLengthBeforeSearch=3),v.modelForApprover.prepareUpdate();for(var i=0;i<t.length;i++){var n=new u({label:t[i].name,value:{label:t[i].name},name:t[i].name,identifier:t[i].identifier,type:t[i].type,id:t[i].id});v.modelForApprover.addRoot(n)}v.modelForApprover.pushUpdate()}},getMembersListForFollower:async function(e){let t={},i=v.teamlayoutModel.getChildren();for(let e=0;e<i.length;e++){let n=i[e].options.grid;t[n.id]=n.role}v.modelForFollower.empty();let n=await s.getListCOMember(e);if(null!=n.length){v.modelForFollower.prepareUpdate();for(var o=0;o<n.length;o++){let e,i=n[o].id;if("person"===n[o].type.toLowerCase()?e=n[o].name+"("+n[o].identifier.toUpperCase()+")":"group"===n[o].type.toLowerCase()&&(e=n[o].name),!t.hasOwnProperty(i)||(n[o].personRole=t[i],1!=t[i].contains("Follower"))){var a=new u({label:n[o].name,value:{label:e,subLabel:n[o].personRole},name:n[o].name,identifier:n[o].identifier,type:n[o].type,id:n[o].id});v.modelForFollower.addRoot(a)}}v.modelForFollower.pushUpdate()}},getMembersListForAssignee:async function(e){let t={},i=v.teamlayoutModel.getChildren();for(let e=0;e<i.length;e++){let n=i[e].options.grid;t[n.id]=n.role}v.modelForAssignee.empty();let n=await s.getListCOMember(e);if(null!=n.length){n.length>1e3&&(v.autoCompleteAssignee.placeholder=g.CHG_Add_Member_Type_Letters_To_Search,v.autoCompleteAssignee.minLengthBeforeSearch=3),v.modelForAssignee.prepareUpdate();for(var o=0;o<n.length;o++){let e,i=n[o].id;if("person"===n[o].type.toLowerCase()?e=n[o].name+"("+n[o].identifier.toUpperCase()+")":"group"===n[o].type.toLowerCase()&&(e=n[o].name),!t.hasOwnProperty(i)||(n[o].personRole=t[i],1!=t[i].contains("Assignee"))){var a=new u({label:n[o].name,value:{label:e,subLabel:n[o].personRole},name:n[o].name,identifier:n[o].identifier,type:n[o].type,id:n[o].id});v.modelForAssignee.addRoot(a)}}v.modelForAssignee.pushUpdate()}},addmember:function(e,i,n,s){var r=v.id,l=t.makeUpdateMemberJson("CONNECT",e,i,n,s);o.updateChangeRequestMembers(r,l).then(function(e){var i=a.processedChangeRequestMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){for(var n=e.ChgCRMembersTreeModel.getChildren(),o=[],a=0;a<i.length;a++){var s=i[a];if("Route Template"!=s.type){"Coordinator"==s.role&&(t.isChangeCoordinatorConnected=!0);for(var r=s.id,l=!1,d=0;d<n.length;d++)if(r==n[d].options.grid.id){l=!0;break}if(1==l){e.ChgCRMembersTreeModel.prepareUpdate();var c=n[d].options.description,u="";if(s.role.includes(",")){var p=s.role.split(",");for(let e=0;e<p.length;e++)u+=", "+t.getRoleNLSValue(p[e].trim()),n[d].options.grid.roles.push(p[e].trim())}else u=", "+t.getRoleNLSValue(s.role),n[d].options.grid.roles.push(s.role);var g=n[d].options.grid.role,h=","+s.role;n[d].options.description=n[d].options.grid.roleList=c.concat(u),n[d].options.grid.role=g.concat(h),e.ChgCRMembersTreeModel.pushUpdate()}else o.push(s)}else o.push(s),t.isRouteTemplateConnected=!0}o.length>0&&e.addNodesInLayout(o)})})},filterByTrigramHandler:function(){v.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new p).getTrigramNameFilter()),v.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new p).getTrigramNameFilter()),v.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new p).getTrigramNameFilter()),v.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new p).getTrigramNameFilter())},dragAndDropHandler:function(){var e=v.options.target.querySelector("#memberFieldElementchangeCoordinator");i.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForChangeCoordinatorField:function(e){return e}};return v}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){let e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"severityNLS"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-CA-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-CA-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-CA-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-CA-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){let e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-context-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-context-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-context-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-context-tile-div"))&&(a.removeClassName("hideView"),a.removeClassName("nonVisible"),a.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/model/recents/ChgCORecentsTreeModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/TreeModel/BaseFilter","require"],function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=l.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(){this.treeDocument=null},setModelEvents:function(e){this._modelEvents=e},getModelEvents:function(){return this._modelEvents},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(e){var i=new n;this.setModelEvents(e);var o=new t({id:"RecentsSummary",dataModelSet:i});return this.setTreeDocument(o),o},loadRecentChangeOrderData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=r.createCustomNameField(e);e.chgObjName=t;var n=r.createCustomSeverity(e);e.sev=n;var o=r.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=o;var a=r.createCustomOwnerField(e);e.chgObjOwner=a;var s=e.name+" | "+e.ownerFullName,l=e.maturityNLS,d=r.getStatusBarIcons(e),c=r.statusbarIconsTooltips(e),u=r.getCustomTooltip(e);return new i({label:e.title,subLabel:s,description:l,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:d,statusbarIconsTooltips:c,customTooltip:u,useAsyncPreExpand:!0})},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",c)}})}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCOAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgAddMemberView","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";var v={getDataToBuildAddMemberPanel:function(e){v.teamlayoutModel=e.model,v.id=e.id,v.options=e,v.modelForChangeCoordinator=new u,v.modelForAssignee=new u,v.modelForApprover=new u,v.modelForFollower=new u,this.filterByTrigramHandler()},setDataForAddMember:function(e){var t,i=[],o=[],s=[],r=[];return i.push({name:"changeCoordinator",changeCoordinatorTreeDocument:v.modelForChangeCoordinator,allowMultiple:!1,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_CCO",placeholder:h.CHG_Add_Member_Type_To_Search,customFilterMessage:h.CHG_No_Search_found,activateSearch:n.activateSearch,search:n.search,disabled:!0,visibleFlag:!0}),o.push({name:"assignee",assigneeTreeDocument:v.modelForAssignee,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Assignee",placeholder:h.CHG_Add_Member_Type_To_Search,customFilterMessage:h.CHG_No_Search_found}),s.push({name:"approver",approverTreeDocument:v.modelForApprover,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Approver",placeholder:h.CHG_Add_Member_Type_To_Search,customFilterMessage:h.CHG_No_Search_found}),r.push({name:"follower",followerTreeDocument:v.modelForFollower,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Follower",placeholder:h.CHG_Add_Member_Type_To_Search,customFilterMessage:h.CHG_No_Search_found}),t=[...i,...o,...s,...r],{title:"Add Member",target:v.options.target,fields:t,addMemberSubmitHandler:this.addmember,searchFromModelAndUniqAndAdd:a.searchFromModelAndUniqAndAdd,getAdditionSwymPersonInfo:n.getAdditionSwymPersonInfo,getAdditionObjectInfo:n.getAdditionObjectInfo,activateSearch:n.activateSearch,search:n.search,teamlayoutModel:v.teamlayoutModel}},launchAddMemberPanel:function(){var e={commandInfo:{type:"Change Request",facet:"Members",action:"CR>Members>Add Member"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),v.updateAutoCompleteModelNew();var t=v.setDataForAddMember(),i=new m(t);(new C).buildAddMemberDialog(i)},updateAutoCompleteModelNew:function(){var e=r.getGlobalVariable().contextUser;let t={},i=v.teamlayoutModel.getChildren();for(let e=0;e<i.length;e++){let n=i[e].options.grid;t[n.id]=n.role}var n={categoryId:"changeCordinator",contextUser:e},o={categoryId:"assignee",contextUser:e},a={categoryId:"approver",contextUser:e},s={categoryId:"follower",contextUser:e};this.getMembersListForApprover(a),this.getMembersListForFollower(s),this.getMembersListForAssignee(o),this.getMembersListForChangeCoordinator(n)},getMembersListForChangeCoordinator:async function(e){let t={},i=v.teamlayoutModel.getChildren();for(let e=0;e<i.length;e++){let n=i[e].options.grid;t[n.id]=n.role}v.modelForChangeCoordinator.empty();let n=await s.getListCOMember(e);if(null!=n.length){n.length>999&&l.warn(h.CHG_Add_Member_Warning),v.modelForChangeCoordinator.prepareUpdate();for(var o=0;o<n.length;o++){let e,i=n[o].id;"person"===n[o].type.toLowerCase()&&(e=n[o].name+"("+n[o].identifier.toUpperCase()+")"),t.hasOwnProperty(i)&&(n[o].personRole=t[i]);var a=new p({label:n[o].name,value:{label:e,subLabel:n[o].personRole},name:n[o].name,identifier:n[o].identifier,type:n[o].type,id:n[o].id});v.modelForChangeCoordinator.addRoot(a)}v.modelForChangeCoordinator.pushUpdate()}},getMembersListForApprover:async function(e){v.modelForApprover.empty();let t=await s.getListCOMember(e);if(null!=t.length){t.length>1e3&&(v.autoCompleteApprover.placeholder=h.CHG_Add_Member_Type_Letters_To_Search,v.autoCompleteApprover.minLengthBeforeSearch=3),v.modelForApprover.prepareUpdate();for(var i=0;i<t.length;i++){var n=new p({label:t[i].name,value:{label:t[i].name},name:t[i].name,identifier:t[i].identifier,type:t[i].type,id:t[i].id});v.modelForApprover.addRoot(n)}v.modelForApprover.pushUpdate()}},getMembersListForFollower:async function(e){let t={},i=v.teamlayoutModel.getChildren();for(let e=0;e<i.length;e++){let n=i[e].options.grid;t[n.id]=n.role}v.modelForFollower.empty();let n=await s.getListCOMember(e);if(null!=n.length){v.modelForFollower.prepareUpdate();for(var o=0;o<n.length;o++){let e,i=n[o].id;if("person"===n[o].type.toLowerCase()?e=n[o].name:"group"===n[o].type.toLowerCase()&&(e=n[o].name),!t.hasOwnProperty(i)||(n[o].personRole=t[i],1!=t[i].contains("Follower"))){var a=new p({label:n[o].name,value:{label:e,subLabel:n[o].personRole},name:n[o].name,identifier:n[o].identifier,type:n[o].type,id:n[o].id});v.modelForFollower.addRoot(a)}}v.modelForFollower.pushUpdate()}},getMembersListForAssignee:async function(e){let t={},i=v.teamlayoutModel.getChildren();for(let e=0;e<i.length;e++){let n=i[e].options.grid;t[n.id]=n.role}v.modelForAssignee.empty();let n=await s.getListCOMember(e);if(null!=n.length){n.length>1e3&&(v.autoCompleteAssignee.placeholder=h.CHG_Add_Member_Type_Letters_To_Search,v.autoCompleteAssignee.minLengthBeforeSearch=3),v.modelForAssignee.prepareUpdate();for(var o=0;o<n.length;o++){let e,i=n[o].id;if("person"===n[o].type.toLowerCase()?e=n[o].name:"group"===n[o].type.toLowerCase()&&(e=n[o].name),!t.hasOwnProperty(i)||(n[o].personRole=t[i],1!=t[i].contains("Assignee"))){var a=new p({label:n[o].name,value:{label:e,subLabel:n[o].personRole},name:n[o].name,identifier:n[o].identifier,type:n[o].type,id:n[o].id});v.modelForAssignee.addRoot(a)}}v.modelForAssignee.pushUpdate()}},addmember:function(e,i,n,s){var r=v.id,l=t.makeUpdateMemberJson("CONNECT",e,i,n,s);o.updateChangeOrderMembers(r,l).then(function(e){var i=a.processedChangeOrderMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){for(var n=e.ChgMembersTreeModel.getChildren(),o=[],a=0;a<i.length;a++){var s=i[a];if("Route Template"!=s.type){"Coordinator"==s.role&&(t.isChangeCoordinatorConnected=!0);for(var r=s.id,l=!1,d=0;d<n.length;d++)if(r==n[d].options.grid.id){l=!0;break}if(1==l){e.ChgMembersTreeModel.prepareUpdate();var c=n[d].options.description;let t=s.role,i="";if(t.includes(",")){let e=t.split(",");for(let t=0;t<e.length;t++)"Coordinator"==e[t].trim()?i+=", "+h.CHG_Member_Role_ChangeCoordinator:"Assignee"==e[t].trim()?i+=", "+h.CHG_Member_Role_Assignee:i+=", "+h.CHG_Member_Role_Follower,n[d].options.grid.roles.push(e[t].trim())}else i+="Coordinator"==t?", "+h.CHG_Member_Role_ChangeCoordinator:"Assignee"==t?", "+h.CHG_Member_Role_Assignee:", "+h.CHG_Member_Role_Follower,n[d].options.grid.roles.push(t);var u=i,p=n[d].options.grid.role,g=", "+s.role;n[d].options.description=n[d].options.grid.roleList=c.concat(u),n[d].options.grid.role=p.concat(g),e.ChgMembersTreeModel.pushUpdate()}else o.push(s)}else o.push(s),t.isRouteTemplateConnected=!0}o.length>0&&e.addNodesInLayout(o)})})},filterByTrigramHandler:function(){v.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new g).getTrigramNameFilter()),v.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new g).getTrigramNameFilter()),v.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new g).getTrigramNameFilter()),v.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new g).getTrigramNameFilter())}};return v}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"revision"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-CO-relatedScope-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-CO-relatedScope-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-CO-relatedScope-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-CO-relatedScope-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(e){let t=!1;void 0!==e&&"true"===e.AddImpactBasis&&"true"===e.RemoveImpactBasis&&(t=!0);let n=[];return n.push(o.getColumnDefinition({dataIndex:"titleTree"})),n.push(o.getColumnDefinition({dataIndex:"typeNLS"})),n.push(o.getColumnDefinition({dataIndex:"name"})),n.push(o.getColumnDefinition({dataIndex:"revision"})),n.push(o.getColumnDefinition({dataIndex:"reasonForChange",editableFlag:t,massUpdateAllowedFlag:t})),n.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),n.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),i.getGlobalVariable().is3DSpace&&(n[0].allowUnsafeHTMLContent=!0,n[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),n},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-impactBasis-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-impactBasis-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-impactBasis-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-impactBasis-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridCol",["DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/TreeDocument"],function(e,t,i,n,o,a){"use strict";var s=Object.create(null);return s.getColumns=function(){var n=[];return n.push(t.getColumnDefinition({dataIndex:"titleTree"})),n.push(t.getColumnDefinition({dataIndex:"name"})),n.push(t.getColumnDefinition({dataIndex:"revision"})),n.push(t.getColumnDefinition({dataIndex:"maturityWithBadge"})),n.push({text:"Affected As",dataIndex:"affectedAsIR",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"141",filterId:"stringRegexp",filterModel:""},{dataIndex:"Disposition",text:"Disposition",children:[{text:"Name",dataIndex:"dispositionName",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:""},{text:"Revision",dataIndex:"dispositionRevision",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:""},{text:"Type",dataIndex:"dispositionType",editableFlag:!0,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",editionPolicy:"EditionOnOver",massUpdateAllowedFlag:!0,typeRepresentation:"typeForDisposition"},{dataIndex:"dispositionMaturity",ds6wIndexMapping:"ds6w:status",text:"Maturity State",typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel&&e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]&&e.nodeModel.options.grid.dispositionInformation[0].dispostionId){var i=e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState;return i=e.nodeModel.options.grid.dispositionInformation[0].dispositionPolicy+"."+i,t.getAndCreateMaturityClass(i,"wux-controls-label")}}},{dataIndex:"ApprovalStatus",text:i.getName(),visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],compareFunction:function(e,t){return i.compareApprovalStatus(e,t)},getCellValue:function(e){if(e.nodeModel&&e.nodeModel.options.grid.ApprovalStatus)return{icon:e.nodeModel.options.grid.ApprovalStatus.icon,label:e.nodeModel.options.grid.ApprovalStatus.label,func:e.nodeModel.options.grid.ApprovalStatus.func}}},{dataIndex:"approvers",text:o.CHG_GOV_Members_DataGrid_Approver,editableFlag:!0,typeRepresentation:"user",minLengthBeforeSearch:3,editionPolicy:"EditionOnOver",getCellSemantics:function(e){return{possibleValues:async function(i){let n=new a;if(e.nodeModel._options.grid.dispositionInformation[0]&&e.nodeModel._options.grid.dispositionInformation[0].dispostionId){let o=e.nodeModel._options.grid.approvers;return await t.getApproversSuggestions(i,["person","routetemplate"],void 0,n,o)}console.log("create disposition to add approvers")},placeholder:"type to search",minLengthBeforeSearch:3,allowMultipleValuesFlag:!0,viewOptions:{multipleValuesSeparator:" "}}}},{text:"Resolved by",dataIndex:"dispositionResolvedBy",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:""}]}),e.getGlobalVariable().is3DSpace&&(n[0].allowUnsafeHTMLContent=!0,n[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),n},s}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n){"use strict";var o=Object.create(null);return o.getColumns=function(){var t=[];return t.push(n.getColumnDefinition({dataIndex:"titleTree"})),t.push(n.getColumnDefinition({dataIndex:"typeNLS"})),t.push(n.getColumnDefinition({dataIndex:"name"})),t.push(n.getColumnDefinition({dataIndex:"revision"})),t.push(n.getColumnDefinition({dataIndex:"maturityWithBadge"})),t.push(n.getColumnDefinition({dataIndex:"collabspaceNLS"})),t.push(n.getColumnDefinition({dataIndex:"organizationNLS"})),t.push(n.getColumnDefinition({dataIndex:"reasonForChange",editableFlag:!0})),t.push({text:e.CHG_GOV_DataGrid_Column_ImpactAnalysis,dataIndex:"countImpactAnalysis",editableFlag:!1,typeRepresentation:"url",filterId:"number",filterModel:"",getCellValue:function(e){if(e.nodeModel){return{label:e.nodeModel.getAttributeValue("countImpactAnalysis")}}}}),t.push(n.getColumnDefinition({dataIndex:"ownerFullName"})),i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),t},o.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-affectedItems-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".affectedItemsTileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-affectedItems-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".affectedItemsTileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},o}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMemberFilterLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMemberFilterView","require"],function(e,t){"use strict";var i={createMemberFilter:function(t){i.teamlayoutModel=t.model,new e({events:{memberFilterKeyUp:function(e){i.enteredText=e.target.value;var t={filteringMode:"name",text:i.enteredText};i.filterCollectionAndUpdateUI(t)},memberRoleFilter:function(e){"option1"!=e.target.value&&(i.enteredText=e.target.value);var t={filteringMode:"role",text:i.enteredText?i.enteredText:"",contributorInclude:!1,reviewInclude:!1,followInclude:!1},n=document.getElementById("allToggle"),o=document.getElementById("contributorToggle");o&&o.checked&&(t.contributorInclude=!0);var a=document.getElementById("revMemToggle");a&&a.checked&&(t.reviewInclude=!0);var s=document.getElementById("followMemToggle");s&&s.checked&&(t.followInclude=!0),0==t.contributorInclude&&0==t.reviewInclude&&0==t.followInclude||1==t.contributorInclude&&1==t.reviewInclude&&1==t.followInclude||"allToggle"==e.target.id&&1==n.checked?(t.allInclude=!0,n.checked=!0,o.checked=!1,a.checked=!1,s.checked=!1):(t.allInclude=!1,n.checked=!1),i.filterCollectionAndUpdateUI(t)}}}).render().inject(t.target)},filterCollectionAndUpdateUI:function(e){var t=e.text;i.teamlayoutModel.setFilterModel({label:{filterId:"stringRegexp",filterModel:{condition1:{type:"contains",filter:t}}},role:{filterId:"stringRegexp"}});var n=i.teamlayoutModel.getFilterManager().getFilters().role,o={};0==e.allInclude&&(1==e.contributorInclude&&(o.condition1={type:"contains",filter:"contributor"}),1==e.reviewInclude&&(o.hasOwnProperty("condition1")?(o.operator="or",o.condition2={type:"contains",filter:"approver"}):o.condition1={type:"contains",filter:"approver"}),1==e.followInclude&&(o.hasOwnProperty("condition1")?(o.operator="or",o.condition2={type:"contains",filter:"follower"}):o.condition1={type:"contains",filter:"follower"}),n.filterModel=o)},launchFilterMemberPanel:function(){var e={commandInfo:{type:"Change Action",facet:"Members",action:"CA>Members>Filter"}};t("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var i=document.querySelector(".addmemberView"),n=document.querySelector(".memberfilterView"),o=document.querySelector(".content-member-grid-div"),a=document.querySelector(".content-member-tile-div");i.hide(),o.removeClassName("teamview-opaque"),a.removeClassName("teamview-opaque"),"block"==n.style.display?(n.hide(),o.setStyle("height","calc(100% - 45px)"),a.setStyle("height","calc(100% - 45px)")):(n.show(),o.setStyle("height","calc(100% - 165px)"),a.setStyle("height","calc(100% - 165px)"))}};return i}),define("DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsContextualMenu",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";var v={showRMBMenuOnGrid:function(e,t,i){return new Promise(function(n,o){var s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const r=s.map(e=>e.options.grid.id);var l=!1;s.length>1&&(l=!0);var d=[];d.push(a.createPropertyPushItem(r)),d.push(v.getRelationalExplorerMenu(e));var c=C("DS/ENOChgServices/scripts/services/ChgDataService"),u=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),p={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},D=u.openWith(p),b=null,w=[];w.push(D),l||("ChangeRequest"==s[0].options.grid.isKindOfType?(b=c.getChangeRequestUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(b)):"ChangeOrder"==s[0].options.grid.isKindOfType?(b=c.getChangeOrderUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(b)):"InvestigationRequest"==s[0].options.grid.isKindOfType?(b=c.getInvestigationRequestUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(b)):(b=c.getChangeActionUserAccess(e.cellInfos.nodeModel.options.grid.id),w.push(b))),Promise.all(w).then(function(o){if(o[0]&&d.push(o[0]),l)"true"==g.getGlobalVariable().isFullLicence&&d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),d.push(v.getTransferMenu(e)),"true"==g.getGlobalVariable().isFullLicence&&d.push(v.getDeleteMenu(e,t,i));else{if("ChangeOrder"==s[0].options.grid.isKindOfType){var a=o[1].data[0].dataelements;a=h.processAccessBitCO(a),(o[1]&&"true"==a.Promote||"true"==a.Demote)&&d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),o[1]&&"true"==a.TransferOwnership&&d.push(v.getTransferMenu(e)),"true"==a.Delete&&d.push(v.getDeleteMenu(e,t,i))}"ChangeRequest"==s[0].options.grid.isKindOfType&&(d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),o[1]&&"true"==o[1].data[0].dataelements.TransferOwnership&&d.push(v.getTransferMenu(e)),"true"==o[1].data[0].dataelements.Delete&&d.push(v.getDeleteMenu(e,t,i))),"ChangeAction"==s[0].options.grid.isKindOfType&&(d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),o[1]&&o[1].data[0]&&("true"==o[1].data[0].Transfer&&d.push(v.getTransferMenu(e)),"true"==o[1].data[0].Delete&&d.push(v.getDeleteMenu(e,t,i)))),"InvestigationRequest"==s[0].options.grid.isKindOfType&&(d.push(f.getMaturityMenu(e)),d.push(m.getCopyLink(s)),o[1]&&o[1].data[0]&&(o[1]&&"true"==o[1].data[0].dataelements.TransferOwnership&&d.push(v.getTransferMenu(e)),"true"==o[1].data[0].dataelements.Delete&&d.push(v.getDeleteMenu(e,t,i))))}n(d)})})},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:s.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++){var a=i[o].options.grid.id;n.push(a)}t.openRelationalExplorer(n)})}}}},getTransferMenu:function(e){return{type:"PushItem",title:s.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getDeleteMenu:function(e,t,i){return{type:"PushItem",title:s.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){for(var o=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],s=0;s<o.length;s++){var r=o[s],l={physicalid:r.options.grid.id,nodeName:r.options.grid.name,nodeTitle:r.options.grid.title};a.push(l)}n.deleteNodes(a,t,i)}}}},makeCopyLinkObject:function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:g.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},showNotification:function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=d,c.setNotificationManager(window.notifs)),a?c.inject(a):c.elements.container.isInjected()||c.inject(),window.notifs.addNotif(r)}};return v}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){let e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-CO-issue-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-CO-issue-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-CO-issue-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-CO-issue-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";let a=Object.create(null);return a.getColumns=function(){let e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"maturityNLS"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".toolbar-issue-grid-div .wux-ui-3ds-view-list"))&&o.addClassName("currentView"),(a=document.querySelector(".toolbar-issue-grid-div .wux-ui-3ds-view-small-tile"))&&a.removeClassName("currentView"),(s=document.querySelector(".content-issue-grid-div"))&&(s.removeClassName("hideView"),s.removeClassName("nonVisible"),s.addClassName("showView")),(r=document.querySelector(".content-issue-tile-div"))&&(r.removeClassName("showView"),r.addClassName("hideView"));else if("TileView"==i){var n,o,a,s,r;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".toolbar-issue-grid-div .wux-ui-3ds-view-list"))&&o.removeClassName("currentView"),(a=document.querySelector(".toolbar-issue-grid-div .wux-ui-3ds-view-small-tile"))&&a.addClassName("currentView"),(s=document.querySelector(".content-issue-grid-div"))&&(s.removeClassName("showView"),s.addClassName("hideView")),(r=document.querySelector(".content-issue-tile-div"))&&(r.removeClassName("hideView"),r.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var o={entries:[{id:"cmd_AI_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:n.custom_view_options}}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n),o.entries=o.entries.filter(e=>"changeAssessment"!=e.id);o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAAddMemberLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAAddMemberView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C){"use strict";var f={createAddMemberPanel:function(t){f.teamlayoutModel=t.model,f.id=t.id,new e({events:{searchAssignee:function(e){if(f.searchCategoty="Assignee",r.getGlobalVariable().isNative){let e="CHG_Add_Member",t={categoryId:"assignee",reviewerType:s.reviewerType.typeOfReviewer},i=JSON.stringify(t);l.DispatchEventToWin(e,i)}else{let e=n.activateSearch("Person","Contributors");n.search(m.CHG_Add_Member_Assignee,"Person",f.OnSearchComplete,"Contributors",e,void 0,"assignee")}},searchApprover:function(e){if(f.searchCategoty="Approver",r.getGlobalVariable().isNative){let e="CHG_Add_Member",t={categoryId:"reviewer",reviewerType:s.reviewerType.typeOfReviewer},i=JSON.stringify(t);l.DispatchEventToWin(e,i)}else{let e=n.activateSearch("Person","Contributors");n.search(m.CHG_Add_Member_Approver,"Person",f.OnSearchComplete,"Contributors",e,void 0,"reviewer")}},searchInformedUser:function(e){if(f.searchCategoty="Informed User",r.getGlobalVariable().isNative){let e="CHG_Add_Member",t={categoryId:"follower",reviewerType:s.reviewerType.typeOfReviewer},i=JSON.stringify(t);l.DispatchEventToWin(e,i)}else{var t=n.activateSearch("Person","Contributors");n.search(m.CHG_Add_Member_Follower,"Person",f.OnSearchComplete,"Contributors",t,void 0,"informedUser")}}}}).render().inject(t.target);var o=t.target.querySelector(".chg-add-member-assignee-field"),a=t.target.querySelector(".chg-add-member-approver-field"),d=t.target.querySelector(".chg-add-member-informed-user-field"),g=t.target.querySelector(".chg-add-member-button"),C=t.target.querySelector(".chg-add-member-assignee-field-container"),v=t.target.querySelector(".chg-add-member-approver-field-container"),D=t.target.querySelector(".chg-add-member-informed-user");i.makeDroppable(C,f.ExecuteDropForAssigneeField),i.makeDroppable(v,f.ExecuteDropForApproverField),i.makeDroppable(D,f.ExecuteDropForInformedUserField),f.myButtonPrimary=new c({label:m.CHG_Add_Member_Add,emphasize:"primary",disabled:!0}).inject(g);var b=new c({label:m.CHG_Add_Member_Cancel,emphasize:"secondary"}).inject(g);f.modelForApprover=new p,f.modelForFollower=new p,f.modelForAssignee=new p,f.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new h).getTrigramNameFilter()),f.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new h).getTrigramNameFilter()),f.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new h).getTrigramNameFilter()),f.autoCompleteAssignee=new u({elementsTree:f.modelForAssignee,placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){f.modelForAssignee.setFilterModel({value:{filterId:"trigramNameFilter_Assignee",filterModel:{text:e}}})}}).inject(o),f.autoCompleteApprover=new u({elementsTree:f.modelForApprover,placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){this.selectedItems&&this.selectedItems.length>0?"Route Template"===this.selectedItems[0].options.type?f.filterApproverAutoCompleteByType(this.selectedItems[0].options.type,e,!0):"Person"===this.selectedItems[0].options.type&&f.filterApproverAutoCompleteByType(this.selectedItems[0].options.type,e,!1):f.modelForApprover.setFilterModel({value:{filterId:"trigramNameFilter_Approver",filterModel:{text:e}}})}}).inject(a),f.autoCompleteFollower=new u({elementsTree:f.modelForFollower,placeholder:m.CHG_Add_Member_Type_To_Search,customFilterMessage:m.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){f.modelForFollower.setFilterModel({value:{filterId:"trigramNameFilter_Follower",filterModel:{text:e}}})}}).inject(d),f.myButtonPrimary.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque");let o={person:[],userGroup:[]},a={person:[],userGroup:[]},s={person:[],routeTemplate:""};if(null!=f.autoCompleteAssignee.selectedItems)for(var r=0;r<f.autoCompleteAssignee.selectedItems.length;r++){let e=f.autoCompleteAssignee.selectedItems[r].options;"Person"==e.type?o.person.push(e.identifier):"Group"==e.type&&o.userGroup.push(e.id)}if(null!=f.autoCompleteApprover.selectedItems)for(r=0;r<f.autoCompleteApprover.selectedItems.length;r++){let e=f.autoCompleteApprover.selectedItems[r].options;"Person"==e.type?s.person.push(e.identifier):"Route Template"==e.type&&(s.routeTemplate=e.id)}if(null!=f.autoCompleteFollower.selectedItems)for(r=0;r<f.autoCompleteFollower.selectedItems.length;r++){let e=f.autoCompleteFollower.selectedItems[r].options;"Person"==e.type?a.person.push(e.identifier):"Group"==e.type&&a.userGroup.push(e.id)}(s.person.length>0||""!=s.routeTemplate||a.person.length>0||a.userGroup.length>0||o.person.length>0||o.userGroup.length>0)&&(f.autoCompleteAssignee.selectedItems=f.autoCompleteApprover.selectedItems=f.autoCompleteFollower.selectedItems=void 0,f.addmember(o,s,a))}),b.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque")})},launchAddMemberPanel:function(){var e={commandInfo:{type:"Change Action",facet:"Members",action:"CA>Members>Add Member"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=document.querySelector(".addmemberView"),i=document.querySelector(".memberfilterView"),n=document.querySelector(".content-member-grid-div"),o=document.querySelector(".membertileView"),a=document.querySelector(".chg-add-member-approver"),r=document.querySelector(".chg-add-member-assignee");i.hide(),n.removeClassName("teamview-opaque"),o.removeClassName("teamview-opaque"),a.classList.remove("teamview-opaque"),r.classList.remove("teamview-opaque"),"block"==t.style.display?t.hide():(t.show(),n.addClassName("teamview-opaque"),o.addClassName("teamview-opaque"),f&&f.autoCompleteAssignee&&f.autoCompleteApprover&&f.autoCompleteFollower&&(f.autoCompleteAssignee.selectedItems=f.autoCompleteApprover.selectedItems=f.autoCompleteFollower.selectedItems=void 0),"Route Template"==s.reviewerType.typeOfReviewer&&a.classList.add("teamview-opaque"),f.updateAutoCompleteModel(),f.addChangeEventListener(),f.myButtonPrimary.disabled=!0)},updateAutoCompleteModel:function(e){var t=r.getGlobalVariable().contextUser;let i={},n=f.teamlayoutModel.getChildren();for(let e=0;e<n.length;e++){let t=n[e].options.grid;i[t.id]=t.roleList,"Route Template"==t.type&&console.log("set RT value true..!")}var o={categoryId:"assignee",contextUser:t},a={categoryId:"reviewer",contextUser:t},l={categoryId:"follower",contextUser:t};f.modelForAssignee.empty(),f.modelForApprover.empty(),f.modelForFollower.empty(),s.getListMember(o).then(function(e){e.length>999&&d.warn(m.CHG_Add_Member_Warning),f.modelForAssignee.prepareUpdate();for(var t=0;t<e.length;t++){let n,o=e[t].id;if(i.hasOwnProperty(o)&&(e[t].name=e[t].name+" ("+i[o]+")",1==i[o].contains(m.CHG_Member_Role_Assignee)))continue;n="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[t].type.toLowerCase()?e[t].name+"("+e[t].identifier.toUpperCase()+")":e[t].name;let a=new g({label:n,value:{label:n,subLabel:e[t].personRole},name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});f.modelForAssignee.addRoot(a)}f.modelForAssignee.pushUpdate()}),s.getListMember(a).then(function(e){e.length>999&&d.warn(m.CHG_Add_Member_Warning),f.modelForApprover.prepareUpdate();for(var t=0;t<e.length;t++){let n,o=e[t].id;if(i.hasOwnProperty(o)&&(e[t].name=e[t].name+" ("+i[o]+")",1==i[o].contains(m.CHG_Member_Role_Approver)))continue;n="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[t].type.toLowerCase()?e[t].name+"("+e[t].identifier.toUpperCase()+")":e[t].name;let a=new g({label:n,value:{label:n,subLabel:e[t].personRole},name:e[t].name,identifier:e[t].identifier,grid:{type:e[t].type,name:e[t].name},type:e[t].type,id:e[t].id});f.modelForApprover.addRoot(a)}f.modelForApprover.pushUpdate()}),s.getListMember(l).then(function(e){e.length>999&&d.warn(m.CHG_Add_Member_Warning),f.modelForFollower.prepareUpdate();for(var t=0;t<e.length;t++){let n,o=e[t].id;if(i.hasOwnProperty(o)&&(e[t].name=e[t].name+" ("+i[o]+")",1==i[o].contains(m.CHG_Member_Role_Follower)))continue;n="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[t].type.toLowerCase()?e[t].name+"("+e[t].identifier.toUpperCase()+")":e[t].name;let a=new g({label:n,value:{label:n,subLabel:e[t].personRole},name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});f.modelForFollower.addRoot(a)}f.modelForFollower.pushUpdate()})},addmember:function(e,i,n){var r=f.id,l=t.makeUpdateMemberJson("CONNECT",e,i,n);o.updateChangeActionMembers(r,l).then(function(e){var i=a.processedChangeActionMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout"],function(e){for(var n=e.ChgMembersTreeModel.getChildren(),o=[],a=0;a<i.length;a++){var r=i[a];if("approver"==r.role){if("Route Template"==r.type){o.push(r),s.reviewerType.typeOfReviewer="Route Template";continue}"Person"==r.type&&(s.reviewerType.typeOfReviewer="Person")}"Coordinator"==r.role&&(t.isChangeCoordinatorConnected=!0);for(var l=r.id,d=!1,c=0;c<n.length;c++)if(l==n[c].options.grid.id){d=!0;break}if(1==d){e.ChgMembersTreeModel.prepareUpdate();let i=r.role,o="";if(i.includes(",")){let e=i.split(",");for(let i=0;i<e.length;i++)o+=", "+t.getRoleNLSValue(e[i].trim()),n[c].options.grid.roles.push(e[i].trim())}else o=", "+t.getRoleNLSValue(i),n[c].options.grid.roles.push(i);n[c].options.description=n[c].options.grid.roleList+=o,n[c].options.grid.role+=","+i,e.ChgMembersTreeModel.pushUpdate()}else o.push(r)}o.length>0&&e.addNodesInLayout(o)})})},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,f.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForAssigneeField:function(e){var t={data:{}};t.data.items=e,f.ExecuteDropForAddMemberPanel(t,"Assignee")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,f.ExecuteDropForAddMemberPanel(t,"Informed User")},approverFlag:!1,ExecuteDropForAddMemberPanel:function(e,t){if(e&&e.data&&e.data.items){var i=e.data.items;if(UWA.is(i)&UWA.is(i.length)&&i.length>0){var o=[],r=[];let e=[];for(var l=[],c=0;c<i.length;c++)i[c].objectId&&(null==i[c].serviceId||"3DSpace"==i[c].serviceId||i[c].serviceId.indexOf("3dspace")>-1?i[c].objectId.indexOf("pid:")>-1?o.push(i[c].objectId.replace("pid:","")):o.push(i[c].objectId):"3DSwym"==i[c].serviceId&&"pno:Person"==i[c].objectType?(r.push(i[c].objectId.replace("iam:","")),l.push(i[c].displayName)):i[c].serviceId.indexOf("usersgroup")>-1&&e.push(i[c]));if(0!=o.length||0!=r.length||0!=e.length){var u=[];0!=o.length&&n.getAdditionObjectInfo(o).then(function(e){if("Approver"===t){let t=[...o.map(t=>e.additionObjectInfo[t].type),...(f.autoCompleteApprover.selectedItems||[]).map(e=>e.options.type)];if(t.filter(e=>"Route Template"===e).length>1)return d.error(m.ECM_CA_ROUTE_TEMPLATE_ALREADY_CONNECTED);if(t.length>1&&t.includes("Route Template")&&t.includes("Person"))return d.error(m.ECM_CA_PERSON_ROUTE_MIXED_ERROR_1)}for(var i=0;i<o.length;i++){var n=null,r=e.additionObjectInfo[o[i]];if("Approver"!==t||!r.type||"Route Template"!==r.type&&"Person"!=r.type)if("Assignee"!==t||!r.type||"Person"!=r.type&&"Group"!==r.type){if("Informed User"!==t||!r.type||"Person"!==r.type&&"Group"!==r.type)return void console.log("NLS.ECM_ERR_NO_PERSON_NO_ROUTETEMPLATE");{let e="";"Person"===r.type?e=new g({label:r.fullName,value:r.objectName,name:r.fullName,type:r.type,id:r.pid,identifier:r.objectName}):"Group"===r.type&&(e=new g({label:r.objectTitle,value:r.objectName,name:r.objectTitle,type:r.type,id:r.pid})),u.push(e);l=f.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.identifier==u[0].options.identifier)return!0});f.autoCompleteFollower.selectedItems=l<0?u:a.searchFromModelAndUniqAndAdd(e=>e.options.id,f.autoCompleteFollower,u),f.autoCompleteFollower._applySelectedItems(),f.approverFlag=!1}}else{let e="";"Person"===r.type?e=new g({label:r.fullName,value:r.objectName,name:r.fullName,type:r.type,id:r.pid,identifier:r.objectName}):"Group"===r.type&&(e=new g({label:r.objectTitle,value:r.objectName,name:r.objectTitle,type:r.type,id:r.pid})),u.push(e);var l=f.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.identifier==u[0].options.identifier)return!0});f.autoCompleteAssignee.selectedItems=l<0?u:a.searchFromModelAndUniqAndAdd(e=>e.options.id,f.autoCompleteAssignee,u),f.autoCompleteAssignee._applySelectedItems(),f.approverFlag=!1}else{let e=s.reviewerType.typeOfReviewer;if("Route Template"===r.type)"Person"!=e?(n=new g({label:r.objectTitle,value:r.objectName,name:r.objectTitle,type:r.type,id:r.pid,identifier:r.objectName}),u.push(n)):console.log("show erroe message...!");else if("Person"==r.type)if("Route Template"!=e){var c=new g({label:r.fullName,value:r.objectName,name:r.fullName,type:r.type,id:r.pid,identifier:r.objectName});u.push(c)}else console.log("show erroe message...!");var l=f.autoCompleteApprover.elementsTree.getChildren().findIndex(function(e){if(e.options.identifier==u[0].options.identifier)return!0});f.autoCompleteApprover.selectedItems=l<0?u:a.searchFromModelAndUniqAndAdd(e=>e.options.id,f.autoCompleteApprover,u),f.autoCompleteApprover._applySelectedItems(),f.approverFlag=!1}}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)}),0!=r.length&&n.getAdditionSwymPersonInfo(r).then(function(e){for(var i=0;i<r.length;i++){var n=null,o=e.additionObjectInfo[r[i]];"Assignee"===t&&o.type&&"Person"===o.type?(n=new g({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),u.push(n),f.autoCompleteAssignee.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,f.autoCompleteAssignee,u),f.autoCompleteAssignee._applySelectedItems()):"Approver"===t&&o.type&&"Person"===o.type?(n=new g({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),u.push(n),f.autoCompleteApprover.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,f.autoCompleteApprover,u),f.autoCompleteApprover._applySelectedItems()):"Informed User"===t&&o.type&&"Person"===o.type&&(n=new g({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),u.push(n),f.autoCompleteFollower.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,f.autoCompleteFollower,u),f.autoCompleteFollower._applySelectedItems())}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)});for(let i=0;i<e.length;i++){var p;p=new g({label:e[i].displayName,value:e[i].objectId,name:e[i].displayName,type:e[i].objectType,id:e[i].objectId}),u.push(p),"Informed User"===t&&(f.autoCompleteFollower.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,f.autoCompleteFollower,u),f.autoCompleteFollower._applySelectedItems()),"Assignee"===t&&(f.autoCompleteAssignee.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,f.autoCompleteAssignee,u),f.autoCompleteAssignee._applySelectedItems())}}}else console.log("NLS.ECM_CA_Drop_Not_Supported")}else console.log("NLS.ECM_CA_Drop_Not_Supported")},OnSearchComplete:function(e){var t=[];if(f.approverFlag=!0,r.getGlobalVariable().isNative){let t=e.split(","),n=[];for(var i=0;i<t.length;i++)n.push(t[i]);let o=[];for(let e=0;e<t.length;e++)o.push(n[e].split(","));e=o}for(var n=0;n<e.length;n++)t.push({objectId:e[n][0],identifier:e[n][1],objectType:e[n][2],displayType:e[n][3],displayName:e[n][5],serviceId:e[n][7]});var o={data:{}};o.data.items=t,f.ExecuteDropForAddMemberPanel(o,f.searchCategoty)},addChangeEventListener:function(){f.autoCompleteApprover.addEventListener("change",function(){var e=f.autoCompleteApprover.selectedItems,t=e.length;if(t>0){var i=e[t-1];f.autoCompleteApprover.elementsTree.getChildren().findIndex(function(e){if(e.options.name==i.options.name||1==f.approverFlag)return!0})<0&&(f.autoCompleteApprover._selectionChips.removeChip(i.options.label),f.autoCompleteApprover.selectedItems.pop(),f.autoCompleteApprover.value.pop())}1==t?"Route Template"==i.options.type?(f.filterApproverAutoCompleteByType("Route Template","",!0),f.autoCompleteApprover._hidePopup()):"Person"==i.options.type&&f.filterApproverAutoCompleteByType("Person","",!1):0==t&&(f.filterApproverAutoCompleteByType("Both","",!1),f.autoCompleteApprover.elements.popup&&1==f.autoCompleteApprover.elements.popup.visibleFlag&&(f.autoCompleteApprover._hidePopup(),f.autoCompleteApprover._showPopup())),f.disableButtonFun()?f.myButtonPrimary.disabled=!1:f.myButtonPrimary.disabled=!0}),f.autoCompleteAssignee.addEventListener("change",function(){var e=f.autoCompleteAssignee.selectedItems,t=e.length;if(t>0){var i=e[t-1];f.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.name==i.options.name||1==f.approverFlag)return!0})<0&&(f.autoCompleteAssignee._selectionChips.removeChip(i.options.label),f.autoCompleteAssignee.selectedItems.pop(),f.autoCompleteAssignee.value.pop())}f.disableButtonFun()?f.myButtonPrimary.disabled=!1:f.myButtonPrimary.disabled=!0}),f.autoCompleteFollower.addEventListener("change",function(){var e=f.autoCompleteFollower.selectedItems,t=e.length;if(t>0){var i=e[t-1];f.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.name==i.options.name||1==f.approverFlag)return!0})<0&&(f.autoCompleteFollower._selectionChips.removeChip(i.options.label),f.autoCompleteFollower.selectedItems.pop(),f.autoCompleteFollower.value.pop())}f.disableButtonFun()?f.myButtonPrimary.disabled=!1:f.myButtonPrimary.disabled=!0})},disableButtonFun:function(){return!!(f.autoCompleteFollower&&f.autoCompleteFollower.selectedItems&&f.autoCompleteFollower.selectedItems.length>0)||(!!(f.autoCompleteAssignee&&f.autoCompleteAssignee.selectedItems&&f.autoCompleteAssignee.selectedItems.length>0)||!!(f.autoCompleteApprover&&f.autoCompleteApprover.selectedItems&&f.autoCompleteApprover.selectedItems.length>0))},filterApproverAutoCompleteByType:function(e,t,i){var n=[];"Both"==e?(n.push("Route Template"),n.push("Person")):n.push(e),!0===i?"Route Template"===e&&f.modelForApprover.setFilterModel({type:{filterId:"set",filterModel:[null]}}):f.modelForApprover.setFilterModel({type:{filterId:"set",filterModel:n},value:{filterId:"trigramNameFilter_Approver",filterModel:{text:t}}})}};return f}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesModel",["UWA/Core","UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgErrors","DS/TreeModel/BaseFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p=c.inherit({publishedProperties:{},isDataFiltered:function(e){var t;if(t=e.options.grid,this.filterModel&&this.filterModel.allowedIDs){var i=this.filterModel.allowedIDs;return!(t.where_details&&t.where_details.id&&i.includes(t.where_details.id))&&(!(t.ref_details&&t.ref_details.id&&i.includes(t.ref_details.id))&&!(t.after_details&&t.after_details.id&&i.includes(t.after_details.id)))}return!1},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return t.extend({init:function(e){e||(e={}),this._parent(e),this.options=e,this.treeDocument=null},resetModel:function(){this.treeDocument.empty()},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},setFilterModel:function(e){this.treeDocument.setFilterModel(e)},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",p)},createTreeDocument:function(){this.treeDocument=new i({id:"ChgCARealizedChangesTreeDoc",useAsyncPreExpand:!0}),this.treeDocument.onNodeModelUpdate(function(t){var i=t.data.nodeModel;if(i&&(t.data.attributes.reasonForChange||""==t.data.attributes.reasonForChange)){if(!e.is(i.options.grid.activity_id))return d.error(u.CHG_GOV_PUT_REALIZED_DESC_DISABLED),void(i.options.grid.reasonForChange="");o.publish("ECM_GOV_RealizedDGV_DESC_MODIFIED:"+(widget?widget.id:""),{activity_id:i.options.grid.activity_id,activity_description:t.data.attributes.reasonForChange})}})},emptyTreeDocument:function(){this.treeDocument.empty()},updateTreeDocument:function(e){this.treeDocument.prepareUpdate();for(var t=0;t<e.length;t++){let i=this.createTreeNode(e[t]);this.treeDocument.addRoot(i)}this.treeDocument.expandAll(),this.treeDocument.pushUpdate()},createTreeNode:function(e){var t=this,i=t.getRealizedTreeNode(e);return e.activities.forEach(e=>{let n=t.getRealizedTreeNode(e);"TRUE"===i.options.grid.isRefConfigured?(i.options.grid.moved_to_ca="",i.options.grid.reasonForMove="",i.options.grid.moved_to_ca_details=""):"FALSE"===i.options.grid.isRefConfigured&&(i.options.grid.moved_to_ca=n.options.grid.moved_to_ca,i.options.grid.reasonForMove=n.options.grid.reasonForMove,i.options.grid.moved_to_ca_details=n.options.grid.moved_to_ca_details,n.options.grid.moved_to_ca="",n.options.grid.reasonForMove="",n.options.grid.moved_to_ca_details=void 0),i.addChild(n)}),i},getRealizedTreeNode:function(e){return e.change=this.getChangeDescription(e),e.change_details=this.getChangeDetails(e),e.moved_to_ca=this.getMovedToCADetails(e),e.reasonForMove=this.getReasonForMoveDescription(e),e.isReasonForChangeEditable=this.options.isReasonForChangeEditable,new n({label:e.title,subLabel:e.type+" | "+e.revision+" | "+e.name,grid:e,icons:[e.icon,e.configured_icon],thumbnail:e.thumbnail,useAsyncPreExpand:!0})},getChangeDescription:function(e){let t=e.operation;return(t.startsWith("ChangeStatus#")||t.startsWith("FileAdded#")||t.startsWith("FileModified#")||t.startsWith("FileRemoved#"))&&(t=t.split("#")[0]),"TRUE"===e.isInstanceOperation?u["CHG_GOV_Realized_Activity_"+t+"_Usage"]:u["CHG_GOV_Realized_Activity_"+t]},getChangeDetails:function(t){var i="";if(0===t.sub_operations.length&&"NonPrimeRoot"===t.operation)i=u.CHG_GOV_Realized_Activity_NonPrimeRoot;else if("DOCUMENT_UPDATE"==t.operation)i=u.CHG_GOV_Realized_Activity_DOCUMENT_UPDATE;else if("DOCUMENT_CREATE_UPDATE"==t.operation)i=u.CHG_GOV_Realized_Activity_Create;else{let n=e.createElement("div",{class:"realized_op_main_div",styles:{display:"flex","align-items":"center","justify-content":"flex-start",overflow:"hidden","text-overflow":"ellipsis"}});for(let e=0;e<t.sub_operations.length;e++){let i=t.sub_operations[e],o=null;if(i.startsWith("ChangeStatus#"))o=this.getChangeStatusHTMLObject(i,t);else if(i.startsWith("FileAdded#")||i.startsWith("FileModified#")||i.startsWith("FileRemoved#"))o=this.getFileDetailHTMLObject(i,t);else switch(i){case"Create":case"Modify":case"Add":case"EditVariant":case"Cut":case"ConfiguredDelete":case"ConfiguredMove":case"Extend":case"Move":case"TransferOwnership":case"ChangeResponsible":case"AddAlternate":case"AltSubFor":case"AddSubstitute":case"SubstitutionContextAdded":case"SubtitutionContextRemoved":case"AltQualified":case"AltObsolete":o=this.getOperationDescHTMLObject(i,t);break;case"AddInFamily":o=t.before_details?this.getPreviousGrammarHTMLObject(i,t):this.getOperationDescHTMLObject(i,t);break;case"NewEvolution":case"Clone":case"NewMinorVersion":case"NewVersion":case"Replace":case"ConfiguredReplace":case"ConfiguredEditVariant":case"EvolveInstance":o=this.getPreviousGrammarHTMLObject(i,t)}o&&e<t.sub_operations.length-1&&o.addContent([{tag:"span",text:", "}]),o&&o.inject(n)}i=n.outerHTML}return i},getMovedToCADetails:function(t){let i=e.createElement("div",{class:"realized_op_moved_to_ca",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return i.setContent([{tag:"img",src:t.moved_to_ca_details?t.moved_to_ca_details.icon:"",styles:{"padding-left":"5px"}},{tag:"span",class:"realized_op_moved_to_ca_label",text:t.moved_to_ca_details?t.moved_to_ca_details.title:"",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer",width:20,height:20,"padding-left":"5px"}}]),t.moved_to_ca_details&&i.setAttributes({id:t.moved_to_ca_details.id,type:t.moved_to_ca_details.type,name:t.moved_to_ca_details.name}),i.outerHTML},getReasonForMoveDescription:function(e){let t="";return e.reasonForMove&&""!=e.reasonForMove&&(t=u["CHG_GOV_Realized_Activity_Moved_"+e.reasonForMove]),t},getOperationDescHTMLObject:function(t,i){let n=e.createElement("div",{class:"realized_op_desc",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return n.setContent([{tag:"span",text:"TRUE"===i.isInstanceOperation?u["CHG_GOV_Realized_Activity_"+t+"_Usage"]:u["CHG_GOV_Realized_Activity_"+t]}]),n},getPreviousGrammarHTMLObject:function(t,i){let n=e.createElement("div",{class:"realized_op_prefix",styles:{overflow:"hidden","text-overflow":"ellipsis"}});n.setContent([{tag:"span",text:u["CHG_GOV_Realized_Activity_"+t+"_Prefix"]+" :"}]);try{n.addContent([{tag:"img",src:i.before_ref_details?i.before_ref_details.dataelements.icon:i.before_details.dataelements.icon,styles:{"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_label",text:i.before_ref_details?i.before_ref_details.dataelements["ds6w:label"]:i.before_details.dataelements["ds6w:label"],styles:{"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_revision",text:i.before_ref_details?i.before_ref_details.dataelements["ds6wg:revision"]:i.before_details.dataelements["ds6wg:revision"],styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer",width:20,height:20,"padding-left":"5px"}},{tag:"span",class:"realized_op_previous_obj_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}]),i.before_ref_details?(n.addContent([{tag:"span",text:"( "+i.before_details.dataelements["ds6w:label"]+" )",styles:{"padding-left":"5px"}}]),n.setAttributes({id:i.before_ref_details.id,type:i.before_ref_details.dataelements["ds6w:type"],name:i.before_ref_details.dataelements["ds6w:identifier"]})):n.setAttributes({id:i.before_details.id,type:i.before_details.dataelements["ds6w:type"],name:i.before_details.dataelements["ds6w:identifier"]})}catch(e){console.log(e),o.publish("Realized_ObjectNotFound:"+(widget?widget.id:""),e)}return n},getChangeStatusHTMLObject:function(t,i){let n=t.split("#"),o=e.createElement("div",{class:"realized_op_suffix",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return o.setContent([{tag:"span",text:u["CHG_GOV_Realized_Activity_"+n[0]+"_Suffix"]+": "+n[1].replace("_"," ")}]),o},getFileDetailHTMLObject:function(t,i){let n=t.split("#"),o=e.createElement("div",{class:"realized_op_suffix",styles:{overflow:"hidden","text-overflow":"ellipsis"}});return o.setContent([{tag:"span",text:u["CHG_GOV_Realized_Activity_"+n[0]+"_Suffix"]+": "+n[1].replaceAll("<?>"," ")}]),o},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},setReasonForChangeEditAccess:function(e){this.options.isReasonForChangeEditable=e}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";var a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"chgObjName"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"severityNLS"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(o.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(o.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(o.getColumnDefinition({dataIndex:"organizationNLS"})),e[2].compareFunction=function(e,t,i,n,o){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0},i.getGlobalVariable().is3DSpace&&(e[0].allowUnsafeHTMLContent=!0,e[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-orchestration-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".orchestrationtileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-orchestration-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".orchestrationtileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);var a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},a.createCustomOwner=function(e,t){var o="/api/user/getpicture/login/"+t+"/format/normal",a=i.getGlobalVariable().computeSwymUrl(o),s=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:a});else{var d=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=UWA.createElement("span",{class:"userName",html:t});return r.inject(s),c.inject(s),s.outerHTML},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar"],function(e,t){"use strict";var i=Object.create(null);i.getColumns=function(){},i.changeView=function(n){if("GridView"==n);else if("TileView"==n){this.currentView="Tile";var o=t.toolbar.getNodeModelByID("view");o&&"view-small-tile"!=o.options.grid.semantics.icon.iconName&&o.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW});var a=document.querySelector(".toolbar-contributor-grid-div .wux-ui-3ds-view-small-tile");if(a){a.addClassName("currentView");var s=document.querySelector(".contributortileView");s&&(s.removeClassName("hideView"),s.addClassName("showView"))}}return i}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";var a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"chgObjName"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"severityNLS"})),e.push(o.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(o.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(o.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(o.getColumnDefinition({dataIndex:"organizationNLS"})),e[2].compareFunction=function(e,t,i,n,o){return"undefined"!=i.options.grid.stateGrade&&"undefined"!=n.options.grid.stateGrade?i.options.grid.stateGrade==n.options.grid.stateGrade?0:i.options.grid.stateGrade<n.options.grid.stateGrade?-1:1:0},i.getGlobalVariable().is3DSpace&&(e[0].allowUnsafeHTMLContent=!0,e[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),e},a.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-orchestration-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".orchestrationtileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-orchestration-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".orchestrationtileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a.createCustomSeverity=function(e,t){var i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);var a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},a.createCustomOwner=function(e,t){var o="/api/user/getpicture/login/"+t+"/format/normal",a=i.getGlobalVariable().computeSwymUrl(o),s=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:a});else{var d=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=UWA.createElement("span",{class:"userName",html:t});return r.inject(s),c.inject(s),s.outerHTML},a}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("contributorEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("contributorEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAAddMemberView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w){"use strict";var S={getDataToBuildAddMemberPanel:function(e){S.teamlayoutModel=e.model,S.options=e,S.modelForApprover=new h,this.filterByTrigramHandler()},setDataForAddMember:function(e){var t=[];return t.push({label:f.CHG_GOV_Members_DataGrid_Approver,id:"approver",model:S.modelForApprover,getListOfUsers:this.getMembersListForApprover,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Approver",customFilterMessage:f.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","routetemplate"],autoCompleteValue:S.options.approversList?S.options.approversList:""}),{title:"Manage Approvers",objectTitle:S.objectTitle,target:S.options.target,fields:t,addMemberSubmitHandler:this.addmember,searchFromModelAndUniqAndAdd:r.searchFromModelAndUniqAndAdd,teamlayoutModel:S.teamlayoutModel,makeDroppable:o.makeDroppable,type:"Disposition",primaryButtonName:this.setAddButtonName()}},launchAddMemberPanel:function(){var i={commandInfo:{type:"Investigation Request",facet:"Members",action:"Disposition>Approvers>AddApprovers"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});var n=S.setDataForAddMember();if(n.frameHeight="147",null==S.options.dispositionID)console.log("No Disposition Exists"),u.warn("create disposition to add approvers");else{var o=new e(n);(new t).buildAddMemberDialog(o)}},setAddButtonName:function(){let e=f.CHG_Add_Member_Add;return S.options.approversList&&S.options.approversList.length>0&&(e=f.CHG_Add_Member_UpdateButton),e},filterByTrigramHandler:function(){S.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new C).getTrigramNameFilter())},dragAndDropHandler:function(){var e=S.options.target.querySelector("#memberFieldElementchangeCoordinator");o.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForChangeCoordinatorField:function(e){return e},addmember:async function(e,t,i,n){let o=S.options?S.options.model.getSelectedNodes():void 0;n&&S.options&&S.options.approversList&&(S.options.approversList=n);let a=S.options?S.options.approversList:n,r=e.approver?e.approver:"";i=S.options?S.options.dispositionID:i;var l="";let d,c,u;if(a){const e=(await S.findRemovedPerson(a,r)).approver;e&&(e.person.length>0||e.routetemplate.length>0)&&(l=b.makeUpdateMemberJson("DISCONNECT","",e,"","",t),u=e,c=(d=await s.updateDispositionApprovers(i,l)).data),!r||0==r.person.length&&0==r.routetemplate.length||(l=b.makeUpdateMemberJson("CONNECT","",r,"","",t),c=(d=await s.updateDispositionApprovers(i,l)).data)}else l=b.makeUpdateMemberJson("CONNECT","",r,"","",t),c=(d=await s.updateDispositionApprovers(i,l)).data,require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],function(e){e&&e.handleDispositionMaturityEvent(o)});S.updateApproversColumn(o,c,r,a,u)},findRemovedPerson:async function(e,t){let i=[];const n=t.person||[];t.routetemplate;e.forEach(e=>{if(!n.includes(e.userid)){const t=e.type?e.type.toLowerCase():"";"person"===t?i.push({userid:e.userid,type:e.type}):"route template"===t&&i.push({id:e.id,type:e.type})}});const o=i.filter(e=>{return"person"===(e.type?e.type.toLowerCase():"")}).map(e=>e.userid),a=i.filter(e=>{return"route template"===(e.type?e.type.toLowerCase():"")}).map(e=>e.id);return{approver:{person:o,routetemplate:a},actionType:o.length>0||a.length>0?"DISCONNECT":"CONNECT"}},getUniqueList:function(e,t){let i=[],n=e.map(e=>e.userid);for(let e=0;e<t.length;e++){let o=t[e];n.includes(o)||i.includes(o)||i.push(o)}return i},removeDuplicates:function(e){return e.filter((e,t,i)=>t===i.findIndex(t=>t.userid===e.userid))},updateApproversColumn:function(e,t,i,n,o){e&&e.length&&t&&(n?this.updateExistingApprovers(e,t,n,o):this.updateCombinedApprovers(e,t))},updateExistingApprovers:async function(e,t,i,n){if(t&&0!==t.length){const o=i.filter(e=>!n||!n.person.includes(e.userid)),a=t.filter(e=>!n||!n.person.includes(e.userid)),s=o.concat(a),r=this.removeDuplicates(s),l=w.addApproversUserIconMethod(r);for(const t of e)t.updateOptions({grid:{approvers:l}});const d=e[0]._options.grid.dispositionInformation[0];d.approvers=(d.approvers,r)}else{const i=await w.addApproversDefaultMethod();for(const t of e)t.updateOptions({grid:{approvers:i}});e[0]._options.grid.dispositionInformation[0].approvers=t}},updateCombinedApprovers:function(e,t){let i=t;e[0]._options.grid.dispositionInformation[0]&&e[0]._options.grid.dispositionInformation[0].approvers&&(i=[...e[0]._options.grid.dispositionInformation[0].approvers,...t]);const n=Array.from(new Set(i.map(e=>e.userid))).map(e=>i.find(t=>t.userid===e));for(const t of e){const e=w.addApproversUserIconMethod(n);t.updateOptions({grid:{approvers:e}})}if(e[0]._options.grid.dispositionInformation[0])e[0]._options.grid.dispositionInformation[0].approvers=n;else{[].push([]),e[0]._options.grid.dispositionInformation=[{}],e[0]._options.grid.dispositionInformation[0].approvers=n}}};return S}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n){"use strict";var o=Object.create(null);return o.getColumns=function(){var t=[];return t.push(n.getColumnDefinition({dataIndex:"dispositionName"})),t.push({text:e.CHG_IR_Affected_Items_Disposition_Revision,dataIndex:"dispositionRevision",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:""}),t.push(n.getColumnDefinition({dataIndex:"dispositionType"})),t.push({dataIndex:"dispositionCurrentState",ds6wIndexMapping:"ds6w:status",text:"Maturity State",typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel&&e.nodeModel.options.grid.id){var t=e.nodeModel.options.grid.dispositionCurrentState;return t=e.nodeModel.options.grid.dispositionPolicy+"."+t,n.getAndCreateMaturityClass(t,"wux-controls-label")}}}),t.push({dataIndex:"affectedItemsLabel",text:e.CHG_GOV_Home_Tab_AffectedItems,editableFlag:!1,allowUnsafeHTMLContent:!0,width:"220",filterId:"stringRegexp",filterModel:""}),t.push({dataIndex:"dispositionOwner",text:e.CHG_IR_Affected_Items_Disposition_Owner,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel)if(i.getGlobalVariable().isSwymInstalled){if(e.nodeModel.options.grid&&e.nodeModel.options.grid.dispositionOwner){var t="/api/user/getpicture/login/"+e.nodeModel.options.grid.dispositionOwner+"/format/normal";return{icon:t=i.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.options.grid.dispositionOwnerFullName}}}else if(e.nodeModel.options.grid&&e.nodeModel.options.grid.dispositionOwnerFullName)return{label:e.nodeModel.options.grid.dispositionOwnerFullName}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.dispositionInformation[0].dispositionOwnerFullName}}),t.push(n.getColumnDefinition({dataIndex:"approvers"})),t.push(n.getColumnDefinition({dataIndex:"ApprovalStatus"})),t.push(n.getColumnDefinition({dataIndex:"dispositionResolvedBy"})),i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),t},o.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-dispositions-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".dispositionsTileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-dispositions-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".dispositionsTileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},o}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";var D={columnMap:null,attrMap:[],showRMBMenuOnGrid:function(e,t,i){return new Promise(function(i,o){const a=[];let s=!1;const r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();r.length>1&&(s=!0);const l=r.map(e=>e.options.grid.id),d=(r.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),C("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout")),c=C("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),u=C("DS/ENOChgServices/scripts/services/ChgDataService"),p=t.cellInfos.nodeModel.options.grid.id,g=t.cellInfos.nodeModel.options.grid.type,h=t.cellInfos.nodeModel.options.grid.name,v=t.cellInfos.nodeModel.options.grid.displayType,b=d.ChgCRImpactAnalysisDataGridModel.contextDetails.access.accessBits.ManageChangeAnalysis,w={objectId:p,objectType:g,displayName:h,displayType:v,facetName:"dependency"},S=c.openWith(w);if(s)a.push(n.createPropertyPushItem(l)),a.push(D.getRelationalExplorerMenu(l)),S.then(n=>{n&&a.push(n),a.push(D.getTransferMenu(t)),a.push(f.getMaturityMenu(t)),a.push(m.getCopyLink(r,e.options.contextDetails.id)),"true"==b&&a.push(D.getDeleteMenu(t,e.options.target,d.removeDeletedNodesUsingIDs,void 0,"ImpactAnalysis")),i(a)});else{a.push(n.createPropertyPushItem(l)),a.push(D.getRelationalExplorerMenu(l));const o=[];o.push(S);const s=u.getImpactAnalysisUserAccess(t.cellInfos.nodeModel.options.grid.id);o.push(s),Promise.all(o).then(n=>{n[0]&&a.push(n[0]);const o=n[1].data[0].dataelements;"true"===o.TransferOwnership&&a.push(D.getTransferMenu(t)),"true"!==o.Promote&&"true"!==o.Demote||a.push(f.getMaturityMenu(t)),a.push(m.getCopyLink(r,e.options.contextDetails.id)),"true"==b&&a.push(D.getDeleteMenu(t,e.options.target,d.removeDeletedNodesUsingIDs,void 0,"ImpactAnalysis")),i(a)})}})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Impact Analysis",action:"CR>Impact Analysis>RMB>Move"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(o)})}}}},makeCopyLinkObject:function(e,t){var i={protocol:"3DXContent",data:{items:[]}};return i.data.items.push({envId:o.getGlobalVariable().tenant,objectId:t,openLink:!0,IAid:e.options.grid.id,tabName:"crAssessment"}),i},showNotification:function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=u,p.setNotificationManager(window.notifs)),a?p.inject(a):p.elements.container.isInjected()||p.inject(),window.notifs.addNotif(r)},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Impact Analysis",action:"CR>Impact Analysis>RMB>Relations"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}},getDeleteMenu:function(e,i,n,o,a){return{type:"PushItem",title:t.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){var t={commandInfo:{type:"Change Request",facet:"Impact Analysis",action:"CR>Impact Analysis>RMB>Delete"}};v.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});for(var s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),r=[],d=0;d<s.length;d++){var c=s[d],u={physicalid:c.options.grid.id,nodeName:c.options.grid.name,nodeTitle:c.options.grid.title,parentCRId:c.options.grid.parentCRId};r.push(u)}l.deleteNodes(r,i,n,o,a)}}}},createCustomColumn:function(){let e=this;return new Promise(function(t,i){let n=o.getGlobalVariable().changeAnalysisSubTypes;a.getCombinedClassList(n).then(function(i){a.getPropertyForClassGrid(i).then(function(i){let n=a.makeCombinedColumnList(i),o=e.filterColumn(n);e.columnMap=n,t(o)})})})},filterColumn:function(e){let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6wg:Default Change Analysis Metrics.Implementation Effort","ds6wg:Default Change Analysis Metrics.Benefit Impact","ds6wg:Default Change Analysis Metrics.Risk Impact","ds6wg:Default Change Analysis Metrics.Cost Impact","ds6wg:Default Change Analysis Metrics.Validation Effort"];for(let t of n)e.delete(t);return e.forEach((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)}),i},createColumnDefination:function(e,t){var i=this;let n=e.dataType.replace("http://www.w3.org/2001/XMLSchema#",""),o=new Map;return this.attrMap.push(o),{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!0,visibleFlag:!1,dataType:n,range:e.range,getCellTooltip:function(){return{shortHelp:"my custo help",updateModel:!1}},getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){if("ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id){if(e>t)return 1;if(e==t)return 0;if(e<t)return-1}return!1},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){let n=e.nodeModel.getBrothers(),o=i.checkAssessmentType(t);if(n=n.filter(e=>"ia_Total"!=e.options.grid.id&&"Cancelled"!=e.options.grid.maturity),"boolean"==o){return i.booleanAggregation(n,t)}if("integer"==o||"real"==o||"double"==o){return i.sumAvgAggregation(n,t)}if("range"==o){return i.rangeAggregation(n,t)}return""}return e.nodeModel.getAttributeValue(t)},getCellTooltip:function(e){console.log(e),console.log("cellInfos...................")}}},checkAssessmentType:function(e){let t=[...D.columnMap.entries()].filter(([t,i])=>t==e),i=t[0][1].dataType,n=t[0][1].range,o=i.replace("http://www.w3.org/2001/XMLSchema#","");return n&&"integer"==o?"range":o},sumAvgAggregation:function(e,t){let i=0;for(var n=0;n<e.length;n++)""!=e[n].options.grid[""+t]&&(i+=parseFloat(e[n].options.grid[""+t]));let o=0;return`&#x2211; ${i} | x&#772; ${o=i/e.length} `},rangeAggregation:function(e,t){let i=0,n=0;for(var o=0;o<e.length;o++)""!=e[o].options.grid[""+t]&&(i+=parseInt(e[o].options.grid[""+t]));return n=Math.round(i/e.length)},booleanAggregation:function(e,t){let i="";for(var n=0;n<e.length;n++){let o=e[n].options.grid[""+t];if("TRUE"!=o){if("FALSE"==o){i="FALSE";break}}else i="TRUE"}return i}};return D}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(n){var o={entries:[{id:"addExisting",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Toolbar_AddExisting,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",func:"addExistingHandler"}}},{id:"disposition",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"disposition",fontIconFamily:1},tooltip:e.CHG_GOV_AffectedItems_Disposition,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",func:"affectedItemsDisposition"}}},{id:"remove",visibleFlag:!1,dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_GOV_ChangeOrchestration_Toolbar_Remove,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",func:"removeHandler"}}},{id:"view",dataElements:{typeRepresentation:"addDropdown",icon:{iconName:"view-legacy-thb",fontIconFamily:1},value:this.viewData},position:"far",category:"View"}]};if(t.getGlobalVariable().is3DSpace){i.setContainersForSlideIn(n),o.entries=o.entries.filter(e=>"changeAssessment"!=e.id);o.entries.unshift({id:"infoPanel",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"info",fontIconFamily:1},category:"3dspace"},position:"far",tooltip:"Information",action:{module:"DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel",func:"createSlidein"}})}return o},n}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";var a=Object.create(null);return a.getColumns=function(){var e=[];return e.push(o.getColumnDefinition({dataIndex:"titleTree"})),e.push(o.getColumnDefinition({dataIndex:"typeNLS"})),e.push(o.getColumnDefinition({dataIndex:"name"})),e.push(o.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(o.getColumnDefinition({dataIndex:"revision"})),e.push(o.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(o.getColumnDefinition({dataIndex:"organizationNLS"})),e.push({text:"Affected As",dataIndex:"affectedAsIR",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"141",filterId:"stringRegexp",filterModel:""},{dataIndex:"investigatedBy",text:"Investigated By",editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){if(n.getGlobalVariable().isSwymInstalled){var t="/api/user/getpicture/login/"+e.nodeModel.getAttributeValue("owner")+"/format/normal";return{icon:t=n.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.getAttributeValue("ownerFullName")}}return{label:e.nodeModel.getAttributeValue("ownerFullName")}}},getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName}},{text:"Introduced In",dataIndex:"introducedIn",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"150",filterId:"stringRegexp",filterModel:""},{text:"Fixed In",dataIndex:"fixedIn",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"150",filterId:"stringRegexp",filterModel:""},{dataIndex:"Disposition",text:"Disposition",children:[{text:"Name",dataIndex:"dispositionName",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:""},{text:"Type",dataIndex:"dispositionType",editableFlag:!0,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:"",editionPolicy:"EditionOnOver",massUpdateAllowedFlag:!0,typeRepresentation:"typeForDisposition"},{dataIndex:"dispositionMaturity",ds6wIndexMapping:"ds6w:status",text:"Maturity State",typeRepresentation:"tag",className:"lc-maturity-state",filterId:"set",filterModel:[],width:100,getCellClassName:function(e){if(e.nodeModel&&e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]&&e.nodeModel.options.grid.dispositionInformation[0].dispostionId){var t=e.nodeModel.options.grid.dispositionInformation[0].dispositionCurrentState;return t=e.nodeModel.options.grid.dispositionInformation[0].dispositionPolicy+"."+t,o.getAndCreateMaturityClass(t,"wux-controls-label")}}},{text:"Resolved by",dataIndex:"dispositionResolvedBy",editableFlag:!1,allowUnsafeHTMLContent:!0,width:"200",filterId:"stringRegexp",filterModel:""}]}),n.getGlobalVariable().is3DSpace&&(e[0].allowUnsafeHTMLContent=!0,e[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),e},a.changeView=function(t){if("GridView"==t)this.currentView="Grid",(n=i.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-affectedItems-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".affectedItemsTileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==t){var n,o,a;this.currentView="Tile",(n=i.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-affectedItems-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".affectedItemsTileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},a}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r){"use strict";var l={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const o=[];let a=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();let c=[],u=[],p=[];d.forEach(e=>{c.push(e.options.grid.id),u.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&p.push(e.options.grid.serviceBasedObjId)}),d.length>1&&(a=!0);const g=s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),h=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,m=e.cellInfos.nodeModel.options.grid.type,C=e.cellInfos.nodeModel.options.grid.name,f=e.cellInfos.nodeModel.options.grid.displayType;let v=[];v.push(m),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(v=v.concat(e.cellInfos.nodeModel.options.grid.kind));const D={objectId:h,objectType:m,objectTaxonomies:v,displayName:C,displayType:f,facetName:"dependency"},b=g.openWith(D);a?(p.length>0&&o.push(n.createPropertyPushItem(p)),o.push(l.getRelationalExplorerMenu(u)),p.length>0&&(o.push(r.getMaturityMenu(void 0,p)),o.push(l.getTransferMenu(e))),t(o)):(p.length>0&&o.push(n.createPropertyPushItem(c)),o.push(l.getRelationalExplorerMenu(u)),b.then(i=>{i&&o.push(i),p.length>0&&(o.push(r.getMaturityMenu(void 0,p)),o.push(l.getTransferMenu(e))),t(o)}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)i[o].options.grid.sourceType&&"CSD"!=i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return l}),define("DS/ENOChgGovernanceUX/scripts/model/facets/members/ChgMembersDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";var h=e.extend({init:function(e){this.contextID=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"coMembers",useAsyncPreExpand:!0});return this.setTreeDocument(e),e},loadChangeOrderMembersData:function(e,t){e.prepareUpdate(),o.isRouteTemplateConnected=!1,o.isChangeCoordinatorConnected=!1;var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate();let n=document.getElementById("coMembers");n&&p.isMasked(n)&&p.unmask(n)},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomPersonNameField(e);e.person_name=t,e.roleList="";for(var n=0;n<e.roles.length;n++){var r="";switch(e.roles[n]){case"Owner":r=s.CHG_Member_Role_Owner;break;case"Originator":r=s.CHG_Member_Role_Originator;break;case"Coordinator":r=s.CHG_Member_Role_ChangeCoordinator;break;case"Approver":r=s.CHG_Member_Role_Approver;break;case"Follower":r=s.CHG_Member_Role_Follower;break;case"Assignee":r=s.CHG_Member_Role_Assignee}e.roleList+=r,n!=e.roles.length-1&&(e.roleList+=", ")}e.roles.indexOf("Approver")>=0&&(o.isRouteTemplateConnected=!0),e.roles.indexOf("Coordinator")>=0&&(o.isChangeCoordinatorConnected=!0);var l="",d=[e.icon],c=e.roleList;"Person"==e.type?(l=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):l=e.thumbnail;if("Route Template"==e.type)var u=new i({label:e.title,subLabel:"",description:c,grid:e,icons:d,thumbnail:l,contextualMenu:["Copy1","Move1"]});else{let t;t="true"==a.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e.type.toLowerCase()?e.fullName+"("+e.userId.toUpperCase()+")":e.fullName;u=new i({label:t,subLabel:"",description:c,grid:e,icons:d,thumbnail:l,contextualMenu:["Copy1","Move1"]})}return u},createCustomPersonNameField:function(e){var t=new UWA.Element("div",{class:"members"}),i="";if((i="Person"==e.type?this.getPersonImageDiv(e):this.getRouteTemplateImageDiv(e)).addClassName("assignee"),"Route Template"==e.type)var n=UWA.createElement("span",{class:"userName",html:e.title});else n=UWA.createElement("span",{class:"userName",html:e.fullName});return i.inject(t),n.inject(t),t.outerHTML},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.userId+"/format/normal";i=a.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),o="";if(a.getGlobalVariable().isSwymInstalled)o=UWA.createElement("img",{class:"userIcon",src:i});else{var s=r.getAvatarDetails(e.fullName);o=UWA.createElement("div",{html:s.avatarStr}),1==t?(o.addClassName("chg-member-profile-picture"),o.addClassName("chg-team-profile-text")):o.addClassName("avatarIcon"),o.style.setProperty("background",s.avatarColor)}return o.inject(n),n},getRouteTemplateImageDiv:function(e){var t=new UWA.Element("div",{});return UWA.createElement("img",{class:"memberIcon",src:e.icon}).inject(t),t},addNodesInLayoutModel:function(e,t){var i=h.prototype.createTreeDocumentNodeModel(t);e.prepareUpdate(),e.addRoot(i),e.pushUpdate()},removeChildren:function(){var e=this,t=e.contextID,i=e.treeDocument.getSelectedNodes();if(0!=i.length){for(var n="",a="",r={person:[],userGroup:[]},d={person:[],userGroup:[]},c=0;c<i.length;c++){let e=i[c].options.grid;var g=e.role;if(g.indexOf("Owner")>=0||g.indexOf("Originator")>=0){let e=document.getElementById("coMembers");e&&p.isMasked(e)&&p.unmask(e),u.warn(s.CHG_Warn_Member_Remove_Owner_Originator)}else g.indexOf("Coordinator")>=0&&(n=e.userId,o.isChangeCoordinatorConnected=!1),g.indexOf("Approver")>=0&&(a=e.id,o.isRouteTemplateConnected=!1),g.indexOf("Follower")>=0&&("Person"==e.type?r.person.push(e.userId):"Group"==e.type&&r.userGroup.push(e.id)),g.indexOf("Assignee")>=0&&("Person"==e.type?d.person.push(e.userId):"Group"==e.type&&d.userGroup.push(e.id))}if(""!=a||r.person.length>0||r.userGroup.length>0||""!=n||d.person.length>0||d.userGroup.length>0){var h=o.makeUpdateMemberJson("DISCONNECT",n,a,r,d);l.updateChangeOrderMembers(t,h).then(function(t){for(var n=0;n<i.length;n++){var o=i[n].options.grid.role;o.indexOf("Owner")>=0||o.indexOf("Originator")>=0||e.treeDocument.removeRoot(i[n])}let a=document.getElementById("coMembers");a&&p.isMasked(a)&&p.unmask(a)},function(e){let t=document.getElementById("coMembers");t&&p.isMasked(t)&&p.unmask(t)})}}}});return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("contextEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("contextEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMemberFilterLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAAddMemberLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersFeaturesUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","DS/CollectionView/modelProviders/CollectionViewTreeDocumentModelProvider","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";return e.extend({init:function(e){this._parent(e);var t=this;this._modelEvents=null,this._modelEvents=e.contextDetails._modelEvents,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",function(e){e.value?(t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").addClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("minified-header-height")):(t.membersDatagridView.getElement(".content-member-grid-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,g={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){d.readyDragContent(e,t)},onDragStartCell:function(e,t){d.readyDragContent(e,t)}};g=UWA.merge(g,this.options);var m={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.membersDatagrid=new n(g),this.membersDatagrid.rowSelection="single",this.membersDatagrid.cellSelection="none";let O=this.membersDatagrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:O});let G=h.inherit({name:"DocumentThumbnailViewTreeDocumentModelProvider",getPropertyValue:function(e,t){return"picture"===t&&e.options.thumbnail.cloneNode?e.options.thumbnail.cloneNode(!0):this._parent(e,t)}});this.tileView=new o(m),t.tileView.modelProvider=new G;var C={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tileView.onContextualEvent=C;var f={expandInput:{stdTemplate:"expandInputtemplate"}},v={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new p}catch(e){console.log(e)}this.membersDatagrid.getTypeRepresentationFactory().registerTypeTemplates(v),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),a.toolbar=this.membersDatagrid.setToolbar(a.writetoolbarDefinition()),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(v),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(f);t=this;this.membersDatagrid.addEventListener("allCellsRendered",function(){t.membersDatagrid.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.membersDatagrid.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.membersDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}))}),t.membersDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}))}),t.membersDatagrid.addEventListener(i.POINTERHIT,function(e,i){console.log(">>>>>>>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("ca-DataGrid-on-dblclick"),i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.membersDatagridView=UWA.createElement("div",{id:"outer-member-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-member-grid-div"});var D=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-member-grid-div"});this.toolbar.inject(D);var b=UWA.createElement("div",{class:"content-member-grid-div expanded-header-height"}),w=UWA.createElement("div",{class:"content-member-tile-div membertileView expanded-header-height"}),S=UWA.createElement("div",{styles:{position:"relative"},class:"content-member-filter-div memberfilterView hideView"}),I=UWA.createElement("div",{styles:{position:"relative"},class:"content-add-member-div addmemberView hideView"}),_=UWA.createElement("div",{class:"hideView",id:"memberEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(_);var y={target:S,model:this.options.treeDocument},E={id:this.options.contextDetails.id,target:I,model:this.options.treeDocument};s.createMemberFilter(y),r.createAddMemberPanel(E),this.membersDatagrid.inject(b),this.tileView.inject(w),_.inject(w),this.membersDatagridView.addContent(D),this.membersDatagridView.addContent(S),this.membersDatagridView.addContent(I),this.membersDatagridView.addContent(b),this.membersDatagridView.addContent(w)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Label","DS/Controls/TooltipModel","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridContextualMenu","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.relatedScopeDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-relatedScope-tile-div").removeClassName("minified-header-height"))});var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"chg-relatedScope-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"chg-relatedScope-DataGrid-on-reset-search",data:{query:e},context:i})}})},render:function(){try{let e=this.processColumns(),t=this,a={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return h.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};a=UWA.merge(a,this.options);let g={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.relatedScopeDataGridView=new n(a),this.relatedScopeDataGridView.cellSelection="none",this._modelEvents.subscribe({event:"chg-relatedScope-DataGrid-on-search"},function(e){var i=e.query;i&&t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||!e.options.grid.name||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&e.options.grid.name&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"chg-relatedScope-DataGrid-on-reset-search"},function(e){t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new s(g),t.relatedScopeDataGridView.getTreeDocument().getXSO().onAdd(function(e){let i;t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"co-related-scope-object-selection-update",data:{count:i}})}),t.relatedScopeDataGridView.getTreeDocument().getXSO().onRemove(function(e){t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"co-related-scope-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});let C={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return h.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=C;let f={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.relatedScopeDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(f),r.toolbar=this.relatedScopeDataGridView.setToolbar(r.writetoolbarDefinition()),this.toolbar=r.toolbar,this.relatedScopeDataGridView.addEventListener("allCellsRendered",function(){t.relatedScopeDataGridView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),this.relatedScopeDataGridView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&4===t.columnID){var i={};i.cellInfos=t,m.executeMaturity(i)}},document.getElementById("outer-CO-relatedScope-grid-div")&&document.getElementById("outer-CO-relatedScope-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CO-relatedScope-grid-div",class:"outer-CO-relatedScope-grid-div"});let v=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-relatedScope-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"relatedScope-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new u({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new p({title:c.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(v),this.toolbar.inject(v);let D=UWA.createElement("div",{class:"content-CO-relatedScope-grid-div expanded-header-height"}),b=UWA.createElement("div",{styles:{height:"100%"},class:"content-CO-relatedScope-tile-div relatedScopeTileView expanded-header-height"}),w=UWA.createElement("div",{class:"hideView",id:"COrelatedScopeEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(w),this.relatedScopeDataGridView.inject(D),this.tileView.inject(b),w.inject(b),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.addContent(D),this.chgGridViewContainer.addContent(b),this.loader=(new o).inject(this.options.target)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.relatedScopeDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/components/applicationTopBar/ChgGovApplicationTopBarWrapper",["DS/ENOXPageToolBar/js/PageToolBar","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOXBreadcrumb/js/Breadcrumb","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o,a,s,r){"use strict";var l=function(){};return l.prototype.init=function(o,s,r){this.xModelRouter=s,this._applicationChannel=o,this._isReadyToNavigate=!0,this._breadcrumbLink=[];var l={withInformationButton:!0,withWelcomePanelButton:!0,modelEvents:this._applicationChannel,parentContainer:r},d=new e(l);d.render().inject(r);var c=d.getBodyContent();this._tileContent=UWA.createElement("div",{styles:{display:"none",padding:"6px 0",fontSize:"14px"},html:a.CHG_GOV_Welcome_Activity_Recent}),this._tileContent.inject(c),this._title={id:t.ROUTE_HOME,label:"Home"},this._breadcrumb=new i({rootID:"home",toolTip:!0,toolTipText:a.CHG_GOV_LABEL_HOME,rootIcon:"home",modelEvents:this._applicationChannel}),this._breadcrumb.render().inject(c),this._pathModel=[n._KEY,n._VIEWS_PREFERENCES],this._subscribeToEvents()},l.prototype._subscribeToEvents=function(){var e=this;this._applicationChannel.subscribe({event:"welcome-panel-collapse"},function(){e._applicationChannel.publish({event:"triptych-set-size",data:{size:t.LEFT_PANEL_SIZE_COLLAPSED,side:"left"}}),e._applicationChannel.publish({event:"triptych-show-panel",data:"left"})}),this._applicationChannel.subscribe({event:"welcome-panel-expand"},function(){e._applicationChannel.publish({event:"triptych-set-size",data:{size:t.LEFT_PANEL_SIZE_EXPANDED,side:"left"}}),e._applicationChannel.publish({event:"triptych-show-panel",data:"left"})}),this._applicationChannel.subscribe({event:"information-panel-close"},function(){e._applicationChannel.publish({event:"triptych-hide-panel",data:"right"})}),this._applicationChannel.subscribe({event:"triptych-hide-panel"},function(e){"right"==e&&r.publish(`PropHeaderDeActivated:${widget.id}`)}),this._applicationChannel.subscribe({event:"information-panel-open"},function(){e._applicationChannel.publish({event:"triptych-show-panel",data:"right"}),e._applicationChannel.publish({event:"information-panel-visible",data:null})}),this._applicationChannel.subscribe({event:"triptych-panel-hidden"},function(t){"right"===t&&e._applicationChannel.publish({event:"information-panel-hidden",data:null})}),this._applicationChannel.subscribe({event:"breadcrumb-hide"},function(){e._breadcrumb.hide()}),this._applicationChannel.subscribe({event:"topbar-show-title"},function(t){t&&(e._title.id=t.id,e._title.label=t.label,e._tileContent.setContent(t.label)),e._breadcrumb.hide(),e._tileContent.show()}),this._applicationChannel.subscribe({event:"topbar-hide-title"},function(){e._tileContent.hide(),e._breadcrumb.show()}),this._applicationChannel.subscribe({event:"update-ready-to-navigation-flag"},function(t){e._isReadyToNavigate=t}),this._applicationChannel.subscribe({event:"breadcrumb-link-added"},function(i){var n=e._breadcrumb.collection.findWhere({linkID:i.linkID});if(n._attributes.linkID!==t.ROUTE_CO_DETAILS){var o=e._breadcrumbLink.filter(function(e){return e.linkID===n._attributes.linkID}).length>0;n&&!o&&(e._breadcrumbLink.push(n._attributes),console.log("Last link added in Breadcrumb List"))}}),this._applicationChannel.subscribe({event:"breadcrumb-link-removed"},function(t){var i=e._breadcrumbLink.find(function(e){if(e.linkID===t.linkID)return e});if(console.log("Link remove"),i&&e._breadcrumbLink){e._breadcrumbLink.indexOf(i);e._breadcrumbLink=e._breadcrumbLink.splice(i,1),console.log("Link removed from Breadcrumb List")}}),this._applicationChannel.subscribe({event:"breadcrumb-reseted"},function(t){if(!e._isReadyToNavigate){var i=0;for(i=0;i<e._breadcrumbLink.length;i++)e._applicationChannel.publish({event:"breadcrumb-add-link",data:e._breadcrumbLink[i]}),e._breadcrumbLink.shift()}}),this._applicationChannel.subscribe({event:"breadcrumb-link-clicked"},function(i){if(e._applicationChannel.publish({event:"triptych-hide-panel",data:"right"}),e._isReadyToNavigate){if("home"===(s=i.linkID.replace(/-/g,"."))){var n=e._title.id||t.ROUTE_HOME;e._breadcrumbLink=[],e.xModelRouter.navigate(n,{})}else{var o=null,a=0;for(a=0;a<e._breadcrumb.collection.length;a+=1)if(e._breadcrumb.collection.at(a).id===i.linkID){o=e._breadcrumb.collection.at(a).get("additionalData");break}!1,e._breadcrumbLink.pop(),o?e.xModelRouter.navigate(s,o):e.xModelRouter.navigate(s)}}else{var s;if("home"!=(s=i.linkID.replace(/-/g,"."))){var r=e._breadcrumbLink[e._breadcrumbLink.length-1];r.linkID!=i.linkID&&e._applicationChannel.publish({event:"breadcrumb-add-link",data:r})}e._applicationChannel.publish({event:"warning-dialog-create",data:i})}})},l}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAContextContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],function(e,t,i,n,o,a,s,r,l,d){"use strict";var c={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let s=!1,r=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),u=[],p=[],g=[];r.forEach(e=>{u.push(e.options.grid.id),p.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&g.push(e.options.grid.serviceBasedObjId)}),r.length>1&&(s=!0);const h={};h.selectedNodeIDs=p;const m=d("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),C=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,f=e.cellInfos.nodeModel.options.grid.type,v=e.cellInfos.nodeModel.options.grid.name,D=e.cellInfos.nodeModel.options.grid.displayType;let b=[];b.push(f),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(b=b.concat(e.cellInfos.nodeModel.options.grid.kind));const w={objectId:C,objectType:f,objectTaxonomies:b,displayName:v,displayType:D,facetName:"dependency"};(I={}).objectID=e.cellInfos.nodeModel.options.grid.id;const S=m.openWith(w);var I;s?(g.length>0&&a.push(n.createPropertyPushItem(g)),a.push(l.getRelationalExplorerMenu(h)),o.getGlobalVariable().isNative&&(a.push(m.getExploreMenu(that,I)),a.push(m.getExploreWithMenu(that,I)),a.push(m.getOpenMenu(that,I)),a.push(m.getOpenWithNativeMenu(that,I))),g.length>0&&(a.push(l.getMaturityMenu(void 0,g)),a.push(c.getTransferMenu(e))),t(a)):((I={}).objectID=e.cellInfos.nodeModel.options.grid.id,g.length>0&&a.push(n.createPropertyPushItem(g)),a.push(l.getRelationalExplorerMenu(h)),S.then(i=>{o.getGlobalVariable().isNative&&(a.push(m.getExploreMenu(that,I)),a.push(m.getExploreWithMenu(that,I)),a.push(m.getOpenMenu(that,I)),a.push(m.getOpenWithNativeMenu(that,I))),i&&a.push(i),g.length>0&&(a.push(l.getMaturityMenu(void 0,g)),a.push(c.getTransferMenu(e))),t(a)}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)i[o].options.grid.sourceType&&"CSD"!=i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getDeleteMenu:function(e){t.CHG_CA_Context_Remove},getDownloadMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(){s.download(e)}}}},getPreviewMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x fonticon-eye"},action:{callback:function(){s.preview(e)}}}}};return c}),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.writetoolbarDefination=function(t){return{entries:[{id:"cmd_AI_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:e.ECM_GOV_CUSTOM_COL,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:t.custom_view_options}}}}]}},n}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionDataGridView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","require","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionToolbar","DS/Controls/Label","DS/Controls/TooltipModel","DS/UIKIT/Input/Button","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgVersionExplorerLoader","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y,E,O){"use strict";return e.extend({vEObject:{},getVEObject:function(){return this.vEObject.value},init:function(e){this._parent(e);this._modelEvents=null,this._toolbar=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o,this.dgView=void 0},render:async function(e,i){var o=this;if(this.options.treeDocument&&this.options.target){var r={treeDocument:this.options.treeDocument,columns:this.options.columns,cellSelection:"none",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:m.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"dgViewFor_AffectedRevision",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!1,onDragStartRowHeader:function(e,t){g.readyDragContent(e,t)},onDragStartCell:function(e,t){g.readyDragContent(e,t)},onDelayedModelDataRequest:function(e){let t=(n=e.collectionView).getCustomViewsManager().getCustomViews(),i=n.getCustomViewsManager()._currentCustomViewIdentifier;t.map(e=>{if(e.identifier==i){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCOList=e}}});var n=e.collectionView;let o=[],a=[],s=p.getGlobalVariable().customeViewCOList;if(-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let t=e.startNodeIndex;t<=e.endNodeIndex;t++){o.push(n.model[t].options.grid.id),a.push(n.model[t]);for(let e=0;e<s.length;e++)n.model[t].setAttribute(s[e],void 0)}h.updateAsynAttributeColumn(s,o,a)}}};r=UWA.merge(r,this.options),this.dgView=new t(r),this.dgView.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map(e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);p.getGlobalVariable().customeViewCOList=e}}})},s.unsubscribe("ChgGov_delayed_columns_model_updated"+widget.id),s.subscribe("ChgGov_delayed_columns_model_updated"+widget.id,function(e){o.dgView.prepareUpdateView(),o.dgView.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0)}),b.toolbar=this.dgView.setToolbar(b.writetoolbarDefinition()),this.toolbar=b.toolbar,this.dgView.buildStatusBar([{type:n.STATUS.NB_ITEMS},{type:n.STATUS.NB_SELECTED_ROWS}]),this.dgView.getTreeDocument().getXSO().onAdd(function(e){}),this.dgView.getTreeDocument().getXSO().onRemove(function(e){}),this.dgView.addEventListener(a.POINTERHIT,function(e,t){o.onItemClick(e,t)}),document.getElementById("outer-manageScopeAffectedRevision-grid-div")&&document.getElementById("outer-manageScopeAffectedRevision-grid-div").destroy(),this.dgViewContainer=UWA.createElement("div",{id:"outer-manageScopeAffectedRevision-grid-div",class:"outer-manageScopeAffectedRevision-grid-div"}),this.dgViewDiv=UWA.createElement("div",{class:"content-manageScopeAffectedRevision-grid-div"});let l=UWA.createElement("div",{class:"footer-manageScopeAffectedRevision-grid-div"}),d=UWA.createElement("div",{class:"buttons-manageScopeAffectedRevision-grid-div"});new I({value:m.CHG_GOV_Button_Close,className:"primary"}).inject(d).addEvent("onClick",function(){o.closeHandler(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})}),d.inject(l),this.windowOfImpactData=await y.getWindowOfImpact(e),this.scopeAnalysisId=e,this.options.callBackFunction=(()=>this.callbacksFromVersionGraph(i)),this.loadVersionGraph(),this.dgViewContainer.addContent(this.dgViewDiv),this.dgViewContainer.addContent(l),this.dgViewContainer.inject(this.options.target),this.dgViewContainer.setStyle("width",this.options.target.offsetWidth)}},closeHandler:function(){r("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler").manageScopePanel.close()},getReportedObject:function(e){for(var t=this.options.selectedNodeData,i=0;i<e.length;i++){var n=e[i];if(n.options.grid.id==t.options.grid.id)return n}},computeAffectedAsInformation:function(e){var t=[];if(this.windowOfImpactData.data){var i=this.windowOfImpactData.data,n=i[0].introducedInIds,o=i[1].fixedInIds;if((t=[]).push({id:e.options.grid.id,revision:e.options.grid.revision,affectedAs:"Reported"}),n.length>0&&o.length>0){var a=e.getAllDescendants();for(let e of a)if(e.isEmpty()||e.options.grid.id==o[0]){if(!e.isEmpty()&&e.options.grid.id==o[0]){t.push({id:e.options.grid.id,revision:e.options.grid.revision,affectedAs:"Fixed"});break}}else t.push({id:e.options.grid.id,revision:e.options.grid.revision,affectedAs:"Affected"});for(var s=e.getParent();s.options.grid.id!=n[0];)t.push({id:s.options.grid.id,revision:s.options.grid.revision,affectedAs:"Affected"}),s=s.getParent();t.push({id:s.options.grid.id,revision:s.options.grid.revision,affectedAs:"Introduced In"})}else if(n.length>0){for(s=e.getParent();s.options.grid.id!=n[0];)t.push({id:s.options.grid.id,revision:s.options.grid.revision,affectedAs:"Affected"}),s=s.getParent();t.push({id:s.options.grid.id,revision:s.options.grid.revision,affectedAs:"Introduced In"});a=e.getAllDescendants();for(let e of a)e.isEmpty()||t.push({id:e.options.grid.id,revision:e.options.grid.revision,affectedAs:"Affected"})}else if(o.length>0){a=e.getAllDescendants();for(let e of a)if(e.isEmpty()||e.options.grid.id==o[0]){if(!e.isEmpty()&&e.options.grid.id==o[0]){t.push({id:e.options.grid.id,revision:e.options.grid.revision,affectedAs:"Fixed"});break}}else t.push({id:e.options.grid.id,revision:e.options.grid.revision,affectedAs:"Affected"})}else e.getAllDescendants().forEach(function(e){e.isEmpty()||t.push({id:e.options.grid.id,revision:e.options.grid.revision,affectedAs:"Affected"})})}return t},loadVersionGraph:function(){this.dgViewDiv.innerHTML="";let{customizeColumnHash:e,customizeColumnAttributeHash:t}=this.customColumnDef();_.VersionExplorerLoaderFactory(this.options.physicalId,this.options.callBackFunction,this.dgViewDiv,{id:""},"Products",this.vEObject,{customizeColumnHash:e,customizeColumnAttributeHash:t,customizeToolbarHash:{}})},callbacksFromVersionGraph:function(e){this.existingRange=[],this.selectedRevisions=[],this.firstSelection=!0;let t=this.getVEObject().getObjects();var i=this.getReportedObject(t),n=this.computeAffectedAsInformation(i);for(let e=0;e<t.length;e++){let i=t[e];for(let e=0;e<n.length;e++)if(n[e].id==i.options.grid.id){n[e].affectedAs&&(i.updateOptions({grid:{affectedAs:n[e].affectedAs}}),"Reported"!==n[e].affectedAs&&"Affected"!==n[e].affectedAs&&"Introduced In"!==n[e].affectedAs||(i.select(),this.existingRange.push(i.options.grid.revision),this.selectedRevisions.push(i),"Reported"===n[e].affectedAs&&(this.reportedObject=i)));break}}this.getVEObject().subscribeEvent("select",async t=>{this.existingRange.sort();var i=t.data.nodeModel;if(i.options.grid.revision==this.reportedObject.options.grid.revision)i.select(),i.__LISTVIEWCOPY__.select();else{if(this.firstSelection){if(i.options.grid.revision>this.reportedObject.options.grid.revision){i.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:"Affected"}});let e=i.getAllDescendants()[0];e?(e.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:"Fixed"}}),this.fixedInNode=e):this.fixedInNode={}}else i.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:"Introduced In"}}),this.introducedInNode=i;var n=E.processWindowOfImpact(this.introducedInNode,this.fixedInNode);"true"===p.getGlobalVariable().isFullLicence&&"true"===e.contextDetails.access.accessBits["Manage Scope Analysis"]&&await y.updateWindowOfImpact(this.scopeAnalysisId,n),this.introducedInNode=void 0,this.fixedInNode=void 0}this.firstSelection=!1,i.select(),this.existingRange.includes(i.options.grid.revision)||(this.existingRange.push(i.options.grid.revision),this.selectedRevisions.push(i));var o=this;if(i.options.grid.revision>this.reportedObject.options.grid.revision){let e=i.getParent();this.existingRange.includes(e.options.grid.revision)||(e.select(),e.__LISTVIEWCOPY__&&(e.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:"Affected"}}),e.__LISTVIEWCOPY__.select()))}else i.getAllDescendants().some(function(e){!e._isTrueRoot()&&!e.isEmpty()&&e.options.grid.revision<o.reportedObject.options.grid.revision&&(e.select(),e.__LISTVIEWCOPY__&&(e.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:"Affected"}}),e.__LISTVIEWCOPY__.select()))})}this.firstSelection=!0}),this.getVEObject().subscribeEvent("unselect",async t=>{this.existingRange.sort();var i=t.data.nodeModel;if(this.firstSelection&&"Reported"===i.options.grid.affectedAs)i.select(),O.warn("Reported object cannot be unselected");else{if(this.firstSelection){if(i.options.grid.revision>this.reportedObject.options.grid.revision)i.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:"Fixed"}}),this.fixedInNode=i;else{i.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:""}});let e=i.getChildren()[0];e.options.grid.revision!=this.reportedObject.options.grid.revision?(e.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:"Introduced In"}}),this.introducedInNode=e):e.options.grid.revision==this.reportedObject.options.grid.revision&&(this.introducedInNode={})}var n=E.processWindowOfImpact(this.introducedInNode,this.fixedInNode);"true"===p.getGlobalVariable().isFullLicence&&"true"===e.contextDetails.access.accessBits["Manage Scope Analysis"]&&await y.updateWindowOfImpact(this.scopeAnalysisId,n),this.introducedInNode=void 0,this.fixedInNode=void 0}this.firstSelection=!1,i.unselect(),this.existingRange=this.existingRange.filter(e=>e!==i.options.grid.revision),this.selectedRevisions=this.selectedRevisions.filter(e=>e.options.grid.revision!==i.options.grid.revision);var o=this;if(i.options.grid.revision>this.reportedObject.options.grid.revision)i.getAllDescendants().some(function(e){!e._isTrueRoot()&&!e.isEmpty()&&e.options.grid.revision>o.reportedObject.options.grid.revision&&(e.unselect(),e.__LISTVIEWCOPY__&&(e.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:""}}),e.__LISTVIEWCOPY__.unselect()))});else{let e=i.getParent();e._isTrueRoot()||e.isEmpty()||(e.unselect(),e.__LISTVIEWCOPY__&&(e.__LISTVIEWCOPY__.updateOptions({grid:{affectedAs:""}}),e.__LISTVIEWCOPY__.unselect()))}}this.firstSelection=!0})},onItemClick:function(e,t){1==e.multipleHitCount&&this._modelEvents.publish({event:"ChgManageScopeAffectedRevision_DGV_onClick",data:t.nodeModel,context:t.nodeModel}),2==e.multipleHitCount&&(this._modelEvents.publish({event:"ChgGov_DGV_onDbClick",data:t.nodeModel,context:t.nodeModel}),t.nodeModel.select(!0))},showSpinner:function(){console.log("show spinner"),D.mask(this.options.target)},hideSpinner:function(){console.log("hide spinner"),D.unmask(this.options.target)},reapplySortModel:function(){this.dgView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}},customColumnDef:function(){let e={},t={};return e.Disposition={columnDefFunction:e=>{e.insertDefaultColumns([{text:"Affected As",dataIndex:"affectedAs",insertAfterIndex:"description",isDraggable:!1,isHidden:!1,alwaysOn:!0}])}},t.Disposition=!0,{customizeColumnHash:e,customizeColumnAttributeHash:t}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r){"use strict";var l={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const o=[];let a=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();d.length>1&&(a=!0);const c=d.map(e=>e.options.grid.id),u=(d.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),p={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},g=u.openWith(p);a?(o.push(n.createPropertyPushItem(c)),o.push(l.getRelationalExplorerMenu(c)),o.push(r.getMaturityMenu(e)),o.push(l.getTransferMenu(e)),t(o)):g.then(i=>{i&&o.push(i),o.push(r.getMaturityMenu(e)),o.push(l.getTransferMenu(e)),t(o)})})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return l}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAContextContextualMenu","DS/PlatformAPI/PlatformAPI","DS/Controls/Label","DS/Controls/TooltipModel"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.contextDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),u.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-context-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-context-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-context-tile-div").removeClassName("minified-header-height"))})},render:function(){try{let t=this.processColumns(),o=this,u={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:d.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};u=UWA.merge(u,this.options);let h={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.contextDataGridView=new i(u),this.contextDataGridView.cellSelection="none",this.tileView=new a(h);var e={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=e;let m={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.contextDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(m),s.toolbar=this.contextDataGridView.setToolbar(s.writetoolbarDefinition()),this.toolbar=s.toolbar,this.contextDataGridView.addEventListener("allCellsRendered",function(){o.contextDataGridView.buildStatusBar([{type:l.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_TotalItems+o.contextDataGridView.getTreeDocument().getAllDescendants().length}},{type:l.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_SelectedItems+o.contextDataGridView.getTreeDocument().getSelectedNodes().length}}]),o.tileView.buildStatusBar([{type:l.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_TotalItems+o.tileView.getTreeDocument().getAllDescendants().length}},{type:l.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_SelectedItems+o.tileView.getTreeDocument().getSelectedNodes().length}}])}),o.contextDataGridView.getTreeDocument().getXSO().onAdd(function(e){o.contextDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+o.contextDataGridView.getTreeDocument().getSelectedNodes().length}}),o.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+o.contextDataGridView.getTreeDocument().getSelectedNodes().length}})}),o.contextDataGridView.getTreeDocument().getXSO().onRemove(function(e){o.contextDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),o.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})}),document.getElementById("outer-context-grid-div")&&document.getElementById("outer-context-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-context-grid-div",class:"outer-context-grid-div"});let C=UWA.createElement("div",{class:"toolbar-context-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"affectedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new p({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new g({title:d.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(C),this.toolbar.inject(C);let f=UWA.createElement("div",{class:"content-context-grid-div expanded-header-height"}),v=UWA.createElement("div",{styles:{height:"100%"},class:"content-context-tile-div contextTileView expanded-header-height"}),D=UWA.createElement("div",{class:"hideView",id:"contextEmptyTileViewDiv"});UWA.createElement("div",{html:d.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(D),this.contextDataGridView.inject(f),this.tileView.inject(v),D.inject(v),this.chgGridViewContainer.addContent(C),this.chgGridViewContainer.addContent(f),this.chgGridViewContainer.addContent(v),this.loader=(new n).inject(this.options.target)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.contextDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("COrelatedScopeEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("COrelatedScopeEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n){"use strict";return{changeView:function(e){try{i.getGlobalVariable().is3DSpace&&n(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){let t=e.treeDocument.getAllDescendants();for(var i of(e.treeDocument.prepareUpdate(),t))i.updateOptions({label:i.options.grid.title});e.treeDocument.pushUpdate()})}catch(e){console.log(e)}setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridContextualMenu",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p){"use strict";let g={showRMBMenuOnGrid:function(e){return new Promise(function(t,n){let o=[],a=!1,s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();s.length>1&&(a=!0);let r=s.map(e=>e.options.grid.id);o.push(i.createPropertyPushItem(r)),o.push(g.getRelationalExplorerMenu(e));const l=u("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),d=e.cellInfos.nodeModel.options.grid.id;let h={objectId:d,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"changeAction"},m=l.openWith(h),C=null;C=l.getUserAccess("pid:"+d);let f=[];a||(f.push(m),f.push(C)),Promise.all(f).then(i=>{if(i[0]&&o.push(i[0]),!a&&i[1]){let t=i[1].userAccess;"true"!=t.Promote&&"true"!=t.Demote||o.push(p.getMaturityMenu(e)),"true"==t.Transfer&&o.push(g.getTransferMenu(e))}o.push(c.getCopyLink(s)),t(o)})})},getTransferMenu:function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getRelationalExplorerMenu:function(t){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){for(var i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++){var a=i[o].options.grid.id;n.push(a)}e.openRelationalExplorer(n)})}}}},makeCopyLinkObject:function(e){var i={protocol:"3DXContent",data:{items:[]}};return i.data.items.push({envId:t.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),i},showNotification:function(e,t,i,n,o,a,l){var d={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:l||!1};window.notifs||(window.notifs=s,r.setNotificationManager(window.notifs)),a?r.inject(a):r.elements.container.isInjected()||r.inject(),window.notifs.addNotif(d)}};return g}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridContextualMenu"],function(e,t,i,n,o,a,s,r,l,d){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.issueGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),l.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-issue-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-issue-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-issue-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-issue-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-issue-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-issue-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-issue-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-issue-tile-div").removeClassName("minified-header-height"))})},render:function(){try{let e=this.processColumns(),t=this,l={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:r.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){a.readyDragContent(e,t)},onDragStartCell:function(e,t){a.readyDragContent(e,t)}};l=UWA.merge(l,this.options);let c={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.issueGridView=new i(l),this.issueGridView.cellSelection="none",this.tileView=new n(c),t.issueGridView.getTreeDocument().getXSO().onAdd(function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-issue-object-selection-update",data:{count:i}})}),t.issueGridView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-issue-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});let u={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=u;let p={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.issueGridView.getTypeRepresentationFactory().registerTypeRepresentations(p),o.toolbar=this.issueGridView.setToolbar(o.writetoolbarDefinition()),this.toolbar=o.toolbar,this.issueGridView.buildStatusBar([{type:s.STATUS.NB_ITEMS},{type:s.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:s.STATUS.NB_ITEMS},{type:s.STATUS.NB_SELECTED_ROWS}]),document.getElementById("outer-issue-grid-div")&&document.getElementById("outer-issue-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-issue-grid-div",class:"outer-issue-grid-div"});let g=UWA.createElement("div",{class:"toolbar-issue-grid-div"});this.toolbar.inject(g);let h=UWA.createElement("div",{class:"content-issue-grid-div expanded-header-height"}),m=UWA.createElement("div",{styles:{height:"100%"},class:"content-issue-tile-div IssueTileView expanded-header-height"}),C=UWA.createElement("div",{class:"hideView",id:"issueEmptyTileViewDiv"});UWA.createElement("div",{html:r.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(C),this.issueGridView.inject(h),this.tileView.inject(m),C.inject(m),this.chgGridViewContainer.addContent(g),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.addContent(m)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.issueGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMemberFilterLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMemberFilterView","require"],function(e,t){"use strict";var i={createMemberFilter:function(t){i.teamlayoutModel=t.model,new e({events:{memberFilterKeyUp:function(e){i.enteredText=e.target.value;var t={filteringMode:"name",text:i.enteredText};i.filterCollectionAndUpdateUI(t)},memberRoleFilter:function(e){"option1"!=e.target.value&&(i.enteredText=e.target.value);var t={filteringMode:"role",text:i.enteredText?i.enteredText:"",reviewInclude:!1,followInclude:!1,assigneeInclude:!1},n=document.getElementById("allToggle"),o=document.getElementById("revMemToggle");o&&o.checked&&(t.reviewInclude=!0);var a=document.getElementById("followMemToggle");a&&a.checked&&(t.followInclude=!0);var s=document.getElementById("assigneeToggle");s&&s.checked&&(t.assigneeInclude=!0),0==t.reviewInclude&&0==t.followInclude&&0==t.assigneeInclude||1==t.reviewInclude&&1==t.followInclude&&1==t.assigneeInclude||"allToggle"==e.target.id&&1==n.checked?(t.allInclude=!0,n.checked=!0,o.checked=!1,a.checked=!1,s.checked=!1):(t.allInclude=!1,n.checked=!1),i.filterCollectionAndUpdateUI(t)}}}).render().inject(t.target)},filterCollectionAndUpdateUI:function(e){var t=e.text;i.teamlayoutModel.setFilterModel({label:{filterId:"stringRegexp",filterModel:{condition1:{type:"contains",filter:t}}},role:{filterId:"stringRegexp"}});var n=i.teamlayoutModel.getFilterManager().getFilters().role,o={};0==e.allInclude&&(1==e.reviewInclude&&(o.condition1={type:"contains",filter:"Approver"}),1==e.assigneeInclude&&(o.hasOwnProperty("condition1")?(o.operator="or",o.condition2={type:"contains",filter:"Assignee"}):o.condition1={type:"contains",filter:"Assignee"}),1==e.followInclude&&(o.hasOwnProperty("condition1")?(o.operator="or",o.condition2={type:"contains",filter:"Follower"}):o.condition1={type:"contains",filter:"Follower"}),n.filterModel=o)},launchFilterMemberPanel:function(){var e={commandInfo:{type:"Change Request",facet:"Members",action:"CR>Members>Filter"}};t("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var i=document.querySelector(".addmemberView"),n=document.querySelector(".memberfilterView"),o=document.querySelector(".content-member-grid-div"),a=document.querySelector(".content-member-tile-div");i.hide(),o.removeClassName("teamview-opaque"),a.removeClassName("teamview-opaque"),"block"==n.style.display?(n.hide(),o.setStyle("height","calc(100% - 45px)"),a.setStyle("height","calc(100% - 45px)")):(n.show(),o.setStyle("height","calc(100% - 165px)"),a.setStyle("height","calc(100% - 165px)"))}};return i}),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","require","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsContextualMenu","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridViewToolbar","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/Controls/Loader"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S){"use strict";return e.extend({init:function(e){this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:p.getGlobalVariable().get3DSpaceURL(),securityContext:p.getGlobalVariable().getSecurityContext(),isNative:p.getGlobalVariable().isNative},dataForAnalysis:null};this._modelEvents=null,this._toolbar=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o,this.dgView=void 0},loadCustomColumns:function(e){let t=b.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(t){let e=JSON.parse(t);e&&w.restoreCustomViews(e,this.options.custom_view_options)}},render:function(){var e=this;let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");var o=this.processColumns();if(this.options.treeDocument&&this.options.target){var s={treeDocument:this.options.treeDocument,columns:o,cellSelection:"none",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:m.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"ChangeImpactsDGV",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!0,onContextualEvent:function(t){let i=[];if(t&&t.collectionView&&t.cellInfos){t.cellInfos.columnID;if(t.cellInfos.rowID>-1)return C.getChangeImpactsContextualMenu(e,t).then(function(e){return e});t.collectionView.columns.length,t.cellInfos.columnID;i=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},onDragStartRowHeader:function(e,t){g.readyDragContent(e,t)},onDragStartCell:function(e,t){g.readyDragContent(e,t)}};s=UWA.merge(s,this.options),this.dgView=new t(s),this.dgView.getCustomViewsManager().onCustomViewsSave=function(t,n){i.onCustomViewsSave(t,n,e.options.custom_view_options)};let r={expandInput:{stdTemplate:"expandInputtemplate"}},d={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};this.dgView.getTypeRepresentationFactory().registerTypeTemplates(d),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations(r),this.dgView.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),D.toolbar=this.dgView.setToolbar(D.writetoolbarDefination(this.options)),this.toolbar=D.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(d),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(r),this.dgView.buildStatusBar([{type:n.STATUS.NB_ITEMS},{type:n.STATUS.NB_SELECTED_ROWS}]),this.dgView.getTreeDocument().getXSO().onAdd(function(e){}),this.dgView.getTreeDocument().getXSO().onRemove(function(e){}),this.dgView.addEventListener(a.POINTERHIT,function(t,i){e.onItemClick(t,i)});var l=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-change-impacts-div"});this.toolbar.inject(l);let c=UWA.createElement("div",{class:"showGridView"});this.chgGridViewContainer=UWA.createElement("div",{id:"outer-changeImpacts-grid-div",class:"outer-changeImpacts-grid-div"}),this.chgGridViewContainer.addContent(l),this.chgGridViewContainer.addContent(c),this.dgView.inject(c),this.chgGridViewContainer.inject(this.options.target),c.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.dgView,this.options.custom_view_options.ootb_columns=[...o],this.options.custom_view_options.dgvDiv=c,this.options.custom_view_options.dataForAnalysis=this.options.option,this.loader=(new S).inject(this.options.target);let u=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];i.registerCustomEventsOnDGV(u,this.dgView,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},onItemClick:function(e,t){let i=r("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");if(1==e.multipleHitCount)if(this._modelEvents.publish({event:"ChgChangeImpacts_DGV_onClick",data:t.nodeModel,context:t.nodeModel}),t&&11===t.columnID){if("proposed_detail_obj_revision"===e.target.className){let e={};e.id=t.nodeModel.options.grid.proposedID,e.type=t.nodeModel.options.grid.proposedType,e.title=t.nodeModel.options.grid.proposedTitle,e.name=t.nodeModel.options.grid.proposedName,i.launchVersionExplorer(e)}else if(e.target.className.contains("proposed_detail_obj_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};f.buildAndDisplayContextualMenu(e.target,t)}}else if(t&&4==t.columnID){var n={};n.cellInfos=t,i.executeMaturity(n)}else if(t&&3==t.columnID){let e={};e.id=t.nodeModel.options.grid.id,e.type=t.nodeModel.options.grid.type,e.title=t.nodeModel.options.grid.title,e.name=t.nodeModel.options.grid.name,i.launchVersionExplorer(e)}2==e.multipleHitCount&&(this._modelEvents.publish({event:"ChgGov_DGV_onDbClick",data:t.nodeModel,context:t.nodeModel}),t.nodeModel.select(!0))},showSpinner:function(){console.log("show spinner"),v.mask(this.options.target)},hideSpinner:function(){console.log("hide spinner"),v.unmask(this.options.target)},reapplySortModel:function(){this.dgView.reapplySortModel()}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/Controls/Label","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","DS/Controls/ComboBox","DS/Controls/Button","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D){"use strict";var b=m.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"irDispositions",useAsyncPreExpand:!0});return e.onPreExpand(async function(e){console.log("Into the treeDocument for dispostion")}),e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",b)},loadAffectedItemsData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crDispositionsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crDispositions");e&&h.isMasked(e)&&h.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=e.name+" | "+e.typeNLS;var n,a=e.maturityNLS;e.maturityWithBadge=e.maturityNLS,e.icon=e.dispositionIcon,e.previewIcon=e.dispositionPreviewIcon;var s=this.getCustomTooltip(e),r=[];if(o.getGlobalVariable().is3DSpace?n='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":(n=e.title,e.AffectedItemInformation[0].title),e&&e.dispositionId){e.dispositionName=this.dispositionNameMethod(e.dispositionIcon,e.dispositionName);var d=e.resolvedByInformation[0];if(e.approversList=e.approvers,e.approvers&&e.approvers.length>0){[].push([]),e.dispositionInformation=[{}],e.approvers=D.addApproversUserIconMethod(e.approvers)}else e.approvers=D.addApproversDefaultMethod();if(d&&d.indexResolvedBy&&d.indexResolvedBy.length>0){let t=d.indexResolvedBy[0].resolvedByName?d.indexResolvedBy[0].resolvedByName:"",i=d.indexResolvedBy[0].resolvedByIcon?d.indexResolvedBy[0].resolvedByIcon:"";e.resolvedByName=t,e.dispositionResolvedBy=D.resolvedByNameMethod("",t,i)}else d&&d.non3DSpaceNonIndexedResolvedBy&&d.non3DSpaceNonIndexedResolvedBy.length>0?l.resolvedByInformationForCrossServiceAndRecents(d.non3DSpaceNonIndexedResolvedBy).then(function(t){let i=t[0]&&t[0].resolvedByName?t[0].resolvedByName:"",n=t[0]&&t[0].resolvedByIcon?t[0].resolvedByIcon:"";e.dispositionResolvedBy=D.resolvedByNameMethod("",i,n),e.resolvedByInformation[0].non3DSpaceNonIndexedResolvedBy=t}):e.dispositionResolvedBy=this.resolvedByDefaultForDispostion()}else e.dispositionName=this.defaultDispositionNameValue(),e.dispositionResolvedBy=this.resolvedByDefaultForDispostion(),e.approvers=D.addApproversDefaultMethod();e&&e.AffectedItemInformation&&e.AffectedItemInformation.length>0?(e.AffectedItemInformation.map(e=>{r.push(e.title)}),e.affectedItemsLabel=this.getAffectedItemsMethod(r,e.AffectedItemInformation[0].icon)):e.affectedItemsLabel=this.getDefaultAffectedItemsMethod();let c=e.dispositionType;return c&&(e.dispositionType="DOCUMENT"==c?"documentKey":"NO_FIX"==c?"notFixKey":"FIX"==c?"fixKey":"NOT_IMPACTED"==c?"notImpactedTypeKey":"noneKey"),e.dispositionRevision=e.dispositionRevision,new i({label:n,subLabel:t,description:a,grid:e,icons:[e.icon],thumbnail:e.previewIcon,customTooltip:s,contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},addExistingChildren:function(e){var t=this,i=this.contextID,n=document.getElementById("outer-dispositions-grid-div");"undefined"!=n&&null!=n&&h.mask(n),r.addExistingInIRAffectedItems(i,e).then(async function(e){console.log("AffectedItems list: "+e);var i={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data.splice(0,1));var o=await l.processCRAffectedItems(e);if(ChgIRAffectedItemsDataGridModel.prototype.addNodesInLayoutModel(t.treeDocument,o),h.unmask(n),i&&i.length>0){var s=new Map,r=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=r<50?i.slice(e,e+r):i.slice(e,e+50);for(var d=[],p=new Map,m=n,C=0;C<m.length;C++){var f=m[C];d.push(f.id),p.set(f.id,f)}var v=[];if(d.length>0){var D=l.commonPredicatedForFedSearch(),b=await l.callFederatedSearch(d,D);if(b&&b.results&&b.results.length>0)v=await l.processCRAffectedItemsFederatedSearch(b,p)}ChgIRAffectedItemsDataGridModel.prototype.addNodesInLayoutModel(t.treeDocument,v),s=new Map([...s,...p]),r-=50}if(s&&s.size>0){g.publish("updateIndexingIconForHideOrShowInAffectedItem",{});var w=await u.recent();if(w&&w.results&&w.results.length>0){var S=l.filterNonIndexedDataNew(w,s);s.size!=S.length&&c.warn(a.CHG_GOV_Not_Accessable_Data);var I=[];S.length>0&&(I=await l.processInformationForRecentCRAffected(S)),ChgIRAffectedItemsDataGridModel.prototype.addNodesInLayoutModel(t.treeDocument,I)}}}h.unmask(n)},function(e){h.unmask(n)})},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var i=ChgIRAffectedItemsDataGridModel.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(var n=i.length-1;n>=0;n--)e.addRoot(i[n],0);e.pushUpdate()},removeChildren:function(){var e=this,t=[...this.treeDocument.getSelectedNodes()];if(this.treeDocument.unselectAll(),t.length){for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,updateAction:"DISCONNECT"});var s=this.contextID;r.removeIRAffectedItems(s,i).then(function([i,n]){if(null!=n)for(let e=0;e<t.length;e++){let i=!1;for(let o=0;o<n.length;o++)if(t[e].options.grid.id==n[o]){t.splice(e,1),i=!0;break}1==i&&e--}for(var s=0;s<t.length;s++)e.treeDocument.removeRoot(t[s]);if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crDispositionsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crDispositions");e&&h.isMasked(e)&&h.unmask(e)}0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"}),null!=n&&0!=n.length||c.success(a.CHG_GOV_AffectedItems_Remove)},function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crDispositionsFullViewContainer");e&&h.isMasked(e)&&h.unmask(e)}else{let e=document.getElementById("crDispositions");e&&h.isMasked(e)&&h.unmask(e)}})}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},dispositionNameMethod:function(e,t){let i=UWA.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});var n=[{tag:"img",allowUnsafeHTMLContent:!0,src:e,styles:{"padding-left":"5px"}},{tag:"span",text:t,styles:{"padding-left":"5px"}}];return i.setContent(n),i.outerHTML},resolvedByNameMethod:function(e){var t=new UWA.Element("div"),i=new UWA.Element("div",{class:"dispositionIcon",styles:{width:"20%",height:"100%",position:"absolute",left:0,top:0}}),n=new UWA.Element("div",{class:"dispositionTitleName",styles:{width:"80%",height:"100%",position:"absolute",right:0,top:0}});return i.inject(t),n.inject(t),i.addContent({tag:"span",class:"dispositionIcon wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-change-action wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_ResolvedBy_Icon,styles:{"font-size":"1.2em"}}),n.addContent({tag:"span",html:e.resolvedByName,title:a.CHG_GOV_Investigation_Request_ResolvedBy_Name,styles:{"font-size":"1em"}}),t.outerHTML},defaultDispositionNameValue:function(){var e=new UWA.Element("div"),t=new UWA.Element("div",{class:"chgIRAffectedCreateNewDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",left:0,top:0}}),i=new UWA.Element("div",{class:"chgIRAffectedAddExistingDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",left:"33.33%",top:0}}),n=new UWA.Element("div",{class:"chgIRAffectedDragAndDropDisposition",styles:{width:"33.3%",height:"100%",position:"absolute",right:0,top:0}});return t.inject(e),i.inject(e),n.inject(e),t.addContent({tag:"span",class:"chgIRAffectedCreateNewDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-plus wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Create_Disposition,styles:{"font-size":"1.2em",cursor:"pointer"}}),i.addContent({tag:"span",class:"chgIRAffectedAddExistingDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-down-right wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Add_Existing_Disposition,styles:{"font-size":"1.2em",cursor:"pointer"}}),n.addContent({tag:"span",class:"chgIRAffectedAddExistingDisposition wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-drag-drop wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Drag_And_Drop_Disposition,styles:{"font-size":"1.2em",cursor:"pointer",right:0}}),e.outerHTML},resolvedByDefaultForDispostion:function(){var e=new UWA.Element("div"),t=new UWA.Element("div",{class:"chgIRAffectedCreateNewCAResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",left:0,top:0}}),i=new UWA.Element("div",{class:"chgIRAffectedCreateAddExistingCAResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",left:"33.33%",top:0}}),n=new UWA.Element("div",{class:"chgIRAffectedAddExistingCADragAndDropResolvedby",styles:{width:"33.3%",height:"100%",position:"absolute",right:0,top:0}});return t.inject(e),i.inject(e),n.inject(e),t.addContent({tag:"span",class:"chgIRAffectedCreateNewCAResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-plus wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Create_Resolved_By,styles:{"font-size":"1.2em",cursor:"pointer"}}),i.addContent({tag:"span",class:"chgIRAffectedCreateAddExistingCAResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-down-right wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Add_Existing_ResolvedBy,styles:{"font-size":"1.2em",cursor:"pointer"}}),n.addContent({tag:"span",class:"chgIRAffectedAddExistingCADragAndDropResolvedby wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-drag-drop wux-ui-3ds wux-ui-3ds-lg",title:a.CHG_GOV_Investigation_Request_Drag_And_Drop_ResolvedBy,styles:{"font-size":"1.2em",cursor:"pointer",right:0}}),e.outerHTML},getAffectedItemsMethod:function(e,t){var i=UWA.createElement("div",{styles:{display:"flex","align-items":"center","justify-content":"flex-start"}});return e.forEach((e,n)=>{var o=[{tag:"img",allowUnsafeHTMLContent:!0,src:t,styles:{"padding-left":"5px"}},{tag:"span",text:e,styles:{"padding-left":"5px"}},{tag:"span",class:"affectedItem_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}];i.addContent(o)}),i.outerHTML},getDefaultAffectedItemsMethod:function(){var e=UWA.createElement("div"),t=UWA.createElement("div",{class:"chgIRDispositionAddApprover",styles:{width:"33.3%",height:"100%",position:"absolute",left:"12px",top:0}});return e.appendChild(t),e.outerHTML},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRAddMemberLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRAddMemberView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";var C={createAddMemberPanel:function(t){C.teamlayoutModel=t.model,C.id=t.id,new e({events:{searchChangeCoordinator:function(e){C.searchCategoty="Change Coordinator";var t=n.activateSearch("Person","TransferOwnership");n.search(g.CHG_Add_Member_Change_Coordinator,"Person",C.OnSearchComplete,"Contributors",t,void 0,void 0)},searchAssignee:function(e){C.searchCategoty="Assignee";let t=C.teamlayoutModel.getAllDescendants(),i={condition:"addExistingAssignee",extendedQuery:C.createExcludeListForSearch(t,C.searchCategoty)};var o=n.activateSearch("Person","AddCRAssignee");n.search(g.CHG_Add_Member_Assignee,"Person",C.OnSearchComplete,"AddCRAssignee",o,void 0,"assignee",i)},searchApprover:function(e){C.searchCategoty="Approver";var t=n.activateSearch("Person","TransferOwnership");n.search(g.CHG_Add_Member_Approver,"Route Template",C.OnSearchComplete,"Contributors",t,void 0,void 0)},searchInformedUser:function(e){C.searchCategoty="Follower";let t=C.teamlayoutModel.getAllDescendants(),i={condition:"addExistingFollower",extendedQuery:C.createExcludeListForSearch(t,C.searchCategoty)};var o=n.activateSearch("Person","AddCRFollower");n.search(g.CHG_Add_Member_Follower,"Person",C.OnSearchComplete,"AddCRFollower",o,void 0,"informedUser",i)}}}).render().inject(t.target);var o=t.target.querySelector(".chg-add-member-change-coordinator-field"),a=t.target.querySelector(".chg-add-member-assignee-field"),s=t.target.querySelector(".chg-add-member-approver-field"),r=t.target.querySelector(".chg-add-member-informed-user-field"),u=t.target.querySelector(".chg-add-member-button"),h=t.target.querySelector(".chg-add-member-change-coordinator-field-container"),m=t.target.querySelector(".chg-add-member-approver-field-container"),f=t.target.querySelector(".chg-add-member-informed-user"),v=t.target.querySelector(".chg-add-member-assignee");i.makeDroppable(h,C.ExecuteDropForChangeCoordinatorField),i.makeDroppable(m,C.ExecuteDropForApproverField),i.makeDroppable(f,C.ExecuteDropForInformedUserField),i.makeDroppable(v,C.ExecuteDropForAssigneeField),C.myButtonPrimary=new l({label:g.CHG_Add_Member_Add,emphasize:"primary"}).inject(u);var D=new l({label:g.CHG_Add_Member_Cancel,emphasize:"secondary"}).inject(u);C.modelForChangeCoordinator=new c,C.modelForAssignee=new c,C.modelForApprover=new c,C.modelForFollower=new c,C.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new p).getTrigramNameFilter()),C.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new p).getTrigramNameFilter()),C.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new p).getTrigramNameFilter()),C.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new p).getTrigramNameFilter()),C.autoCompleteChangeCoordinator=new d({elementsTree:C.modelForChangeCoordinator,placeholder:g.CHG_Add_Member_Type_To_Search,customFilterMessage:g.CHG_No_Search_found,multiSearchMode:!1,filterCB:function(e){C.modelForChangeCoordinator.setFilterModel({value:{filterId:"trigramNameFilter_CCO",filterModel:{text:e}}})}}).inject(o),C.autoCompleteAssignee=new d({elementsTree:C.modelForAssignee,placeholder:g.CHG_Add_Member_Type_To_Search,customFilterMessage:g.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){C.modelForAssignee.setFilterModel({value:{filterId:"trigramNameFilter_Assignee",filterModel:{text:e}}})}}).inject(a),C.autoCompleteApprover=new d({elementsTree:C.modelForApprover,placeholder:g.CHG_Add_Member_Type_To_Search,customFilterMessage:g.CHG_No_Search_found,multiSearchMode:!1,filterCB:function(e){C.modelForApprover.setFilterModel({value:{filterId:"trigramNameFilter_Approver",filterModel:{text:e}}})}}).inject(s),C.autoCompleteFollower=new d({elementsTree:C.modelForFollower,placeholder:g.CHG_Add_Member_Type_To_Search,customFilterMessage:g.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){C.modelForFollower.setFilterModel({value:{filterId:"trigramNameFilter_Follower",filterModel:{text:e}}})}}).inject(r),C.myButtonPrimary.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque");var o=null!=C.autoCompleteChangeCoordinator.selectedItems?C.autoCompleteChangeCoordinator.selectedItems.options.identifier:"",a={person:[],userGroup:[]};if(null!=C.autoCompleteAssignee.selectedItems)for(var s=0;s<C.autoCompleteAssignee.selectedItems.length;s++){let e=C.autoCompleteAssignee.selectedItems[s].options;"Person"==e.type?a.person.push(e.identifier):"Group"==e.type&&a.userGroup.push(e.id)}var r=null!=C.autoCompleteApprover.selectedItems?C.autoCompleteApprover.selectedItems.options.id:"",l={person:[],userGroup:[]};if(null!=C.autoCompleteFollower.selectedItems)for(s=0;s<C.autoCompleteFollower.selectedItems.length;s++){let e=C.autoCompleteFollower.selectedItems[s].options;"Person"==e.type?l.person.push(e.identifier):"Group"==e.type&&l.userGroup.push(e.id)}(""!=r||a.person.length>0||a.userGroup.length>0||l.person.length>0||l.userGroup.length>0||""!=o)&&(C.autoCompleteChangeCoordinator.selectedItems=C.autoCompleteApprover.selectedItems=C.autoCompleteAssignee.selectedItems=C.autoCompleteFollower.selectedItems=void 0,C.addmember(o,r,l,a))}),D.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque")})},launchAddMemberPanel:function(){var e={commandInfo:{type:"Change Request",facet:"Members",action:"CR>Members>Add Member"}};m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var i=document.querySelector(".addmemberView"),n=document.querySelector(".memberfilterView"),o=document.querySelector(".content-member-grid-div"),a=document.querySelector(".membertileView"),s=document.querySelector(".chg-add-member-approver"),r=document.querySelector(".chg-add-member-change-coordinator");n.hide(),o.removeClassName("teamview-opaque"),a.removeClassName("teamview-opaque"),s.classList.remove("teamview-opaque"),r.classList.remove("teamview-opaque"),"block"==i.style.display?i.hide():(i.show(),o.addClassName("teamview-opaque"),a.addClassName("teamview-opaque"),C&&C.autoCompleteChangeCoordinator&&C.autoCompleteApprover&&C.autoCompleteAssignee&&C.autoCompleteFollower&&(C.autoCompleteChangeCoordinator.selectedItems=C.autoCompleteApprover.selectedItems=C.autoCompleteAssignee.selectedItems=C.autoCompleteFollower.selectedItems=void 0),1==t.isRouteTemplateConnected&&s.classList.add("teamview-opaque"),1==t.isChangeCoordinatorConnected&&r.classList.add("teamview-opaque"),C.updateAutoCompleteModel(),C.addChangeEventListener(),C.myButtonPrimary.disabled=!0)},updateAutoCompleteModel:function(e){var t=r.getGlobalVariable().contextUser;let i={},n=C.teamlayoutModel.getChildren();for(let e=0;e<n.length;e++){let t=n[e].options.grid;i[t.id]=t.role}var o={categoryId:"changeCordinator",contextUser:t},a={categoryId:"approver",contextUser:t},l={categoryId:"follower",contextUser:t};C.modelForChangeCoordinator.empty(),C.modelForAssignee.empty(),C.modelForApprover.empty(),C.modelForFollower.empty(),s.getListCOMember(o).then(function(e){e.length>999&&h.warn(g.CHG_Add_Member_Warning),C.modelForChangeCoordinator.prepareUpdate();for(var t=0;t<e.length;t++){let n;n="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[t].type.toLowerCase()?e[t].name+"("+e[t].identifier.toUpperCase()+")":e[t].name;var i=new u({label:n,value:{label:n,subLabel:e[t].personRole},name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForChangeCoordinator.addRoot(i)}C.modelForChangeCoordinator.pushUpdate()}),s.getListCOMember(a).then(function(e){e.length>999&&h.warn(g.CHG_Add_Member_Warning),C.modelForApprover.prepareUpdate();for(var t=0;t<e.length;t++){var i=new u({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForApprover.addRoot(i)}C.modelForApprover.pushUpdate()}),s.getListCOMember(l).then(function(e){e.length>999&&h.warn(g.CHG_Add_Member_Warning),C.modelForAssignee.prepareUpdate(),C.modelForFollower.prepareUpdate();for(var t=0;t<e.length;t++){let o,a=e[t].id;if(!i.hasOwnProperty(a)||1!=i[a].contains("Follower")){o="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[t].type.toLowerCase()?e[t].name+"("+e[t].identifier.toUpperCase()+")":e[t].name;var n=new u({label:o,value:{label:o,subLabel:e[t].personRole},name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForFollower.addRoot(n)}}for(var o=0;o<e.length;o++){let t,n=e[o].id;if(!i.hasOwnProperty(n)||1!=i[n].contains("Assignee")){t="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[o].type.toLowerCase()?e[o].name+"("+e[o].identifier.toUpperCase()+")":e[o].name;var a=new u({label:t,value:{label:t,subLabel:e[o].personRole},name:e[o].name,identifier:e[o].identifier,type:e[o].type,id:e[o].id});C.modelForAssignee.addRoot(a)}}C.modelForFollower.pushUpdate(),C.modelForAssignee.pushUpdate()})},addmember:function(e,i,n,s){var r=C.id,l=t.makeUpdateMemberJson("CONNECT",e,i,n,s);o.updateChangeRequestMembers(r,l).then(function(e){var i=a.processedChangeRequestMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout"],function(e){for(var n=e.ChgCRMembersTreeModel.getChildren(),o=[],a=0;a<i.length;a++){var s=i[a];if("Route Template"!=s.type){"Coordinator"==s.role&&(t.isChangeCoordinatorConnected=!0);for(var r=s.id,l=!1,d=0;d<n.length;d++)if(r==n[d].options.grid.id){l=!0;break}if(1==l){e.ChgCRMembersTreeModel.prepareUpdate();var c=n[d].options.description,u="";if(s.role.includes(",")){var p=s.role.split(",");for(let e=0;e<p.length;e++)u+=", "+t.getRoleNLSValue(p[e].trim()),n[d].options.grid.roles.push(p[e].trim())}else u=", "+t.getRoleNLSValue(s.role),n[d].options.grid.roles.push(s.role);var g=n[d].options.grid.role,h=","+s.role;n[d].options.description=n[d].options.grid.roleList=c.concat(u),n[d].options.grid.role=g.concat(h),e.ChgCRMembersTreeModel.pushUpdate()}else o.push(s)}else o.push(s),t.isRouteTemplateConnected=!0}o.length>0&&e.addNodesInLayout(o)})})},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForChangeCoordinatorField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Change Coordinator")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Follower")},ExecuteDropForAssigneeField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Assignee")},approverFlag:!1,ExecuteDropForAddMemberPanel:function(e,t){if(e&&e.data&&e.data.items){var i=e.data.items;if(UWA.is(i)&&UWA.is(i.length)&&i.length>0){var o=[],s=[];let e=[];for(var r=[],l=0;l<i.length;l++)if(i[l].objectId){var d=i[l].serviceId.toLowerCase();"3dspace"==d||d.includes("3dspace")?o.push(i[l].objectId):"3dswym"==d&&"pno:Person"==i[l].objectType?(s.push(i[l].objectId.replace("iam:","")),r.push(i[l].displayName)):d.includes("usersgroup")&&e.push(i[l])}if(0!=o.length||0!=s.length||0!=e.length){var c=[];0!=o.length&&n.getAdditionObjectInfo(o).then(function(e){for(var i=0;i<o.length;i++){var n=null,s=e.additionObjectInfo[o[i]];if("Approver"===t&&s.type&&"Route Template"===s.type)n=new u({label:s.objectTitle,value:s.objectName,name:s.objectTitle,type:s.type,id:s.pid}),c.push(n),C.autoCompleteApprover.selectedItems=c,C.autoCompleteApprover._applySelectedItems();else if("Change Coordinator"===t&&s.type&&"Person"===s.type){var r=new u({label:s.fullName,value:s.objectName,name:s.fullName,type:s.type,id:s.pid,identifier:s.objectName});c.push(r),C.autoCompleteChangeCoordinator.selectedItems=c,C.autoCompleteChangeCoordinator._applySelectedItems()}else if("Follower"!==t||!s.type||"Person"!==s.type&&"Group"!==s.type){if("Assignee"!==t||!s.type||"Person"!==s.type&&"Group"!==s.type)return void console.log("NLS.ECM_ERR_NO_PERSON_NO_ROUTETEMPLATE");{let e="";"Person"===s.type?e=new u({label:s.fullName,value:s.objectName,name:s.fullName,type:s.type,id:s.pid,identifier:s.objectName}):"Group"===s.type&&(e=new u({label:s.objectTitle,value:s.objectName,name:s.objectTitle,type:s.type,id:s.pid})),c.push(e);l=C.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.name==c[0].options.name)return!0});C.autoCompleteAssignee.selectedItems=l<0?c:a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteAssignee,c),C.autoCompleteAssignee._applySelectedItems(),C.approverFlag=!1}}else{let e="";"Person"===s.type?e=new u({label:s.fullName,value:s.objectName,name:s.fullName,type:s.type,id:s.pid,identifier:s.objectName}):"Group"===s.type&&(e=new u({label:s.objectTitle,value:s.objectName,name:s.objectTitle,type:s.type,id:s.pid})),c.push(e);var l=C.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.name==c[0].options.name)return!0});C.autoCompleteFollower.selectedItems=l<0?c:a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteFollower,c),C.autoCompleteFollower._applySelectedItems(),C.approverFlag=!1}}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)}),0!=s.length&&n.getAdditionSwymPersonInfo(s).then(function(e){for(var i=0;i<s.length;i++){var n=null,o=e.additionObjectInfo[s[i]];"Change Coordinator"===t&&o.type&&"Person"===o.type?(n=new u({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),c.push(n),C.autoCompleteChangeCoordinator.selectedItems=c,C.autoCompleteChangeCoordinator._applySelectedItems()):"Follower"===t&&o.type&&"Person"===o.type?(n=new u({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),c.push(n),C.autoCompleteFollower.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteFollower,c),C.autoCompleteFollower._applySelectedItems()):"Assignee"===t&&o.type&&"Person"===o.type&&(n=new u({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),c.push(n),C.autoCompleteAssignee.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteAssignee,c),C.autoCompleteAssignee._applySelectedItems())}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)});for(let i=0;i<e.length;i++){var p;p=new u({label:e[i].displayName,value:e[i].objectId,name:e[i].displayName,type:e[i].objectType,id:e[i].objectId}),c.push(p),"Assignee"===t?(C.autoCompleteAssignee.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteAssignee,c),C.autoCompleteAssignee._applySelectedItems()):"Follower"===t&&(C.autoCompleteFollower.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteFollower,c),C.autoCompleteFollower._applySelectedItems())}}else h.error(g.ECM_CA_Drop_Not_Supported)}}else console.log("NLS.ECM_CA_Drop_Not_Supported")},createExcludeListForSearch:function(e,t){let i="";for(let n of e)if(n.options.grid.role.includes(t)&&!n.options.grid.id.startsWith("<uuid")&&(i=i+"NOT (physicalid:"+n.options.grid.id+") "),"Group"===n.options.grid.type&&n.options.grid.id.startsWith("<uuid")){let e=n.options.grid.id;i=i+"NOT ("+(e=e.replace(/[<>]/g,""))+") "}return i},addChangeEventListener:function(){C.autoCompleteApprover.addEventListener("change",function(){C.autoCompleteApprover.selectedItems;C.disableButtonFun()||(C.myButtonPrimary.disabled=!0),C.disableButtonFun()&&(C.myButtonPrimary.disabled=!1)}),C.autoCompleteChangeCoordinator.addEventListener("change",function(){C.autoCompleteChangeCoordinator.selectedItems;C.disableButtonFun()||(C.myButtonPrimary.disabled=!0),C.disableButtonFun()&&(C.myButtonPrimary.disabled=!1)}),C.autoCompleteAssignee.addEventListener("change",function(){var e=C.autoCompleteAssignee.selectedItems,t=e.length;if(t>0){var i=e[t-1];C.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.name==i.options.name||1==C.approverFlag)return!0})<0&&(C.autoCompleteAssignee._selectionChips.removeChip(i.options.label),C.autoCompleteAssignee.selectedItems.pop(),C.autoCompleteAssignee.value.pop())}C.disableButtonFun()?C.myButtonPrimary.disabled=!1:C.myButtonPrimary.disabled=!0}),C.autoCompleteFollower.addEventListener("change",function(){var e=C.autoCompleteFollower.selectedItems,t=e.length;if(t>0){var i=e[t-1];C.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.name==i.options.name||1==C.approverFlag)return!0})<0&&(C.autoCompleteFollower._selectionChips.removeChip(i.options.label),C.autoCompleteFollower.selectedItems.pop(),C.autoCompleteFollower.value.pop())}C.disableButtonFun()?C.myButtonPrimary.disabled=!1:C.myButtonPrimary.disabled=!0})},disableButtonFun:function(){return!!(C.autoCompleteFollower&&C.autoCompleteFollower.selectedItems&&C.autoCompleteFollower.selectedItems.length>0)||(!!(C.autoCompleteAssignee&&C.autoCompleteAssignee.selectedItems&&C.autoCompleteAssignee.selectedItems.length>0)||(!(!C.autoCompleteChangeCoordinator||!C.autoCompleteChangeCoordinator.selectedItems)||!(!C.autoCompleteApprover||!C.autoCompleteApprover.selectedItems)))},OnSearchComplete:function(e){var t=[];C.approverFlag=!0;for(var i=0;i<e.length;i++)t.push({objectId:e[i][0],identifier:e[i][1],objectType:e[i][2],displayType:e[i][3],displayName:e[i][5],serviceId:e[i][7]});var n={data:{}};n.data.items=t,C.ExecuteDropForAddMemberPanel(n,C.searchCategoty)}};return C}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("changeActionEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("changeActionEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbar",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarMenu","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n){let o=Object.create(null);return o.getRealizedChangesToolbarDefinition=function(o){let a=t.getMenuInstance(o);e.is(o.groupCAFeature)&&!1===o.groupCAFeature&&a.filterMenu.menu.splice(3,1);let s=[{id:"cmd_5_find",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"find",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Find,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"findRealizedChanges"}}},{id:"cmd_4_ignore",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"ignore",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Ignore,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"ignoreRealizedChange"}}},{id:"move_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"move-to",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_Move,value:a.moveMenu},position:"far",category:"commands"},{id:"cmd_2_download",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"download",fontIconFamily:1},tooltip:n.CHG_GOV_Download,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"downloadRealizedChange"}}},{id:"cmd_1_cust_view",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"cog",fontIconFamily:1},tooltip:n.ECM_GOV_CUSTOM_COL,position:"far",action:{module:"DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil",func:"launchCustomColumnManager",argument:{custom_view_options:o.custom_view_options}}}}];return"true"==i.getGlobalVariable().CHG_CA_REALIZED_REFRESH&&s.push({id:"cmd_0_refresh",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"refresh",fontIconFamily:1},tooltip:n.CHG_GOV_Realized_View_Refresh,position:"far",category:"commands",action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbarHandler",func:"refreshRealizedDGV",argument:{menu:a.filterMenu.menu}}}}),s.push({id:"filter_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"TRACKED"===o.filter?"change-action-realized":"MOVED"===o.filter?"move-to":"IGNORED"===o.filter?"ignore":"select-all-checkboxes",fontIconFamily:1},tooltip:"TRACKED"===o.filter?n.CHG_GOV_Realized_Tracked:"MOVED"===o.filter?n.CHG_GOV_Realized_Moved:"IGNORED"===o.filter?n.CHG_GOV_Realized_Ignored:n.CHG_GOV_Realized_Grouped,value:a.filterMenu},position:"far",category:"view"},{id:"expand_collapse_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"flow-tree-expand-down",fontIconFamily:1},tooltip:n.CHG_GOV_Expanded_All,value:a.expandCollapseMenu},position:"far",category:"view"},{id:"switch_view_menu",dataElements:{typeRepresentation:"functionMenuIcon",icon:{iconName:"view-list",fontIconFamily:1},tooltip:n.CHG_TOOLTIP_GRID_VIEW,value:a.switchViewMenu},position:"far",category:"view"}),{entries:s}},o}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMemberFilterLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRAddMemberLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersFeaturesUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","DS/CollectionView/modelProviders/CollectionViewTreeDocumentModelProvider","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCRAddMemberHandler","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";return e.extend({init:function(e){this._parent(e);var t=this;this._modelEvents=e.contextDetails._modelEvents,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",function(e){e.value?(t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").addClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("minified-header-height")):(t.membersDatagridView.getElement(".content-member-grid-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,g={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){d.readyDragContent(e,t)},onDragStartCell:function(e,t){d.readyDragContent(e,t)}};g=UWA.merge(g,this.options);var m={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.membersDatagrid=new n(g),this.membersDatagrid.rowSelection="single",this.membersDatagrid.cellSelection="none";let N=this.membersDatagrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:N});let A=h.inherit({name:"DocumentThumbnailViewTreeDocumentModelProvider",getPropertyValue:function(e,t){return"picture"===t&&e.options.thumbnail.cloneNode?e.options.thumbnail.cloneNode(!0):this._parent(e,t)}});this.tileView=new o(m),t.tileView.modelProvider=new A;var v={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tileView.onContextualEvent=v;var D={expandInput:{stdTemplate:"expandInputtemplate"}},b={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new p}catch(e){console.log(e)}this.membersDatagrid.getTypeRepresentationFactory().registerTypeTemplates(b),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(D),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),a.toolbar=this.membersDatagrid.setToolbar(a.writetoolbarDefinition()),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(b),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(D);t=this;this.membersDatagrid.addEventListener("allCellsRendered",function(){t.membersDatagrid.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.membersDatagrid.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.membersDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}));if(e.getTreeDocument()){const i=e.getTreeDocument().getSelectedNodes().length;t._modelEvents.publish({event:"cr-members-object-selection-update",data:{count:i}})}}),t.membersDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}));0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-members-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),t.membersDatagrid.addEventListener(i.POINTERHIT,function(e,i){console.log(">>>>>>>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("ca-DataGrid-on-dblclick"),i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.membersDatagridView=UWA.createElement("div",{id:"outer-member-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-member-grid-div"});var w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-member-grid-div"});this.toolbar.inject(w);var S=UWA.createElement("div",{class:"content-member-grid-div expanded-header-height"}),I=UWA.createElement("div",{class:"content-member-tile-div membertileView expanded-header-height"}),_=UWA.createElement("div",{styles:{position:"relative"},class:"content-member-filter-div memberfilterView hideView"}),y=UWA.createElement("div",{styles:{position:"relative"},class:"content-add-member-div addmemberView hideView"}),E=UWA.createElement("div",{class:"hideView",id:"memberEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(E);var O={target:_,model:this.options.treeDocument},G={id:this.options.contextDetails.id,target:y,model:this.options.treeDocument};s.createMemberFilter(O);let T=!1;"true"===f.getGlobalVariable().ECM_EnableAddMemberGenericComponent&&(T=!0),T?C.getDataToBuildAddMemberPanel(G):r.createAddMemberPanel(G),this.membersDatagrid.inject(S),this.tileView.inject(I),E.inject(I),this.membersDatagridView.addContent(w),this.membersDatagridView.addContent(_),this.membersDatagridView.addContent(y),this.membersDatagridView.addContent(S),this.membersDatagridView.addContent(I)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],function(e,t,i,n,o,a,s,r,l){"use strict";var d={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const o=[];let a=!1;const s=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();s.length>1&&(a=!0);const c=s.map(e=>e.options.grid.id),u=(s.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title})),l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices")),p={objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"},g={};g.selectedNodeIDs=c;const h=u.openWith(p);a?(o.push(n.createPropertyPushItem(c)),o.push(r.getRelationalExplorerMenu(g)),o.push(r.getMaturityMenu(e)),o.push(d.getTransferMenu(e)),t(o)):(o.push(n.createPropertyPushItem(c)),o.push(r.getRelationalExplorerMenu(g)),h.then(i=>{i&&o.push(i),o.push(r.getMaturityMenu(e)),o.push(d.getTransferMenu(e)),t(o)}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}}};return d}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n){"use strict";return{changeView:function(e){try{i.getGlobalVariable().is3DSpace&&n(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout"],function(e){let t=e.treeDocument.getAllDescendants();for(var i of(e.treeDocument.prepareUpdate(),t))i.updateOptions({label:i.options.grid.title});e.treeDocument.pushUpdate()})}catch(e){console.log(e)}setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("affectedItemsEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("COissueEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("COissueEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.issueGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),u.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-CO-issue-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-CO-issue-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CO-issue-tile-div").removeClassName("minified-header-height"))});var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"chg-issue-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"chg-issue-DataGrid-on-reset-search",data:{query:e},context:i})}})},render:function(){try{let e=this.processColumns(),t=this,g={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:d.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCOIssueGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};g=UWA.merge(g,this.options);let h={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.issueGridView=new n(g),this.issueGridView.cellSelection="none",this._modelEvents.subscribe({event:"chg-issue-DataGrid-on-search"},function(e){var i=e.query;i&&t.issueGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||!e.options.grid.name||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&e.options.grid.name&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"chg-issue-DataGrid-on-reset-search"},function(e){t.issueGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new a(h),t.issueGridView.getTreeDocument().getXSO().onAdd(function(e){let i;t.issueGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),"InvestigationRequest"==t.options.type?u.publish("ir-issue-object-selection-update",{count:e.getTreeDocument().getSelectedNodes().length}):t._modelEvents.publish({event:"co-issue-object-selection-update",data:{count:i}})}),t.issueGridView.getTreeDocument().getXSO().onRemove(function(e){t.issueGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length&&("InvestigationRequest"==t.options.type?u.publish("ir-issue-object-selection-update",{count:e.getTreeDocument().getSelectedNodes().length}):t._modelEvents.publish({event:"co-issue-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}}))});let m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=m;let C={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};t.issueGridView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&3===t.columnID){var i={};i.cellInfos=t,p.executeMaturity(i)}},this.issueGridView.getTypeRepresentationFactory().registerTypeRepresentations(C),s.toolbar=this.issueGridView.setToolbar(s.writetoolbarDefinition()),this.toolbar=s.toolbar,this.issueGridView.addEventListener("allCellsRendered",function(){t.issueGridView.buildStatusBar([{type:l.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_TotalItems+t.issueGridView.getTreeDocument().getAllDescendants().length}},{type:l.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_SelectedItems+t.issueGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:l.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:l.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),document.getElementById("outer-CO-issue-grid-div")&&document.getElementById("outer-CO-issue-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CO-issue-grid-div",class:"outer-CO-issue-grid-div"});let f=UWA.createElement("div",{class:"toolbar-CO-issue-grid-div"});this.toolbar.inject(f);let v=UWA.createElement("div",{class:"content-CO-issue-grid-div expanded-header-height"}),D=UWA.createElement("div",{styles:{height:"100%"},class:"content-CO-issue-tile-div IssueTileView expanded-header-height"}),b=UWA.createElement("div",{class:"hideView",id:"COissueEmptyTileViewDiv"});UWA.createElement("div",{html:d.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(b),this.issueGridView.inject(v),this.tileView.inject(D),b.inject(D),this.chgGridViewContainer.addContent(f),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.addContent(D),this.loader=(new o).inject(this.options.target)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.issueGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionAutoComplete",["UWA/Core","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/model/changeAction/group/ChgChangeGroupModel","DS/ENOChgServices/scripts/services/ChgDataService","i18n!DS/ENOChangeActionUX/assets/nls/ChangeAction","require"],function(e,t,i,n,o,a,s,r){"use strict";return{selection:null,myAutoComplete:null,autoCompleteModel:null,selectedItemsValue:[],loadAutoComplete:function(e,t){var i=this;if(i.autoCompleteModel=(new o).createTreeDocument(),i.createAutoComplete(i.autoCompleteModel),this.myAutoComplete.inject(e),t){var n=(new o).createNode(t.title,t.id);this.myAutoComplete.value=t.title,i.autoCompleteModel.addRoot(n,0),n.select()}window.myAutoComplete=this.myAutoComplete,a.getListOfGroups().then(function(e){var n=e;(new o).loadData(i.autoCompleteModel,n,t)},function(e){return Promise.reject(e)})},createAutoComplete:function(e,i){var n=this;n.selection=null,this.myAutoComplete=new t({multiSearchMode:!1,elementsTree:e,placeholder:s.ECM_CA_AUTOCOMPLETE_PLACEHOLDER,customFilterMessage:s.ECM_CA_OPTIONS_PLACEHOLDER}),this.myAutoComplete.addEventListener("change",function(e){var t=null;if(e.dsModel.selectedItems)t=e.dsModel.selectedItems.options;n.selection=t})},getSelection:function(){return this.selection}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRRelatedScopeGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r){"use strict";var l={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const o=[];let a=!1;const d=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();let c=[],u=[],p=[];d.forEach(e=>{c.push(e.options.grid.id),u.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&p.push(e.options.grid.serviceBasedObjId)}),d.length>1&&(a=!0);const g=s("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),h=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,m=e.cellInfos.nodeModel.options.grid.type,C=e.cellInfos.nodeModel.options.grid.name,f=e.cellInfos.nodeModel.options.grid.displayType;let v=[];v.push(m),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(v=v.concat(e.cellInfos.nodeModel.options.grid.kind));const D={objectId:h,objectType:m,objectTaxonomies:v,displayName:C,displayType:f,facetName:"dependency"},b=g.openWith(D);a?(p.length>0&&o.push(n.createPropertyPushItem(p)),o.push(l.getRelationalExplorerMenu(u)),p.length>0&&(o.push(r.getMaturityMenu(void 0,p)),o.push(l.getTransferMenu(e))),t(o)):(p.length>0&&o.push(n.createPropertyPushItem(p)),o.push(l.getRelationalExplorerMenu(u)),b.then(i=>{i&&o.push(i),p.length>0&&(o.push(r.getMaturityMenu(void 0,p)),o.push(l.getTransferMenu(e))),t(o)}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)i[o].options.grid.sourceType&&"CSD"!=i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return l}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("impactBasisEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactBasisEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout"],function(e){e.coGridView.coDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRRelatedScopeGridContextualMenu","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.relatedScopeDataGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),u.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-relatedScope-tile-div").removeClassName("minified-header-height"))});var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"cr-relatedScope-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"cr-relatedScope-DataGrid-on-reset-search",data:{query:e},context:i})}})},render:function(){try{let e=this.processColumns(),t=this,a={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return h.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};a=UWA.merge(a,this.options);let u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.relatedScopeDataGridView=new n(a),this.relatedScopeDataGridView.cellSelection="none",this._modelEvents.subscribe({event:"cr-relatedScope-DataGrid-on-search"},function(e){var i=e.query;i&&t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||!e.options.grid.name||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&e.options.grid.name&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-relatedScope-DataGrid-on-reset-search"},function(e){t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new s(u),t.relatedScopeDataGridView.getTreeDocument().getXSO().onAdd(function(e){let i;t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}),e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-related-scope-object-selection-update",data:{count:i}})}),t.relatedScopeDataGridView.getTreeDocument().getXSO().onRemove(function(e){t.relatedScopeDataGridView.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-related-scope-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});let C={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return h.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=C;let f={addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}};this.relatedScopeDataGridView.getTypeRepresentationFactory().registerTypeRepresentations(f),r.toolbar=this.relatedScopeDataGridView.setToolbar(r.writetoolbarDefinition()),this.toolbar=r.toolbar,this.relatedScopeDataGridView.addEventListener("allCellsRendered",function(){t.relatedScopeDataGridView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.relatedScopeDataGridView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.relatedScopeDataGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),this.relatedScopeDataGridView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&4==t.columnID){var i={};i.cellInfos=t,m.executeMaturity(i)}},document.getElementById("outer-relatedScope-grid-div")&&document.getElementById("outer-relatedScope-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-relatedScope-grid-div",class:"outer-relatedScope-grid-div"});let v=UWA.createElement("div",{class:"toolbar-relatedScope-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"affectedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new p({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new g({title:c.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(v),this.toolbar.inject(v);let D=UWA.createElement("div",{class:"content-relatedScope-grid-div expanded-header-height"}),b=UWA.createElement("div",{styles:{height:"100%"},class:"content-relatedScope-tile-div relatedScopeTileView expanded-header-height"}),w=UWA.createElement("div",{class:"hideView",id:"relatedScopeEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(w),this.relatedScopeDataGridView.inject(D),this.tileView.inject(b),w.inject(b),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.addContent(D),this.chgGridViewContainer.addContent(b),this.loader=(new o).inject(this.options.target)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.relatedScopeDataGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovLocalStorage",["DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant"],function(e){"use strict";var t={init:function(e){var n;(t._LOCALSTORAGE_USER_ID=e,window.localStorage.getItem(t._LOCALSTORAGE_KEY))?((n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)))[t._LOCALSTORAGE_KEY].hasOwnProperty(t._LOCALSTORAGE_USER_ID)?n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=Object.assign(i,n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]):n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=i,window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(n))):((n={})[t._LOCALSTORAGE_KEY]={},n[t._LOCALSTORAGE_KEY][t._LOCALSTORAGE_USER_ID]=i,window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(n)))},destroy:function(){window.localStorage.removeItem(t._LOCALSTORAGE_KEY)},isPath:function(e,i){try{if(window.localStorage.getItem(t._LOCALSTORAGE_KEY)){if(Array.isArray(e)){for(var n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)),o=0;o<e.length;o++){if(!n[e[o]]&&""!=n[e[o]])return console.log("ChgGovLocalStorage getItem() path doesn't exist"),!!i&&void 0;n=n[e[o]]}return!i||n}return console.log("ChgGovLocalStorage getItem() argument is not a Array"),!!i&&void 0}return console.log("ChgGovLocalStorage getItem() LocalStorage not initialize"),!!i&&void 0}catch(e){return console.error(e),!!i&&void 0}},getValue:function(e){return this.isPath(e,!0)},setValue:function(e,i){if(this.isPath(e,!1)){var n=JSON.parse(window.localStorage.getItem(t._LOCALSTORAGE_KEY)),o=JSON.parse(JSON.stringify(e));window.localStorage.setItem(t._LOCALSTORAGE_KEY,JSON.stringify(this.recursiveSearch(n,o,i,!0)))}},recursiveSearch:function(e,t,i,n){return 2==t.length?e[t[1]]=i:n?this.recursiveSearch(e[t[0]],t,i,!1):(t.shift(),this.recursiveSearch(e[t[0]],t,i,!1)),e}};t._LOCALSTORAGE_KEY=e._KEY,t._LOCALSTORAGE_VIEWS_PREFERENCES=e._VIEWS_PREFERENCES,t._LOCALSTORAGE_MY_CHANGE_ORDERS=e._MY_CHANGE_ORDERS,t._LOCALSTORAGE_CHANGE_ORDERS_DETAILS=e._CHANGE_ORDERS_DETAILS,t._LOCALSTORAGE_RECENTLY_OPENED=e._RECENTLY_OPENED;var i={"xchange-views-preferences":{"info-panel":{"info-open":"","info-context":"","info-width":""},"xchange-my-change-orders":{"xchange-list-view":{view:"",filterview:"",sort:{},search:"",selections:[],filters:{},tagFilter:{}}},"xchange-change-orders-details":{tab:""},"xchange-change-requests-details":{tab:""},"xchange-change-actions-details":{tab:""},"xchange-investigation-requests-details":{tab:""},"xchange-recently-opened":{objectIDs:""}}};return t}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager",["UWA/Class","DS/ENOChgGovernanceUX/scripts/util/ChgGovLocalStorage","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o){"use strict";return e.singleton({init:function(){var e=o.getGlobalVariable();this.contextUser=e.contextUser},initialize:function(e,n,o){this._withLocalStorage=e,this._withWidgetPreferences=n,this._withUserPreferences=o,e&&t.init(this.contextUser),n&&i.prototype.initWidgetViewPreferences()},setUserId:function(e){this.userID=e},isWidgetPreferencePath:function(e){return!!this._withWidgetPreferences&&i.prototype.isPath(e,!1)},updatePreference:function(e,n){this._withWidgetPreferences&&i.prototype.updateWidgetViewPreferences(e,n),this._withLocalStorage&&(e.splice(1,0,this.userID),t.setValue(e,n)),this._withUserPreferences},updateTab:function(e,t){this.updatePreference(e.concat([n._TAB]),t)},updateFilter:function(e,t){this.updatePreference(e.concat([n._LIST_VIEW,n._FILTERVIEW]),t)},updateRecents:function(e,t){this.updatePreference(e.concat([n._OBJECTIDs]),t)},getPreference:function(e){return console.log("XChangeApplicationPreferencesLanager -getPreference : "+e),this._withWidgetPreferences&&null!=this.getWidgetPreferenceValue(e)&&this.getWidgetPreferenceValue(e)?this.getWidgetPreferenceValue(e):this._withLocalStorage?(e.splice(1,0,this.userID),this.getLocalStorageValue(e)):void 0},getTab:function(e){return this.getPreference(e.concat([n._TAB]))},getFilter:function(e){return this.getPreference(e.concat([n._LIST_VIEW,n._FILTERVIEW]))},getRecents:function(e){return this.getPreference(e.concat([n._OBJECTIDs]))},setRouteInfo:function(e){if(this._withWidgetPreferences){var t=[n._KEY,n._LAST_ROUTE],o={name:e&&e.name?e.name:void 0,params:e&&e.params?e.params:void 0};i.prototype.updateWidgetViewPreferences(t,o),console.log(JSON.parse(widget.getValue("xchange-app"))),console.log("")}},getRouteInfo:function(){if(this._withWidgetPreferences){var e=[n._KEY,n._LAST_ROUTE];return this.getWidgetPreferenceValue(e)}return{name:void 0,params:{}}},getLocalStorageValue:function(e){return t.getValue(e)},getWidgetPreferenceValue:function(e){return i.prototype.getValue(e)}})}),define("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I){"use strict";var _=Object.create(null);return _.getColumns=function(){let e=[];return e.push(S.getColumnDefinition({dataIndex:"titleTree"})),e.push(S.getColumnDefinition({dataIndex:"co_name"})),e.push(S.getColumnDefinition({dataIndex:"maturityWithBadge"})),"true"===i.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(S.getColumnDefinition({dataIndex:"ApprovalStatus"})),e.push(S.getColumnDefinition({dataIndex:"severityNLS"})),e.push(S.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(S.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(S.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(S.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(S.getColumnDefinition({dataIndex:"applicabilityNLS"})),e.push(S.getColumnDefinition({dataIndex:"modificationDate"})),e.push(S.getColumnDefinition({dataIndex:"creationDate"})),e},_.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:i.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},_.showNotification=function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=f,v.setNotificationManager(window.notifs)),a?v.inject(a):v.elements.container.isInjected()||v.inject(),window.notifs.addNotif(r)},_.getRelationalExplorerMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[];for(let e=0;e<t.length;e++){let i=t[e].options.grid.id;o.push(i)}e.openRelationalExplorer(n||o)})}}}},_.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<t.length;e++)n.push(t[e].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},_.getDeleteMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){let e=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),t=[];for(let i=0;i<e.length;i++){let n=e[i],o={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(o)}let o=require("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout");a.deleteNodes(t,n,o.removeDataFromGrid)}}}},_.changeView=function(i){if(widget.body.getDimensions().width<=n.MOBILE_CUTOFF?o.updateCASummaryViewMobile(i):o.updateCASummaryViewDesktop(i),"GridView"==i){this.currentView="Grid";let i=t.toolbar.getNodeModelByID("view");i&&"view-list"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),i.options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";let n=document.querySelector(".crgridView");n&&(n.removeClassName("hideView"),n.removeClassName("nonVisible"),n.addClassName("showView"));let o=document.querySelector(".crtileView");o&&(o.removeClassName("showView"),o.addClassName("hideView"))}else if("TileView"==i){this.currentView="Tile";let i=t.toolbar.getNodeModelByID("view");i&&"view-small-tile"!=i.options.grid.semantics.icon.iconName&&i.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),i.options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected";let n=document.querySelector(".crgridView");n&&(n.removeClassName("showView"),n.addClassName("hideView"));let o=document.querySelector(".crtileView");o&&(o.removeClassName("hideView"),o.addClassName("showView"))}},_.createCustomSeverity=function(e,t){let i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);let a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},_.createCustomOwner=function(e,t){let n="/api/user/getpicture/login/"+t+"/format/normal",o=i.getGlobalVariable().computeSwymUrl(n),a=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{let e=s.getAvatarDetails(t);(l=UWA.createElement("div",{html:e.avatarStr,class:"avatarIcon"})).style.setProperty("background",e.avatarColor)}l.inject(r);let d=UWA.createElement("span",{class:"userName",html:t});return r.inject(a),d.inject(a),a.outerHTML},_.createHeaderFieldsJSON=function(t){return new Promise(function(i,n){let o={"ds6w:project":[t.model.collabspace],"ds6w:organizationResponsible":[t.model.organization]};p.getNLSValuesPromise(o).then(function(n){let o=n["ds6w:organizationResponsible"][t.model.organization],a=n["ds6w:project"][t.model.collabspace],s={id:t.model.id,name:t.model.name,revision:t.model.revision,type:t.model.type,policy:t.model.policy,title:t.model.title,thumbnail:t.model.thumbnail,iconURL:t.model.iconURL,minified:!1,onHold:t.model.onHold,isKindOfType:t.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Attachments","RelatedScope"],["orgnaization"]],mapping:{owner:{fieldNLS:e.CHG_GOV_DataGrid_Column_Owner,valueActual:t.model.owner,valueDisplay:t.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},collabSpace:{fieldNLS:e.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:t.model.collabspace,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},maturity:{fieldNLS:e.CHG_GOV_DataGrid_Column_Maturity,valueActual:t.model.maturity,valueDisplay:t.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:e.CHG_GOV_DataGrid_Column_Organization,valueActual:t.model.organization,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},Applicability:{fieldNLS:e.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:e.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0},RelatedScope:{fieldNLS:e.CHG_GOV_Header_RelatedScope,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0}}},freeSpaces:[{type:"text",data:t.model.description}],menuItems:[{id:"chgHold",text:e.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:e.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:e.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"},{id:"chgDuplicateCR",text:e.CHG_GOV_Change_Request_Duplicate_Header_Dropdown,fonticon:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",accessBit:"Duplicate"}]};i(s)})})},_.getCRTabs=function(e,t,i){this._pathRequestsDetails=[l._KEY,l._VIEWS_PREFERENCES,l._CHANGE_REQUESTS_DETAILS];var n=r.getTab(this._pathRequestsDetails);let o="crAffectedItems";o=""==n?"crAffectedItems":n,console.log(n);let a=this.getCRMembersTab(e,t,o),s=this.getCRAssessmentTab(e,t,o,i);return[this.getCRAffectedItemsTab(e,t,o,i),s,this.getCRChangeOrchestrationTab(e,t,o,i),a,this.getCRApprovalsTab(e,t,o)]},_.getCRAssessmentTab=((t,i,n,o)=>{let a=!1;return"crAssessment"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_Assessment,isSelected:a,index:1,value:"crAssessment",content:t.createCRAssessmentTab(i,o),icon:{iconName:"change-request-chart-line-bar",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),_.getCRAffectedItemsTab=((t,i,n,o)=>{let a=!1;return"crAffectedItems"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_AffectedItems,isSelected:a,value:"crAffectedItems",index:0,content:t.createCRAffectedItemsTab(i,o),icon:{iconName:"change-request-attention",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),_.getCRApprovalsTab=((t,i,n)=>{let o=!1;return"crApprovals"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Approvals,isSelected:o,value:"crApprovals",index:4,content:t.createCRApprovalsTab(i,n),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),_.getCRMembersTab=((t,i,n)=>{let o=!1;return"crMembers"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Members,isSelected:o,value:"crMembers",index:3,content:t.createCRMembersTab(i),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),_.getCRChangeOrchestrationTab=((t,i,n,o)=>{let a=!1;return"crOrchestration"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_ChangeOrchestration,isSelected:a,value:"crChangeOrchestration",index:2,content:t.createCROrchestrationTab(i,o),icon:{iconName:"flow-tree-ordered",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),_.displayObjectInfoInsideIDcard=function(e,t=!1){var i=this;d.getChangeRequestInfo(e).then(function(e){c.processedCRSummaryList(e).then(function(o){var a={model:o[0]};i.createHeaderFieldsJSON(a).then(function(i){var a={model:i};if(t)try{let t=I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");(i=o[0]).dueDate=e.data[0].dueDate,i.isKindOfType="Change Request",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:i})}catch(e){console.log(e)}u.navigate(n.ROUTE_CR_DETAILS,{id:i.id,name:i.name,title:i.title,nodeModel:a,mode:"outsideCall"},{reload:!0})})})},function(e){var t=document.getElementsByClassName("moduleWrapper")[0];return t&&w.isMasked(t)&&w.unmask(t),Promise.reject(e)})},_.getChangeRequestModelForIDCard=function(e){return new Promise(function(t,i){d.getChangeRequestInfo(e).then(function(e){c.processedCRSummaryList(e).then(function(e){var i={model:e[0]};t(i)})})})},_.filterView=function(e){if("activeCR"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCR"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},_}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgInActiveCRFilterView",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil"],function(e,t){"use strict";return{filterView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout"],function(e){e.crGridView.crDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.filterView("inactiveCR")},100)})}}}),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil",["DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/PlatformAPI/PlatformAPI","DS/ENOChangeActionUX/scripts/CAPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/UIKIT/Dropdown","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/LifecycleCmd/MaturityCmd","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgMembersServices","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_){"use strict";var y=Object.create(null);return y.getColumns=function(){let e=[];return e.push(S.getColumnDefinition({dataIndex:"titleTree"})),e.push(S.getColumnDefinition({dataIndex:"co_name"})),e.push(S.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(S.getColumnDefinition({dataIndex:"severityNLS"})),e.push(S.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(S.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(S.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(S.getColumnDefinition({dataIndex:"applicabilityNLS"})),e.push(S.getColumnDefinition({dataIndex:"modificationDate"})),e.push(S.getColumnDefinition({dataIndex:"creationDate"})),"true"===r.getGlobalVariable().CHG_APPROVAL_COLUMN&&e.push(S.getColumnDefinition({dataIndex:"ApprovalStatus"})),e},y.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:r.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},y.showNotification=function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=D,b.setNotificationManager(window.notifs)),a?b.inject(a):b.elements.container.isInjected()||b.inject(),window.notifs.addNotif(r)},y.createHeaderFieldsJSON=function(e){return new Promise(function(t,i){let o={"ds6w:project":[e.model.collabspace],"ds6w:organizationResponsible":[e.model.organization]};n.getNLSValuesPromise(o).then(function(i){let n=i["ds6w:organizationResponsible"][e.model.organization],o=i["ds6w:project"][e.model.collabspace],a=[];var s={id:e.model.id,name:e.model.name,revision:e.model.revision,type:e.model.type,title:e.model.title,description:e.model.description,severity:e.model.severity,maturity:e.model.maturity,thumbnail:e.model.thumbnail,iconURL:e.model.iconURL,minified:!1,onHold:e.model.onHold,isKindOfType:e.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Dependency","Attachments"],["orgnaization","Flowdown","isGoverned"]],mapping:{owner:{fieldNLS:m.CHG_GOV_DataGrid_Column_Owner,valueActual:e.model.owner,valueDisplay:e.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},collabSpace:{fieldNLS:m.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:e.model.collabspace,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},maturity:{fieldNLS:m.CHG_GOV_DataGrid_Column_Maturity,valueActual:e.model.maturity,valueDisplay:e.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:m.CHG_GOV_DataGrid_Column_Organization,valueActual:e.model.organization,valueDisplay:n,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"Transfer"},Applicability:{fieldNLS:m.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Dependency:{fieldNLS:m.CHG_GOV_Header_Dependency,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:m.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Flowdown:{fieldNLS:m.CHG_GOV_Header_Flowdown,valueActual:"Unassigned",valueDisplay:"Unassigned",showLoader:!0,displayWhenMinified:!0,editable:!0},isGoverned:{fieldNLS:m.CHG_GOV_Header_isGoverned,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Group:{fieldNLS:m.CHG_GOV_Header_Group,valueActual:void 0,valueDisplay:"Unassigned",showLoader:!0,displayWhenMinified:!0,accessBit:"AddToGroup"}}},freeSpaces:[{type:"text",data:e.model.description}],menuItems:[{id:"chgBOMSync",text:m.ECM_CA_EBOM_Sync_Action,fonticon:"fonticon fonticon-change-action-sync",accessBit:"Synchronization"},{id:"chgHold",text:m.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:m.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:m.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"},{id:"chgDuplicateCA",text:m.CHG_GOV_Change_Action_Duplicate_Header_Dropdown,fonticon:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-duplicate",accessBit:"Duplicate"}]};"true"==r.getGlobalVariable().CHG_CHANGE_GROUP&&a.push("Group"),s.attributes.layout.push(a);let l={id:"chgCAWorkUnder",text:m.CHG_GOV_Header_Menu_WorkUnder,fonticon:"fonticon fonticon-hardhat",accessBit:"WorkUnder"};(r.getGlobalVariable().isNative||r.getGlobalVariable().isPoweredBy)&&(s.menuItems.push(l),g.unsubscribe("change-action-work-under"),g.subscribe("change-action-work-under",function(e){y.publishEventToWebnWinForWorkUnder(e)})),t(s)})})},y.getMaturityMenu=function(e){return{type:"PushItem",title:m.CHG_GOV_Menu_Maturity,fonticon:{family:1,content:"fonticon fonticon-collaborative-lifecycle-management"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=[],a=0;a<i.length;a++)n.push(i[a].options.grid),o.push({physicalid:i[a].options.grid["@id"]||i[a].options.grid.id});new w({context:n,ID:"MaturityHdr"}).executeAsync(o)}}}},y.publishEventToWebnWinForWorkUnder=function(e){let t=e.changeaction;if(t&&t.editability)if("allowed"===t.editability.work_under){let e="Work_Under",n="TRUE";if(r.getGlobalVariable().isPoweredBy){var i=t.attributes.find(e=>"attribute_Synopsis"===e.name);let e=i&&i.value?i.value:"",n=t.name,o=t.description,a=t.id;if(t.attributes){let i=t.attributes;UWA.is(i)&&i.forEach(function(t){"attribute_Synopsis"===t.name&&(e=t.value)})}let s={operation:"Work_Under",operationVersion:"1.0",content:{id:a.replace("pid:",""),name:n,title:e,description:o}};g.publish("webinwin:web:notification",JSON.stringify(s))}else d.DispatchEventToWin(e,n)}else s.error(m.CHG_GOV_Action_WorkUnder_Forbidden)},y.getTabs=function(e,t){this._pathChangeActionsDetails=[u._KEY,u._VIEWS_PREFERENCES,u._CHANGE_ACTIONS_DETAILS];var i=p.getTab(this._pathChangeActionsDetails);let n="ProposedChange";n=null==i||""==i?"ProposedChange":i,console.log(i);let o=this.getProposedChangeTab(e,t,n),a=this.getRealizedChangeTab(e,t,n);return[this.getMembersNewTab(e,t,n),o,a,this.getApprovalsTab(e,t,n)]},y.getMembersNewTab=((e,t,i)=>{let n=!1;return"Members"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_Members,isSelected:n,value:"caMembers",index:0,content:e.createMembersNewTab(t),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),y.getProposedChangeTab=((e,t,i)=>{let n=!1;return"ProposedChange"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_ProposedChanges,isSelected:n,index:1,value:"caProposedChange",content:e.createProposedChangeTab(t),icon:{iconName:"change-action-proposed",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),y.getRealizedChangeTab=((e,t,i)=>{let n=!1;return"RealizedChange"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_RealizedChanges,isSelected:n,index:2,value:"caRealizedChange",content:e.createRealizedChangeTab(t),icon:{iconName:"change-action-realized",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),y.getApprovalsTab=((e,t,i)=>{let n=!1;return"Approvals"==i&&(n=!0),t.isSelected=n,{label:m.CHG_GOV_Home_Tab_Approvals,isSelected:n,value:"caApprovals",index:3,content:e.createApprovalsTab(t,i),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),y.displayObjectInfoInsideIDcard=function(t,n=!1){var s=this;o.getChangeActionInfo(t).then(function(e){var t=a.processChangeActionDetails(e);let o={model:t[0]};s.createHeaderFieldsJSON(o).then(function(e){var o={model:e};if(n)try{let i=_("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");(e=t[0]).isKindOfType="Change Action",i.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:e})}catch(e){console.log(e)}(i.navigate(c.ROUTE_CA_DETAILS,{id:e.id,name:e.name,title:e.title,nodeModel:o,mode:"outsideCall"},{reload:!0}),r.getGlobalVariable().isNative)&&(window.history.replaceState("",e.title,r.getGlobalVariable().nativeURL),"true"!=r.getGlobalVariable().CHG_NATIVE_BREADCRUMB&&i.getDependency("applicationChannel").publish({event:"breadcrumb-hide"}))})},function(t){var i=document.getElementsByClassName("moduleWrapper")[0];i&&e.isMasked(i)&&e.unmask(i)})},y.getChangeActionModelForIDCard=function(e){return new Promise(function(t,i){o.getChangeActionInfo(e).then(function(e){var i={model:a.processChangeActionDetails(e)[0]};t(i)})})},y.changeView=function(e){if(widget.body.getDimensions().width<=c.MOBILE_CUTOFF?h.updateCASummaryViewMobile(e):h.updateCASummaryViewDesktop(e),"GridView"==e){this.currentView="Grid";let e=t.toolbar.getNodeModelByID("view");e&&"view-list"!=e.options.grid.semantics.icon.iconName&&e.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:m.CHG_TOOLTIP_GRID_VIEW}),e.options.grid.data.menu[0].state="selected",e.options.grid.data.menu[1].state="unselected";let i=document.querySelector(".cagridView");i&&(i.removeClassName("hideView"),i.removeClassName("nonVisible"),i.addClassName("showView"));let n=document.querySelector(".catileView");n&&(n.removeClassName("showView"),n.addClassName("hideView"))}else if("TileView"==e){this.currentView="Tile";let e=t.toolbar.getNodeModelByID("view");e&&"view-small-tile"!=e.options.grid.semantics.icon.iconName&&e.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:m.CHG_TOOLTIP_TILE_VIEW}),e.options.grid.data.menu[0].state="unselected",e.options.grid.data.menu[1].state="selected";let i=document.querySelector(".cagridView");i&&(i.removeClassName("showView"),i.addClassName("hideView"));let n=document.querySelector(".catileView");n&&(n.removeClassName("hideView"),n.addClassName("showView"))}},y.getDeleteMenu=function(e,t,i){return{type:"PushItem",title:m.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){let e=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let t=0;t<e.length;t++){let i=e[t],o={physicalid:i.options.grid.id,nodeName:i.options.grid.name,nodeTitle:i.options.grid.title};n.push(o)}let o=require("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout");l.deleteNodes(n,i,o.removeDataFromGrid)}}}},y.getTransferMenu=function(e,t){return{type:"PushItem",title:m.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){let i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<i.length;e++)n.push(i[e].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},y.getRelationalExplorerMenu=function(e,t){return{type:"PushItem",title:m.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){let i=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<i.length;e++){let t=i[e].options.grid.id;n.push(t)}e.openRelationalExplorer(n)})}}}},y.createCustomOwner=function(e,t){let i="/api/user/getpicture/login/"+t+"/format/normal",n=r.getGlobalVariable().computeSwymUrl(i),o=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),s="";if(r.getGlobalVariable().isSwymInstalled)s=UWA.createElement("img",{class:"userIcon",src:n});else{let e=I.getAvatarDetails(t);(s=UWA.createElement("div",{html:e.avatarStr,class:"avatarIcon"})).style.setProperty("background",e.avatarColor)}s.inject(a);let l=UWA.createElement("span",{class:"userName",html:t});return a.inject(o),l.inject(o),o.outerHTML},y.filterView=function(e){if("activeCA"==e)(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",i.options.grid.data.menu[1].state="unselected";else if("inactiveCA"==e){var i;(i=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",i.options.grid.data.menu[1].state="selected"}},y}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgInActiveCAFilterView",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil"],function(e,t){"use strict";return{filterView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout"],function(e){e.caGridView.caDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.filterView("inactiveCA")},100)})}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar","DS/Controls/Popup","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/Menu/ContextualMenu","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/Handlebars/Handlebars4","text!DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridProposedCAPopoverTemplate.html","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgInfraService"],function(e,t,i,n,o,a,s,r,l,d,c,u,p){"use strict";let g=Object.create(null);return g.getColumns=function(i,n){let o=!0;(i&&"false"===i.AddImpactedItems&&"false"===i.RemoveImpactedItems||n)&&(o=!1);let a=[];return a.push(c.getColumnDefinition({dataIndex:"titleTree"})),a.push(c.getColumnDefinition({dataIndex:"typeNLS"})),a.push(c.getColumnDefinition({dataIndex:"name"})),a.push(c.getColumnDefinition({dataIndex:"revision"})),a.push(c.getColumnDefinition({dataIndex:"reasonForChange",editableFlag:o,massUpdateAllowedFlag:o})),a.push(c.getColumnDefinition({dataIndex:"maturityWithBadge"})),a.push(c.getColumnDefinition({dataIndex:"ownerFullName"})),a.push({text:e.CHG_GOV_DataGrid_Column_ProposedCA,dataIndex:"proposedChangeAction",editableFlag:!1,alwaysVisibleFlag:!1,visibleFlag:!0,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellGroupingKey:function(e){let t=e.nodeModel.options.grid.proposedChangeActionsData;if(!t)return"";switch(t.length){case 0:return"none";case 1:return t[0].title;default:return t.length}}}),a.push({text:e.CHG_COUMN_IMPACT,dataIndex:"impact",editableFlag:!n&&o,typeRepresentation:"impact",editionPolicy:"EditionOnOver",massUpdateAllowedFlag:!0,filterId:"set",filterModel:[]}),t.getGlobalVariable().is3DSpace&&(a[0].allowUnsafeHTMLContent=!0,a[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title}),a},g.changeView=function(t,i){if("GridView"==t)this.currentView="Grid",(n=i.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-impactedItem-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".content-impactedItem-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==t){var n,o,a;this.currentView="Tile",(n=i.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-impactedItem-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".content-impactedItem-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},g.getProposedColumnBasedOnData=function(e){if(e.length>1){let t=new UWA.createElement("a",{class:"proposedChangeActionsCount"});return t.innerText=e.length,t.outerHTML}if(1==e.length){var t=UWA.createElement("div",{class:"proposedChangeActionField"}),i=UWA.createElement("span",{class:"proposedChangeActionTitle",html:" "+e[0].title+" ("+e[0].name+")"}),n=e[0].icon;return UWA.createElement("img",{src:n}).inject(t),i.inject(t),t.outerHTML}},g.getRMBProposedChangeColumn=function(e){return new Promise(function(t,i){let n=[],o=null;e.forEach(e=>{n.push(e.id),o={objectId:e.id,objectType:e.type,displayName:e.name,displayType:e.typeNLS,facetName:"impactedItem"}});let a=[];var s=[];const l=r.openWith(o);s.push(l);const d={};d.selectedNodeIDs=n,Promise.all(s).then(i=>{i[0]&&a.push(i[0]),a.push(u.createPropertyPushItem(n)),a.push(c.getRelationalExplorerMenu(d)),a.push(p.getCopyLink(e)),t(a)})})},g.getPopupProposedChangeColumn=function(e,t){let i=g.getPopupContentProposedChangeColumn(t.options.grid.proposedChangeActionsData);var n=new o({target:e,trigger:"click",constraint:widget.body,className:"wux-controls-abstract wux-controls-popup impactedItemProposedChangePopup"});n.setBody(i),t.options.grid.proposedChangeActionsData.forEach((e,t)=>{s.addEventListener(n.elements.container.getElementsByClassName("impactedItem-proposedChange-popup-table-tr")[t],{callback:function(e){if(e.data.listener.getAttribute("data-changeId")){let t=[],i={id:e.data.listener.getAttribute("data-changeId"),type:e.data.listener.getAttribute("data-changeType"),name:e.data.listener.getAttribute("data-changeName"),typeNLS:e.data.listener.getAttribute("data-changeTypeNLS")};return t.push(i),g.getRMBProposedChangeColumn(t).then(function(e){return e})}return[]}})})},g.getPopupContentProposedChangeColumn=function(t){return l.compile(d)({changes:t,heading:e.CHG_GOV_DataGrid_Column_ProposedCA_Popup_Heading})},g}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgPropertiesServices","i18n!DS/ENOChgServices/assets/nls/ChgServiceNLS","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l){"use strict";var d=Object.create(null);function c(e,t){return e>t?1:e==t?0:e<t?-1:void 0}return d.getColumns=function(){var t=[{text:e.CHG_GOV_DataGrid_Column_Title,dataIndex:"tree",ds6wIndexMapping:"ds6w:label",editableFlag:!1,alwaysVisibleFlag:!0,allowUnsafeHTMLContent:!0,pinned:"left",width:150,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_DataGrid_Column_Name,dataIndex:"ia_name",ds6wIndexMapping:"ds6w:identifier",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellGroupingKey:function(e){return e.nodeModel.options.grid.Name},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_DataGrid_Column_Owner,dataIndex:"ownerFullName",ds6wIndexMapping:"ds6w:responsible",editableFlag:!1,alwaysVisibleFlag:!1,typeRepresentation:"user",filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel){if(i.getGlobalVariable().isSwymInstalled){var t="/api/user/getpicture/login/"+e.nodeModel.getAttributeValue("owner")+"/format/normal";return{icon:t=i.getGlobalVariable().computeSwymUrl(t),label:e.nodeModel.getAttributeValue("ownerFullName")}}return{label:e.nodeModel.getAttributeValue("ownerFullName")}}},getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellGroupingKey:function(e){return e.nodeModel.options.grid.ownerFullName},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_DataGrid_Column_Maturity,dataIndex:"maturityNLS",ds6wIndexMapping:"ds6w:status",editableFlag:!1,alwaysVisibleFlag:!1,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],typeRepresentation:"tag",className:"lc-maturity-state",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute";if(e.nodeModel){var t,i=e.nodeModel.options.grid.maturity;if(i){if(!1===i.contains("."))i=e.nodeModel.getReferenceValue("policy")+"."+i;t=l.getAndCreateMaturityClass(i,"wux-controls-label")}return t}},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("maturityNLS")}},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_IA_Column_Refinement,dataIndex:"refinement",editableFlag:!1,visibleFlag:!0,allowUnsafeHTMLContent:!0,filterId:"set",filterModel:[],getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("refinement")}},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From,dataIndex:"dispFrom",editableFlag:!1,visibleFlag:!0,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("dispFrom")}},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_Title,dataIndex:"dispFromTitle",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},getCellValue:function(e){if(e.nodeModel){return e.nodeModel.getAttributeValue("dispFromTitle")}},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_DataGrid_Column_ImpactBasis,dataIndex:"countImpactBasis",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countImpactBasis")},setCellValue:function(e,t){}},{text:e.CHG_GOV_DataGrid_Column_ImpactedItem,dataIndex:"countImpactedItems",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countImpactedItems")}},{text:e.CHG_GOV_IA_Column_Disp_From_Due_Date,dataIndex:"abstractChangeAnalysisDueDate",ds6wIndexMapping:"ds6w:dueDateParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if("Aggregation"!=e.nodeModel.options.grid.title&&e.nodeModel.options.grid.dueDate!=e.nodeModel.options.grid.title)return function(e){var t="";if(""!=e.nodeModel.options.grid.dueDate&&e.nodeModel.options.grid.dueDate!=s.CHG_NOT_VALID_VALUE){var i=parseInt(widget.getPreference("dueDateApproach").value+1,10),n="",o=new Date;o.setHours(0,0,0,0);var a=new Date(e.nodeModel.options.grid.dueDate);a.setHours(0,0,0,0);var r=Math.ceil(Math.abs(a-o)/864e5);n=""===(n=r<=i&&a>=o?"dueDateApproach":"")&&a<o?"overdue":n;var l=a.toLocaleString("default",{month:"short"}),d=a.getDate(),c=a.getFullYear(),u=" "+l+" "+d+", "+c;UWA.is(n,"string")&&""!==n&&"In Work"==e.nodeModel.options.grid.maturity?"dueDateApproach"===n?t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"fonticon fonticon-clock",styles:{color:"orange"}},{tag:"span",html:u}]}):"overdue"===n&&(t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"fonticon fonticon-attention",styles:{color:"red"}},{tag:"span",html:u}]})):t=UWA.createElement("div",{class:"target-approaching-overdue",html:u})}else{var u="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:u})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_EstimatedStartDate,dataIndex:"estimatedStartDate",ds6wIndexMapping:"ds6w:plannedStartParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if("Aggregation"!=e.nodeModel.options.grid.title&&e.nodeModel.options.grid.estimatedStartDate!=e.nodeModel.options.grid.title)return function(e){var t="";if(""!=e.nodeModel.options.grid.estimatedStartDate&&e.nodeModel.options.grid.estimatedStartDate!=s.CHG_NOT_VALID_VALUE){var i=parseInt(widget.getPreference("dueDateApproach").value+1,10),n="",o=new Date;o.setHours(0,0,0,0);var a=new Date(e.nodeModel.options.grid.estimatedStartDate);a.setHours(0,0,0,0);var r=Math.ceil(Math.abs(a-o)/864e5);n=""===(n=r<=i&&a>=o?"dueDateApproach":"")&&a<o?"overdue":n;var l=a.toLocaleString("default",{month:"short"}),d=a.getDate(),c=a.getFullYear(),u=" "+l+" "+d+", "+c;UWA.is(n,"string")&&""!==n&&"Draft"==e.nodeModel.options.grid.maturity?"dueDateApproach"===n?t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"fonticon fonticon-clock",styles:{color:"orange"}},{tag:"span",html:u}]}):"overdue"===n&&(t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"fonticon fonticon-attention",styles:{color:"red"}},{tag:"span",html:u}]})):t=UWA.createElement("div",{class:"target-approaching-overdue",html:u})}else{var u="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:u})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_EstimatedCompletionDate,dataIndex:"estimatedEndDate",ds6wIndexMapping:"ds6w:plannedDueDateParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if("Aggregation"!=e.nodeModel.options.grid.title&&e.nodeModel.options.grid.estimatedEndDate!=e.nodeModel.options.grid.title)return function(e){var t="";if(""!=e.nodeModel.options.grid.estimatedEndDate&&e.nodeModel.options.grid.estimatedEndDate!=s.CHG_NOT_VALID_VALUE){parseInt(widget.getPreference("dueDateApproach").value+1,10);var i="",n=new Date(e.nodeModel.options.grid.estimatedEndDate),o=new Date(e.nodeModel.options.grid.dueDate);o.setHours(0,0,0,0),n.setHours(0,0,0,0),i=""===i&&n>o?"overdue":i;var a=n.toLocaleString("default",{month:"short"}),r=n.getDate(),l=n.getFullYear(),d=" "+a+" "+r+", "+l;t=UWA.is(i,"string")&&""!==i&&"In Work"==e.nodeModel.options.grid.maturity?UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"overdue"===i?"fonticon fonticon-attention":"",styles:{color:"red"}},{tag:"span",html:d}]}):UWA.createElement("div",{class:"target-approaching-overdue",html:d})}else{var d="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:d})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_CompletionDateActual,dataIndex:"completionDateActual",ds6wIndexMapping:"ds6w:actualEndParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if(e.nodeModel.options.grid.completionDateActual&&e.nodeModel.options.grid.completionDateActual!=e.nodeModel.options.grid.title)return function(e){var t="";if("Complete"==e.nodeModel.options.grid.maturity&&""!=e.nodeModel.options.grid.completionDateActual&&e.nodeModel.options.grid.completionDateActual!=s.CHG_NOT_VALID_VALUE){var i=new Date;i.setHours(0,0,0,0);var n="",o=new Date(e.nodeModel.options.grid.completionDateActual);if(""!=e.nodeModel.options.grid.dueDate&&e.nodeModel.options.grid.dueDate!=s.CHG_NOT_VALID_VALUE){var a=new Date(e.nodeModel.options.grid.dueDate);a.setHours(0,0,0,0),o.setHours(0,0,0,0),n=""===n&&o>a?"overdue":n}var r=o.toLocaleString("default",{month:"short"}),l=o.getDate(),d=o.getFullYear(),c=" "+r+" "+l+", "+d;t=UWA.is(n,"string")&&""!==n&&"Complete"==e.nodeModel.options.grid.maturity?UWA.createElement("div",{class:"target-approaching-overdue",html:[{class:"overdue"===n?"fonticon fonticon-attention":"",styles:{color:"red"}},{tag:"span",html:c}]}):UWA.createElement("div",{class:"target-approaching-overdue",html:c})}else{var c="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:c})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_IA_Column_Disp_From_StartDateActual,dataIndex:"startDateActual",ds6wIndexMapping:"ds6w:actualStartParametric",editableFlag:!1,visibleFlag:!1,allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},onCellRequest:function(e){if(e.nodeModel.options.grid.startDateActual&&e.nodeModel.options.grid.startDateActual!=e.nodeModel.options.grid.title)return function(e){var t="";if(""!=e.nodeModel.options.grid.startDateActual&&e.nodeModel.options.grid.startDateActual!=s.CHG_NOT_VALID_VALUE){var i=new Date(e.nodeModel.options.grid.startDateActual);i.setHours(0,0,0,0);var n=i.toLocaleString("default",{month:"short"}),o=i.getDate(),a=i.getFullYear(),r=" "+n+" "+o+", "+a;e.nodeModel.options.grid.startDateActual&&(t=UWA.createElement("div",{class:"target-approaching-overdue",html:[{tag:"span",html:r}]}))}else{var r="";t=UWA.createElement("div",{class:"target-approaching-overdue",html:r})}e.cellView.setReusableContent(t)}(e)},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)}},{text:e.CHG_GOV_DataGrid_Column_Attachment,dataIndex:"countAttachment",editableFlag:!1,typeRepresentation:"integer",filterId:"number",filterModel:"",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)},getCellValue:function(e){return e.nodeModel.getAttributeValue("isLastNode"),e.nodeModel.getAttributeValue("countAttachment")}}];i.getGlobalVariable().is3DSpace&&(t[0].allowUnsafeHTMLContent=!0,t[0].getCellGroupingKey=function(e){return e.nodeModel.options.grid.title});let n=[{dataIndex:"attribute",text:e.CHG_IA_COLUMN_GROUP_ATTRIBURES,children:[{text:e.CHG_GOV_DataGrid_Column_Benefit_Impact,dataIndex:"benefitImpact",editableFlag:!1,typeRepresentation:"integer",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter(e=>"false"!=e.options.grid.benefitImpactValid&&"Cancelled"!=e.options.grid.maturity);let n=0,o=0,a=0;for(var i=0;i<t.length;i++)isNaN(t[i].options.grid.benefitImpact)||(n+=t[i].options.grid.benefitImpact,a++);return o=Math.round(n/a)}return e.nodeModel.getAttributeValue("benefitImpact")}},{text:e.CHG_GOV_DataGrid_Column_Cost_Impact,dataIndex:"costImpact",editableFlag:!1,typeRepresentation:"integer",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter(e=>"false"!=e.options.grid.costImpactValid&&"Cancelled"!=e.options.grid.maturity);let n=0,o=0,a=0;for(var i=0;i<t.length;i++)isNaN(t[i].options.grid.costImpact)||(n+=t[i].options.grid.costImpact,a++);return o=Math.round(n/a)}return e.nodeModel.getAttributeValue("costImpact")}},{text:e.CHG_GOV_DataGrid_Column_Validation_Effort,dataIndex:"validationEffort",editableFlag:!1,typeRepresentation:"string",allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter(e=>"false"!=e.options.grid.validationEffortValid&&"Cancelled"!=e.options.grid.maturity);var i=0;let o=0,a=0;for(var n=0;n<t.length;n++)isNaN(t[n].options.grid.validationEffort)||(i+=parseFloat(t[n].options.grid.validationEffort),a++);return`&#x2211;  ${i} | x&#772; ${o=i/a} `}return e.nodeModel.getAttributeValue("validationEffort")}},{text:e.CHG_GOV_DataGrid_Column_Risk_Impact,dataIndex:"riskImpact",editableFlag:!1,typeRepresentation:"integer",getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter(e=>"false"!=e.options.grid.riskImpactValid&&"Cancelled"!=e.options.grid.maturity);let n=0,o=0,a=0;for(var i=0;i<t.length;i++)isNaN(t[i].options.grid.riskImpact)||(n+=t[i].options.grid.riskImpact,a++);return o=Math.round(n/a)}return e.nodeModel.getAttributeValue("riskImpact")}},{text:e.CHG_GOV_DataGrid_Column_Implementation_Effort,dataIndex:"implementationEffort",editableFlag:!1,typeRepresentation:"string",allowUnsafeHTMLContent:!0,getCellClassName:function(e){if(e.rowID>=0&&"ia_Total"==e.nodeModel.options.grid.id)return"iaTotalAttribute"},compareFunction:function(e,t,i,n,o){return"ia_Total"!=i.options.grid.id&&"ia_Total"!=n.options.grid.id&&c(e,t)},getCellValue:function(e){if(e.nodeModel.getAttributeValue("isLastNode")){var t=e.nodeModel.getTreeDocument().getAllDescendants();t=t.filter(e=>"false"!=e.options.grid.implementationEffortValid&&"Cancelled"!=e.options.grid.maturity);var i=0;let o=0,a=0;for(var n=0;n<t.length;n++)isNaN(t[n].options.grid.implementationEffort)||(i+=parseFloat(t[n].options.grid.implementationEffort),a++);return`&#x2211; ${i} |  x&#772; ${o=i/a}`}return e.nodeModel.getAttributeValue("implementationEffort")}}]}];return"true"==i.getGlobalVariable().ECMEnableDefaultChangeAnalysis&&(n[0].children[0].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Benefit Impact",n[0].children[1].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Cost Impact",n[0].children[2].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Validation Effort",n[0].children[3].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Risk Impact",n[0].children[4].ds6wIndexMapping="ds6wg:Default Change Analysis Metrics.Implementation Effort",t=[...t,...n]),t},d.changeView=function(i){if("GridView"==i)this.currentView="Grid",(n=t.toolbar.getNodeModelByID("view"))&&"view-list"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),n.options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",(o=document.querySelector(".content-impactAnalysis-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=document.querySelector(".impactAnalysisTileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==i){var n,o,a;this.currentView="Tile",(n=t.toolbar.getNodeModelByID("view"))&&"view-small-tile"!=n.options.grid.semantics.icon.iconName&&n.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),n.options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",(o=document.querySelector(".content-impactAnalysis-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=document.querySelector(".impactAnalysisTileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},d.getRMBForChangeRequest=function(e,t){return new Promise((i,n)=>{let s=[],d={objectId:e.id,objectType:e.type,displayName:e.name,displayType:e.typeNLS},c=[];c.push(e.id),s.push(a.createPropertyPushItem(c)),s.push(r.getRelationalExplorerMenu(void 0,t,c)),s.push(l.getMaturityMenu(void 0,e.id)),o.openWith(d).then(e=>{s.splice(2,0,e),i(s)})})},d.createCustomOwner=function(e,t){var o="/api/user/getpicture/login/"+t+"/format/normal",a=i.getGlobalVariable().computeSwymUrl(o),s=new UWA.Element("div",{class:"members"}),r=new UWA.Element("div",{class:"assignee"}),l="";if(i.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:a});else{var d=n.getAvatarDetails(t);(l=UWA.createElement("div",{html:d.avatarStr,class:"avatarIcon"})).style.setProperty("background",d.avatarColor)}l.inject(r);var c=UWA.createElement("span",{class:"userName",html:t});return r.inject(s),c.inject(s),s.outerHTML},d.filterView=function(e,i){if("activeIA"==e)this.currentFilterView="activeIA",(n=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",n.options.grid.data.menu[1].state="unselected",n.options.grid.data.menu[2].state="unselected",setTimeout(function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],function(e){e.ChgCRImpactAnalysisTreeModel.empty();e.refreshGrid({filterView:"activeIA"})})},100);else if("inactiveIA"==e){this.currentFilterView="inactiveIA",(n=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="selected",n.options.grid.data.menu[2].state="unselected",setTimeout(function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],function(e){e.ChgCRImpactAnalysisTreeModel.empty();e.refreshGrid({filterView:"inactiveIA"})})},100)}else if("rolledUpIA"==e){var n;this.currentFilterView="rolledUpIA",(n=t.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",n.options.grid.data.menu[1].state="unselected",n.options.grid.data.menu[2].state="selected",setTimeout(function(){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],function(e){e.ChgCRImpactAnalysisTreeModel.empty();e.refreshGrid({filterView:"rollecdUpIA"})})},100)}},d.filterInactiveIAView=function(){that.filterView("inactiveIA")},d}),define("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgInfraService","DS/UIKIT/Mask","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p=Object.create(null);return p.getTabs=function(e,t){this._pathChangeOrdersDetails=[l._KEY,l._VIEWS_PREFERENCES,l._CHANGE_ORDERS_DETAILS];var i=r.getTab(this._pathChangeOrdersDetails);let n="ChangeOrchestration";return n=""==i?"ChangeOrchestration":i,console.log(i),[this.getChangeOrchestrationTab(e,t,n),this.getMembersTab(e,t,n),this.getApprovalsTab(e,t,n)]},p.createHeaderFieldsJSON=function(t){return new Promise(function(i,n){let o={"ds6w:project":[t.model.collabspace],"ds6w:organizationResponsible":[t.model.organization]};d.getNLSValuesPromise(o).then(function(n){let o=n["ds6w:organizationResponsible"][t.model.organization],a=n["ds6w:project"][t.model.collabspace];var s={id:t.model.id,name:t.model.name,revision:t.model.revision,type:t.model.type,title:t.model.title,thumbnail:t.model.thumbnail,iconURL:t.model.iconURL,minified:!1,onHold:t.model.onHold,isKindOfType:t.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Applicability","Dependency","Attachments"],["orgnaization","RelatedScope"]],mapping:{owner:{fieldNLS:e.CHG_GOV_DataGrid_Column_Owner,valueActual:t.model.owner,valueDisplay:t.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},collabSpace:{fieldNLS:e.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:t.model.collabspace,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},maturity:{fieldNLS:e.CHG_GOV_DataGrid_Column_Maturity,valueActual:t.model.maturity,valueDisplay:t.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:e.CHG_GOV_DataGrid_Column_Organization,valueActual:t.model.organization,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},Applicability:{fieldNLS:e.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Dependency:{fieldNLS:e.CHG_GOV_Header_Dependency,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Attachments:{fieldNLS:e.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},RelatedScope:{fieldNLS:e.CHG_GOV_Header_RelatedScope,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0}}},freeSpaces:[{type:"text",data:t.model.description}],menuItems:[{id:"chgHold",text:e.CHG_GOV_Header_Menu_Hold,fonticon:"fonticon fonticon-pause",accessBit:"Hold"},{id:"chgResume",text:e.CHG_GOV_Header_Menu_Resume,fonticon:"fonticon fonticon-resume",accessBit:"Resume"},{id:"chgCancel",text:e.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"}]};i(s)})})},p.displayObjectInfoInsideIDcard=function(e,t=!1){var a=this;n.getChangeOrderInfo(e).then(function(e){var n=o.processedChangeOrderDetail(e);if(t)try{let t=u("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var r=e.data[0].dataelements;r.type=e.data[0].type,r.isKindOfType="Change Order",t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:r})}catch(e){console.log(e)}var l={model:n[0]};a.createHeaderFieldsJSON(l).then(function(e){var t={model:e};i.navigate(s.ROUTE_CO_DETAILS,{id:e.id,name:e.name,title:e.title,nodeModel:t,mode:"outsideCall"},{reload:!0})})},function(e){var t=document.getElementsByClassName("moduleWrapper")[0];return t&&c.isMasked(t)&&c.unmask(t),Promise.reject(e)})},p.getChangeOrderModelForIDCard=function(e){return new Promise(function(t,i){n.getChangeOrderInfo(e).then(function(e){var i={model:o.processedChangeOrderDetail(e)[0]};t(i)})})},p.getChangeOrchestrationTab=((t,i,n)=>{let o=!1;return"ChangeOrchestration"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_ChangeOrchestration,isSelected:o,index:0,value:"coOrchestration",content:t.createOrchestrationTab(i),icon:{iconName:"flow-tree-ordered",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),p.getMembersTab=((t,i,n)=>{let o=!1;return"Members"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Members,isSelected:o,value:"coMembers",index:1,content:t.createMembersTab(i),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),p.getApprovalsTab=((t,i,n)=>{let o=!1;return"Approvals"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Approvals,isSelected:o,value:"coApprovals",index:2,content:t.createApprovalsTab(i,n),icon:{iconName:"status-ok",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),p}),define("DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder",["DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil","DS/ENOChgServices/scripts/components/ChgCommonCreateDialog","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENONewWidget/ENONewLauncher","require","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u){var p={onCompleteCallback:function(e){let t=e.data[0].id,a={};a.context=t,a.type="ChangeOrder",u("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").launchPropertyPanelContext(a),r.getGlobalVariable().existingCOIds.push(t),o.displayObjectInfoInsideIDcard(t),n.publish("load-dependency"+widget.id,"pid:"+t);var s=document.getElementById("outer-co-div");i.unmask(s)},onFailureCallback:function(){var e=document.getElementById("outer-co-div");i.unmask(e),console.log("ERROR : FAILED CREATE CO")},createChangeOrder:function(e){let t=l.getUserPreference(d.keys.createKeys.CO_DEF_TYPE),n={context:{service:"3DSpace",tenant:r.getGlobalVariable().tenant,header:{SecurityContext:r.getGlobalVariable().getSecurityContext()}},labelTopBar:s.CHG_NEW_CHANGE_ORDER_FORM,type:"Change Order",silentMode:!1,overlay:!0,options:{typeName:"Change Order",preferedType:t,select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(t){e&&(e.isClickProcessing=!1);var n=document.getElementsByClassName("moduleWrapper")[0];null==n&&"undefined"==n||i.mask(n);let o=t.result[0].identifier,a={};a.context=o,a.type="ChangeOrder";let s=u("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"),r=u("DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil");s.launchPropertyPanelContext(a),r.displayObjectInfoInsideIDcard(o,!0);let c={};c[d.keys.createKeys.CO_DEF_TYPE]=t.result[0].type,l.saveUserPreference(c)},onFailure:function(t){console.log("onFailure..............."+t),e&&(e.isClickProcessing=!1)},onCancel:function(t){e&&(e.isClickProcessing=!1)}}};var o={commandInfo:{type:"Change Order",facet:"Start a New Activity",action:"CO>Start a New Activity>New Change Order"}};u("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:o}),(new c).CreateNew(n)},processChangeOrder:function(e){var i=e.titleText,n={data:[{dataelements:{description:e.DescText,policy:"Fast track Change",title:i}}]};t.createChangeOrder(JSON.stringify(n),p.onCompleteCallback,p.onFailureCallback)},createBlankChangeOrder:function(e,n,o){var a=o.value;if(void 0!==window.__karma__&&(a="ODT_CA"),null!=a&&""!=a.trim()){var s=document.getElementById("outer-co-div");null==s&&"undefined"==s||i.mask(s);var r={data:[{dataelements:{description:a,policy:"Fast track Change",title:a}}]};t.createChangeOrder(JSON.stringify(r),p.onCompleteCallback,p.onFailureCallback)}o.value=""}};return p}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactedItem/ChgCRImpacedItemDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";var m=h.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e,t){this.parentCRId=e,Array.isArray(t)?this.impactAnalysisIds=t:this.impactAnalysisId=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new t({id:"IA_ImpactItem",useAsyncPreExpand:!0});return e.isChildOf=function(e){let t=e.getChildren();for(let e=0;e<t.length;e++)if(this.options.grid.id==t[e].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},loadImpactedItem:function(e,t){e.prepareUpdate();let i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate()},createTreeDocumentNodeModel:function(e){let t=[];for(let i=0;i<e.length;i++){e[i].impactedItem&&"IMPACTED"!=e[i].impactedItem?e[i].impact="notImpactedKey":e[i].impact="impactedKey",e[i].reasonForChange||(e[i].reasonForChange="");let n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=this.createCustomOwnerField(e);e.chgObjOwner=t;let n=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName;var a=e.maturityNLS||e.currentNLS?e.maturityNLS||e.currentNLS:"";e.maturityWithBadge=e.maturityNLS||e.currentNLS?e.maturityNLS||e.currentNLS:"";var s,r=this.getCustomTooltip(e);return s=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:s,subLabel:n,description:a,grid:e,icons:[e.icon],thumbnail:e.previewicon,contextualMenu:["dummy placeholder"],useAsyncPreExpand:!0,customTooltip:r})},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{let t=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}r.inject(a);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),l.inject(n),n.outerHTML},getCustomTooltip:function(e){return e.name&&e.currentNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.impactAnalysisId,s=t.parentCRId,l=document.getElementById("outer-impactedItem-grid-div");"undefined"!=l&&null!=l&&g.mask(l),r.updateExistingImpactItem(s,o,e).then(async function(e){var n={},o={},s=void 0;e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(n=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(o=e.data[0].mapping),e.data.splice(0,1));var r=await u.processIAImpacts(e);if(t.addNodesInLayoutModel(t.treeDocument,r),g.unmask(l),o.length>0&&(s=await t.i3dxInformationFilteringAndCalling(n,o,t.treeDocument)),n&&n.length>0){var h=new Map,m=n.length;for(let i=0;i<n.length;i+=125){let o=[];o=m<125?n.slice(i,i+m):n.slice(i,i+125);for(var C=[],f=new Map,v=o,D=0;D<v.length;D++){var b=v[D];C.push(b.id),f.set(b.id,b)}var w=[];if(C.length>0){var S=u.commonPredicatedForFedSearch(),I=await u.callFederatedSearch(C,S);I&&I.results&&I.results.length>0&&(w=await u.processIAImpactsFederatedSearch(I,f))}t.addNodesInLayoutModel(t.treeDocument,w),h=new Map([...h,...f]),m-=125,e.data=[...e.data,...w]}if(h&&h.size>0){p.publish("updateIndexingIconForHideOrShowInImpacts",{});var _=await c.recent();if(_&&_.results&&_.results.length>0){var y=u.filterNonIndexedDataNew(_,h);h.size!=y.length&&d.warn(a.CHG_GOV_Not_Accessable_Data);var E=await u.processInformationForRecentIAImpactBasis(y);let i=[];E&&(i=E);let n=[];for(let e of i)e.reasonForChange="",e.impactedItem="IMPACTED",n.push(e);t.addNodesInLayoutModel(t.treeDocument,n),e.data=[...e.data,...n]}}}s&&s.length>0&&(e.data=[...e.data,...s]),i(e),g.unmask(l)},function(e){g.unmask(l),n(e)})})},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});let i=this.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate();let n=[];i.forEach(e=>n.push({id:e.options.grid.id})),this.addCAInfoForImpactedItems(n,this.impactAnalysisId)},removeChildren:function(e){let t=this;return new Promise(function(i,n){let o=t.impactAnalysisId,s=t.parentCRId,l=t.treeDocument.getSelectedNodes();l.length?r.updateExistingImpactItem(s,o,e).then(function(e){for(let e=0;e<l.length;e++)t.treeDocument.removeRoot(l[e]);0==t.treeDocument.getChildren().length&&t.treeDocument._modelEvents.publish({event:"treeEmpty"}),i(l),d.success(a.CHG_GOV_ImpactItem_Remove_Success)},function(e){g.unmask(outerDiv),n()}):d.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)})},addCAInfoForImpactedItems:function(e,t){var i=this;r.getCAInfoImpactedItems(e,t).then(e=>{i.mergeProposedCA(e.data)},e=>{})},mergeProposedCA:function(e){let t=this.getTreeDocument().getAllDescendants();for(let i=0;i<e.length;i++)for(let n=0;n<t.length;n++)if(e[i].id==t[n].options.grid.id){let o=l.getProposedColumnBasedOnData(e[i].proposedChangeActions);t[n].updateOptions({grid:{proposedChangeActionsData:e[i].proposedChangeActions,proposedChangeAction:o}})}},i3dxInformationFilteringAndCalling:async function(e,t,i){var n=i;let a=t.length;var s=o.getGlobalVariable().tenant,r=[],l=o.getGlobalVariable().tenantMappings.find(e=>e.platformId===s);for(let i=0;i<a;i++){let o=t[i],a=o.uris,s=a.length,m=o.ServiceInfo,C=o.RelativePath,f=l[m];if(null==f||null==C)continue;let v=f+C;for(let t=0;t<a.length;t+=50){var d=[],p=new Map;let i=[];i=s<50?a.slice(t,t+s):a.slice(t,t+50);for(let t=0;t<i.length;t++){const n=i[t],o=e.findIndex(e=>e.id===n);if(-1!==o){const t=e.splice(o,1)[0];d.push(t),p.set(t.id,t)}}try{var g=await c.fetchbyService({ids:i,url:v});console.log("Result of is "+g);var h=await u.processIAImpactsWithi3dxItems(g,p);console.log("Node information with NLS value"+h),await this.addNodesInLayoutModel(n,h),r=r.concat(h)}catch(e){console.log(e)}console.log("The sliced array is "+i),s-=50}console.log("The modeler information is "+d),console.log("The modeler information is "+p)}return r},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";return e.extend({init:function(e){this._parent(e),this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}},this._modelEvents=null,"undefined"!=e&&"undefined"!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.coDatagridView=""},loadCustomColumns:function(){let e=f.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){var e=this.processColumns(),t=this,g={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCOSummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){s.readyDragContent(e,t)},onDragStartCell:function(e,t){s.readyDragContent(e,t)}};g=UWA.merge(g,this.options),this.coDatagrid=new n(g),this.coDatagrid.cellSelection="none",this.coDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,i){C.onCustomViewsSave(e,i,t.options.custom_view_options)},this.coTilesView=new p({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){s.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.coTilesView.onContextualEvent=h;var m={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:l.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:l.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},f={expandInput:{stdTemplate:"expandInputtemplate"}},v={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.coDatagrid.getTypeRepresentationFactory().registerTypeTemplates(v),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(m),this.coDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}}),a.toolbar=this.coDatagrid.setToolbar(a.writetoolbarDefination(this.options)),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(v),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(f),(t=this).toolbar.addEventListener("onReady",function(e){var i=t.toolbar.getNodeModelByID("addNewBlankCAId");i&&i._associatedView.registerkeyDownCallback(u.createBlankChangeOrder)}),this.coDatagrid.addEventListener("allCellsRendered",function(){t.coDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+t.coDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.coTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+t.coTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+t.coTilesView.getTreeDocument().getSelectedNodes().length}}])}),t.coDatagrid.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),t.coDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.coDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}),t.coTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+t.coDatagrid.getTreeDocument().getSelectedNodes().length}}),t._modelEvents.publish({event:"co-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})}),t.coDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.coDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.coTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?t._modelEvents.publish({event:"co-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):t._modelEvents.publish({event:"co-DataGrid-on-unselect",data:{model:e,context:e},context:e})}),t.coTilesView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount)i.nodeModel.select(!0),t._modelEvents.publish({event:"co-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel});else if(i&&2==i.columnID){var n={};n.cellInfos=i,C.executeMaturity(n)}},this.coDatagridView=UWA.createElement("div",{id:"outer-co-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-co-div"});var D=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-co-div"});this.toolbar.inject(D);var b=UWA.createElement("div",{class:"content-co-div cogridView showView"}),w=UWA.createElement("div",{class:"cotileView hideView"}),S=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_DataGrid_PlaceHolder}).inject(S),this.coDatagrid.inject(b),this.coTilesView.inject(w),S.inject(w),this.coDatagridView.addContent(D),this.coDatagridView.addContent(b),this.coDatagridView.addContent(w),this.coDatagridView.inject(this.options.target),this.coDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.subscribe({event:"co-DataGrid-on-search"},function(e){var i=e.query;i&&t.coDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"co-DataGrid-on-reset-search"},function(e){t.coDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.options.custom_view_options.dgvHandle=this.coDatagrid,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=b,this.loader=(new o).inject(this.options.target);let I=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];C.registerCustomEventsOnDGV(I,this.coDatagrid,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.coDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){m("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout").loadingViewPreference()}}})}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber",["DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView"],function(e,t){"use strict";var i={globalRegisterationObj:{},addObserver:function(e,t,n){if(i.globalRegisterationObj[t]){for(var o=!1,a=0;a<i.globalRegisterationObj[t].length;a++)if(i.globalRegisterationObj[t][a].observerID==e){i.globalRegisterationObj[t][a].callback=n,o=!0;break}o||i.globalRegisterationObj[t].push({observerID:e,callback:n})}else i.globalRegisterationObj[t]=[],i.globalRegisterationObj[t].push({observerID:e,callback:n})},removeObserver:function(e,t){for(var n=0;n<i.globalRegisterationObj[e].length;n++)i.globalRegisterationObj[e][n].observerID==t&&i.globalRegisterationObj[e].splice(n,1)},notify(e,t){for(var n=i.globalRegisterationObj[e],o=0;o<n.length;o++)try{n[o].callback(t)}catch(e){console.log(e)}}};return e.subscribe("CO-Properties-Update",function(e){i.notify("CO-Properties-Update",e)}),e.subscribe("ENOLC_MOVE_CMD_UPDATE",function(e){console.log("globally new transfer data "+e),i.notify("ENOLC_MOVE_CMD_UPDATE",e)}),e.subscribe("CA-Group-Update",function(e){console.log("Firing notification for CA Group Update "+e),i.notify("CA-Group-Update",e)}),e.subscribe("CO-AccessBit-Update",function(e){i.notify("CO-AccessBit-Update",e)}),e.subscribe("Chg-Gov-Recents-PendingIndexed-DeletedIds",function(e){i.notify("Chg-Gov-Recents-PendingIndexed-DeletedIds",e)}),e.subscribe("Chg-Gov-Recents-RecentlyOpened-DeletedIds",function(e){i.notify("Chg-Gov-Recents-RecentlyOpened-DeletedIds",e)}),e.subscribe("ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",function(e){i.notify("ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",e)}),e.subscribe("ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",function(e){i.notify("ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",e)}),e.subscribe("Lifecycle.Modification",function(e){i.notify("Lifecycle.Modification",e)}),e.subscribe("Attachment-AccessBit-Update",function(e){i.notify("Attachment-AccessBit-Update",e)}),e.subscribe("co-update-attachment-complete",function(e){i.notify("co-update-attachment-complete",e)}),e.subscribe("update-impact-anlysis-grid",function(e){i.notify("update-impact-anlysis-grid",e)}),e.subscribe("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",function(e){i.notify("CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",e)}),e.subscribe("Change-Maturity-Update",function(e){i.notify("Change-Maturity-Update",e)}),e.subscribe("ENORIPE-InApp-"+widget.id+"ChgCRImpactBasisDataGridLayout/onOK",function(e){i.notify("ENORIPE-InApp-"+widget.id+"ChgCRImpactBasisDataGridLayout/onOK",e)}),i}),define("DS/ENOChgGovernanceUX/scripts/view/recents/pendingIndexed/ChgPendingIndexedView",["UWA/Class/View","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/model/recents/ChgCORecentsTreeModel","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Core/PointerEvents","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsContextualMenu","DS/CoreEvents/ModelEvents","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";var C=e.extend({init:function(e){console.log("init ChgPendingIndexedView"),this._parent(e),this._modelEvents=new d,this.subscribeToModelEvents(),this.globalSubscribeForPendingIndexedView(),this.render(e)},subscribeToModelEvents:function(e){this._modelEvents.subscribe({event:"pendingIndexedTreeEmpty"},function(e){C.prototype.pendingIndexedTreeEmpty()}),this._modelEvents.subscribe({event:"pendingIndexedTreeNotEmpty"},function(e){C.prototype.pendingIndexedTreeNotEmpty()})},render:function(e){var o=this;e.treeDocument=(new n).createTreeDocument(this._modelEvents),C.prototype.ChgCORecentsTreeModel=e.treeDocument,o.createPendingIndexedView(e),t.getTimestamp().then(function(a){var s=i.processTimestampData(a);t.getConfiguredChangeOrderList({indexed:!1,simplifiedJSON:!0,timestamp:s}).then(function(t){var a=i.processChangeOrderRecentList(t);a.length>0?((new n).loadRecentChangeOrderData(e.treeDocument,a),o._modelEvents.publish({event:"pendingIndexedTreeNotEmpty"})):o._modelEvents.publish({event:"pendingIndexedTreeEmpty"})})}),C.prototype.ChgCORecentsTreeModel.getXSO().onAdd(function(t){e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})}),C.prototype.ChgCORecentsTreeModel.getXSO().onRemove(function(t){e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})})},createPendingIndexedView:function(e){var t=this;e.target.innerHTML="<b>"+r.CHG_GOV_Recents_Pending_Indexed_Heading+"</b>";var i={model:e.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.tileView=new o(i);var n=e.target,a=UWA.createElement("div",{id:"pendingIndexedCOEmptyTileViewDiv",class:"hideViewPendingIndexedCO"}),d=UWA.createElement("div",{id:"pendingIndexedCOPopulatedTileViewDiv",class:"hideViewPendingIndexedCO"}),c=UWA.createElement("div",{class:"pendingIndexedCOEmptyTileViewText"}),g=r.CHG_GOV_Recents_Pending_Indexed_Empty_View;c.inject(a),c.innerText=g,this.tileView.inject(d),d.inject(n),a.inject(n);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel){var i=document.getElementsByClassName("secondROChildDiv")[0];return l.showRMBMenuOnGrid(e,i,t.removeDeletedNodesUsingIDsAdaptor).then(function(e){return e})}}};this.tileView.onContextualEvent=h,this.tileView.addEventListener(s.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount){var i={};i.model=t.nodeModel.options.grid,p.navigate(u.ROUTE_CO_DETAILS,{id:i.model.id,name:i.model.name,title:i.model.title,nodeModel:i}),m.publish("load-dependency"+widget.id,"pid:"+i.model.id)}}},removeDeletedNodesUsingIDsAdaptor:function(e){var t=e;e.deletedIDs&&(t=e.deletedIDs),e.source||m.publish("Chg-Gov-Recents-PendingIndexed-DeletedIds",{source:"ChgPendingIndexedView",deletedIDs:t}),C.prototype.removeDeletedNodesUsingIDs(t)},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];C.prototype.ChgCORecentsTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==C.prototype.ChgCORecentsTreeModel.getChildren().length&&C.prototype.pendingIndexedTreeEmpty()},handleMoveUpdate:function(e){console.log("inside handleMoveUpdate");for(var t=C.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.data.paths,n=0;n<t.length;n++)for(var o=0;o<i.length;o++)if(i[o]==t[n].options.grid.id){var a,s,r,l,d,c,u,p=t[n].options.grid.id;if(s=(a=e.data.attributes[p]).newCollabSpace,r=a.newOrganization,l=a.newOwnerFullName,(d=a.newOwnerId)&&l){c=t[n].options.grid.name+" | "+l;var g={title:t[n].options.grid.title,name:t[n].options.grid.name,severityNLS:t[n].options.grid.severityNLS,ownerFullName:l,maturityNLS:t[n].options.grid.maturityNLS};u=h.getCustomTooltip(g),t[n].options.grid.owner=d,t[n].options.grid.ownerFullName=l,t[n].updateOptions({grid:t[n].options.grid,customTooltip:u,subLabel:c})}r&&(t[n].options.grid.organization=r,t[n].updateOptions({grid:t[n].options.grid})),s&&(t[n].options.grid.collabspace=s,t[n].updateOptions({grid:t[n].options.grid}))}},handlePropertiesUpdate:function(e){console.log("inside handlePropertiesUpdate");for(var t=C.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.objectId,n=0;n<t.length;n++){if(t[n].options.grid.id==i){var o=e.Title?e.Title.value:e.Severity?e.Severity.value:e.lebel,a=e.name.value,s=e.description.value,r=e.owner.value,l=e.owner.valueDB,d=e.Severity.valueDB,c=e.Severity.value,u=t[n].options.grid.ecm_change_on_hold,p=a+" | "+r,g={};g.name=a,g.title=o,g.ecm_change_on_hold=u,g.severity=d,g.severityNLS=c,g.owner=l,g.ownerFullName=r,g.maturityNLS=t[n].options.grid.maturityNLS;var m=h.createCustomSeverity(g),f=h.getStatusBarIcons(g),v=h.statusbarIconsTooltips(g),D=h.getCustomTooltip(g);t[n].options.grid.title=o,t[n].options.grid.description=s,t[n].options.grid.ownerFullName=r,t[n].options.grid.owner=l,t[n].options.grid.severity=d,t[n].options.grid.sev=m,t[n].options.grid.severityNLS=c,t[n].updateOptions({label:o,grid:t[n].options.grid,customTooltip:D,statusbarIcons:f,statusbarIconsTooltips:v,subLabel:p})}}},globalSubscribeForPendingIndexedView:function(){g.addObserver("ChgPendingIndexedView","ENOLC_MOVE_CMD_UPDATE",this.handleMoveUpdate),g.addObserver("ChgPendingIndexedView","CO-Properties-Update",this.handlePropertiesUpdate),g.addObserver("ChgPendingIndexedView","Chg-Gov-Recents-RecentlyOpened-DeletedIds",this.removeDeletedNodesUsingIDsAdaptor)},pendingIndexedTreeEmpty:function(){var e=document.getElementById("pendingIndexedCOEmptyTileViewDiv");e&&e.removeClassName("hideViewPendingIndexedCO");var t=document.getElementById("pendingIndexedCOPopulatedTileViewDiv");t&&t.addClassName("hideViewPendingIndexedCO")},pendingIndexedTreeNotEmpty:function(){var e=document.getElementById("pendingIndexedCOEmptyTileViewDiv");e&&e.addClassName("hideViewPendingIndexedCO");var t=document.getElementById("pendingIndexedCOPopulatedTileViewDiv");t&&t.removeClassName("hideViewPendingIndexedCO")}});return C}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/Controls/ComboBox","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p={createApprovalsView:function(e){this.id=e.id,this.target=e.target;var t=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=t&&null!=t&&r.mask(t),"true"==d.getGlobalVariable().CHG_APPROVAL_CYCLE&&e.contextDetails&&e.contextDetails.maturity&&"In Approval"==e.contextDetails.maturity?p.getRouteContentForApprovalState(e):p.getRouteContent(e)},getRouteContent:function(e){let i=d.getGlobalVariable().tenant,n=d.getGlobalVariable().getSecurityContext();t.getRouteBasedOnContentId(e.id).then(function(t){console.log(t);var a=t.data.length,l=p.checkResponse(t.data),d=e.target;if(a>0){var c={id:l.id,renderType:"container",tenant:i,securityContext:n},u=document.getElementById("viewTaskContainerExternal"),g=document.getElementById("InitiateTaskPropertiesBody");null!=u&&u.remove(),null!=g&&g.remove(),o.init(c,d),p.checkRouteSubscribe(e);var h=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(h)}else{null!=(u=document.getElementById("viewTaskContainerExternal"))&&u.remove();var m=document.getElementById("tileViewDiv");null!=m&&m.remove();var C=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),f=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(f),f.inject(C),C.inject(d);h=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(h)}},function(e){return Promise.reject(e)})},getRouteContentForApprovalState:function(e){let n=d.getGlobalVariable().tenant,a=d.getGlobalVariable().getSecurityContext();var c=i.getDependency("applicationChannel");t.getAllApprovalRouteIterations(e.id).then(function(t){console.log(t);var i=t.data.length;let d=[],u=[];var g,h=e.target;if(i>0&&(u=p.checkCycleInfo(t)),i>0&&u.length>0){var m=document.getElementById("viewTaskContainerExternal"),C=document.getElementById("InitiateTaskPropertiesBody");null!=m&&m.remove(),null!=C&&C.remove(),g=e.targetHeader;let i=(u=p.checkCycleInfo(t)).length;for(var f=0;f<i;f++)d.push(s.CHG_GOV_Approval_TaskView_Cycle+u[f].cycle);console.log(u),document.getElementsByClassName("tabContainer wux-controls-tab-container wux-controls-tab-strip")[0].appendChild(e.targetHeader);var v=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader),D=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader);if(i>1)if(u[i-1].routeID){let e={id:u[i-1].routeID,renderType:"container",tenant:n,securityContext:a};var b=new l({elementsList:d,enableSearchFlag:!1,value:s.CHG_GOV_Approval_TaskView_Cycle+u[i-1].cycle}).inject(v),w=new UWA.Element("span",{text:u[i-1].routeName+" "+u[i-1].revision}).inject(D);o.init(e,h)}else{b=new l({elementsList:d,enableSearchFlag:!1,value:s.CHG_GOV_Approval_TaskView_Cycle+u[i-1].cycle}).inject(v),w=new UWA.Element("span",{text:""}).inject(D);p.checkNoApprovalInProgress(e)}else if(u[0].routeID){let e={id:u[0].routeID,renderType:"container",tenant:n,securityContext:a};new UWA.Element("span",{text:s.CHG_GOV_Approval_TaskView_Cycle+u[0].cycle+" | "+u[0].routeName+" "+u[0].revision}).inject(v),o.init(e,h)}else new UWA.Element("span",{text:s.CHG_GOV_Approval_TaskView_Cycle+u[0].cycle}).inject(v),p.checkNoApprovalInProgress(e);i>1&&b.addEventListener("change",function(){null!=d&&d.remove();for(var t=e.target,r=0;r<i;r++){let i=s.CHG_GOV_Approval_TaskView_Cycle+u[r].cycle;if("yes"==u[r].inserted&&i==b.value)w.textContent="",p.checkNoApprovalInProgress(e);else if(i==b.value){var l=document.getElementById("tileViewDiv");null!=l&&l.remove(),w.textContent=u[r].routeName+" "+u[r].revision;let i={id:u[r].routeID,renderType:"container",tenant:n,securityContext:a};var d=document.getElementById("viewTaskContainerExternal");null!=d&&d.remove(),t=e.target,widget.routeMgmtMediator=void 0,c.publish({event:"information-panel-close",data:null}),o.init(i,t),p.checkRouteSubscribe(e)}}}),p.checkRouteSubscribe(e);var S=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(S)}else{null!=(m=document.getElementById("viewTaskContainerExternal"))&&m.remove();var I=document.getElementById("tileViewDiv");null!=I&&I.remove();var _=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});c.publish({event:"information-panel-close",data:null});var y=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(y),y.inject(_),g&&_.inject(g),_.inject(h);S=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(S)}},function(e){return Promise.reject(e)})},checkRouteSubscribe:function(o){var s=UWA.createElement("div",{id:"chg-Task-container",styles:{height:"inherit"}}),r=i.getDependency("xChangeApp"),l=i.getDependency("applicationChannel"),c=r.infoPanel.childNodes;let u=new e(s);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",function(e){u.init(e,"taskActionMode");for(var t=0;t<c.length;t++){var i=c[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(c[t].empty(),s.inject(c[t]),c[t].style.display="block"):c[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",function(e){u.init(e,"taskEditMode");for(var t=0;t<c.length;t++){var i=c[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(c[t].empty(),s.inject(c[t]),c[t].style.display="block"):c[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",function(e){}),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",function(e){}),widget.routeMgmtMediator.subscribe("task-action-on-save",function(e){var s="";s=null==e.model.taskActionButton?e.model.taskReviewButton:e.model.taskActionButton;var r=o.id;if("Approve"===s||"Reject"===s||"Abstain"===s||"promote"===s||"demote"===s){t.getChangeRequestUserAccess(r).then(function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0]};a.publish("CO-AccessBit-Update",t),a.publish("idcard-header-update"+widget.id,t),a.publish("idcard-header-update-maturity"),n("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});let e=i.getDependency("applicationChannel");e.publish({event:"triptych-hide-panel",data:"right"}),e.publish({event:"information-panel-close",data:null})}else"Complete"===s?l.publish({event:"information-panel-close",data:null}):"saveForLater"===s&&l.publish({event:"information-panel-close",data:null})}),widget.routeMgmtMediator.subscribe("launch-task-assignee-search",function(e){if(console.log("launch-task-assignee-search Event"),d.getGlobalVariable().isNative){taskProperties=e.taskProperties,taskGraphModel=e.taskGraphModel,invokeFrom=e.invokeFrom,routeInfo=e.routeInfo;ChgNativeInitService.DispatchEventToWin("CHG_Search_Task_Assignee","Task_Assignee")}}),widget.routeMgmtMediator.subscribe("launch-add-attachment-search",function(e){if(console.log("launch-add-attachment-search Event"),d.getGlobalVariable().isNative){taskProperties=e.taskProperties,taskGraphModel=e.alreadyAttachedDocs;ChgNativeInitService.DispatchEventToWin("CHG_ADD_ATTACHMENT_SEARCH","Add_Attachment_Search")}})},checkNoApprovalInProgress:function(e){var t=e.target,n=e.targetHeader,o=i.getDependency("applicationChannel"),a=document.getElementById("viewTaskContainerExternal");null!=a&&a.remove();var l=document.getElementById("tileViewDiv");null!=l&&l.remove();var d=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});o.publish({event:"information-panel-close",data:null});var c=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_Cycle_TaskView_PlaceHolder}).inject(c),c.inject(d),n&&d.inject(n),d.inject(t);var u=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(u)},checkCycleInfo:function(e){var t=e.data.length;let i=[],n=[];for(var o=0;o<t;o++)-1!=e.data[o].cycle&&0!=e.data[o].cycle&&n.push(e.data[o]);let a=parseInt(n[0].cycle)-0;for(o=0;o<n.length;o++){if(parseInt(n[o].cycle)-o!=a)for(;a<parseInt(n[o].cycle)-o;)console.log(o+a+" "),i.push({cycle:o+a,inserted:"yes"}),a++;-1==n[o].cycle&&0==n[o].cycle||i.push({cycle:n[o].cycle,revision:n[o].revision,routeName:n[o].title,routeID:n[o].id,inserted:"no"})}return i},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var o=0;o<e.length;o++){let a=e[o];if("Started"==a.dataelements.routeStatus)return a;if("Not Started"==a.dataelements.routeStatus)return a;"Stopped"==a.dataelements.routeStatus?t=null==t?a:n(t,a):"Finished"==a.dataelements.routeStatus&&(i=null==i?a:n(i,a))}return null!=t?t:i},clearTags:function(){c._cleanBIFilterProxy()},globalSubscribeForGovCRApprovalsView:function(){u.addObserver("ChgGovCRApprovalsView","Change-Maturity-Update",p.handleMaturityUpdate),a.unsubscribe(`crApprovals:${widget.id}`),a.subscribe(`crApprovals:${widget.id}`,function(e){console.log(e),i.getDependency("applicationChannel").publish({event:"update_object_select",data:{node:model,contextID:e.contextDetails.id,contextType:e.contextDetails.isKindOfType,isNodeAdded:!1}})})},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===p.id){let t={};t.id=p.id,t.target=p.target,t.contextDetails&&(t.contextDetails.maturity=e.valueActual),p.createApprovalsView(t)}}};return p.globalSubscribeForGovCRApprovalsView(),p}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout"],function(e){e.crGridView.crDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENORouteMgmt/Views/Form/TaskViewUtil","DS/ENORouteMgmt/Views/Loader/ChangeTaskAssigneeChooser","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/Controls/ComboBox","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENORouteMgmt/Views/Loader/InitiateDocumentChooser","DS/TreeModel/TreeNodeModel"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C){"use strict";let f,v,D,b;var w={createApprovalsView:function(e){this.id=e.id,this.target=e.target;var t=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=t&&null!=t&&d.mask(t),"true"==u.getGlobalVariable().CHG_APPROVAL_CYCLE&&e.contextDetails&&e.contextDetails.maturity&&"In Approval"==e.contextDetails.maturity?w.getRouteContentForApprovalState(e):w.getRouteContent(e)},getRouteContent:function(e){let t=u.getGlobalVariable().tenant,i=u.getGlobalVariable().getSecurityContext();n.getRouteBasedOnContentId(e.id).then(function(n){console.log(n);var o=n.data.length,a=w.checkResponse(n.data),r=e.target;if(o>0){var c={id:a.id,renderType:"container",tenant:t,securityContext:i},u=document.getElementById("viewTaskContainerExternal"),p=document.getElementById("InitiateTaskPropertiesBody");null!=u&&u.remove(),null!=p&&p.remove(),s.init(c,r),w.checkRouteSubscribe(e);var g=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(g)}else{null!=(u=document.getElementById("viewTaskContainerExternal"))&&u.remove();var h=document.getElementById("tileViewDiv");null!=h&&h.remove();var m=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),C=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:l.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(C),C.inject(m),m.inject(r);g=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(g)}},function(e){return Promise.reject(e)})},getRouteContentForApprovalState:function(e){let t=u.getGlobalVariable().tenant,i=u.getGlobalVariable().getSecurityContext();var a=o.getDependency("applicationChannel");n.getAllApprovalRouteIterations(e.id).then(function(n){console.log(n);var o=n.data.length;let r=[],u=[];var p,g=e.target;if(o>0&&(u=w.checkCycleInfo(n)),o>0&&u.length>0){var h=document.getElementById("viewTaskContainerExternal"),m=document.getElementById("InitiateTaskPropertiesBody");null!=h&&h.remove(),null!=m&&m.remove(),p=e.targetHeader;let o=(u=w.checkCycleInfo(n)).length;for(var C=0;C<o;C++)r.push(l.CHG_GOV_Approval_TaskView_Cycle+u[C].cycle);console.log(u),document.getElementsByClassName("tabContainer wux-controls-tab-container wux-controls-tab-strip")[0].appendChild(e.targetHeader);var f=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader),v=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader);if(o>1)if(u[o-1].routeID){let e={id:u[o-1].routeID,renderType:"container",tenant:t,securityContext:i};var D=new c({elementsList:r,enableSearchFlag:!1,value:l.CHG_GOV_Approval_TaskView_Cycle+u[o-1].cycle}).inject(f),b=new UWA.Element("span",{text:u[o-1].routeName+" "+u[o-1].revision}).inject(v);s.init(e,g)}else{D=new c({elementsList:r,enableSearchFlag:!1,value:l.CHG_GOV_Approval_TaskView_Cycle+u[o-1].cycle}).inject(f),b=new UWA.Element("span",{text:""}).inject(v);w.checkNoApprovalInProgress(e)}else if(u[0].routeID){let e={id:u[0].routeID,renderType:"container",tenant:t,securityContext:i};new UWA.Element("span",{text:l.CHG_GOV_Approval_TaskView_Cycle+u[0].cycle+" | "+u[0].routeName+" "+u[0].revision}).inject(f),s.init(e,g)}else new UWA.Element("span",{text:l.CHG_GOV_Approval_TaskView_Cycle+u[0].cycle}).inject(f),w.checkNoApprovalInProgress(e);o>1&&D.addEventListener("change",function(){null!=c&&c.remove();for(var n=e.target,r=0;r<o;r++){let o=l.CHG_GOV_Approval_TaskView_Cycle+u[r].cycle;if("yes"==u[r].inserted&&o==D.value)b.textContent="",w.checkNoApprovalInProgress(e);else if(o==D.value){var d=document.getElementById("tileViewDiv");null!=d&&d.remove(),b.textContent=u[r].routeName+" "+u[r].revision;let o={id:u[r].routeID,renderType:"container",tenant:t,securityContext:i};var c=document.getElementById("viewTaskContainerExternal");null!=c&&c.remove(),n=e.target,widget.routeMgmtMediator=void 0,a.publish({event:"information-panel-close",data:null}),s.init(o,n),w.checkRouteSubscribe(e)}}}),w.checkRouteSubscribe(e);var S=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(S)}else{null!=(h=document.getElementById("viewTaskContainerExternal"))&&h.remove();var I=document.getElementById("tileViewDiv");null!=I&&I.remove();var _=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});a.publish({event:"information-panel-close",data:null});var y=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:l.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(y),y.inject(_),p&&_.inject(p),_.inject(g);S=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(S)}},function(e){return Promise.reject(e)})},checkNoApprovalInProgress:function(e){var t=e.target,i=e.targetHeader,n=o.getDependency("applicationChannel"),a=document.getElementById("viewTaskContainerExternal");null!=a&&a.remove();var s=document.getElementById("tileViewDiv");null!=s&&s.remove();var r=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});n.publish({event:"information-panel-close",data:null});var c=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:l.CHG_GOV_Approval_Cycle_TaskView_PlaceHolder}).inject(c),c.inject(r),i&&r.inject(i),r.inject(t);var u=document.getElementsByClassName("outerContainerTabDiv")[0];d.unmask(u)},checkRouteSubscribe:function(t){var i=UWA.createElement("div",{id:"chg-Task-container",styles:{height:"inherit"}}),s=o.getDependency("xChangeApp"),l=o.getDependency("applicationChannel"),d=s.infoPanel.childNodes;let c=new e(i);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",function(e){c.init(e,"taskActionMode");for(var t=0;t<d.length;t++){var n=d[t].className;UWA.is(n)&&"secondmainContainer-sidepanel"===n?(d[t].empty(),i.inject(d[t]),d[t].style.display="block"):d[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",function(e){c.init(e,"taskEditMode");for(var t=0;t<d.length;t++){var n=d[t].className;UWA.is(n)&&"secondmainContainer-sidepanel"===n?(d[t].empty(),i.inject(d[t]),d[t].style.display="block"):d[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",function(e){}),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",function(e){}),widget.routeMgmtMediator.subscribe("task-action-on-save",function(e){var i="";i=null==e.model.taskActionButton?e.model.taskReviewButton:e.model.taskActionButton;var s=t.id;if("Approve"===i||"Reject"===i||"Abstain"===i||"promote"===i||"demote"===i){n.getChangeActionUserAccess(s).then(function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0]};r.publish("CO-AccessBit-Update",t),r.publish("idcard-header-update"+widget.id,t),r.publish("idcard-header-update-maturity"),a("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});let e=o.getDependency("applicationChannel");e.publish({event:"triptych-hide-panel",data:"right"}),e.publish({event:"information-panel-close",data:null})}else"Complete"===i?l.publish({event:"information-panel-close",data:null}):"saveForLater"===i&&l.publish({event:"information-panel-close",data:null})}),widget.routeMgmtMediator.subscribe("launch-task-assignee-search",function(e){if(console.log("launch-task-assignee-search Event"),u.getGlobalVariable().isNative){f=e.taskProperties,v=e.taskGraphModel,b=e.invokeFrom,D=e.routeInfo;g.DispatchEventToWin("CHG_Search_Task_Assignee","Task_Assignee")}}),widget.routeMgmtMediator.subscribe("launch-add-attachment-search",function(e){if(console.log("launch-add-attachment-search Event"),u.getGlobalVariable().isNative){f=e.taskProperties,v=e.alreadyAttachedDocs;g.DispatchEventToWin("CHG_ADD_ATTACHMENT_SEARCH","Add_Attachment_Search")}})},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var o=0;o<e.length;o++){let a=e[o];if("Started"==a.dataelements.routeStatus)return a;if("Not Started"==a.dataelements.routeStatus)return a;"Stopped"==a.dataelements.routeStatus?t=null==t?a:n(t,a):"Finished"==a.dataelements.routeStatus&&(i=null==i?a:n(i,a))}return null!=t?t:i},checkCycleInfo:function(e){var t=e.data.length;let i=[],n=[];for(var o=0;o<t;o++)-1!=e.data[o].cycle&&0!=e.data[o].cycle&&n.push(e.data[o]);let a=parseInt(n[0].cycle)-0;for(o=0;o<n.length;o++){if(parseInt(n[o].cycle)-o!=a)for(;a<parseInt(n[o].cycle)-o;)console.log(o+a+" "),i.push({cycle:o+a,inserted:"yes"}),a++;-1==n[o].cycle&&0==n[o].cycle||i.push({cycle:n[o].cycle,revision:n[o].revision,routeName:n[o].title,routeID:n[o].id,inserted:"no"})}return i},clearTags:function(){p._cleanBIFilterProxy()},globalSubscribeForGovCAApprovalsView:function(){h.addObserver("ChgCAApprovalsView","Change-Maturity-Update",w.handleMaturityUpdate),r.unsubscribe(`caApprovals:${widget.id}`),r.subscribe(`caApprovals:${widget.id}`,function(e){console.log(e),o.getDependency("applicationChannel").publish({event:"update_object_select",data:{node:model,contextID:e.contextDetails.id,contextType:e.contextDetails.isKindOfType,isNodeAdded:!1}})})},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===w.id){let t={};t.id=w.id,t.target=w.target,t.contextDetails&&(t.contextDetails.maturity=e.valueActual),w.createApprovalsView(t)}},OnSearchComplete:function(e){let o=e.split(","),a=[];a.push(o[0]),n.getObjectInfo(a,["name","type","identifier","label","title"]).then(function(e){let n=e[0],o=[],a={};a="Person"==n.type?{id:n.id,"ds6w:label":n.dataelements.fullname,"ds6w:identifier":n.dataelements.name,"ds6w:type_value":n.type,"ds6w:type":n.type}:{id:n.id,"ds6w:label":n.dataelements.title,"ds6w:identifier":n.dataelements.name,"ds6w:type_value":n.type,"ds6w:type":n.type},o.push(a),"form"==b?t.populateAssigneeField(f,v,D,o):"dialog"==b&&i.populateAssigneeField(f,o)})},OnSearchCompleteForAttachment:function(e){let t=e.split(","),i=[],o=[];o.push(t),n.getObjectInfo(o,["name","type","identifier","label","title"]).then(function(e){for(var n=0;n<t.length;n++){let t=e[n],o={};o={id:t.id,"ds6w:label":t.dataelements.title,"ds6w:identifier":t.dataelements.name,"ds6w:type_value":t.type,"ds6w:type":t.type},i.push(o)}m.populateAddExisiting(f,i)})}};return w.globalSubscribeForGovCAApprovalsView(),w}),define("DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView",["DS/ENORouteMgmt/Views/RightPanelInfoView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgRouter5/scripts/ChgRouter","require","DS/ENORouteMgmt/Commands/RouteTaskView","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/UIKIT/Mask","DS/Controls/ComboBox","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p={createApprovalsView:function(e){this.id=e.id,this.target=e.target;var t=document.getElementsByClassName("outerContainerTabDiv")[0];"undefined"!=t&&null!=t&&r.mask(t),"true"==d.getGlobalVariable().CHG_APPROVAL_CYCLE&&e.contextDetails&&e.contextDetails.maturity&&"In Approval"==e.contextDetails.maturity?p.getRouteContentForApprovalState(e):p.getRouteContent(e)},getRouteContent:function(e){let i=d.getGlobalVariable().tenant,n=d.getGlobalVariable().getSecurityContext();t.getRouteBasedOnContentId(e.id).then(function(t){console.log(t);var a=t.data.length,l=p.checkResponse(t.data),d=e.target;if(a>0){var c={id:l.id,renderType:"container",tenant:i,securityContext:n},u=document.getElementById("viewTaskContainerExternal"),g=document.getElementById("InitiateTaskPropertiesBody");null!=u&&u.remove(),null!=g&&g.remove(),o.init(c,d),p.checkRouteSubscribe(e);var h=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(h)}else{null!=(u=document.getElementById("viewTaskContainerExternal"))&&u.remove();var m=document.getElementById("tileViewDiv");null!=m&&m.remove();var C=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"}),f=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(f),f.inject(C),C.inject(d);h=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(h)}},function(e){return Promise.reject(e)})},getRouteContentForApprovalState:function(e){let n=d.getGlobalVariable().tenant,a=d.getGlobalVariable().getSecurityContext();var c=i.getDependency("applicationChannel");t.getAllApprovalRouteIterations(e.id).then(function(t){console.log(t);var i=t.data.length;let d=[],u=[];var g,h=e.target;if(i>0&&(u=p.checkCycleInfo(t)),i>0&&u.length>0){var m=document.getElementById("viewTaskContainerExternal"),C=document.getElementById("InitiateTaskPropertiesBody");null!=m&&m.remove(),null!=C&&C.remove(),g=e.targetHeader;let i=(u=p.checkCycleInfo(t)).length;for(var f=0;f<i;f++)d.push(s.CHG_GOV_Approval_TaskView_Cycle+u[f].cycle);console.log(u),document.getElementsByClassName("tabContainer wux-controls-tab-container wux-controls-tab-strip")[0].appendChild(e.targetHeader);var v=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader),D=new UWA.Element("div",{styles:{display:"inline-block",paddingLeft:"15px",fontWeight:"700",color:"#777",fontSize:"20px"}}).inject(e.targetHeader);if(i>1)if(u[i-1].routeID){let e={id:u[i-1].routeID,renderType:"container",tenant:n,securityContext:a};var b=new l({elementsList:d,enableSearchFlag:!1,value:s.CHG_GOV_Approval_TaskView_Cycle+u[i-1].cycle}).inject(v),w=new UWA.Element("span",{text:u[i-1].routeName+" "+u[i-1].revision}).inject(D);o.init(e,h)}else{b=new l({elementsList:d,enableSearchFlag:!1,value:s.CHG_GOV_Approval_TaskView_Cycle+u[i-1].cycle}).inject(v),w=new UWA.Element("span",{text:""}).inject(D);p.checkNoApprovalInProgress(e)}else if(u[0].routeID){let e={id:u[0].routeID,renderType:"container",tenant:n,securityContext:a};new UWA.Element("span",{text:s.CHG_GOV_Approval_TaskView_Cycle+u[0].cycle+" | "+u[0].routeName+" "+u[0].revision}).inject(v),o.init(e,h)}else new UWA.Element("span",{text:s.CHG_GOV_Approval_TaskView_Cycle+u[0].cycle}).inject(v),p.checkNoApprovalInProgress(e);i>1&&b.addEventListener("change",function(){null!=d&&d.remove();for(var t=e.target,r=0;r<i;r++){let i=s.CHG_GOV_Approval_TaskView_Cycle+u[r].cycle;if("yes"==u[r].inserted&&i==b.value)w.textContent="",p.checkNoApprovalInProgress(e);else if(i==b.value){var l=document.getElementById("tileViewDiv");null!=l&&l.remove(),w.textContent=u[r].routeName+" "+u[r].revision;let i={id:u[r].routeID,renderType:"container",tenant:n,securityContext:a};var d=document.getElementById("viewTaskContainerExternal");null!=d&&d.remove(),t=e.target,widget.routeMgmtMediator=void 0,c.publish({event:"information-panel-close",data:null}),o.init(i,t),p.checkRouteSubscribe(e)}}}),p.checkRouteSubscribe(e);var S=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(S)}else{null!=(m=document.getElementById("viewTaskContainerExternal"))&&m.remove();var I=document.getElementById("tileViewDiv");null!=I&&I.remove();var _=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});c.publish({event:"information-panel-close",data:null});var y=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_TaskView_PlaceHolder}).inject(y),y.inject(_),g&&_.inject(g),_.inject(h);S=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(S)}},function(e){return Promise.reject(e)})},checkNoApprovalInProgress:function(e){var t=e.target,n=e.targetHeader,o=i.getDependency("applicationChannel"),a=document.getElementById("viewTaskContainerExternal");null!=a&&a.remove();var l=document.getElementById("tileViewDiv");null!=l&&l.remove();var d=UWA.createElement("div",{styles:{width:"100%",height:"calc(100% - 235px)",position:"absolute"},id:"tileViewDiv",class:"content-approval-tile-div approvaltileView"});o.publish({event:"information-panel-close",data:null});var c=UWA.createElement("div",{class:"showEmptyView",id:"approvalViewDiv"});UWA.createElement("div",{id:"approvalContentDiv",html:s.CHG_GOV_Approval_Cycle_TaskView_PlaceHolder}).inject(c),c.inject(d),n&&d.inject(n),d.inject(t);var u=document.getElementsByClassName("outerContainerTabDiv")[0];r.unmask(u)},checkRouteSubscribe:function(o){var s=UWA.createElement("div",{id:"chg-Task-container",styles:{height:"inherit"}}),r=i.getDependency("xChangeApp"),l=i.getDependency("applicationChannel"),c=r.infoPanel.childNodes;let u=new e(s);widget.routeMgmtMediator.subscribe("route-task-open-click-view-mode",function(e){u.init(e,"taskActionMode");for(var t=0;t<c.length;t++){var i=c[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(c[t].empty(),s.inject(c[t]),c[t].style.display="block"):c[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-open-click-edit-mode",function(e){u.init(e,"taskEditMode");for(var t=0;t<c.length;t++){var i=c[t].className;UWA.is(i)&&"secondmainContainer-sidepanel"===i?(c[t].empty(),s.inject(c[t]),c[t].style.display="block"):c[t].style.display="none"}l.publish({event:"triptych-show-panel",data:"right"}),l.publish({event:"information-panel-visible",data:null})}),widget.routeMgmtMediator.subscribe("route-task-close-click-view-mode",function(e){}),widget.routeMgmtMediator.subscribe("route-task-close-click-edit-mode",function(e){}),widget.routeMgmtMediator.subscribe("task-action-on-save",function(e){var s="";s=null==e.model.taskActionButton?e.model.taskReviewButton:e.model.taskActionButton;var r=o.id;if("Approve"===s||"Reject"===s||"Abstain"===s||"promote"===s||"demote"===s){t.getChangeOrderUserAccess(r).then(function(e){var t={id:e.data[0].id,type:e.data[0].type,accessBits:e.data[0]};a.publish("CO-AccessBit-Update",t),a.publish("idcard-header-update"+widget.id,t),a.publish("idcard-header-update-maturity"),n("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});let e=i.getDependency("applicationChannel");e.publish({event:"triptych-hide-panel",data:"right"}),e.publish({event:"information-panel-close",data:null})}else"Complete"===s?l.publish({event:"information-panel-close",data:null}):"saveForLater"===s&&l.publish({event:"information-panel-close",data:null})}),widget.routeMgmtMediator.subscribe("launch-task-assignee-search",function(e){if(console.log("launch-task-assignee-search Event"),d.getGlobalVariable().isNative){taskProperties=e.taskProperties,taskGraphModel=e.taskGraphModel,invokeFrom=e.invokeFrom,routeInfo=e.routeInfo;ChgNativeInitService.DispatchEventToWin("CHG_Search_Task_Assignee","Task_Assignee")}}),widget.routeMgmtMediator.subscribe("launch-add-attachment-search",function(e){if(console.log("launch-add-attachment-search Event"),d.getGlobalVariable().isNative){taskProperties=e.taskProperties,taskGraphModel=e.alreadyAttachedDocs;ChgNativeInitService.DispatchEventToWin("CHG_ADD_ATTACHMENT_SEARCH","Add_Attachment_Search")}})},checkCycleInfo:function(e){var t=e.data.length;let i=[],n=[];for(var o=0;o<t;o++)-1!=e.data[o].cycle&&0!=e.data[o].cycle&&n.push(e.data[o]);let a=parseInt(n[0].cycle)-0;for(o=0;o<n.length;o++){if(parseInt(n[o].cycle)-o!=a)for(;a<parseInt(n[o].cycle)-o;)console.log(o+a+" "),i.push({cycle:o+a,inserted:"yes"}),a++;-1==n[o].cycle&&0==n[o].cycle||i.push({cycle:n[o].cycle,revision:n[o].revision,routeName:n[o].title,routeID:n[o].id,inserted:"no"})}return i},checkResponse:function(e){let t,i,n=function(e,t){var i=new Date(e.dataelements.modified),n=new Date(t.dataelements.modified);return i.getTime()>n.getTime()?e:t};for(var o=0;o<e.length;o++){let a=e[o];if("Started"==a.dataelements.routeStatus)return a;if("Not Started"==a.dataelements.routeStatus)return a;"Stopped"==a.dataelements.routeStatus?t=null==t?a:n(t,a):"Finished"==a.dataelements.routeStatus&&(i=null==i?a:n(i,a))}return null!=t?t:i},globalSubscribeForGovApprovalsView:function(){u.addObserver("ChgGovApprovalsView","Change-Maturity-Update",p.handleMaturityUpdate),a.unsubscribe(`coApprovals:${widget.id}`),a.subscribe(`coApprovals:${widget.id}`,function(e){console.log(e),i.getDependency("applicationChannel").publish({event:"update_object_select",data:{node:model,contextID:e.contextDetails.id,contextType:e.contextDetails.isKindOfType,isNodeAdded:!1}})})},clearTags:function(){c._cleanBIFilterProxy()},handleMaturityUpdate:function(e){if(console.log("handle maturity"),e.id===p.id){let t={};t.id=p.id,t.target=p.target,t.contextDetails.maturity=e.valueActual,p.createApprovalsView(t)}}};return p.globalSubscribeForGovApprovalsView(),p}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueView","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/issue/util/ChgIssueGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/issue/ChgIssueDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";let D={createIssueView:function(t,o,a){var s=this;t.setStyles({position:"relative"}),D.contextType=o.type;let r={};this.chgCRImpactBasisView="",(r=UWA.merge(r,o)).target=t,r.columns=i.getColumns(),this.ChgIssueDataGridModel=new n(r.id),this.modelEvents=r.modelEvents?r.modelEvents:a,s.treeDocument=r.treeDocument=s.ChgIssueDataGridModel.createTreeDocument(),s.ChgIssueTreeModel=r.treeDocument,p.makeDroppable(r.target,s.dropHandler),s.ChgIssueDataGridModel.registerCustomFilter(),s.chgIssueView=new e(r),C.showLoader(r.target,s.chgIssueView.loader),this.subscribeToModelEvents(r.treeDocument),c.getIssue(o).then(function(e){console.log("ImpactAnalysis list: "+e);var t=u.processedChangeRequestIssueList(e,o.id);s.chgIssueDataGridModel=new n(o.id);var i=e.data;C.fetchMaturityStateCSS(i),s.chgIssueDataGridModel.loadIssueData(r.treeDocument,t);var a=u.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(a),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(s.ChgIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:s.ChgIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,s.ChgIssueTreeModel)}),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),D.changeView(),C.hideLoader(r.target,s.chgIssueView.loader)},function(e){return C.hideLoader(r.target,s.chgIssueView.loader),Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);D.ChgIssueDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType?e[i].objectType:"",updateAction:"CONNECT",serviceId:e[i].serviceId?e[i].serviceId:"3DSpace"});D.ChgIssueDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),m.unsubscribe(`Issue:${widget.id}`),m.subscribe(`Issue:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgIssueTreeModel)})}),m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,function(t){D.ChgIssueDataGridModel.filterView(t,e)}),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){D.ChgIssueDataGridModel.enableColorizeView(t,e)}),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){D.ChgIssueDataGridModel.disableColorizeView(t,e)}),m.unsubscribe("ir-issue-object-selection-update"),m.subscribe("ir-issue-object-selection-update",function(e){D.handleObjectSelectionUpdate(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-issue-object-selection-update")]||this.modelEvents.subscribe({event:"co-issue-object-selection-update"},function(e){D.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){let e=v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var t={};"ChangeRequest"===D.contextType?t.commandInfo={type:"Change Request",facet:"Issue",action:"CR>Issue>Add Issue"}:"ChangeOrder"===D.contextType?t.commandInfo={type:"Change Order",facet:"Issue",action:"CO>Issue>Add Issue"}:"ChangeAction"===D.contextType?t.commandInfo={type:"Change Action",facet:"Issue",action:"CA>Issue>Add Issue"}:"InvestigationRequest"===D.contextType&&(t.commandInfo={type:"Investigation Request",facet:"Issue",action:"IR>Issue>Add Issue"}),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});let i=D.ChgIssueDataGridModel.treeDocument.getAllDescendants(),n={condition:"addExistingIssue",extendedQuery:D.createExcludeListForSearch(i)};if(l.getGlobalVariable().isNative){let e="CHG_Add_Existing_Issue";JSON.stringify(n);h.DispatchEventToWin(e,"")}else if(l.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();var a="../common/emxFullSearch.jsp?field=TYPES=Issue&txtExcludeOIDs="+i.map(e=>e.options.grid.id).toString()+"&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e;showChooser(a,850,630);var s=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,D.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",s)}else console.log("inside EVENT")};window.addEventListener("storage",s)}else{const e=r.activateSearch("","Issue");r.search(o.CHG_GOV_Issue,"Issue",D.OnSearchComplete,"Issue",e,void 0,void 0,n)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){if(l.getGlobalVariable().isNative){for(var i=e.split(","),n=[],o=0;o<i.length;o++)n.push({id:i[o]});n.length&&(t.hideEmptyView(),D.ChgIssueDataGridModel.addExistingChildren(n))}else{let i=[];for(o=0;o<e.length;o++)i.push({id:e[o][0]});i.length&&(t.hideEmptyView(),D.ChgIssueDataGridModel.addExistingChildren(i))}},removeHandler:function(){let e=v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var i={};"ChangeRequest"===D.contextType?i.commandInfo={type:"Change Request",facet:"Issue",action:"CR>Issue>Remove"}:"ChangeOrder"===D.contextType?i.commandInfo={type:"Change Order",facet:"Issue",action:"CO>Issue>Remove"}:"ChangeAction"===D.contextType?i.commandInfo={type:"Change Action",facet:"Issue",action:"CA>Issue>Remove"}:"InvestigationRequest"===D.contextType&&(i.commandInfo={type:"Investigation Request",facet:"Issue",action:"IR>Issue>Remove"}),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});const n=D.treeDocument.getSelectedNodes();if(n.length>0){let e=[];for(var s=0;s<n.length;s++)e.push({id:n[s].options.grid.id});D.ChgIssueDataGridModel.removeExistingChildren(e).then(function(e){0==D.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){0===e.count?D.chgIssueView.toolbar.updateNodeModel("remove",{visibleFlag:!1}):D.chgIssueView.toolbar.updateNodeModel("remove",{visibleFlag:!0})},globalSubscribeForChgIssueDataGridLayout:function(){s.addObserver("ChgIssueDataGridLayout","Lifecycle.Modification",D.handleForMaturityUpdate),s.addObserver("ChgIssueDataGridLayout","CO-Properties-Update",D.handlePropertiesUpdateForChgIssue)},handleForMaturityUpdate:function(e){if(e){let t=D.treeDocument.getSelectedNodes();C.getHandleForMaturityUpdate(JSON.parse(e),t)}},handlePropertiesUpdateForChgIssue:function(e){var t=D.ChgIssueTreeModel;t&&f.handlePropertiesOnUpdate(t,e)}};return D.globalSubscribeForChgIssueDataGridLayout(),D}),define("DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssuefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"issue-CO-container"}))},updateFacet:function(){var e=this,t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var i={id:t.get("objectId"),type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};a.getObjectTypeInformation(i.id).then(function(t){if("Change Request"==t||"Change Order"==t||"Change Action"==t||"Investigation Request"==t){"Change Action"==t?i.type="ChangeAction":"Change Order"==t?i.type="ChangeOrder":"Change Request"==t?i.type="ChangeRequest":"Investigation Request"==t&&(i.type="InvestigationRequest");var n=e.elements.container;o.createIssueView(n,i)}})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridContextualMenu","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.CAGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),u.unsubscribe("idcard-header-minified"),u.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-CA-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-CA-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-CA-tile-div").removeClassName("minified-header-height"))})},render:function(){let e=this.processColumns(),t=this,l={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRChangeActionGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return r.showRMBMenuOnGrid(e);t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t}};l=UWA.merge(l,this.options);let u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.CAGridView=new n(l),this.CAGridView.cellSelection="none",this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},function(e){var i=e.query;i&&t.CAGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||!e.options.grid.name||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&e.options.grid.name&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},function(e){t.CAGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new a(u);var p={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return r.showRMBMenuOnGrid(e)}};this.tileView.onContextualEvent=p,t.CAGridView.getTreeDocument().getXSO().onAdd(function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-CA-object-selection-update",data:{count:i,accessBits:t.options.accessBits}})}),t.CAGridView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-CA-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})});this.CAGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),s.toolbar=this.CAGridView.setToolbar(s.writetoolbarDefinition(this.options)),this.toolbar=s.toolbar,this.CAGridView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),document.getElementById("outer-CA-grid-div")&&document.getElementById("outer-CA-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-CA-grid-div",class:"outer-CA-grid-div"});let g=UWA.createElement("div",{class:"toolbar-CA-grid-div"});this.toolbar.inject(g);let h=UWA.createElement("div",{class:"content-CA-grid-div expanded-header-height"}),m=UWA.createElement("div",{styles:{height:"100%"},class:"content-CA-tile-div IssueTileView expanded-header-height"}),C=UWA.createElement("div",{class:"hideView",id:"changeActionEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(C),this.CAGridView.inject(h),this.tileView.inject(m),this.CAGridView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),C.inject(m),this.chgGridViewContainer.addContent(g),this.chgGridViewContainer.addContent(h),this.chgGridViewContainer.addContent(m),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.loader=(new o).inject(this.options.target)},onItemClick:function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount){t.nodeModel.select(!0);let e=t.nodeModel.getPath().length;this._modelEvents.publish({event:"IA-CA-Facet-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid,pathlength:e},context:t.nodeModel})}else if(t&&3===t.columnID){var i={};i.cellInfos=t,p.executeMaturity(i)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.CAGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/members/ChgCAMembersDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";var h=e.extend({init:function(e){this.contextID=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({useAsyncPreExpand:!0});return this.setTreeDocument(e),e},loadChangeActionMembersData:function(e,t){e.prepareUpdate(),r.reviewerType.typeOfReviewer="",o.isChangeCoordinatorConnected=!1;var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate();let n=document.getElementById("caMembers");n&&p.isMasked(n)&&p.unmask(n)},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomPersonNameField(e);e.person_name=t,e.roleList="";for(var n=0;n<e.roles.length;n++){var s=e.roles[n],l=o.getRoleNLSValue(s);e.roleList+=l,n!=e.roles.length-1&&(e.roleList+=", ")}e.roles.indexOf("approver")>=0&&(r.reviewerType.typeOfReviewer=e.type),e.roles.indexOf("coordinator")>=0&&(o.isChangeCoordinatorConnected=!0);var d="",c=[e.icon],u=e.roleList;"Person"==e.type?(d=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):d=e.thumbnail;if("Route Template"==e.type)var p=new i({label:e.title,subLabel:"",description:u,grid:e,icons:c,thumbnail:d,contextualMenu:["Copy1","Move1"]});else{let t;t="true"==a.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e.type.toLowerCase()?e.fullName+"("+e.userId.toUpperCase()+")":e.fullName;p=new i({label:t,subLabel:"",description:u,grid:e,icons:c,thumbnail:d,contextualMenu:["Copy1","Move1"]})}return p},createCustomPersonNameField:function(e){var t=new UWA.Element("div",{class:"members"}),i="";if((i="Person"==e.type?this.getPersonImageDiv(e):this.getRouteTemplateImageDiv(e)).addClassName("assignee"),"Route Template"==e.type)var n=UWA.createElement("span",{class:"userName",html:e.title});else n=UWA.createElement("span",{class:"userName",html:e.fullName});return i.inject(t),n.inject(t),t.outerHTML},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.userId+"/format/normal";i=a.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),o="";if(a.getGlobalVariable().isSwymInstalled)o=UWA.createElement("img",{class:"userIcon",src:i});else{var s=r.getAvatarDetails(e.fullName);o=UWA.createElement("div",{html:s.avatarStr}),1==t?(o.addClassName("chg-member-profile-picture"),o.addClassName("chg-team-profile-text")):o.addClassName("avatarIcon"),o.style.setProperty("background",s.avatarColor)}return o.inject(n),n},getRouteTemplateImageDiv:function(e){var t=new UWA.Element("div",{});return UWA.createElement("img",{class:"memberIcon",src:e.icon}).inject(t),t},addNodesInLayoutModel:function(e,t){var i=h.prototype.createTreeDocumentNodeModel(t);e.prepareUpdate(),e.addRoot(i),e.pushUpdate()},removeChildren:function(){var e=this,t=e.contextID,i=e.treeDocument.getSelectedNodes();if(0!=i.length){for(var n={person:[],userGroup:[]},a={person:[],routeTemplate:""},d={person:[],userGroup:[]},c=0;c<i.length;c++){let e=i[c].options.grid,t=e.role;if(t.indexOf("owner")>=0||t.indexOf("originator")>=0){let e=document.getElementById("caMembers");e&&p.isMasked(e)&&p.unmask(e),u.warn(s.CHG_Warn_Member_Remove_Owner_Originator)}else t.indexOf("contributor")>=0&&("Person"==e.type?n.person.push(e.userId):"Group"==e.type&&n.userGroup.push(e.id),o.isChangeCoordinatorConnected=!1),t.indexOf("approver")>=0&&("Person"==e.type?a.person.push(e.userId):"Route Template"==e.type&&(a.routeTemplate=e.id)),t.indexOf("follower")>=0&&("Person"==e.type?d.person.push(e.userId):"Group"==e.type&&d.userGroup.push(e.id))}if(a.person.length>0||""!=a.routeTemplate||d.person.length>0||d.userGroup.length>0||n.person.length>0||n.userGroup.length>0){var g=o.makeUpdateMemberJson("DISCONNECT",n,a,d);l.updateChangeActionMembers(t,g).then(function(t){for(var n=0;n<i.length;n++){var o=i[n].options.grid.role;o.indexOf("owner")>=0||o.indexOf("originator")>=0||e.treeDocument.removeRoot(i[n])}if(""!=a.routeTemplate)r.reviewerType.typeOfReviewer="";else if(a.person.length>0){let t=e.treeDocument.getChildren(),i=!1;for(var s=0;s<t.length;s++){if(t[s].options.grid.role.indexOf("approver")>=0){i=!0;break}}0==i&&(r.reviewerType.typeOfReviewer="")}let l=document.getElementById("caMembers");l&&p.isMasked(l)&&p.unmask(l)},function(e){let t=document.getElementById("caMembers");t&&p.isMasked(t)&&p.unmask(t)})}}}});return h}),define("DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e,t,i,n,o,a,s,r,l){"use strict";var d={create:function(e,t){var i=this;i.id=e.id;for(var n=s.getGlobalVariable(),o=n.referentialsSearchForbiddenType.split(","),a=(n.referentialsSearchType.split(","),n.tenantMappings),r=[],l=0;l<a.length;l++)n.tenant==a[l].platformId&&(r=a[l]);var d={parentObject:{parentId:e.id},connectorOptions:{fetchSecurityContext:function(){return n.getSecurityContext()},platformUrls:r},supportedTypes:{excludedTypes:o,includedTypes:["*"]}};"Change Action"==e.parentType&&(d.parentObject.relationName="Related Item"),d.readonly=t,require(["DS/ENOXAttachmentsUX/AttachmentsPane"],function(t){i.attachmentsPane=new t(d),i.modelEvents=i.attachmentsPane.modelEvents,i.subscribeToEvents(),i.attachmentsPane.inject(e.target)})},subscribeToEvents:function(){var e=this;e.modelEvents.subscribe({event:"attach-attachment-complete"},function(t){console.log("attached.....!");var i=t.document.dataelements;i.id=t.document.id;var n={attached:[]};n.attached.push(i);t={id:e.id,referentials:n,operation:"CONNECT"};a.publish("co-update-attachment-complete",t)}),e.modelEvents.subscribe({event:"upload-attachment-complete"},function(t){console.log("uploaded.....!");var i={};let n=t.parentObject.parentId;e.id=n,i.attached=[];for(var o=0;o<t.documents.length;o++){var s=t.documents[o].dataelements;s.id=t.documents[o].id,i.attached.push(s)}t={id:e.id,referentials:i,operation:"CONNECT"};a.publish("co-update-attachment-complete",t)}),e.modelEvents.subscribe({event:"detach-attachment-complete"},function(t){console.log("detached.....!");var i=t.id,n={detached:[]};n.detached.push(i);t={id:e.id,referentials:n,operation:"DISCONNECT"};a.publish("co-update-attachment-complete",t)}),s.getGlobalVariable().is3DSpace&&e.modelEvents.subscribe({event:"context-menu-requested"},function(t){if(console.log("context-menu-requested.....!"),t.contextMenu.getItem("Relations")){t.contextMenu.removeItem("Relations");var i={type:"PushItem",title:"Relations",text:"Relations",id:"Relations",fonticon:"object-related",handler:function(t){var i=e.attachmentsPane.getSelection();l.openRelationalExplorer(i)}};t.contextMenu.addItem(i)}}),s.getGlobalVariable().is3DSpace&&e.modelEvents.subscribe({event:"user-clicks-attach"},function(t){const i="wdg_"+(new Date).getTime();var n="../common/emxFullSearch.jsp?field=TYPES!="+s.getGlobalVariable().referentialsSearchForbiddenType+"&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+i;showChooser(n,850,630);var o=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(i)>-1){let t=JSON.parse(localStorage.searchedObjectDetails);delete t.uniqueKey;let i=[];Object.values(t).forEach(e=>{i.push(e[0])}),e.attachmentsPane.attachAttachments(i),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",o)}else console.log("inside EVENT")};window.addEventListener("storage",o)}),s.getGlobalVariable().isNative&&(e.modelEvents.subscribe({event:"user-clicks-attach"},function(e){r.DispatchEventToWin("CHG_Add_Attachment","Attachment")}),e.modelEvents.subscribe({event:"context-menu-requested"},function(e){var t=e.data[0].id;d.contextMenu=e.contextMenu,r.DispatchEventToWin("Referential_ContextMenu",t)}))},OnSearchComplete:function(e){for(var t=e.split(","),i=[],n=0;n<t.length;n++)i.push(t[n]);d.attachmentsPane.attachAttachments(i)},DisplayContextMenu:function(e){console.log("ChgAttachmentView: DisplayContextMenu.....!");for(var t=0;t<e.length;t++)d.contextMenu.addItem(e[t])}};return d}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemCreateNewCA",["DS/ENOChgActionCMDs/scripts/Commands/AddToNewCA","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENONewWidget/ENONewLauncher","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,o,a,s,r,l){return{createNewChangeActionInImpactedItemContext:function(e,d){let c=widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action";let u=e.parentID,p={context:{service:"3DSpace",tenant:i.getGlobalVariable().tenant,header:{SecurityContext:i.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:c,select:[],parentPIDs:[u]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:function(e){try{let s=l("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var i=e.result[0];if(i.isKindOfType="Change Action",s.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:i,View:"Impact Analysis"}),d.length>0){const e=[],s=[];for(let t of d)e.push(t.options.grid.id),s.push({id:t.options.grid.id,service:t.options.grid.serviceName,type:t.options.grid.type});const l=[];l.push(i.identifier);let c=[];for(let e of l){let t={id:e,proposedInformation:s,updateAction:"CONNECT"};c.push(t)}let p=u;0!=l.length&&0!=s.length&&o.connecteCAwithImpactedItem(c,p).then(function(i){let o=i.data[0].connectedProposedIds;if(0!=i.data[0].errorReport.length){var s=i.data[0].errorReport,r=[];for(var l in s)r+=s[l]+"<br/>";a.warn(r,"false")}r=[];let c=i.data;for(let i of c){i.id;let a=i.proposedIds,s=t.processChangeAction(i);for(let t of a)if(e.includes(t))for(let e of d)if(0!=o.length&&o.includes(e.options.grid.id)&&e.options.grid.id==t){e.options.grid.proposedChangeActionsData.push(s);let t=n.getProposedColumnBasedOnData(e.options.grid.proposedChangeActionsData);e.updateOptions({grid:{proposedChangeAction:t}})}}}),a.success(r.CHG_GOV_ImpactedItem_Toolbar_Add_New_ChangeAction_Product_Success)}else a.success(r.CHG_GOV_ImpactedItem_Toolbar_Add_New_ChangeAction_Success)}catch(e){console.log(e)}},onFailure:function(e){console.log("onFailure..............."+e)},onCancel:function(e){}}};(new s).CreateNew(p)}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:C.getGlobalVariable().get3DSpaceURL(),securityContext:C.getGlobalVariable().getSecurityContext(),isNative:C.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t;var n=this._modelEvents;this.chgOrchestrationGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgOrchestrationGridView.inject(this.options.target),this.chgOrchestrationGridView.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",function(e){e.value?(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("minified-header-height")):(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("minified-header-height"))}),widget.addEvents({onSearch:function(e){n.publish({event:"cr-orc-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"cr-orc-DataGrid-on-reset-search",data:{query:e},context:i})}})},loadCustomColumns:function(){let e=v.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&m.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){try{var e=this.processColumns(),t=this,p={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgCROrchestrationGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return c.showRMBMenuOnGrid(t,e,t.options.target).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};p=UWA.merge(p,this.options);var g={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.chgOrchestrationGrid=new o(p),this.chgOrchestrationGrid.cellSelection="none",this.chgOrchestrationGrid.getCustomViewsManager().onCustomViewsSave=function(e,i){f.onCustomViewsSave(e,i,t.options.custom_view_options)},this.chgOrchestrationGrid.columnDefinitionUpdated=!1,this.tileView=new s(g);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(t,e,!0).then(function(e){return e})}};this.tileView.onContextualEvent=h;this.chgOrchestrationGrid.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),r.toolbar=this.chgOrchestrationGrid.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar;t=this;this.chgOrchestrationGrid.addEventListener("allCellsRendered",function(){t.chgOrchestrationGrid.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.chgOrchestrationGrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.chgOrchestrationGrid.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)});var m=t.chgOrchestrationGrid.getTreeDocument().getXSO(),C=i.debounce(function(e){e&&e.length&&(e=e[0]);var i=t.chgOrchestrationGrid.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+0}}));var o=m.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)},5);m.onPostAdd(C),m.onPostRemove(C),t.tileView.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount){console.log("CROrchestration_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}});let e=i.nodeModel.getPath().length,n={},o={};e>1&&(n.id=i.nodeModel.getParent().options.grid.id,n.title=i.nodeModel.getParent().options.grid.title,n.name=i.nodeModel.getParent().options.grid.name),e>2&&(o.id=i.nodeModel.getParent().getParent().options.grid.id,o.title=i.nodeModel.getParent().getParent().options.grid.title,o.name=i.nodeModel.getParent().getParent().options.grid.name),t._modelEvents.publish({event:"CROrchestration-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid,pathlength:e,parentModel:n,gradParentModel:o},context:i.nodeModel})}else if(i&&2===i.columnID){var n={};n.cellInfos=i,f.executeMaturity(n)}},this._modelEvents.subscribe({event:"cr-orc-DataGrid-on-search"},function(e){var i=e.query;i&&t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-orc-DataGrid-on-reset-search"},function(e){t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.chgOrchestrationGridView=UWA.createElement("div",{id:"outer-orchestration-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-orchestration-grid-div"});var v=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-orchestration-grid-div"});this.toolbar.inject(v);var D=UWA.createElement("div",{class:"content-orchestration-grid-div expanded-header-height"}),b=UWA.createElement("div",{class:"content-orchestration-tile-div orchestrationtileView expanded-header-height"}),w=UWA.createElement("div",{class:"hideView",id:"orchestrationEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(w),this.chgOrchestrationGrid.inject(D),this.tileView.inject(b),w.inject(b),this.chgOrchestrationGridView.addContent(v),this.chgOrchestrationGridView.addContent(D),this.chgOrchestrationGridView.addContent(b),this.options.custom_view_options.dgvHandle=this.chgOrchestrationGrid,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=D,this.loader=(new a).inject(this.options.target);let S=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];f.registerCustomEventsOnDGV(S,this.chgOrchestrationGrid,this.options.custom_view_options)}catch(e){}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"cr-orchestration-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"cr-orchestration-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgOrchestrationGrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/util/ChgCAcontextGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/context/ChgCAcontextDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";let D={createContextView:function(t,s){var r=this;let p={};(p=UWA.merge(p,s)).target=t,p.columns=i.getColumns(),this.ChgCAcontextDataGridModel=new n(p.id),this.id=p.id,this.modelEvents=p.modelEvents,this.treeDocument=p.treeDocument=this.ChgCAcontextDataGridModel.createTreeDocument(),r.ChgCAContextTreeModel=p.treeDocument,this.subscribeToModelEvents(p.treeDocument),g.makeDroppable(p.target,r.dropHandler),this.contextView=new e(p),C.showLoader(p.target,this.contextView.loader),D.changeView();this.contextView.chgGridView;c.getCAContext(s.id).then(async function(e){var t={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(t=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var i=await u.processCAContextItems(e);r.chgCAcontextDataGridModel=new n(s.id);e.data.map(e=>e.policy).filter(function(e,t,i){return t==i.indexOf(e)});if(C.fetchMaturityStateCSS(i),r.chgCAcontextDataGridModel.loadContextData(p.treeDocument,i),C.hideLoader(p.target,r.contextView.loader),t&&t.length>0){var c=new Map,g=t.length;for(let e=0;e<t.length;e+=50){let i=[];i=g<50?t.slice(e,e+g):t.slice(e,e+50);for(var h=[],m=new Map,f=i,v=0;v<f.length;v++){var b=f[v];h.push(b.id),m.set(b.id,b)}var w=[];if(h.length>0){var S=u.commonPredicatedForFedSearch(),I=await u.callFederatedSearch(h,S);if(I&&I.results&&I.results.length>0)w=await u.processCAContextItemsFederatedSearch(I,m)}r.chgCAcontextDataGridModel.loadContextData(p.treeDocument,w),C.hideLoader(p.target,r.contextView.loader),c=new Map([...c,...m]),g-=50}if(c&&c.size>0){r.contextView.indexInfoDiv.show();var _=await d.recent();if(_&&_.results&&_.results.length>0){var y=u.filterNonIndexedDataNew(_,c);c.size!=y.length&&a.warn(o.CHG_GOV_Not_Accessable_Data,!0);var E=await u.processInformationForRecentCAContext(y);C.fetchMaturityStateCSS(E),r.chgCAcontextDataGridModel.loadContextData(p.treeDocument,E)}}}else r.contextView.indexInfoDiv.hide();var O=u.getDefaultFilter(p.columns);p.treeDocument.setFilterModel(O),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgCAContextTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgCAContextTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgCAContextTreeModel)}),0==p.treeDocument.getChildren().length?p.treeDocument._modelEvents.publish({event:"treeEmpty"}):p.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),D.changeView(),C.hideLoader(p.target,r.contextView.loader)},function(e){return Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);var t;D.ChgCAcontextDataGridModel.treeDocument;t=d.parseObjectInformation(e),D.ChgCAcontextDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),h.unsubscribe(`CA_Context:${widget.id}`),h.subscribe(`CA_Context:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCAContextTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCAContextTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCAContextTreeModel)})}),h.unsubscribe(`${e.options.id} of ${widget.id}`),h.subscribe(`${e.options.id} of ${widget.id}`,function(t){D.ChgCAcontextDataGridModel.filterView(t,e)}),h.unsubscribe(`${e.options.id} colorize ${widget.id}`),h.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){D.ChgCAcontextDataGridModel.enableColorizeView(t,e)}),h.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),h.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){D.ChgCAcontextDataGridModel.disableColorizeView(t,e)}),h.unsubscribe("updateIndexingIconForHideOrShowInContextItem"),h.subscribe("updateIndexingIconForHideOrShowInContextItem",function(e){i.contextView.indexInfoDiv.show()})},addExistingHandler:function(){var e={commandInfo:{type:"Change Action",facet:"Context",action:"CA>Context>Add"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=D.ChgCAcontextDataGridModel.treeDocument.getAllDescendants(),i=D.createExcludeListForSearch(t);if(l.getGlobalVariable().isNative){p.DispatchEventToWin("CHG_Add_Context","CHG_Add_Context")}else{let e={condition:"addExistingContexts",extendedQuery:i};const t=r.activateSearch();l.getGlobalVariable().is3DSpace&&t.socket.subscribeServer("SearchComServer",getTopWindow());r.search(o.CHG_GOV_AddExistingContext,"",D.OnSearchComplete,"contexts",t,void 0,void 0,e,void 0,"",!1)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){if(l.getGlobalVariable().isNative){let t=e.split("~"),l=[];for(var i=0;i<t.length;i++)l.push(t[i]);var n=!1;let c=[];for(var s=0;s<t.length;s++){var r=l[s].split(",");if(r[0].contains("uuid:"))n=!0;else{var d=[];d.push(r[0]),d.push(r[1]),d.push(r[4]),d.push(r[5]),d.push(""),d.push(r[2]),d.push(r[3]),d.push("3DSpace"),c.push(d)}}1==n&&a.warn(o.CHG_GOV_WARN_DATA_IGNORED),e=c}let c=[];for(i=0;i<e.length;i++)c.push({id:e[i][8]&&null!=e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2],environment:l.getGlobalVariable().tenant});c.length&&(t.hideEmptyView(),D.ChgCAcontextDataGridModel.addExistingChildren(c))},globalSubscribeForCAContextView:function(){s.addObserver("ChgCAcontextDataGridLayout","CO-AccessBit-Update",D.handleAccessBitUpdate),s.addObserver("ChgCAcontextDataGridLayout","Lifecycle.Modification",D.handleForMaturityUpdate),s.addObserver("ChgCAcontextDataGridLayout","CO-Properties-Update",D.handlePropertiesUpdateForCAContext)},handleAccessBitUpdate:function(e){"false"==e.accessBits.AddContext?(D.accessBit=!1,D.contextView.contextDataGridView.getToolbar().updateNodeModel("add",{disabled:!0}),D.contextView.contextDataGridView.getToolbar().updateNodeModel("remove",{disabled:!0})):(D.accessBit=!0,D.contextView.contextDataGridView.getToolbar().updateNodeModel("add",{disabled:!1}),D.contextView.contextDataGridView.getToolbar().updateNodeModel("remove",{disabled:!1}))},removeHandler:function(){var e={commandInfo:{type:"Change Action",facet:"Context",action:"CA>Context>Remove"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const i=D.treeDocument.getSelectedNodes();if(i.length>0){let e=[];for(var n=0;n<i.length;n++)e.push({id:i[n].options.grid.id,type:i[n].options.grid.type,updateAction:"DISCONNECT"});D.ChgCAcontextDataGridModel.removeExistingChildren(e).then(function(e){0==D.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleForMaturityUpdate:function(e){if(e){let t=D.treeDocument.getSelectedNodes();C.getHandleForMaturityUpdate(JSON.parse(e),t)}},handlePropertiesUpdateForCAContext:function(e){var t=D.ChgCAContextTreeModel;t&&f.handlePropertiesOnUpdate(t,e)}};return D.globalSubscribeForCAContextView(),D}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/context/ChgCAcontextDataGridLayout"],function(e,t,i,n,o,a,s,r,l,d){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"context-CA-container"}))},updateFacet:function(){var e=this;a.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId")};i.getObjectTypeInformation(n.id).then(function(t){if("Change Action"==t){let t=n.id;i.getChangeActionUserAccess(t).then(function(e){e.data[0].id,e.data[0]});var o=e.elements.container;d.createContextView(o,n),a.unmask(e.elements.container)}})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeView","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/util/ChgRelatedScopeGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/relatedScope/ChgRelatedScopeDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require","DS/UIKIT/Mask"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";let v={createRelatedScopeView:function(t,s){var r=this;let g={};this.chgCRImpactBasisView="",(g=UWA.merge(g,s)).target=t,g.columns=i.getColumns(),this.ChgRelatedScopeDataGridModel=new n(g.id),this.modelEvents=g.modelEvents,r.treeDocument=g.treeDocument=r.ChgRelatedScopeDataGridModel.createTreeDocument(),r.ChgRelatedScopeTreeModel=g.treeDocument,r.ChgRelatedScopeDataGridModel.registerCustomFilter(),p.makeDroppable(g.target,r.dropHandler),this.subscribeToModelEvents(g.treeDocument),r.chgCORelatedScopeView=new e(g),h.showLoader(g.target,this.chgCORelatedScopeView.loader),v.changeView(),c.getCORelatedScope(s.id).then(async function(e){var t={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(t=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var i=await u.processedChangeRequestRelatedScope(e);if(r.chgRelatedScopeDataGridModel=new n(s.id),h.fetchMaturityStateCSS(i),r.chgRelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,i),h.hideLoader(g.target,r.chgCORelatedScopeView.loader),t&&t.length>0){var c=new Map,p=t.length;for(let e=0;e<t.length;e+=50){let i=[];i=p<50?t.slice(e,e+p):t.slice(e,e+50);for(var m=[],C=new Map,f=i,D=0;D<f.length;D++){var b=f[D];m.push(b.id),C.set(b.id,b)}var w=[];if(m.length>0){var S=u.commonPredicatedForFedSearch(),I=await u.callFederatedSearch(m,S);if(I&&I.results&&I.results.length>0)w=await u.processReportedAgainstFederatedSearch(I,C)}r.chgRelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,w),h.hideLoader(g.target,r.chgCORelatedScopeView.loader),c=new Map([...c,...C]),p-=50}if(c&&c.size>0){r.chgCORelatedScopeView.indexInfoDiv.show();var _=await d.recent();if(_&&_.results&&_.results.length>0){var y=u.filterNonIndexedDataNew(_,c);c.size!=y.length&&a.warn(o.CHG_GOV_Not_Accessable_Data,!0);var E=await u.processInformationForRecentReportedAgainst(y);h.fetchMaturityStateCSS(E),r.chgRelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,E)}}}else r.chgCORelatedScopeView.indexInfoDiv.hide();var O=u.getDefaultFilter(g.columns);g.treeDocument.setFilterModel(O),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgRelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgRelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgRelatedScopeTreeModel)}),0==g.treeDocument.getChildren().length?g.treeDocument._modelEvents.publish({event:"treeEmpty"}):g.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),v.updateViewBasedOnAccessBit(),v.changeView(),h.hideLoader(g.target,r.chgCORelatedScopeView.loader)},function(e){return Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);var t;v.ChgRelatedScopeDataGridModel.treeDocument;t=d.parseObjectInformation(e),v.ChgRelatedScopeDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),g.unsubscribe(`CO_RelatedScope:${widget.id}`),g.subscribe(`CO_RelatedScope:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgRelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgRelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgRelatedScopeTreeModel)})}),g.unsubscribe(`${e.options.id} of ${widget.id}`),g.subscribe(`${e.options.id} of ${widget.id}`,function(t){v.ChgRelatedScopeDataGridModel.filterView(t,e)}),g.unsubscribe(`${e.options.id} colorize ${widget.id}`),g.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){v.ChgRelatedScopeDataGridModel.enableColorizeView(t,e)}),g.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),g.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){v.ChgRelatedScopeDataGridModel.disableColorizeView(t,e)}),g.unsubscribe("updateIndexingIconForHideOrShowInCOReportedAgainst"),g.subscribe("updateIndexingIconForHideOrShowInCOReportedAgainst",function(e){i.chgCORelatedScopeView.indexInfoDiv.show()}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-related-scope-object-selection-update")]||this.modelEvents.subscribe({event:"co-related-scope-object-selection-update"},function(e){v.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Reported Against",action:"CO>Reported Against>Add"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=v.ChgRelatedScopeDataGridModel.treeDocument.getAllDescendants();v.createExcludeListForSearch(t);const i=r.activateSearch();l.getGlobalVariable().is3DSpace&&i.socket.subscribeServer("SearchComServer",getTopWindow()),r.search(o.CHG_GOV_RelatedScope,"Program,Project Space,Model,Products,VPMReference,RFLVPMLogicalReference",v.OnSearchComplete,"relatedScope",i,void 0,void 0,{condition:"addExistingRelatedScope",extendedQuery:""})},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][8]&&null!=e[n][8]?e[n][8]:e[n][0],updateAction:"CONNECT",service:e[n][7]&&e[n][7].includes(":")?e[n][7].split(":")[0]:e[n][7],type:e[n][2],environment:l.getGlobalVariable().tenant});i.length&&(t.hideEmptyView(),v.ChgRelatedScopeDataGridModel.addExistingChildren(i))},removeHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Reported Against",action:"CO>Reported Against>Remove"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const i=v.treeDocument.getSelectedNodes();if(i.length>0){let e=[];for(var n=0;n<i.length;n++)e.push({id:i[n].options.grid.id,type:i[n].options.grid.type,updateAction:"DISCONNECT"});v.ChgRelatedScopeDataGridModel.removeExistingChildren(e).then(function(e){0==v.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},globalSubscribeForCORelatedScopeView:function(){s.addObserver("ChgCOrelatedScopeDataGridLayout","CO-AccessBit-Update",v.handleAccessBitUpdate),s.addObserver("ChgRelatedScopeDataGridLayout","Lifecycle.Modification",v.handleForMaturityUpdate),s.addObserver("ChgRelatedScopeDataGridLayout","CO-Properties-Update",v.handlePropertiesUpdateForRelatedScope)},handleAccessBitUpdate:function(e){"false"==e.accessBits.ManageReportedAgainst?(v.accessBit=!1,v.updateViewBasedOnAccessBit()):(v.accessBit=!0,v.updateViewBasedOnAccessBit())},updateViewBasedOnAccessBit:function(){0==v.accessBit?(v.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1}),v.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1})):(v.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!0}),v.chgCORelatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}))},handleObjectSelectionUpdate:function(e){0===e.count?v.chgCORelatedScopeView.toolbar.updateNodeModel("remove",{disabled:!0}):v.chgCORelatedScopeView.toolbar.updateNodeModel("remove",{disabled:!1})},handleForMaturityUpdate:function(e){if(e){let t=v.treeDocument.getSelectedNodes();h.getHandleForMaturityUpdate(JSON.parse(e),t)}},handlePropertiesUpdateForRelatedScope:function(e){var t=v.ChgRelatedScopeTreeModel;t&&m.handlePropertiesOnUpdate(t,e)}};return v.globalSubscribeForCORelatedScopeView(),v}),define("DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/facets/relatedScope/ChgRelatedScopeDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t,i,n,o,a,s,r,l,d){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"relatedScope-container"}))},updateFacet:function(){var e=this;o.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var i={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};s.getObjectTypeInformation(i.id).then(function(t){if("Change Order"==t)if(a.accessBit){var n=e.elements.container;a.createRelatedScopeView(n,i),o.unmask(e.elements.container)}else s.getChangeOrderUserAccess(i.id).then(function(t){var n=t.data[0].dataelements;n=d.processAccessBitCO(n),a.accessBit="true"==n.ManageReportedAgainst;var s=e.elements.container;a.createRelatedScopeView(s,i),o.unmask(e.elements.container)})})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout"],function(e){e.modelEvents.publish({event:"remove_aggregation_row_datagrid",data:{treeDocument:e.treeDocument}}),e.chgCRImpactAnalysisView.chgGridView.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){var e=document.getElementById("impactAnalysisEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactAnalysisEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:m.getGlobalVariable().get3DSpaceURL(),securityContext:m.getGlobalVariable().getSecurityContext(),isNative:m.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgOrchestrationGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgOrchestrationGridView.inject(this.options.target),this.chgOrchestrationGridView.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",function(e){e.value?(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("minified-header-height")):(i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-grid-div").removeClassName("minified-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").addClassName("expanded-header-height"),i.chgOrchestrationGridView.getElement(".content-orchestration-tile-div").removeClassName("minified-header-height"))});var n=this._modelEvents;widget.addEvents({onSearch:function(e){n.publish({event:"co-orc-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"co-orc-DataGrid-on-reset-search",data:{query:e},context:i})}})},loadCustomColumns:function(){let e=v.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&D.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){try{var e=this.processColumns(),t=this,p={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgOrchestrationGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return u.showRMBMenuOnGrid(t,e,!0).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};p=UWA.merge(p,this.options);var g={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"]};this.chgOrchestrationGrid=new o(p),this.chgOrchestrationGrid.cellSelection="none",this.chgOrchestrationGrid.getCustomViewsManager().onCustomViewsSave=function(e,i){f.onCustomViewsSave(e,i,t.options.custom_view_options)},this.tileView=new s(g);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return u.showRMBMenuOnGrid(t,e,!0).then(function(e){return e})}};this.tileView.onContextualEvent=h;this.chgOrchestrationGrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),r.toolbar=this.chgOrchestrationGrid.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar;t=this;this.chgOrchestrationGrid.addEventListener("allCellsRendered",function(){t.chgOrchestrationGrid.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.chgOrchestrationGrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:c.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.chgOrchestrationGrid.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)});var m=t.chgOrchestrationGrid.getTreeDocument().getXSO(),C=i.debounce(function(e){e&&e.length&&(e=e[0]);var i=t.chgOrchestrationGrid.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:c.CHG_GOV_StatusBar_SelectedItems+0}}));var o=m.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)},5);m.onPostAdd(C),m.onPostRemove(C),t.tileView.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount){console.log("COOrchestration_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}});let e=i.nodeModel.getPath().length,n={},o={};e>1&&(n.id=i.nodeModel.getParent().options.grid.id,n.title=i.nodeModel.getParent().options.grid.title,n.name=i.nodeModel.getParent().options.grid.name),e>2&&(o.id=i.nodeModel.getParent().getParent().options.grid.id,o.title=i.nodeModel.getParent().getParent().options.grid.title,o.name=i.nodeModel.getParent().getParent().options.grid.name),t._modelEvents.publish({event:"COOrchestration-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid,pathlength:e,parentModel:n,gradParentModel:o},context:i.nodeModel})}else if(i&&2==i.columnID){var n={};n.cellInfos=i,f.executeMaturity(n)}},this._modelEvents.subscribe({event:"co-orc-DataGrid-on-search"},function(e){var i=e.query;i&&t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"co-orc-DataGrid-on-reset-search"},function(e){t.chgOrchestrationGrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.chgOrchestrationGridView=UWA.createElement("div",{id:"outer-orchestration-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-orchestration-grid-div"});var v=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-orchestration-grid-div"});this.toolbar.inject(v);var D=UWA.createElement("div",{class:"content-orchestration-grid-div expanded-header-height"}),b=UWA.createElement("div",{class:"content-orchestration-tile-div orchestrationtileView expanded-header-height"}),w=UWA.createElement("div",{class:"hideView",id:"orchestrationEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(w),this.chgOrchestrationGrid.inject(D),this.tileView.inject(b),w.inject(b),this.chgOrchestrationGridView.addContent(v),this.chgOrchestrationGridView.addContent(D),this.chgOrchestrationGridView.addContent(b),this.options.custom_view_options.dgvHandle=this.chgOrchestrationGrid,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=D,this.loader=(new a).inject(this.options.target);let S=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];f.registerCustomEventsOnDGV(S,this.chgOrchestrationGrid,this.options.custom_view_options)}catch(e){}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"co-orchestration-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"co-orchestration-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgOrchestrationGrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout"],function(e){e.caGridView.caDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgImpactAnalysisServices","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil","DS/UIKIT/Mask","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S){"use strict";return e.extend({init:function(e){this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative,aggregationRowRequired:!0,aggregationRowID:"ia_Total",aggregationRowClass:"iaTotalAttribute"}};var i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),g.unsubscribe("idcard-header-minified"),g.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactAnalysis-tile-div").removeClassName("minified-header-height"))})},loadCustomColumns:function(){let e=w.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&S.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){var e=this.processColumns(),t=this,p={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:u.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactAnalysisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i="",n=null;if(e&&e.cellInfos&&e.cellInfos.columnID&&(5===e.cellInfos.columnID||6===e.cellInfos.columnID)){if(""!=(i=arguments[0].infos.target.getAttribute("id")))return 5!=e.cellInfos.columnID&&6!=e.cellInfos.columnID||e.cellInfos.nodeModel.options.grid.Dispatch_From.forEach(function(e){e.Id!=i||(n={id:e.Id,type:e.Type,name:e.Name,typeNLS:e.Type})}),null==n?null:f.getRMBForChangeRequest(n,e).then(function(e){return e})}else if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1&&"ia_Total"!=e.cellInfos.nodeModel.options.grid.id)return c.showRMBMenuOnGrid(t,e,!0).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;return e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)},getCellTooltip:function(e){if(5!==e.columnID&&6!==e.columnID||"__item__"!=e.cellView.cellType){if(1===e.columnID&&"__item__"==e.cellView.cellType){i="";if(e.nodeModel.options.grid.Dispatch_To&&e.nodeModel.options.grid.Dispatch_To.length>0&&e.nodeModel.options.grid.Dispatch_From_ParentCR&&e.nodeModel.options.grid.Dispatch_From_ParentCR.length>0)i=u.CHG_GOV_DISPATCH_FROM_AND_TO;else if(e.nodeModel.options.grid.Dispatch_To&&e.nodeModel.options.grid.Dispatch_To.length>0)i=u.CHG_GOV_DISPATCH_TO;else{if(!(e.nodeModel.options.grid.Dispatch_From_ParentCR&&e.nodeModel.options.grid.Dispatch_From_ParentCR.length>0))return t.chgGridView.getCellDefaultTooltip(e);i=u.CHG_GOV_DISPATCH_FROM}return{shortHelp:i,updateModel:!1}}return t.chgGridView.getCellDefaultTooltip(e)}var i="",n=(new DOMParser).parseFromString(e.cellModel,"text/html").getElementsByTagName("a");if(n)for(let e of n)i+=e.innerHTML,i+="\n";return{shortHelp:i,updateModel:!1}}};p=UWA.merge(p,this.options);var g={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.chgGridView=new o(p),this.chgGridView.cellSelection="none",this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){b.onCustomViewsSave(e,i,t.options.custom_view_options)},this.options.treeDocument.onNodeModelUpdate(function(e){h.getGlobalVariable().total_ia_row&&t.chgGridView.updateRenderedRow(h.getGlobalVariable().total_ia_row._getRowID(),{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1})}),this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},function(e){var i=e.query;i&&t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||!e.options.grid.name||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&e.options.grid.name&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},function(e){t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new s(g);var m={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return c.showRMBMenuOnGrid(t,e,!0).then(function(e){return e})}};this.tileView.onContextualEvent=m;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}});this.options.contextDetails.id;r.toolbar=this.chgGridView.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",function(){t.chgGridView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:d.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:d.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}]);var e=document.getElementById("outer-impactAnalysis-grid-div");"undefined"!=e&&null!=e&&v.unmask(e)}),t.chgGridView.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)});var C=t.chgGridView.getTreeDocument().getXSO(),D=i.debounce(function(e){e&&e.length&&(e=e[0]);var i=t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+0}}));var o=C.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)},5);C.onPostAdd(D),C.onPostRemove(D),t.tileView.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid&&"ia_Total"!=i.nodeModel.options.grid.id){if(1==e.multipleHitCount){var n={};4===i.columnID?n={ia_id:i.nodeModel.options.grid.id,ia_name:i.nodeModel.options.grid.name,ia_type:i.nodeModel.options.grid.type,column_id:i.columnID}:5!==i.columnID&&6!==i.columnID||(n={ia_id:i.nodeModel.options.grid.id,cr_ids:i.nodeModel.options.grid.Dispatch_From,column_id:i.columnID}),t._modelEvents.publish({event:"IA-DataGrid-on-click",data:n,context:i.nodeModel})}if(2==e.multipleHitCount&&(i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"IA-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel})),i&&3==i.columnID){var o={};o.cellInfos=i,b.executeMaturity(o)}}},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactAnalysis-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-impactAnalysis-grid-div"});var w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-impactAnalysis-grid-div"});this.toolbar.inject(w);var S=UWA.createElement("div",{class:"content-impactAnalysis-grid-div expanded-header-height"}),I=UWA.createElement("div",{class:"content-impactAnalysis-tile-div impactAnalysisTileView expanded-header-height"}),_=UWA.createElement("div",{class:"hideView",id:"impactAnalysisEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(_),this.chgGridView.inject(S),this.tileView.inject(I),_.inject(I),this.chgGridViewContainer.addContent(w),this.chgGridViewContainer.addContent(S),this.chgGridViewContainer.addContent(I),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=S,this.loader=(new a).inject(this.options.target);b.registerCustomEventsOnDGV(["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"],this.chgGridView,this.options.custom_view_options)},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"cr-impact-analysis-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"cr-impact-analysis-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesModel"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e)},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",p)},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.Title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.Name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.Severity+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.Owner+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.State},getNLSForChangeImpactsColumn:function(e){if(e&&e["Impact Type"]&&""!=e["Impact Type"]){if("Proposed Change"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Proposed_Change;if("Realized Change"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Realized_Change;if("Resolution Item"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Resolution_Item;if("Affected Item"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Affected_Item;if("Applicability"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Applicability;if("Impact Basis"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Impact_Basis;if("Impacted Item"===e["Impact Type"])return a.CHG_CA_Column_Change_Impacts_Impacted_Item}return""},getNLSForStatusColumn:function(e){if(e&&e.Status&&""!=e.Status){if("Not Started"===e.Status)return a.CHG_CA_Column_Status_Not_Started;if("Started"===e.Status)return a.CHG_CA_Column_Status_Started;if("Ignored"===e.Status)return a.CHG_CA_Column_Status_Ignored;if("Rejected"===e.Status)return a.CHG_CA_Column_Status_Rejected;if("Complete"===e.Status)return a.CHG_CA_Column_Status_Complete;if("Partial"===e.Status)return a.CHG_CA_Column_Status_Partial}return""},setApplicabilityData:async function(e){try{if("Change Action"==e.type){const t=await l.getApplicabilityDataForCA(e.changeId);if(t.changeaction&&t.changeaction.applicability){return t.changeaction.applicability.expressionTXT}}else{const t=await l.getApplicabilityData(e.changeId);if(t.applicability){return t.applicability.display}}}catch(e){throw e}},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(i),i.outerHTML},getProposedDetailHTMLObject:function(e){let t=UWA.createElement("div",{class:"proposedDetail_div"});return"Resolution Item"===e["Impact Type"]&&t.setContent([{tag:"img",allowUnsafeHTMLContent:!0,src:e.proposedDetails[0].icon,styles:{"padding-left":"5px"}},{tag:"span",allowUnsafeHTMLContent:!0,class:"proposed_detail_previous_obj_label",text:e.proposedDetails[0].title,styles:{"padding-left":"5px"}},{tag:"span",class:"proposed_detail_obj_revision",allowUnsafeHTMLContent:!0,text:e.proposedDetails[0].revision,styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer",width:20,height:20,"padding-left":"5px"}},{tag:"span",allowUnsafeHTMLContent:!0,class:"proposed_detail_obj_menu_launcher wux-tweakers-string-icon wux-ui-genereatedicon-fi wux-ui-3ds wux-ui-3ds-chevron-down wux-ui-3ds wux-ui-3ds-lg",styles:{cursor:"pointer"}}]),t.outerHTML},getParsedPrposedOperation:function(e){let t={};if("Proposed Change"===e["Impact Type"]){let i=e.changeActivity||"",n=e.change||"",o=i.split(" "),a=n.split(" ");t.changeActivityOperation=o[0],t.changeDetailOperation=a[0]}else"Realized Change"===e["Impact Type"]&&(t=e.realizedChangesDetailsArray[0].operation);return t},getReasonForChange:function(e){return"Proposed Change"===e["Impact Type"]?e.proposedWhy:"Realized Change"===e["Impact Type"]?e.realizedChangesDetailsArray[0].realizedWhy:""},getOperationForProposed:function(e,t){return"ChangeStatus"==t.changeActivityOperation?e.computedOperation="ChangeStatus":e.computedOperation=t.changeDetailOperation,a["CHG_GOV_Proposed_Activity_"+e.computedOperation]?a["CHG_GOV_Proposed_Activity_"+e.computedOperation]:""},getOperationForRealized:function(e,t,i){let n=[],o=[];var s=[];let r;for(let l=0;l<e.length;l++)if("Realized Change"==e[l]["Impact Type"]){for(let s=0;s<i.length;s++){const d=i[s];if(t===d.wherePID){if(d.afterPID&&d.wherePID!==d.afterPID&&!o.includes("Structure Modification")){let e=a.CHG_GOV_Realized_Activity_NonPrimeRoot;o.push(e)}if(d.beforePID&&d.wherePID!==d.beforePID){if(!o.includes("Structure Modification")){let e=a.CHG_GOV_Realized_Activity_NonPrimeRoot;o.push(e)}}else if(d.afterPID&&d.wherePID===d.afterPID){let t=this.getOperationForParentObject(d.operation);r=this.getOperationForParentObject(e[l].realizedChangesDetailsArray[0].operation),n.push(t)}}else if(t!==d.wherePID)if(t===d.afterPID){let t=this.getOperationDescObject(d.operation);r=this.getOperationDescObject(e[l].realizedChangesDetailsArray[0].operation),n.push(t)}else if(t===d.beforePID){let t=this.getOperationDescObject(d.operation);r=this.getOperationDescObject(e[l].realizedChangesDetailsArray[0].operation),n.push(t)}}if(n.length>0){for(let t=0;t<n.length;t++)if(r===n[t]){-1===s.findIndex(t=>t["Impact Type"]===e[l]["Impact Type"]&&t.id===e[l].id)&&(e[l].changeOperation=n[t],s.push(e[l]))}}else if(n.length<=0&&o.length>0){-1===s.findIndex(t=>t["Impact Type"]===e[l]["Impact Type"]&&t.id===e[l].id)&&(e[l].changeOperation=o[0],s.push(e[l]))}}else if("Proposed Change"===e[l]["Impact Type"]){let t=this.getParsedPrposedOperation(e[l]),i=this.getOperationForProposed(e[l],t);e[l].changeOperation=i,s.push(e[l])}else s.push(e[l]);return s},getOpeartionChangeStatusObject:function(e){let t=e.split("#"),i=t[1].split("."),n=i[i.length-1];return a["CHG_GOV_Realized_Activity_"+t[0]+"_Suffix"]+" : "+n},getOperationForParentObject:function(e){var t=this;let i=[],n="";return e.split(" ").forEach(function(e){console.log(e),console.log("CHG_GOV_Realized_Activity_"+e),e.includes("#")?(n=t.getOpeartionChangeStatusObject(e),i.push(n)):(n=a["CHG_GOV_Realized_Activity_"+e],i.push(n))}),i.join(", ")},getOperationDescObject:function(e){let t=e.split(" "),i=[];return t.forEach(function(e){let t=a["CHG_GOV_Realized_Activity_"+e+"_Usage"];i.push(t)}),i.join(", ")},loadChangeImpactsData:async function(e,t,o){var a=new n;e.prepareUpdate();let s=this.getOperationForRealized(t,o,t.realizedChangeDetailsArray);for(var r=0;r<s.length;r++){var l=await this.setApplicabilityData(s[r]),d=this.createCustomNameField(s[r]);s[r].name=d;var c=this.getNLSForStatusColumn(s[r]),u=this.getNLSForChangeImpactsColumn(s[r]),p=this.createCustomTooltip(s[r]),g=this.getProposedDetailHTMLObject(s[r]);this.getParsedPrposedOperation(s[r]);let t=this.getReasonForChange(s[r]),n=s[r].changeOperation;var h=i.createTreeNodeDataModel(a,{label:s[r].title,customTooltip:p,grid:{id:s[r].id,impactType:s[r]["Impact Type"],impactTypeNLS:u,status:c,maturity:s[r].current,maturityWithBadge:s[r].currentNLS,policy:s[r].policy,policyNLS:s[r].policyNLS,description:s[r].description,icon:s[r].icon,previewicon:s[r].previewicon,co_name:s[r].name,organization:s[r].organization,owner:s[r].owner,ownerFullName:s[r].ownerFullName,project:s[r].project,revision:s[r].revision,severity:s[r].severity,severityNLS:s[r].severityNLS,severityGrade:"High"==s[r].severity?2:"Medium"==s[r].severity?1:0,title:s[r].title,type:s[r].type,typeNLS:s[r].typeNLS,proposedChange:g,proposedID:s[r].proposedDetails[0].id,proposedName:s[r].proposedDetails[0].name,proposedTitle:s[r].proposedDetails[0].title,proposedType:s[r].proposedDetails[0].type,proposedTypeNLS:s[r].proposedDetails[0].typeNLS,proposedRevision:s[r].proposedDetails[0].revision,proposedOrganization:s[r].proposedDetails[0].organization,proposedProject:s[r].proposedDetails[0].project,proposedOwner:s[r].proposedDetails[0].owner,proposedOwnerFullName:s[r].proposedDetails[0].ownerFullName,proposedTypeIcon:s[r].proposedDetails[0].icon,Action:"",applicability:l,applicabilityIcon:s[r].Applicability,change:n,reasonForChange:t,interfaces:s[r].interfaces,classes:s[r].classes}});e.addChild(h)}e.pushUpdate()}})}),define("DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler",["i18n!DS/ENOChangeActionUX/assets/nls/ChangeAction","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsDataGridView","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsGridCol","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsGridModel","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsFeatureUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","require","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";var m={getSelectedNodes:function(){return m.chgGovDataGridView.options.treeDocument.getSelectedNodes()},getObjectLabel:function(e){return e?e.slice(0,50)+(e.length>50?"... ":" "):""},globalSubscribeChangeImpactsSummary:function(){h.addObserver("ChgChangeImpactsHandler","Lifecycle.Modification",m.handleForMaturityUpdate)},handleForMaturityUpdate:function(e){let t=g("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil");if(e){let i=m.chgGovDataGridView.options.treeDocument.getSelectedNodes();t.getHandleForMaturityUpdate(JSON.parse(e),i)}},getUniqueItems:function(e,t){var i=[],n=[];return e.forEach(function(e){"Realized Change"===e["Impact Type"]?(n=n.concat(e.realizedChangesDetailsArray),i.push(e)):i.findIndex(t=>t["Impact Type"]==e["Impact Type"]&&t.id==e.id&&t.Status==e.Status)<=-1&&(i.push(e),console.log(i))}),n.length>0&&(i.realizedChangeDetailsArray=n),i},getInterfacesData:function(e){var t=void 0,i=new Array;for(let n=0;n<e.length;n++){e[n].interface&&(t=new Set(e[n].interface)),e[n].classes&&(i=[...i,...p.getProposedClassifiedInterfaces(e[n].classes)]);let o=[];t&&(o=(o=Array.from(t)).filter(e=>""!==e));let a=[];i&&i.length>0&&(a=i.filter(e=>""!==e.name)),e[n].interfaces=o,e[n].classes=a}return e},launchImpactsView:async function(e){const r=e.objectID,l=e.objectType,d=e.serviceId;let u=e.label;u=this.getObjectLabel(u);let h=e.objectRevision?e.objectRevision:"";m.impactsContent=new UWA.Element("div",{styles:{height:"100%",width:"100%"}});var C=new i({identifier:"WebUX_IMF_ECM_IMPACTS"});C.reactToPointerEventsFlag=!1;var f=new t({immersiveFrame:C,title:u?c.CHG_CA_Header_Change_Impacts+": "+u+h:c.CHG_CA_Header_Change_Impacts,content:m.impactsContent,height:360,width:900,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_IMPACTS"});C.inject(widget.body),f.addEventListener("keydown",function(e){27==e.which&&C.remove()});var v={target:m.impactsContent,columns:a.getColumns(),physicalId:r,option:e},D=new s;try{v.columns=[...v.columns],v.treeDocument=D.createTreeDocument();let e=v.treeDocument;D.registerCustomFilter(),m.chgGovDataGridView=new n(v),m.chgGovDataGridView.render(),m.chgGovDataGridView.showSpinner();const t=await o.getChangeImpacts(r,l,d);var b=await this.getInterfacesData(t.data[0].changeImpactsInformation);const i=await p.getNLSForProcessedList("ChangeImpacts",b);var w=i.map(e=>e.policy).filter(function(e,t,i){return t==i.indexOf(e)});const a=await o.getStatesAttributes(w);g("DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil").addCSSMaturityClasses(w,"wux-controls-label",a);var S=this.getUniqueItems(i,r);await D.loadChangeImpactsData(e,S,r);var I=p.getDefaultFilter(v.columns);e.setFilterModel(I),m.chgGovDataGridView.loadCustomColumns(),m.chgGovDataGridView.hideSpinner()}catch(e){m.chgGovDataGridView.hideSpinner(),console.error(e)}}};return m.globalSubscribeChangeImpactsSummary(),m}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesUtil",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";return{getColumns:function(){return[i.getColumnDefinition({dataIndex:"titleTree"}),i.getColumnDefinition({dataIndex:"typeNLS"}),i.getColumnDefinition({dataIndex:"chgObjName"}),i.getColumnDefinition({dataIndex:"revision"}),i.getColumnDefinition({dataIndex:"maturityWithBadge",width:80}),i.getColumnDefinition({dataIndex:"collabspaceNLS"}),i.getColumnDefinition({dataIndex:"organizationNLS"}),{dataIndex:"reasonForChange",text:g.Chg_GOV_Reason_For_Change,visibleFlag:!0,alwaysVisibleFlag:!0,typeRepresentation:"editor",editionPolicy:"EditionOnOver",filterId:"stringRegexp",filterModel:"",editableFlag:!0,getCellEditableState:function(e){let t=!0;return e&&e.nodeModel&&("completedKey"!=e.nodeModel.getAttributeValue("proposedStatus")&&"false"!=e.nodeModel.getAttributeValue("addProposedAccess")||(t=!1)),t}},{dataIndex:"change",text:g.CHG_GOV_Proposed_Changes,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"url",width:75,filterId:"set",filterModel:[],getCellValue:function(e){if(e.nodeModel)return{icon:e.nodeModel.getAttributeValue("activityIcon")}},getCellTooltip:function(e){if(e.nodeModel)return{shortHelp:e.nodeModel.getAttributeValue("change")}}},{dataIndex:"change_details",text:g.CHG_GOV_Realized_Change_Details,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,filterId:"stringRegexp",filterModel:"",getCellTooltip:function(e){if(e.nodeModel)return{shortHelp:e.nodeModel.getAttributeValue("change_details")}}},{dataIndex:"proposedStatus",text:g.CHG_GOV_Proposed_ProposalStatus,editableFlag:!0,visibleFlag:!0,alwaysVisibleFlag:!1,editionPolicy:"EditionOnOver",typeRepresentation:"proposedStatus",filterId:"set",filterModel:[]},{dataIndex:"resolvedBy",text:g.CHG_GOV_Proposed_ResolvedBy,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0,filterId:"stringRegexp",filterModel:""}]},getNativeContextualMenu:async function(e){let t=[];var i={objectID:[]},n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();return 1==n.length&&e.cellInfos.columnID&&11===e.cellInfos.columnID&&1==e.cellInfos.nodeModel.options.grid.resolution.length?i.objectID.push(e.cellInfos.nodeModel.options.grid.resolution[0].id):n.forEach(e=>{i.objectID.push(e.options.grid.id)}),t.push(a.getExploreMenu(null,i)),t.push(a.getExploreWithMenu(null,i)),t.push(a.getOpenMenu(null,i)),t.push(a.getOpenWithNativeMenu(null,i)),(await this.getCommonMenu(e)).forEach(e=>{t.push(e)}),t},getDashboardContextualMenu:async function(e){let t=[],i=!1;if(e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(i=!0),!i){let i=await this.getOpenWithMenu(e);i&&t.push(i)}return(await this.getCommonMenu(e)).forEach(e=>{t.push(e)}),t},getOpenWithMenu:async function(e){let t=void 0,i=void 0;if(l.getGlobalVariable().is3DSpace&&!window.x3DPlatformServices&&!window.COMPASS_CONFIG){const e=getTopWindow().document.createElement("div");e.id="hiddenDivForCompassInNewWindow",e.style.display="none",getTopWindow().document.body.appendChild(e),window.COMPASS_CONFIG={myAppsBaseUrl:l.getGlobalVariable().baseURL,userId:"",lang:navigator.language,compassTarget:e.id}}if(e.cellInfos.columnID&&11===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.resolution&&1==e.cellInfos.nodeModel.options.grid.resolution.length){let o=e.cellInfos.nodeModel.options.grid.resolution[0].id,s=e.cellInfos.nodeModel.options.grid.resolution[0].type,r=e.cellInfos.nodeModel.options.grid.resolution[0].serviceBasedObjId,l=[];l.push(s),e.cellInfos.nodeModel.options.grid.resolution[0].kind&&""!=e.cellInfos.nodeModel.options.grid.resolution[0].kind&&(l=l.concat(e.cellInfos.nodeModel.options.grid.resolution[0].kind));var n={selectedItem:i={objectId:r||o,objectType:s,objectTaxonomies:l}};t=await a.openWith(i)}else{let o=e.cellInfos.nodeModel.options.grid.id,s=e.cellInfos.nodeModel.options.grid.type,r=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,l=[];l.push(s),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(l=l.concat(e.cellInfos.nodeModel.options.grid.kind));n={facetName:"ProposedDGV",selectedItem:i={objectId:r||o,objectType:s,objectTaxonomies:l,facetName:"ProposedDGV"}};a.setSelectedItem(n),t=await a.openWith(i)}return t},getCommonMenu:async function(e){var t=[];let n=e.cellInfos.nodeModel.options.grid.id,o=e.cellInfos.nodeModel.options.grid.title,a=e.cellInfos.nodeModel.options.grid.revision,r=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,l=!1,m=!1;e.cellInfos.columnID&&11===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.resolution&&1==e.cellInfos.nodeModel.options.grid.resolution.length&&(m=!0,n=e.cellInfos.nodeModel.options.grid.resolution[0].id,o=e.cellInfos.nodeModel.options.grid.resolution[0].title,a=e.cellInfos.nodeModel.options.grid.resolution[0].revision,r=e.cellInfos.nodeModel.options.grid.resolution[0].serviceBasedObjId),e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(l=!0);let C=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),f=[],v=[],D=[];if(C.forEach(e=>{f.push(e.options.grid.id),v.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&D.push(e.options.grid.serviceBasedObjId)}),!m&&"true"==e.cellInfos.nodeModel.options.grid.addProposedAccess){let e={type:"PushItem",title:g.CHG_GOV_Proposed_Edit,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-pencil"},action:{callback:function(e){u.publish("ECM_GOV_ProposedDGV_EDIT:"+(widget?widget.id:""))}}};t.push(e);let i={type:"PushItem",title:g.CHG_GOV_Proposed_ChangeAssessment,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-component"},action:{callback:function(e){u.publish("ECM_GOV_ProposedDGV_ADD_ASSESSMENT:"+(widget?widget.id:""))}}};t.push(i)}if(!l&&!m&&"None"==e.cellInfos.nodeModel.options.grid.computedOperation&&"completedKey"!=e.cellInfos.nodeModel.options.grid.proposedStatus&&"true"==e.cellInfos.nodeModel.options.grid.addProposedAccess){let i=[];"LEGACY_3DSPACE"==e.cellInfos.nodeModel.options.grid.sourceType&&i.push({type:"PushItem",title:g.CHG_GOV_Proposed_ResolutionVersion,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-flow-branch-list"},action:{callback:function(t){var i={id:"NEW_MIB"==e.cellInfos.nodeModel.options.grid.sourceType?e.cellInfos.nodeModel.options.grid.serviceBasedObjId:e.cellInfos.nodeModel.options.grid.id,type:e.cellInfos.nodeModel.options.grid.type,proposedOperation:e.cellInfos.nodeModel.options.grid.proposedOperation,action:"addResolution"};var n={commandInfo:{type:"Change Action",facet:"Proposed Change",action:"CA>Proposed Change>RMB>Resolved By>Identify From Versions"}};h("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n}),u.publish("ECM_GOV_ProposedDGV_LaunchVersionExplorer:"+(widget?widget.id:""),i)}}}),i.push({type:"PushItem",title:g.CHG_GOV_Proposed_ResolutionSearch,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-search"},action:{callback:function(t){var i={id:e.cellInfos.nodeModel.options.grid.id,type:e.cellInfos.nodeModel.options.grid.type,proposedOperation:e.cellInfos.nodeModel.options.grid.proposedOperation};u.publish("ECM_GOV_ProposedDGV_SearchResolution:"+(widget?widget.id:""),i)}}});let n={type:"PushItem",title:g.CHG_GOV_Proposed_Resolution,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-target-add"},submenu:i};t.push(n)}const b={};if(b.selectedNodeIDs=m?[r]:v,t.push(i.getRelationalExplorerMenu(b)),!l){let i={type:"PushItem",title:g.CHG_GOV_Change_Impacts,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){let i={};i.objectID=n,i.label=o,i.objectRevision=a,i.objectType=e.cellInfos.nodeModel.options.grid.type,i.serviceId=e.cellInfos.nodeModel.options.grid.serviceName;var s={commandInfo:{type:"Change Action",facet:"Proposed Change",action:"CA>Proposed Change>RMB>Change Impacts"}};h("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:s}),c.launchImpactsView(i)}}};t.push(i)}let w,S={type:"PushItem",title:g.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(e){D.length>0?i.download(D):p.warn(g.CHG_GOV_Download_Skipped)}}},I={type:"PushItem",title:g.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye"},action:{callback:function(e){D.length>0?s.preview(D):p.warn(g.CHG_GOV_Download_Skipped)}}};if(1==v.length&&(w=await s.getDocuments(D)),(l||w&&w[0]&&w[0].dataelements&&"TRUE"===w[0].dataelements.isDocumentType)&&(t.push(S),t.push(I)),m?t.push(d.createPropertyPushItem([r])):t.push(d.createPropertyPushItem(v)),m&&"true"==e.cellInfos.nodeModel.options.grid.addProposedAccess){let i={type:"PushItem",title:g.CHG_GOV_Proposed_RemoveResolution,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(t){var i={id:e.cellInfos.nodeModel.options.grid.id,type:e.cellInfos.nodeModel.options.grid.type,proposedOperation:e.cellInfos.nodeModel.options.grid.proposedOperation,updateAction:"DISCONNECT"},n=[];n.push({id:e.cellInfos.nodeModel.options.grid.resolution[0].id,service:e.cellInfos.nodeModel.options.grid.resolution[0].serviceName,type:e.cellInfos.nodeModel.options.grid.resolution[0].type}),i.resolution=n;var o=[i];u.publish("ECM_GOV_ProposedDGV_RemoveResolution:"+(widget?widget.id:""),o)}}};t.push(i)}if(!m&&"true"==e.cellInfos.nodeModel.options.grid.removeProposedAccess){let e={type:"PushItem",title:g.CHG_GOV_Proposed_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(e){u.publish("ECM_GOV_Proposed_Remove:"+(widget?widget.id:""))}}};t.push(e)}return t}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemUtil",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r,l,d,c,u,p){"use strict";return{getColumns:function(){return[t.getColumnDefinition({dataIndex:"titleTree"}),t.getColumnDefinition({dataIndex:"typeNLS"}),t.getColumnDefinition({dataIndex:"name"}),t.getColumnDefinition({dataIndex:"revision"}),t.getColumnDefinition({dataIndex:"maturityWithBadge"}),t.getColumnDefinition({dataIndex:"collabspaceNLS"}),t.getColumnDefinition({dataIndex:"organizationNLS"})]},getNativeContextualMenu:async function(e,t){let i=[];var n={objectID:[]};return e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().forEach(e=>{n.objectID.push(e.options.grid.id)}),i.push(o.getExploreMenu(null,n)),i.push(o.getExploreWithMenu(null,n)),i.push(o.getOpenMenu(null,n)),i.push(o.getOpenWithNativeMenu(null,n)),(await this.getCommonMenu(e,t)).forEach(e=>{i.push(e)}),i},getDashboardContextualMenu:async function(e,t){let i=[],n=!1;if(e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(n=!0),!n){let t=await this.getOpenWithMenu(e);t&&i.push(t)}return(await this.getCommonMenu(e,t)).forEach(e=>{i.push(e)}),i},getOpenWithMenu:async function(e){let t=void 0,i=void 0;if(r.getGlobalVariable().is3DSpace&&!window.x3DPlatformServices&&!window.COMPASS_CONFIG){const e=getTopWindow().document.createElement("div");e.id="hiddenDivForCompassInNewWindow",e.style.display="none",getTopWindow().document.body.appendChild(e),window.COMPASS_CONFIG={myAppsBaseUrl:r.getGlobalVariable().baseURL,userId:"",lang:navigator.language,compassTarget:e.id}}if(e.cellInfos.nodeModel.options.grid.id&&e.cellInfos.nodeModel.options.grid.id){let a=e.cellInfos.nodeModel.options.grid.id,s=e.cellInfos.nodeModel.options.grid.type,r=[];r.push(s),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(r=r.concat(e.cellInfos.nodeModel.options.grid.kind));var n={facetName:"ResolutionDGV",selectedItem:i={objectId:a,objectType:s,objectTaxonomies:r,facetName:"ResolutionDGV"}};o.setSelectedItem(n),t=await o.openWith(i)}return t},getCommonMenu:async function(e,i){var n=[];let o=e.cellInfos.nodeModel.options.grid.id,s=e.cellInfos.nodeModel.options.grid.title,r=e.cellInfos.nodeModel.options.grid.revision,g=(e.cellInfos.nodeModel.options.grid.serviceBasedObjId,!1);e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(g=!0);let h=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),m=[],C=[],f=[];h.forEach(e=>{m.push(e.options.grid.id),C.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&f.push(e.options.grid.serviceBasedObjId)});const v={};if(v.selectedNodeIDs=C,n.push(t.getRelationalExplorerMenu(v)),!g){let t={type:"PushItem",title:p.CHG_GOV_Change_Impacts,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){let i={};i.objectID=o,i.label=s,i.objectRevision=r,i.objectType=e.cellInfos.nodeModel.options.grid.type,i.serviceId=e.cellInfos.nodeModel.options.grid.serviceName,d.launchImpactsView(i)}}};n.push(t)}let D,b={type:"PushItem",title:p.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(e){f.length>0?t.download(f):u.warn(p.CHG_GOV_Download_Skipped)}}},w={type:"PushItem",title:p.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye"},action:{callback:function(e){f.length>0?a.preview(f):u.warn(p.CHG_GOV_Download_Skipped)}}};if(1==C.length&&(D=await a.getDocuments(f)),(g||D&&D[0]&&D[0].dataelements&&"TRUE"===D[0].dataelements.isDocumentType)&&(n.push(b),n.push(w)),n.push(l.createPropertyPushItem(C)),"true"==i.removeProposedAccess){let t={type:"PushItem",title:p.CHG_GOV_Proposed_RemoveResolution,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(t){var n={id:i.id,type:i.type,proposedOperation:i.proposedOperation,updateAction:"DISCONNECT"},o=[];e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().forEach(function(e){o.push({id:e.options.grid.id,service:e.options.grid.serviceName,type:e.options.grid.type})}),n.resolution=o;var a=[n];c.publish("ECM_GOV_ProposedDGV_RemoveResolution:"+(widget?widget.id:""),a)}}};n.push(t)}return n}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesUtil",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";return{getColumns:function(t){return[i.getColumnDefinition({dataIndex:"titleTree",width:260}),{dataIndex:"title_instance",ds6wIndexMapping:"ds6w:label",text:l.CHG_GOV_DataGrid_Column_Title,icon:"flow-cascade",width:200,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!0},i.getColumnDefinition({dataIndex:"typeNLS"}),i.getColumnDefinition({dataIndex:"name"}),i.getColumnDefinition({dataIndex:"revision"}),i.getColumnDefinition({dataIndex:"maturityWithBadge",width:80}),{dataIndex:"reasonForChange",text:l.Chg_GOV_Reason_For_Change,editableFlag:!0,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"editor",editionPolicy:"EditionOnOver",getCellEditableState:function(t){let i=!0;return t&&t.nodeModel&&(!1!==t.nodeModel.getAttributeValue("isReasonForChangeEditable")&&e.is(t.nodeModel.getAttributeValue("activity_id"))&&"TRUE"!==t.nodeModel.getAttributeValue("isTransferred")&&"TRUE"!==t.nodeModel.getAttributeValue("isIgnored")||(i=!1)),i}},{dataIndex:"change",text:l.CHG_GOV_Realized_Changes,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,typeRepresentation:"url",width:65,getCellValue:function(e){if(e.nodeModel)return{icon:e.nodeModel.getAttributeValue("activity_icon")}}},{dataIndex:"change_details",text:l.CHG_GOV_Realized_Change_Details,editableFlag:!1,visibleFlag:!0,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0},{dataIndex:"moved_to_ca",text:l.CHG_GOV_Realized_Moved_TO,editableFlag:!1,width:150,visibleFlag:"MOVED"===t,alwaysVisibleFlag:!1,sortableFlag:!1,allowUnsafeHTMLContent:!0},{dataIndex:"reasonForMove",text:l.CHG_GOV_Realized_Reason_For_Move,editableFlag:!1,visibleFlag:"MOVED"===t,alwaysVisibleFlag:!1,sortableFlag:!1}]},getNativeContextualMenu:async function(e,t,i){let n=[];var o=this;let a,r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),l=!1;r.length>1&&(l=!0);let d=[],c=[];if(l){let l={cellInfos:{nodeModel:{}}};r.forEach(function(e){l.cellInfos.nodeModel=e,a=o.fetchReleventIds(l),d.push(a.activityReferenceID),c.push(a.activityInstanceID?a.activityInstanceID:a.activityReferenceID),"false"===a.authoringCommandsAvailable&&(i=!1)});let p=d;return(u={}).instanceID=c,u.objectID=p,u.objectType=e.objectType,n.push(s.getExploreMenu(null,u)),n.push(s.getExploreWithMenu(null,u)),n.push(s.getOpenMenu(null,u)),n.push(s.getOpenWithNativeMenu(null,u)),(await this.getCommonMenu(e,t,i)).forEach(e=>{n.push(e)}),n}{let r=(a=o.fetchReleventIds(t)).activityReferenceID,l=a.activityInstanceID;var u;return(u={}).instanceID=l,u.objectID=r,9!==t.cellInfos.columnID&&(n.push(s.getExploreMenu(null,u)),n.push(s.getExploreWithMenu(null,u)),n.push(s.getOpenMenu(null,u)),n.push(s.getOpenWithNativeMenu(null,u))),(await this.getCommonMenu(e,t,i)).forEach(e=>{n.push(e)}),n}},getDashboardContextualMenu:async function(t,i,n){let o=[],a=!1;if(i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes().length>1&&(a=!0),!a){let a,r=await this.getOpenWithMenu(i);e.is(r)&&o.push(r),(await this.getCommonMenu(t,i,n)).forEach(e=>{o.push(e)});let d=(a=this.fetchReleventIds(i)).activityReferenceID,c=a.previousReferenceID,u={type:"PushItem",title:l.CHG_GOV_Realized_Compare_Previous,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-part-compare"},action:{callback:function(e){var t=[];d&&t.push(d),c&&t.push(c),s.openCompareApp(t)}}};return 9!==i.cellInfos.columnID&&o.push(u),o}return(await this.getCommonMenu(t,i,n)).forEach(e=>{o.push(e)}),o},getOpenWithMenu:async function(e){let t=!1,i=void 0;if(g.getGlobalVariable().is3DSpace&&!window.x3DPlatformServices&&!window.COMPASS_CONFIG){const e=getTopWindow().document.createElement("div");e.id="hiddenDivForCompassInNewWindow",e.style.display="none",getTopWindow().document.body.appendChild(e),window.COMPASS_CONFIG={myAppsBaseUrl:g.getGlobalVariable().baseURL,userId:"",lang:navigator.language,compassTarget:e.id}}if(e.cellInfos.columnID&&9===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.moved_to_ca_details)i={objectId:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.id,objectType:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.type,displayName:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.title,displayType:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.typeNLS};else if(e.cellInfos.columnID&&8===e.cellInfos.columnID&&(e.cellInfos.nodeModel.options.grid.before_ref_details||e.cellInfos.nodeModel.options.grid.before_details))e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?i={objectId:e.cellInfos.nodeModel.options.grid.before_ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(i="Configured Removal"==e.cellInfos.nodeModel.options.grid.change?{objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0]}:{objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0]});else{e.cellInfos.nodeModel.options.grid.isInstanceOperation&&"TRUE"==e.cellInfos.nodeModel.options.grid.isInstanceOperation&&(t=!0),!t&&e.cellInfos.nodeModel.options.grid.where_details&&e.cellInfos.nodeModel.options.grid.where_details.id?i={objectId:e.cellInfos.nodeModel.options.grid.where_details.id,objectType:e.cellInfos.nodeModel.options.grid.where_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"}:e.cellInfos.nodeModel.options.grid.ref_details&&e.cellInfos.nodeModel.options.grid.ref_details.id?i={objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"}:t&&e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(i={objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0],facetName:"RealizedDGV"});var n={facetName:"RealizedDGV",selectedItem:i};s.setSelectedItem(n)}return await s.openWith(i)},fetchReleventIds:function(e){let t=void 0,i=void 0,n=void 0,o=void 0,a=void 0,s=void 0,r=!1,l=void 0;e.cellInfos.columnID&&9===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.moved_to_ca_details?(t=e.cellInfos.nodeModel.options.grid.moved_to_ca_details.id,l=!1):e.cellInfos.columnID&&8===e.cellInfos.columnID&&(e.cellInfos.nodeModel.options.grid.before_ref_details||e.cellInfos.nodeModel.options.grid.before_details)?(e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(t=e.cellInfos.nodeModel.options.grid.before_ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&("Configured Removal"==e.cellInfos.nodeModel.options.grid.change?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):t=e.cellInfos.nodeModel.options.grid.before_details.id),l=!1):(e.cellInfos.nodeModel.options.grid.isInstanceOperation&&"TRUE"==e.cellInfos.nodeModel.options.grid.isInstanceOperation&&(r=!0),r?e.cellInfos.nodeModel.options.grid.after_details&&e.cellInfos.nodeModel.options.grid.after_details.id?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.after_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&(n=e.cellInfos.nodeModel.options.grid.before_details.id)):e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(e.cellInfos.nodeModel.options.grid.ref_details?(t=e.cellInfos.nodeModel.options.grid.ref_details.id,i=e.cellInfos.nodeModel.options.grid.before_details.id):t=e.cellInfos.nodeModel.options.grid.before_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,s=e.cellInfos.nodeModel.options.grid.revision):(t=e.cellInfos.nodeModel.options.grid.where_details.id,a=e.cellInfos.nodeModel.options.grid.displayName,s=e.cellInfos.nodeModel.options.grid.revision,e.cellInfos.nodeModel.options.grid.before_ref_details&&e.cellInfos.nodeModel.options.grid.before_ref_details.id?(n=e.cellInfos.nodeModel.options.grid.before_ref_details.id,o=e.cellInfos.nodeModel.options.grid.before_details.id):e.cellInfos.nodeModel.options.grid.before_details&&e.cellInfos.nodeModel.options.grid.before_details.id&&(n=e.cellInfos.nodeModel.options.grid.before_details.id)));let d={};return d.activityReferenceID=t,d.activityInstanceID=i,d.previousReferenceID=n,d.previousInstanceID=o,d.activityLabel=a,d.activityRev=s,d.isInstanceOperation=r,d.authoringCommandsAvailable=l,d},getCommonMenu:async function(e,t,n){var o=this;let s,u=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),p=!1;u.length>1&&(p=!0);let g=[],m=[];if(p){let e={cellInfos:{nodeModel:{}}};u.forEach(function(t){e.cellInfos.nodeModel=t,s=o.fetchReleventIds(e),g.push(s.activityReferenceID),m.push(s.activityInstanceID?s.activityInstanceID:s.activityReferenceID),"false"===s.authoringCommandsAvailable&&(n=!1)})}else s=o.fetchReleventIds(t);if(p){let t=g;var C=[];if(!0===n){let e={type:"PushItem",title:l.CHG_GOV_Realized_Ignore_Cmd,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-ignore"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Ignore"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:""))}}};C.push(e);let t={type:"PushItem",title:l.CHG_GOV_Realized_Move_Cmd,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},submenu:[{type:"PushItem",title:l.CHG_GOV_Realized_Move_New,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Move>New Change Action"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:"New"})}}},{type:"PushItem",title:l.CHG_GOV_Realized_Move_Existing,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-insert"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Move>Existing Change Action"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:"Existing"})}}}]};C.push(t)}const o={};o.selectedNodeIDs=t,C.push(i.getRelationalExplorerMenu(o));let s={type:"PushItem",title:l.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Download"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),d.download(t)}}},c={type:"PushItem",title:l.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye"},action:{callback:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Preview"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),d.preview(t)}}};await d.getDocuments(t);C.push(s),C.push(c);let u=!1;return e.sourceType&&"LEGACY_3DSPACE"!=e.sourceType&&(u=!0),C.push(a.createPropertyPushItem(m,u)),C}let f=s.activityReferenceID,v=s.activityInstanceID,D=(s.previousReferenceID,s.previousInstanceID,s.activityLabel),b=s.activityRev;s.isInstanceOperation;C=[];if(!0===(n=null!=s.authoringCommandsAvailable?s.authoringCommandsAvailable:n)){let e={type:"PushItem",title:l.CHG_GOV_Realized_Ignore_Cmd,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-ignore"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Ignore"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:""))}}};C.push(e);let t={type:"PushItem",title:l.CHG_GOV_Realized_Move_Cmd,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},submenu:[{type:"PushItem",title:l.CHG_GOV_Realized_Move_New,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-plus"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Move>New Change Action"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:"New"})}}},{type:"PushItem",title:l.CHG_GOV_Realized_Move_Existing,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-insert"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Move>Existing Change Action"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),r.publish("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),{mode:"Existing"})}}}]};C.push(t)}const w={};w.selectedNodeIDs=v&&void 0===f?[v]:[f],C.push(i.getRelationalExplorerMenu(w));t.cellInfos.nodeModel.options.grid.operation&&t.cellInfos.nodeModel.options.grid.operation.trim();let S={type:"PushItem",title:l.CHG_GOV_Change_Impacts,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(e){var i={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Change Impacts"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});let n={};n.objectID=v||f,n.label=D,n.objectRevision=b,n.objectType=t.cellInfos.nodeModel.options.grid.type,n.serviceId="3DSpace",c.launchImpactsView(n)}}};t.cellInfos.columnID&&9===t.cellInfos.columnID&&t.cellInfos.nodeModel.options.grid.moved_to_ca_details||C.push(S);let I={type:"PushItem",title:l.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Download"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),d.download([f])}}},_={type:"PushItem",title:l.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye"},action:{callback:function(e){var t={commandInfo:{type:"Change Action",facet:"Realized Changes",action:"CA>Realized Changes>DGV>RMB>Preview"}};h.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),d.preview([f])}}},y=await d.getDocuments([f]);y&&y[0]&&y[0].dataelements&&"TRUE"===y[0].dataelements.isDocumentType&&(C.push(I),C.push(_));let E=!1;return e.sourceType&&"LEGACY_3DSPACE"!=e.sourceType&&(E=!0),C.push(a.createPropertyPushItem([e.id],E)),C}}}),define("DS/ENOChgGovernanceUX/scripts/view/recents/recentlyOpened/ChgRecentlyOpenedView",["UWA/Class/View","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/model/recents/ChgCORecentsTreeModel","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Core/PointerEvents","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsContextualMenu","DS/CoreEvents/ModelEvents","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/view/recents/util/ChgGovRecentsCustomFields","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";var D=e.extend({init:function(e){console.log("init ChgRecentlyOpenedView"),this._parent(e),this._modelEvents=new d,this.subscribeToModelEvents(),this.render(e)},subscribeToModelEvents:function(e){this._modelEvents.subscribe({event:"recentlyOpenedTreeEmpty"},function(e){D.prototype.recentlyOpenedTreeEmpty()}),this._modelEvents.subscribe({event:"recentlyOpenedTreeNotEmpty"},function(e){D.prototype.recentlyOpenedTreeNotEmpty()})},render:function(e){var o=this;o.recentModel=new n,e.treeDocument=o.recentModel.createTreeDocument(this._modelEvents),D.prototype.ChgCORecentsTreeModel=e.treeDocument,o.recentModel.registerCustomFilter(),o.createRecentlyOpenedView(e);let a=f("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").getRecents();if(null!=a&&""!=a){let f=JSON.parse(a);var s,r,l,d,c=[],u=[],p=[],g=[],h=[],C=[],v=[],b=[],w=[],S=[],I=[],_=[];if(f.forEach(function(e,t){var i=JSON.parse(e);"ChangeOrder"==i.type?(w.push(i),s=i.type):"ChangeRequest"==i.type?(S.push(i),r=i.type):"ChangeAction"==i.type?(I.push(i),l=i.type):"InvestigationRequest"==i.type&&(_.push(i),d=i.type)}),w.length>0){var y=[];w.forEach(function(e,t){y.push(e.id)});var E=y.join(","),O=t.getChangeOrderInfo(E,!0);c.push(O)}if(S.length>0){y=[];S.forEach(function(e,t){y.push(e.id)});E=y.join(",");var G=t.getChangeRequestInfo(E);c.push(G)}if(I.length>0){y=[];I.forEach(function(e,t){y.push(e.id)});E=y.join(",");var N=t.getChangeActionInfo(E);c.push(N)}if(_.length>0){y=[];_.forEach(function(e,t){y.push(e.id)});E=y.join(",");var A=t.getInvestigationRequestInfo(E);c.push(A)}Promise.all(c).then(function(t){if(w.length>0){var a=t[0];if(w.length>a.data.length){!0;for(var c=0;c<a.data.length;c++)u.push(JSON.stringify({id:a.data[c].id,type:s}))}a.data.length?(h=i.processChangeOrderRecentList(a,s),o._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}if(S.length>0){var m=t[1];if(0==w.length&&(m=t[0]),S.length>m.data.length){!0;for(c=0;c<m.data.length;c++)p.push(JSON.stringify({id:m.data[c].id,type:r}))}m.data.length?(C=i.processChangeOrderRecentList(m,r),o._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}if(I.length>0){var f=t[2];if(0!=w.length&&0!=S.length||(f=t[1]),0==w.length&&0==S.length&&(f=t[0]),I.length>f.data.length){!0;for(c=0;c<f.data.length;c++)g.push(JSON.stringify({id:f.data[c].id,type:l}))}f.data.length?(v=i.processChangeOrderRecentList(f,l),o._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):S.length>0&&w.length>0&&0==m.data.length&&0==a.data.length&&o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}if(_.length>0){var D=t[t.length-1];D.data.length?(b=i.processChangeOrderRecentList(D,d),o._modelEvents.publish({event:"recentlyOpenedTreeNotEmpty"})):S.length>0&&w.length>0&&I.length&&0==m.data.length&&0==a.data.length&&0==f.data.length&&o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"})}return(new n).loadRecentChangeOrderData(e.treeDocument,h.concat(C,v,b)),require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(o.ChgCORecentsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:o.ChgCORecentsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,o.ChgCORecentsTreeModel)}),t},function(e){console.log("co/cr Ids Info failure")}).then(function(e){});let D=o.ChgCORecentsTreeModel;m.unsubscribe(`${D.options.id} of ${widget.id}`),m.subscribe(`${D.options.id} of ${widget.id}`,function(e){o.recentModel.filterView(e)})}else o._modelEvents.publish({event:"recentlyOpenedTreeEmpty"});D.prototype.ChgCORecentsTreeModel.getXSO().onAdd(function(t){e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})}),D.prototype.ChgCORecentsTreeModel.getXSO().onRemove(function(t){0==t.getTreeDocument().getSelectedNodes().length?e._applicationChannel.publish({event:"recent-DataGrid-on-unselect-all",data:{model:t.options.grid,context:t,type:t.options.grid.isKindOfType,load:!1},context:t}):e._applicationChannel.publish({event:"load-info-panel-chg-recents",data:{context:t}})})},createRecentlyOpenedView:function(e){var t=this,i={model:e.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],useDragAndDrop:!0,onDragStartCell:function(e,t){C.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}};this.tileView=new o(i);var n=e.target,a=UWA.createElement("div",{id:"recentlyOpenedCOEmptyTileViewDiv",class:"hideViewRecentlyOpenedCO"}),d=UWA.createElement("div",{id:"recentlyOpenedCOPopulatedTileViewDiv",class:"hideViewRecentlyOpenedCO"}),c=UWA.createElement("div",{class:"recentlyOpenedCOEmptyTileViewText"}),g=r.CHG_GOV_Recents_Recently_Opened_Empty_View;c.inject(a),c.innerText=g,this.tileView.inject(d),d.inject(n),a.inject(n);var h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel){var i=document.getElementsByClassName("firstROChildDiv")[0];return l.showRMBMenuOnGrid(e,i,t.removeDeletedNodesUsingIDsAdaptor).then(function(e){return e})}}};this.tileView.onContextualEvent=h,this.tileView.addEventListener(s.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&2==e.multipleHitCount){var i={};let e;i.model=t.nodeModel.options.grid,e="ChangeRequest"==i.model.isKindOfType?u.ROUTE_CR_DETAILS:"ChangeAction"==i.model.isKindOfType?u.ROUTE_CA_DETAILS:"InvestigationRequest"==i.model.isKindOfType?u.ROUTE_IR_DETAILS:u.ROUTE_CO_DETAILS,p.navigate(e,{id:i.model.id,name:i.model.name,title:i.model.title,nodeModel:i}),m.publish("load-dependency"+widget.id,"pid:"+i.model.id)}}},startWithNewCOHandler:function(e,t){console.log("inside startWithNewCOHandler")},removeDeletedNodesUsingIDsAdaptor:function(e){var t=e;e.deletedIDs&&(t=e.deletedIDs),e.source||m.publish("Chg-Gov-Recents-RecentlyOpened-DeletedIds",{source:"ChgRecentlyOpenedView",deletedIDs:t}),D.prototype.removeDeletedNodesUsingIDs(t)},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];D.prototype.ChgCORecentsTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==D.prototype.ChgCORecentsTreeModel.getChildren().length&&D.prototype.recentlyOpenedTreeEmpty()},handleMoveUpdate:function(e){console.log("inside handleMoveUpdate");for(var t=D.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.data.paths,n=0;n<t.length;n++)for(var o=0;o<i.length;o++)if(i[o]==t[n].options.grid.id){var a,s,r,l,d,c,u,p=t[n].options.grid.id;if(s=(a=e.data.attributes[p]).newCollabSpace,r=a.newOrganization,l=a.newOwnerFullName,(d=a.newOwnerId)&&l){c=t[n].options.grid.name+" | "+l;var g={title:t[n].options.grid.title,name:t[n].options.grid.name,severityNLS:t[n].options.grid.severityNLS,ownerFullName:l,maturityNLS:t[n].options.grid.maturityNLS};u=h.getCustomTooltip(g),t[n].options.grid.owner=d,t[n].options.grid.ownerFullName=l,t[n].updateOptions({grid:t[n].options.grid,customTooltip:u,subLabel:c})}r&&(t[n].options.grid.organization=r,t[n].updateOptions({grid:t[n].options.grid})),s&&(t[n].options.grid.collabspace=s,t[n].updateOptions({grid:t[n].options.grid}))}},handlePropertiesUpdate:function(e){console.log("inside handlePropertiesUpdate");for(var t=D.prototype.ChgCORecentsTreeModel.getAllDescendants(),i=e.objectId,n=0;n<t.length;n++){if(t[n].options.grid.id==i){var o=e.Title?e.Title.value:e.Severity?e.Severity.value:e.lebel,a=e.name.value,s=e.description.value,r=e.owner.value,l=e.owner.valueDB,d=e.Severity.valueDB,c=e.Severity.value,u=t[n].options.grid.ecm_change_on_hold,p=a+" | "+r,g={};g.name=a,g.title=o,g.ecm_change_on_hold=u,g.severity=d,g.severityNLS=c,g.owner=l,g.ownerFullName=r,g.maturityNLS=t[n].options.grid.maturityNLS;var m=h.createCustomSeverity(g),C=h.getStatusBarIcons(g),f=h.statusbarIconsTooltips(g),v=h.getCustomTooltip(g);t[n].options.grid.title=o,t[n].options.grid.description=s,t[n].options.grid.ownerFullName=r,t[n].options.grid.owner=l,t[n].options.grid.severity=d,t[n].options.grid.sev=m,t[n].options.grid.severityNLS=c,t[n].updateOptions({label:o,grid:t[n].options.grid,customTooltip:v,statusbarIcons:C,statusbarIconsTooltips:f,subLabel:p})}}},globalSubscribeForRecentlyOpenedView:function(){g.addObserver("ChgRecentlyOpenedView","ENOLC_MOVE_CMD_UPDATE",this.handleMoveUpdate),g.addObserver("ChgRecentlyOpenedView","CO-Properties-Update",this.handlePropertiesUpdate),g.addObserver("ChgRecentlyOpenedView","Chg-Gov-Recents-PendingIndexed-DeletedIds",this.removeDeletedNodesUsingIDsAdaptor),g.addObserver("ChgRecentlyOpenedView","Lifecycle.Modification",this.handleForMaturityUpdate)},recentlyOpenedTreeEmpty:function(){var e=document.getElementById("recentlyOpenedCOEmptyTileViewDiv");e&&e.removeClassName("hideViewRecentlyOpenedCO");var t=document.getElementById("recentlyOpenedCOPopulatedTileViewDiv");t&&t.addClassName("hideViewRecentlyOpenedCO")},recentlyOpenedTreeNotEmpty:function(){var e=document.getElementById("recentlyOpenedCOEmptyTileViewDiv");e&&e.addClassName("hideViewRecentlyOpenedCO");var t=document.getElementById("recentlyOpenedCOPopulatedTileViewDiv");t&&t.removeClassName("hideViewRecentlyOpenedCO")},handleForMaturityUpdate:function(e){if(e){let t=D.prototype.ChgCORecentsTreeModel.getSelectedNodes();v.getHandleForMaturityUpdate(JSON.parse(e),t)}}});return D}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView2",["UWA/Core","UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Controls/Find","DS/Controls/Loader","DS/Utilities/Utils","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Menu/ContextualMenu","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgSlideinForm","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedForm","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y,E){"use strict";return t.extend({init:function(e){this._parent(e),this.options=e,this.proposedDGV=null,this.accessBits=this.options.contextDetails.userAccess,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}}},render:function(){if(this.options.target){let t=this,n=u.getColumns(),r={treeDocument:null,columns:n,allowUnsafeHTMLContent:!1,showModelChangesFlag:!0,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:E.CHG_GOV_DataGrid_PlaceHolder_Fetch_ProposedChange,identifier:"CAProposedChangesDGV",showContextualMenuColumnFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return h.getGlobalVariable().isNative?u.getNativeContextualMenu(e):u.getDashboardContextualMenu(e);e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!0,insertRow:!1})}return t},onDragStartRowHeader:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,p.readyDragContent(e,i)},onDragStartCell:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,p.readyDragContent(e,i)}};r=e.merge(r,this.options),this.proposedDGV=new i(r),this.proposedDGV.cellSelection="none",this.proposedDGV.setToolbar(c.getProposedChangesToolbarDefinition(this.options)),this.proposedDGV.getCustomViewsManager().onCustomViewsSave=function(e,i){g.onCustomViewsSave(e,i,t.options.custom_view_options)},this.proposedDGV.columnDefinitionUpdated=!1,this.proposedDGV.registerReusableCellContent({id:"proposedRevColId",buildContent:function(){return new e.Element("div",{class:"proposedRevCol",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px",width:20,height:20}})}}),this.proposedDGV.registerReusableCellContent({id:"proposedEmptyColId",buildContent:function(){return new e.Element("div",{styles:{"padding-left":"5px",width:20,height:20}})}}),n[3].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.proposedDGV.reuseCellContent("proposedRevColId");i.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.proposedDGV.reuseCellContent("proposedEmptyColId"))};let l={};l.notStartedKey=E.CHG_GOV_Proposed_ProposalStatus_NotStarted,l.startedKey=E.CHG_GOV_Proposed_ProposalStatus_Started,l.partialKey=E.CHG_GOV_Proposed_ProposalStatus_Partial,l.completedKey=E.CHG_GOV_Proposed_ProposalStatus_Complete,l.rejectedKey=E.CHG_GOV_Proposed_ProposalStatus_Rejected;let v={proposedStatus:{stdTemplate:"enumCombo",semantics:{possibleValues:l,valueType:"enumValueToProperty"}}};this.proposedDGV.getTypeRepresentationFactory().registerTypeRepresentations(v),this.proposedDGV.addEventListener("allCellsRendered",function(){t.proposedDGV.buildStatusBar([{type:o.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:E.CHG_GOV_StatusBar_TotalItems+(null==t.proposedDGV.getTreeDocument()?0:t.proposedDGV.getTreeDocument().getAllDescendants().length)}},{type:o.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:E.CHG_GOV_StatusBar_SelectedItems+(null==t.proposedDGV.getTreeDocument()?0:t.proposedDGV.getTreeDocument().getSelectedNodes().length)}}])}),this.proposedDGV.addEventListener(d.POINTERHIT,function(e,i){if(1==e.multipleHitCount){if(i&&3===i.columnID)"proposedRevCol"===e.target.className&&g.launchVersionExplorer({id:"NEW_MIB"==i.nodeModel.options.grid.sourceType?i.nodeModel.options.grid.serviceBasedObjId:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.type,name:i.nodeModel.options.grid.name});else if(i&&2===i.columnID){if(e.target.className.contains("fonticon-flow-branch-list"))if("completedKey"==i.nodeModel.options.grid.proposedStatus)_.error(E.CHG_GOV_Proposed_Revision_Replace_Status);else{var n={id:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.type,proposedOperation:i.nodeModel.options.grid.proposedOperation,action:"replaceByRevision"};I.publish("ECM_GOV_ProposedDGV_LaunchVersionExplorer:"+(widget?widget.id:""),n)}}else if(i&&11===i.columnID)if("proposed_resolution_revision"===e.target.className)g.launchVersionExplorer({id:"NEW_MIB"==i.nodeModel.options.grid.resolution[0].sourceType?i.nodeModel.options.grid.resolution[0].serviceBasedObjId:i.nodeModel.options.grid.resolution[0].id,type:i.nodeModel.options.grid.resolution[0].type,name:i.nodeModel.options.grid.resolution[0].name});else if(e.target.className.contains("proposed_resolution_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};m.buildAndDisplayContextualMenu(e.target,t)}else if("proposed_resolution_multiple"===e.target.className){var o=i.nodeModel.options.grid;I.publish("ECM_GOV_ProposedDGV_DisplayResolutionDGV:"+(widget?widget.id:""),o)}}else if(2==e.multipleHitCount&&(i.nodeModel.select(!0),t.options.applicationChannel.publish({event:"update-property-panel-data",data:{context:i.nodeModel,PhysicalID:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.type}}),i&&5!==i.columnID))if(h.getGlobalVariable().is3DSpace){localRequire("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else t.options.applicationChannel.publish({event:"information-panel-open",data:null})}),this.findWidget=new a({displayMatchCaseToggle:!1,relatedWidget:this.proposedDGV,onFindRequest:this.proposedDGV.setFindStr,onFindPreviousResult:this.proposedDGV.goToPreviousMatchingCell,onFindNextResult:this.proposedDGV.goToNextMatchingCell,onFindClose:this.proposedDGV.onFindClose}),this.mainContainer=e.createElement("div",{id:"proposed-main-container",styles:{width:"100%",height:"100%",display:"inline-block"}}),this.headerDiv=e.createElement("div",{id:"proposed-header-div",styles:{}}),this.headerLabelDiv=e.createElement("div",{id:"proposed-header-label-div"}),this.indexInfoDiv=e.createElement("div",{id:"proposed-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new C({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new f({title:E.CHG_GOV_Proposed_Index_Info,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(this.headerLabelDiv),this.headerLabelDiv.inject(this.headerDiv),this.findViewDiv=e.createElement("div",{id:"proposed-find-view-div"}),this.findWidget.inject(this.findViewDiv),this.findViewDiv.inject(this.headerDiv),this.toolbarDiv=e.createElement("div",{id:"proposed-toolbar-div",styles:{minWidth:"250px"}}),this.proposedDGV.getToolbar().inject(this.toolbarDiv),this.toolbarDiv.inject(this.headerDiv),this.proposedDGVDiv=e.createElement("div",{id:"proposed-dgv-div",styles:{}}),this.proposedDGV.inject(this.proposedDGVDiv),this.mainContainer.addContent(this.headerDiv),this.mainContainer.addContent(this.proposedDGVDiv),this.mainContainer.inject(this.options.target),this.options.custom_view_options.dgvHandle=this.proposedDGV,this.options.custom_view_options.ootb_columns=[...n],this.options.custom_view_options.dgvDiv=this.proposedDGVDiv,this.findWidget.hide(),this.globalSubscribeForProposedGridView(),this.handleAccessBitUpdate(this),this.loader=(new s).inject(this.options.target);let D=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];g.registerCustomEventsOnDGV(D,this.proposedDGV,this.options.custom_view_options)}},globalSubscribeForProposedGridView:function(){y.addObserver("ChgCAProposedChangesView2","CO-AccessBit-Update",this.handleAccessBitUpdate.bind(this))},handleAccessBitUpdate:function(e){e.id==this.options.contextDetails.id&&(this.accessBits=e.accessBits,"false"==e.accessBits.AddProposed?(this.proposedDGV.getToolbar().updateNodeModel("addProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("defineProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!1})):(this.proposedDGV.getToolbar().updateNodeModel("addProposed",{visibleFlag:!0}),this.proposedDGV.getToolbar().updateNodeModel("defineProposed",{visibleFlag:!0}),this.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!0}),this.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!0})),"false"==e.accessBits.DeleteProposed?this.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!1}):this.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!0}))},loadCustomColumns:function(){let e=D.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},registerDGVTreeDocEvents:function(){var e=this;this.proposedDGV.getTreeDocument().getXSO().onAdd(function(t){"true"==e.accessBits.AddProposed&&(e.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!0}),e.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!0})),e.proposedDGV.getToolbar().updateNodeModel("downloadProposed",{visibleFlag:!0}),"true"==e.accessBits.DeleteProposed&&e.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!0}),e.proposedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:E.CHG_GOV_StatusBar_SelectedItems+e.proposedDGV.getTreeDocument().getSelectedNodes().length}}),e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType,isNodeAdded:!0}})}),this.proposedDGV.getTreeDocument().getXSO().onRemove(function(t){e.proposedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:E.CHG_GOV_StatusBar_SelectedItems+t.getTreeDocument().getSelectedNodes().length}}),0==t.getTreeDocument().getSelectedNodes().length?(e.toolbarDiv.setStyles({minWidth:"155px"}),e.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!1}),e.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!1}),e.proposedDGV.getToolbar().updateNodeModel("downloadProposed",{visibleFlag:!1}),e.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!1}),e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType,isNodeAdded:!1}})):e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType}})})},prepareUpdateView:function(){this.proposedDGV.prepareUpdateView()},pushUpdateView:function(){this.proposedDGV.pushUpdateView()},setTreeDocument:function(e){this.proposedDGV.treeDocument=e,this.registerDGVTreeDocEvents()},selectNodesInDGV:function(e){var t;this.proposedDGV.treeDocument.unselectAll();var i=this.proposedDGV.treeDocument.getAllDescendants(),n=i.length;e.forEach(e=>{for(var o,a=e.split("|")[0],s=e.split("|")[1],r=0,l=0;l<n;l++){if(i[l].options.grid.id===s){i[l].select(),t=this.proposedDGV.layout.getCellsFromNodeModel(i[l])[0],r=1;break}i[l].options.grid.id===a&&(o=i[l])}!r&&o&&(o.select(),t=this.proposedDGV.layout.getCellsFromNodeModel(o)[0])}),t&&this.proposedDGV.scrollToCellAt({cellID:t})},toggleFindViewInDGV:function(e){this.proposedDGV.treeDocument.getSelectedNodes().length>0?this.toolbarDiv.setStyles({minWidth:"250px"}):this.toolbarDiv.setStyles({minWidth:"155px"}),!1===this.findWidget.visibleFlag?(this.findWidget.show(),this.findWidget.focus()):!0===this.findWidget.visibleFlag&&this.findWidget.hide()},addProposedDialogHandler:function(e){(e={model:void 0}).caID=this.options.contextDetails.id;var t=new w(e),i=new b;i.buildSlideIn(t),i.showSlideIn()},editProposedDialogHandler:function(e){var t={};t.model=e,t.caID=this.options.contextDetails.id;var i=new w(t),n=new b;n.buildSlideIn(i),n.showSlideIn()},updateDGVForEmptyView:function(){this.proposedDGV.getToolbar().updateNodeModel("findProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("downloadProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!1}),this.proposedDGV.placeholder=E.CHG_GOV_DataGrid_PlaceHolder_No_ProposedChange},updateDGVForNonEmptyView:function(){this.proposedDGV.getToolbar().updateNodeModel("findProposed",{visibleFlag:!0}),this.proposedDGV.getToolbar().updateNodeModel("changeAssessmentProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("editProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("downloadProposed",{visibleFlag:!1}),this.proposedDGV.getToolbar().updateNodeModel("removeProposed",{visibleFlag:!1}),this.proposedDGV.placeholder=E.CHG_GOV_DataGrid_PlaceHolder_Fetch_ProposedChange},updateDGVForIndexInfoView:function(){this.indexInfoDiv.show()},updateTaggerFilter:function(){var e=this;"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(),t._cleanBIFilterProxy(),t.cleanPathTag();var i=new Set;e.proposedDGV.treeDocument.getAllDescendants().forEach(e=>{var t=e.options.grid.id;i.add(t)});var n=[];i.forEach(e=>n.push(e));t._onSetPathTagsForProposedRealized(n,{options:{id:"caProposedChangesDGV"}})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderDataGridView","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderUtil","DS/ENOChgGovernanceUX/scripts/model/ChgCODataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridViewToolbar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/ProgressBar","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/ChgCOTileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderFeaturesUtil","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S){"use strict";var I={loadRealTimeCODataPromise:function(e){return new Promise(function(t,i){n.getTimestamp().then(function(a){var s=o.processTimestampData(a);n.getConfiguredChangeOrderList({indexed:!1,simplifiedJSON:!0,timestamp:s,filter:e}).then(function(e){o.processedCOSummaryList(e,I.extns).then(function(i){t({realTimeData:e,processedCOList:i})})},function(e){i(e)})},function(e){i(e)})})},loadIndexedCODataPromise:function(e){return new Promise(function(t,i){n.getConfiguredChangeOrderList(e).then(function(e){o.processedCOSummaryList(e,I.extns).then(function(i){t({COSummaryList:e,processedCOList:i})},function(e){i(e)})},function(e){i(e)})})},postProcessing:function(){0==this.treeDocument.getChildren().length?this.treeDocument._modelEvents.publish({event:"coSummaryEmpty"}):this.treeDocument._modelEvents.publish({event:"coSummaryNotEmpty"}),this.globalSubscribeCOSummary(),this.coGridView.loadCustomColumns(),b.hideLoader(this.options.target,this.coGridView.loader)},updateTagger:function(){var e=this;"false"==a.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)})},createChangeOrderView:async function(n){n.target.setStyles({position:"relative"}),this._pathChangeOrdersSummary=[g._KEY,g._VIEWS_PREFERENCES,g._LIST_VIEW,g._FILTERVIEW];let a=h.getFilter(this._pathChangeOrdersSummary);var s={};s=UWA.merge(s,n),this.options=s,I.extns=await D.getExtensions("Change Order"),s.columns=t.getColumns(),this.ChgCODataGridModel=new i,this.treeDocument=s.treeDocument=this.ChgCODataGridModel.createTreeDocument(),this.ChgCOlayoutModel=this.treeDocument,this.ChgCODataGridModel.registerCustomFilter();var r=o.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(r),this.coGridView=new e(s),this.coGridView.render(),b.showLoader(s.target,this.coGridView.loader),this.subscribeToModelEvents(this.treeDocument);var l="";"inactive"===a?l="inactiveCO":(l="activeCO",h.updateFilter(this._pathChangeOrdersSummary,"activeCO")),this.updateGrid(l)},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_FetchChgOrder,this.updateTagger()},updateGrid:async function(e){var t=this;if(t.preUpdateProcessing(),"inactiveCO"!=e){var i=await t.loadRealTimeCODataPromise(e);b.fetchMaturityStateCSS(i.processedCOList),t.ChgCODataGridModel.loadChangeOrderData(t.treeDocument,i.processedCOList)}t.params.filter=e,t.loadIndexedCODataPromise(t.params).then(async function(e){b.fetchMaturityStateCSS(e.processedCOList),t.ChgCODataGridModel.loadIndexedChangeOrders(t.treeDocument,e.processedCOList),t.currentPage=parseInt(e.COSummaryList.summary["Current Page"]),t.totalPages=parseInt(e.COSummaryList.summary["Total Pages"]),t.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_NoChgOrder,t.currentPage<t.totalPages?(t.updateTagger(),t.coGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.coGridView.coDatagrid.onInfiniteScroll(function(e){t.getNextPageChangeOrders("DGV")}),t.coGridView.coTilesView.onInfiniteScroll(function(e){t.getNextPageChangeOrders("RTV")})):(t.updateTagger(),t.coGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())})},getNextPageChangeOrders:async function(e){if(this.currentPage<this.totalPages){b.showLoader(this.options.target,this.coGridView.loader),this.params.pageNumber++,this.currentPage++;let t=await this.loadIndexedCODataPromise(this.params);this.ChgCODataGridModel.loadIndexedChangeOrders(this.treeDocument,t.processedCOList),this.updateTagger(),this.coGridView.setListnersOnToolbar(),this.loadingViewPreference(),this.postProcessing(),"DGV"===e?this.coGridView.coDatagrid.infiniteScrollProcessDone():this.coGridView.coTilesView.infiniteScrollProcessDone()}},changeView:function(){t.changeView("GridView")},refreshLayout:function(e){var t=this.ChgCOlayoutModel;(new i).updateNodeIndexed(t,e),this.coGridView.coDatagrid.ensureNodeModelVisible(this.ChgCOlayoutModel.getChildren()[0],!1)},removeDataFromGrid:function(e,t){I.ChgCOlayoutModel.getChildren();for(var i=0;i<e.length;i++){var n=e[i];I.ChgCOlayoutModel.search({shouldStop:function(e){return e.options.grid.id===n&&(I.removingNode(e),!0)}}),0==I.ChgCOlayoutModel.getChildren().length&&I.ChgCOlayoutModel._modelEvents.publish({event:"coSummaryEmpty"})}},removingNode:function(e){this.ChgCOlayoutModel.removeRoot(e)},globalSubscribeCOSummary:function(){p.addObserver("ChgCODataGridLayout","ENOLC_MOVE_CMD_UPDATE",I.handleForCOSummaryTransfer),p.addObserver("ChgCODataGridLayout","CO-Properties-Update",I.handleForUpdatingFromPropertyPanel),p.addObserver("ChgCODataGridLayout","Lifecycle.Modification",I.handleForMaturityUpdate)},handleForUpdatingFromPropertyPanel:function(e){var t=I.ChgCOlayoutModel;t&&w.handlePropertiesOnUpdate(t,e)},handleForCOSummaryTransfer:function(e){var n,o,a=I.ChgCOlayoutModel.getAllDescendants(),s=[];Object.keys(e.data.attributes).forEach(function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,s.push(i.id)});for(var r=0;r<s.length;r++){n=s[r];for(var l=0;l<a.length;l++){if(a[l].options.grid.id==n.id){var d=a[l].options.grid.name;if(n.newOwnerId&&n.newOwnerFullName){var c=n.newOwnerId;a[l].options.grid.owner=c;var u=n.newOwnerFullName;a[l].options.grid.ownerFullName=u}if(n.newOrganization){var p=n.newOrganization;a[l].options.grid.orgnaizationNLS=p}if(n.newCollabSpace){var g=n.newCollabSpace;a[l].options.grid.collabspaceNLS=g}""==n.newOwnerId?(c=a[l].options.grid.owner,u=a[l].options.grid.ownerFullName,o=t.createCustomOwner(c,u)):o=t.createCustomOwner(c,u);var h={};h.name=d,h.title=a[l].options.grid.title,h.severity=a[l].options.grid.severity,h.severityNLS=a[l].options.grid.severityNLS,h.ownerFullName=u,h.maturityNLS=a[l].options.grid.maturityNLS;var m=d+" | "+u,C=i.prototype.createCustomTooltip(h);a[l].updateOptions({grid:{collabspaceNLS:a[l].options.grid.collabspaceNLS,organizationNLS:a[l].options.grid.organizationNLS,owner:a[l].options.grid.owner,ownerFullName:a[l].options.grid.ownerFullName,co_Owner:o},customTooltip:C,subLabel:m})}}}},loadingViewPreference:function(){var e=v("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=c.MOBILE_CUTOFF){var t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(u.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{var i=e.getCASummaryViewDesktop();void 0===i||"GridView"===i?this.changeView():u.changeView()}},filterView:function(e){t.filterView(e.filter),I.updateGrid(e.filter)},subscribeToModelEvents:function(e){let t=this;e._modelEvents.subscribe({event:"coSummaryEmpty"},function(e){u.showEmptyView(),I.coGridView.coDatagrid.placeholder=l.CHG_GOV_DataGrid_PlaceHolder_NoChgOrder}),e._modelEvents.subscribe({event:"coSummaryNotEmpty"},function(e){u.hideEmptyView()}),C.unsubscribe(`${e.options.id}:${widget.id}`),C.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.treeDocument),e._cleanBIFilterProxy();let i={data:{roots:t.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(i,t.treeDocument)})}),C.unsubscribe(`${e.options.id} of ${widget.id}`),C.subscribe(`${e.options.id} of ${widget.id}`,function(e){I.ChgCODataGridModel.filterView(e)}),C.unsubscribe(`${e.options.id} colorize ${widget.id}`),C.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){I.ChgCODataGridModel.enableColorizeView(e)}),C.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),C.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){I.ChgCODataGridModel.disableColorizeView(e)}),C.unsubscribe("updateRouteContent-"+widget.id),C.subscribe("updateRouteContent-"+widget.id,function(e){if("true"==a.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=S.getApprovalStatusValue(e);var t=I.ChgCODataGridModel.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach(e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS,maturityWithBadge:n.maturity_NLS}})})}})},handleForMaturityUpdate:function(e){if(e){let t=I.ChgCOlayoutModel.getSelectedNodes();b.getHandleForMaturityUpdate(JSON.parse(e),t)}}};return I.globalSubscribeCOSummary(),I}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require"],function(e,t,i,n){"use strict";return{changeView:function(e){try{i.getGlobalVariable().is3DSpace&&n(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){let t=e.treeDocument.getAllDescendants();for(var i of(e.treeDocument.prepareUpdate(),t))i.updateOptions({label:i.options.grid.title});e.treeDocument.pushUpdate()})}catch(e){console.log(e)}setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("orchestrationEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemView",["UWA/Core","UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Controls/Find","DS/Controls/Loader","DS/Utilities/Utils","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/Menu/ContextualMenu","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgSlideinForm","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedForm","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgErrors","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y){"use strict";return t.extend({init:function(e){this._parent(e),this.options=e,this.resolutionDGV=null},render:function(){if(this.options.target){let t=this,n={treeDocument:null,columns:u.getColumns(),allowUnsafeHTMLContent:!1,showModelChangesFlag:!0,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:y.CHG_GOV_DataGrid_PlaceHolder_Fetch_Resolution,identifier:"CAResolutionDGV",showContextualMenuColumnFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return h.getGlobalVariable().isNative?u.getNativeContextualMenu(e,t.options.proposedParam):u.getDashboardContextualMenu(e,t.options.proposedParam);e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!0})}return i},onDragStartRowHeader:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,p.readyDragContent(e,i)},onDragStartCell:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,p.readyDragContent(e,i)}};n=e.merge(n,this.options),this.resolutionDGV=new i(n),this.resolutionDGV.cellSelection="none",this.resolutionDGV.columnDefinitionUpdated=!1,this.resolutionDGV.registerReusableCellContent({id:"resolutionRevColId",buildContent:function(){return new e.Element("div",{class:"resolutionRevCol",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px",width:20,height:20}})}}),this.resolutionDGV.registerReusableCellContent({id:"resolutionEmptyColId",buildContent:function(){return new e.Element("div",{styles:{"padding-left":"5px",width:20,height:20}})}}),this.resolutionDGV.columns[3].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.resolutionDGV.reuseCellContent("resolutionRevColId");i.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.resolutionDGV.reuseCellContent("resolutionEmptyColId"))},this.resolutionDGV.addEventListener("allCellsRendered",function(){t.resolutionDGV.buildStatusBar([{type:o.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:y.CHG_GOV_StatusBar_TotalItems+(null==t.resolutionDGV.getTreeDocument()?0:t.resolutionDGV.getTreeDocument().getAllDescendants().length)}},{type:o.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:y.CHG_GOV_StatusBar_SelectedItems+(null==t.resolutionDGV.getTreeDocument()?0:t.resolutionDGV.getTreeDocument().getSelectedNodes().length)}}])}),this.resolutionDGV.addEventListener(d.POINTERHIT,function(e,t){1==e.multipleHitCount&&t&&3===t.columnID&&"resolutionRevCol"===e.target.className&&g.launchVersionExplorer({id:"NEW_MIB"==t.nodeModel.options.grid.sourceType?t.nodeModel.options.grid.serviceBasedObjId:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,name:t.nodeModel.options.grid.name})}),this.mainContainer=e.createElement("div",{id:"resolution-main-container",styles:{width:"100%",height:"100%",display:"inline-block"}}),this.resolutionDGVDiv=e.createElement("div",{id:"resolution-dgv-div",styles:{}}),this.resolutionDGV.inject(this.resolutionDGVDiv),this.mainContainer.addContent(this.resolutionDGVDiv),this.mainContainer.inject(this.options.target),this.loader=(new s).inject(this.options.target),I.unsubscribe("ECM_GOV_ProposedDGV_RemoveResolutionPopup:"+(widget?widget.id:"")),I.subscribe("ECM_GOV_ProposedDGV_RemoveResolutionPopup:"+(widget?widget.id:""),function(e){t.removeResolutionRow(e)})}},removeResolutionRow:function(e){var t=this;e.forEach(function(e){let i=t.resolutionDGV.getTreeDocument().getRoots().find(t=>t.getAttributeValue("id")===e.id);t.resolutionDGV.getTreeDocument().removeRoot(i)}),0==t.resolutionDGV.getTreeDocument().getRoots().length&&t.updateDGVForEmptyView()},registerDGVTreeDocEvents:function(){var e=this;this.resolutionDGV.getTreeDocument().getXSO().onAdd(function(t){e.resolutionDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:y.CHG_GOV_StatusBar_SelectedItems+e.resolutionDGV.getTreeDocument().getSelectedNodes().length}})}),this.resolutionDGV.getTreeDocument().getXSO().onRemove(function(t){e.resolutionDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:y.CHG_GOV_StatusBar_SelectedItems+t.getTreeDocument().getSelectedNodes().length}})})},prepareUpdateView:function(){this.resolutionDGV.prepareUpdateView()},pushUpdateView:function(){this.resolutionDGV.pushUpdateView()},setTreeDocument:function(e){this.resolutionDGV.treeDocument=e,this.registerDGVTreeDocEvents()},updateDGVForEmptyView:function(){this.resolutionDGV.placeholder=y.CHG_GOV_DataGrid_PlaceHolder_No_Resolution},updateDGVForNonEmptyView:function(){this.resolutionDGV.placeholder=y.CHG_GOV_DataGrid_PlaceHolder_Fetch_Resolution},updateDGVForIndexInfoView:function(){this.indexInfoDiv.show()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesController",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView2","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgInfraService","DS/UIKIT/Mask","DS/Windows/Dialog","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAResolutionItemModel","DS/ENOXVersionExplorerController/VersionExplorerController","DS/ENOXVersionExplorerUtils/VersionExplorerEnums","DS/ENOXVersionExplorerUtils/VersionExplorerSettings","DS/ENOChgServices/scripts/services/ChgNativeInitService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S){"use strict";return e.Class.extend({init:function(e){this._parent(e),this.options=e,this.subscribeToPlatformEvents(),this.proposedChangesView=null,this.resolutionItemsView=null,this.accessBits=this.options.contextDetails.userAccess,this.proposedNode},createProposedChangesView:async function(){this.options.target.setStyles({position:"relative"}),this.proposedChangesView=new i(this.options),await this.proposedChangesView.render(),a.makeDroppable(this.options.target,this.dropHandler.bind(this)),this.loadProposedChangesData()},loadProposedChangesData:async function(){var e=this;d.showLoader(this.options.target,this.proposedChangesView.loader),this.proposedChangesModel&&this.proposedChangesModel.resetModel(),this.proposedChangesModel=new n,this.proposedChangesModel.createTreeDocument(),this.proposedChangesModel.registerCustomFilter();let t=await s.getCAProposedChanges(this.options.contextDetails.id).catch(e=>{console.error(e),l.error(S.CHG_GOV_GET_PROPOSED_FAIL),d.hideLoader(this.options.target,this.proposedChangesView.loader)});if(1==t.success&&200==t.statusCode)try{var i;this.proposedChangesView.prepareUpdateView(),t.data&&t.data[0]&&t.data[0].proposed&&t.data[0].proposed[0]&&t.data[0].proposed[0].idsOfNonIndexedData&&(i=t.data[0].proposed[0].idsOfNonIndexedData,t.data[0].proposed.splice(0,1));var a=await r.processCAProposedChangesData(t.data);this.proposedChangesModel.updateTreeDocument(a.proposed,this.accessBits);let n=await s.getStatesAttributes(a.policies);if(d.addCSSMaturityClasses(a.policies,"wux-controls-label",n),this.proposedChangesView.setTreeDocument(this.proposedChangesModel.getTreeDocument()),this.proposedChangesView.pushUpdateView(),d.hideLoader(this.options.target,this.proposedChangesView.loader),i&&i.length>0){var c=new Map,g=i.length;for(let e=0;e<i.length;e+=50){let t;t=g<50?i.slice(e,e+g):i.slice(e,e+50);for(var h,m=[],C=new Map,f=0;f<t.length;f++){var v=t[f];m.push(v.id),C.set(v.id,v)}if(m.length>0){var D=r.commonPredicatedForFedSearch(),b=await r.callFederatedSearch(m,D);b&&b.results&&b.results.length>0&&(h=await r.processCAProposedChangesFedSearch(b,C)),h&&h.proposed&&h.proposed.length>0&&(this.proposedChangesView.prepareUpdateView(),this.proposedChangesModel.updateTreeDocument(h.proposed,this.accessBits),this.proposedChangesView.setTreeDocument(this.proposedChangesModel.getTreeDocument()),this.proposedChangesView.pushUpdateView())}c=new Map([...c,...C]),g-=50}if(c&&c.size>0){e.proposedChangesView.indexInfoDiv.show();var w=await p.recent();if(w&&w.results&&w.results.length>0){var I=r.filterNonIndexedDataNew(w,c);c.size!=I.length&&l.warn(S.CHG_GOV_Not_Accessable_Data);var _=await r.processInformationForRecentProposed(I);if(_&&_.proposed&&_.proposed.length>0){this.proposedChangesView.prepareUpdateView(),this.proposedChangesModel.updateTreeDocument(_.proposed,this.accessBits);let e=await s.getStatesAttributes(_.policies);d.addCSSMaturityClasses(_.policies,"wux-controls-label",e),this.proposedChangesView.setTreeDocument(this.proposedChangesModel.getTreeDocument()),this.proposedChangesView.pushUpdateView()}}}}else e.proposedChangesView.indexInfoDiv.hide();0===this.proposedChangesModel.getTreeDocument().getAllDescendants().length?this.proposedChangesView.updateDGVForEmptyView():this.proposedChangesView.updateDGVForNonEmptyView();var y=r.getDefaultFilter(o.getColumns());if(this.proposedChangesModel.getTreeDocument().setFilterModel(y),"true"==a.deletedOrUnaccessiblePropFound&&this.proposedChangesView.updateDGVForIndexInfoView(),this.proposedChangesView.loadCustomColumns(),this.options.isSelected){this.proposedChangesView.updateTaggerFilter();let e=u.getCurrentModel();e.userAccess=this.accessBits,u.setCurrModel(e),u.setCallbacksForOpenWith("ProposedDGV")}}catch(e){console.error(e),l.error(S.CHG_GOV_ADD_PROPOSED_KO),d.hideLoader(this.options.target,this.proposedChangesView.loader)}else console.error(error),l.error(S.CHG_GOV_GET_PROPOSED_RESPONSE_KO),d.hideLoader(this.options.target,this.proposedChangesView.loader);this.proposedChangesView.proposedDGV.addEventListener("postEdit",function(t,i){7==i.columnID&&e.updateReasonForChange(i),10==i.columnID&&e.updateStatus(i)})},subscribeToPlatformEvents:function(){var i=this;t.unsubscribe("ECM_GOV_ProposedDGV_FIND:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_FIND:"+(widget?widget.id:""),function(e){i.proposedChangesView.toggleFindViewInDGV(e)}),t.unsubscribe("ECM_GOV_ProposedDGV_ADD:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_ADD:"+(widget?widget.id:""),function(e){i.addProposedHandler(e)}),t.unsubscribe("ECM_GOV_ProposedDGV_DEFINE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_DEFINE:"+(widget?widget.id:""),function(e){i.proposedChangesView.addProposedDialogHandler(e)}),t.unsubscribe("ECM_GOV_ProposedDGV_ADD_ASSESSMENT:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_ADD_ASSESSMENT:"+(widget?widget.id:""),function(e){let t=i.proposedChangesModel.getTreeDocument().getSelectedNodes().map(e=>e.options.grid.id);const n=widget.id+"ECM_GOV_ProposedDGV";c.getGlobalVariable().isNative?w.DispatchEventToWin("ChangeAssessment",t):u.launchAppInAppMode(n,t,"ENORIPE_AP")}),t.unsubscribe("ECM_GOV_ProposedDGV_LaunchVersionExplorer:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_LaunchVersionExplorer:"+(widget?widget.id:""),function(e){i.launchRevisionExplorer(e)}),t.unsubscribe("ECM_GOV_ProposedDGV_SearchResolution:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_SearchResolution:"+(widget?widget.id:""),function(e){i.searchResolution(e)}),t.unsubscribe("ECM_GOV_ProposedDGV_SearchResolution_Native:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_SearchResolution_Native:"+(widget?widget.id:""),function(e){let t=e.split("~");for(var n=!1,o=[],a={id:i.proposedNode.id,type:i.proposedNode.type,proposedOperation:i.proposedNode.proposedOperation,updateAction:"CONNECT"},s=0;s<t.length;s++){var r=t[s].split(",");r[0].contains("uuid:")?n=!0:o.push({id:r[0],service:"3dSpace",type:r[4]})}1==n&&l.warn(S.CHG_GOV_OrchestrateCA_Unsupported_Message),a.resolution=o;var d=[a];i.addResolution(d)}),t.unsubscribe("ECM_GOV_ProposedDGV_RemoveResolution:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_RemoveResolution:"+(widget?widget.id:""),function(e){i.removeResolution(e)}),t.unsubscribe("ECM_GOV_ProposedDGV_DisplayResolutionDGV:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_DisplayResolutionDGV:"+(widget?widget.id:""),function(e){i.displayResolutionDGV(e)}),t.unsubscribe("ENORIPE-InApp-"+widget.id+"ECM_GOV_ProposedDGV/onOK"),t.subscribe("ENORIPE-InApp-"+widget.id+"ECM_GOV_ProposedDGV/onOK",function(e){for(var t=[],n=!1,o=0;o<e.length;o++)e[o].id.includes("<uuid:")?n=!0:(e[o].service||(e[o].service="3DSpace"),t.push({id:e[o].id,updateAction:"CONNECT",service:e[o].service,type:e[o].type}));n&&l.error(S.CHG_GOV_Proposed_Add_Not_Supported),t.length&&i.addProposed(t)}),t.unsubscribe("ECM_GOV_Proposed_Edit:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Edit:"+(widget?widget.id:""),function(e){i.editProposed(e)}),t.unsubscribe("ECM_GOV_ProposedDGV_EDIT:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_ProposedDGV_EDIT:"+(widget?widget.id:""),function(e){let t=i.proposedChangesModel.getTreeDocument().getSelectedNodes(),n=[];t.forEach(function(e){var t=e.options.grid;n.push(t)}),i.proposedChangesView.editProposedDialogHandler(n)}),t.unsubscribe("ECM_GOV_Proposed_Download:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Download:"+(widget?widget.id:""),function(e){let t=i.proposedChangesModel.getTreeDocument().getSelectedNodes().map(e=>e.options.grid.serviceBasedObjId);d.download(t)}),t.unsubscribe("ECM_GOV_Proposed_Remove:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Remove:"+(widget?widget.id:""),function(e){i.removeProposed()}),t.unsubscribe("ECM_GOV_Proposed_Add:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Add:"+(widget?widget.id:""),function(e){i.addProposed(e)}),t.unsubscribe("ECM_GOV_Proposed_Add_Native:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Proposed_Add_Native:"+(widget?widget.id:""),function(e){let t=e.split("~");for(var n=!1,o=[],a=0;a<t.length;a++){var s=t[a].split(",");s[0].contains("uuid:")?n=!0:o.push({id:s[0],service:"3dSpace",type:s[4],updateAction:"CONNECT"})}1==n&&l.warn(S.CHG_GOV_OrchestrateCA_Unsupported_Message),i.addProposed(o)}),t.unsubscribe(`caProposedChangesDGV:${widget.id}`),t.subscribe(`caProposedChangesDGV:${widget.id}`,function(){if(i.proposedChangesView.updateTaggerFilter(),Object.keys(i.proposedChangesView.proposedDGV.getTreeDocument().getXSO()._items).length>0){let e=i.proposedChangesView.proposedDGV.getTreeDocument().getXSO()._items;for(let t in e)i.options.applicationChannel.publish({event:"update_object_select",data:{node:e[t],contextID:i.options.contextDetails.id,contextType:i.options.contextDetails.isKindOfType,isNodeAdded:!0}})}else i.options.applicationChannel.publish({event:"update_object_select",data:{node:i.proposedChangesModel.treeDocument._getTrueRoot(),contextID:i.options.contextDetails.id,contextType:i.options.contextDetails.isKindOfType,isNodeAdded:!1}})}),t.unsubscribe(`caProposedChangesDGV of ${widget.id}`),t.subscribe(`caProposedChangesDGV of ${widget.id}`,function(e){i.proposedChangesModel.filterView(e)}),t.unsubscribe("CrossHighlighting:proposed"+(widget?widget.id:"")),t.subscribe("CrossHighlighting:proposed"+(widget?widget.id:""),function(t){if(e.is(t))if(t.indexOf(",")>-1){var n=t.split(",");i.proposedChangesView.selectNodesInDGV(n)}else i.proposedChangesView.selectNodesInDGV([t])})},launchRevisionExplorer:function(t){var i=this,n=t.id,o=t.type,a=t.proposedOperation,s=t.action,r=e.createElement("div",{styles:{height:"100%",width:"100%"}});this.versionExplorer=new v({versionGraphContainer:r,selectionMode:D.SELECTION_MODES.SINGLE_SELECT_ONLY,autoUpdate:!0,showToolbar:!1,displayMode:D.DISPLAY_MODES.SUBWAY_VIEW,widget:widget});var d={};d.displayMode=D.DISPLAY_MODES.SUBWAY_VIEW,b.loadUserSettingsPromise(d).then(function(){i.versionExplorer.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:n,tenantId:c.getGlobalVariable().tenant,type:o,securityContext:c.getGlobalVariable().getSecurityContext().replace("ctx::",""),dataModelType:D.DATA_MODEL_TYPES.MODEL_ER}),i.versionExplorer.subscribeEvent("ENOXVersionExplorerModalOK",function(e){var t=[];if(e&&Array.isArray(e))for(var r=0;r<e.length;r++){var d=e[r];if(d&&d._options&&d._options.data){var c=d._options.data;t.push({id:c.id,service:c.serviceId,type:c.type})}}if(t.length>0){var u={id:n,type:o,proposedOperation:a,updateAction:""};if("addResolution"==s){for(var p=[],g=0;g<t.length;g++)p.push({id:t[g].id,service:t[g].service,type:t[g].type});u.resolution=p;var h=[u];u.updateAction="CONNECT",i.addResolution(h)}else if("replaceByRevision"==s){var m=[];for(g=0;g<t.length;g++)m.push({id:t[g].id,service:t[g].service,type:t[g].type});u.revision=m;h=[u];u.updateAction="REVISE",i.replaceByRevision(h)}}else l.warn(S.CHG_GOV_Proposed_Resolution_No_Object_Selected)}),i.versionExplorer.subscribeEvent("ENOXVersionExplorerModalCancel",function(){})}),this.versionExplorer.showDialog({clientX:0,clientY:0},widget.body,!0)},searchResolution:function(e){if(c.getGlobalVariable().isNative){this.proposedNode=e;w.DispatchEventToWin("Add_Resolution","AddResolutionItem")}else{let n={condition:"addResolutionItem",extendedQuery:""};const o=u.activateSearch();c.getGlobalVariable().is3DSpace&&o.socket.subscribeServer("SearchComServer",getTopWindow());var t=c.getGlobalVariable().proposedSearchType,i=!1;"false"==c.getGlobalVariable().CHG_EnableNonChangeGovernedToCA?i=!0:t=!1,u.search(S.CHG_GOV_Proposed_AddResolution,t,this.OnSearchResolutionComplete.bind(this,e),"resolutionItem",o,void 0,void 0,n,void 0,"",i)}},OnSearchResolutionComplete:function(e,t){for(var i={id:e.id,type:e.type,proposedOperation:e.proposedOperation,updateAction:"CONNECT"},n=[],o=0;o<t.length;o++)n.push({id:t[o][8]?t[o][8]:t[o][0],service:t[o][7]&&t[o][7].includes(":")?t[o][7].split(":")[0]:t[o][7],type:t[o][2]});i.resolution=n;var a=[i];this.addResolution(a)},displayResolutionDGV:function(t){var i=this,n=new f;n.createTreeDocument();try{var o=t.resolution;r.getNLSForProcessedList("CAProposedChange",o).then(function(){var a=new e.Element("div",{styles:{height:"100%"}}),s=(new h({title:S.CHG_GOV_Proposed_Resolution,content:a,height:360,width:550,resizableFlag:!0,modalFlag:!1,identifier:"WebUX_PANEL_ECM_ITEMS"}),{target:a,proposedParam:{id:t.id,type:t.type,proposedOperation:t.proposedOperation,removeProposedAccess:t.removeProposedAccess}}),l=new m(s);l.render(),l.prepareUpdateView(),n.updateTreeDocument(o),l.setTreeDocument(n.getTreeDocument()),0===n.getTreeDocument().getAllDescendants().length?l.updateDGVForEmptyView():l.updateDGVForNonEmptyView();var c=r.getDefaultFilter(C.getColumns());n.getTreeDocument().setFilterModel(c),l.pushUpdateView(),d.hideLoader(i.options.target,l.loader)},function(){resolve(o)})}catch(e){console.error(e),l.error(S.CHG_GOV_GET_RESOLUTION_FAIL),d.hideLoader(this.options.target,resolutionItemView.loader)}},removeResolution:async function(e){var i=this.options.contextDetails.id,n=document.getElementById("caProposedChange");"undefined"!=n&&null!=n&&g.mask(n);var o,a=await s.removeResolution(i,e);t.publish("ECM_GOV_ProposedDGV_RemoveResolutionPopup:"+(widget?widget.id:""),e[0].resolution);var l=[],d=this.proposedChangesModel.getProposedStatus(a.data[0]);if(a.data[0].resolution&&a.data[0].resolution.length>0&&(a.data[0].resolution&&a.data[0].resolution[0]&&a.data[0].resolution[0].idsOfNonIndexedData&&(o=a.data[0].resolution[0].idsOfNonIndexedData,a.data[0].resolution.splice(0,1)),a.data[0].resolution.length>0&&a.data[0].resolution.forEach(function(e){var t=r.getProposedNodeData(e);l.push(t)})),o&&o.length>0){var c=new Map,u=o.length;for(let e=0;e<u;e+=50){let t;t=u<50?o.slice(e,e+u):o.slice(e,e+50);for(var h,m=[],C=new Map,f=0;f<t.length;f++){var v=t[f];m.push(v.id),C.set(v.id,v)}if(m.length>0){var D=r.commonPredicatedForFedSearch(),b=await r.callFederatedSearch(m,D);b&&b.results&&b.results.length>0&&(h=r.processCAProposedChangeResolutionFedSearch(b,C)),h&&h.length>0&&(l=l.concat(h))}c=new Map([...c,...C]),u-=50}if(c&&c.size>0){var w=await p.recent();if(w&&w.results&&w.results.length>0){var S=r.filterNonIndexedDataNew(w,c);c.size!=S.length&&console.log("Some data for resolution is not accessible");var I=r.processInformationForRecentResolution(S);I&&I.length>0&&(l=l.concat(I))}}}l&&this.updateResolutionInfo(l,d,e[0].id),g.unmask(n)},addResolution:async function(e){var t=this.options.contextDetails.id,i=document.getElementById("caProposedChange");"undefined"!=i&&null!=i&&g.mask(i);var n,o=await s.addResolution(t,e).catch(e=>{g.unmask(i)}),a=[],l=this.proposedChangesModel.getProposedStatus(o.data[0]);if(o.data[0].resolution&&o.data[0].resolution.length>0&&(o.data[0].resolution&&o.data[0].resolution[0]&&o.data[0].resolution[0].idsOfNonIndexedData&&(n=o.data[0].resolution[0].idsOfNonIndexedData,o.data[0].resolution.splice(0,1)),o.data[0].resolution.length>0&&o.data[0].resolution.forEach(function(e){var t=r.getProposedNodeData(e);a.push(t)})),n&&n.length>0){var d=new Map,c=n.length;for(let e=0;e<c;e+=50){let t;t=c<50?n.slice(e,e+c):n.slice(e,e+50);for(var u,h=[],m=new Map,C=0;C<t.length;C++){var f=t[C];h.push(f.id),m.set(f.id,f)}if(h.length>0){var v=r.commonPredicatedForFedSearch(),D=await r.callFederatedSearch(h,v);D&&D.results&&D.results.length>0&&(u=r.processCAProposedChangeResolutionFedSearch(D,m)),u&&u.length>0&&(a=a.concat(u))}d=new Map([...d,...m]),c-=50}if(d&&d.size>0){var b=await p.recent();if(b&&b.results&&b.results.length>0){var w=r.filterNonIndexedDataNew(b,d);d.size!=w.length&&console.log("Some data for resolution is not accessible");var S=r.processInformationForRecentResolution(w);S&&S.length>0&&(a=a.concat(S))}}}a&&a.length>0&&this.updateResolutionInfo(a,l,e[0].id),g.unmask(i)},updateResolutionInfo:function(e,t,i){let n=this.proposedChangesModel.getTreeDocument().getRoots().find(e=>e.getAttributeValue("id")===i);n.setAttribute("resolution",e),n.setAttribute("proposedStatus",t);var o={resolution:e},a=this.proposedChangesModel.getResolvedByDetails(o);n.setAttribute("resolvedBy",a)},replaceByRevision:function(e){var t=this,i=this.options.contextDetails.id,n=document.getElementById("caProposedChange");"undefined"!=n&&null!=n&&g.mask(n),s.replaceProposedByRevision(i,e).then(function(i){t.proposedChangesModel.getTreeDocument().unselectAll();let o=t.proposedChangesModel.getTreeDocument().getRoots().find(t=>t.getAttributeValue("id")===e[0].id);t.proposedChangesModel.getTreeDocument().removeRoot(o),t.addProposedNode(i),g.unmask(n)},function(e){g.unmask(n)})},addProposedHandler:function(e){if(c.getGlobalVariable().isNative){w.DispatchEventToWin("Add_Proposed","AddProposedChange")}else{let e={condition:"addExistingProposed",extendedQuery:""};const n=u.activateSearch();c.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow());var t=c.getGlobalVariable().proposedSearchType,i=!1;"false"==c.getGlobalVariable().CHG_EnableNonChangeGovernedToCA?i=!0:t=!1,u.search(S.CHG_GOV_Proposed_Add,t,this.OnSearchComplete.bind(this),"proposedChange",n,void 0,void 0,e,void 0,"",i)}},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2]});t.length&&this.addProposed(t)},dropHandler:function(e){if(e&&e.length>0){var t=p.parseObjectInformation(e);t.length>0&&this.addProposed(t)}else l.error(S.CHG_GOV_Common_Drop_Error)},editProposed:function(e){var t=this,i=this.options.contextDetails.id,n=document.getElementById("caProposedChange");"undefined"!=n&&null!=n&&g.mask(n),s.editProposed(i,e).then(function(e){t.editProposedNode(e)},function(e){g.unmask(n)})},editProposedNode:function(e){var t=this,i=document.getElementById("caProposedChange");e.data.forEach(function(e){let i=t.proposedChangesModel.getTreeDocument().getRoots().find(t=>t.getAttributeValue("id")===e.id);var n=t.proposedChangesModel.getChangeDetails(e),o=e.proposedOperation,a=e.computedOperation,s=e.targetState,r=e.computedActivityWhy,l=t.proposedChangesModel.getChange(e),d=t.proposedChangesModel.getProposedActivityIconName(e),c=e.proposedWhy,u=t.proposedChangesModel.getProposedStatus(e);i.prepareUpdate(),i.setAttribute("change_details",n),i.setAttribute("proposedOperation",o),i.setAttribute("computedOperation",a),i.setAttribute("targetState",s),i.setAttribute("computedActivityWhy",r),i.setAttribute("change",l),i.setAttribute("activityIcon",d),i.setAttribute("reasonForChange",c),i.setAttribute("proposedStatus",u),i.pushUpdate()}),g.unmask(i)},addProposed:function(e){var t=this,i=this.options.contextDetails.id,n=document.getElementById("caProposedChange");"undefined"!=n&&null!=n&&g.mask(n),s.addProposed(i,e).then(function(e){t.addProposedNode(e)},function(e){g.unmask(n)})},addProposedNode:async function(e){var t,i=this,n=document.getElementById("caProposedChange");if(e.data[0]&&e.data[0].idsOfNonIndexedData&&(t=e.data[0].idsOfNonIndexedData,e.data.splice(0,1)),t&&t.length>0){var o=new Map,a=t.length;for(let e=0;e<t.length;e+=50){let n;n=a<50?t.slice(e,e+a):t.slice(e,e+50);for(var c,u=[],h=new Map,m=0;m<n.length;m++){var C=n[m];u.push(C.id),h.set(C.id,C)}if(u.length>0){var f=r.commonPredicatedForFedSearch(),v=await r.callFederatedSearch(u,f);v&&v.results&&v.results.length>0&&(c=await r.processCAProposedChangesFedSearch(v,h)),c&&c.proposed&&c.proposed.length>0&&(i.proposedChangesView.prepareUpdateView(),i.proposedChangesModel.updateTreeDocument(c.proposed,i.accessBits),i.proposedChangesView.setTreeDocument(i.proposedChangesModel.getTreeDocument()),i.proposedChangesView.pushUpdateView(),i.proposedChangesModel.getTreeDocument().getAllDescendants().length>0&&i.proposedChangesView.updateDGVForNonEmptyView())}o=new Map([...o,...h]),a-=50}if(o&&o.size>0){i.proposedChangesView.indexInfoDiv.show();var D=await p.recent();if(D&&D.results&&D.results.length>0){var b=r.filterNonIndexedDataNew(D,o);o.size!=b.length&&l.warn(S.CHG_GOV_Not_Accessable_Data);var w=await r.processInformationForRecentProposed(b);if(w&&w.proposed&&w.proposed.length>0){i.proposedChangesView.prepareUpdateView(),i.proposedChangesModel.updateTreeDocument(w.proposed,i.accessBits);let e=await s.getStatesAttributes(w.policies);d.addCSSMaturityClasses(w.policies,"wux-controls-label",e),i.proposedChangesView.setTreeDocument(i.proposedChangesModel.getTreeDocument()),i.proposedChangesView.pushUpdateView(),i.proposedChangesModel.getTreeDocument().getAllDescendants().length>0&&i.proposedChangesView.updateDGVForNonEmptyView()}}}}e.data&&e.data.length>0?((C=[{proposed:""}])[0].proposed=e.data,r.processCAProposedChangesData(C).then(function(e){i.proposedChangesModel.updateTreeDocument(e.proposed,i.accessBits),i.proposedChangesView.setTreeDocument(i.proposedChangesModel.getTreeDocument()),i.proposedChangesView.pushUpdateView(),i.proposedChangesModel.getTreeDocument().getAllDescendants().length>0&&i.proposedChangesView.updateDGVForNonEmptyView(),g.unmask(n)})):g.unmask(n)},removeProposed:function(){var e=this,t=[...this.proposedChangesModel.getTreeDocument().getSelectedNodes()];if(t.length){let a=document.getElementById("caProposedChange");a&&!g.isMasked(a)&&g.mask(a);for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,operationType:t[n].options.grid.proposedOperation,updateAction:"DISCONNECT"});var o=this.options.contextDetails.id;s.removeProposedChange(o,i).then(function([i,n]){if(e.proposedChangesModel.getTreeDocument().unselectAll(),null!=n)for(let e=0;e<t.length;e++){let i=!1;for(let o=0;o<n.length;o++)if(t[e].options.grid.id==n[o]){t.splice(e,1),i=!0;break}1==i&&e--}for(var o=0;o<t.length;o++)e.proposedChangesModel.getTreeDocument().removeRoot(t[o]);if(c.getGlobalVariable().is3DSpace){let e=document.getElementById("caProposedChangeFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("caProposedChange");e&&g.isMasked(e)&&g.unmask(e)}0==e.proposedChangesModel.getTreeDocument().getChildren().length&&e.proposedChangesView.updateDGVForEmptyView(),null!=n&&0!=n.length||l.success(S.CHG_GOV_Proposed_Remove_Success)},function(t){if(e.proposedChangesModel.getTreeDocument().unselectAll(),c.getGlobalVariable().is3DSpace){let e=document.getElementById("caProposedChangeFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("caProposedChange");e&&g.isMasked(e)&&g.unmask(e)}})}else l.error(S.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},updateReasonForChange:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,type:e.nodeModel.options.grid.type,serviceName:e.nodeModel.options.grid.serviceName,proposedOperation:e.nodeModel.options.grid.proposedOperation,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),s.updateProposedChangeReasonForChange(i,this.options.contextDetails.id).then(e=>{console.log("updated on backend")})}},updateStatus:function(e){var t=this;if(e.nodeModel){let i="";"startedKey"==e.nodeModel.options.grid.proposedStatus?i="Started":"notStartedKey"==e.nodeModel.options.grid.proposedStatus?i="Not Started":"partialKey"==e.nodeModel.options.grid.proposedStatus?i="Partial":"completedKey"==e.nodeModel.options.grid.proposedStatus?i="Complete":"rejectedKey"==e.nodeModel.options.grid.proposedStatus&&(i="Rejected");let n={id:e.nodeModel.options.grid.id,type:e.nodeModel.options.grid.type,serviceName:e.nodeModel.options.grid.serviceName,proposedOperation:e.nodeModel.options.grid.proposedOperation,proposedStatus:i},o=[];o.push(n),s.updateProposedChangeStatus(o,this.options.contextDetails.id).then(function(e){if(e&&e.data&&Array.isArray(e.data)){var i="";e.data.forEach(function(e){if(e.error&&""!=e.error){let o=t.proposedChangesModel.getTreeDocument().getRoots().find(t=>t.getAttributeValue("id")===e.id);o.prepareUpdate();var n=t.proposedChangesModel.getProposedStatus(e);o.setAttribute("proposedStatus",n),o.pushUpdate(),i=e.error+"\n"}}),""!=i&&(i=i.slice(0,-2),l.error(i))}})}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView2",["UWA/Core","UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/CollectionView/CollectionViewStatusBar","DS/Menu/ContextualMenu","DS/Controls/Find","DS/Controls/Label","DS/Controls/TooltipModel","DS/Controls/Loader","DS/Utilities/Utils","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealiedChangesToolbar","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I){"use strict";return t.extend({init:function(e){this._parent(e),this.options=e,this.realizedDGV=null,this.realizedTilesView=null,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:w.getGlobalVariable().get3DSpaceURL(),securityContext:w.getGlobalVariable().getSecurityContext(),isNative:w.getGlobalVariable().isNative}}},render:function(){if(this.options.target){let t=this,n=C.getColumns(this.options.filter),c={treeDocument:null,columns:n,allowUnsafeHTMLContent:!1,showModelChangesFlag:!0,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:I.CHG_GOV_DataGrid_PlaceHolder_Fetch_RealizedChange,identifier:this.options.dgvid,useWidgetPreferencesFlag:!0,showContextualMenuColumnFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1){let i=null;return i=e.cellInfos.columnID&&9===e.cellInfos.columnID&&e.cellInfos.nodeModel.options.grid.moved_to_ca_details?{id:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.id,objectId:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.id,objectType:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.type,displayName:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.title,displayType:e.cellInfos.nodeModel.options.grid.moved_to_ca_details.typeNLS}:e.cellInfos.columnID&&8===e.cellInfos.columnID?e.cellInfos.nodeModel.options.grid.before_ref_details?{id:e.cellInfos.nodeModel.options.grid.before_details.id,objectId:e.cellInfos.nodeModel.options.grid.before_ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0],displayName:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:identifier"][0],displayType:e.cellInfos.nodeModel.options.grid.before_ref_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.before_details?{id:e.cellInfos.nodeModel.options.grid.before_details.id,objectId:e.cellInfos.nodeModel.options.grid.before_details.id,objectType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0],displayName:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:identifier"][0],displayType:e.cellInfos.nodeModel.options.grid.before_details.dataelements["ds6w:type"][0]}:e.cellInfos.nodeModel.options.grid.ref_details?{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.type,displayName:e.cellInfos.nodeModel.options.grid.ref_details.name,displayType:e.cellInfos.nodeModel.options.grid.ref_details.typeNLS}:{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.typeNLS}:e.cellInfos.nodeModel.options.grid.ref_details?{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.ref_details.id,objectType:e.cellInfos.nodeModel.options.grid.ref_details.type,displayName:e.cellInfos.nodeModel.options.grid.ref_details.name,displayType:e.cellInfos.nodeModel.options.grid.ref_details.typeNLS}:{id:e.cellInfos.nodeModel.options.grid.id,objectId:e.cellInfos.nodeModel.options.grid.id,objectType:e.cellInfos.nodeModel.options.grid.type,displayName:e.cellInfos.nodeModel.options.grid.name,displayType:e.cellInfos.nodeModel.options.grid.typeNLS},w.getGlobalVariable().isNative?C.getNativeContextualMenu(i,e,t.authoringCommandsAvailable):C.getDashboardContextualMenu(i,e,t.authoringCommandsAvailable)}e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!1,columnsManagement:!1,sizeColumnToFit:!0,insertRow:!1})}return i},onDragStartRowHeader:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,D.readyDragContent(e,i)},onDragStartCell:function(e,i){i.contextChangeType=t.options.contextDetails.isKindOfType,i.contextChangeId=t.options.contextDetails.id,i.caContextData=t.options.contextDetails.contextIds,D.readyDragContent(e,i)},getCellTooltip:function(e){if(e.nodeModel){var i=e.nodeModel.getAttributeValue("operation"),n="";if(8!==e.columnID||"DOCUMENT_UPDATE"!=i&&"DOCUMENT_CREATE_UPDATE"!=i)return 7===e.columnID?{shortHelp:e.nodeModel.getAttributeValue("change")}:t.realizedDGV.getCellDefaultTooltip(e);var o=e.nodeModel.getAttributeValue("sub_operations");for(let e=0;e<o.length;e++){let t=o[e];if(t.indexOf("#")>-1){let e=t.split("#");n=n+I["CHG_GOV_Realized_Activity_"+e[0]+"_Suffix"]+": "+e[1].replaceAll("<?>"," ")+"\n"}else n=n+I["CHG_GOV_Realized_Activity_"+t]+"\n"}return{shortHelp:n}}}};c=e.merge(c,this.options),this.realizedDGV=new i(c),this.realizedDGV.setToolbar(m.getRealizedChangesToolbarDefinition(this.options)),this.realizedDGV.getCustomViewsManager().onCustomViewsSave=function(e,i){f.onCustomViewsSave(e,i,t.options.custom_view_options)},this.realizedDGV.columnDefinitionUpdated=!1,this.realizedDGV.registerReusableCellContent({id:"realizedRevColId",buildContent:function(){return new e.createElement("div",{class:"realizedRevCol",styles:{color:"#368ec4","text-decoration-style":"solid",cursor:"pointer","padding-left":"5px",width:20,height:20}})}}),this.realizedDGV.registerReusableCellContent({id:"realizedEmptyColId",buildContent:function(){return new e.createElement("div",{class:"realizedEmptyCol",styles:{"padding-left":"5px",width:20,height:20}})}}),n[4].onCellRequest=function(e){if(e.nodeModel.getAttributeValue("revision")&&""!==e.nodeModel.getAttributeValue("revision")){var i=t.realizedDGV.reuseCellContent("realizedRevColId");i.setContent(e.nodeModel.getAttributeValue("revision")),e.cellView.setReusableContent(i)}else e.cellView.setReusableContent(t.realizedDGV.reuseCellContent("realizedEmptyColId"))},this.findWidget=new s({displayMatchCaseToggle:!1,relatedWidget:this.realizedDGV,onFindRequest:this.realizedDGV.setFindStr,onFindPreviousResult:this.realizedDGV.goToPreviousMatchingCell,onFindNextResult:this.realizedDGV.goToNextMatchingCell,onFindClose:this.realizedDGV.onFindClose}),this.mainContainer=e.createElement("div",{id:"realized-main-container",styles:{width:"100%",height:"100%",display:"inline-block"}}),this.headerDiv=e.createElement("div",{id:"realized-header-div",styles:{}}),this.headerLabelDiv=e.createElement("div",{id:"realized-header-label-div"}),this.labelDiv=e.createElement("div",{id:"realized-label-div",text:I.CHG_GOV_Realized_Tracked_MF+" (0) "}),this.labelDiv.tooltipInfos=new l({title:I.CHG_GOV_Realized_Tracked+" (0) ",position:"left"}),this.indexInfoDiv=e.createElement("div",{id:"realized-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new r({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new l({title:I.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.labelDiv.inject(this.headerLabelDiv),this.indexInfoDiv.inject(this.headerLabelDiv),this.headerLabelDiv.inject(this.headerDiv),this.findViewDiv=e.createElement("div",{id:"realized-find-view-div"}),this.findWidget.inject(this.findViewDiv),this.findViewDiv.inject(this.headerDiv),this.toolbarDiv=e.createElement("div",{id:"realized-toolbar-div",styles:{minWidth:"250px"}}),this.realizedDGV.getToolbar().inject(this.toolbarDiv),this.toolbarDiv.inject(this.headerDiv),this.realizedDGVDiv=e.createElement("div",{id:"realized-dgv-div",styles:{width:"100%",height:"calc( 100% - 32px )",position:"relative"}}),this.realizedDGV.inject(this.realizedDGVDiv),this.mainContainer.addContent(this.headerDiv),this.mainContainer.addContent(this.realizedDGVDiv),this.mainContainer.inject(this.options.target),this.options.custom_view_options.dgvHandle=this.realizedDGV,this.options.custom_view_options.ootb_columns=[...n],this.options.custom_view_options.dgvDiv=this.mainContainer,this.findWidget.hide(),this.realizedDGV.addEventListener("allCellsRendered",function(){t.realizedDGV.buildStatusBar([{type:o.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:I.CHG_GOV_StatusBar_TotalItems+(null==t.realizedDGV.getTreeDocument()?0:t.realizedDGV.getTreeDocument().getAllDescendants().length)}},{type:o.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:I.CHG_GOV_StatusBar_SelectedItems+(null==t.realizedDGV.getTreeDocument()?0:t.realizedDGV.getTreeDocument().getSelectedNodes().length)}}])}),this.realizedDGV.addEventListener(p.POINTERHIT,function(e,i){if(1==e.multipleHitCount)if(i&&4===i.columnID)"realizedRevCol"===e.target.className&&f.launchVersionExplorer({id:"TRUE"===i.nodeModel.options.grid.isInstanceOperation?i.nodeModel.options.grid.ref_details.id:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.type,name:i.nodeModel.options.grid.name});else if(i&&8===i.columnID){if("realized_op_previous_obj_revision"===e.target.className)f.launchVersionExplorer({id:e.target.parentElement.getAttribute("id"),type:e.target.parentElement.getAttribute("type"),name:e.target.parentElement.getAttribute("name")});else if(e.target.className.contains("realized_op_previous_obj_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};a.buildAndDisplayContextualMenu(e.target,t)}}else i&&9===i.columnID&&"realized_op_moved_to_ca_label"===e.target.className&&g.publish("launch_change_action"+(widget?widget.id:""),{id:i.nodeModel.options.grid.moved_to_ca_details.id});else if(2==e.multipleHitCount&&(i.nodeModel.select(!0),t.options.applicationChannel.publish({event:"update-property-panel-data",data:{context:i.nodeModel,PhysicalID:i.nodeModel.options.grid.ref_details?i.nodeModel.options.grid.ref_details.id:i.nodeModel.options.grid.id,type:i.nodeModel.options.grid.ref_details?i.nodeModel.options.grid.ref_details.dataelements["ds6w:type"][0]:i.nodeModel.options.grid.type}}),i&&6!==i.columnID))if(w.getGlobalVariable().is3DSpace){S("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else t.options.applicationChannel.publish({event:"information-panel-open",data:null})}),this.loader=(new d).inject(this.options.target);let u=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];f.registerCustomEventsOnDGV(u,this.realizedDGV,this.options.custom_view_options)}},loadCustomColumns:function(){let e=b.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},registerDGVTreeDocEvents:function(){var e=this;this.realizedDGV.getTreeDocument().getXSO().onAdd(function(t){e.realizedDGV.getToolbar().updateNodeModel("cmd_2_download",{visibleFlag:!0}),!0===e.authoringCommandsAvailable&&e.options.access.RealizedReject&&"true"==e.options.access.RealizedReject?e.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!0}):e.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!1}),!0===e.authoringCommandsAvailable&&e.options.access.MoveRealizedChange&&"true"==e.options.access.MoveRealizedChange?e.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!0}):e.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!1}),e.realizedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:I.CHG_GOV_StatusBar_SelectedItems+e.realizedDGV.getTreeDocument().getSelectedNodes().length}}),e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType,isNodeAdded:!0}})}),this.realizedDGV.getTreeDocument().getXSO().onRemove(function(t){e.realizedDGV.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:I.CHG_GOV_StatusBar_SelectedItems+t.getTreeDocument().getSelectedNodes().length}}),0==t.getTreeDocument().getSelectedNodes().length?(1==this.authoringCommandsAvailable&&this.realizedDGV.treeDocument.getSelectedNodes().length>0?e.toolbarDiv.setStyles({minWidth:"250px"}):e.toolbarDiv.setStyles({minWidth:"155px"}),e.realizedDGV.getToolbar().updateNodeModel("cmd_2_download",{visibleFlag:!1}),e.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!1}),e.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!1}),e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType,isNodeAdded:!1}})):e.options.applicationChannel.publish({event:"update_object_select",data:{node:t,contextID:e.options.contextDetails.id,contextType:e.options.contextDetails.isKindOfType}})})},prepareUpdateView:function(){this.realizedDGV.prepareUpdateView()},pushUpdateView:function(){this.realizedDGV.pushUpdateView()},setTreeDocument:function(e){this.realizedDGV.treeDocument&&this.realizedDGV.treeDocument.empty(),this.realizedDGV.treeDocument=e,this.registerDGVTreeDocEvents()},selectNodesInDGV:function(e){var t;this.realizedDGV.treeDocument.unselectAll();var i=this.realizedDGV.treeDocument.getAllDescendants(),n=i.length;e.forEach(e=>{for(var o,a=e.split("|")[0],s=e.split("|")[1],r=0,l=0;l<n;l++){if(i[l].options.grid.id===a){i[l].select(),t=this.realizedDGV.layout.getCellsFromNodeModel(i[l])[0],r=1;break}i[l].options.grid.id===s&&(o=i[l])}!r&&o&&(o.select(),t=this.realizedDGV.layout.getCellsFromNodeModel(o)[0])}),t&&this.realizedDGV.scrollToCellAt({cellID:t})},expandCollapseNodesInDGV:function(e){"EXPAND"===e?this.realizedDGV.treeDocument.expandAll():"COLLAPSE"===e&&this.realizedDGV.treeDocument.collapseAll()},toggleFindViewInDGV:function(e){1==this.authoringCommandsAvailable&&this.realizedDGV.treeDocument.getSelectedNodes().length>0?this.toolbarDiv.setStyles({minWidth:"250px"}):this.toolbarDiv.setStyles({minWidth:"155px"}),!1===this.findWidget.visibleFlag?(this.findWidget.show(),this.findWidget.focus()):!0===this.findWidget.visibleFlag&&this.findWidget.hide()},updateDGVForEmptyView:function(e,t){this.realizedDGV.getToolbar().updateNodeModel("cmd_5_find",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("cmd_2_download",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("expand_collapse_menu",{visibleFlag:!1}),this.realizedDGV.columns[9].visibleFlag=!1,this.realizedDGV.columns[10].visibleFlag=!1,this.realizedDGV.placeholder=I.CHG_GOV_DataGrid_PlaceHolder_No_RealizedChange,"TRACKED"===e?(this.labelDiv.setText(I.CHG_GOV_Realized_Tracked_MF+" ("+t+") "),this.labelDiv.tooltipInfos.title=I.CHG_GOV_Realized_Tracked+" ("+t+") "):"MOVED"===e?(this.labelDiv.setText(I.CHG_GOV_Realized_Moved_MF+" ("+t+") "),this.labelDiv.tooltipInfos.title=I.CHG_GOV_Realized_Moved+" ("+t+") "):"IGNORED"===e&&(this.labelDiv.setText(I.CHG_GOV_Realized_Ignored_MF+" ("+t+") "),this.labelDiv.tooltipInfos.title=I.CHG_GOV_Realized_Ignored+" ("+t+") "),this.indexInfoDiv.hide()},updateDGVForNonEmptyView:function(){this.realizedDGV.getToolbar().updateNodeModel("cmd_5_find",{visibleFlag:!0}),this.realizedDGV.getToolbar().updateNodeModel("cmd_4_ignore",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("move_menu",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("cmd_2_download",{visibleFlag:!1}),this.realizedDGV.getToolbar().updateNodeModel("expand_collapse_menu",{visibleFlag:!0}),this.realizedDGV.placeholder=I.CHG_GOV_DataGrid_PlaceHolder_Fetch_RealizedChange,this.labelDiv.show(),this.indexInfoDiv.hide()},updateDGVForIndexInfoView:function(){this.indexInfoDiv.show()},updateDGVForTrackedView:function(e){this.labelDiv.setText(I.CHG_GOV_Realized_Tracked_MF+" ("+e.count+") "),this.labelDiv.tooltipInfos.title=I.CHG_GOV_Realized_Tracked+" ("+e.count+") ",this.authoringCommandsAvailable=!0},updateDGVForMovedView:function(e){this.labelDiv.setText(I.CHG_GOV_Realized_Moved_MF+" ("+e.count+") "),this.labelDiv.tooltipInfos.title=I.CHG_GOV_Realized_Moved+" ("+e.count+") ",this.authoringCommandsAvailable=!1},updateDGVForIgnoredView:function(e){this.labelDiv.setText(I.CHG_GOV_Realized_Ignored_MF+" ("+e.count+") "),this.labelDiv.tooltipInfos.title=I.CHG_GOV_Realized_Ignored+" ("+e.count+") ",this.authoringCommandsAvailable=!1},updateDGVForGroupedView:function(e){this.labelDiv.setText(I.CHG_GOV_Realized_Grouped_SMF+" ("+e.count+") "),this.labelDiv.tooltipInfos.title=I.CHG_GOV_Realized_Grouped_MF+" ("+e.count+") ",this.authoringCommandsAvailable=!1},updateTaggerFilter:function(){var e=this;"false"==w.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(),t._cleanBIFilterProxy(),t.cleanPathTag();var i=new Set;e.realizedDGV.treeDocument.getAllDescendants().forEach(e=>{var t=e.options.grid;if("FALSE"==t.isInstanceOperation&&t.where_details&&t.where_details.id){var n=t.where_details.id;i.add(n)}else if("TRUE"==t.isInstanceOperation){if(t.ref_details&&t.ref_details.id){var o=t.ref_details.id;i.add(o)}if(t.after_details&&t.after_details.id){var a=t.after_details.id;i.add(a)}}});var n=[];i.forEach(e=>n.push(e));t._onSetPathTagsForProposedRealized(n,{options:{id:"caRealizedChangesDGV"}})})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesController",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView2","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesFilterModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","UWA/Class/Model","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/CACommonIgnore","DS/ENOChangeActionUX/scripts/Views/CATransferRealizedForm","DS/ENOChangeActionUX/scripts/Views/CASlideInTransferRealizedView","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";return e.Class.extend({init:function(e){this._parent(e),this.options=e,this.options.groupCAFeature=!1,"true"===e.contextDetails.isCAGrouped&&(this.options.groupCAFeature=!0),this.subscribeToPlatformEvents(),this.realizedChangesView=null},createRealizedChangesView:async function(){this.options.target.setStyles({position:"relative"}),this.loadRealizedChangesData("TRACKED")},loadRealizedChangesData:async function(t){this.options.target.empty(),this.options.dgvid="CARealizedChangesDGV_"+t,this.options.filter=t,this.realizedChangesView=new i(this.options),await this.realizedChangesView.render(),s.showLoader(this.options.target,this.realizedChangesView.loader),this.realiedChangesModel&&this.realiedChangesModel.resetModel(),this.realiedChangesModel=new n,this.realiedChangesModel.createTreeDocument();let a=await l.getTimestamp(),r=d.processTimestampData(a),u=await l.getCARealizedChanges(this.options.contextDetails.id,t,r).catch(e=>{console.error(e),c.error(f.CHG_GOV_GET_REALIZED_FAIL),s.hideLoader(this.options.target,this.realizedChangesView.loader)}),g=await l.getChangeActionUserAccess(this.options.contextDetails.id).catch(e=>{console.error(e),c.error(f.CHG_GOV_GET_REALIZED_ACCESS_FAIL),s.hideLoader(this.options.target,this.realizedChangesView.loader)});if(1==g.success&&200==g.statusCode&&(this.options.access=g.data[0],g.data[0].EditRealizedDescription&&"true"===g.data[0].EditRealizedDescription?this.realiedChangesModel.setReasonForChangeEditAccess(!0):this.realiedChangesModel.setReasonForChangeEditAccess(!1)),1==u.success&&200==u.statusCode)try{let i=d.getPoliciesFromFedResponse(u.data),n=await l.getStatesAttributes(i);s.addCSSMaturityClasses(i,"wux-controls-label",n),this.realizedChangesView.prepareUpdateView();var h=await d.processCARealizedChangesData(u.data).catch(e=>{console.error(e),c.error(f.CHG_GOV_PARSE_REALIZED_KO),s.hideLoader(this.options.target,this.realizedChangesView.loader)});if(this.realiedChangesModel.updateTreeDocument(h.realized_changes),this.realiedChangesModel.setFilterModel(o.getFilterModel()),this.realiedChangesModel.registerCustomFilter(),this.realizedChangesView.setTreeDocument(this.realiedChangesModel.getTreeDocument()),this.options.isSelected){this.realizedChangesView.updateTaggerFilter();let e=p.getCurrentModel();e.userAccess=this.options.contextDetails.userAccess,p.setCurrModel(e),p.setCallbacksForOpenWith("RealizedDGV")}if(0===this.realiedChangesModel.getTreeDocument().getAllDescendants().length)this.realizedChangesView.updateDGVForEmptyView(t,h.rc_count);else{this.realizedChangesView.updateDGVForNonEmptyView();let e={count:h.rc_count};switch(t){case"TRACKED":this.realizedChangesView.updateDGVForTrackedView(e);break;case"MOVED":this.realizedChangesView.updateDGVForMovedView(e);break;case"IGNORED":this.realizedChangesView.updateDGVForIgnoredView(e);break;case"GROUPED":this.realizedChangesView.updateDGVForGroupedView(e)}}this.realizedChangesView.pushUpdateView(),s.hideLoader(this.options.target,this.realizedChangesView.loader),!1!==h.AllIndexed&&!1!==h.AllOK||this.realizedChangesView.updateDGVForIndexInfoView(),e.is(this.options.target.children)&&2===this.options.target.children.length&&this.options.target.children[1].destroy(),this.realizedChangesView.loadCustomColumns()}catch(e){console.error(e),c.error(f.CHG_GOV_ADD_REALIZED_KO),s.hideLoader(this.options.target,this.realizedChangesView.loader)}else console.error(error),c.error(f.CHG_GOV_GET_REALIZED_RESPONSE_KO),s.hideLoader(this.options.target,this.realizedChangesView.loader)},subscribeToPlatformEvents:function(){var i=this;t.unsubscribe("Realized_ObjectNotFound:"+(widget?widget.id:"")),t.subscribe("Realized_ObjectNotFound:"+(widget?widget.id:""),function(e){i.realizedChangesView.updateDGVForIndexInfoView()}),t.unsubscribe("ECM_GOV_RealizedDGV_REFRESH:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_REFRESH:"+(widget?widget.id:""),function(e){i.loadRealizedChangesData(e.filter)}),t.unsubscribe("CrossHighlighting:"+(widget?widget.id:"")),t.subscribe("CrossHighlighting:"+(widget?widget.id:""),function(t){if(e.is(t))if(t.indexOf(",")>-1){var n=t.split(",");i.realizedChangesView.selectNodesInDGV(n)}else i.realizedChangesView.selectNodesInDGV([t])}),t.unsubscribe("ECM_GOV_RealizedDGV_DESC_MODIFIED:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_DESC_MODIFIED:"+(widget?widget.id:""),async function(e){await l.updateRealizedActivityDescription(i.options.contextDetails.id,e.activity_id,e.activity_description).catch(e=>{console.error(e),c.error(f.CHG_GOV_PUT_REALIZED_DESC_FAIL)})}),t.unsubscribe("ECM_GOV_RealizedDGV_FILTER:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_FILTER:"+(widget?widget.id:""),function(e){i.loadRealizedChangesData(e.filter)}),t.unsubscribe("ECM_GOV_RealizedDGV_EXPAND_COLLAPSE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_EXPAND_COLLAPSE:"+(widget?widget.id:""),function(e){i.realizedChangesView.expandCollapseNodesInDGV(e.action)}),t.unsubscribe("ECM_GOV_RealizedDGV_FIND:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_FIND:"+(widget?widget.id:""),function(e){i.realizedChangesView.toggleFindViewInDGV(e)}),t.unsubscribe("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_IGNORE:"+(widget?widget.id:""),function(e){const t=i.realiedChangesModel.getTreeDocument().getSelectedNodes().map(e=>"pid:"+e.options.grid.id);var n={originChangeActionId:"pid:"+i.options.contextDetails.id,idsToReject:t};h.ignoreNodes(n,widget.body,function(e){g.unmask(widget.body),"success"===e.status&&(u.getGlobalVariable().arrOid=[],i.loadRealizedChangesData("TRACKED"),c.success(f.CHG_GOV_Realized_Ignore_Success))},function(e,t){g.unmask(widget.body),t&&t.errorMessage?c.error(t.errorMessage):c.error(f.CHG_GOV_Realized_Ignore_ERR_MSG)})}),t.unsubscribe("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_RealizedDGV_MOVE:"+(widget?widget.id:""),function(e){const t=i.realiedChangesModel.getTreeDocument().getSelectedNodes().map(e=>"pid:"+e.options.grid.id);if(t.length>0){var n={ids:t,contextCAId:"pid:"+i.options.contextDetails.id,Mode:e.mode,Entity:"ChangeAction",RealizedTransferBit:i.options.access.RealizedTransfer,callback:function(){u.getGlobalVariable().arrOid=[],i.loadRealizedChangesData("TRACKED")}},o=new m(n),a=new C({invokedFrom:"gov"});a.buildSlideIn(o),a.showSlideIn()}}),t.unsubscribe("ECM_GOV_Realized_Download:"+(widget?widget.id:"")),t.subscribe("ECM_GOV_Realized_Download:"+(widget?widget.id:""),function(e){let t=i.realiedChangesModel.getTreeDocument().getSelectedNodes().map(e=>e.options.grid.ref_details?e.options.grid.ref_details.id:e.options.grid.id);s.download(t)}),t.unsubscribe(`caRealizedChangesDGV:${widget.id}`),t.subscribe(`caRealizedChangesDGV:${widget.id}`,function(){if(i.realizedChangesView.updateTaggerFilter(),Object.keys(i.realizedChangesView.realizedDGV.getTreeDocument().getXSO()._items).length>0){let e=i.realizedChangesView.realizedDGV.getTreeDocument().getXSO()._items;for(let t in e)i.options.applicationChannel.publish({event:"update_object_select",data:{node:e[t],contextID:i.options.contextDetails.id,contextType:i.options.contextDetails.isKindOfType,isNodeAdded:!0}})}else i.options.applicationChannel.publish({event:"update_object_select",data:{node:i.realiedChangesModel.treeDocument._getTrueRoot(),contextID:i.options.contextDetails.id,contextType:i.options.contextDetails.isKindOfType,isNodeAdded:!1}})}),t.unsubscribe(`caRealizedChangesDGV of ${widget.id}`),t.subscribe(`caRealizedChangesDGV of ${widget.id}`,function(e){i.realiedChangesModel.filterView(e)})}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMemberFilterLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMemberFilterView","require"],function(e,t){"use strict";var i={createMemberFilter:function(t){i.teamlayoutModel=t.model,new e({events:{memberFilterKeyUp:function(e){i.enteredText=e.target.value;var t={filteringMode:"name",text:i.enteredText};i.filterCollectionAndUpdateUI(t)},memberRoleFilter:function(e){"option1"!=e.target.value&&(i.enteredText=e.target.value);var t={filteringMode:"name",text:i.enteredText?i.enteredText:"",originatorInclude:!1,reviewInclude:!1,followInclude:!1,assigneeInclude:!1},n=document.getElementById("allToggle"),o=document.getElementById("originatorToggle");o&&o.checked&&(t.originatorInclude=!0);var a=document.getElementById("revMemToggle");a&&a.checked&&(t.reviewInclude=!0);var s=document.getElementById("followMemToggle");s&&s.checked&&(t.followInclude=!0);var r=document.getElementById("assigneeToggle");r&&r.checked&&(t.assigneeInclude=!0),0==t.originatorInclude&&0==t.reviewInclude&&0==t.followInclude&&0==t.assigneeInclude||1==t.originatorInclude&&1==t.reviewInclude&&1==t.followInclude&&1==t.assigneeInclude||"allToggle"==e.target.id&&1==n.checked?(t.allInclude=!0,n.checked=!0,o.checked=!1,a.checked=!1,s.checked=!1,r.checked=!1):(t.allInclude=!1,n.checked=!1),i.filterCollectionAndUpdateUI(t)}}}).render().inject(t.target)},filterCollectionAndUpdateUI:function(e){var t=e.text;i.teamlayoutModel.setFilterModel({label:{filterId:"stringRegexp",filterModel:{condition1:{type:"contains",filter:t}}},role:{filterId:"stringRegexp"}});var n=i.teamlayoutModel.getFilterManager().getFilters().role,o={};0==e.allInclude&&(1==e.originatorInclude&&(o.condition1={type:"contains",filter:"Originator"}),1==e.reviewInclude&&(o.hasOwnProperty("condition1")?(o.operator="or",o.condition2={type:"contains",filter:"Approver"}):o.condition1={type:"contains",filter:"Approver"}),1==e.followInclude&&(o.hasOwnProperty("condition1")&&o.hasOwnProperty("condition2")?o.condition3={type:"contains",filter:"follower"}:o.hasOwnProperty("condition1")?(o.operator="or",o.condition2={type:"contains",filter:"follower"}):o.condition1={type:"contains",filter:"follower"}),1==e.assigneeInclude&&(o.hasOwnProperty("condition1")&&o.hasOwnProperty("condition2")?o.condition3={type:"contains",filter:"Assignee"}:o.hasOwnProperty("condition1")?(o.operator="or",o.condition2={type:"contains",filter:"Assignee"}):o.condition1={type:"contains",filter:"Assignee"}),n.filterModel=o)},launchFilterMemberPanel:function(){var e={commandInfo:{type:"Change Order",facet:"Members",action:"CO>Members>Filter"}};t("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var i=document.querySelector(".addmemberView"),n=document.querySelector(".memberfilterView"),o=document.querySelector(".content-member-grid-div"),a=document.querySelector(".content-member-tile-div");i.hide(),o.removeClassName("teamview-opaque"),a.removeClassName("teamview-opaque"),"block"==n.style.display?(n.hide(),o.setStyle("height","calc(100% - 45px)"),a.setStyle("height","calc(100% - 45px)")):(n.show(),o.setStyle("height","calc(100% - 165px)"),a.setStyle("height","calc(100% - 165px)"))}};return i}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView",["DS/ENOChangeActionUX/scripts/Views/CANewProposedView","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesController","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o,a,s,r){"use strict";return{createProposedChangesView:function(t){var i={};i=UWA.merge(i,t),this._modelEvents=i.contextDetails._modelEvents,this.id=i.id;let l=i.contextDetails.title;var d="pid:"+i.id,c=t.contextDetails.userAccess;i.targetclassName=i.target.className;let u={id:d,name:i.contextDetails.name,title:l,description:i.contextDetails.description,severity:i.contextDetails.severity,maturity:i.contextDetails.maturity,invokedFrom:"gov",isSelected:i.isSelected,init_options:i};i.target.empty();let p=i.target;var g=UWA.createElement("div",{id:"proposedDGV",class:"proposedDGV",styles:{display:"none",height:"100%"}}),h=UWA.createElement("div",{id:"proposedLTV",class:"proposedLTV",styles:{display:"none",height:"100%"}});g.inject(p),h.inject(p);let m=n.getUserPreference(o.keys.viewKeys.PROPOSED_DEF_VIEW);m&&"LTV"===m?h.show():g.show();let C=new new e._createView_TestProposed("div","test-proposed-facet",!0,u);C.container=h,C.model={id:d,name:i.contextDetails.name,title:l,description:i.contextDetails.description,severity:i.contextDetails.severity,maturity:i.contextDetails.maturity,invokedFrom:"gov",isSelected:i.isSelected,get:function(e){return"userAccess"==e?c:"id"==e?d:"synopsis"===e?l:void 0},fetch:function(e){console.log("dummy fetch called...!"),r.publish("load-dependency"+widget.id,d),e.onComplete()}},h.addContent(C.render());var f=a.clone(i||{},!1);f.target=g,new s(f).createProposedChangesView()}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgGovernanceUX/scripts/model/changeAction/facets/members/ChgCAMembersDataGridModel","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C){"use strict";var f={createMembersView:function(o){var a=this,s={},d=document.querySelector(".wux-controls-autoComplete-popup");d&&d.hide(),s=UWA.merge(s,o),this._modelEvents=s.contextDetails._modelEvents,a.id=s.id,s.columns=i.getColumns(),a.ChgCAMembersDataGridModel=new n(o.id),s.treeDocument=a.ChgCAMembersDataGridModel.createTreeDocument(),this.subscribeToModelEvents(s.treeDocument),a.ChgMembersTreeModel=s.treeDocument;var c=new e(s);a.membersDataGridView=c,g.mask(s.target);let u=a.membersDataGridView.membersDatagrid;r.getChangeActionMembers(o.id).then(function(e){console.log("Member list: "+e);let i=l.processedChangeActionMemberList(e);if(0==i.length){let e=document.getElementById("caMembers");e&&g.isMasked(e)&&g.unmask(e),a._modelEvents.publish({event:"showEmpty-datagrid",data:u})}a.ChgCAMembersDataGridModel.loadChangeActionMembersData(s.treeDocument,i),0==s.treeDocument.getChildren().length?t.showEmptyView():t.hideEmptyView(),t.changeView()},function(e){let t=document.getElementById("caMembers");return t&&g.isMasked(t)&&g.unmask(t),Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},addNodesInLayout:function(e){f.ChgCAMembersDataGridModel.addNodesInLayoutModel(this.ChgMembersTreeModel,e)},removeHandler:function(){var e={commandInfo:{type:"Change Action",facet:"Members",action:"CA>Members>Remove"}};if(C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=f.ChgCAMembersDataGridModel.treeDocument.getSelectedNodes().length){let e=document.getElementById("caMembers");e&&g.mask(e)}f.ChgCAMembersDataGridModel.removeChildren()},updatePersonRole:function(e,t){if(console.log("updatePersonRole"),0==f.ChgMembersTreeModel.getSelectedNodes().length);else{let e={person:[],userGroup:[]},n={person:[],userGroup:[]},o={person:[],routeTemplate:""},a=t.role,s=Array.isArray(a)?t[a[0]]:t[a],r="",l="";"Route Template"!=t.currentObjType&&"Group"!=t.currentObjType||(r=f.ChgMembersTreeModel.getSelectedNodes()[0].options.grid.id),"Person"==t.currentObjType&&(l=f.ChgMembersTreeModel.getSelectedNodes()[0].options.grid.userId),a.indexOf("contributor")>=0&&("Person"==t.currentObjType?e.person.push(l):"Group"==t.currentObjType&&e.userGroup.push(r)),a.indexOf("follower")>=0&&("Person"==t.currentObjType?n.person.push(l):"Group"==t.currentObjType&&n.userGroup.push(r)),a.indexOf("approver")>=0&&("Person"==t.currentObjType?o.person.push(l):"Route Template"==t.currentObjType&&(o.routeTemplate=r));let d=i.makeUpdateMemberJson(s,e,o,n);"DISCONNECT"==s&&1==t.showConfirmation?f.showConfirmationDialog(d):f.updateCAPeople(d,!1,a)}},showConfirmationDialog:function(e){var t=new c({}),i=document.getElementById("outer-member-grid-div");t.inject(i),new u({immersiveFrame:t,title:h.CHG_Member_Remove_Title,content:h.CHG_Member_Remove_Message,activeFlag:!1,modelFlag:!0,width:500,buttons:{No:new p({onClick:function(e){t.destroy()}}),Yes:new p({onClick:function(i){t.destroy(),f.updateCAPeople(e,!0)}})}}).addEventListener("close",function(e){t&&t.destroy()})},updateCAPeople:function(e,t,n){if(""!=e){let o=f.id;r.updateChangeActionMembers(o,e).then(function(e){let o=f.ChgMembersTreeModel,a=o.getSelectedNodes()[0];if(1==t){if("Coordinator"==a.options.grid.role&&(i.isChangeCoordinatorConnected=!1),"approver"==a.options.grid.role&&("Route Template"==a.options.grid.type&&(s.reviewerType.typeOfReviewer=""),"Person"==a.options.grid.type)){let e=o.getChildren(),t=!1,i=0;for(var r=0;r<e.length;r++){if(e[r].options.grid.role.indexOf("approver")>=0&&2==++i){t=!0;break}}0==t&&(s.reviewerType.typeOfReviewer="")}a.remove()}else if(""!=n&&1==e.success){o.prepareUpdate();let t=a.options.grid.role,l=a.options.description,d=","+n,c=i.getRoleNLSValue(n),u=c+",";if(c=", "+c,e.data.length>0){let e=l.concat(c);a.options.description=e,a.setAttribute("roleList",e),a.options.grid.role=t.concat(d),a.options.grid.roles.push(n),"approver"==n&&(s.reviewerType.typeOfReviewer="Person")}else{let e=l.replace(c,"");e=e.replace(u,""),a.setAttribute("roleList",e),a.options.description=e,a.options.grid.role=t.split(",").filter(e=>e!=d.replace(/,/g,"")).join(",");let i=a.options.grid.roles.filter(function(e,t,i){return e!=n});if(a.options.grid.roles=i,"approver"==n){let e=o.getChildren(),t=!1;for(r=0;r<e.length;r++){if(e[r].options.grid.role.indexOf("approver")>=0){t=!0;break}}0==t&&(s.reviewerType.typeOfReviewer="")}}o.pushUpdate()}})}},subscribeToModelEvents:function(e){var t=this;m.unsubscribe(`caMembers:${widget.id}`),m.subscribe(`caMembers:${widget.id}`,function(){t._modelEvents.publish({event:"update_object_select",data:{node:t.membersDataGridView.options.treeDocument._getTrueRoot(),contextID:t.membersDataGridView.options.contextDetails.id,contextType:t.membersDataGridView.options.contextDetails.isKindOfType,isNodeAdded:!1}})})},globalSubscribeForCAMemberView:function(){o.addObserver("ChgCAMembersDataGridLayout","CO-AccessBit-Update",f.handleAccessBitUpdate),o.addObserver("ChgCAMembersDataGridLayout","ENOLC_MOVE_CMD_UPDATE",f.handleTransferownership)},handleTransferownership:function(e){e.data.attributes.hasOwnProperty(f.id)&&r.getChangeActionMembers(f.id).then(function(e){f.ChgMembersTreeModel.empty();var t=l.processedChangeActionMemberList(e);f.ChgCAMembersDataGridModel.loadChangeActionMembersData(f.ChgMembersTreeModel,t)})},handleAccessBitUpdate:function(e){e.id==f.id&&(f.addContributorAccessBit=e.accessBits.AddContributor,f.addFollowerAccessBit=e.accessBits.AddFollower,f.addReviewerAccessBit=e.accessBits.AddReviewer,"false"==f.addReviewerAccessBit&&"false"==f.addFollowerAccessBit&&"false"==f.addContributorAccessBit?(f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{disabled:!0}),f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!0})):(f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{disabled:!1}),f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!1})))}};return f.globalSubscribeForCAMemberView(),f}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("impactedItemEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("impactedItemEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgAddMemberLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgAddMemberView","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";var C={createAddMemberPanel:function(t){C.teamlayoutModel=t.model,C.id=t.id,new e({events:{searchChangeCoordinator:function(e){C.searchCategoty="Change Coordinator";var t=n.activateSearch("Person","TransferOwnership");n.search(h.CHG_Add_Member_Change_Coordinator,"Person",C.OnSearchComplete,"Contributors",t,void 0,void 0)},searchAssignee:function(e){C.searchCategoty="Assignee";var t=n.activateSearch("Person","TransferOwnership");n.search(h.CHG_Add_Member_Assignee,"Person",C.OnSearchComplete,"Contributors",t,void 0,"Assignee")},searchApprover:function(e){C.searchCategoty="Approver";var t=n.activateSearch("Person","TransferOwnership");n.search(h.CHG_Add_Member_Approver,"Route Template",C.OnSearchComplete,"Contributors",t,void 0,void 0)},searchInformedUser:function(e){C.searchCategoty="Follower";let t=C.teamlayoutModel.getAllDescendants(),i={condition:"addExistingFollower",extendedQuery:C.createExcludeListForSearch(t,C.searchCategoty)};var o=n.activateSearch("Person","AddCRFollower");n.search(h.CHG_Add_Member_Follower,"Person",C.OnSearchComplete,"AddCRFollower",o,void 0,"informedUser",i)}}}).render().inject(t.target);var o=t.target.querySelector(".chg-add-member-change-coordinator-field"),a=t.target.querySelector(".chg-add-member-assignee-field"),s=t.target.querySelector(".chg-add-member-approver-field"),r=t.target.querySelector(".chg-add-member-informed-user-field"),l=t.target.querySelector(".chg-add-member-button"),p=t.target.querySelector(".chg-add-member-change-coordinator-field-container"),m=t.target.querySelector(".chg-add-member-approver-field-container"),f=t.target.querySelector(".chg-add-member-informed-user"),v=t.target.querySelector(".chg-add-member-assignee");i.makeDroppable(p,C.ExecuteDropForChangeCoordinatorField),i.makeDroppable(m,C.ExecuteDropForApproverField),i.makeDroppable(f,C.ExecuteDropForInformedUserField),i.makeDroppable(v,C.ExecuteDropForAssigneeField),C.myButtonPrimary=new d({label:h.CHG_Add_Member_Add,emphasize:"primary"}).inject(l);var D=new d({label:h.CHG_Add_Member_Cancel,emphasize:"secondary"}).inject(l);C.modelForChangeCoordinator=new u,C.modelForAssignee=new u,C.modelForApprover=new u,C.modelForFollower=new u,C.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new g).getTrigramNameFilter()),C.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new g).getTrigramNameFilter()),C.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new g).getTrigramNameFilter()),C.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new g).getTrigramNameFilter()),C.autoCompleteChangeCoordinator=new c({elementsTree:C.modelForChangeCoordinator,placeholder:h.CHG_Add_Member_Type_To_Search,customFilterMessage:h.CHG_No_Search_found,multiSearchMode:!1,filterCB:function(e){C.modelForChangeCoordinator.setFilterModel({value:{filterId:"trigramNameFilter_CCO",filterModel:{text:e}}})}}).inject(o),C.autoCompleteAssignee=new c({elementsTree:C.modelForAssignee,placeholder:h.CHG_Add_Member_Type_To_Search,customFilterMessage:h.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){C.modelForAssignee.setFilterModel({value:{filterId:"trigramNameFilter_Assignee",filterModel:{text:e}}})}}).inject(a),C.autoCompleteApprover=new c({elementsTree:C.modelForApprover,placeholder:h.CHG_Add_Member_Type_To_Search,customFilterMessage:h.CHG_No_Search_found,multiSearchMode:!1,filterCB:function(e){C.modelForApprover.setFilterModel({value:{filterId:"trigramNameFilter_Approver",filterModel:{text:e}}})}}).inject(s),C.autoCompleteFollower=new c({elementsTree:C.modelForFollower,placeholder:h.CHG_Add_Member_Type_To_Search,customFilterMessage:h.CHG_No_Search_found,multiSearchMode:!0,filterCB:function(e){C.modelForFollower.setFilterModel({value:{filterId:"trigramNameFilter_Follower",filterModel:{text:e}}})}}).inject(r),C.myButtonPrimary.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque");var o=null!=C.autoCompleteChangeCoordinator.selectedItems?C.autoCompleteChangeCoordinator.selectedItems.options.identifier:"",a=null!=C.autoCompleteApprover.selectedItems?C.autoCompleteApprover.selectedItems.options.id:"",s={person:[],userGroup:[]};if(null!=C.autoCompleteAssignee.selectedItems)for(var r=0;r<C.autoCompleteAssignee.selectedItems.length;r++){let e=C.autoCompleteAssignee.selectedItems[r].options;"Person"==e.type?s.person.push(e.identifier):"Group"==e.type&&s.userGroup.push(e.id)}var l={person:[],userGroup:[]};if(null!=C.autoCompleteFollower.selectedItems)for(r=0;r<C.autoCompleteFollower.selectedItems.length;r++){let e=C.autoCompleteFollower.selectedItems[r].options;"Person"==e.type?l.person.push(e.identifier):"Group"==e.type&&l.userGroup.push(e.id)}(""!=a||l.person.length>0||l.userGroup.length>0||""!=o||s.person.length>0||s.userGroup.length>0)&&(C.autoCompleteChangeCoordinator.selectedItems=C.autoCompleteApprover.selectedItems=C.autoCompleteFollower.selectedItems=void 0,C.addmember(o,a,l,s))}),D.addEventListener("buttonclick",function(e){t.target.hide();var i=document.querySelector(".content-member-grid-div"),n=document.querySelector(".membertileView");i.removeClassName("teamview-opaque"),n.removeClassName("teamview-opaque")})},launchAddMemberPanel:function(){var e={commandInfo:{type:"Change Order",facet:"Members",action:"CO>Members>Add Member"}};m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var i=document.querySelector(".addmemberView"),n=document.querySelector(".memberfilterView"),o=document.querySelector(".content-member-grid-div"),a=document.querySelector(".membertileView"),s=document.querySelector(".chg-add-member-approver"),r=document.querySelector(".chg-add-member-change-coordinator");n.hide(),o.removeClassName("teamview-opaque"),a.removeClassName("teamview-opaque"),s.classList.remove("teamview-opaque"),r.classList.remove("teamview-opaque"),"block"==i.style.display?i.hide():(i.show(),o.addClassName("teamview-opaque"),a.addClassName("teamview-opaque"),C&&C.autoCompleteChangeCoordinator&&C.autoCompleteApprover&&C.autoCompleteFollower&&C.autoCompleteAssignee&&(C.autoCompleteChangeCoordinator.selectedItems=C.autoCompleteApprover.selectedItems=C.autoCompleteAssignee.selectedItems=C.autoCompleteFollower.selectedItems=void 0),1==t.isRouteTemplateConnected&&s.classList.add("teamview-opaque"),1==t.isChangeCoordinatorConnected&&r.classList.add("teamview-opaque"),C.updateAutoCompleteModel(),C.addChangeEventListener(),C.myButtonPrimary.disabled=!0)},updateAutoCompleteModel:function(e){var t=r.getGlobalVariable().contextUser;let i={},n=C.teamlayoutModel.getChildren();for(let e=0;e<n.length;e++){let t=n[e].options.grid;i[t.id]=t.role}var o={categoryId:"changeCordinator",contextUser:t},a={categoryId:"assignee",contextUser:t},d={categoryId:"approver",contextUser:t},c={categoryId:"follower",contextUser:t};C.modelForChangeCoordinator.empty(),C.modelForAssignee.empty(),C.modelForApprover.empty(),C.modelForFollower.empty(),s.getListCOMember(o).then(function(e){e.length>999&&l.warn(h.CHG_Add_Member_Warning),C.modelForChangeCoordinator.prepareUpdate();for(var t=0;t<e.length;t++){let n;n="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[t].type.toLowerCase()?e[t].name+"("+e[t].identifier.toUpperCase()+")":e[t].name;var i=new p({label:n,value:{label:n,subLabel:e[t].personRole},name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForChangeCoordinator.addRoot(i)}C.modelForChangeCoordinator.pushUpdate()}),s.getListCOMember(a).then(function(e){e.length>999&&l.warn(h.CHG_Add_Member_Warning),C.modelForAssignee.prepareUpdate();for(var t=0;t<e.length;t++){let o,a=e[t].id;if(!i.hasOwnProperty(a)||1!=i[a].contains("Assignee")){o="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[t].type.toLowerCase()?e[t].name+"("+e[t].identifier.toUpperCase()+")":e[t].name;var n=new p({label:o,value:{label:o,subLabel:e[t].personRole},name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForAssignee.addRoot(n)}}C.modelForAssignee.pushUpdate()}),s.getListCOMember(d).then(function(e){e.length>999&&l.warn(h.CHG_Add_Member_Warning),C.modelForApprover.prepareUpdate();for(var t=0;t<e.length;t++){var i=new p({label:e[t].name,value:e[t].value,name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForApprover.addRoot(i)}C.modelForApprover.pushUpdate()}),s.getListCOMember(c).then(function(e){e.length>999&&l.warn(h.CHG_Add_Member_Warning),C.modelForFollower.prepareUpdate();for(var t=0;t<e.length;t++){let o,a=e[t].id;if(!i.hasOwnProperty(a)||1!=i[a].contains("Follower")){o="true"==r.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e[t].type.toLowerCase()?e[t].name+"("+e[t].identifier.toUpperCase()+")":e[t].name;var n=new p({label:o,value:{label:o,subLabel:e[t].personRole},name:e[t].name,identifier:e[t].identifier,type:e[t].type,id:e[t].id});C.modelForFollower.addRoot(n)}}C.modelForFollower.pushUpdate()})},addmember:function(e,i,n,s){var r=C.id,l=t.makeUpdateMemberJson("CONNECT",e,i,n,s);o.updateChangeOrderMembers(r,l).then(function(e){var i=a.processedChangeOrderMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout"],function(e){for(var n=e.ChgMembersTreeModel.getChildren(),o=[],a=0;a<i.length;a++){var s=i[a];if("Route Template"!=s.type){"Coordinator"==s.role&&(t.isChangeCoordinatorConnected=!0);for(var r=s.id,l=!1,d=0;d<n.length;d++)if(r==n[d].options.grid.id){l=!0;break}if(1==l){e.ChgMembersTreeModel.prepareUpdate();var c=n[d].options.description;let t=s.role,i="";if(t.includes(",")){let e=t.split(",");for(let t=0;t<e.length;t++)"Coordinator"==e[t].trim()?i+=", "+h.CHG_Member_Role_ChangeCoordinator:"Assignee"==e[t].trim()?i+=", "+h.CHG_Member_Role_Assignee:i+=", "+h.CHG_Member_Role_Follower,n[d].options.grid.roles.push(e[t].trim())}else i+="Coordinator"==t?", "+h.CHG_Member_Role_ChangeCoordinator:"Assignee"==t?", "+h.CHG_Member_Role_Assignee:", "+h.CHG_Member_Role_Follower,n[d].options.grid.roles.push(t);var u=i,p=n[d].options.grid.role,g=", "+s.role;n[d].options.description=n[d].options.grid.roleList=c.concat(u),n[d].options.grid.role=p.concat(g),e.ChgMembersTreeModel.pushUpdate()}else o.push(s)}else o.push(s),t.isRouteTemplateConnected=!0}o.length>0&&e.addNodesInLayout(o)})})},ExecuteDropForApproverField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Approver")},ExecuteDropForChangeCoordinatorField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Change Coordinator")},ExecuteDropForInformedUserField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Follower")},ExecuteDropForAssigneeField:function(e){var t={data:{}};t.data.items=e,C.ExecuteDropForAddMemberPanel(t,"Assignee")},approverFlag:!1,ExecuteDropForAddMemberPanel:function(e,t){if(e&&e.data&&e.data.items){var i=e.data.items;if(UWA.is(i)&UWA.is(i.length)&&i.length>0){var o=[],s=[];let e=[];for(var r=[],l=0;l<i.length;l++)if(i[l].objectId){var d=i[l].serviceId.toLowerCase();"3dspace"==d||d.includes("3dspace")?o.push(i[l].objectId):"3dswym"==d&&"pno:Person"==i[l].objectType?(s.push(i[l].objectId.replace("iam:","")),r.push(i[l].displayName)):d.includes("usersgroup")&&e.push(i[l])}if(0!=o.length||0!=s.length||0!=e.length){var c=[];0!=o.length&&n.getAdditionObjectInfo(o).then(function(e){for(var i=0;i<o.length;i++){var n=null,s=e.additionObjectInfo[o[i]];if("Approver"===t&&s.type&&"Route Template"===s.type)n=new p({label:s.objectTitle,value:s.objectName,name:s.objectTitle,type:s.type,id:s.pid,identifier:s.objectName}),c.push(n),C.autoCompleteApprover.selectedItems=c,C.autoCompleteApprover._applySelectedItems();else if("Change Coordinator"===t&&s.type&&"Person"==s.type){var r=new p({label:s.fullName,value:s.objectName,name:s.fullName,type:s.type,id:s.pid,identifier:s.objectName});c.push(r),C.autoCompleteChangeCoordinator.selectedItems=c,C.autoCompleteChangeCoordinator._applySelectedItems()}else if("Follower"!==t||!s.type||"Person"!==s.type&&"Group"!==s.type){if("Assignee"!==t||!s.type||"Person"!==s.type&&"Group"!==s.type)return void console.log("NLS.ECM_ERR_NO_PERSON_NO_ROUTETEMPLATE");{let e="";"Person"===s.type?e=new p({label:s.fullName,value:s.objectName,name:s.fullName,type:s.type,id:s.pid,identifier:s.objectName}):"Group"===s.type&&(e=new p({label:s.objectTitle,value:s.objectName,name:s.objectTitle,type:s.type,id:s.pid})),c.push(e);l=C.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.name==c[0].options.name)return!0});C.autoCompleteAssignee.selectedItems=l<0?c:a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteAssignee,c),C.autoCompleteAssignee._applySelectedItems(),C.approverFlag=!1}}else{let e="";"Person"===s.type?e=new p({label:s.fullName,value:s.objectName,name:s.fullName,type:s.type,id:s.pid,identifier:s.objectName}):"Group"===s.type&&(e=new p({label:s.objectTitle,value:s.objectName,name:s.objectTitle,type:s.type,id:s.pid})),c.push(e);var l=C.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.name==c[0].options.name)return!0});C.autoCompleteFollower.selectedItems=l<0?c:a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteFollower,c),C.autoCompleteFollower._applySelectedItems(),C.approverFlag=!1}}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)}),0!=s.length&&n.getAdditionSwymPersonInfo(s).then(function(e){for(var i=0;i<s.length;i++){var n=null,o=e.additionObjectInfo[s[i]];"Change Coordinator"===t&&o.type&&"Person"===o.type?(n=new p({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),c.push(n),C.autoCompleteChangeCoordinator.selectedItems=c,C.autoCompleteChangeCoordinator._applySelectedItems()):"Follower"===t&&o.type&&"Person"===o.type?(n=new p({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),c.push(n),C.autoCompleteFollower.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteFollower,c),C.autoCompleteFollower._applySelectedItems()):"Assignee"===t&&o.type&&"Person"===o.type&&(n=new p({label:o.fullName,value:o.objectName,name:o.fullName,type:o.type,id:o.pid,identifier:o.objectName}),c.push(n),C.autoCompleteAssignee.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteAssignee,c),C.autoCompleteAssignee._applySelectedItems())}},function(e){return console.log("Failed in getting person id"),Promise.reject(e)});for(let i=0;i<e.length;i++){var u;u=new p({label:e[i].displayName,value:e[i].objectId,name:e[i].displayName,type:e[i].objectType,id:e[i].objectId}),c.push(u),"Follower"===t&&(C.autoCompleteFollower.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteFollower,c),C.autoCompleteFollower._applySelectedItems()),"Assignee"===t&&(C.autoCompleteAssignee.selectedItems=a.searchFromModelAndUniqAndAdd(e=>e.options.id,C.autoCompleteAssignee,c),C.autoCompleteAssignee._applySelectedItems())}}else console.log("NLS.ECM_CA_Drop_Not_Supported")}}else console.log("NLS.ECM_CA_Drop_Not_Supported")},createExcludeListForSearch:function(e,t){let i="";for(let n of e)if(n.options.grid.role.includes(t)&&!n.options.grid.id.startsWith("<uuid")&&(i=i+"NOT (physicalid:"+n.options.grid.id+") "),"Group"===n.options.grid.type&&n.options.grid.id.startsWith("<uuid")){let e=n.options.grid.id;i=i+"NOT ("+(e=e.replace(/[<>]/g,""))+") "}return i},addChangeEventListener:function(){C.autoCompleteApprover.addEventListener("change",function(){C.autoCompleteApprover.selectedItems;C.disableButtonFun()?C.myButtonPrimary.disabled=!1:C.myButtonPrimary.disabled=!0}),C.autoCompleteChangeCoordinator.addEventListener("change",function(){C.autoCompleteChangeCoordinator.selectedItems;C.disableButtonFun()?C.myButtonPrimary.disabled=!1:C.myButtonPrimary.disabled=!0}),C.autoCompleteAssignee.addEventListener("change",function(){var e=C.autoCompleteAssignee.selectedItems,t=e.length;if(t>0){var i=e[t-1];C.autoCompleteAssignee.elementsTree.getChildren().findIndex(function(e){if(e.options.name==i.options.name||1==C.approverFlag)return!0})<0&&(C.autoCompleteAssignee._selectionChips.removeChip(i.options.label),C.autoCompleteAssignee.selectedItems.pop(),C.autoCompleteAssignee.value.pop())}C.disableButtonFun()?C.myButtonPrimary.disabled=!1:C.myButtonPrimary.disabled=!0}),C.autoCompleteFollower.addEventListener("change",function(){var e=C.autoCompleteFollower.selectedItems,t=e.length;if(t>0){var i=e[t-1];C.autoCompleteFollower.elementsTree.getChildren().findIndex(function(e){if(e.options.name==i.options.name||1==C.approverFlag)return!0})<0&&(C.autoCompleteFollower._selectionChips.removeChip(i.options.label),C.autoCompleteFollower.selectedItems.pop(),C.autoCompleteFollower.value.pop())}C.disableButtonFun()?C.myButtonPrimary.disabled=!1:C.myButtonPrimary.disabled=!0})},disableButtonFun:function(){return!!(C.autoCompleteFollower&&C.autoCompleteFollower.selectedItems&&C.autoCompleteFollower.selectedItems.length>0)||(!!(C.autoCompleteAssignee&&C.autoCompleteAssignee.selectedItems&&C.autoCompleteAssignee.selectedItems.length>0)||(!(!C.autoCompleteChangeCoordinator||!C.autoCompleteChangeCoordinator.selectedItems)||!(!C.autoCompleteApprover||!C.autoCompleteApprover.selectedItems)))},OnSearchComplete:function(e){var t=[];C.approverFlag=!0;for(var i=0;i<e.length;i++)t.push({objectId:e[i][0],identifier:e[i][1],objectType:e[i][2],displayType:e[i][3],displayName:e[i][5],serviceId:e[i][7]});var n={data:{}};n.data.items=t,C.ExecuteDropForAddMemberPanel(n,C.searchCategoty)}};return C}),define("DS/ENOChgGovernanceUX/scripts/model/facets/changeOrchestration/ChgOrchestrationDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";var m=p.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),C=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"coOrchestration",useAsyncPreExpand:!0});return e.onPreExpand(function(e){var t=e.target.options.grid.id;console.log("call for children"+e.target),t&&r.getChangeOrchestration(t).then(function(t){l.processedChangeOrchestrationSummaryList(t).then(function(t){var i=C.prototype.createTreeDocumentNodeModel(t);if(e.target.hasChildren())for(var n=!1,o=e.target.getChildren(),a=0;a<i.length;a++){n=!1;for(var s=0;s<o.length;s++)if(o[s].options.grid.id==i[a].options.grid.id){n=!0;break}n||e.target.addChild(i[s])}else e.target.addChild(i);e.target.preExpandDone()})},function(e){return Promise.reject(e)})}),e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},loadChangeOrchestrationData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&u.isMasked(e)&&u.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomNameField(e);e.chgObjName=t;var n=this.createCustomSeverity(e);e.sev=n;var a=this.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=a;var s=this.createCustomOwnerField(e);e.chgObjOwner=s;var r=e.name+" | "+e.ownerFullName,l=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var d,c=this.getStatusBarIcons(e),u=this.statusbarIconsTooltips(e),p=this.getCustomTooltip(e);return d=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:d,subLabel:r,description:l,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:c,statusbarIconsTooltips:u,customTooltip:p,useAsyncPreExpand:!0})},createCustomNameField:function(e){var t=new UWA.Element("div",{class:"wux-tweakers wux-tweakers-string wux-tweakers-string-label wux-tweakers-labelonly"}),i=UWA.createElement("span",{html:e.name});i.style.setProperty("text-overflow","ellipsis"),i.inject(t);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(t),t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{var l=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(i);var d=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),d.inject(t)}return t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var l=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(a);var d=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),d.inject(n),n.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),"TRUE"==e.ecm_change_on_hold&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),"TRUE"==e.ecm_change_on_hold&&t.push(a.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},addNewChildren:function(e){var t=this;if(this.treeDocument.getSelectedNodes().length>1)c.error(a.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{this.treeDocument.getSelectedNodes().length?this.treeDocument.getSelectedNodes()[0].options.grid.id:this.contextID;var i=document.getElementById("outer-orchestration-grid-div");"undefined"!=i&&null!=i&&u.mask(i),"Change Order"==e.type?r.getChangeOrderInfo(e.objectID).then(function(e){l.processedChangeOrchestrationSummaryList(e).then(function(e){h.fetchMaturityStateCSS(e),C.prototype.addNodesInLayoutModel(t.treeDocument,e,!0),u.unmask(i)})},function(e){u.unmask(i)}):"Change Action"==e.type&&r.getNewCADetails(e.objectID).then(function(e){var t=l.processChangeActionInContext(e).processData;h.fetchMaturityStateCSS(t),console.log(t),require(["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout"],function(e){e.addNodesInLayout(t),u.unmask(i)})},function(e){u.unmask(i)})}},addExistingChildren:function(e){var t,i=this;if(this.treeDocument.getSelectedNodes().length>1)c.error(a.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{t=this.treeDocument.getSelectedNodes().length?this.treeDocument.getSelectedNodes()[0].options.grid.id:this.contextID;var n=document.getElementById("outer-orchestration-grid-div");"undefined"!=n&&null!=n&&u.mask(n),r.addExistingChangeOrchestration(t,e).then(function(e){l.processedChangeOrchestrationSummaryList(e).then(function(e){C.prototype.addNodesInLayoutModel(i.treeDocument,e),u.unmask(n)})},function(e){u.unmask(n)})}},addNodesInLayoutModel:function(e,t,i=!1){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var n,o,a=C.prototype.createTreeDocumentNodeModel(t);if(e.getSelectedNodes().length?(n=!1,o=e.getSelectedNodes()[0]):n=!0,n){if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(a);else for(var s=a.length-1;s>=0;s--)e.addRoot(a[s],0);if(e.pushUpdate(),i)try{let e=g("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var r=t[0];e.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:r,View:"Change Orchestration"})}catch(e){console.log(e)}}else if(null==o.getChildren())e.addRoot(a,0);else{if(o.prepareUpdate(),0==o.getChildren().length)o.addChild(a);else for(s=a.length-1;s>=0;s--)o.addChild(a[s],0);o.pushUpdate(),o.isExpanded()||o.expand()}},removeChildren:function(){var e=this,t=e.treeDocument.getSelectedNodes();if(t.length){var i,n,s=t[0].getParent().options.grid.id;void 0===s?(i=e.contextID,n=!0):(i=s,n=!1);var l=[];l.push({id:t[0].options.grid.id,type:t[0].options.grid.type});for(var d=1;d<t.length;d++){if(s!==t[d].getParent().options.grid.id){if(c.error(a.CHG_GOV_ChangeOrchestration_Toolbar_Invalid_Selection),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&u.isMasked(e)&&u.unmask(e)}return}l.push({id:t[d].options.grid.id,type:t[d].options.grid.type})}r.removeChangeOrchestration(i,l).then(function(i){if(n){for(var s=0;s<t.length;s++)e.treeDocument.removeRoot(t[s]);0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"})}else{var r=t[0].getParent();r.prepareUpdate();for(s=0;s<t.length;s++)r.removeChild(t[s]);r.pushUpdate()}if(o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&u.isMasked(e)&&u.unmask(e)}c.success(a.CHG_GOV_ChangeOrchestration_Toolbar_Remove_Success)},function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("coOrchestration");e&&u.isMasked(e)&&u.unmask(e)}})}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return C}),define("DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridView","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/facets/changeOrchestration/ChgOrchestrationDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/util/ChgOrchestrationFeatureUtil","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y,E){"use strict";var O={contextId:null,treeDocument:null,accessBit:null,createChangeOrchestrationView:function(t,o){var r=this;t.target.setStyles({position:"relative"}),r.contextId=t.id,r.contextDetails=t.contextDetails,r.target=t.target;var l=t.contextDetails.access,d={};d=UWA.merge(d,t),p.makeDroppable(d.target,r.dropHandler),d.modelEvents=o,this.modelEvents=o,d.columns=i.getColumns(),r.ChgOrchestrationDataGridModel=new n(d.id,d.contextDetails),r.treeDocument=d.treeDocument=r.ChgOrchestrationDataGridModel.createTreeDocument(),r.ChgOrchestrationDataGridModel.registerCustomFilter(),r.subscribeToModelEvents(d.treeDocument),r.ChgOrchestrationTreeModel=d.treeDocument;var c=new e(d);r.orchestrationGridView=c,y.showLoader(d.target,r.orchestrationGridView.loader);let u=r.orchestrationGridView.chgOrchestrationGrid;w.publish("CO-AccessBit-Update",l),a.getChangeOrchestration(t.id).then(function(e){s.processedChangeOrchestrationSummaryList(e).then(function(e){if(r.chgOrchestrationDataGridModel=new n(t.id),0==e.length){if(v.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&D.isMasked(e)&&D.unmask(e)}else y.hideLoader(d.target,r.orchestrationGridView.loader);r.modelEvents.publish({event:"showEmpty-datagrid",data:u})}y.fetchMaturityStateCSS(e),r.chgOrchestrationDataGridModel.loadChangeOrchestrationData(d.treeDocument,e);var i=s.getDefaultFilter(d.columns);d.treeDocument.setFilterModel(i),r.orchestrationGridView.loadCustomColumns(),d.isSelected&&"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgOrchestrationTreeModel)}),0==d.treeDocument.getChildren().length?d.treeDocument._modelEvents.publish({event:"treeEmpty"}):d.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),O.changeView(),y.hideLoader(d.target,r.orchestrationGridView.loader)})},function(e){if(v.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("coOrchestrationFullViewContainer");e&&D.isMasked(e)&&D.unmask(e)}else y.hideLoader(d.target,r.orchestrationGridView.loader);return Promise.reject(e)})},dropHandler(e){console.log("dropHandler called"+e);var t=O.ChgOrchestrationDataGridModel.treeDocument,i=v.getGlobalVariable().subTypes;O.draggedObj=[];for(let t of e)i.includes(t.objectType)||O.draggedObj.push(t.objectId);if(t.getSelectedNodes().length>1)l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else if(1==t.getSelectedNodes().length&&t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else if(e.length==O.draggedObj.length)l.error(r.CHG_GOV_Drop_Not_Supported);else{var n=[];let i=[];for(var o=0;o<e.length;o++)O.draggedObj.includes(e[o].objectId)||i.push(e[o]);for(o=0;o<i.length;o++)n.push({id:i[o].objectId,type:i[o].objectType});if(0!=n.length||0!=O.draggedObj.length){var s,d,c=[{label:r.CHG_GOV_OK_Button_Label,handler:function(){if(n.length&&O.ChgOrchestrationDataGridModel.addExistingChildren(n),O.draggedObj.length){let e=[],i="",n={orchestrateItemIds:O.draggedObj,dispatchMethodKind:"ORGANIZATIONANDCOLLABSPACE"};e.push(n),i=0===t.getSelectedNodes().length?O.ChgOrchestrationDataGridModel.contextDetails.id:t.getSelectedNodes()[0].options.grid.id,a.orchestrateChangeOrder(e,i).then(function(e){!0===e.success&&(0===t.getSelectedNodes().length?I("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh():t.getSelectedNodes()[0].expand())})}g.closeDialog()},className:"primary"},{label:r.CHG_GOV_CANCEL_Button_Label,handler:function(){g.closeDialog()},className:"default"}];if(0===t.getSelectedNodes().length?(s=O.ChgOrchestrationDataGridModel.contextDetails.name,d=O.ChgOrchestrationDataGridModel.contextDetails.title):(s=t.getSelectedNodes()[0].options.grid.name,d=t.getSelectedNodes()[0].options.grid.title),v.getGlobalVariable().is3DSpace&&null!=window.parent.currentBC.label){s=window.parent.currentBC.label;var u=r.CHG_GOV_ChangeOrchestration_Drop_Content+"("+s+")<br>"+r.CHG_GOV_ChangeOrchestration_Drop_Confirmation}else u=r.CHG_GOV_ChangeOrchestration_Drop_Content+d+"("+s+")<br>"+r.CHG_GOV_ChangeOrchestration_Drop_Confirmation;var p={title:r.CHG_GOV_ChangeOrchestration_Drop_Info_Title,content:u,buttonArray:c};g.launchInfoDailog(p)}}},refreshLayout:function(e){var t=this.ChgOrchestrationTreeModel;(new n).updateNodeIndexed(t,e)},addNodesInLayout:function(e){O.ChgOrchestrationDataGridModel.addNodesInLayoutModel(this.ChgOrchestrationTreeModel,e,!0)},refreshGrid:function(e,t,i,n){},changeView:function(e){try{if(v.getGlobalVariable().is3DSpace){let e=O.treeDocument.getAllDescendants();for(var t of(O.treeDocument.prepareUpdate(),e)){let e='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+t.options.grid.id+"\"'>"+UWA.String.escapeHTML(t.options.grid.title)+"</a>";t.updateOptions({label:e})}O.treeDocument.pushUpdate()}}catch(e){console.log(e)}i.changeView("GridView")},mergeChangeAction:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Merge Action"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=O.treeDocument.getSelectedNodes();O.treeDocument.unselectAll();const i=[];for(let e of t)i.push(e.options.grid.id);let n=[],o={changeActionIds:i};n.push(o),a.mergeChangeAction(n).then(function(e){a.getNewCADetails(e.data[0].id).then(function(e){var i=s.processChangeActionInContext(e).processData;O.addNodesInLayout(i);for(let e of t)e.updateOptions({grid:{maturityNLS:"Canceled",maturityWithBadge:"Canceled"}})})})},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){t.hideEmptyView()}),w.unsubscribe(`${e.options.id}:${widget.id}`),w.subscribe(`${e.options.id}:${widget.id}`,function(){"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgOrchestrationTreeModel)})}),w.unsubscribe(`${e.options.id} of ${widget.id}`),w.subscribe(`${e.options.id} of ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.filterView(t,e)}),w.unsubscribe(`${e.options.id} colorize ${widget.id}`),w.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.enableColorizeView(t,e)}),w.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),w.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){O.chgOrchestrationDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("COOrchestration-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"COOrchestration-DataGrid-on-dblclick"},function(e){if(v.getGlobalVariable().is3DSpace){I("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else if("ChangeOrder"==e.model.isKindOfType||"ChangeRequest"==e.model.isKindOfType||"ChangeAction"==e.model.isKindOfType){let t,i={level:"root"},n=!1,o=C.getRouter().getState().name;o.includes(m.ROUTE_CO_DETAILS)?o==m.ROUTE_CO_DETAILS||o==m.ROUTE_CO_DETAILS_LEVEL3PLUS?1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL1,i.level1Node={id:e.model.id,title:e.model.title},i.level="level1"):2==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level1Node=e.parentModel,i.level="level2"):3==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level1Node=e.gradParentModel,i.level="level3"):n=!0:o==m.ROUTE_CO_ORCHESTRATION_LEVEL1?1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):2==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level="level3"):n=!0:o==m.ROUTE_CO_ORCHESTRATION_LEVEL2&&(1==e.pathlength?(t=m.ROUTE_CO_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0):o.includes(m.ROUTE_CR_DETAILS)&&(o==m.ROUTE_CR_ORCHESTRATION_LEVEL1?1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):2==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level="level3"):n=!0:o==m.ROUTE_CR_ORCHESTRATION_LEVEL2&&(1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0)),1!=n&&o!=m.ROUTE_CO_ORCHESTRATION_LEVEL3||(t=e.model&&"ChangeOrder"==e.model.isKindOfType?m.ROUTE_CO_DETAILS_LEVEL3PLUS:e.model&&"ChangeAction"==e.model.isKindOfType?m.ROUTE_CA_DETAILS:m.ROUTE_CR_DETAILS,(i=e).level="root"),C.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:i})}else O.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("co-orchestration-object-selection-update")]||this.modelEvents.subscribe({event:"co-orchestration-object-selection-update"},function(e){O.handleObjectSelectionUpdate(e)}),w.subscribe(`coOrchestration:${widget.id}`,function(){if(Object.keys(i.orchestrationGridView.options.treeDocument.getXSO()._items).length>0){let e=i.orchestrationGridView.options.treeDocument.getXSO()._items;for(let t in e)i.orchestrationGridView.onSelectionChange(i.orchestrationGridView._modelEvents,e[t],i.orchestrationGridView.id,i.orchestrationGridView.options.contextDetails.isKindOfType,!0)}else i.orchestrationGridView.onSelectionChange(i.orchestrationGridView._modelEvents,i.orchestrationGridView.options.treeDocument._getTrueRoot(),i.orchestrationGridView.id,i.orchestrationGridView.options.contextDetails.isKindOfType,!1)})},createChangeActionInContext:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>New Change Action"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=O.ChgOrchestrationTreeModel;if(t.getSelectedNodes().length)if(t.getSelectedNodes().length>1||t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)t.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let e={parentID:t.getSelectedNodes()[0].options.grid.id};d.createNewChangeActionInContext(e)}else{let e={parentID:O.contextId};d.createNewChangeActionInContext(e)}},createChangeOrderInContext:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>New Change Order"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=O.ChgOrchestrationTreeModel;if(t.getSelectedNodes().length)if(t.getSelectedNodes().length>1||t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)t.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let e={parentID:t.getSelectedNodes()[0].options.grid.id};d.createNewChangeOrderInContext(e)}else{let e={parentID:O.contextId};d.createNewChangeOrderInContext(e)}},addExistingHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Add Existing"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t={condition:"addExistingOrchestration",extendedQuery:'AND (NOT ecm_95_ca_95_has_95_governing_95_co:"TRUE") AND ( NOT ecm_95_co_95_has_95_governing_95_co:"TRUE") AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold" AND NOT current:"Cancelled") NOT (physicalid:'+O.contextId+")"};var i=O.ChgOrchestrationTreeModel;if(0===i.getSelectedNodes().length||1===i.getSelectedNodes().length&&!i.getSelectedNodes()[0].options.grid.isKindOfChangeAction)if(v.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();var n=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,O.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n),showChooser("../common/emxFullSearch.jsp?field=TYPES=Change Action,Change Order&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630)}else{var a=o.activateSearch();o.search("Add Existing","Change Action, Change Order",O.OnSearchComplete,"changeOrchestration",a,void 0,void 0,t)}else i.getSelectedNodes().length&&i.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed)},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][0],type:e[i][2]});t.length&&O.ChgOrchestrationDataGridModel.addExistingChildren(t)},removeHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Remove"}};if(I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes().length)if(v.getGlobalVariable().is3DSpace){let e=document.getElementById("coOrchestrationFullViewContainer");e&&D.mask(e)}else{let e=document.getElementById("coOrchestration");e&&D.mask(e)}O.ChgOrchestrationDataGridModel.removeChildren()},deleteHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Change Orchestration",action:"CO>Change Orchestration>Delete"}};I("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();if(t.length){for(var i=[],n=0;n<t.length;n++){var o=t[n],a={physicalid:o.options.grid.id,nodeName:o.options.grid.name,nodeTitle:o.options.grid.title};i.push(a)}var s=document.getElementById("outer-orchestration-grid-div");u.deleteNodes(i,s,O.removeDeletedNodesUsingIDs)}},globalSubscribeForCOOrchestrationView:function(){h.addObserver("ChgOrchestrationDataGridLayout","ENOLC_MOVE_CMD_UPDATE",O.handleCOOrchestrationViewTransfer),h.addObserver("ChgOrchestrationDataGridLayout","CO-AccessBit-Update",O.handleAccessBitUpdate),h.addObserver("ChgOrchestrationDataGridLayout","CO-Properties-Update",O.handlePropertiesUpdate),h.addObserver("ChgOrchestrationDataGridLayout","Lifecycle.Modification",O.handleForMaturityUpdate)},handlePropertiesUpdate:function(e){var t=O.ChgOrchestrationTreeModel;t&&E.handlePropertiesOnUpdate(t,e)},handleCOOrchestrationViewTransfer:function(e){var t,n,o=O.ChgOrchestrationTreeModel.getAllDescendants(),a=[];Object.keys(e.data.attributes).forEach(function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)});for(var s=0;s<a.length;s++){t=a[s];for(var r=0;r<o.length;r++){if(o[r].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;o[r].options.grid.owner=l;var d=t.newOwnerFullName}if(t.newOrganization){var c=t.newOrganization;o[r].options.grid.orgnaizationNLS=c}if(t.newCollabSpace){var u=t.newCollabSpace;o[r].options.grid.collabspaceNLS=u}""==t.newOwnerId?(l=o[r].options.grid.owner,d=o[r].options.grid.ownerFullName,n=i.createCustomOwner(l,d)):n=i.createCustomOwner(l,d);var p=o[r].options.grid.name,g={};g.name=p,g.title=o[r].options.grid.title,g.severity=o[r].options.grid.severity,g.severityNLS=o[r].options.grid.severityNLS,g.ownerFullName=d,g.maturityNLS=o[r].options.grid.maturityNLS;var h=O.ChgOrchestrationDataGridModel.getCustomTooltip(g),m=p+" | "+d;o[r].updateOptions({label:o[r].options.grid.title,grid:{collabspaceNLS:o[r].options.grid.collabspaceNLS,organizationNLS:o[r].options.grid.organizationNLS,owner:o[r].options.grid.ownerFullName,chgObjOwner:n},customTooltip:h,subLabel:m})}}}},handleAccessBitUpdate:function(e){e.id==O.contextId&&("false"==e.accessBits.ManageGovernedChanges?(O.accessBit=!1,O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!1})):(O.accessBit=!0,O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!0})))},handleObjectSelectionUpdate:function(e){e.count>1?O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{disabled:!1}):O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{disabled:!0}),0===e.count?(O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{disabled:!0}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{disabled:!0})):(O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{disabled:!1}),O.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{disabled:!1}))},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];O.ChgOrchestrationTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==O.ChgOrchestrationTreeModel.getChildren().length&&O.ChgOrchestrationTreeModel._modelEvents.publish({event:"treeEmpty"})},handleForMaturityUpdate:function(e){if(e){let t=O.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();y.getHandleForMaturityUpdate(JSON.parse(e),t)}}};return O.globalSubscribeForCOOrchestrationView(),O}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMemberFilterLayout","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgAddMemberLayout","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersFeaturesUtil","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","DS/CollectionView/modelProviders/CollectionViewTreeDocumentModelProvider","require","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCOAddMemberHandler"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";return e.extend({init:function(e){this._parent(e);var t=this;this._modelEvents=null,this._modelEvents=e.contextDetails._modelEvents,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),g.subscribe("idcard-header-minified",function(e){e.value?(t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").addClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("minified-header-height")):(t.membersDatagridView.getElement(".content-member-grid-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,g={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return l.showRMBMenuOnGrid(t,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){d.readyDragContent(e,t)},onDragStartCell:function(e,t){d.readyDragContent(e,t)}};g=UWA.merge(g,this.options);var m={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.membersDatagrid=new n(g),this.membersDatagrid.rowSelection="single",this.membersDatagrid.cellSelection="none";let N=this.membersDatagrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:N});let A=h.inherit({name:"DocumentThumbnailViewTreeDocumentModelProvider",getPropertyValue:function(e,t){return"picture"===t&&e.options.thumbnail.cloneNode?e.options.thumbnail.cloneNode(!0):this._parent(e,t)}});this.tileView=new o(m),t.tileView.modelProvider=new A;var v={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return l.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tileView.onContextualEvent=v;var D={expandInput:{stdTemplate:"expandInputtemplate"}},b={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new p}catch(e){console.log(e)}this.membersDatagrid.getTypeRepresentationFactory().registerTypeTemplates(b),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(D),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),a.toolbar=this.membersDatagrid.setToolbar(a.writetoolbarDefinition()),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(b),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(D);t=this;this.membersDatagrid.addEventListener("allCellsRendered",function(){t.membersDatagrid.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.membersDatagrid.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.membersDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}));if(e.getTreeDocument()){const i=e.getTreeDocument().getSelectedNodes().length;t._modelEvents.publish({event:"co-members-object-selection-update",data:{count:i}})}}),t.membersDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}));0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"co-members-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),t.membersDatagrid.addEventListener(i.POINTERHIT,function(e,i){console.log(">>>>>>>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("ca-DataGrid-on-dblclick"),i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.membersDatagridView=UWA.createElement("div",{id:"outer-member-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-member-grid-div"});var w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-member-grid-div"});this.toolbar.inject(w);var S=UWA.createElement("div",{class:"content-member-grid-div expanded-header-height"}),I=UWA.createElement("div",{class:"content-member-tile-div membertileView expanded-header-height"}),_=UWA.createElement("div",{styles:{position:"relative"},class:"content-member-filter-div memberfilterView hideView"}),y=UWA.createElement("div",{styles:{position:"relative"},class:"content-add-member-div addmemberView hideView"}),E=UWA.createElement("div",{class:"hideView",id:"memberEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(E);var O={target:_,model:this.options.treeDocument},G={id:this.options.contextDetails.id,target:y,model:this.options.treeDocument};s.createMemberFilter(O);let T=!1;"true"===C.getGlobalVariable().ECM_EnableAddMemberGenericComponent&&(T=!0),T?f.getDataToBuildAddMemberPanel(G):r.createAddMemberPanel(G),this.membersDatagrid.inject(S),this.tileView.inject(I),E.inject(I),this.membersDatagridView.addContent(w),this.membersDatagridView.addContent(_),this.membersDatagridView.addContent(y),this.membersDatagridView.addContent(S),this.membersDatagridView.addContent(I)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/components/tab/ChgGovernanceTab",["UWA/Core","DS/CoreEvents/ModelEvents","DS/Controls/Tab","DS/Controls/Button","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager"],function(e,t,i,n,o,a,s,r,l,d,c,u,p){"use strict";return{createGovTab:function(t,n){for(var o=new i({displayStyle:"strip"}),g=0;g<n.tabs.length;g++)"crApprovals"!=n.tabs[g].value&&"caApprovals"!=n.tabs[g].value&&"coApprovals"!=n.tabs[g].value&&1==n.tabs[g].isSelected&&n.targetHeader&&n.targetHeader.setStyle("display","none");o.addEventListener("tabButtonClick",function(e){this._pathChangeOrdersDetails=[s._KEY,s._VIEWS_PREFERENCES,s._CHANGE_ORDERS_DETAILS],"coOrchestration"==e.options.value?(a.updateTab(this._pathChangeOrdersDetails,"ChangeOrchestration"),n.targetHeader.setStyle("display","none"),c.publish(`coOrchestration:${widget.id}`,{})):"coMembers"==e.options.value?(a.updateTab(this._pathChangeOrdersDetails,"Members"),n.targetHeader.setStyle("display","none"),c.publish(`coMembers:${widget.id}`,{})):"coApprovals"==e.options.value?(a.updateTab(this._pathChangeOrdersDetails,"Approvals"),n.targetHeader.setStyle("display","inline-block"),c.publish(`coApprovals:${widget.id}`,n),r.clearTags()):a.updateTab(this._pathChangeOrdersDetails,"ChangeOrchestration")}),o.addEventListener("tabButtonClick",function(e){this._pathChangeRequestsDetails=[s._KEY,s._VIEWS_PREFERENCES,s._CHANGE_REQUESTS_DETAILS],"crChangeOrchestration"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crOrchestration"),n.targetHeader.setStyle("display","none"),c.publish(`crOrchestration:${widget.id}`,{})):"crMembers"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crMembers"),n.targetHeader.setStyle("display","none"),c.publish(`crMembers:${widget.id}`,{})):"crAffectedItems"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crAffectedItems"),n.targetHeader.setStyle("display","none"),c.publish(`crAffectedItems:${widget.id}`,{})):"crAssessment"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crAssessment"),n.targetHeader.setStyle("display","none"),c.publish(`crImpactAnalysis:${widget.id}`,{})):"crApprovals"==e.options.value?(a.updateTab(this._pathChangeRequestsDetails,"crApprovals"),c.publish(`crApprovals:${widget.id}`,n),l.clearTags(),n.targetHeader.setStyle("display","inline-block")):a.updateTab(this._pathChangeRequestsDetails,"crOrchestration")}),o.addEventListener("tabButtonClick",function(t){if(this._pathChangeActionsDetails=[s._KEY,s._VIEWS_PREFERENCES,s._CHANGE_ACTIONS_DETAILS],"caProposedChange"==t.options.value){a.updateTab(this._pathChangeActionsDetails,"ProposedChange"),n.targetHeader.setStyle("display","none");let t=u.getUserPreference(p.keys.viewKeys.PROPOSED_DEF_VIEW);e.is(t)&&"DGV"===t?c.publish(`caProposedChangesDGV:${widget.id}`,{}):c.publish(`caProposedChanges:${widget.id}`,{})}else if("caRealizedChange"==t.options.value){a.updateTab(this._pathChangeActionsDetails,"RealizedChange"),n.targetHeader.setStyle("display","none");let t=u.getUserPreference(p.keys.viewKeys.REALIZED_DEF_VIEW);e.is(t)&&"DGV"===t?c.publish(`caRealizedChangesDGV:${widget.id}`,{}):c.publish(`caRealizedChanges:${widget.id}`,{})}else"caMembers"==t.options.value?(a.updateTab(this._pathChangeActionsDetails,"Members"),n.targetHeader.setStyle("display","none"),c.publish(`caMembers:${widget.id}`,{})):"caApprovals"==t.options.value?(a.updateTab(this._pathChangeActionsDetails,"Approvals"),n.targetHeader.setStyle("display","inline-block"),c.publish(`caApprovals:${widget.id}`,n),d.clearTags()):a.updateTab(this._pathChangeActionsDetails,"ProposedChange")}),o.addEventListener("tabButtonClick",function(e){this._pathInvestigationRequestsDetails=[s._KEY,s._VIEWS_PREFERENCES,s._INVESTIGATION_REQUESTS_DETAILS],"irAffectedItems"==e.options.value?(a.updateTab(this._pathInvestigationRequestsDetails,"irAffectedItems"),c.publish(`irAffectedItems:${widget.id}`,{})):"irMembers"==e.options.value?(a.updateTab(this._pathInvestigationRequestsDetails,"irMembers"),c.publish(`irMembers:${widget.id}`,{})):"irAttachments"==e.options.value?(a.updateTab(this._pathInvestigationRequestsDetails,"irAttachments"),c.publish(`irAttachments:${widget.id}`,{})):a.updateTab(this._pathInvestigationRequestsDetails,"irAffectedItems")}),n.tabs.forEach(function(e){o.add(e)}),c.subscribe("openIRAttachmentsTab",function(e){let t=[s._KEY,s._VIEWS_PREFERENCES,s._INVESTIGATION_REQUESTS_DETAILS];o.value=["irAttachments"],a.updateTab(t,"irAttachments"),c.publish(`irAttachments:${widget.id}`,{})}),c.subscribe("openIRAffectedItemsTab",function(e){let t=[s._KEY,s._VIEWS_PREFERENCES,s._INVESTIGATION_REQUESTS_DETAILS];o.value=["irAffectedItems"],a.updateTab(t,"irAffectedItems"),c.publish(`irAffectedItems:${widget.id}`,{})}),c.subscribe("openIRIssuesTab",function(e){let t=[s._KEY,s._VIEWS_PREFERENCES,s._INVESTIGATION_REQUESTS_DETAILS];o.value=["irIssues"],a.updateTab(t,"irIssues"),c.publish(`irIssues:${widget.id}`,{})}),o.inject(t)}}}),define("DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil",["DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant"],function(e,t,i){"use strict";return{createProbesData:function(n,o){var a={};let s="",r="",l="";var d=t.getRouteInfo("ChgGovPreferenceConstant._LAST_ROUTE");if("home.CRInfo.CRDetails"===d.name){let r=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_REQUESTS_DETAILS];s=t.getTab(r),a.commandInfo={},a.commandInfo.type="Change Request",s&&"crAffectedItems"===s?(a.commandInfo.facet="Affected Items","Download"===n?a.commandInfo.action="CR>Affected Items>RMB>Download":"Preview"===n?a.commandInfo.action="CR>Affected Items>RMB>Preview":"Information"===n?a.commandInfo.action="CR>Affected Items>RMB>Information":"Maturity"===n?a.commandInfo.action="CR>Affected Items>RMB>Maturity":"OpenWith"===n&&(a.commandInfo.action="CR>Affected Items>RMB>OpenWith>"+o)):s&&"crAssessment"===s?(a.commandInfo.facet="Impact Analysis","Information"===n?a.commandInfo.action="CR>Impact Analysis>RMB>Information":"Maturity"===n?a.commandInfo.action="CR>Impact Analysis>RMB>Maturity":"Copy Link"===n&&(a.commandInfo.action="CR>Impact Analysis>RMB>Copy Link")):s&&"crOrchestration"===s&&(a.commandInfo.facet="Change Orchestration","Information"===n?a.commandInfo.action="CR>Change Orchestration>RMB>Information":"Maturity"===n?a.commandInfo.action="CR>Change Orchestration>RMB>Maturity":"Copy Link"===n?a.commandInfo.action="CR>Change Orchestration>RMB>Copy Link":"OpenWith"===n&&(a.commandInfo.action="CR>Change Orchestration>RMB>OpenWith>"+o)),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:a})}else if("home.COInfo.CODetails"===d.name){let s=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_ORDERS_DETAILS];r=t.getTab(s),a.commandInfo={},a.commandInfo.type="Change Order",r&&"ChangeOrchestration"===r&&(a.commandInfo.facet="Change Orchestration","Information"===n?a.commandInfo.action="CO>Change Orchestration>RMB>Information":"Maturity"===n?a.commandInfo.action="CO>Change Orchestration>RMB>Maturity":"Copy Link"===n?a.commandInfo.action="CO>Change Orchestration>RMB>Copy Link":"OpenWith"===n&&(a.commandInfo.action="CO>Change Orchestration>RMB>OpenWith>"+o)),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:a})}else if("home.CAInfo.CADetails"===d.name){let s=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_ACTIONS_DETAILS];l=t.getTab(s),a.commandInfo={},a.commandInfo.type="Change Action",l&&"RealizedChange"===l&&(a.commandInfo.facet="Realized Changes","Information"===n?a.commandInfo.action="CA>Realized Changes>DGV>RMB>Information":"OpenWith"===n?a.commandInfo.action="CA>Realized Changes>DGV>RMB>OpenWith>"+o:"Relations"===n&&(a.commandInfo.action="CA>Realized Changes>DGV>RMB>Relations")),e.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:a})}}}}),define("DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/util/ProbesRMBCommandUtil","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o){"use strict";return{getDownloadMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Download,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-download"},action:{callback:function(){n.createProbesData("Download"),o.download(e)}}}},getPreviewMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Preview,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x fonticon-eye"},action:{callback:function(){n.createProbesData("Preview"),i.preview(e)}}}}}}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d){"use strict";var c=s.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}});return e.extend({init:function(e){this._parent(e)},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return this.setTreeDocument(i),i},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",c)},createCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.Title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.Name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.Severity+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.Owner+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.State},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(i),i.outerHTML}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";var h={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let c=!1,u=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),p=[],g=[],m=[];u.forEach(e=>{p.push(e.options.grid.id),g.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&m.push(e.options.grid.serviceBasedObjId)}),u.length>1&&(c=!0);const C=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),f=e.cellInfos.nodeModel.options.grid.id,v=e.cellInfos.nodeModel.options.grid.type,D=e.cellInfos.nodeModel.options.grid.name,b=e.cellInfos.nodeModel.options.grid.displayType,w=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,S=[];S.push(v),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&S.concat(e.cellInfos.nodeModel.options.grid.kind);const I={objectId:null!=w?w:f,objectType:v,objectTaxonomies:S,displayName:D,displayType:b,facetName:"dependency"};let _={};_.objectID=f,_.objectTitle=D,_.objectType=v,_.serviceId="3DSpace",_.label=e.cellInfos.nodeModel.options.grid.title,_.changeType="Investigation Request",_.facet="Affected Items",_.action="IR>Change Impacts";const y=C.openWith(I);let E={};E.objectID=f,E.objectTitle=D;var O=!1;"true"===o.getGlobalVariable().ECM_EnableChangeImpactsEnforcementForCR&&(O=!0),c?(m.length>0&&a.push(n.createPropertyPushItem(m)),a.push(h.getRelationalExplorerMenu(g)),m.length>0&&(a.push(r.getDownloadMenu(m)),!m.length>1&&a.push(r.getPreviewMenu(m))),t(a)):(m.length>0&&a.push(n.createPropertyPushItem(m)),a.push(h.getRelationalExplorerMenu(g)),y.then(e=>{e&&a.push(e),m.length,O&&a.push(d.getChangeImpacts(_)),s.getDocuments(m).then(function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(a.push(r.getDownloadMenu(m)),a.push(r.getPreviewMenu(m))),t(a)}).catch(e=>{console.log(e),t(a)})}))})},showRMBMenuOnGridForDispositionCell:async function(e,t,i){let o=[];try{e.cellInfos.nodeModel.options.grid.approvalStatusModel&&await g.getColumnApprovalStatusMenu(e.cellInfos.nodeModel.options.grid.approvalStatusModel).then(function(e){o.push(e)})}catch(e){console.error(e)}return new Promise(function(a,s){let r=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();e.cellInfos.nodeModel.getTreeDocument(),r[0]._options.grid.dispositionInformation&&r[0]._options.grid.dispositionInformation[0].dispostionId,r[0]._options.grid.dispositionInformation&&r[0]._options.grid.dispositionInformation[0].approvers;const l=[];let d=void 0,c=e.cellInfos.nodeModel.options.grid.dispositionInformation;if(c&&c[0]&&c[0].dispostionId){let s=e.cellInfos.nodeModel.options.grid.id,r=[];r.push(s),d=c[0].dispostionId;let u=[];if(u.push(d),l.push(n.createPropertyPushItem(u)),l.push(h.getRelationalExplorerMenu(u)),l.push(p.reviseDisposition(u[0],r,e)),l.push(p.replaceDisposition(t,u[0],r,e)),l.push(p.removeDisposition(u[0],r,e,i)),l.push(p.getDispositionTransferMenu(e)),o.length>0)for(let e=0;e<o[0].length;e++)l.push(o[0][e]);a(l)}else a(l)})},showRMBMenuOnGridForResolvedByCell:function(e){return new Promise(function(t,i){const o=[];let a=e.cellInfos.nodeModel.options.grid.dispositionInformation;if(a&&a[0]&&a[0].resolvedByInformation&&a[0].resolvedByInformation[0]){let i=void 0;if(a[0].resolvedByInformation[0].indexResolvedBy&&a[0].resolvedByInformation[0].indexResolvedBy[0]?i=a[0].resolvedByInformation[0].indexResolvedBy[0]:a[0].resolvedByInformation[0].non3DSpaceNonIndexedResolvedBy&&a[0].resolvedByInformation[0].non3DSpaceNonIndexedResolvedBy[0]&&(i=a[0].resolvedByInformation[0].non3DSpaceNonIndexedResolvedBy[0]),null!=i){let s=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),r=a[0].dispostionId,d=i.resolvedById,c=i.resolvedByName,u=i.resolvedByType,g=[];g.push(d),o.push(n.createPropertyPushItem(g)),o.push(h.getRelationalExplorerMenu(g)),o.push(p.removeResolvedBy(r,g,e));let m={objectId:d,objectType:u,displayName:c,displayType:u},C=[],f=s.openWith(m);C.push(f),Promise.all(C).then(function(e){console.log(e),e[0]&&o.push(e[0]),t(o)})}else t(o)}else t(o)})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Move"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)"CSD"!=n[a].options.grid.sourceType&&o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(o)})}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_CA_Header_Change_Impacts,fonticon:{family:1,content:"ChangeImpact"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Change Impacts"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Relations"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}},getManageApprovers:function(e){return{id:"ManageApprovers",type:"PushItem",title:t.CHG_GOV_Disposition_ManageApprovers,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-user-pencil"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"IR>Affected Items>RMB>ManageApprovers"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),l("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout").addApproverHandler(e)}}}}};return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const o=[];let a=!1,c=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),u=[],g=[],h=[];c.forEach(e=>{u.push(e.options.grid.id),g.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&h.push(e.options.grid.serviceBasedObjId)}),c.length>1&&(a=!0);const m=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),C=e.cellInfos.nodeModel.options.grid.id,f=e.cellInfos.nodeModel.options.grid.type,v=e.cellInfos.nodeModel.options.grid.name,D=e.cellInfos.nodeModel.options.grid.displayType,b=e.cellInfos.nodeModel.options.grid.serviceBasedObjId;let w=[];w.push(f),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(w=w.concat(e.cellInfos.nodeModel.options.grid.kind));const S={objectId:null!=b?b:C,objectType:f,objectTaxonomies:w,displayName:v,displayType:D,facetName:"dependency"},I=m.openWith(S);let _={};_.objectID=C,_.objectTitle=v,_.objectType=f,_.serviceId="3DSpace",_.label=e.cellInfos.nodeModel.options.grid.title,_.changeType="Change Request",_.facet="Affected Items",_.action="CR>Change Impacts",a?(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(p.getRelationalExplorerMenu(g)),h.length>0&&(o.push(d.getMaturityMenu(void 0,h)),o.push(p.getTransferMenu(e)),o.push(r.getDownloadMenu(h)),!h.length>1&&o.push(r.getPreviewMenu(h))),t(o)):(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(p.getRelationalExplorerMenu(g)),I.then(i=>{i&&o.push(i),h.length>0&&(o.push(d.getMaturityMenu(e)),o.push(p.getTransferMenu(e))),o.push(p.getChangeImpacts(_)),s.getDocuments(h).then(function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(o.push(r.getDownloadMenu(h)),o.push(r.getPreviewMenu(h))),t(o)}).catch(e=>{console.log(e),t(o)})}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Move"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)"CSD"!=n[a].options.grid.sourceType&&o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(o)})}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_CA_Header_Change_Impacts,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Change Impacts"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Relations"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return p}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const o=[];let a=!1,c=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),u=[],g=[],h=[];c.forEach(e=>{u.push(e.options.grid.id),g.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&h.push(e.options.grid.serviceBasedObjId)}),c.length>1&&(a=!0);c.map(e=>({physicalid:e.options.grid.id,nodeName:e.options.grid.name,nodeTitle:e.options.grid.title}));const m=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),C=e.cellInfos.nodeModel.options.grid.id,f=e.cellInfos.nodeModel.options.grid.type,v=e.cellInfos.nodeModel.options.grid.name,D=e.cellInfos.nodeModel.options.grid.displayType,b=e.cellInfos.nodeModel.options.grid.serviceBasedObjId;let w=[];w.push(f),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(w=w.concat(e.cellInfos.nodeModel.options.grid.kind));const S={objectId:null!=b?b:C,objectType:f,objectTaxonomies:w,displayName:v,displayType:D,facetName:"dependency"},I=m.openWith(S);let _={};_.objectID=C,_.objectTitle=v,_.objectType=f,_.serviceId="3DSpace",_.label=e.cellInfos.nodeModel.options.grid.title,_.changeType="Change Request",_.facet="Impacted Items",_.action="CR>Change Impacts",a?(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(p.getRelationalExplorerMenu(g)),h.length>0&&(o.push(d.getMaturityMenu(void 0,h)),o.push(p.getTransferMenu(e)),o.push(r.getDownloadMenu(h)),!h.length>1&&o.push(r.getPreviewMenu(h))),t(o)):(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(p.getRelationalExplorerMenu(g)),I.then(i=>{i&&o.push(i),h.length>0&&(o.push(d.getMaturityMenu(e)),o.push(p.getTransferMenu(e))),o.push(p.getChangeImpacts(_)),s.getDocuments(h).then(function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(o.push(r.getDownloadMenu(h)),o.push(r.getPreviewMenu(h))),t(o)}).catch(e=>{console.log(e),t(o)})}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)"LEGACY_3DSPACE"==i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_CA_Header_Change_Impacts,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Impacted Items",action:"CR>Impacted Items>RMB>Change Impacts"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}}};return p}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemReportViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b){"use strict";return e.extend({init:function(e){this._parent(e);let i=this;this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:v.getGlobalVariable().get3DSpaceURL(),securityContext:v.getGlobalVariable().getSecurityContext(),isNative:v.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth)),C.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactedItem-tile-div").removeClassName("minified-header-height"))})},loadCustomColumns:function(){let e=D.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&b.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){let e=this.processColumns(),t=this,u={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactedItemGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return"proposedChangeAction"===e.collectionView.columns[e.cellInfos.columnID].dataIndex&&e.cellInfos.nodeModel.options.grid.proposedChangeActionsData&&1==e.cellInfos.nodeModel.options.grid.proposedChangeActionsData.length?h.getRMBProposedChangeColumn(e.cellInfos.nodeModel.options.grid.proposedChangeActionsData).then(e=>e):m.showRMBMenuOnGrid(e);e.cellInfos.rowID<0&&(t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1}))}return t},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};u=UWA.merge(u,this.options);let C={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new n(u),this.chgGridView.addEventListener("click",function(e,t){void 0!==t&&-1!==t.rowID&&("proposedChangeAction"===e.dsModel.layout.getDataIndexFromColumnIndex(t.columnID)&&t.nodeModel.options.grid.proposedChangeActionsData&&t.nodeModel.options.grid.proposedChangeActionsData.length>1&&h.getPopupProposedChangeColumn(e.target,t.nodeModel))}),this.chgGridView.cellSelection="none",this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},function(e){var i=e.query;i&&t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||!e.options.grid.name||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&e.options.grid.name&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},function(e){t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),t.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){f.onCustomViewsSave(e,i,t.options.custom_view_options)},this.tileView=new a(C),t.chgGridView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&5==t.columnID){var i={};i.cellInfos=t,f.executeMaturity(i)}};let v={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return m.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=v;let D={impact:{stdTemplate:"enumCombo",semantics:{possibleValues:{impactedKey:c.CHG_Impacted_Value,notImpactedKey:c.CHG_NotImpacted_Value},valueType:"enumValueToProperty"}}};this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations(D),this.chgGridView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),t.chgGridView.getTreeDocument().getXSO().onAdd(function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-impact-analysis-impactedItem-object-selection-update",data:{count:i,accessBits:t.options.accessBits}})}),t.chgGridView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-impact-analysis-impactedItem-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),this.options.target.getElement("div#outer-impactedItem-grid-div")&&this.options.target.getElement("div#outer-impactedItem-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactedItem-grid-div",class:"outer-impactedItem-grid-div"});let b=UWA.createElement("div",{class:"toolbar-impactedItem-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"impactedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new p({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new g({title:c.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(b),this.options.isReadOnly?this.chgGridView.setToolbar(r.writetoolbarDefinition(this.options)):this.chgGridView.setToolbar(s.writetoolbarDefinition(this.options)),this.chgGridView.getToolbar().getContent().inject(b);let w=UWA.createElement("div",{class:"content-impactedItem-grid-div expanded-header-height"}),S=UWA.createElement("div",{styles:{height:"100%"},class:"content-impactedItem-tile-div ImpactedItemTileView expanded-header-height"}),I=UWA.createElement("div",{class:"hideView",id:"impactedItemEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(I),this.chgGridView.inject(w),this.tileView.inject(S),I.inject(S),this.chgGridViewContainer.addContent(b),this.chgGridViewContainer.addContent(w),this.chgGridViewContainer.addContent(S),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=w;f.registerCustomEventsOnDGV(["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"],this.chgGridView,this.options.custom_view_options),this.loader=(new o).inject(this.options.target)},getToolbar:function(){return this.chgGridView.getToolbar()},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridContextualMenu","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S){"use strict";return e.extend({init:function(e){this._parent(e),this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:S.getGlobalVariable().get3DSpaceURL(),securityContext:S.getGlobalVariable().getSecurityContext(),isNative:S.getGlobalVariable().isNative}};var i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t;var n=this._modelEvents;this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),f.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").removeClassName("minified-header-height"))}),widget.addEvents({onSearch:function(e){n.publish({event:"cr-aff-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"cr-aff-DataGrid-on-reset-search",data:{query:e},context:i})}})},loadCustomColumns:function(){let e=b.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&w.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){try{var e=this.processColumns(),t=this,s={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgCRAffectedItemsGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>=0)return m.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){d.readyDragContent(e,t)},onDragStartCell:function(e,t){d.readyDragContent(e,t)}};s=UWA.merge(s,this.options);var u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new o(s),this.chgGridView.cellSelection="none",this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){v.onCustomViewsSave(e,i,t.options.custom_view_options)};let _=this.chgGridView;this._modelEvents.publish({event:"hideEmpty-datagrid",data:_}),this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},function(e){var i=e.query;i&&t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},function(e){t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new r(u);var C={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return m.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=C;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),l.toolbar=this.chgGridView.setToolbar(l.writetoolbarDefinition(this.options)),this.toolbar=l.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",function(){t.chgGridView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:p.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.chgGridView.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)});var f=t.chgGridView.getTreeDocument().getXSO(),D=i.debounce(function(e){e&&e.length&&(e=e[0]);var i=t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:p.CHG_GOV_StatusBar_SelectedItems+0}}));var o=f.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)},5);f.onPostAdd(D),f.onPostRemove(D),t.tileView.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount)console.log("AffectedItem_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel});else if(i&&4==i.columnID){var n={};n.cellInfos=i,v.executeMaturity(n)}},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-affectedItems-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-affectedItems-grid-div"});var b=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-affectedItems-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"affectedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new g({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new h({title:p.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(b),this.toolbar.inject(b);var w=UWA.createElement("div",{class:"content-affectedItems-grid-div expanded-header-height"}),S=UWA.createElement("div",{class:"content-affectedItems-tile-div affectedItemsTileView expanded-header-height"}),I=UWA.createElement("div",{class:"hideView",id:"affectedItemsEmptyTileViewDiv"});UWA.createElement("div",{html:p.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(I),this.chgGridView.inject(w),this.tileView.inject(S),I.inject(S),this.chgGridViewContainer.addContent(b),this.chgGridViewContainer.addContent(w),this.chgGridViewContainer.addContent(S),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=w;let y=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];v.registerCustomEventsOnDGV(y,this.chgGridView,this.options.custom_view_options),this.loader=(new a).inject(this.options.target)}catch(e){console.log(e)}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"cr-affected-item-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"cr-affected-item-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const a=[];let c=!1,u=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),g=[],h=[],m=[];u.forEach(e=>{g.push(e.options.grid.id),h.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&m.push(e.options.grid.serviceBasedObjId)}),u.length>1&&(c=!0);const C=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),f=e.cellInfos.nodeModel.options.grid.id,v=e.cellInfos.nodeModel.options.grid.type,D=e.cellInfos.nodeModel.options.grid.name,b=e.cellInfos.nodeModel.options.grid.displayType,w=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,S=[];S.push(v),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&S.concat(e.cellInfos.nodeModel.options.grid.kind);const I={objectId:null!=w?w:f,objectType:v,objectTaxonomies:S,displayName:D,displayType:b,facetName:"dependency"},_=C.openWith(I);let y={};y.objectID=f,y.objectTitle=D;var E=!1;"true"===o.getGlobalVariable().ECM_EnableChangeImpactsEnforcementForCR&&(E=!0),c?(m.length>0&&a.push(n.createPropertyPushItem(m)),a.push(p.getRelationalExplorerMenu(h)),m.length>0&&(a.push(d.getMaturityMenu(void 0,m)),a.push(p.getTransferMenu(e)),a.push(r.getDownloadMenu(m)),!m.length>1&&a.push(r.getPreviewMenu(m))),t(a)):(m.length>0&&a.push(n.createPropertyPushItem(m)),a.push(p.getRelationalExplorerMenu(h)),_.then(i=>{i&&a.push(i),m.length>0&&(a.push(d.getMaturityMenu(e)),a.push(p.getTransferMenu(e))),E&&a.push(p.getChangeImpacts(y)),s.getDocuments(m).then(function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(a.push(r.getDownloadMenu(m)),a.push(r.getPreviewMenu(m))),t(a)}).catch(e=>{console.log(e),t(a)})}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Move"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i});for(var n=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[],a=0;a<n.length;a++)"CSD"!=n[a].options.grid.sourceType&&o.push(n[a].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(o)})}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_CA_Header_Change_Impacts,fonticon:{family:1,content:"ChangeImpact"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Change Impacts"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Relations"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}}};return p}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/util/ChgChangeActionGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeAction/ChgChangeActionDataGridModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgImpactAnalysisOnCreateCA","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S){"use strict";let I={createCAView:function(t,o){var a=this;t.setStyles({position:"relative"});let s={};this.ChgChangeActionView="",(s=UWA.merge(s,o)).target=t,s.columns=i.getColumns(),this.ChgChangeActionDataGridModel=new n(s.id),this.copyOption=o,this.modelEvents=s.modelEvents,this.treeDocument=s.treeDocument=this.ChgChangeActionDataGridModel.createTreeDocument(),a.ChgCRChangeActionTreeModel=s.treeDocument,h.makeDroppable(s.target,a.dropHandler),this.subscribeToModelEvents(s.treeDocument),a.ChgChangeActionView=new e(s),D.showLoader(s.target,a.ChgChangeActionView.loader),u.getConnectedCA(o.id).then(function(e){var t=p.processedCAList(e,o.id);D.fetchMaturityStateCSS(t),a.ChgChangeActionDataGridModel=new n(o.id),a.ChgChangeActionDataGridModel.loadCAData(s.treeDocument,t);var i=p.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(i),0==s.treeDocument.getChildren().length?s.treeDocument._modelEvents.publish({event:"treeEmpty"}):s.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),I.changeView(),D.hideLoader(s.target,a.ChgChangeActionView.loader)},function(e){return D.hideLoader(s.target,a.ChgChangeActionView.loader),Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("IA-CA-Facet-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"IA-CA-Facet-DataGrid-on-dblclick"},function(e){if("ChangeAction"==e.model.isKindOfType){let t;t=v.ROUTE_CR_ORCHESTRATION_LEVEL1,f.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:{level:"level1",model:e.model,level1Node:{id:e.model.id,title:e.model.title}}})}}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-CA-object-selection-update")]||this.modelEvents.subscribe({event:"cr-CA-object-selection-update"},function(e){I.handleObjectSelectionUpdate(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CA-Creation-Update")]||this.modelEvents.subscribe({event:"CA-Creation-Update"},function(e){I.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"Add"}})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CA-Creation-Update-ImpactedItem")]||this.modelEvents.subscribe({event:"CA-Creation-Update-ImpactedItem"},function(e){if(I.copyOption&&I.copyOption.id){let e=I.copyOption.id;u.getConnectedCA(e).then(function(t){var i=p.processedCAList(t,e);I.addNodesInLayout(i)},function(e){return Promise.reject(e)})}})},dropHandler(e){for(var t=0;t<e.length;t++)if(e.length>0&&"Change Action"!=e[t].objectType)return void s.error(e[t].objectType+" "+e[t].displayName+" "+a.CHG_GOV_IA_Other_Than_CA_DragNDrop);var i=[];for(t=0;t<e.length;t++)i.push({id:e[t].objectId,type:e[t].objectType});I.ChgChangeActionDataGridModel.addExistingChildren(i)},AddNewChangeAction:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Change Action",action:"IA>Change Action>New Change Action"}};S("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});I.ChgChangeActionDataGridModel;let t={parentID:I.ChgChangeActionView.id};o.createNewChangeActionInContext(t)},addExistingHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Change Action",action:"IA>Change Action>Add Existing"}};S("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t,i="Approved";I.copyOption.grid?i=I.copyOption.grid.maturity:I.copyOption.attributes&&(i=I.copyOption.attributes.mapping.maturity.valueActual);let n={condition:"addExistingCROrchestration",extendedQuery:t="Approved"===i?' AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND ((NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"Prepare") OR (NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"In Work"))':' AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"Prepare")'};var o=I.treeDocument;if(0===o.getSelectedNodes().length||1===o.getSelectedNodes().length)if(d.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();let t;t="Approved"===i?"../common/emxFullSearch.jsp?field=TYPES=type_ChangeAction:ECM_CHG_ON_HOLD!=TRUE:CURRENT!=policy_Cancelled.state_Cancelled:CURRENT=policy_ChangeAction.state_Prepare,policy_ChangeAction.state_InWork&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e:"../common/emxFullSearch.jsp?field=TYPES=type_ChangeAction:ECM_CHG_ON_HOLD!=TRUE:CURRENT!=policy_Cancelled.state_Cancelled:CURRENT=policy_ChangeAction.state_Prepare&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,showChooser(t,850,630);var r=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,I.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",r)}else console.log("inside EVENT")};window.addEventListener("storage",r)}else{var c=l.activateSearch();l.search("Add Existing","Change Action",I.OnSearchComplete,"changeActionView",c,void 0,void 0,n)}else o.getSelectedNodes().length&&o.getSelectedNodes().length>0?s.error(a.CHG_GOV_ChangeRequest_IA_Toolbar_SubCA):s.error(a.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed)},OnSearchComplete:function(e){let t=I.ChgChangeActionDataGridModel;for(var i=[],n=0;n<e.length;n++)i.push({id:e[n][0],type:e[n][2]});i.length&&t.addExistingChildren(i)},removeHandlerCR:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Change Action",action:"IA>Change Action>Remove"}};S("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=I.treeDocument.getSelectedNodes().length&&I.ChgChangeActionDataGridModel.removeChildren(I.treeDocument)},addNodesInLayout:function(e){I.ChgChangeActionDataGridModel.addNodesInLayoutModel(this.treeDocument,e)},removeHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Change Action",action:"IA>Change Action>Delete"}};S("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("deleteHandler!");var t=I.treeDocument.getSelectedNodes();if(t.length){for(var i=[],n=0;n<t.length;n++){var o=t[n],a={physicalid:o.options.grid.id,nodeName:o.options.grid.name,nodeTitle:o.options.grid.title};i.push(a)}var s=document.getElementById("outer-CA-grid-div");g.deleteNodes(i,s,I.removeDeletedNodesUsingIDs)}},removeDeletedNodesUsingIDs:function(e){I.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"delete"}});for(var t=0;t<e.length;t++){var i=e[t];I.treeDocument.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==I.treeDocument.getChildren().length&&I.treeDocument._modelEvents.publish({event:"treeEmpty"})},handleObjectSelectionUpdate:function(e){e.count>0&&"true"===e.accessBits.ManageImplementingChanges?(I.ChgChangeActionView.toolbar.updateNodeModel("remove",{visibleFlag:!0}),I.ChgChangeActionView.toolbar.updateNodeModel("delete",{visibleFlag:!0})):(I.ChgChangeActionView.toolbar.updateNodeModel("remove",{visibleFlag:!1}),I.ChgChangeActionView.toolbar.updateNodeModel("delete",{visibleFlag:!1}))},globalSubscribeForCRChangeActionView:function(){r.addObserver("ChgChangeActionDataGridLayout","CO-Properties-Update",I.handlePropertiesUpdateForChangeAction)},handlePropertiesUpdateForChangeAction:function(e){var t=I.ChgCRChangeActionTreeModel;t&&w.handlePropertiesOnUpdate(t,e)}};return I.globalSubscribeForCRChangeActionView(),I}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("issueEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("issueEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/util/ChgCRIssueGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/issue/ChgCRIssueDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";let h={createIssueView:function(t,o,a){var s=this;let r={};this.chgCRIssueView="",(r=UWA.merge(r,o)).target=t,r.columns=i.getColumns(),this.ChgCRIssueDataGridModel=new n(r.id),this.modelEvents=r.modelEvents,s.treeDocument=r.treeDocument=s.ChgCRIssueDataGridModel.createTreeDocument(),s.ChgCRIssueTreeModel=r.treeDocument,p.makeDroppable(r.target,s.dropHandler),s.ChgCRIssueDataGridModel.registerCustomFilter(),this.subscribeToModelEvents(r.treeDocument),c.getCRIssue(o.id).then(function(t){console.log("ImpactAnalysis list: "+t);var i=u.processedChangeRequestIssueList(t,o.id);s.chgCRIssueDataGridModel=new n(o.id),s.chgCRIssueDataGridModel.loadIssueData(r.treeDocument,i),s.chgCRIssueView=new e(r);var a=u.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(a),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(s.ChgCRIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:s.ChgCRIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,s.ChgCRIssueTreeModel)}),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),h.changeView()},function(e){return Promise.reject(e)})},dropHandler(e){console.log("dropHandler called"+e);h.ChgCRIssueDataGridModel.treeDocument;for(var t=[],i=0;i<e.length;i++)t.push({id:e[i].objectId,type:e[i].objectType?e[i].objectType:"",updateAction:"CONNECT",serviceId:e[i].serviceId?e[i].serviceId:"3DSpace"});h.ChgCRIssueDataGridModel.addExistingChildren(t)},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),g.unsubscribe(`Issue:${widget.id}`),g.subscribe(`Issue:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRIssueTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRIssueTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRIssueTreeModel)})}),g.unsubscribe(`${e.options.id} of ${widget.id}`),g.subscribe(`${e.options.id} of ${widget.id}`,function(t){h.ChgCRIssueDataGridModel.filterView(t,e)}),g.unsubscribe(`${e.options.id} colorize ${widget.id}`),g.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){h.ChgCRIssueDataGridModel.enableColorizeView(t,e)}),g.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),g.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){h.ChgCRIssueDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-issue-object-selection-update")]||this.modelEvents.subscribe({event:"cr-issue-object-selection-update"},function(e){h.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){let e=h.ChgCRIssueDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingIssue",extendedQuery:h.createExcludeListForSearch(e)};if(l.getGlobalVariable().is3DSpace){const t="wdg_"+(new Date).getTime();var i="../common/emxFullSearch.jsp?field=TYPES=Issue&txtExcludeOIDs="+e.map(e=>e.options.grid.id).toString()+"&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+t;showChooser(i,850,630);var n=function(e){if(e.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(t)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,h.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n)}else{const e=r.activateSearch("","Issue");r.search(o.CHG_GOV_Issue,"Issue",h.OnSearchComplete,"Issue",e,void 0,void 0,t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][0]});i.length&&(t.hideEmptyView(),h.ChgCRIssueDataGridModel.addExistingChildren(i))},removeHandler:function(){const e=h.treeDocument.getSelectedNodes();if(e.length>0){let n=[];for(var i=0;i<e.length;i++)n.push({id:e[i].options.grid.id});h.ChgCRIssueDataGridModel.removeExistingChildren(n).then(function(e){0==h.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){0===e.count?h.chgCRIssueView.toolbar.updateNodeModel("remove",{disabled:!0}):h.chgCRIssueView.toolbar.updateNodeModel("remove",{disabled:!1})}};return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssuefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r,l){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"issue-CR-container"}))},updateFacet:function(){var e=this;a.mask(this.elements.container);var t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};i.getObjectTypeInformation(n.id).then(function(t){if("Change Request"==t){var i=e.elements.container;s.createIssueView(i,n)}a.unmask(e.elements.container)})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";return e.extend({init:function(e){this._parent(e);var i=this;this.options=e,this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t;var n=this._modelEvents;this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),m.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-affectedItems-tile-div").removeClassName("minified-header-height"))}),widget.addEvents({onSearch:function(e){n.publish({event:"ir-aff-DataGrid-on-search",data:{query:e},context:i})},onResetSearch:function(e){n.publish({event:"ir-aff-DataGrid-on-reset-search",data:{query:e},context:i})}})},render:function(){try{var e=this.processColumns(),t=this,m={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgCRAffectedItemsGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>=0)return h.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){d.readyDragContent(e,t)},onDragStartCell:function(e,t){d.readyDragContent(e,t)}};m=UWA.merge(m,this.options);var f={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new o(m),this.chgGridView.cellSelection="none";let y=this.chgGridView;this._modelEvents.publish({event:"hideEmpty-datagrid",data:y}),this._modelEvents.unsubscribe({event:"ir-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"ir-aff-DataGrid-on-search"},function(e){var i=e.query;i&&t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"ir-aff-DataGrid-on-reset-search"},function(e){t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new r(f);var v={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return h.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=v;let E={typeForDisposition:{stdTemplate:"enumCombo",semantics:{possibleValues:{documentKey:u.CHG_GOV_Investigation_Request_Disposition_Type_Documentation,fixKey:u.CHG_GOV_Investigation_Request_Disposition_Type_Fix,notFixKey:u.CHG_GOV_Investigation_Request_Disposition_Type_No_Fix,notImpactedTypeKey:u.CHG_GOV_Investigation_Request_Disposition_Type_Not_Impacted},valueType:"enumValueToProperty"}}};this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations(E),l.toolbar=this.chgGridView.setToolbar(l.writetoolbarDefinition(this.options)),this.toolbar=l.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",function(){t.chgGridView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:c.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:c.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:u.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.chgGridView.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.chgGridView.onDropCell=function(e,t){if(14==t.columnID)if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.dataTransfer&&e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="copy"),t.cellModel.contains("chgIRAffectedAddExistingCADragAndDropResolvedby")){var i=e.dataTransfer.getData("text");t.nodeModel.options.grid.dispositionInformation&&t.nodeModel.options.grid.dispositionInformation[0]&&t.nodeModel.options.grid.dispositionInformation[0].dispostionId?require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],function(e){e.dragAndDropResolvedBy(i,t)}):s.warn(u.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else s.warn(u.CHG_GOV_Investigation_Request_Disposition_ResolvedBy_Already_There);return!0};var D=t.chgGridView.getTreeDocument().getXSO(),b=i.debounce(function(e){e&&e.length&&(e=e[0]);var i=t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:u.CHG_GOV_StatusBar_SelectedItems+0}}));var o=D.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)},5);D.onPostAdd(b),D.onPostRemove(b),t.tileView.addEventListener(n.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount)console.log("AffectedItem_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel});else if(i&&3==i.columnID){(o={}).cellInfos=i,C.executeMaturity(o)}else if(i&&11==i.columnID)if(e.target.className.contains("chgIRAffectedCreateNewDisposition")){console.log("New disposition called");var n={model:i.nodeModel.options.grid,InvestigationRequestId:this.options.id,context:i.nodeModel};require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],function(e){e.createIRAffectedItemNewDisposition(n)})}else e.target.className.contains("chgIRAffectedAddExistingDisposition")&&console.log("Add existing called");else if(i&&13==i.columnID){var o;(o={}).cellInfos=i,o.cellInfos.nodeModel.options.grid.dispositionInformation&&o.cellInfos.nodeModel.options.grid.dispositionInformation[0]&&o.cellInfos.nodeModel.options.grid.dispositionInformation[0].dispostionId&&C.executeMaturityForDisposition(o)}else i&&14==i.columnID&&(console.log("Create Change Action Called"),null==i.nodeModel.options.grid.dispositionInformation||""==i.nodeModel.options.grid.dispositionInformation?s.warn(u.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First):e.target.className.contains("chgIRAffectedCreateNewCAResolvedby")?(console.log("New CA resolved by create called"),require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],function(e){var i=[];i.parentID=t.options.treeDocument.getSelectedNodes()[0].options.grid.dispositionInformation[0].dispostionId;var n=e.addAsResolvedByInDispositionProcessing;e.createResolvedByInDispositionIR(i,n)})):e.target.className.contains("chgIRAffectedCreateAddExistingCAResolvedby")&&(console.log("Add existing called ResolvedBy "),require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],function(e){e.addExistingResolvedByHandler()})))},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-affectedItems-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-affectedItems-grid-div"});var w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-affectedItems-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"affectedItem-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new p({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new g({title:u.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(w),this.toolbar.inject(w);var S=UWA.createElement("div",{class:"content-affectedItems-grid-div expanded-header-height"}),I=UWA.createElement("div",{class:"content-affectedItems-tile-div affectedItemsTileView expanded-header-height"}),_=UWA.createElement("div",{class:"hideView",id:"affectedItemsEmptyTileViewDiv"});UWA.createElement("div",{html:u.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(_),this.chgGridView.inject(S),this.tileView.inject(I),_.inject(I),this.chgGridViewContainer.addContent(w),this.chgGridViewContainer.addContent(S),this.chgGridViewContainer.addContent(I),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.loader=(new a).inject(this.options.target)}catch(e){console.log(e)}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"ir-affected-item-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"ir-affected-item-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/util/ChgIRAffectedItemsGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/UIKIT/Mask","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_){"use strict";var y={createAffectedItemsView:function(t,o){var d=this;t.target.setStyles({position:"relative"}),this.contextId=t.id;var c={};c=UWA.merge(c,t),u.makeDroppable(c.target,d.dropHandler),c.modelEvents=o,this.modelEvents=o,c.columns=i.getColumns(),this.ChgIRAffectedItemsDataGridModel=new n(c.id,c.contextDetails),this.treeDocument=c.treeDocument=this.ChgIRAffectedItemsDataGridModel.createTreeDocument(),this.ChgIRAffectedItemsDataGridModel.registerCustomFilter(),d.ChgIRAffectedItemsTreeModel=c.treeDocument,this.subscribeToModelEvents(c.treeDocument),this.chgIRAffectedItemsView=new e(c),S.showLoader(c.target,this.chgIRAffectedItemsView.loader);let p=this.chgIRAffectedItemsView.chgGridView;a.getIRAffectedItems(t.id,!0).then(async function(e){console.log("AffectedItems list: "+e);var i={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data.splice(0,1));var o=await s.processIRAffectedItems(e);if(d.chgIRAffectedItemsDataGridModel=new n(t.id),0==o.length){if(h.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&b.isMasked(e)&&b.unmask(e)}else S.hideLoader(c.target,d.chgIRAffectedItemsView.loader);d.modelEvents.publish({event:"showEmpty-datagrid",data:p})}if(S.fetchMaturityStateCSS(o),d.chgIRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,o),y.changeView(),S.hideLoader(c.target,d.chgIRAffectedItemsView.loader),i&&i.length>0){var a=new Map,u=i.length;for(let e=0;e<i.length;e+=50){let t=[];t=u<50?i.slice(e,e+u):i.slice(e,e+50);for(var g=[],m=new Map,C=t,v=0;v<C.length;v++){var D=C[v];g.push(D.id),m.set(D.id,D)}var w=[];if(g.length>0){var I=s.commonPredicatedForFedSearch(),_=await s.callFederatedSearch(g,I);if(_&&_.results&&_.results.length>0)w=await s.processIRAffectedItemsFederatedSearch(_,m)}d.chgIRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,w),S.hideLoader(c.target,d.chgIRAffectedItemsView.loader),a=new Map([...a,...m]),u-=50}if(a&&a.size>0){d.chgIRAffectedItemsView.indexInfoDiv.show();var E=await f.recent();if(E&&E.results&&E.results.length>0){var O=s.filterNonIndexedDataNew(E,a);a.size!=O.length&&l.warn(r.CHG_GOV_Not_Accessable_Data,!0);var G=await s.processInformationForRecentIRAffected(O);S.fetchMaturityStateCSS(G),d.chgIRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,G)}}}else d.chgIRAffectedItemsView.indexInfoDiv.hide();var N=s.getDefaultFilter(c.columns);c.treeDocument.setFilterModel(N),c.isSelected&&"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(d.ChgIRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:d.ChgIRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,d.ChgIRAffectedItemsTreeModel)}),0==c.treeDocument.getChildren().length?c.treeDocument._modelEvents.publish({event:"treeEmpty"}):c.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),y.chgIRAffectedItemsView.chgGridView.addEventListener("postEdit",function(e,t){console.log("Type for disposition Changed")}),y.changeView(),S.hideLoader(c.target,d.chgIRAffectedItemsView.loader)},function(e){if(h.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&b.isMasked(e)&&b.unmask(e)}else S.hideLoader(c.target,d.chgIRAffectedItemsView.loader);return Promise.reject(e)}),this.chgIRAffectedItemsView.chgGridView.addEventListener("postEdit",function(e,t){})},dropHandler(e){y.ChgIRAffectedItemsDataGridModel.treeDocument;var t=[];t=f.parseObjectInformation(e);let i=y.treeDocument.getAllDescendants().map(e=>e.options.grid.id),n=e.map(e=>e.objectId);var o=[],a=0;for(let e=0;e<n.length;e++)for(let t=0;t<i.length;t++)n[e]==i[t]&&(o[a]=e,a++);o.length>0&&l.warn(r.CHG_GOV_NODE_PRESENT_WARN_AFFECTED_ITEM,!0);for(let e=0;e<o.length;e++)t.splice(o[e]-e,1);t.length>0?y.ChgIRAffectedItemsDataGridModel.addExistingChildren(t):l.error(r.CHG_GOV_Common_Drop_Error)},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){t.hideEmptyView()}),C.unsubscribe(`crAffectedItems:${widget.id}`),C.subscribe(`crAffectedItems:${widget.id}`,function(){if("false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRAffectedItemsTreeModel)}),Object.keys(i.chgCRAffectedItemsView.options.treeDocument.getXSO()._items).length>0){let e=i.chgCRAffectedItemsView.options.treeDocument.getXSO()._items;for(let t in e)i.chgCRAffectedItemsView.onSelectionChange(i.chgCRAffectedItemsView._modelEvents,e[t],i.chgCRAffectedItemsView.id,i.chgCRAffectedItemsView.options.contextDetails.isKindOfType,!0)}else i.chgCRAffectedItemsView.onSelectionChange(i.chgCRAffectedItemsView._modelEvents,i.chgCRAffectedItemsView.options.treeDocument._getTrueRoot(),i.chgCRAffectedItemsView.id,i.chgCRAffectedItemsView.options.contextDetails.isKindOfType,!1)}),C.unsubscribe(`${e.options.id} of ${widget.id}`),C.subscribe(`${e.options.id} of ${widget.id}`,function(e){y.ChgIRAffectedItemsDataGridModel.filterView(e)}),C.unsubscribe(`${e.options.id} colorize ${widget.id}`),C.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){y.ChgIRAffectedItemsDataGridModel.enableColorizeView(e)}),C.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),C.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){y.ChgIRAffectedItemsDataGridModel.disableColorizeView(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-on-dblclick"},function(e){if(h.getGlobalVariable().is3DSpace){w("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else y.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("ir-affected-item-object-selection-update")]||this.modelEvents.subscribe({event:"ir-affected-item-object-selection-update"},function(e){y.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){console.log("addExistingHandler cr affecteditems!");var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add Affected Item"}};_.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=y.ChgIRAffectedItemsDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingAffectedItem",extendedQuery:y.createExcludeListForSearch(t)};const n=o.activateSearch();h.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),o.search(r.CHG_GOV_AffectedItems_AddExisting_Search_Header,"",y.OnSearchComplete,"changeAffectedItems",n,void 0,void 0,i)},addExistingResolvedByHandler:function(){console.log("addExistingHandler resolved by in affecteditems!");var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add Affected Item"}};_.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=y.ChgIRAffectedItemsDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingAffectedItem",extendedQuery:y.createExcludeListForSearch(t)};const n=o.activateSearch();h.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),o.search("Add Existing ResolvedBy","Change Action",y.OnSearchResolvedByComplete,"changeAffectedItems",n,void 0,void 0,i)},createIRAffectedItemNewDisposition:function(e){console.log("Into suscribe");var t=[],i={id:e.model.id};t[0]=i,a.createDispositionFromIR(e.InvestigationRequestId,t).then(async function(e){console.log("Successful");let t=y.treeDocument.getAllDescendants().length;for(let o=0;o<t;o++){var i=y.treeDocument.getAllDescendants()[o];if(i.options.grid.id==e.data[0].AffectedItemId){var n={dispositionInformation:[]};n.dispositionInformation.push(e.data[0]),i.updateOptions({grid:{dispositionName:y.ChgIRAffectedItemsDataGridModel.dispositionNameMethod(n),dispositionMaturity:e.data[0].dispositionCurrentState}}),i.options.grid.dispositionInformation=[],i.options.grid.dispositionInformation[0]={dispostionId:e.data[0].id,dispositionName:e.data[0].dispositionName,dispositionCurrentState:e.data[0].dispositionCurrentState,dispositionPolicy:e.data[0].dispositionPolicy};break}}})},createResolvedByInDispositionIR:function(e,t){var i={isClickProcessing:!0};let n=e.parentID;console.log("launchCreateChangeActionDialog ............................");let o={context:{service:"3DSpace",tenant:h.getGlobalVariable().tenant,header:{SecurityContext:h.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:"Change Action",select:[],parentPIDs:[n]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:async function(e){t(e)},onFailure:function(e){i&&(i.isClickProcessing=!1),console.log("onFailure..............."+e)},onCancel:function(e){i&&(i.isClickProcessing=!1)}}};(new v).CreateNew(o)},addAsResolvedByInDispositionProcessing:async function(e){console.log(e)},dragAndDropResolvedBy:async function(e,t){if(console.log("SOme thing dropped"),UWA.is(e)&&""!=e){var i=JSON.parse(e),n=t.nodeModel.options.grid.id,o=t.nodeModel.options.grid.dispositionInformation[0].dispostionId,a={data:[]};a.data.push({id:i.data.items[0].objectId,type:i.data.items[0].objectType,service:i.data.items[0].serviceId});const d=await y.callResolvedByInDisposition(a,o);let c=y.treeDocument.getAllDescendants();for(let e=0;e<c.length;e++){var s=c[e];if(s.options.grid.id==n)break}var r={dispositionInformation:[]},l={resolvedByName:d.data[0].resolvedByName};r.dispositionInformation.push(l),s.updateOptions({grid:{dispositionResolvedBy:y.ChgIRAffectedItemsDataGridModel.resolvedByNameMethod(r)}})}},callResolvedByInDisposition:async function(e,t){var i=[],n={id:e.data[0].id,service:"3DSpace",type:e.data[0].type};i[0]=n;let o=void 0;o=null!=t?t:y.treeDocument.getSelectedNodes()[0].options.grid.dispositionInformation[0].dispostionId;const s=await a.createResolvedByFromIR(o,i);return s},affectedItemsDisposition:function(){console.log("Disposition for IR affected items")},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][8]&&null!=e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2],environment:h.getGlobalVariable().tenant});t.length&&y.ChgIRAffectedItemsDataGridModel.addExistingChildren(t)},OnSearchResolvedByComplete:async function(e){var t={data:[]};t.data.push({id:e[0][0],type:e[0][2],service:e[0][7]});var i={dispositionInformation:[]},n={resolvedByName:(await y.callResolvedByInDisposition(t)).data[0].resolvedByName};i.dispositionInformation.push(n),y.treeDocument.getSelectedNodes()[0].updateOptions({grid:{dispositionResolvedBy:y.ChgIRAffectedItemsDataGridModel.resolvedByNameMethod(i)}}),console.log("Add existing CA Complete")},removeHandler:function(){console.log("removeHandler!");var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Remove"}};if(_.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=y.ChgIRAffectedItemsDataGridModel.treeDocument.getSelectedNodes().length)if(h.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&b.mask(e)}else{let e=document.getElementById("crAffectedItems");e&&b.mask(e)}y.ChgIRAffectedItemsDataGridModel.removeChildren()},globalSubscribeForCOOrchestrationView:function(){g.addObserver("ChgIRAffectedItemsDataGridLayout","CO-AccessBit-Update",y.handleAccessBitUpdate),g.addObserver("ChgCRAffectedItemsDataGridLayout","CO-Properties-Update",ChgCRAffectedItemsDataGridLayout.handlePropertiesUpdateForAffectedItem)},handlePropertiesUpdateForAffectedItem:function(e){var t=ChgCRAffectedItemsDataGridLayout.ChgCRAffectedItemsTreeModel;t&&I.handlePropertiesOnUpdate(t,e)},createFinalIncludeListFrSearch:function(e){let t="(";for(let i=0;i<e.length;i++)t=t+"physicalid:"+e[i],i!=e.length-1&&(t+=" OR ");return t+=")"},changeEditibility:function(e){let t=ChgCRAffectedItemsDataGridLayout.chgCRAffectedItemsView.options.columns;for(let i of t)if("reasonForChange"===i.dataIndex){i.editableFlag=e;break}},handleAccessBitUpdate:function(e){e.id==y.contextId&&(console.log("ChgIRAffectedItemsDataGridLayout handleAccessBitUpdate"+e),"false"==e.accessBits.ManageAffectedItem?(y.accessBitManageAffectedItem=!1,y.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1})):y.accessBitManageAffectedItem=!0,e.accessBits.ManageChangeAnalysis)},handleObjectSelectionUpdate:function(e){e.count>0?(y.accessBitManageAffectedItem&&y.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),y.accessBitManageChangeAnalysis&&(y.chgIRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="enabled")):y.chgIRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1})},handleForMaturityUpdate:function(e){if(e){JSON.parse(e);let t=y.treeDocument.getSelectedNodes();"Disposition"==JSON.parse(e).Refresh.modified[0].policy?S.getHandleForDispostionMaturity(JSON.parse(e),t):S.getHandleForMaturityUpdate(JSON.parse(e),t)}},globalSubscribeForAffectedItemsBasisView:function(){g.addObserver("ChgIRAffectedItemsDataGridLayout","CO-AccessBit-Update",y.handleAccessBitUpdate),g.addObserver("ChgIRAffectedItemsDataGridLayout","Lifecycle.Modification",y.handleForMaturityUpdate)}};return y.globalSubscribeForAffectedItemsBasisView(),y}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENONewWidget/ENONewLauncher"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";var m=a.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),C=e.extend({init:function(e){this._parent(e),C.contextDetails=e.contextDetails},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){let e=new n,i=new t({dataModelSet:e});return i.onPreExpand(async function(e){var t=this;t.modedEventInfo=e,console.log(c),require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler"],function(e){console.log(c);let i=e.investigationRequestId,n=t.modedEventInfo.data.nodeModel.options.grid.id;var o=[];o.push({id:n}),d.getAllAffectedUsages(i,o).then(async function(e){console.log(e);var i=void 0;if(e.data&&e.data[0]&&e.data[0].AffectedUsagesInfo&&e.data[0].AffectedUsagesInfo.length>0&&(i=e.data[0].AffectedUsagesInfo)[0]&&i[0].non3DSpaceNonIndexedData&&(i[0].non3DSpaceNonIndexedData,i[0].mapping&&i[0].mapping,i.splice(0,1)),null!=i){var n={};n.data=i;var o=await u.processIRAffectedItems(n);o.forEach(e=>{e.isAffectedUsages=!0});var a=await C.prototype.createTreeDocumentNodeModel(o);if(t.modedEventInfo.target.hasChildren())for(var s=!1,r=t.modedEventInfo.target.getChildren(),l=0;l<a.length;l++){s=!1;for(var d=0;d<r.length;d++)if(r[d].options.grid.id==a[l].options.grid.id){s=!0;break}s||t.modedEventInfo.target.addChild(a[d])}else t.modedEventInfo.target.addChild(a)}t.modedEventInfo.target.preExpandDone()})})}),this.setTreeDocument(i),i},createTreeDocumentNodeModel:async function(e){let t=[];for(let i=0;i<e.length;i++){let n=await this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:async function(e){let t=e.name+" | "+e.typeNLS;var n,o=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var a=this.getCustomTooltip(e);if(n=s.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,e.dispositionInformation&&e.dispositionInformation[0]&&e.dispositionInformation[0].dispostionId){if(e.dispositionMaturity=e.dispositionInformation[0].dispositionCurrentState,e.dispositionName=l.dispositionNameMethod(e.dispositionInformation[0].dispostionIcon,e.dispositionInformation[0].dispositionName),e.dispositionInformation[0].approvers&&e.dispositionInformation[0].approvers.length>0){e.approvers=e.dispositionInformation[0].approvers;for(let t=0;t<e.approvers.length;t++)e.approvers[t].label=e.approvers[t].name}else e.approvers=void 0;let t=e.dispositionInformation[0].dispositionType;if(t&&(e.dispositionType="DOCUMENT"==t?"documentKey":"NO_FIX"==t?"notFixKey":"FIX"==t?"fixKey":"NOT_IMPACTED"==t?"notImpactedTypeKey":"noneKey"),e.dispositionRevision=e.dispositionInformation[0].dispositionRevision,e.dispositionInformation[0]&&e.dispositionInformation[0].resolvedByInformation&&e.dispositionInformation[0].resolvedByInformation[0]){var r=e.dispositionInformation[0].resolvedByInformation[0];if(r.indexResolvedBy&&r.indexResolvedBy.length>0){let t=r.indexResolvedBy[0].resolvedByName?r.indexResolvedBy[0].resolvedByName:"",i=r.indexResolvedBy[0].resolvedByIcon?r.indexResolvedBy[0].resolvedByIcon:"";e.dispositionResolvedBy=l.resolvedByNameMethod("",t,i)}else if(r.non3DSpaceNonIndexedResolvedBy&&r.non3DSpaceNonIndexedResolvedBy.length>0){let t=await u.resolvedByInformationForCrossServiceAndRecents(r.non3DSpaceNonIndexedResolvedBy),i=t[0]&&t[0].resolvedByName?t[0].resolvedByName:"",n=t[0]&&t[0].resolvedByIcon?t[0].resolvedByIcon:"";e.dispositionResolvedBy=l.resolvedByNameMethod("",i,n),e.dispositionInformation[0].resolvedByInformation[0].non3DSpaceNonIndexedResolvedBy=t}}else e.dispositionResolvedBy=l.resolvedByDefaultForDispostion()}else e.dispositionName=l.defaultDispositionNameValue(C.contextDetails.access),e.dispositionResolvedBy=l.resolvedByDefaultForDispostion(),e.approvers=void 0;return new i({label:n,subLabel:t,description:o,grid:e,icons:[e.icon],thumbnail:e.thumbnail,customTooltip:a,children:[],contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return e.name&&e.currentNLS?o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.currentNLS:o.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},createCustomOwnerField:function(e){let t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=s.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),o=new UWA.Element("div",{class:"assignee"}),a="";if(s.getGlobalVariable().isSwymInstalled)a=UWA.createElement("img",{class:"userIcon",src:i});else{let t=r.getAvatarDetails(e.ownerFullName);(a=UWA.createElement("div",{html:t.avatarStr,class:"avatarIcon"})).style.setProperty("background",t.avatarColor)}a.inject(o);let l=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return o.inject(n),l.inject(n),n.outerHTML},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},createCustomTooltip:function(e){return o.CHG_GOV_DataGrid_Column_Title+": "+e.Title+"\n"+o.CHG_GOV_DataGrid_Column_Name+": "+e.Name+"\n"+o.CHG_GOV_DataGrid_Column_Severity+": "+e.Severity+"\n"+o.CHG_GOV_DataGrid_Column_Owner+": "+e.Owner+"\n"+o.CHG_GOV_DataGrid_Column_Maturity+": "+e.State},createCustomNameField:function(e,t){var i=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(i);var n=new UWA.Element("div",{class:"iconsDiv"});if("TRUE"==e.ecm_change_on_hold){var a=new UWA.Element("div",{class:"gridIconContainer",title:o.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(a),a.inject(n)}return n.inject(i),i.outerHTML},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});let i=this.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(let t=i.length-1;t>=0;t--)e.addRoot(i[t],0);e.pushUpdate()},loadAffectedUsageData:async function(e,t){e.prepareUpdate();var i=await this.createTreeDocumentNodeModel(t);i.sort((e,t)=>e.options.grid.revision.localeCompare(t.options.grid.revision));for(var n=0;n<i.length;n++)e.addChild(i[n]);e.pushUpdate()},createNewDispositionInAffectedUsages:async function(e,t,i,n){try{var o=await d.createDispositionFromIR(e,t)}catch(e){n.chgAffectUsageDataGridView.hideSpinner()}let a=o.data[0].dispositionType,s=null,r=o.data[0].dispositionRevision,c=o.data[0].dispositionOwner,u=o.data[0].dispositionOwnerFullName,p=o.data[0].dispositionIcon;a&&(s="DOCUMENT"==a?"documentKey":"NO_FIX"==a?"notFixKey":"FIX"==a?"fixKey":"NOT_IMPACTED"==a?"notImpactedTypeKey":"noneKey"),i.options.grid.dispositionInformation=[],i.options.grid.dispositionInformation[0]={dispostionId:o.data[0].id,dispositionName:o.data[0].dispositionName,dispositionCurrentState:o.data[0].dispositionCurrentState,dispositionPolicy:o.data[0].dispositionPolicy,dispositionType:a,dispositionRevision:r,dispositionOwner:c,dispositionOwnerFullName:u,dispositionIcon:p},i.updateOptions({grid:{dispositionName:l.dispositionNameMethod(o.data[0].icon,o.data[0].dispositionName),dispositionMaturity:o.data[0].dispositionCurrentState,dispositionType:s,dispositionRevision:r,dispositionOwner:u}}),console.log(o)},createDispositionThroughVerticalAssessment:async function(e,t,i,n){try{var o=await d.createDispositionThroughVerticalAssessment(e,t)}catch(e){n.chgAffectUsageDataGridView.hideSpinner()}let a=o.data[0].dispositionType,s=null,r=o.data[0].dispositionRevision,c=o.data[0].dispositionOwner,u=o.data[0].dispositionOwnerFullName,p=o.data[0].icon;a&&(s="DOCUMENT"==a?"documentKey":"NO_FIX"==a?"notFixKey":"FIX"==a?"fixKey":"NOT_IMPACTED"==a?"notImpactedTypeKey":"noneKey"),i.options.grid.dispositionInformation=[],i.options.grid.dispositionInformation[0]={dispostionId:o.data[0].id,dispositionName:o.data[0].dispositionName,dispositionCurrentState:o.data[0].dispositionCurrentState,dispositionPolicy:o.data[0].dispositionPolicy,dispositionType:a,dispositionRevision:r,dispositionOwner:c,dispositionOwnerFullName:u,dispositionIcon:p},i.updateOptions({grid:{dispositionName:l.dispositionNameMethod(o.data[0].icon,o.data[0].dispositionName),dispositionMaturity:o.data[0].dispositionCurrentState,dispositionType:s,dispositionRevision:r,dispositionOwner:u}}),console.log(o)},addExistingResolvedByHandler:function(e){console.log("addExistingHandler resolved by in affecteditems!"),that.data=e;const t=p.activateSearch();s.getGlobalVariable().is3DSpace&&t.socket.subscribeServer("SearchComServer",getTopWindow()),p.search("Add Existing ResolvedBy","Change Action, Task",C.prototype.OnSearchResolvedByComplete,"changeAffectedItems",t,void 0,void 0,{condition:"addExistingAffectedItem",extendedQuery:""})},OnSearchResolvedByComplete:async function(e){var t={data:[]};t.data.push({id:e[0][0],type:e[0][2],service:e[0][7]});var i=that.data.model.dispositionInformation[0].dispostionId;const n=await C.callResolvedByInDisposition(t,i);var a=that.data.context.getTreeDocument().getAllDescendants();if(n.data&&n.data[0]&&n.data[0].indexResolvedBy&&n.data[0].indexResolvedBy[0]){let e=n.data[0].indexResolvedBy[0].dispositionId;for(let t=0;t<a.length;t++)if(a[t].options.grid.dispositionInformation&&a[t].options.grid.dispositionInformation[0]&&a[t].options.grid.dispositionInformation[0].dispostionId==e){a[t].updateOptions({grid:{dispositionResolvedBy:l.resolvedByNameMethod("",n.data[0].indexResolvedBy[0].resolvedByName,n.data[0].indexResolvedBy[0].resolvedByIcon)}}),a[t].options.grid.dispositionInformation[0].resolvedByInformation=[{indexResolvedBy:n.data[0].indexResolvedBy}];break}}if(n.data&&n.data[0]&&n.data[0].non3DSpaceNonIndexedDataForResolvedBy&&n.data[0].non3DSpaceNonIndexedDataForResolvedBy[0]){var s=n.data[0].non3DSpaceNonIndexedDataForResolvedBy,r=new Map,d=s.length;for(let e=0;e<s.length;e+=50){let t=[];t=d<50?s.slice(e,e+d):s.slice(e,e+50);for(var c=[],p=new Map,h=t,m=0;m<h.length;m++){var f=h[m];c.push(f.resolvedById),p.set(f.resolvedById,f)}if(c.length>0){var v=u.commonPredicatedForFedSearch(),D=await u.callFederatedSearch(c,v);D&&D.results&&D.results.length}r=new Map([...r,...p]),d-=50}if(r&&r.size>0){var b=await ChgInfraService.recent();if(b&&b.results&&b.results.length>0){var w=u.filterNonIndexedDataNew(b,r);r.size!=w.length&&g.warn(o.CHG_GOV_Not_Accessable_Data,!0);var S=await u.processInformationForRecentResolvedByDisposition(w);let e=S.length;if(e>0)for(let t=0;t<e;t++)if(S[t].dispositionId&&S[t].resolvedByName){let e=S[t].dispositionId;for(let i=0;i<a.length;i++)if(a[i].options.grid.dispositionInformation&&a[i].options.grid.dispositionInformation[0]&&a[i].options.grid.dispositionInformation[0].dispostionId==e){a[i].updateOptions({grid:{dispositionResolvedBy:l.resolvedByNameMethod("",S[t].resolvedByName,S[t].resolvedByIcon)}}),a[i].options.grid.dispositionInformation[0].resolvedByInformation=[{non3DSpaceNonIndexedResolvedBy:S}];break}}}}}console.log("Add existing CA Complete")},createResolvedByInDispositionIR:function(e,t){var i={isClickProcessing:!0};that.data=e;e.parentID;console.log("launchCreateChangeActionDialog ............................");let n={context:{service:"3DSpace",tenant:s.getGlobalVariable().tenant,header:{SecurityContext:s.getGlobalVariable().getSecurityContext()}},labelTopBar:o.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:"Change Action",select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:async function(e){t(e)},onFailure:function(e){i&&(i.isClickProcessing=!1),console.log("onFailure..............."+e)},onCancel:function(e){i&&(i.isClickProcessing=!1)}}};(new h).CreateNew(n)},addAsResolvedByInDispositionProcessing:async function(e){var t={data:[]};t.data.push({id:e.result[0].identifier,type:e.result[0].type,service:s.getGlobalVariable().serviceName});var i=that.data.model.dispositionInformation[0].dispostionId;const n=await C.prototype.callResolvedByInDisposition(t,i),o=n.data[0];if(o.indexResolvedBy&&o.indexResolvedBy.length>0){let e=o.indexResolvedBy[0].resolvedByName?o.indexResolvedBy[0].resolvedByName:"",t=o.indexResolvedBy[0].resolvedByIcon?o.indexResolvedBy[0].resolvedByIcon:"";that.data.context.getTreeDocument().getSelectedNodes()[0].updateOptions({grid:{dispositionResolvedBy:l.resolvedByNameMethod("",e,t),resolvedByInformation:n.data}}),that.data.context.getTreeDocument().getSelectedNodes()[0].options.grid.resolvedByInformation=[{indexResolvedBy:o.indexResolvedBy}]}else o&&o.non3DSpaceNonIndexedDataForResolvedBy&&o.non3DSpaceNonIndexedDataForResolvedBy.length>0&&u.resolvedByInformationForCrossServiceAndRecents(o.non3DSpaceNonIndexedDataForResolvedBy).then(function(e){let t=e[0]&&e[0].resolvedByName?e[0].resolvedByName:"",i=e[0]&&e[0].resolvedByIcon?e[0].resolvedByIcon:"";that.data.context.getTreeDocument().getSelectedNodes()[0].updateOptions({grid:{dispositionResolvedBy:l.resolvedByNameMethod("",t,i),resolvedByInformation:n.data}}),that.data.context.getTreeDocument().getSelectedNodes()[0].options.grid.resolvedByInformation=[{non3DSpaceNonIndexedResolvedBy:e}]});console.log(e)},callResolvedByInDisposition:async function(e,t){var i=[],n={id:e.data[0].id,service:"3DSpace",type:e.data[0].type};i[0]=n;let o=void 0;return o=null!=t?t:c.treeDocument.getSelectedNodes()[0].options.grid.dispositionInformation[0].dispostionId,await d.createResolvedByFromIR(o,i)},changeDispositionType:async function(e){if(e.nodeModel.options.grid.dispositionInformation&&e.nodeModel.options.grid.dispositionInformation[0]&&e.nodeModel.options.grid.dispositionInformation[0].dispostionId){let i=e.nodeModel.options.grid.dispositionType,n=e.nodeModel.options.grid.dispositionInformation[0].dispostionId;var t=[];t.push({dispositionType:i}),d.changeDispositionType(n,t).then(function(e){console.log(e)})}else e.nodeModel.updateOptions({grid:{dispositionType:void 0}})},changeApprovalStatus:async function(e,t){e&&t&&e.updateOptions({grid:{ApprovalStatus:t.approvalStatus,approvalStatusModel:t.approvalStatusModel,maturityNLS:t.maturity_NLS,maturityWithBadge:t.maturity_NLS}})}});return C}),define("DS/ENOChgGovernanceUX/scripts/util/ChgIDCardHeaderEventsUtility",["UWA/Class","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgDependencyServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChangeActionUX/scripts/Models/CADependencyModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s){var r=e.singleton({init:function(){this._platformEventsSubscribed=!1,r.subscribeToEvents(),this.dependencyModel=new a,o.addObserver("ChgIDCardHeaderEventsUtility","CO-AccessBit-Update",this.handleAccessBitUpdate)},handleAccessBitUpdate:function(e){r.isChangeAction=!1,e.id==r.id&&("ChangeAction"==e.type?(r.isChangeAction=!0,r.showAttachementDataForCA(r.id),r.publishEvents(r.id),r.showApplicabilityDataForCA(r.id),r.showIsGovernedDataForCA(r.id),r.showChangeGroupDataForCA(r.id)):r.showAttachementData(r.id),"ChangeRequest"==e.type&&(r.showRelatedScopeCR(r.id),r.showApplicabilityData(r.id)),"ChangeOrder"==e.type&&(r.showRelatedScopeCO(r.id),r.showApplicabilityData(r.id),r.showChangeRequestData(r.id),r.publishEvents(r.id)))},setId:function(e){this.id=e},getId:function(){return this.id},attachmentCount:0,isChangeAction:!1,updateAttachmentCount:function(){this.Count,this.getCount=function(){return this.Count||0},this.setCount=function(e,t){t?r.attachmentCount--:r.attachmentCount++}},publishEvents:function(e){t.publish("load-dependency"+widget.id,"pid:"+e)},subscribeToEvents:function(){this._platformEventsSubscribed||(t.subscribe("dependency:data:ready"+widget.id,function(e){if(e==r.id&&i.changeActionDependenciesLoaded){var n="No",o=s.CHG_GOV_VALUE_NO;i.changeActionDependencyModel.get("upstreamDependencyObjects").dependencyLinks.length+i.changeActionDependencyModel.get("downstreamDependencyObjects").dependencyLinks.length>0&&(n="Yes",o=s.CHG_GOV_VALUE_YES);var a={};if(a.attributes={Dependency:{valueActual:n,valueDisplay:o,showLoader:!1}},1==r.isChangeAction){let e=i.changeActionDependencyModel.get("flowdownDependencyCount")?i.changeActionDependencyModel.get("flowdownDependencyCount"):0;a.attributes.Flowdown={valueActual:e,valueDisplay:e,showLoader:!1}}t.publish("idcard-header-update"+widget.id,a)}}),t.subscribe("applicability:update:notification",function(e){var i=JSON.parse(e);if(i.content.id==r.id){var n="No",o=s.CHG_GOV_VALUE_NO,a="",l=i.content.applicability_DisplayValue;""!=l&&(n="Yes",o=s.CHG_GOV_VALUE_YES,a=l,{title:s.CHG_GOV_APPLICABILITY_EXPRESSION,shortHelp:l});var d={};d.attributes={Applicability:{valueActual:n,valueDisplay:o,showLoader:!1,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,d)}}),t.subscribe("ca-IDCard-on-change-group",function(e){if(console.log(e),e.id==r.id){let n=e.group.title,o=e.group.id;var i={};i.attributes={Group:{valueActual:o,valueDisplay:n,showLoader:!1}},t.publish("idcard-header-update"+widget.id,i)}}),t.subscribe("co-update-attachment-complete",function(e){if(e.id==r.id){r.updateAttachmentCount();var i="0",n="0";null!=e.referentials.attached?(r.setCount(e.referentials.attached.length),i=r.attachmentCount,n=r.attachmentCount):null!=e.referentials.detached&&(r.setCount(e.referentials.detached.length,!0),0==r.attachmentCount?(i="No",n=s.CHG_GOV_VALUE_NO):(i=r.attachmentCount,n=r.attachmentCount));var o={};o.attributes={Attachments:{valueActual:i,valueDisplay:n,showLoader:!1}},t.publish("idcard-header-update"+widget.id,o)}}),t.subscribe("relatedScope:update",function(e){if(e.contextid==r.id){var i="No",n=s.CHG_GOV_VALUE_NO;e.length>0?(i="Yes",n=s.CHG_GOV_VALUE_YES):(i="No",n=s.CHG_GOV_VALUE_NO);var o={};o.attributes={RelatedScope:{valueActual:i,valueDisplay:n,showLoader:!1,valueTooltip:""}},t.publish("idcard-header-update"+widget.id,o)}}),this._platformEventsSubscribed=!0)},showApplicabilityData:function(e){var i="No",o=s.CHG_GOV_VALUE_NO,a=s.CHG_GOV_VALUE_NO;n.getApplicabilityData(e).then(function(e){if(e.applicability){var n=!1;if(""===e.applicability.xml)n=!0;else if(""!=e.applicability.xml){var r=(new DOMParser).parseFromString(e.applicability.xml,"text/xml").getElementsByTagName("Expression");if(r.length>0){var l=[],d=r[0].getElementsByTagName("Context");if(d.length>0){for(var c=0;c<d.length;c++){var u=d[c];if(u)"false"===(g=u.textContent)&&l.push(g)}d.length===l.length&&(n=!0)}else{var p=r[0].getElementsByTagName("XGraph");for(c=0;c<p.length;c++){var g,h=p[c];if(h)"false"===(g=h.textContent)&&l.push(g)}p.length===l.length&&(n=!0)}}}n||(console.log("............................"),console.log(n),i="Yes",e.applicability.display.includes("###")?(o=s.CHG_GOV_Header_Unknown,a=s.CHG_GOV_Tooltip_Unkown):(o=s.CHG_GOV_VALUE_YES,a=e.applicability.display,{title:s.CHG_GOV_APPLICABILITY_EXPRESSION,shortHelp:a}));var m={};m.attributes={Applicability:{valueActual:i,valueDisplay:o,showLoader:!1,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,m)}},function(e){var n={};return n.attributes={Applicability:{valueActual:i,valueDisplay:s.CHG_GOV_Header_Unknown,showLoader:!1,valueTooltip:s.CHG_GOV_Tooltip_Unkown}},t.publish("idcard-header-update"+widget.id,n),Promise.reject(e)})},showApplicabilityDataForCA:function(e){var i="No",o=s.CHG_GOV_VALUE_NO,a=s.CHG_GOV_VALUE_NO;n.getApplicabilityDataForCA(e).then(function(e){if(e.changeaction&&e.changeaction.applicability){let C=e.changeaction.applicability;var n=!1;if(""===C.expressionXML)n=!0;else if(""!=C.expressionXML){var r=(new DOMParser).parseFromString(C.expressionXML,"text/xml").getElementsByTagName("Expression");if(r.length>0){var l=[],d=r[0].getElementsByTagName("Context");if(d.length>0){for(var c=0;c<d.length;c++){var u=d[c];if(u)"false"===(g=u.textContent)&&l.push(g)}d.length===l.length&&(n=!0)}else{var p=r[0].getElementsByTagName("XGraph");for(c=0;c<p.length;c++){var g,h=p[c];if(h)"false"===(g=h.textContent)&&l.push(g)}p.length===l.length&&(n=!0)}}}n||(i="Yes",o=s.CHG_GOV_VALUE_YES,a=C.expressionTXT,{title:s.CHG_GOV_APPLICABILITY_EXPRESSION,shortHelp:a});var m={};m.attributes={Applicability:{valueActual:i,valueDisplay:o,showLoader:!1,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,m)}},function(e){return Promise.reject(e)})},showChangeRequestData:function(e){var i="Unassigned",o=s.CHG_GOV_VALUE_UNASSIGNED;n.getCOChangeRequestData(e).then(function(e){e.data&&e.data[0]&&e.data[0].dataelements&&e.data[0].dataelements.title&&(i=e.data[0].dataelements.title,o=e.data[0].dataelements.title);var n={};n.attributes={Governing_Change_Request:{valueActual:i,valueDisplay:o,showLoader:!1}},t.publish("idcard-header-update"+widget.id,n)},function(e){return Promise.reject(e)})},showAttachementDataForCA:function(e){r.showAttachementData(e,"Related Item")},showAttachementData:function(e,i){let o="No",a=s.CHG_GOV_VALUE_NO;n.getAttachementData(e,i).then(function(e){e.data&&0!=e.data.length&&(o=e.data.length,a=e.data.length,r.attachmentCount=e.data.length);var i={};i.attributes={Attachments:{valueActual:o,valueDisplay:a,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update"+widget.id,i)},function(e){return Promise.reject(e)})},showRelatedScopeCR:function(e){let i="No",o=s.CHG_GOV_VALUE_NO;n.getCRRelatedScope(e).then(function(e){e.data&&0!=e.data.length&&(i="Yes",o=s.CHG_GOV_VALUE_YES);var n={};n.attributes={RelatedScope:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update"+widget.id,n)},function(e){return Promise.reject(e)})},showRelatedScopeCO:function(e){let i="No",o=s.CHG_GOV_VALUE_NO;n.getCORelatedScope(e).then(function(e){e.data&&0!=e.data.length&&(i="Yes",o=s.CHG_GOV_VALUE_YES);var n={};n.attributes={RelatedScope:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0}},t.publish("idcard-header-update"+widget.id,n)},function(e){return Promise.reject(e)})},showIsGovernedDataForCA:function(e){let i="No",o=s.CHG_GOV_VALUE_NO,a=s.CHG_GOV_VALUE_NO;var r={};n.getGovernedDataForCA(e).then(function(e){e.data&&e.data[0]&&e.data[0].isGoverned&&"true"==e.data[0].isGoverned&&(i="Yes"),"Yes"==i&&(o=s.CHG_GOV_VALUE_YES,a=s.CHG_GOV_VALUE_YES),r.attributes={isGoverned:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,r)},function(e){return Promise.reject(e)})},showChangeGroupDataForCA:function(e){let i=void 0,o=s.CHG_GOV_VALUE_UNASSIGNED,a=s.CHG_GOV_VALUE_UNASSIGNED;var r={};n.getChangeGroupData(e).then(function(e){e.changeaction&&e.changeaction.group?(i=e.changeaction.group.id,o=e.changeaction.group.title,n.getChangeActionForGroup(i).then(function(e){var n=s.Group_CA_Tooltip_Info;n+="\n";for(var l=e.changeactions,d=0;d<l.length;d++){n+=l[d].title+" ("+l[d].name+")",d!=l.length-1&&(n+="\n")}a=n,r.attributes={Group:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,r)},function(e){return Promise.reject(e)})):(r.attributes={Group:{valueActual:i,valueDisplay:o,showLoader:!1,displayWhenMinified:!0,valueTooltip:a}},t.publish("idcard-header-update"+widget.id,r))},function(e){return Promise.reject(e)})},makePropertyViewVisible:function(e){for(var t=e.childNodes,i=0;i<t.length;i++){var n=t[i].getAttribute("name");UWA.is(n)&&"EditProp_MasterContain"===n?t[i].style.display="block":t[i].style.display="none"}}});return r}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("relatedScopeEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("relatedScopeEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionGridCols",["DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t){"use strict";let i=Object.create(null);return i.getColumns=function(){let i=[];return i.push({text:"",dataIndex:"bi_color",width:10,isSortable:!1,isDraggable:!1,isEditable:!1,alwaysOn:!0}),i.push({text:t.CHG_GOV_DataGrid_Column_Graph,dataIndex:"__GRAPH__",width:160,style:{overflow:"scroll"},isSortable:!0,isDraggable:!1,isEditable:!1,alwaysOn:!0}),i.push(e.getColumnDefinition({dataIndex:"title"})),i.push({text:t.CHG_GOV_DataGrid_Column_Revision,dataIndex:"revision",width:85,isSortable:!0,isDraggable:!1,isEditable:!1}),i.push(e.getColumnDefinition({dataIndex:"maturityWithBadge"})),i.push({text:t.CHG_GOV_DataGrid_Column_CreationDate,dataIndex:"creationDate",width:"auto",isSortable:!0,isDraggable:!1,isEditable:!1}),i},i}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","DS/Tweakers/GeneratedToolbar","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";return e.extend({init:function(e){this._parent(e);this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),this.subscribeToModelEvents(e.treeDocument),0==e.treeDocument.getRoots().length?e.treeDocument._modelEvents.publish({event:"treeEmpty"}):e.treeDocument._modelEvents.publish({event:"treeNotEmpty"})},render:function(){try{var e={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.tileView=new o(e);try{new c}catch(e){console.log(e)}var t=p.prototype.createTreeDocument(a.writetoolbarDefinition(this.options)),i=new p({items:t,direction:"horizontal"});a.toolbar=i,this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates({expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}}),this.toolbar.typeRepresentationFactory.registerTypeRepresentations({expandInput:{stdTemplate:"expandInputtemplate"}});var n=this;this.tileView.buildStatusBar([{type:l.STATUS.NB_ITEMS},{type:l.STATUS.NB_SELECTED_ROWS}]),this.tileView.getTreeDocument().getXSO().onAdd(function(e){let t;e.getTreeDocument()&&(t=e.getTreeDocument().getSelectedNodes().length),n._modelEvents.publish({event:"cr-impact-analysis-contributor-object-selection-update",data:{count:t,accessBits:n.options.accessBits}})}),this.tileView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&n._modelEvents.publish({event:"cr-impact-analysis-contributor-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),document.getElementById("outer-contributor-grid-div")&&document.getElementById("outer-contributor-grid-div").destroy(),this.membersDatagridView=UWA.createElement("div",{id:"outer-contributor-grid-div",class:"outer-contributor-grid-div",styles:{width:"100%",height:"100%",display:"block"}});var s=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-contributor-grid-div"});this.toolbar.inject(s);var r=UWA.createElement("div",{class:"content-contributor-tile-div contributortileView"}),u=UWA.createElement("div",{class:"hideView",id:"contributorEmptyTileViewDiv"});UWA.createElement("div",{html:d.CHG_GOV_Contributors_DataGrid_PlaceHolder}).inject(u),this.tileView.inject(r),this.membersDatagridView.addContent(s),u.inject(r),r.inject(this.membersDatagridView)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"treeEmpty"},function(e){s.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){s.hideEmptyView()})},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgIRAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAAddMemberView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b){"use strict";var w={getDataToBuildAddMemberPanel:function(e){w.teamlayoutModel=e.model,w.id=e.id,w.objectTitle=e.objectTitle,w.options=e,w.modelForChangeCoordinator=new h,w.modelForAssignee=new h,w.modelForApprover=new h,w.modelForFollower=new h,this.filterByTrigramHandler()},setDataForAddMember:function(e){var t=[];return t.push({label:f.CHG_GOV_Members_DataGrid_ChangeCoordinators,id:"coordinator",allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_CCO",placeholder:f.CHG_Add_Member_Type_To_Search,customFilterMessage:f.CHG_No_Search_found,disabled:w.changecordinatorDivDisable,multiSearchMode:!0,supportType:["person"]}),t.push({label:f.CHG_GOV_Members_DataGrid_Assignee,id:"assignee",allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Assignee",placeholder:f.CHG_Add_Member_Type_To_Search,customFilterMessage:f.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"]}),t.push({label:f.CHG_GOV_Members_DataGrid_InformedUser,id:"follower",allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Follower",placeholder:f.CHG_Add_Member_Type_To_Search,customFilterMessage:f.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"]}),{title:f.CHG_Member_AddMember_Title,objectTitle:w.objectTitle,target:w.options.target,fields:t,addMemberSubmitHandler:this.addmember,searchFromModelAndUniqAndAdd:r.searchFromModelAndUniqAndAdd,teamlayoutModel:w.teamlayoutModel,makeDroppable:o.makeDroppable,type:"InvestigationRequest"}},launchAddMemberPanel:function(){var i={commandInfo:{type:"Investigation Request",facet:"Members",action:"IR>Members>Add Member"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),w.changecordinatorDivDisable=!1,1==b.isChangeCoordinatorConnected&&(w.changecordinatorDivDisable=!0);var n=w.setDataForAddMember(),o=new e(n);(new t).buildAddMemberDialog(o)},filterByTrigramHandler:function(){w.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new C).getTrigramNameFilter()),w.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new C).getTrigramNameFilter()),w.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new C).getTrigramNameFilter()),w.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new C).getTrigramNameFilter())},dragAndDropHandler:function(){var e=w.options.target.querySelector("#memberFieldElementchangeCoordinator");o.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForChangeCoordinatorField:function(e){return e},addmember:function(e,t){let i=e.assignee,n=e.approver?e.approver:"",o=e.coordinator,a=e.follower;var s=b.makeUpdateMemberJson("CONNECT",i,n,a,o,t),l=w.id;D.updateMembers(t,l,s).then(function(e){var t=r.processedChangeRequestMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],function(e){for(var i=e.membersTreeModel.getChildren(),n=[],o=0;o<t.length;o++){var a=t[o];if("Route Template"!=a.type){"Coordinator"==a.role&&(b.isChangeCoordinatorConnected=!0);for(var s=a.id,r=!1,l=0;l<i.length;l++)if(s==i[l].options.grid.id){r=!0;break}if(1==r){e.membersTreeModel.prepareUpdate();var d=i[l].options.description,c="";if(a.role.includes(",")){var u=a.role.split(",");for(let e=0;e<u.length;e++)c+=", "+b.getRoleNLSValue(u[e].trim()),i[l].options.grid.roles.push(u[e].trim())}else c=", "+b.getRoleNLSValue(a.role),i[l].options.grid.roles.push(a.role);var p=i[l].options.grid.role,g=","+a.role;i[l].options.description=i[l].options.grid.roleList=d.concat(c),i[l].options.grid.role=p.concat(g),e.membersTreeModel.pushUpdate()}else n.push(a)}else n.push(a),b.isRouteTemplateConnected=!0}n.length>0&&e.addNodesInLayout(n)})})}};return w}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageDataGridView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CollectionView/CollectionViewStatusBar","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/Menu/ContextualMenu","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageToolbar","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageContextualMenu","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridCol","DS/UIKIT/Input/Button","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgErrors","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b){"use strict";return e.extend({init:function(e){this._parent(e);this._modelEvents=null,this._toolbar=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new n},render:function(){var e=this;if(this.options.treeDocument&&this.options.target){var n={treeDocument:this.options.treeDocument,columns:this.options.columns,cellSelection:"none",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:d.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"dgViewFor_AffectedUsage",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!0,onContextualEvent:function(t){var i=[];if(t&&t.collectionView&&t.cellInfos){if(t.cellInfos.rowID>=0&&5==t.cellInfos.columnID)return m.showRMBMenuOnGridForDispositionCell(t,e.options.investigationRequestId,e.options.contextDetails.access).then(function(e){return e});if(t.cellInfos.rowID>=0&&10==t.cellInfos.columnID)return m.showRMBMenuOnGridForResolvedByCell(t).then(function(e){return e});if(t.cellInfos.rowID>=0)return m.showRMBMenuOnGrid(t).then(function(e){return e});i=t.collectionView.buildDefaultContextualMenu(t,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};n=UWA.merge(n,this.options),this.affectedUsageDgView=new t(n),this.affectedUsageDgView.getCustomViewsManager().onCustomViewsSave=function(e,t){e.map(e=>{if(e.identifier==t){let t=e.columnsVisibleFlag;if(null!=t&&null!=t){let e=Object.keys(t);s.getGlobalVariable().customeViewCOList=e}}})},a.unsubscribe("ChgGov_delayed_columns_model_updated"+widget.id),a.subscribe("ChgGov_delayed_columns_model_updated"+widget.id,function(t){e.affectedUsageDgView.prepareUpdateView(),e.affectedUsageDgView.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0)}),a.unsubscribe("updateRouteContent-"+widget.id),a.subscribe("updateRouteContent-"+widget.id,function(t){e.affectedUsageDgView.prepareUpdateView(),e.affectedUsageDgView.pushUpdateView({updateCellContent:!0,updateCellLayout:!0,updateCellAttributes:!0},!0),t="string"==typeof results?JSON.parse(t):t,t=v.getApprovalStatusValue(t);var i=e.affectedUsageDgView.treeDocument.getSelectedNodes();for(const[e,n]of Object.entries(t))i.forEach(t=>{e!=t.options.grid.dispositionInformation[0].dispostionId||t.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel}})})}),g.toolbar=this.affectedUsageDgView.setToolbar(g.writetoolbarDefinition()),this.toolbar=g.toolbar,this.affectedUsageDgView.buildStatusBar([{type:i.STATUS.NB_ITEMS},{type:i.STATUS.NB_SELECTED_ROWS}]),this.affectedUsageDgView.getTreeDocument().getXSO().onAdd(function(e){}),this.affectedUsageDgView.getTreeDocument().getXSO().onRemove(function(e){}),this.affectedUsageDgView.addEventListener(o.POINTERHIT,function(t,i){e.onItemClick(t,i)}),this.affectedUsageDgView.addEventListener("postEdit",function(e,t){console.log(h),h.prototype.changeDispositionType(t)}),this.affectedUsageDgView.addEventListener("postEdit",function(t,i){10==i.columnID&&e.updateApproversForDisposition(i)}),document.getElementById("outer-manageScopeAffectedUsage-grid-div")&&document.getElementById("outer-manageScopeAffectedUsage-grid-div").destroy(),this.affectedUsageDgViewContainer=UWA.createElement("div",{id:"outer-manageScopeAffectedUsage-grid-div",class:"outer-manageScopeAffectedUsage-grid-div"});let l=UWA.createElement("div",{class:"toolbar-manageScopeAffectedUsage-grid-div"});this.toolbar.inject(l),this.affectedUsageDGView=UWA.createElement("div",{class:"content-manageScopeAffectedUsage-grid-div"});let c=UWA.createElement("div",{class:"footer-manageScopeAffectedUsage-grid-div"}),u=UWA.createElement("div",{class:"buttons-manageScopeAffectedUsage-grid-div"});new f({value:d.CHG_GOV_Button_Close,className:"primary"}).inject(u).addEvent("onClick",function(){e.closeHandler()}),u.inject(c),this.affectedUsageDgView.inject(this.affectedUsageDGView),this.affectedUsageDgViewContainer.addContent(l),this.affectedUsageDgViewContainer.addContent(this.affectedUsageDGView),this.affectedUsageDgViewContainer.addContent(c),this.affectedUsageDgViewContainer.inject(this.options.target),this.affectedUsageDgViewContainer.setStyle("width",this.options.target.offsetWidth)}},closeHandler:function(){b("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler").manageScopePanel.close(),require(["DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome"],function(e){e.onRefresh()})},refresh:function(){this.render()},onItemClick:function(e,t){var i=this;if(t&&t.nodeModel){if(1==e.multipleHitCount)if(i._modelEvents.publish({event:"ChgManageScopeAffectedUsage_DGV_onClick",data:t.nodeModel,context:t.nodeModel}),t&&5==t.columnID){if(e.target.className.contains("chgIRAffectedCreateNewDisposition")){console.log("Create Disposition called");var n={model:t.nodeModel.options.grid,InvestigationRequestId:this.options.investigationRequestId,context:t.nodeModel,parentImpactedById:this.options&&this.options.physicalId?this.options.physicalId:void 0};require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler"],function(e){console.log(e),n.model&&n.model.isAffectedUsages&&1==n.model.isAffectedUsages?e.createDispositionThroughVerticalAssessment(n):e.createDispositionFromAffectedUsages(n)})}else if(e.target.className.contains("chgIRAffectedAddExistingDisposition"))console.log("Add existing called");else if(e.target.className.contains("disposition_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};u.buildAndDisplayContextualMenu(e.target,t)}}else if(t&&7==t.columnID){if(e.target.className.contains("chgIRDispositionAddApprover")){e.target.getOffsets().x,e.target.getOffsets().y;require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler"],function(e){let i={id:t.nodeModel.options.grid.id,type:t.nodeModel.options.grid.type,model:t.nodeModel,objectTitle:t.nodeModel.options.grid.title,dispositionID:t.nodeModel.options.grid.dispositionId?t.nodeModel.options.grid.dispositionId:void 0};e.addApproverHandler(i)})}}else if(t&&8==t.columnID){var o={};o.cellInfos=t,o.cellInfos.nodeModel.options.grid.dispositionInformation&&o.cellInfos.nodeModel.options.grid.dispositionInformation[0]&&o.cellInfos.nodeModel.options.grid.dispositionInformation[0].dispostionId&&c.executeMaturityForDisposition(o)}else if(t&&11===t.columnID)if(console.log("Create Change Action Called"),null==t.nodeModel.options.grid.dispositionInformation||""==t.nodeModel.options.grid.dispositionInformation)D.warn(d.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else{n={model:t.nodeModel.options.grid,InvestigationRequestId:this.options.investigationRequestId,context:t.nodeModel,parentImpactedById:this.options&&this.options.physicalId?this.options.physicalId:void 0};if(e.target.className.contains("chgIRAffectedCreateNewCAResolvedby"))null==t.nodeModel.options.grid.dispositionInformation||""==t.nodeModel.options.grid.dispositionInformation?D.warn("First Need to Create Disposition! Then only will be able to create ResolvedBy"):require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],function(e){n.parentID=i.options.treeDocument.getSelectedNodes()[0].options.grid.dispositionInformation[0].dispostionId;var t=h.prototype.addAsResolvedByInDispositionProcessing;h.prototype.createResolvedByInDispositionIR(n,t)});else if(e.target.className.contains("chgIRAffectedCreateAddExistingCAResolvedby"))console.log("Add existing called ResolvedBy "),h.prototype.addExistingResolvedByHandler(n),console.log("Finised add existing");else if(e.target.className.contains("resolvedby_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};u.buildAndDisplayContextualMenu(e.target,t)}}2==e.multipleHitCount&&(i._modelEvents.publish({event:"ChgGov_DGV_onDbClick",data:t.nodeModel,context:t.nodeModel}),t.nodeModel.select(!0))}},showSpinner:function(){console.log("show spinner"),p.mask(this.options.target)},hideSpinner:function(){console.log("hide spinner"),p.unmask(this.options.target)},reapplySortModel:function(){this.affectedUsageDgView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}},updateApproversForDisposition:function(e){console.log("update aapprivers handler");let t=e.nodeModel._options.grid.approvers,i=e.nodeModel._options.grid.dispositionInformation[0].approvers;console.log("approvers",t);const n={approver:{person:[],routetemplate:[]}};t.forEach(e=>{const t=(e.type||e.value.type).toLowerCase(),i=e.userid?"userid":"identifier",o=e[i]||e.value[i];"person"===t||"group"===t?n.approver[t].push(o):"route template"===t&&n.approver.routetemplate.push(e.id)});let o=e.nodeModel._options.grid.dispositionInformation[0].dispostionId;b("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler").addmember(n,"Disposition",o,i)}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/ChgIRManageScopeHandler",["DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionDataGridView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionGridCols","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedRevision/ChgManageScopeAffectedRevisionGridModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridCol","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageGridModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/manageScope/affectedUsage/ChgManageScopeAffectedUsageDataGridView","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Tab","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p){"use strict";var g={launchManageScopeView:async function(i,o,s,r){var c=this;this.scopeAnalysisId=o,this.investigationRequestId=s;let u=i.options.label;g.affectedRevisionContent=new UWA.Element("div",{id:"affectedRevisionDiv",styles:{height:"100%"}}),g.affectedUsageContent=new UWA.Element("div",{id:"affectedUsageDiv",styles:{height:"100%"}});var p=new t({identifier:"WebUX_IMF_ECM_MANAGE_SCOPE"}),h=new UWA.Element("div",{class:"dialogBoxTabs"}),m=new d({displayStyle:"strip"});m.inject(h),m.add({label:l.CHG_GOV_ManageScope_AffectedRevision_Label,value:"affectedRevisionTab",content:g.affectedRevisionContent,icon:{iconName:"flow-branch-list",fontIconFamily:1},isSelected:!0}),m.add({label:l.CHG_GOV_ManageScope_AffectedUsage_Label,value:"affectedUsageTab",content:g.affectedUsageContent,icon:{iconName:"where-used",fontIconFamily:1}}),p.reactToPointerEventsFlag=!1,this.manageScopePanel=new e({immersiveFrame:p,title:l.CHG_GOV_AffectedItems_Toolbar_ManageScope+": "+u,content:h,height:500,width:1e3,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_MANAGE_SCOPE"}),p.inject(widget.body),this.manageScopePanel.addEventListener("keydown",function(e){console.log("checking the key pressed ",e.which),27==e.which&&p.remove()});var C={physicalId:i.options.grid.serviceBasedObjId,selectedNodeData:i,immersiveFrame:p,investigationRequestId:s,contextDetails:r};try{this.loadAffectedRevisionData(C,n.getColumns(),g.affectedRevisionContent,o),"AffectedUsageTab"==m.value[0]&&this.loadAffectedUsageData(C,a.getColumns(),g.affectedUsageContent,c.scopeAnalysisId),m.addEventListener("tabButtonClick",function(e){e.options.value&&"affectedUsageTab"==e.options.value&&c.loadAffectedUsageData(C,a.getColumns(),g.affectedUsageContent,c.scopeAnalysisId,c.investigationRequestId)})}catch(e){console.error(e)}},loadAffectedRevisionData:async function(e,t,n,a){e.target=n,e.columns=t,g.affectedRevisionDGModel=new o,e.treeDocument=g.affectedRevisionDGModel.createTreeDocument(),g.affectedRevisionDGModel.registerCustomFilter(),g.chgAffectRevisionDataGridView=null,g.chgAffectRevisionDataGridView=new i(e),g.chgAffectRevisionDataGridView.render(a,e)},loadAffectedUsageData:async function(e,t,i,n,o){if(e.target=i,e.columns=t,g.affectedUsageDGModel=new s(e),e.treeDocument=g.affectedUsageDGModel.createTreeDocument(),g.affectedUsageDGModel.registerCustomFilter(),g.chgAffectUsageDataGridView=null,g.chgAffectUsageDataGridView=new r(e),g.chgAffectUsageDataGridView.render(),n){g.chgAffectUsageDataGridView.showSpinner();var a=await c.getAffectedItemsOnExpand(n);if(a.data.length>0){var l=await u.processIRAffectedItems(a,e.physicalId);g.affectedUsageDGModel.loadAffectedUsageData(e.treeDocument,l)}g.chgAffectUsageDataGridView.hideSpinner()}},addApproverHandler:function(e){console.log("Handler called for add approver"),e.type="Disposition",p.getDataToBuildAddMemberPanel(e),p.launchAddMemberPanel()},createDispositionFromAffectedUsages:async function(e){g.chgAffectUsageDataGridView.showSpinner(),console.log(e);let t=e.InvestigationRequestId;var i=[],n={id:e.model.id};i[0]=n;await s.prototype.createNewDispositionInAffectedUsages(t,i,e.context,g);g.chgAffectUsageDataGridView.hideSpinner()},createDispositionThroughVerticalAssessment:async function(e){g.chgAffectUsageDataGridView.showSpinner(),console.log(e);let t=e.InvestigationRequestId;var i=[],n={parentImpactedBy:e.parentImpactedById,verticalAssessmentImpactedBy:e.model.id,verticalAssessmentObjType:e.model.type,verticalAssessmentObjService:"3DSpace"};i[0]=n;await s.prototype.createDispositionThroughVerticalAssessment(t,i,e.context,g);g.chgAffectUsageDataGridView.hideSpinner()}};return g}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/util/ChgCRrelatedScopeGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C){"use strict";let f={createRelatedScopeView:function(t,s){var r=this;t.setStyles({position:"relative"});let g={};(g=UWA.merge(g,s)).target=t,g.columns=i.getColumns(),this.ChgCRrelatedScopeDataGridModel=new n(g.id),this.id=g.id,this.modelEvents=g.modelEvents,r.treeDocument=g.treeDocument=r.ChgCRrelatedScopeDataGridModel.createTreeDocument(),r.ChgCRrelatedScopeTreeModel=g.treeDocument,r.ChgCRrelatedScopeDataGridModel.registerCustomFilter(),r.relatedScopeView=new e(g),h.showLoader(g.target,r.relatedScopeView.loader),f.changeView(),this.subscribeToModelEvents(g.treeDocument),p.makeDroppable(g.target,r.dropHandler),c.getCRRelatedScope(s.id).then(async function(e){var t={};e.data[0]&&e.data[0].idsOfNonIndexedData&&(t=e.data[0].idsOfNonIndexedData,e.data.splice(0,1));var i=await u.processedChangeRequestRelatedScope(e);if(r.chgCRrelatedScopeDataGridModel=new n(s.id),h.fetchMaturityStateCSS(i),r.chgCRrelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,i),h.hideLoader(g.target,r.relatedScopeView.loader),t&&t.length>0){var c=new Map,p=t.length;for(let e=0;e<t.length;e+=50){let i=[];i=p<50?t.slice(e,e+p):t.slice(e,e+50);for(var m=[],C=new Map,v=i,D=0;D<v.length;D++){var b=v[D];m.push(b.id),C.set(b.id,b)}var w=[];if(m.length>0){var S=u.commonPredicatedForFedSearch(),I=await u.callFederatedSearch(m,S);if(I&&I.results&&I.results.length>0)w=await u.processReportedAgainstFederatedSearch(I,C)}r.chgCRrelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,w),h.hideLoader(g.target,r.relatedScopeView.loader),c=new Map([...c,...C]),p-=50}if(c&&c.size>0){r.relatedScopeView.indexInfoDiv.show();var _=await d.recent();if(_&&_.results&&_.results.length>0){var y=u.filterNonIndexedDataNew(_,c);c.size!=y.length&&a.warn(o.CHG_GOV_Not_Accessable_Data,!0);var E=await u.processInformationForRecentReportedAgainst(y);h.fetchMaturityStateCSS(E),r.chgCRrelatedScopeDataGridModel.loadRelatedScopeData(g.treeDocument,E)}}}else r.relatedScopeView.indexInfoDiv.hide();var O=u.getDefaultFilter(g.columns);g.treeDocument.setFilterModel(O),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgCRrelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgCRrelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgCRrelatedScopeTreeModel)}),0==g.treeDocument.getChildren().length?g.treeDocument._modelEvents.publish({event:"treeEmpty"}):g.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),f.updateViewBasedOnAccessBit(),f.changeView(),h.hideLoader(g.target,r.relatedScopeView.loader)},function(e){return h.hideLoader(g.target,r.relatedScopeView.loader),Promise.reject(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);var t;f.ChgCRrelatedScopeDataGridModel.treeDocument;t=d.parseObjectInformation(e),f.ChgCRrelatedScopeDataGridModel.addExistingChildren(t)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),g.unsubscribe(`CR_RelatedScope:${widget.id}`),g.subscribe(`CR_RelatedScope:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRrelatedScopeTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRrelatedScopeTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRrelatedScopeTreeModel)})}),g.unsubscribe(`${e.options.id} of ${widget.id}`),g.subscribe(`${e.options.id} of ${widget.id}`,function(t){f.ChgCRrelatedScopeDataGridModel.filterView(t,e)}),g.unsubscribe(`${e.options.id} colorize ${widget.id}`),g.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){f.ChgCRrelatedScopeDataGridModel.enableColorizeView(t,e)}),g.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),g.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){f.ChgCRrelatedScopeDataGridModel.disableColorizeView(t,e)}),g.unsubscribe("updateIndexingIconForHideOrShowInCRReportedAgainst"),g.subscribe("updateIndexingIconForHideOrShowInCRReportedAgainst",function(e){i.relatedScopeView.indexInfoDiv.show()}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-related-scope-object-selection-update")]||this.modelEvents.subscribe({event:"cr-related-scope-object-selection-update"},function(e){f.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Reported Against",action:"CR>Reported Against>Add"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=f.ChgCRrelatedScopeDataGridModel.treeDocument.getAllDescendants();f.createExcludeListForSearch(t);const i=r.activateSearch();l.getGlobalVariable().is3DSpace&&i.socket.subscribeServer("SearchComServer",getTopWindow()),r.search(o.CHG_GOV_RelatedScope,"Program,Project Space,Model,Products,VPMReference,RFLVPMLogicalReference",f.OnSearchComplete,"relatedScope",i,void 0,void 0,{condition:"addExistingRelatedScope",extendedQuery:""})},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[];for(var n=0;n<e.length;n++)i.push({id:e[n][8]&&null!=e[n][8]?e[n][8]:e[n][0],updateAction:"CONNECT",service:e[n][7]&&e[n][7].includes(":")?e[n][7].split(":")[0]:e[n][7],type:e[n][2],environment:l.getGlobalVariable().tenant});i.length&&(t.hideEmptyView(),f.ChgCRrelatedScopeDataGridModel.addExistingChildren(i))},globalSubscribeForCRRelatedScopeView:function(){s.addObserver("ChgCRrelatedScopeDataGridLayout","CO-AccessBit-Update",f.handleAccessBitUpdate),s.addObserver("ChgCRrelatedScopeDataGridLayout","Lifecycle.Modification",f.handleForMaturityUpdate),s.addObserver("ChgCRrelatedScopeDataGridLayout","CO-Properties-Update",f.handlePropertiesUpdateForRelatedScope)},handleAccessBitUpdate:function(e){"false"==e.accessBits.ManageReportedAgainst?(f.accessBit=!1,f.updateViewBasedOnAccessBit()):(f.accessBit=!0,f.updateViewBasedOnAccessBit())},updateViewBasedOnAccessBit:function(){0==f.accessBit&&f.relatedScopeView.relatedScopeDataGridView.getToolbar().updateNodeModel("add",{visibleFlag:!1})},removeHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Reported Against",action:"CR>Reported Against>Remove"}};C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const i=f.treeDocument.getSelectedNodes();if(i.length>0){let e=[];for(var n=0;n<i.length;n++)e.push({id:i[n].options.grid.id,type:i[n].options.grid.type,updateAction:"DISCONNECT"});f.ChgCRrelatedScopeDataGridModel.removeExistingChildren(e).then(function(e){0==f.treeDocument.getAllDescendants().length&&t.showEmptyView()},function(e){})}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){e.count>0&&f.accessBit?f.relatedScopeView.toolbar.updateNodeModel("remove",{visibleFlag:!0}):f.relatedScopeView.toolbar.updateNodeModel("remove",{visibleFlag:!1})},handleForMaturityUpdate:function(e){if(e){let t=f.treeDocument.getSelectedNodes();h.getHandleForMaturityUpdate(JSON.parse(e),t)}},handlePropertiesUpdateForRelatedScope:function(e){var t=f.ChgCRrelatedScopeTreeModel;t&&m.handlePropertiesOnUpdate(t,e)}};return f.globalSubscribeForCRRelatedScopeView(),f}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRRelatedScopefacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgServices/scripts/services/ChgDataService","DS/EditPropWidget/constants/EditPropConstants","UWA/Class/Model","DS/PlatformAPI/PlatformAPI","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/relatedScope/ChgCRrelatedScopeDataGridLayout"],function(e,t,i,n,o,a,s,r,l){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"relatedScope-CR-container"}))},updateFacet:function(){var e=this,t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;e.elements.container.setContent("");var n={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};i.getObjectTypeInformation(n.id).then(function(t){if("Change Request"==t)if(l.accessBit){var o=e.elements.container;l.createRelatedScopeView(o,n)}else i.getChangeRequestUserAccess(n.id).then(function(t){var i=t.data[0].dataelements;l.accessBit="true"==i.ManageReportedAgainst;var o=e.elements.container;l.createRelatedScopeView(o,n)})})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridModel",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/TreeModel/BaseFilter","DS/ENOChgServices/scripts/services/ChgErrors"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";var m=g.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),C=n.extend({init:function(e){this.contextID=e.id,this.objectType=e.isKindOfType},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new o({useAsyncPreExpand:!0});return this.setTreeDocument(e),e},getRolesAllowed:function(e){return"ChangeAction"===e?["owner","contributor","approver","follower"]:["owner","contributor","coordinator","follower"]},loadMembersData:function(e,t,i){var n=this;e.prepareUpdate(),c.isChangeCoordinatorConnected=!1,n.getRolesAllowed(i).forEach(function(t){var i=c.getRoleNLSValue(t),o=n.createRootNode(i);e.addRoot(o),n.loadRoleData(o,[],i)});for(var o=0;o<t.length;o++){var a=t[o];for(var s in a){var r=c.getRoleNLSValue(s),l=e.getRoots().find(function(e){return e._options.label.includes(r)});l&&n.loadRoleData(l,a[s],r)}}e.getChildren().sort(function(e,t){return e.options.order-t.options.order}),e.pushUpdate();let u=document.getElementById("caMembers");u&&d.isMasked(u)&&d.unmask(u)},createRootNode:function(e){return new a({label:e.charAt(0).toUpperCase()+e.slice(1)+" (0)",icons:[{iconName:"user"}],grid:{isRoot:!0,role:e},order:{Owner:1,coordinator:2,Assignee:3,Approver:4,Follower:5}[e]||999})},loadRoleData:function(e,t,i){var n=this.createTreeDocumentNodeModel(t,i);e.addChild(n),e.setLabel(i.charAt(0).toUpperCase()+i.slice(1)+" ("+n.length+")"),e.expandAll()},createTreeDocumentNodeModel:function(e,t){for(var i=[],n=0;n<e.length;n++){var o=this.createTreeNode(e[n],t);i.push(o)}return i},createTreeNode:function(e,t){e.username=e.userId?e.userId:"",e.role=t,e.id=e.id;return new a({grid:e})},createCustomPersonNameField:function(e){var t="";t="person"===e.type?e.fullName+" ("+e.user+")":e.fullName;var i=new UWA.Element("div",{class:"members "+e.root,title:t}),n="";if((n="Group"===e.type?UWA.createElement("span",{class:"user-group wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-users-group",html:e.title}):this.getPersonImageDiv(e)).addClassName("assignee"),"Route Template"==e.type)var o=UWA.createElement("span",{class:"userName",html:e.title});else o=UWA.createElement("span",{class:"userName",html:e.fullName});return n.inject(i),o.inject(i),i},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.userId+"/format/normal";i=r.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),o="";if(r.getGlobalVariable().isSwymInstalled)o=UWA.createElement("img",{class:"userIcon",src:i});else{var a=u.getAvatarDetails(e.fullName);o=UWA.createElement("div",{html:a.avatarStr}),1==t?(o.addClassName("chg-member-profile-picture"),o.addClassName("chg-team-profile-text")):o.addClassName("avatarIcon"),o.style.setProperty("background",a.avatarColor)}return o.inject(n),n},getRouteTemplateImageDiv:function(e){var t=new UWA.Element("div",{});return UWA.createElement("img",{class:"memberIcon",src:e.icon}).inject(t),t},createTreeDocumentNodeModelForNewMember:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i],e[i].role);t.push(n)}return t},addNodesInLayoutModel:function(e,t){C.prototype.createTreeDocumentNodeModelForNewMember(t);e.prepareUpdate(),this.updateTreeDocument(t,e),e.pushUpdate()},updateTreeDocument:function(e,t){for(var i=0;i<e.length;i++)for(var n=e[i],o=Array.isArray(n.roles)?n.roles:[n.roles],a=0;a<o.length;a++){var s=o[a],r=c.getRoleNLSValue(s),l=t.getRoots().find(function(e){return e._options.label.includes(r)});if(l){var d=C.prototype.createTreeDocumentNodeModelForNewMember([n]);l.addChild(d),l.setLabel(r+" ("+l.getNumberOfChildren()+")"),l.expandAll()}}},updateCountOnContextualAction:function(e,t){this.treeDocument.getChildren().forEach(e=>{var i=e.getAttributeValue("role"),n=c.getRoleWithoutNLS(i),o=i.split(",").filter(e=>""!==e.trim()).length;if(n&&n.includes(t)){var a=e.options.label.replace(/\(\d+\)/,"("+o+")");console.log(a),e.setLabel(a),e.expandAll()}}),e.expandAll()},setFilterModel:function(e){this.treeDocument.setFilterModel(e)},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},getFilterModel:function(){return{label:{filterId:"set"},username:{filterId:"set",filterModel:""}}},removeChildren:async function(){try{const t=this.contextID,i=this.objectType,n=this.treeDocument.getSelectedNodes();if(0==n.length)return;const o={person:[],group:[]},a={person:[],routetemplate:""},s={person:[],group:[]},r={person:[]};for(const t of n){const i=t.options.grid;let n;if((n=["contributor","follower","approver","coordinator","owner"].includes(i.role)?i.role:c.getRoleWithoutNLS(i.role)).includes("owner")||n.includes("originator")){const t=document.getElementById("caMembers");t&&d.isMasked(t)&&d.unmask(t),h.warn(e.CHG_Warn_Member_Remove_Owner_Originator)}else n.includes("coordinator")&&(r.person=i.userId,c.isChangeCoordinatorConnected=!1),n.includes("contributor")&&("Person"===i.type?o.person.push(i.userId):"Group"===i.type&&o.group.push(i.id),c.isChangeCoordinatorConnected=!1),n.includes("approver")&&("Person"===i.type?a.person.push(i.userId):"Route Template"===i.type&&(a.routetemplate=i.id)),n.includes("follower")&&("Person"===i.type?s.person.push(i.userId):"Group"===i.type&&s.group.push(i.id))}if(a.person.length>0||""!==a.routetemplate||s.person.length>0||s.group.length>0||o.person.length>0||o.group.length>0||r.person.length>0){const e=c.makeUpdateMemberJson("DISCONNECT",o,a,s,r,i);await u.updateMembers(i,t,e);for(const e of n){const t=e.options.grid.role;t.includes("owner")||t.includes("originator")||(this.treeDocument.removeRoot(e),this.updateCountOnContextualAction(e,t))}if(""!==a.routetemplate)u.reviewerType.typeOfReviewer="";else if(a.person.length>0){this.treeDocument.getChildren().some(e=>e.options.grid.role.includes("approver"))||(u.reviewerType.typeOfReviewer="")}const l=document.getElementById("caMembers");l&&d.isMasked(l)&&d.unmask(l)}}catch(e){const t=document.getElementById("caMembers");t&&d.isMasked(t)&&d.unmask(t)}}});return C}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p={showRMBMenuOnGrid:function(e){return new Promise(function(t,i){const o=[];let a=!1;const c=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();let u=[],g=[],h=[];c.forEach(e=>{u.push(e.options.grid.id),g.push(e.options.grid.serviceBasedObjId),e.options.grid.sourceType&&"CSD"!=e.options.grid.sourceType&&h.push(e.options.grid.serviceBasedObjId)}),c.length>1&&(a=!0);const m=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),C=e.cellInfos.nodeModel.options.grid.serviceBasedObjId,f=e.cellInfos.nodeModel.options.grid.id,v=e.cellInfos.nodeModel.options.grid.type,D=e.cellInfos.nodeModel.options.grid.name,b=e.cellInfos.nodeModel.options.grid.displayType;let w=[];w.push(v),e.cellInfos.nodeModel.options.grid.kind&&""!=e.cellInfos.nodeModel.options.grid.kind&&(w=w.concat(e.cellInfos.nodeModel.options.grid.kind));const S={objectId:C,objectType:v,objectTaxonomies:w,displayName:D,displayType:b,facetName:"dependency"};let I={};I.objectID=f,I.objectTitle=D,I.objectType=v,I.serviceId="3DSpace",I.label=e.cellInfos.nodeModel.options.grid.title,I.changeType="Change Request",I.facet="Analysis Basis",I.action="CR>Change Impacts";const _=m.openWith(S);a?(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(p.getRelationalExplorerMenu(g)),h.length>0&&(o.push(d.getMaturityMenu(void 0,h)),o.push(p.getTransferMenu(e)),o.push(r.getDownloadMenu(h)),!h.length>1&&o.push(r.getPreviewMenu(h))),t(o)):(h.length>0&&o.push(n.createPropertyPushItem(h)),o.push(p.getRelationalExplorerMenu(g)),_.then(i=>{i&&o.push(i),h.length>0&&(o.push(d.getMaturityMenu(void 0,h)),o.push(p.getTransferMenu(e))),o.push(p.getChangeImpacts(I)),s.getDocuments(h).then(function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(o.push(r.getDownloadMenu(h)),o.push(r.getPreviewMenu(h))),t(o)}).catch(e=>{console.log(e),t(o)})}))})},getTransferMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){for(var i=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[],o=0;o<i.length;o++)i[o].options.grid.sourceType&&"CSD"!=i[o].options.grid.sourceType&&n.push(i[o].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_CA_Header_Change_Impacts,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Analysis Basis",action:"CR>Analysis Basis>RMB>Change Impacts"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}}};return p}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/util/ChgCRContributorsGridUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/contributors/ChgCRContributorsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","require"],function(e,t,i,n,o,a,s,r,l,d,c,u){"use strict";var p={createMembersView:function(t,i){i=i[0];var o=this,s={};(s=UWA.merge(s,i)).target=t,this.ChgCRContributorsDataGridModel=new n(s.grid.parentCRId,s.grid.id),this.modelEvents=s.modelEvents,this.subscribeToModelEvents(s.treeDocument),s.treeDocument=this.ChgCRContributorsDataGridModel.createTreeDocument();a.getImpactAnalysisFacet(s.grid.id,"contributors").then(i=>{this.ChgCRContributorsDataGridModel.loadContributor(s.treeDocument,i.data[0].contributors),this.ChgCRContributorTreeModel=s.treeDocument,c.makeDroppable(s.target,o.dropHandler),this.treeDocument=s.treeDocument;var n=new e(s);this.membersDataGridView=n,r.unmask(t)})},subscribeToModelEvents:function(e){this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-contributor-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-contributor-object-selection-update"},function(e){p.handleObjectSelectionUpdate(e)})},changeView:function(e){i.changeView("GridView")},dropHandler(e){for(var t=[],i=[],n=[],a={data:{}},s=0;s<e.length;s++){var r=e[s].serviceId.toLowerCase();"Group"==e[s].objectType||"foaf:Group"==e[s].objectType?t.push({id:e[s].objectId,name:e[s].displayName,updateAction:"CONNECT",type:e[s].objectType}):"3dswym"==r&&"pno:Person"==e[s].objectType?i.push(e[s].objectId.replace("iam:","")):("3dspace"==r||r.includes("3dspace"))&&n.push(e[s])}0!=n.length?(a.data.items=n,o.getObjectAdditionalInfo(a).then(function(e){for(var i=0;i<e.length;i++)t.push({id:e[i].pid,name:e[i].objectName,updateAction:"CONNECT",type:e[i].type});p.addExistingChildrenHandler(t)},function(e){console.log("Failed in getting response")})):0!=i.length?o.getAdditionSwymPersonInfo(i).then(function(e){for(var n=0;n<i.length;n++){var o=e.additionObjectInfo[i[n]];t.push({id:o.pid,name:o.objectName,updateAction:"CONNECT",type:o.type})}p.addExistingChildrenHandler(t)},function(e){console.log("Failed in getting response")}):p.addExistingChildrenHandler(t)},addExistingChildrenHandler:function(e){p.ChgCRContributorsDataGridModel.addExistingChildren(e).then(function(e){p.modelEvents.publish({event:"update-contributor",data:{operation:"CONNECT",context:e.data}})},function(e){})},addExistingHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Members",action:"IA>Members>Add Assignees"}};if(u("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),d.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=Person&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var t=function(i){if(i.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,p.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",t)}else console.log("inside EVENT")};window.addEventListener("storage",t)}else{let e=p.ChgCRContributorsDataGridModel.treeDocument.getAllDescendants(),t={condition:"addExistingIAAssignee",extendedQuery:p.createExcludeListForSearch(e)};const i=o.activateSearch();o.search(l.CHG_Contributors_Toolbar_AddContributor,"Person",p.OnSearchComplete,"Contributors",i,void 0,"userGroupForIA",t)}},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++){if("Person"==e[i][2])var n={id:e[i][0],name:e[i][1],updateAction:"CONNECT",type:e[i][2]};else n={id:e[i][0],name:e[i][5],updateAction:"CONNECT",type:e[i][2]};t.push(n)}t.length&&p.ChgCRContributorsDataGridModel.addExistingChildren(t).then(function(e){p.modelEvents.publish({event:"update-contributor",data:{operation:"CONNECT",context:e.data}})},function(e){})},removeHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Members",action:"IA>Members>Remove Assignees"}};u("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("deleting nodeModel");const t=p.treeDocument.getSelectedNodes();if(t.length>0){let e=[];for(var i=0;i<t.length;i++)e.push({id:t[i].options.grid.id,name:t[i].options.grid.name,updateAction:"DISCONNECT",type:t[i].options.grid.type}),null==e[i].name&&(e[i].name=t[i].options.grid.userid,null==e[i].name&&(e[i].name=t[i].options.grid.label),null==e[i].name&&(e[i].name="Random"));p.ChgCRContributorsDataGridModel.removeExistingChildren(e).then(function(e){p.modelEvents.publish({event:"update-contributor",data:{operation:"DISCONNECT",context:e}})},function(e){})}else s.error(l.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){e.count>0&&"true"===e.accessBits.RemoveAssignee?p.membersDataGridView.toolbar.updateNodeModel("remove",{visibleFlag:!0}):p.membersDataGridView.toolbar.updateNodeModel("remove",{visibleFlag:!1})},changeView:function(e){i.changeView("GridView")}};return p}),define("DS/ENOChgGovernanceUX/scripts/router/ChgGovRouterConfig",["DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o,a){return{initialize:function(){e.initialize(t.ROUTE_HOME,t.PATH_HOME),[{name:t.ROUTE_RECENTY_OPENED,path:"/"+t.PATH_RECENTY_OPENED},{name:t.ROUTE_MY_CHANGE_ORDERS,path:"/"+t.PATH_MY_CHANGE_ORDERS},{name:t.ROUTE_MY_CHANGE_ACTIONS,path:"/"+t.PATH_MY_CHANGE_ACTIONS},{name:t.ROUTE_CO_INFO,path:"/"+t.PATH_CO_INFO},{name:t.ROUTE_CO_DETAILS,path:"/"+t.PATH_CO_DETAILS},{name:t.ROUTE_MY_CHANGE_REQUESTS,path:"/"+t.PATH_MY_CHANGE_REQUESTS},{name:t.ROUTE_MY_INVESTIGATION_REQUESTS,path:"/"+t.PATH_MY_INVESTIGATION_REQUESTS},{name:t.ROUTE_CR_INFO,path:"/"+t.PATH_CR_INFO},{name:t.ROUTE_CR_DETAILS,path:"/"+t.PATH_CR_DETAILS},{name:t.ROUTE_CA_INFO,path:"/"+t.PATH_CA_INFO},{name:t.ROUTE_CA_DETAILS,path:"/"+t.PATH_CA_DETAILS},{name:t.ROUTE_IR_INFO,path:"/"+t.PATH_IR_INFO},{name:t.ROUTE_IR_DETAILS,path:"/"+t.PATH_IR_DETAILS},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL1,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL1},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL2,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL2},{name:t.ROUTE_CR_ORCHESTRATION_LEVEL3,path:"/"+t.PATH_CR_ORCHESTRATION_LEVEL3},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL1,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL1},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL2,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL2},{name:t.ROUTE_CO_ORCHESTRATION_LEVEL3,path:"/"+t.PATH_CO_ORCHESTRATION_LEVEL3},{name:t.ROUTE_CR_DETAILS_LEVEL3PLUS,path:"/"+t.ROUTE_CR_DETAILS_LEVEL3PLUS},{name:t.ROUTE_CO_DETAILS_LEVEL3PLUS,path:"/"+t.ROUTE_CO_DETAILS_LEVEL3PLUS}].forEach(function(t){e.addRoute(t)});var n={};for(var s in n[t.ROUTE_HOME]={activate:function(){if(1==a.getGlobalVariable().isNative){var i={name:t.ROUTE_MY_CHANGE_ACTIONS,params:{}};o.setRouteInfo(i);var n=e.getDependency("xChangeApp");(s=e.getDependency("applicationChannel")).publish({event:"information-panel-close",data:null}),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_ACTIONS}}),n.clearContent(),n._initChangeActionContent(),n.initializePropertyPanelwithEmptyData()}else{n=e.getDependency("xChangeApp");var s=e.getDependency("applicationChannel");i={name:t.ROUTE_RECENTY_OPENED,params:{}};o.setRouteInfo(i),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_RECENTY_OPENED}}),n._initRecentContent(),n.initializePropertyPanelwithEmptyData()}},deactivate:function(){var t=e.getDependency("xChangeApp");e.getDependency("applicationChannel");t.clearContent(),data.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_RECENTY_OPENED]={activate:function(i){var n={name:t.ROUTE_RECENTY_OPENED,params:{}};o.setRouteInfo(n);var a=e.getDependency("xChangeApp");e.getDependency("applicationChannel").publish({event:"welcome-panel-select-action",data:{id:t.PATH_RECENTY_OPENED}}),a.clearContent(),a._initRecentContent(),a.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_MY_CHANGE_ORDERS]={activate:function(i){applicationChannelLocal=e.getDependency("applicationChannel");var n=e.getDependency("xChangeApp");e.getDependency("applicationChannel").publish({event:"information-panel-close",data:null}),n.clearContent(),n.loadingMyChangeOrders(),n.initializePropertyPanelwithEmptyData();var a={name:t.ROUTE_MY_CHANGE_ORDERS};o.setRouteInfo(a)},deactivate:function(){e.getDependency("xChangeApp"),e.getDependency("applicationChannel")}},n[t.ROUTE_MY_CHANGE_ACTIONS]={activate:function(i){var n={name:t.ROUTE_MY_CHANGE_ACTIONS,params:{}};o.setRouteInfo(n);var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");s.publish({event:"information-panel-close",data:null}),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_ACTIONS}}),a.clearContent(),a._initChangeActionContent(),a.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_MY_CHANGE_REQUESTS]={activate:function(i){var n={name:t.ROUTE_MY_CHANGE_REQUESTS,params:{}};o.setRouteInfo(n);var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");s.publish({event:"information-panel-close",data:null}),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_CHANGE_REQUESTS}}),a.clearContent(),a._initChangeRequestContent(),a.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_MY_INVESTIGATION_REQUESTS]={activate:function(i){var n={name:t.ROUTE_MY_INVESTIGATION_REQUESTS,params:{}};o.setRouteInfo(n);var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");s.publish({event:"information-panel-close",data:null}),s.publish({event:"welcome-panel-select-action",data:{id:t.PATH_MY_INVESTIGATION_REQUESTS}}),a.clearContent(),a._initChangeInvestigationRequestContent(),a.initializePropertyPanelwithEmptyData()},deactivate:function(t){var i=e.getDependency("xChangeApp");e.getDependency("applicationChannel");i.clearContent(),t.params.isRefresh||o.setRouteInfo({name:null})}},n[t.ROUTE_CO_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CO_INFO;var a,s=(a={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,r={linkID:t.ROUTE_CO_DETAILS,linkText:s,additionalData:a};o.publish({event:"breadcrumb-add-link",data:r})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CO_DETAILS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var u=d.name,p={linkID:t.ROUTE_CO_DETAILS,linkText:u,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_INFO}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_INFO}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(e){}},n[t.ROUTE_CR_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CR_INFO;var a,s=(a={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,r={linkID:t.ROUTE_CR_DETAILS,linkText:s,additionalData:a};o.publish({event:"breadcrumb-add-link",data:r})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CR_DETAILS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeRequestId:d.id,changeRequestName:d.name,changeRequestVersion:d.version,changeRequestName:d.modelName},o.setRouteInfo(c);var u={linkID:t.ROUTE_CR_DETAILS,linkText:r.name,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(e){}},n[t.ROUTE_CA_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_CA_INFO;var a,s=(a={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,r={linkID:t.ROUTE_CA_DETAILS,linkText:s,additionalData:a};o.publish({event:"breadcrumb-add-link",data:r})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_CA_DETAILS]={activate:function(i){var n=e.getDependency("xChangeApp"),a=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh),n.clearContent(),n.showIDCard(i.params.nodeModel,i.params.mode);var s,r={name:t.ROUTE_CA_DETAILS};s={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},r.params={changeRequestId:s.id,changeRequestName:s.name,changeRequestVersion:s.version,changeRequestName:s.modelName},o.setRouteInfo(r);var l=s.name,d={linkID:t.ROUTE_CA_INFO,linkText:l,additionalData:s};a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_DETAILS}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_INFO}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_DETAILS}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_INFO}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),a.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),a.publish({event:"breadcrumb-add-link",data:d})},deactivate:function(e){}},n[t.ROUTE_IR_INFO]={activate:function(i){var n=e.getDependency("xChangeApp"),o=e.getDependency("applicationChannel");n.deactivateWP(i.params.isRefresh);t.ROUTE_IR_INFO;var a,s=(a={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name}).name,r={linkID:t.ROUTE_IR_DETAILS,linkText:s,additionalData:a};o.publish({event:"breadcrumb-add-link",data:r})},deactivate:function(t){var i=e.getDependency("xChangeApp");i.reactivateWP();e.getDependency("applicationChannel");i.clearContent()}},n[t.ROUTE_IR_DETAILS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),n.params.nodeModel.model.isOriginalKindOf="Investigation Report",a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_IR_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeRequestId:d.id,changeRequestName:d.name,changeRequestVersion:d.version,changeRequestName:d.modelName},o.setRouteInfo(c);var u={linkID:t.ROUTE_IR_DETAILS,linkText:r.name,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_IR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_IR_INFO}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(e){}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL1]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level1Node;n.params.nodeModel.level1Node.name?r.name=n.params.nodeModel.level1Node.name:r.name=n.params.name,"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level&&(a.clearContent(),a.openIDCard(r.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL1];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_ORCHESTRATION_LEVEL1};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var u=d.name,p={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL1,linkText:u,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(i){if(i.name==t.ROUTE_CR_DETAILS){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeRequestId:n.id,changeRequestName:n.name,changeRequestVersion:n.version,changeRequestName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL2]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level2Node;n.params.nodeModel.level2Node.name?r.name=n.params.nodeModel.level2Node.name:r.name=n.params.name,a.deactivateWP(n.params.isRefresh),"level3"!=n.params.nodeModel.level&&(a.clearContent(),a.openIDCard(r.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL2];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_ORCHESTRATION_LEVEL2};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var u=d.name,p={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL2,linkText:u,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(i){if(i.name==t.ROUTE_CR_ORCHESTRATION_LEVEL1){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CR_ORCHESTRATION_LEVEL3]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level3Node;n.params.nodeModel.level3Node.name?r.name=n.params.nodeModel.level3Node.name:r.name=n.params.name,a.deactivateWP(n.params.isRefresh),a.clearContent(),a.openIDCard(r.id);let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL3];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_ORCHESTRATION_LEVEL3};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var u=d.name,p={linkID:t.ROUTE_CR_ORCHESTRATION_LEVEL3,linkText:u,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL3}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(i){if(i.name==t.ROUTE_CR_ORCHESTRATION_LEVEL2){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL1]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level1Node;n.params.nodeModel.level1Node.name?r.name=n.params.nodeModel.level1Node.name:r.name=n.params.name,"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level&&(a.clearContent(),a.openIDCard(r.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL1];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_ORCHESTRATION_LEVEL1};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var u=d.name,p={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL1,linkText:u,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(i){if(i.name==t.ROUTE_CO_DETAILS){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL2]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level2Node;n.params.nodeModel.level2Node.name?r.name=n.params.nodeModel.level2Node.name:r.name=n.params.name,a.deactivateWP(n.params.isRefresh),"level3"!=n.params.nodeModel.level&&(a.clearContent(),a.openIDCard(r.id));let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL2];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_ORCHESTRATION_LEVEL2};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var u=d.name,p={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL2,linkText:u,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(i){if(i.name==t.ROUTE_CO_ORCHESTRATION_LEVEL1){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CO_ORCHESTRATION_LEVEL3]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r=n.params.nodeModel.level3Node;n.params.nodeModel.level3Node.name?r.name=n.params.nodeModel.level3Node.name:r.name=n.params.name,a.deactivateWP(n.params.isRefresh),a.clearContent(),a.openIDCard(r.id);let l=[i._KEY,i._MODEL,i._ORCHESTRATION_LEVEL3];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_ORCHESTRATION_LEVEL3};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var u=d.name,p={linkID:t.ROUTE_CO_ORCHESTRATION_LEVEL3,linkText:u,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL3}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(i){if(i.name==t.ROUTE_CO_ORCHESTRATION_LEVEL2){let t=e.getDependency("xChangeApp");t.clearContent(),t.openIDCard(i.params.id);var n,a={name:i.name};n={id:i.params.id,name:i.params.name,version:"1",modelName:i.params.name},a.params={changeOrderId:n.id,changeOrderName:n.name,changeOrderVersion:n.version,changeOrderName:n.modelName},o.setRouteInfo(a)}}},n[t.ROUTE_CR_DETAILS_LEVEL3PLUS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_CR_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeRequestId:d.id,changeRequestName:d.name,changeRequestVersion:d.version,changeRequestName:d.modelName},o.setRouteInfo(c);var u={linkID:t.ROUTE_CR_DETAILS,linkText:r.name,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),s.publish({event:"breadcrumb-add-link",data:u})},deactivate:function(e){}},n[t.ROUTE_CO_DETAILS_LEVEL3PLUS]={activate:function(n){var a=e.getDependency("xChangeApp"),s=e.getDependency("applicationChannel");let r={};"level1"!=n.params.nodeModel.level&&"level2"!=n.params.nodeModel.level&&"level3"!=n.params.nodeModel.level?(a.deactivateWP(n.params.isRefresh),a.clearContent(),a.showIDCard(n.params.nodeModel,n.params.mode),r.id=n.params.id,r.name=n.params.name):(r.id=n.params.nodeModel.rootNode.id,r.name=n.params.nodeModel.rootNode.name);let l=[i._KEY,i._MODEL,i._ID_CARD];o.updatePreference(l,r);var d,c={name:t.ROUTE_CO_DETAILS};d={id:r.id,name:r.name,version:"1",modelName:r.name},c.params={changeOrderId:d.id,changeOrderName:d.name,changeOrderVersion:d.version,changeOrderName:d.modelName},o.setRouteInfo(c);var u=d.name,p={linkID:t.ROUTE_CO_DETAILS,linkText:u,additionalData:d};s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL2}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_ORCHESTRATION_LEVEL1}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CO_INFO}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CR_INFO}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_DETAILS}),s.publish({event:"breadcrumb-remove-link",data:t.ROUTE_CA_INFO}),s.publish({event:"breadcrumb-add-link",data:p})},deactivate:function(e){}},n)n.hasOwnProperty(s)&&e.addRouteMethods(s,n[s])}}}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridContextualMenu",["UWA/Core","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/LifecycleCmd/MaturityCmd","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/DocumentUtils","DS/ENOChgGovernanceUX/scripts/view/DownloadContextualMenu","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/components/ChangeImpactsView/ChgChangeImpactsHandler","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgDataProcess"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";var m={showRMBMenuOnGridForAffectedItemsCell:async function(e){let t=[];return new Promise(function(i,a){const c=[];let u=!1,p=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),g=[],h=[],C=[];p.forEach(e=>{g.push(e.options.grid.AffectedItemInformation[0].id),h.push(e.options.grid.AffectedItemInformation[0].serviceBasedObjId),e.options.grid.AffectedItemInformation[0].sourceType&&"CSD"!=e.options.grid.AffectedItemInformation[0].sourceType&&C.push(e.options.grid.AffectedItemInformation[0].id)}),p.length>1&&(u=!0);const f=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),v=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].id,D=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].type,b=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].name,w=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].displayType,S=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].serviceBasedObjId,I=[];I.push(D),e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].kind&&""!=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].kind&&I.concat(e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].kind);const _={objectId:null!=S?S:v,objectType:D,objectTaxonomies:I,displayName:b,displayType:w,facetName:"dependency"};let y={};y.objectID=v,y.objectTitle=b,y.objectType=D,y.serviceId="3DSpace",y.label=e.cellInfos.nodeModel.options.grid.title,y.changeType="Investigation Request",y.facet="Affected Items",y.action="IR>Change Impacts";e.cellInfos.nodeModel.getTreeDocument(),p[0]._options.grid&&p[0]._options.grid.dispostionId,p[0]._options.grid&&p[0]._options.grid.approversList;const E=f.openWith(_);let O={};O.objectID=v,O.objectTitle=b;var G=!1;"true"===o.getGlobalVariable().ECM_EnableChangeImpactsEnforcementForCR&&(G=!0),u?(C.length>0&&c.push(n.createPropertyPushItem(C)),c.push(m.getRelationalExplorerMenu(C)),C.length,i(c)):(C.length>0&&c.push(n.createPropertyPushItem(C)),c.push(m.getRelationalExplorerMenu(C)),E.then(e=>{if(e&&c.push(e),C.length,G&&c.push(d.getChangeImpacts(y)),t.length>0)for(let e=0;e<t[0].length;e++)c.push(t[0][e]);s.getDocuments(C).then(function(e){e&&e[0]&&e[0].dataelements&&"TRUE"===e[0].dataelements.isDocumentType&&(c.push(r.getDownloadMenu(C)),c.push(r.getPreviewMenu(C))),i(c)}).catch(e=>{console.log(e),i(c)})}))})},showRMBMenuOnGridForDispositionCell:async function(e,t){let i=[];var o=!1;try{e.cellInfos.nodeModel.options.grid.approvalStatusModel&&await g.getColumnApprovalStatusMenu(e.cellInfos.nodeModel.options.grid.approvalStatusModel).then(function(e){i.push(e)})}catch(e){console.error(e)}let a=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),s=[];return a.forEach(e=>{s.push(e.options.grid.dispositionId)}),a.length>1&&(o=!0),new Promise(function(t,a){const r=[];let l=void 0,d=e.cellInfos.nodeModel.options.grid,c={model:e.cellInfos.nodeModel.getTreeDocument(),dispositionID:d.dispositionId,approversList:d.approversList};if(d.dispositionId){let a=e.cellInfos.nodeModel.options.grid.AffectedItemInformation[0].id;[].push(a),l=d.dispositionId;let u=[];if(u.push(l),1==o?s.length>0&&(r.push(n.createPropertyPushItem(s)),r.push(m.getRelationalExplorerMenu(s))):(r.push(n.createPropertyPushItem(u)),r.push(m.getRelationalExplorerMenu(u)),r.push(m.getTransferMenu(e)),r.push(m.getManageApprovers(c))),i.length>0)for(let e=0;e<i[0].length;e++)r.push(i[0][e]);t(r)}else t(r)})},showRMBMenuOnGridForResolvedByCell:function(e){return new Promise(function(t,i){const o=[];let a=e.cellInfos.nodeModel.options.grid;if(a.resolvedByInformation&&a.resolvedByInformation[0]){let i=void 0;if(a.resolvedByInformation[0].indexResolvedBy&&a.resolvedByInformation[0].indexResolvedBy[0])if(null!=(i=a.resolvedByInformation[0].indexResolvedBy[0])){let s=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),r=a.dispositionId,d=i.resolvedById,c=i.resolvedByName,u=i.resolvedByType,g=[];g.push(d),o.push(n.createPropertyPushItem(g)),o.push(m.getRelationalExplorerMenu(g)),o.push(p.removeResolvedBy(r,g,e));let h={objectId:d,objectType:u,displayName:c,displayType:u},C=[],f=s.openWith(h);C.push(f),Promise.all(C).then(function(e){console.log(e),e[0]&&o.push(e[0]),t(o)})}else t(o);else a.resolvedByInformation[0].non3DSpaceNonIndexedResolvedBy&&a.resolvedByInformation[0].non3DSpaceNonIndexedResolvedBy[0]&&h.resolvedByInformationForCrossServiceAndRecents(a.resolvedByInformation[0].non3DSpaceNonIndexedResolvedBy).then(function(i){if(null!=i){let s=l("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),r=a.dispositionId,d=i[0].resolvedById,c=i[0].resolvedByName,u=i[0].resolvedByType,g=[];g.push(d),o.push(n.createPropertyPushItem(g)),o.push(m.getRelationalExplorerMenu(g)),o.push(p.removeResolvedBy(r,g,e));let h={objectId:d,objectType:u,displayName:c,displayType:u},C=[],f=s.openWith(h);C.push(f),Promise.all(C).then(function(e){console.log(e),e[0]&&o.push(e[0]),t(o)})}else t(o)})}else t(o)})},getTransferMenu:function(e,i){return{type:"PushItem",title:t.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(t){var n={commandInfo:{type:"Investigation Request",facet:"Dispositions",action:"IR>Dispositions>RMB>Move"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:n});for(var o=e.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),a=[],s=0;s<o.length;s++)"CSD"!=o[s].options.grid.sourceType&&("affectedItems"==i?a.push(o[s].options.grid.AffectedItemInformation[0]):a.push(o[s].options.grid));require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(a)})}}}},getChangeImpacts:function(e){return{id:"ChangeImpacts",type:"PushItem",title:t.CHG_CA_Header_Change_Impacts,fonticon:{family:1,content:"ChangeImpact"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Change Impacts"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),c.launchImpactsView(e)}}}},getRelationalExplorerMenu:function(e){return{type:"PushItem",title:t.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>RMB>Relations"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(t){t.openRelationalExplorer(e)})}}}},getManageApprovers:function(e){return{id:"ManageApprovers",type:"PushItem",title:t.CHG_GOV_Disposition_ManageApprovers,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-user-pencil"},action:{callback:function(t){var i={commandInfo:{type:"Change Request",facet:"Affected Items",action:"IR>Affected Items>RMB>ManageApprovers"}};u.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),l("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout").addApproverHandler(e)}}}}};return m}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D){"use strict";return e.extend({init:function(e){this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:D.getGlobalVariable().get3DSpaceURL(),securityContext:D.getGlobalVariable().getSecurityContext(),isNative:D.getGlobalVariable().isNative}};let i=this;this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),p.subscribe("idcard-header-minified",function(e){e.value?(i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").addClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").removeClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").addClassName("minified-header-height")):(i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-grid-div").removeClassName("minified-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").addClassName("expanded-header-height"),i.chgGridViewContainer.getElement(".content-impactBasis-tile-div").removeClassName("minified-header-height"))})},loadCustomColumns:function(){let e=f.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){let e=this.processColumns(),t=this,a={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:c.CHG_GOV_Empty_DataGrid_PlaceHolder,identifier:"chgCRImpactBasisGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return u.showRMBMenuOnGrid(e).then(function(e){return e});t=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},onDragStartRowHeader:function(e,t){l.readyDragContent(e,t)},onDragStartCell:function(e,t){l.readyDragContent(e,t)}};a=UWA.merge(a,this.options);let p={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new n(a),this.chgGridView.cellSelection="none",this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){m.onCustomViewsSave(e,i,t.options.custom_view_options)},this._modelEvents.unsubscribe({event:"cr-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-search"},function(e){var i=e.query;i&&t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||!e.options.grid.name||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&e.options.grid.name&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-aff-DataGrid-on-reset-search"},function(e){t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new s(p),t.chgGridView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid&&t&&5==t.columnID){var i={};i.cellInfos=t,m.executeMaturity(i)}};let C={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return u.showRMBMenuOnGrid(e).then(function(e){return e})}};this.tileView.onContextualEvent=C;this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),r.toolbar=this.chgGridView.setToolbar(r.writetoolbarDefinition(this.options)),this.toolbar=r.toolbar,this.chgGridView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),this.tileView.buildStatusBar([{type:d.STATUS.NB_ITEMS},{type:d.STATUS.NB_SELECTED_ROWS}]),this.chgGridView.getTreeDocument().getXSO().onAdd(function(e){let i;e.getTreeDocument()&&(i=e.getTreeDocument().getSelectedNodes().length),t._modelEvents.publish({event:"cr-impact-analysis-basis-object-selection-update",data:{count:i,accessBits:t.options.accessBits}})}),this.chgGridView.getTreeDocument().getXSO().onRemove(function(e){0==e.getTreeDocument().getSelectedNodes().length&&t._modelEvents.publish({event:"cr-impact-analysis-basis-object-selection-update",data:{count:e.getTreeDocument().getSelectedNodes().length}})}),document.getElementById("outer-impactBasis-grid-div")&&document.getElementById("outer-impactBasis-grid-div").destroy(),this.chgGridViewContainer=UWA.createElement("div",{id:"outer-impactBasis-grid-div",class:"outer-impactBasis-grid-div"});let f=UWA.createElement("div",{class:"toolbar-impactBasis-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"impactBasis-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new g({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new h({title:c.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(f),this.toolbar.inject(f);let v=UWA.createElement("div",{class:"content-impactBasis-grid-div expanded-header-height"}),D=UWA.createElement("div",{styles:{height:"100%"},class:"content-impactBasis-tile-div ImpactBasisTileView expanded-header-height"}),b=UWA.createElement("div",{class:"hideView",id:"impactBasisEmptyTileViewDiv"});UWA.createElement("div",{html:c.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(b),this.chgGridView.inject(v),this.tileView.inject(D),b.inject(D),this.chgGridViewContainer.addContent(f),this.chgGridViewContainer.addContent(v),this.chgGridViewContainer.addContent(D),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=v;m.registerCustomEventsOnDGV(["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"],this.chgGridView,this.options.custom_view_options),this.loader=(new o).inject(this.options.target)},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/util/ChgCRImpactBasisGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridModel","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";let v={createImpactBasisView:async function(t,s,r){var g=this;t.setStyles({position:"relative"}),s=s[0];let h={};this.contextId=s.physicalId,(h=UWA.merge(h,s)).target=t,h.columns=i.getColumns(s.accessBits),this.ChgCRImpactBasisDataGridModel=new n(h.grid.parentCRId,h.grid.id),this.modelEvents=h.modelEvents,d.makeDroppable(h.target,g.dropHandler),this.treeDocument=h.treeDocument=this.ChgCRImpactBasisDataGridModel.createTreeDocument(),g.ChgCRImpactBasisTreeModel=h.treeDocument,g.ChgCRImpactBasisTreeModel=h.treeDocument,g.ChgCRImpactBasisDataGridModel.registerCustomFilter(),this.subscribeToModelEvents(h.treeDocument),this.options=h,this.chgCRIImpactBasisView=new e(h),m.showLoader(h.target,this.chgCRIImpactBasisView.loader);v.changeView(),await u.getImpactAnalysisFacet(h.grid.id,"impactBasis").then(async e=>{var t={},i={};e.data[0]&&e.data[0].impactBasis&&e.data[0].impactBasis[0]&&e.data[0].impactBasis[0].non3DSpaceNonIndexedData&&(t=e.data[0].impactBasis[0].non3DSpaceNonIndexedData,e.data[0].impactBasis[0].mapping&&(i=e.data[0].impactBasis[0].mapping),e.data[0].impactBasis.splice(0,1));var n=await p.processIAAnalysisBasisForGet(e.data[0].impactBasis);if(g.ChgCRImpactBasisDataGridModel.loadImpactBasisData(h.treeDocument,n),m.fetchMaturityStateCSS(n),m.hideLoader(h.target,g.chgCRIImpactBasisView.loader),i.length>0&&await g.ChgCRImpactBasisDataGridModel.i3dxInformationFilteringAndCalling(t,i,h.treeDocument),t&&t.length>0){var s=new Map,r=t.length;for(let e=0;e<t.length;e+=125){let i=[];i=r<125?t.slice(e,e+r):t.slice(e,e+125);for(var d=[],u=new Map,C=i,f=0;f<C.length;f++){var D=C[f];d.push(D.id),u.set(D.id,D)}var b=[];if(d.length>0){var w=p.commonPredicatedForFedSearch(),S=await p.callFederatedSearch(d,w);S&&S.results&&S.results.length>0&&(b=await p.processIAAnalysisBasisFederatedSearch(S,u))}g.ChgCRImpactBasisDataGridModel.loadImpactBasisData(h.treeDocument,b),s=new Map([...s,...u]),r-=125}if(s&&s.size>0){g.chgCRIImpactBasisView.indexInfoDiv.show();var I=await c.recent();if(I&&I.results&&I.results.length>0){var _=p.filterNonIndexedDataNew(I,s);s.size!=_.length&&a.warn(o.CHG_GOV_Not_Accessable_Data);var y=await p.processInformationForRecentIAImpactBasis(_);m.fetchMaturityStateCSS(y),g.ChgCRImpactBasisDataGridModel.loadImpactBasisData(h.treeDocument,y)}}}else g.chgCRIImpactBasisView.indexInfoDiv.hide();var E=p.getDefaultFilter(h.columns);h.treeDocument.setFilterModel(E),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(g.ChgCRImpactBasisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:g.ChgCRImpactBasisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,g.ChgCRImpactBasisTreeModel)}),0==h.treeDocument.getChildren().length?h.treeDocument._modelEvents.publish({event:"treeEmpty"}):h.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),v.changeView(),g.chgCRIImpactBasisView.chgGridView.addEventListener("postEdit",function(e,t){v.updateReasonForChangeValue(t)}),m.hideLoader(h.target,g.chgCRIImpactBasisView.loader)}),g.chgCRIImpactBasisView.loadCustomColumns()},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),u.updateImpactBasisReasonForChangeValue(i,v.contextId).then(e=>{console.log("updated on backend")})}},massUpdateHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Analysis Basis",action:"IA>Analysis Basis>Mass Update"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),v.chgCRIImpactBasisView.chgGridView.showModelMassUpdateDialog();let t=v.chgCRIImpactBasisView.chgGridView._modelMassUpdateDialog.buttons.Ok.elements.button,i=v.chgCRIImpactBasisView.chgGridView._modelMassUpdateDialog.buttons.Apply.elements.button;t.addEventListener("click",function(){v.updateMassValue()}),i.addEventListener("click",function(){v.updateMassValue()})},updateMassValue:function(){let e=v.ChgCRImpactBasisDataGridModel.treeDocument.getAllDescendants(),t=[];for(let i of e){let e={id:i.options.grid.id,reasonForChange:i.options.grid.reasonForChange};t.push(e)}u.updateImpactBasisReasonForChangeValue(t,v.contextId).then(e=>{console.log("updated on backend")})},changeView:function(e){i.changeView("GridView")},dropHandler(e){console.log("dropHandler called"+e);v.ChgCRImpactBasisDataGridModel.treeDocument;var t=[];t=c.parseObjectInformation(e);var i=[];let n=v.ChgCRImpactBasisDataGridModel.getTreeDocument().getAllDescendants();for(let e=0;e<n.length;e++)i.push({id:n[e].options.grid.id});(t=t.filter(e=>!i.some(t=>e.id===t.id))).length>0?v.ChgCRImpactBasisDataGridModel.addExistingChildren(t).then(function(e){v.modelEvents.publish({event:"update-impact-basis",data:{operation:"CONNECT",context:e.data}})},function(e){}):a.warn(o.CHG_GOV_NODE_PRESENT_WARN_ANALYSIS_ITEM)},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),h.unsubscribe(`IA_ImpactBasis:${widget.id}`),h.subscribe(`IA_ImpactBasis:${widget.id}`,function(e){"true"==l.getGlobalVariable().slidePanelTagger&&(console.log("facetswitch....."),console.log(e),require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRImpactBasisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRImpactBasisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRImpactBasisTreeModel)}))}),h.unsubscribe(`${e.options.id} of ${widget.id}`),h.subscribe(`${e.options.id} of ${widget.id}`,function(t){v.ChgCRImpactBasisDataGridModel.filterView(t,e)}),h.unsubscribe(`${e.options.id} colorize ${widget.id}`),h.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){v.ChgCRImpactBasisDataGridModel.enableColorizeView(t,e)}),h.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),h.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){v.ChgCRImpactBasisDataGridModel.disableColorizeView(t,e)}),h.unsubscribe("updateIndexingIconForHideOrShowInImpactBasis"),h.subscribe("updateIndexingIconForHideOrShowInImpactBasis",function(e){i.chgCRIImpactBasisView.indexInfoDiv.show()}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-basis-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-basis-object-selection-update"},function(e){v.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Analysis Basis",action:"IA>Analysis Basis>Add Analysis Basis"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=v.ChgCRImpactBasisDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingImpactedItems",extendedQuery:v.createExcludeListForSearch(t)};const n=r.activateSearch();l.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),r.search(o.CHG_GOV_ImpactBasis_Toolbar_AddImpactBasis,"",v.OnSearchComplete,"impactBasis",n,void 0,void 0,i)},createIncludeListForSearch:function(e){let t=e.data,i=[];for(let e of t)i.push(e.id);return i},createExcludeListForSearch:function(e){let t=[];for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){let i=[],n=v.treeDocument.getAllDescendants().map(e=>e.options.grid.id);for(var s=!1,r=0;r<e.length;r++)n.includes(e[r][0])?s=!0:i.push({id:e[r][8]&&null!=e[r][8]?e[r][8]:e[r][0],type:e[r][2],updateAction:"CONNECT",service:e[r][7]&&e[r][7].includes(":")?e[r][7].split(":")[0]:e[r][7],environment:l.getGlobalVariable().tenant});s&&a.warn(o.CHG_GOV_NODE_PRESENT_WARN_ANALYSIS_ITEM,!0),i.length&&(t.hideEmptyView(),v.ChgCRImpactBasisDataGridModel.addExistingChildren(i).then(function(e){v.modelEvents.publish({event:"update-impact-basis",data:{operation:"CONNECT",context:e.data}})},function(e){}))},removeHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Analysis Basis",action:"IA>Analysis Basis>Remove"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=v.treeDocument.getSelectedNodes();if(t.length>0){let e=[];for(var i=0;i<t.length;i++)e.push({id:t[i].options.grid.id,type:t[i].options.grid.type,updateAction:"DISCONNECT"});v.ChgCRImpactBasisDataGridModel.removeExistingChildren(e).then(function(e){v.modelEvents.publish({event:"update-impact-basis",data:{operation:"DISCONNECT",context:e}})},function(e){})}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects);let n={ImpactAnalysis:v.ChgCRImpactBasisDataGridModel.impactAnalysisId,selectedAnalysisBasis:v.ChgCRImpactBasisDataGridModel.treeDocument.getSelectedNodes()};v.modelEvents.publish({event:"remove_AnalysisBasis_count_AI_grid",data:n})},addImpactedItemHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Analysis Basis",action:"IA>Analysis Basis>Add as Impact"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=v.treeDocument.getSelectedNodes();if(t.length>0){let e=[];t.forEach(t=>e.push({id:t.options.grid.id,type:t.options.grid.type,updateAction:"CONNECT",service:t.options.grid.serviceName,environment:l.getGlobalVariable().tenant}));let i=f("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout"),n=[];if(i&&i.ChgCRImpacedItemDataGridModel&&i.ChgCRImpacedItemDataGridModel.treeDocument){let e=i.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants().length;for(let t=0;t<e;t++)n.push(i.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants()[t].options.grid)}let s=e.filter(e=>!n.some(t=>e.id===t.id));const r=v.ChgCRImpactBasisDataGridModel.impactAnalysisId,d=v.ChgCRImpactBasisDataGridModel.parentCRId;s.length>0?u.updateExistingImpactItem(d,r,s).then(async function(e){if(a.success(o.CHG_GOV_ImpactBasis_Add_ImpactedItems_Success),i.ChgCRImpacedItemDataGridModel&&i.ChgCRImpacedItemDataGridModel.impactAnalysisId==v.ChgCRImpactBasisDataGridModel.impactAnalysisId){var n={},s={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(n=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(s=e.data[0].mapping),e.data.splice(0,1));var r=await p.processIAImpacts(e);if(i.ChgCRImpacedItemDataGridModel.addNodesInLayoutModel(i.ChgCRImpacedItemDataGridModel.treeDocument,r),s.length>0)await i.ChgCRImpacedItemDataGridModel.i3dxInformationFilteringAndCalling(n,s,i.ChgCRImpacedItemDataGridModel.treeDocument);if(n&&n.length>0){var l=new Map,d=n.length;for(let e=0;e<n.length;e+=125){let t=[];t=d<125?n.slice(e,e+d):n.slice(e,e+125);for(var u=[],g=new Map,m=t,C=0;C<m.length;C++){var f=m[C];u.push(f.id),g.set(f.id,f)}var D=[];if(u.length>0){var b=p.commonPredicatedForFedSearch(),w=await p.callFederatedSearch(u,b);w&&w.results&&w.results.length>0&&(D=await p.processIAImpactsFederatedSearch(w,g))}i.ChgCRImpacedItemDataGridModel.addNodesInLayoutModel(i.ChgCRImpacedItemDataGridModel.treeDocument,D),l=new Map([...l,...g]),d-=125}if(l&&l.size>0){h.publish("updateIndexingIconForHideOrShowInImpacts",{});var S=await c.recent();if(S&&S.results&&S.results.length>0){var I=p.filterNonIndexedDataNew(S,l);l.size!=I.length&&a.warn(o.CHG_GOV_Not_Accessable_Data);var _=await p.processInformationForRecentIAImpactBasis(I);let e=[];_&&(e=_);let t=[];for(let i of e)i.reasonForChange="",i.impactedItem="IMPACTED",t.push(i);i.ChgCRImpacedItemDataGridModel.addNodesInLayoutModel(i.ChgCRImpacedItemDataGridModel.treeDocument,t)}}}}v.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:t}})}):a.warn(o.CHG_GOV_NODE_PRESENT_WARN_IMPACTED_ITEM)}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleObjectSelectionUpdate:function(e){e.count>0?("true"===e.accessBits.RemoveImpactBasis&&v.chgCRIImpactBasisView.toolbar.updateNodeModel("remove",{visibleFlag:!0}),"true"===e.accessBits.AddImpactedItems&&v.chgCRIImpactBasisView.toolbar.updateNodeModel("addImpactedItem",{visibleFlag:!0}),v.chgCRIImpactBasisView.toolbar.updateNodeModel("changeAssessment",{visibleFlag:!0}),"true"===e.accessBits.AddImpactBasis&&v.chgCRIImpactBasisView.toolbar.updateNodeModel("massUpdate",{visibleFlag:!0})):(v.chgCRIImpactBasisView.toolbar.updateNodeModel("remove",{visibleFlag:!1}),v.chgCRIImpactBasisView.toolbar.updateNodeModel("addImpactedItem",{visibleFlag:!1}),v.chgCRIImpactBasisView.toolbar.updateNodeModel("massUpdate",{visibleFlag:!1}),v.chgCRIImpactBasisView.toolbar.updateNodeModel("changeAssessment",{visibleFlag:!1}))},handleForMaturityUpdate:function(e){if(e){let t=v.ChgCRImpactBasisDataGridModel.treeDocument.getSelectedNodes();m.getHandleForMaturityUpdate(JSON.parse(e),t)}},globalSubscribeForCRImpactBasisView:function(){s.addObserver("ChgCRImpactBasisDataGridLayout","CO-Properties-Update",v.handlePropertiesUpdateForImpactBasis),s.addObserver("ChgCRImpactBasisDataGridLayout","Lifecycle.Modification",v.handleForMaturityUpdate),s.addObserver("ChgCRImpactBasisDataGridLayout","ENORIPE-InApp-"+widget.id+"ChgCRImpactBasisDataGridLayout/onOK",v.handleChangeAssessmentOK)},handlePropertiesUpdateForImpactBasis:function(e){var t=v.ChgCRImpactBasisTreeModel;t&&C.handlePropertiesOnUpdate(t,e)},changeAssessmentHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Change Assessment"}};f("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=v.treeDocument.getSelectedNodes();if(t&&t.length>0){let e=[];t.forEach(t=>{e.push(t.options.grid.serviceBasedObjId)});const i=widget.id+"ChgCRImpactBasisDataGridLayout";r.launchAppInAppMode(i,e,"ENORIPE_AP")}else a.error(o.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleChangeAssessmentOK:function(e){if(e.length){var t=!1;for(let i=0;i<e.length;i++)e[i].id.includes("uuid:")?(t=!0,e.splice(i,1),i--):(e[i].updateAction="CONNECT",e[i].service="3DSpace");t&&a.error(o.CHG_GOV_Relation_Cross_Service_NotSupported_Error),e.length&&v.ChgCRImpactBasisDataGridModel.addExistingChildren(e)}}};return v.globalSubscribeForCRImpactBasisView(),v}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsView",["DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Utilities/Utils","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgServices/scripts/services/ChgErrors","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Controls/Label","DS/Controls/TooltipModel","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridContextualMenu","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/Menu/ContextualMenu","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w){"use strict";return n.extend({init:function(e){this._parent(e);var t=this;this.options=e,this.options.custom_view_options={settings:{url:i.getGlobalVariable().get3DSpaceURL(),securityContext:i.getGlobalVariable().getSecurityContext(),isNative:i.getGlobalVariable().isNative}},this._modelEvents=null,null!=e&&null!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new o;var n=this._modelEvents;this.chgGridView="","undefined"!=this.options.target&&null!=this.options.target&&this.render(),v.subscribe("idcard-header-minified",function(e){e.value?(t.chgGridViewContainer.getElement(".content-dispositions-grid-div").removeClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-grid-div").addClassName("minified-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-tile-div").removeClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-tile-div").addClassName("minified-header-height")):(t.chgGridViewContainer.getElement(".content-dispositions-grid-div").addClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-grid-div").removeClassName("minified-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-tile-div").addClassName("expanded-header-height"),t.chgGridViewContainer.getElement(".content-dispositions-tile-div").removeClassName("minified-header-height"))}),widget.addEvents({onSearch:function(e){n.publish({event:"ir-aff-DataGrid-on-search",data:{query:e},context:t})},onResetSearch:function(e){n.publish({event:"ir-aff-DataGrid-on-reset-search",data:{query:e},context:t})}})},render:function(){try{var e=this.processColumns(),t=this,n={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,identifier:"chgIRDispositionsGrid",showContextualMenuColumnFlag:!0,defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0,editionPolicy:"EditionOnOver"},onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>=0&&0==e.cellInfos.columnID)return f.showRMBMenuOnGridForDispositionCell(e,t.id).then(function(e){return e});if(e.cellInfos.rowID>=0&&8==e.cellInfos.columnID)return f.showRMBMenuOnGridForResolvedByCell(e).then(function(e){return e});if(e.cellInfos.rowID>=0&&4==e.cellInfos.columnID)return f.showRMBMenuOnGridForAffectedItemsCell(e).then(function(e){return e});if(e.cellInfos.rowID>=0)return f.showRMBMenuOnGridForDispositionCell(e).then(function(e){return e});i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){p.readyDragContent(e,t)},onDragStartCell:function(e,t){p.readyDragContent(e,t)}};n=UWA.merge(n,this.options);var o={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!1,displayedOptionalCellProperties:["description","propertiesList","activeFlag"]};this.chgGridView=new r(n),this.chgGridView.cellSelection="none",this.chgGridView.getCustomViewsManager().onCustomViewsSave=function(e,i){D.onCustomViewsSave(e,i,t.options.custom_view_options)},this.options.treeDocument.onNodeModelUpdate(function(e){i.getGlobalVariable().total_ia_row&&t.chgGridView.updateRenderedRow(i.getGlobalVariable().total_ia_row._getRowID(),{updateCellContent:!0,updateCellLayout:!1,updateCellAttributes:!1})}),this._modelEvents.unsubscribe({event:"ir-aff-DataGrid-on-search"}),this._modelEvents.subscribe({event:"ir-aff-DataGrid-on-search"},function(e){var i=e.query;i&&t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(i.toLowerCase())||e.options.grid.name.contains(i.toLowerCase())||e.options.grid.title.contains(i.toUpperCase())||e.options.grid.name.contains(i.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"ir-aff-DataGrid-on-reset-search"},function(e){t.chgGridView.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.tileView=new c(o);var v={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return f.showRMBMenuOnGridForDispositionCell(e).then(function(e){return e})}};this.tileView.onContextualEvent=v;let O={typeForDisposition:{stdTemplate:"enumCombo",semantics:{possibleValues:{documentKey:h.CHG_GOV_Investigation_Request_Disposition_Type_Documentation,fixKey:h.CHG_GOV_Investigation_Request_Disposition_Type_Fix,notFixKey:h.CHG_GOV_Investigation_Request_Disposition_Type_No_Fix,notImpactedTypeKey:h.CHG_GOV_Investigation_Request_Disposition_Type_Not_Impacted,noneKey:h.CHG_GOV_Investigation_Request_Disposition_Type_None},valueType:"enumValueToProperty"}}};this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations({addDropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),this.chgGridView.getTypeRepresentationFactory().registerTypeRepresentations(O),u.toolbar=this.chgGridView.setToolbar(u.writetoolbarDefinition(this.options)),this.toolbar=u.toolbar;t=this;this.chgGridView.addEventListener("allCellsRendered",function(){t.chgGridView.buildStatusBar([{type:g.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:h.CHG_GOV_StatusBar_TotalItems+t.chgGridView.getTreeDocument().getAllDescendants().length}},{type:g.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:h.CHG_GOV_StatusBar_SelectedItems+t.chgGridView.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:g.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:h.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:g.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:h.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.chgGridView.addEventListener(s.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.chgGridView.onDropCell=function(e,t){if(8==t.columnID)if(e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.dataTransfer&&e.dataTransfer.dropEffect&&(e.dataTransfer.dropEffect="copy"),t.cellModel.contains("chgIRAffectedAddExistingCADragAndDropResolvedby")){var i=e.dataTransfer.getData("text");t.nodeModel.options.grid&&t.nodeModel.options.grid.dispositionId?require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout"],function(e){e.dragAndDropResolvedBy(i,t)}):d.warn(h.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First)}else d.warn(h.CHG_GOV_Investigation_Request_Disposition_ResolvedBy_Already_There);return!0};var w=t.chgGridView.getTreeDocument().getXSO(),S=a.debounce(function(e){e&&e.length&&(e=e[0]);var i=t.chgGridView.elements.statusBar.getNodeModelByID("selectedGridCount"),n=t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount");e.getTreeDocument()?(i.updateOptions({grid:{data:h.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),n.updateOptions({grid:{data:h.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}})):(i.updateOptions({grid:{data:h.CHG_GOV_StatusBar_SelectedItems+0}}),n.updateOptions({grid:{data:h.CHG_GOV_StatusBar_SelectedItems+0}}));var o=w.isIn(e);t.onSelectionChange(t._modelEvents,e,t.id,t.options.contextDetails.isKindOfType,o)},5);w.onPostAdd(S),w.onPostRemove(S),t.tileView.addEventListener(s.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){if(i&&i.nodeModel&&i.nodeModel.options.grid)if(2==e.multipleHitCount)console.log("AffectedItem_OnItemClcik"),i.nodeModel.select(!0),t._modelEvents.publish({event:"update-property-panel-data",data:{context:i.nodeModel}}),t._modelEvents.publish({event:"AffectedItem-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel});else if(1==e.multipleHitCount)if(i&&3==i.columnID){var n={};n.cellInfos=i,n.cellInfos.nodeModel.options.grid&&n.cellInfos.nodeModel.options.grid.dispositionId&&D.executeMaturityForDisposition(n)}else if(i&&8==i.columnID){if(console.log("Create Change Action Called"),null==i.nodeModel.options.grid||""==i.nodeModel.options.grid.id)d.warn(h.CHG_GOV_Investigation_Request_Disposition_Create_Disposition_First);else if(e.target.className.contains("chgIRAffectedCreateNewCAResolvedby"))console.log("New CA resolved by create called"),null==i.nodeModel.options.grid.dispositionInformation||""==i.nodeModel.options.grid.dispositionInformation?d.warn("First Need to Create Disposition! Then only will be able to create ResolvedBy"):require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout"],function(e){var i=[];i.parentID=t.options.treeDocument.getSelectedNodes()[0].options.grid.dispositionId;var n=e.addAsResolvedByInDispositionProcessing;e.createResolvedByInDispositionIR(i,n)});else if(e.target.className.contains("chgIRAffectedCreateAddExistingCAResolvedby"))console.log("Add existing called ResolvedBy "),require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout"],function(e){e.addExistingResolvedByHandler()});else if(e.target.className.contains("resolvedby_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};b.buildAndDisplayContextualMenu(e.target,t)}}else if(i&&6==i.columnID){if(e.target.className.contains("chgIRDispositionAddApprover")){e.target.getOffsets().x,e.target.getOffsets().y;require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout"],function(e){let n={id:t.options.contextDetails.id,type:t.options.contextDetails.isKindOfType,model:t.options.treeDocument,objectTitle:t.options.contextDetails.title,dispositionID:i.nodeModel._options.grid.dispositionId?i.nodeModel._options.grid.dispositionId:void 0};e.addApproverHandler(n)})}}else if(i&&4==i.columnID&&e.target.className.contains("affectedItem_menu_launcher")){const t={clientX:e.target.getOffsets().x,clientY:e.target.getOffsets().y};b.buildAndDisplayContextualMenu(e.target,t)}},this.chgGridViewContainer=UWA.createElement("div",{id:"outer-dispositions-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-dispositions-grid-div"});var I=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-dispositions-grid-div"});this.indexInfoDiv=UWA.createElement("div",{id:"disposition-index-data-info-div",styles:{display:"none"}}),this.indexInfo=new m({emphasize:"warning",icon:"attention"}),this.indexInfo.tooltipInfos=new C({title:h.CHG_GOV_REALIZED_INDEX_INFO,position:"left"}),this.indexInfo.inject(this.indexInfoDiv),this.indexInfoDiv.inject(I),this.toolbar.inject(I);var _=UWA.createElement("div",{class:"content-dispositions-grid-div expanded-header-height"}),y=UWA.createElement("div",{class:"content-dispositions-tile-div dispositionsTileView expanded-header-height"}),E=UWA.createElement("div",{class:"hideView",id:"dispositionsEmptyTileViewDiv"});UWA.createElement("div",{html:h.CHG_GOV_Empty_DataGrid_PlaceHolder}).inject(E),this.chgGridView.inject(_),this.tileView.inject(y),E.inject(y),this.chgGridViewContainer.addContent(I),this.chgGridViewContainer.addContent(_),this.chgGridViewContainer.addContent(y),this.chgGridViewContainer.inject(this.options.target),this.chgGridViewContainer.setStyle("width",this.options.target.offsetWidth),this.options.custom_view_options.dgvHandle=this.chgGridView,this.options.custom_view_options.ootb_columns=[...e],this.options.custom_view_options.dgvDiv=_,this.loader=(new l).inject(this.options.target)}catch(e){console.log(e)}},loadCustomColumns:function(){let i=t.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(i){let t=JSON.parse(i);t&&e.restoreCustomViews(t,this.options.custom_view_options)}},onSelectionChange:function(e,t,i,n,o){e.publish({event:"update_object_select",data:{node:t,contextID:i,contextType:n,isNodeAdded:o}}),t.getTreeDocument()?e.publish({event:"ir-disposition-item-object-selection-update",data:{count:t.getTreeDocument().getSelectedNodes().length}}):e.publish({event:"ir-disposition-item-object-selection-update",data:{count:0}})},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.chgGridView.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsView","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/ChgIRDispositionsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/dispositions/util/ChgIRDispositionsGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/investigationRequest/facets/dispositions/ChgIRDispositionsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENONewWidget/ENONewLauncher","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/UIKIT/Mask","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgDispositionAddMemberHandler","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y,E){"use strict";var O={createDispositionsView:function(t,o){var d=this;t.target.setStyles({position:"relative"}),this.contextId=t.id;var c={};c=UWA.merge(c,t),u.makeDroppable(c.target,d.dropHandler),c.modelEvents=o,this.modelEvents=o,c.columns=i.getColumns(),this.ChgIRDispositionsDataGridModel=new n(c.id,c.contextDetails),this.treeDocument=c.treeDocument=this.ChgIRDispositionsDataGridModel.createTreeDocument(),this.ChgIRDispositionsDataGridModel.registerCustomFilter(),d.ChgIRDispositionsTreeModel=c.treeDocument,this.subscribeToModelEvents(c.treeDocument),this.ChgIRDispositionsView=new e(c),S.showLoader(c.target,this.ChgIRDispositionsView.loader);let p=this.ChgIRDispositionsView.chgGridView;a.getIRDispositions(t.id,!0).then(async function(e){console.log("AffectedItems list: "+e);var i={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data.splice(0,1));var o=await s.processIRDispositionItems(e);if(d.ChgIRDispositionsDataGridModel=new n(t.id),0==o.length){if(h.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&b.isMasked(e)&&b.unmask(e)}else S.hideLoader(c.target,d.ChgIRDispositionsView.loader);d.modelEvents.publish({event:"showEmpty-datagrid",data:p})}if(S.fetchMaturityStateCSS(o),d.ChgIRDispositionsDataGridModel.loadAffectedItemsData(c.treeDocument,o),O.changeView(),S.hideLoader(c.target,d.ChgIRDispositionsView.loader),i&&i.length>0){var u=new Map,g=i.length;for(let e=0;e<i.length;e+=50){let t=[];t=g<50?i.slice(e,e+g):i.slice(e,e+50);for(var m=[],C=new Map,v=t,D=0;D<v.length;D++){var w=v[D];m.push(w.id),C.set(w.id,w)}var I=[];if(m.length>0){var _=s.commonPredicatedForFedSearch(),y=await s.callFederatedSearch(m,_);if(y&&y.results&&y.results.length>0)I=await s.processIRAffectedItemsFederatedSearch(y,C)}d.ChgIRDispositionsDataGridModel.loadAffectedItemsData(c.treeDocument,I),S.hideLoader(c.target,d.ChgIRDispositionsView.loader),u=new Map([...u,...C]),g-=50}if(u&&u.size>0){d.ChgIRDispositionsView.indexInfoDiv.show();var E=await f.recent();if(E&&E.results&&E.results.length>0){var G=s.filterNonIndexedDataNew(E,u);u.size!=G.length&&l.warn(r.CHG_GOV_Not_Accessable_Data,!0);var N=await s.processInformationForRecentIRAffected(G);S.fetchMaturityStateCSS(N),d.ChgIRDispositionsDataGridModel.loadAffectedItemsData(c.treeDocument,N)}}}else d.ChgIRDispositionsView.indexInfoDiv.hide();var A=s.getDefaultFilter(c.columns);c.treeDocument.setFilterModel(A),c.isSelected&&"false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(d.ChgIRDispositionsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:d.ChgIRDispositionsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,d.ChgIRDispositionsTreeModel)}),0==c.treeDocument.getChildren().length?c.treeDocument._modelEvents.publish({event:"treeEmpty"}):c.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),O.ChgIRDispositionsView.chgGridView.addEventListener("postEdit",function(e,t){if(t.nodeModel.options.grid&&t.nodeModel.options.grid.dispositionId){let e=t.nodeModel.options.grid.dispositionType,n=t.nodeModel.options.grid.dispositionId;var i=[];i.push({dispositionType:e}),a.changeDispositionType(n,i).then(function(e){console.log(e)})}else t.nodeModel.updateOptions({grid:{dispositionType:void 0}})}),O.changeView(),d.ChgIRDispositionsView.loadCustomColumns(),S.hideLoader(c.target,d.ChgIRDispositionsView.loader)},function(e){if(h.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&b.isMasked(e)&&b.unmask(e)}else S.hideLoader(c.target,d.ChgIRDispositionsView.loader);return Promise.reject(e)}),this.ChgIRDispositionsView.chgGridView.addEventListener("postEdit",function(e,t){})},dropHandler(e){O.ChgIRDispositionsDataGridModel.treeDocument;var t=[];t=f.parseObjectInformation(e);let i=O.treeDocument.getAllDescendants().map(e=>e.options.grid.id),n=e.map(e=>e.objectId);var o=[],a=0;for(let e=0;e<n.length;e++)for(let t=0;t<i.length;t++)n[e]==i[t]&&(o[a]=e,a++);o.length>0&&l.warn(r.CHG_GOV_NODE_PRESENT_WARN_AFFECTED_ITEM,!0);for(let e=0;e<o.length;e++)t.splice(o[e]-e,1);t.length>0?O.ChgIRDispositionsDataGridModel.addExistingChildren(t):l.error(r.CHG_GOV_Common_Drop_Error)},changeView:function(e){i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){t.hideEmptyView()}),C.unsubscribe(`crAffectedItems:${widget.id}`),C.subscribe(`crAffectedItems:${widget.id}`,function(){if("false"==h.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRAffectedItemsTreeModel)}),Object.keys(i.chgCRAffectedItemsView.options.treeDocument.getXSO()._items).length>0){let e=i.chgCRAffectedItemsView.options.treeDocument.getXSO()._items;for(let t in e)i.ChgIRDispositionsView.onSelectionChange(i.ChgIRDispositionsView._modelEvents,e[t],i.ChgIRDispositionsView.id,i.ChgIRDispositionsView.options.contextDetails.isKindOfType,!0)}else i.ChgIRDispositionsView.onSelectionChange(i.ChgIRDispositionsView._modelEvents,i.ChgIRDispositionsView.options.treeDocument._getTrueRoot(),i.ChgIRDispositionsView.id,i.ChgIRDispositionsView.options.contextDetails.isKindOfType,!1)}),C.unsubscribe(`${e.options.id} of ${widget.id}`),C.subscribe(`${e.options.id} of ${widget.id}`,function(e){O.ChgIRDispositionsDataGridModel.filterView(e)}),C.unsubscribe(`${e.options.id} colorize ${widget.id}`),C.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){O.ChgIRDispositionsDataGridModel.enableColorizeView(e)}),C.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),C.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){O.ChgIRDispositionsDataGridModel.disableColorizeView(e)}),C.unsubscribe("updateRouteContent-"+widget.id),C.subscribe("updateRouteContent-"+widget.id,function(e){e="string"==typeof results?JSON.parse(e):e,e=E.getApprovalStatusValue(e);var t=O.treeDocument.getSelectedNodes();if(t.length<1)require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout"],function(i){console.log(i.ChgIRAffectedItemsTreeModel.getSelectedNodes()),t=i.ChgIRAffectedItemsTreeModel.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach(e=>{i!=e.options.grid.dispositionInformation[0].dispostionId||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel}})})});else for(const[i,n]of Object.entries(e))t.forEach(e=>{if(i==e.options.grid.id)return e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturityNLS:n.maturity_NLS,maturityWithBadge:n.maturity_NLS}}),void O.modelEvents.publish({event:"AffectedItem-DataGrid-Update-on-dispostion",data:t})})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-on-dblclick"},function(e){if(h.getGlobalVariable().is3DSpace){w("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else O.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-Update-on-dispostion")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-Update-on-dispostion"},function(e){var t=O.treeDocument.getAllDescendants();e.forEach(e=>{for(var i=0;i<t.length;i++)e.options.grid.dispositionInformation&&e.options.grid.dispositionInformation[0].dispostionId==t[i].options.grid.dispositionId&&t[i].updateOptions({grid:{dispositionCurrentState:e.options.grid.dispositionInformation[0].dispositionCurrentState,dispositionMaturity:e.options.grid.dispositionInformation[0].dispositionCurrentState,dispositionType:e.options.grid.dispositionType,ApprovalStatus:e.options.grid.dispositionInformation[0].ApprovalStatus,approvers:e.options.grid.approvers,dispositionResolvedBy:e.options.grid.dispositionResolvedBy}})})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("ir-disposition-item-object-selection-update")]||this.modelEvents.subscribe({event:"ir-disposition-item-object-selection-update"},function(e){O.handleObjectSelectionUpdate(e)})},addExistingHandler:function(){console.log("addExistingHandler cr affecteditems!");var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add Affected Item"}};_.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});O.ChgIRDispositionsDataGridModel;let t=O.ChgIRDispositionsTreeModel.getAllDescendants(),i={condition:"addExistingAffectedItem",extendedQuery:O.createExcludeListForSearch(t)};const n=o.activateSearch();h.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),o.search(r.CHG_GOV_AffectedItems_AddExisting_Search_Header,"",O.OnSearchComplete,"changeAffectedItems",n,void 0,void 0,i)},addExistingResolvedByHandler:function(){console.log("addExistingHandler resolved by in dispostions!");var e={commandInfo:{type:"Investigation Request",facet:"Dispositions",action:"IR>Dispositions>Add Resolve By"}};_.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});O.ChgIRDispositionsDataGridModel;let t=O.ChgIRDispositionsTreeModel.getAllDescendants();O.createExcludeListForSearch(t);const i=o.activateSearch();h.getGlobalVariable().is3DSpace&&i.socket.subscribeServer("SearchComServer",getTopWindow()),o.search("Add Existing ResolvedBy","Change Action, Task",O.OnSearchResolvedByComplete,"changeAffectedItems",i,void 0,void 0,{condition:"addExistingAffectedItem",extendedQuery:""})},createResolvedByInDispositionIR:function(e,t){var i={isClickProcessing:!0};e.parentID;console.log("launchCreateChangeActionDialog ............................");let n={context:{service:"3DSpace",tenant:h.getGlobalVariable().tenant,header:{SecurityContext:h.getGlobalVariable().getSecurityContext()}},labelTopBar:r.CHG_NEW_CHANGE_ACTION_FORM,type:"Change Action",silentMode:!1,overlay:!0,options:{typeName:"Change Action",preferedType:"Change Action",select:[]},viewType:"tabView",facets:[{name:"classificationFacet",facetoptions:{isBookmark:!0,isLibrary:!0}}],events:{onSuccess:async function(e){t(e)},onFailure:function(e){i&&(i.isClickProcessing=!1),console.log("onFailure..............."+e)},onCancel:function(e){i&&(i.isClickProcessing=!1)}}};(new v).CreateNew(n)},addAsResolvedByInDispositionProcessing:async function(e){var t={data:[]};t.data.push({id:e.result[0].identifier,type:e.result[0].type,service:h.getGlobalVariable().serviceName});const i=await O.callResolvedByInDisposition(t),n=i.data[0];if(n&&n.indexResolvedBy&&n.indexResolvedBy.length>0){let e=n.indexResolvedBy[0].resolvedByName?n.indexResolvedBy[0].resolvedByName:"",t=n.indexResolvedBy[0].resolvedByIcon?n.indexResolvedBy[0].resolvedByIcon:"";O.treeDocument.getSelectedNodes()[0].updateOptions({grid:{dispositionResolvedBy:S.resolvedByNameMethod("",e,t),resolvedByInformation:i.data}}),O.treeDocument.getSelectedNodes()[0].options.grid.resolvedByInformation=[{indexResolvedBy:n.indexResolvedBy}]}else n&&n.non3DSpaceNonIndexedDataForResolvedBy&&n.non3DSpaceNonIndexedDataForResolvedBy.length>0&&s.resolvedByInformationForCrossServiceAndRecents(n.non3DSpaceNonIndexedDataForResolvedBy).then(function(e){let t=e[0]&&e[0].resolvedByName?e[0].resolvedByName:"",n=e[0]&&e[0].resolvedByIcon?e[0].resolvedByIcon:"";O.treeDocument.getSelectedNodes()[0].updateOptions({grid:{dispositionResolvedBy:S.resolvedByNameMethod("",t,n),resolvedByInformation:i.data}}),O.treeDocument.getSelectedNodes()[0].options.grid.resolvedByInformation=[{non3DSpaceNonIndexedResolvedBy:e}]});console.log(e)},dragAndDropResolvedBy:async function(e,t){if(console.log("SOme thing dropped"),UWA.is(e)&&""!=e){var i=JSON.parse(e),n=t.nodeModel.options.grid.id,o=t.nodeModel.options.grid.dispositionId,a={data:[]};a.data.push({id:i.data.items[0].objectId,type:i.data.items[0].objectType,service:i.data.items[0].serviceId});const d=await O.callResolvedByInDisposition(a,o);let c=O.treeDocument.getAllDescendants();for(let e=0;e<c.length;e++){var s=c[e];if(s.options.grid.id==n)break}var r={dispositionInformation:[]},l={resolvedByName:d.data[0].resolvedByName};r.dispositionInformation.push(l),s.updateOptions({grid:{dispositionResolvedBy:O.ChgIRDispositionsDataGridModel.resolvedByNameMethod(r)}})}},callResolvedByInDisposition:async function(e,t){var i=[],n={id:e.data[0].id,service:"3DSpace",type:e.data[0].type};i[0]=n;let o=void 0;o=null!=t?t:O.treeDocument.getSelectedNodes()[0].options.grid.dispositionId;const s=await a.createResolvedByFromIR(o,i);return s},affectedItemsDisposition:function(){console.log("Disposition for IR affected items")},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][8]&&null!=e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2],environment:h.getGlobalVariable().tenant});t.length&&O.ChgIRDispositionsDataGridModel.addExistingChildren(t)},OnSearchResolvedByComplete:async function(e){var t={data:[]};t.data.push({id:e[0][0],type:e[0][2],service:e[0][7]});const i=await O.callResolvedByInDisposition(t);var n=O.treeDocument.getAllDescendants();if(i.data&&i.data[0]&&i.data[0].indexResolvedBy&&i.data[0].indexResolvedBy[0]){let e=i.data[0].indexResolvedBy[0].dispositionId;for(let t=0;t<n.length;t++)if(n[t].options.grid.dispositionId&&n[t].options.grid.dispositionId==e){n[t].updateOptions({grid:{dispositionResolvedBy:S.resolvedByNameMethod("",i.data[0].indexResolvedBy[0].resolvedByName,i.data[0].indexResolvedBy[0].resolvedByIcon)}}),n[t].options.grid.resolvedByInformation=[{indexResolvedBy:i.data[0].indexResolvedBy}];break}}if(i.data&&i.data[0]&&i.data[0].non3DSpaceNonIndexedDataForResolvedBy&&i.data[0].non3DSpaceNonIndexedDataForResolvedBy[0]){var o=i.data[0].non3DSpaceNonIndexedDataForResolvedBy,a=new Map,d=o.length;for(let e=0;e<o.length;e+=50){let t=[];t=d<50?o.slice(e,e+d):o.slice(e,e+50);for(var c=[],u=new Map,p=t,g=0;g<p.length;g++){var h=p[g];c.push(h.resolvedById),u.set(h.resolvedById,h)}if(c.length>0){var m=s.commonPredicatedForFedSearch(),C=await s.callFederatedSearch(c,m);C&&C.results&&C.results.length}a=new Map([...a,...u]),d-=50}if(a&&a.size>0){var v=await f.recent();if(v&&v.results&&v.results.length>0){var D=s.filterNonIndexedDataNew(v,a);a.size!=D.length&&l.warn(r.CHG_GOV_Not_Accessable_Data,!0);var b=await s.processInformationForRecentResolvedByDisposition(D);let e=b.length;if(e>0)for(let t=0;t<e;t++)if(b[t].dispositionId&&b[t].resolvedByName){let e=b[t].dispositionId;for(let i=0;i<n.length;i++)if(n[i].options.grid&&n[i].options.grid.dispositionId==e){n[i].updateOptions({grid:{dispositionResolvedBy:S.resolvedByNameMethod("",b[t].resolvedByName,b[t].resolvedByIcon)}}),n[i].options.grid.resolvedByInformation=[{non3DSpaceNonIndexedResolvedBy:b}];break}}}}}console.log("Add existing CA Complete")},removeHandler:function(){console.log("removeHandler!");var e={commandInfo:{type:"Investigation Request",facet:"Disposition",action:"IR>Disposition>Remove"}};if(_.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=O.ChgIRDispositionsDataGridModel.treeDocument.getSelectedNodes().length)if(h.getGlobalVariable().is3DSpace){let e=document.getElementById("crDispositionsFullViewContainer");e&&b.mask(e)}else{let e=document.getElementById("crDispositions");e&&b.mask(e)}O.ChgIRDispositionsDataGridModel.removeChildren()},handlePropertiesUpdateForDispostion:function(e){var t=O.ChgIRDispositionsTreeModel;t&&I.handlePropertiesOnUpdate(t,e)},createFinalIncludeListFrSearch:function(e){let t="(";for(let i=0;i<e.length;i++)t=t+"physicalid:"+e[i],i!=e.length-1&&(t+=" OR ");return t+=")"},changeEditibility:function(e){let t=ChgCRAffectedItemsDataGridLayout.chgCRAffectedItemsView.options.columns;for(let i of t)if("reasonForChange"===i.dataIndex){i.editableFlag=e;break}},handleAccessBitUpdate:function(e){e.id==O.contextId&&(console.log("ChgIRDispositonsDataGridLayout handleAccessBitUpdate"+e),"false"==e.accessBits.ManageAffectedItem?(O.accessBitManageAffectedItem=!1,O.ChgIRDispositionsView.chgGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1})):O.accessBitManageAffectedItem=!0,e.accessBits.ManageChangeAnalysis)},handleObjectSelectionUpdate:function(e){},handleForMaturityUpdate:function(e){if(e){JSON.parse(e);let t=O.treeDocument.getSelectedNodes();"Disposition"==JSON.parse(e).Refresh.modified[0].policy?S.getHandleForDispostionMaturity(JSON.parse(e),t):S.getHandleForMaturityUpdate(JSON.parse(e),t)}},globalSubscribeForAffectedItemsBasisView:function(){g.addObserver("ChgIRDispositonsDataGridLayout","CO-AccessBit-Update",O.handleAccessBitUpdate),g.addObserver("ChgIRDispositonsDataGridLayout","Lifecycle.Modification",O.handleForMaturityUpdate),g.addObserver("ChgIRDispositonsDataGridLayout","CO-Properties-Update",O.handlePropertiesUpdateForDispostion)},addApproverHandler:function(e){console.log("Handler called for add approver"),e.type="Disposition",y.getDataToBuildAddMemberPanel(e),y.launchAddMemberPanel()}};return O.globalSubscribeForAffectedItemsBasisView(),O}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup",["UWA/Core","DS/ENOChgServices/scripts/components/ChgCommonSelectDailog","DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionAutoComplete","DS/ENOChgServices/scripts/services/ChgDataService","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","require"],function(e,t,i,n,o,a,s,r){"use strict";return{createGroup:function(e){var r=null,l=[{label:o.CHG_Button_Done,handler:function(){var r=i.getSelection();if(null!=r&&null!=r&&""!=r.label){null!=(p=document.getElementById("outer-ca-div"))&&null!=p&&s.mask(p);var l=r.label,d=r.value;if("createGroupFromIdCard"==e.facetName){var c="";let t="pid:"+e.model.id,i=e.model._attributes.attributes.find(e=>"Group"==e.command);i.valueActual&&(c=i.valueActual);var u={title:l,changeactions:[t],oldGroupId:c,availbleGroupId:d};""==c&&-1==d.indexOf("pid:")?n.createGroupForChangeAction(u).then(function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,a.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)}):""==l||null==l?n.removeGroupFromCA(u).then(function(t){let i=e.model.id,n={id:""};n.title=o.CHG_Header_Unassigned,a.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)}):""!=l&&""!=c&&-1==d.indexOf("pid:")?n.removeGroupFromCA(u).then(function(t){n.createGroupForChangeAction(u).then(function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,a.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)}):""!=l&&""!=c&&d.indexOf("pid:")>-1?c!=d?n.removeGroupFromCA(u).then(function(t){n.updateGroupToAddCA(u).then(function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,a.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)}):(p=document.getElementById("outer-ca-div"))&&s.unmask(p):""!=l&&""==c&&d.indexOf("pid:")>-1&&n.updateGroupToAddCA(u).then(function(t){let i=e.model.id,n={};n.id=t.id,n.title=t.title,a.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)})}else if("createGroupFromSummary"==e.facetName)if(c=e.oldGroupId,u={title:l,changeactions:e.ChangeActionList,oldGroupId:c,availbleGroupId:d},""==c&&d.indexOf("pid:")>-1)n.updateGroupToAddCA(u).then(function(e){u.groupId=e.id,a.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)});else if(""==l||null==l)n.removeGroupFromCA(u).then(function(e){a.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)});else if(""==c&&-1==d.indexOf("pid:"))n.createGroupForChangeAction(u).then(function(e){u.groupId=e.id,a.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)});else if(""!=c&&d.indexOf("pid:")>-1){var p;c!=d?n.removeGroupFromCA(u).then(function(e){n.updateGroupToAddCA(u).then(function(e){u.groupId=e.id,a.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)}):(p=document.getElementById("outer-ca-div"))&&s.unmask(p)}else""!=l&&""!=c&&-1==d.indexOf("pid:")&&n.removeGroupFromCA(u).then(function(e){n.createGroupForChangeAction(u).then(function(e){u.groupId=e.id,a.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)})},function(e){return Promise.reject(e)});t.closeDialog()}else{let i=e.model._attributes.attributes.find(e=>"Group"==e.command);if("createGroupFromIdCard"==e.facetName&&i.valueActual){let s="";i.valueActual&&(s=i.valueActual),u={title:l,changeactions:["pid:"+e.model.id],oldGroupId:s},n.removeGroupFromCA(u).then(function(t){let i=e.model.id,n={id:""};n.title=o.CHG_Header_Unassigned,a.publish("ca-IDCard-on-change-group",{id:i,group:n})},function(e){return Promise.reject(e)}),t.closeDialog()}else"createGroupFromSummary"==e.facetName&&e.oldGroupId&&(c=e.oldGroupId,u={title:l,changeactions:e.ChangeActionList,oldGroupId:c},n.removeGroupFromCA(u).then(function(e){a.publish("CA-Group-Update",u)},function(e){return Promise.reject(e)}),t.closeDialog())}},className:"primary"},{label:o.CHG_Button_Cancel,handler:function(){t.closeDialog()},className:"default"}],d={title:o.CHG_GROUP_DIALOG_TITLE,content:"<div id='caAutoCDivPop'></div>",buttonArray:l,target:widget.body};t.launchInfoDailog(d);var c=document.querySelector("#caAutoCDivPop");if("createGroupFromIdCard"==e.facetName){r=void 0;let t=e.model._attributes.attributes.find(e=>"Group"==e.command);t.valueActual&&(r={id:t.valueActual,title:t.valueDisplay})}else if("createGroupFromSummary"==e.facetName){r=void 0;""!=e.oldGroupId&&(r={id:e.oldGroupId,title:e.oldGroupTitle})}i.loadAutoComplete(c,r)}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/members/ChgCRMembersDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){"use strict";var h=e.extend({init:function(e){this.contextID=e},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({useAsyncPreExpand:!0,id:"crMembers"});return this.setTreeDocument(e),e},loadChangeRequestMembersData:function(e,t){o.isRouteTemplateConnected=!1,o.isChangeCoordinatorConnected=!1,e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);e.addRoot(i),e.pushUpdate();let n=document.getElementById("crMembers");n&&p.isMasked(n)&&p.unmask(n)},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomPersonNameField(e);e.person_name=t,e.roleList="";for(var n=0;n<e.roles.length;n++){var s=e.roles[n],r=o.getRoleNLSValue(s);e.roleList+=r,n!=e.roles.length-1&&(e.roleList+=", ")}e.roles.indexOf("Approver")>=0&&(o.isRouteTemplateConnected=!0),e.roles.indexOf("Coordinator")>=0&&(o.isChangeCoordinatorConnected=!0);var l="",d=[e.icon],c=e.roleList;"Person"==e.type?(l=this.getPersonImageDiv(e,!0)).addClassName("chg-member-profile-picture"):l=e.thumbnail;if("Route Template"==e.type)var u=new i({label:e.title,subLabel:"",description:c,grid:e,icons:d,thumbnail:l,contextualMenu:["Copy1","Move1"]});else{let t;t="true"==a.getGlobalVariable().CHG_MEMBERS_USERNAMES&&"person"===e.type.toLowerCase()?e.fullName+"("+e.userId.toUpperCase()+")":e.fullName;u=new i({label:t,subLabel:"",description:c,grid:e,icons:d,thumbnail:l,contextualMenu:["Copy1","Move1"]})}return u},createCustomPersonNameField:function(e){var t=new UWA.Element("div",{class:"members"}),i="";if((i="Person"==e.type?this.getPersonImageDiv(e):this.getRouteTemplateImageDiv(e)).addClassName("assignee"),"Route Template"==e.type)var n=UWA.createElement("span",{class:"userName",html:e.title});else n=UWA.createElement("span",{class:"userName",html:e.fullName});return i.inject(t),n.inject(t),t.outerHTML},getPersonImageDiv:function(e,t){var i="/api/user/getpicture/login/"+e.userId+"/format/normal";i=a.getGlobalVariable().computeSwymUrl(i);var n=new UWA.Element("div",{}),o="";if(a.getGlobalVariable().isSwymInstalled)o=UWA.createElement("img",{class:"userIcon",src:i});else{var s=r.getAvatarDetails(e.fullName);o=UWA.createElement("div",{html:s.avatarStr}),1==t?(o.addClassName("chg-member-profile-picture"),o.addClassName("chg-team-profile-text")):o.addClassName("avatarIcon"),o.style.setProperty("background",s.avatarColor)}return o.inject(n),n},getRouteTemplateImageDiv:function(e){var t=new UWA.Element("div",{});return UWA.createElement("img",{class:"memberIcon",src:e.icon}).inject(t),t},addNodesInLayoutModel:function(e,t){var i=h.prototype.createTreeDocumentNodeModel(t);e.prepareUpdate(),e.addRoot(i),e.pushUpdate()},removeChildren:function(){var e=this,t=e.contextID,i=e.treeDocument.getSelectedNodes();if(0!=i.length){for(var n="",a="",r={person:[],userGroup:[]},d={person:[],userGroup:[]},c=0;c<i.length;c++){let e=i[c].options.grid;var g=e.role;if(g.includes("Owner")||g.includes("Originator")){let e=document.getElementById("crMembers");e&&p.isMasked(e)&&p.unmask(e),u.warn(s.CHG_Warn_Member_Remove_Owner_Originator)}else g.includes("Coordinator")&&(n=e.userId,o.isChangeCoordinatorConnected=!1),g.includes("Approver")&&(a=e.id,o.isRouteTemplateConnected=!1),g.includes("Follower")&&("Person"==e.type?r.person.push(e.userId):"Group"==e.type&&r.userGroup.push(e.id)),g.includes("Assignee")&&("Person"==e.type?d.person.push(e.userId):"Group"==e.type&&d.userGroup.push(e.id))}if(""!=a||d.person.length>0||d.userGroup.length>0||r.person.length>0||r.userGroup.length>0||""!=n){var h=o.makeUpdateMemberJson("DISCONNECT",n,a,r,d);l.updateChangeRequestMembers(t,h).then(function(t){for(var n=0;n<i.length;n++){var o=i[n].options.grid.role;o.includes("Owner")||o.includes("Originator")||e.treeDocument.removeRoot(i[n])}let a=document.getElementById("crMembers");a&&p.isMasked(a)&&p.unmask(a)},function(e){let t=document.getElementById("crMembers");t&&p.isMasked(t)&&p.unmask(t)})}}}});return h}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/util/ChgCRMembersGridUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/members/ChgCRMembersDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/CoreEvents/ModelEvents","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C){"use strict";var f={createMembersView:function(o){var a=this,l={},d=document.querySelector(".wux-controls-autoComplete-popup");d&&d.hide(),l=UWA.merge(l,o),this._modelEvents=l.contextDetails._modelEvents,a.id=l.id,l.columns=i.getColumns(),a.ChgCRMembersDataGridModel=new n(o.id),l.treeDocument=a.ChgCRMembersDataGridModel.createTreeDocument(),a.subscribeToModelEvents(l.treeDocument),a.ChgCRMembersTreeModel=l.treeDocument;var c=new e(l);a.membersDataGridView=c,g.mask(l.target);let u=a.membersDataGridView.membersDatagrid;s.getChangeRequestMembers(o.id).then(function(e){console.log("Change Request Memeber list: "+e);var i=r.processedChangeRequestMemberList(e);if(0==i.length){let e=document.getElementById("crMembers");e&&g.isMasked(e)&&g.unmask(e),a._modelEvents.publish({event:"showEmpty-datagrid",data:u})}a.ChgCRMembersDataGridModel.loadChangeRequestMembersData(l.treeDocument,i),0==l.treeDocument.getChildren().length?t.showEmptyView():t.hideEmptyView(),t.changeView()},function(e){let t=document.getElementById("crMembers");return t&&g.isMasked(t)&&g.unmask(t),Promise.reject(e)})},subscribeToModelEvents:function(e){var t=this;this._modelEvents._pubsub.topics[this._modelEvents._formatEvent("cr-members-object-selection-update")]||this._modelEvents.subscribe({event:"cr-members-object-selection-update"},function(e){f.handleObjectSelectionUpdate(e)}),h.unsubscribe(`${e.options.id}:${widget.id}`),h.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgMembersTreeModel),e._cleanBIFilterProxy()})}),h.unsubscribe(`crMembers:${widget.id}`),h.subscribe(`crMembers:${widget.id}`,function(){t._modelEvents.publish({event:"update_object_select",data:{node:t.membersDataGridView.options.treeDocument._getTrueRoot(),contextID:t.membersDataGridView.options.contextDetails.id,contextType:t.membersDataGridView.options.contextDetails.isKindOfType,isNodeAdded:!1}})})},changeView:function(e){i.changeView("GridView")},addNodesInLayout:function(e){f.ChgCRMembersDataGridModel.addNodesInLayoutModel(this.ChgCRMembersTreeModel,e)},removeHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Members",action:"CR>Members>Remove"}};if(C("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=f.ChgCRMembersDataGridModel.treeDocument.getSelectedNodes().length){let e=document.getElementById("crMembers");e&&g.mask(e)}f.ChgCRMembersDataGridModel.removeChildren()},updatePersonRole:function(e,t){if(console.log("updatePersonRole"),0==f.ChgCRMembersTreeModel.getSelectedNodes().length);else{var n="",o={person:[],userGroup:[]},a={person:[],userGroup:[]},s="",r=t.role,l=Array.isArray(r)?t[r[0]]:t[r];if("Route Template"==t.currentObjType||"Group"==t.currentObjType)var d=f.ChgCRMembersTreeModel.getSelectedNodes()[0].options.grid.id;if("Person"==t.currentObjType)var c=f.ChgCRMembersTreeModel.getSelectedNodes()[0].options.grid.userId;r.indexOf("Coordinator")>=0&&(n=c),r.indexOf("Follower")>=0&&("Person"==t.currentObjType?o.person.push(c):"Group"==t.currentObjType&&o.userGroup.push(d)),r.indexOf("Assignee")>=0&&("Person"==t.currentObjType?a.person.push(c):"Group"==t.currentObjType&&a.userGroup.push(d)),r.indexOf("Approver")>=0&&(s=d);var u=i.makeUpdateMemberJson(l,n,s,o,a);"DISCONNECT"==l&&1==t.showConfirmation?f.showConfirmationDialog(u):f.updateCRPeople(u,!1,r)}},showConfirmationDialog:function(e){var t=new d({}),i=document.getElementById("outer-member-grid-div");t.inject(i),new c({immersiveFrame:t,title:m.CHG_Member_Remove_Title,content:m.CHG_Member_Remove_Message,activeFlag:!1,modelFlag:!0,width:500,buttons:{No:new u({onClick:function(e){t.destroy()}}),Yes:new u({onClick:function(i){t.destroy(),f.updateCRPeople(e,!0)}})}}).addEventListener("close",function(e){t&&t.destroy()})},updateCRPeople:function(e,t,n){if(""!=e){var o=f.id;s.updateChangeRequestMembers(o,e).then(function(e){var o=f.ChgCRMembersTreeModel,a=o.getSelectedNodes()[0];if(1==t)a.options.grid.role.includes("Coordinator")&&(i.isChangeCoordinatorConnected=!1),"Approver"==a.options.grid.role&&(i.isRouteTemplateConnected=!1),a.remove();else if(""!=n&&1==e.success){o.prepareUpdate();var s=a.options.grid.role,r=a.options.description,l=i.getRoleNLSValue(n);if(e.data.length>0){let e=","+n,t=", "+l;var d=r.concat(t);a.options.description=d,a.setAttribute("roleList",d),a.options.grid.role=s.concat(e),a.options.grid.roles.push(n),"Coordinator"==n&&(i.isChangeCoordinatorConnected=!0)}else{d=i.removeRole(r,l);a.setAttribute("roleList",d),a.options.description=d,a.options.grid.role=i.removeRole(s,n);var c=a.options.grid.roles.filter(function(e,t,i){return e!=n});a.options.grid.roles=c,"Coordinator"==n&&(i.isChangeCoordinatorConnected=!1)}o.pushUpdate()}})}},refreshLayout:function(e){var t=this.ChgCRMembersTreeModel;(new n).updateNodeIndexed(t,e)},changeView:function(e){i.changeView("GridView")},globalSubscribeForCRMemberView:function(){a.addObserver("ChgCRMembersDataGridLayout","CO-AccessBit-Update",f.handleAccessBitUpdate),a.addObserver("ChgCRMembersDataGridLayout","ENOLC_MOVE_CMD_UPDATE",f.handleTransferownership)},handleTransferownership:function(e){e.data.attributes.hasOwnProperty(f.id)&&s.getChangeRequestMembers(f.id).then(function(e){f.ChgCRMembersTreeModel.empty();var t=r.processedChangeRequestMemberList(e);f.ChgCRMembersDataGridModel.loadChangeRequestMembersData(f.ChgCRMembersTreeModel,t)})},handleAccessBitUpdate:function(e){e.id==f.id&&(console.log("ChgMembersDataGridLayout handleAccessBitUpdate: "+e.accessBits),"false"==e.accessBits.SetCoordinator?f.setCoordinatorAccessBit=!1:f.setCoordinatorAccessBit=!0,"false"==e.accessBits.ManageRouteTemplates?f.manageApproverAccessBit=!1:f.manageApproverAccessBit=!0,"false"==e.accessBits.ManageFollowers?f.manageFollowersAccessBit=!1:f.manageFollowersAccessBit=!0,f.setCoordinatorAccessBit||f.manageApproverAccessBit||f.manageFollowersAccessBit?f.accessBit=!0:(f.accessBit=!1,f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{visibleFlag:!1})))},handleObjectSelectionUpdate:function(e){f.accessBit?0==e.count?f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1}):f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0}):(f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{visibleFlag:!1}),f.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1}))}};return f.globalSubscribeForCRMemberView(),f}),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAttributeSubscriber",["DS/LifecycleCmd/MaturityCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeOwnerCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_TransferOwnershipCmd","DS/ENOCollabSharingCmds/commands/TransferOwnershipCmd/ActionBar_ChangeCSCmd","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/ENOChangeActionUX/scripts/Views/CADependenciesGridView","UWA/Core","DS/ENOChgGovernanceUX/scripts/components/applicabilityView/ChgApplicabilityView","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView","DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){var v={init:function(e){this._maturityInEdit=!1,this._modelForIdCard=e,this._subscribeToPlatformEvents(),this._subscribeToModelEvents(),this.attachmentView=u},_subscribeToPlatformEvents:function(){var e=this;v.platformEventsSubscribed||(a.subscribe("ENOLC_MOVE_CMD_UPDATE",function(t){console.log("new transfer data"+t);var i,n,o,s,r,l=t.data.paths,d=e._modelForIdCard.id;l.indexOf(d)>-1&&(i=t.data.attributes[d],n=i.newCollabSpace,o=i.newOrganization,s=i.newOwnerFullName,r=i.newOwnerId);var c={};let u={};c.attributes={},r&&s&&(c.attributes.owner={valueActual:r,valueDisplay:s}),o&&(c.attributes.orgnaization={valueActual:o,valueDisplay:o},u["ds6w:organizationResponsible"]=[o]),n&&(c.attributes.collabSpace={valueActual:n,valueDisplay:n},u["ds6w:project"]=[n]);var p,m=[];if("ChangeOrder"==e._modelForIdCard.get("isKindOfType")?p=g.getChangeOrderUserAccess(d):"ChangeRequest"==e._modelForIdCard.get("isKindOfType")?p=g.getChangeRequestUserAccess(d):"ChangeAction"==e._modelForIdCard.get("isKindOfType")?p=g.getChangeActionUserAccess(d):"InvestigationRequest"==e._modelForIdCard.get("isKindOfType")&&(p=g.getInvestigationRequestUserAccess(d)),m.push(p),n||o){var C=h.getNLSValuesPromise(u);m.push(C)}Promise.all(m).then(function(t){var i={id:t[0].data[0].id,type:t[0].data[0].type,accessBits:t[0].data[0].dataelements?t[0].data[0].dataelements:t[0].data[0]};if(n){let e=t[1]["ds6w:project"][n];c.attributes.collabSpace.valueDisplay=e}if(o){let e=t[1]["ds6w:organizationResponsible"][o];c.attributes.orgnaization.valueDisplay=e}a.publish("CO-AccessBit-Update",i),c=UWA.merge(c,i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:c})})}),a.subscribe("CO-Properties-Update",function(t){if(e._modelForIdCard.id===t.objectId){var i={};let n=e._modelForIdCard.get("isKindOfType");i.id=e._modelForIdCard.id,i.attributes={},t.owner.valueDB!=e._modelForIdCard.get("owner")&&(i.attributes.owner={valueActual:t.owner.valueDB,valueDisplay:t.owner.value}),"ChangeAction"==n?t.Synopsis.value!=e._modelForIdCard.get("title")&&(i.title=t.Synopsis.value):t.Title.value!=e._modelForIdCard.get("title")&&(i.title=t.Title.value),t.description.value!=e._modelForIdCard.get("freezones")[0]&&(i.freezones=[t.description.value]),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i})}})),v.platformEventsSubscribed=!0},_subscribeToModelEvents:function(){var e=this;e.modelEvents=e._modelForIdCard.get("modelEvents");var t=c.getDependency("xChangeApp");e.modelEvents.subscribe({event:"idcard-attributes-clicked"},function(i){if(console.log("idcard-attributes-clicked: modelEvents"),UWA.is(i.index,"number")){var n=e._modelForIdCard.get("attributes"),o=n[i.index].command;if(void 0!==n[i.index].editable&&n[i.index].editable)switch(o){case"owner":e.handleChangeOwner(e._modelForIdCard);break;case"collabSpace":e.handleChangeCollabSpace(e._modelForIdCard);break;case"orgnaization":e.handleChangeOrganization(e._modelForIdCard);break;case"maturity":break;case"Applicability":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Applicability"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Dependency":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Dependency"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Attachments":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"Attachment"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"RelatedScope":let r={context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType")};"ChangeRequest"==e._modelForIdCard.get("isKindOfType")?r.facetSelect="CR_RelatedScope":r.facetSelect="CO_RelatedScope",t._applicationChannel.publish({event:"update-property-panel-contextdata",data:r}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"Flowdown":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"CA_Flowdown"}}),t._applicationChannel.publish({event:"information-panel-open",data:null});break;case"isGoverned":t._applicationChannel.publish({event:"update-property-panel-contextdata",data:{context:e._modelForIdCard.id,type:e._modelForIdCard.get("isKindOfType"),facetSelect:"relations",isViaHeader:!0}}),t._applicationChannel.publish({event:"information-panel-open",data:{isViaHeader:!0}});break;case"Group":e.handleGroupCreate(e._modelForIdCard);break;case"AffectedItems":a.publish("openIRAffectedItemsTab",{});break;case"irAttachments":a.publish("openIRAttachmentsTab",{});break;case"Issues":a.publish("openIRIssuesTab",{});break;default:var s={};s.id=e._modelForIdCard.id,n[i.index].callback(s)}}}),e.modelEvents.subscribe({event:"maturity-updated"},function(t){console.log("maturity-updated: modelEvents"+t);var i=e._modelForIdCard.id;if("Change Order"==e._modelForIdCard.get("type"))g.getChangeOrderUserAccess(i).then(function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0].dataelements};a.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i}),f("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});else if("Change Request"==e._modelForIdCard.get("type"))g.getChangeRequestUserAccess(i).then(function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0].dataelements};a.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i}),f("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});else if("ChangeAction"==e._modelForIdCard.get("isKindOfType")){g.getChangeActionUserAccess(i).then(function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0]};a.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i}),f("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()});var n=t.valueActual;if(d.getGlobalVariable().isNative){n&&""!=n&&["Approved","Complete","Prepare","Cancelled","In Approval"].indexOf(n)>-1&&m.takeOffFromWorkUnder()}}else"Investigation Request"==e._modelForIdCard.get("type")&&g.getInvestigationRequestUserAccess(i).then(function(t){var i={id:t.data[0].id,type:t.data[0].type,accessBits:t.data[0].dataelements};a.publish("CO-AccessBit-Update",i),e.modelEvents.publish({event:"idcard-header-update"+widget.id,data:i}),f("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh()})})},handleChangeOwner:function(e){var t=this.getTransferObject(e);new i({context:t,ID:"ActionBar_ChangeOwner"}).begin()},handleChangeCollabSpace:function(e){var i=this.getTransferObject(e);new t({context:i,ID:"ActionBar_ChangeCS"}).begin()},handleChangeOrganization:function(e){var i=this.getTransferObject(e);new t({context:i,ID:"ActionBar_ChangeOrg"}).begin()},handleChangeIsGoverned:function(e){console.log("Is governed clicked...!");let t=[];t.push(e.id),d.getGlobalVariable().isNative?m.DispatchEventToWin("onRelations",t):require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){e.openRelationalExplorer(t)})},handleGroupCreate:function(e){console.log("Usr group clicked...!");let t={facetName:"createGroupFromIdCard",model:e};p.createGroup(t)},handleChangeMaturity:function(t){var i=this.getTransferObject(t);new e({context:i,ID:"MaturityHeader"}).executeAsync({physicalid:t.id}).then(function(){console.log("Maturity Updated!!!")},function(){console.log("Maturity Update failed!!!")})},getTransferObject:function(e){var t={_selectedItems:[],getSelectedNodes:function(){return this._selectedItems},addSelection:function(e,t){this._selectedItems=[];var i=this;UWA.is(e,"array")?e.forEach(function(e){i._selectedItems.push(e)}):i._selectedItems.push(e)},getReference:function(e){return getID()},getParent:function(e){return e.getParent()},getType:function(e){return getType()},getName:function(e){return getLabel()},securityContext:{SecurityContext:d.getGlobalVariable().getSecurityContext(),tenant:d.getGlobalVariable().tenant},getSecurityContext:function(){return this.securityContext}},i=UWA.extend(e,{getID:function(){return e.get("id")},getLabel:function(){return e.get("name")},getOwner:function(){return e.get("owner")},getType:function(){return e.get("type")},getDisplayName:function(){return e.get("name")},object:{revision:e.get("version")}});return t.addSelection(i),t},handleChangedependency:function(e){var t=c.getDependency("xChangeApp"),i=c.getDependency("applicationChannel"),n=t.infoPanel,a=new UWA.Element("div",{id:"dependency-mainContainer"}),r=UWA.createElement("div",{id:"co-dependency"}),l=new UWA.Element("div",{class:"dependency-header",title:o.CHG_GOV_CO_DEPENDENCY_VIEW});UWA.createElement("h5",{text:o.CHG_GOV_CO_DEPENDENCY_VIEW}).inject(l),l.inject(a),r.inject(a);var d={facetName:"dependency",PhysicalID:this._modelForIdCard.id,model:e}.PhysicalID;d="pid:"+d;var u={};u.id=d,u.widgetId=widget.id,u.widgetTitle=widget.title,u.showFlowdown=!1;var p=new s(u);p.container=r,this.facetView=p;for(var g=n.childNodes,h=0;h<g.length;h++){var m=g[h].className;UWA.is(m)&&"secondmainContainer-sidepanel"===m?g[h].style.display="block":g[h].style.display="none"}p.render(),g[1].empty(),a.inject(g[1]),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})},handleChangeApplicability:function(e){var t=c.getDependency("xChangeApp"),i=c.getDependency("applicationChannel"),n=t.infoPanel;new l({model:e,container:n}).build(),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})},handleChangeAttachments:function(e){var t=c.getDependency("xChangeApp"),i=c.getDependency("applicationChannel"),n=t.infoPanel.childNodes,a=new UWA.Element("div",{id:"attachment-mainContainer"}),s=new UWA.Element("div",{class:"attachment-header",title:o.CHG_GOV_Header_Attachments});UWA.createElement("h5",{text:o.CHG_GOV_Header_Attachments}).inject(s),s.inject(a);for(var r=0;r<n.length;r++){var l=n[r].className;UWA.is(l)&&"secondmainContainer-sidepanel"===l?n[r].style.display="block":n[r].style.display="none"}var d={id:this._modelForIdCard.id,target:a};this.attachmentView.create(d);n[1].empty(),a.inject(n[1]),i.publish({event:"triptych-show-panel",data:"right"}),i.publish({event:"information-panel-visible",data:null})}};return v}),define("DS/ENOChgGovernanceUX/scripts/util/ChgGovInit",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Class/Events","DS/ENOChangeActionUX/scripts/Services/ChgChangeActionServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g){return t.extend(i,n,{init:function(e){s.initialize(),this._options=e,console.log(e),this.initPreference()},loadInfraForGovWidget:function(){return that=this,new Promise(function(e,t){that.populateChgGovPreferences().then(function(t){l.getCSRFToken().then(function(t){o.getExpressionValue().then(function(t){l.iaSubTypesFetched().then(function(t){c.coSubTypesFetched().then(function(t){c.crSubTypesFetched().then(function(t){c.iaSubTypesFetched().then(function(t){l.caSubTypesFetched().then(function(t){e()})})})})})})})})})},loadGovWidget:function(e){let t=a.getGlobalVariable().contextUser,i=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;if(r.getUserFullName(t).then(function(e){let t=a.getGlobalVariable().contextUser,i=e.userDisplayName.userInfo[t].userDisplayName;a.getGlobalVariable().contextUserFullName=i}),null!==i||1==a.getGlobalVariable().isNative){let t=null;if(UWA.is(i)){let e=i.data;if(null!==e&&e.items.length>0){let i=e.items[e.items.length-1];t=i.objectId}}else 1==a.getGlobalVariable().isNative&&(t=this._options.information.pid);if(UWA.is(t)&&""!=t)d.getObjectTypeInformation(t).then(function(i){if("Change Order"==i){e({type:"IDCard",extData:{parentType:"Change Order",objectId:t}})}else if("Change Request"==i){e({type:"IDCard",extData:{parentType:"Change Request",objectId:t}})}else if("Change Action"==i){e({type:"IDCard",extData:{parentType:"Change Action",objectId:t}})}else{g.error(p.CHG_Notice_ObjectNotAccesible),e({type:"COLoadSummary",options:{}})}},function(e){return console.log("widget initilization failed"),Promise.reject(e)});else{e({type:"COLoadSummary",options:{}})}}else{e({type:"COLoadSummary",options:{}})}require(["DS/MSFDocumentManagement/WidgetIntegration"],function(e){widget.MSFDocumentClient&&(widget.MSFDocumentClient=e,widget.MSFDocumentClient.ConnectWidgetWithMSF())}),"true"===a.getGlobalVariable().CHG_APPROVAL_COLUMN&&require(["DS/RouteWebAppUX/Utilities/RouteLinkWidget"],function(e){e.init(widget,{appIds:["ENXROUT_AP"],open:!1}),e.subscribeForRouteEvents(widget)})},initPreference:function(){var e=a.getGlobalVariable().contextUser;u.setUserId(e),u.initialize(!0,!0,!1)},populateChgGovPreferences:function(){var e=this;return new Promise(function(t,i){var n=[],o=e.populateRecentlyOpenedPreferences();n.push(o);var a=e.populateDueDatePreferences();n.push(a),Promise.all(n).then(function(e){t("success")})})},populateRecentlyOpenedPreferences:function(){var e={name:"recentlyOpenedCount",type:"list",label:p.CHG_GOV_Preferences_Recently_Opened,options:[],defaultValue:"5"};return new Promise(function(t,i){e.options.push({value:"1",label:"1"}),e.options.push({value:"2",label:"2"}),e.options.push({value:"3",label:"3"}),e.options.push({value:"4",label:"4"}),e.options.push({value:"5",label:"5"});var n={};widget.addPreference(e),n.NamePreference=e,t(n)})},populateDueDatePreferences:function(){var e={name:"dueDateApproach",type:"list",label:p.CHG_GOV_Preferences_Due_Date,options:[],defaultValue:2};return new Promise(function(t,i){for(let t=1;t<100;t++)e.options.push({value:t,label:t});var n={};widget.addPreference(e),n.NamePreference=e,t(n)})}})}),define("DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCAAddMemberHandler",["DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersForm","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMemberSlideinForm","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAAddMemberView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/util/ChgCAMembersGridUtil","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgNativeInitService","DS/ENOChgServices/scripts/services/ChgErrors","DS/Controls/Button","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/config/ChgGovAutoCompleteFilterlConfig","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b){"use strict";var w={getDataToBuildAddMemberPanel:function(e){w.teamlayoutModel=e.model,w.id=e.id,w.objectTitle=e.objectTitle,w.options=e,w.modelForChangeCoordinator=new h,w.modelForAssignee=new h,w.modelForApprover=new h,w.modelForFollower=new h,this.filterByTrigramHandler()},setDataForAddMember:function(e){var t=[];return t.push({label:f.CHG_GOV_Members_DataGrid_Assignee,id:"assignee",allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Assignee",placeholder:f.CHG_Add_Member_Type_To_Search,customFilterMessage:f.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"]}),t.push({label:f.CHG_GOV_Members_DataGrid_Approver,id:"approver",getListOfUsers:this.getMembersListForApprover,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Approver",placeholder:f.CHG_Add_Member_Type_To_Search,customFilterMessage:f.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","routetemplate"]}),t.push({label:f.CHG_GOV_Members_DataGrid_InformedUser,id:"follower",getListOfUsers:this.getMembersListForFollower,allowMultiple:!0,supportTypeAhead:!0,minLengthBeforeSearch:3,supportSearch:!0,editable:!0,filterId:"trigramNameFilter_Follower",placeholder:f.CHG_Add_Member_Type_To_Search,customFilterMessage:f.CHG_No_Search_found,multiSearchMode:!0,supportType:["person","group"]}),{title:f.CHG_Member_AddMember_Title,objectTitle:w.objectTitle,target:w.options.target,fields:t,addMemberSubmitHandler:this.addmember,teamlayoutModel:w.teamlayoutModel,makeDroppable:o.makeDroppable,type:"Change Action"}},launchAddMemberPanel:function(){var i={commandInfo:{type:"Change Action",facet:"Members",action:"CR>Members>Add Member"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),w.approverDivDisable=!1,"Route Template"===D.reviewerType.typeOfReviewer&&(w.approverDivDisable=!0);var n=w.setDataForAddMember(),o=new e(n);(new t).buildAddMemberDialog(o)},getMembersListForApprover:async function(e){var t={categoryId:"reviewer",contextUser:d.getGlobalVariable().contextUser,text:e};w.teamlayoutModel.getChildren();w.modelForApprover.empty();let i=await l.getMembersListForCA(t);i.length>999&&u.warn(f.CHG_Add_Member_Warning),w.modelForApprover.prepareUpdate();for(var n=0;n<i.length;n++){var o=new m({label:i[n].name,value:{label:i[n].name},name:i[n].name,identifier:i[n].identifier,type:i[n].type,grid:{type:i[n].type,name:i[n].name},id:i[n].id});w.modelForApprover.addRoot(o)}return w.modelForApprover.pushUpdate(),w.modelForApprover},getMembersListForFollower:async function(e){var t={categoryId:"follower",contextUser:d.getGlobalVariable().contextUser,text:e};let i={},n=w.teamlayoutModel.getChildren();for(let e=0;e<n.length;e++){let t=n[e].options.grid;i[t.id]=t.roleList}w.modelForFollower.empty();let o=await l.getMembersListForCA(t);if(null!=o.length){w.modelForFollower.prepareUpdate();for(var a=0;a<o.length;a++){let e,t=o[a].id;if("person"===o[a].type.toLowerCase()?e=o[a].name+"("+o[a].identifier.toUpperCase()+")":"group"===o[a].type.toLowerCase()&&(e=o[a].name),!i.hasOwnProperty(t)||(o[a].personRole=i[t],1!=i[t].contains("Follower"))){var s=new m({label:o[a].name,value:{label:e,subLabel:o[a].personRole},name:o[a].name,identifier:o[a].identifier,type:o[a].type,id:o[a].id});w.modelForFollower.addRoot(s)}}return w.modelForFollower.pushUpdate(),w.modelForFollower}},getMembersListForAssignee:async function(e){var t={categoryId:"assignee",contextUser:d.getGlobalVariable().contextUser,text:e,supportType:["Person","Group"]};let i={},n=w.teamlayoutModel.getChildren();for(let e=0;e<n.length;e++){let t=n[e].options.grid;i[t.id]=t.roleList}w.modelForAssignee.empty();let o=await D.getMembersList(t);o.length>999&&u.warn(f.CHG_Add_Member_Warning),w.modelForAssignee.prepareUpdate();for(var a=0;a<o.length;a++){let e,t=o[a].id;if("person"===o[a].type.toLowerCase()?e=o[a].name+"("+o[a].identifier.toUpperCase()+")":"group"===o[a].type.toLowerCase()&&(e=o[a].name),i.hasOwnProperty(t)&&(o[a].personRole=i[t],1==i[t].contains(f.CHG_Member_Role_Assignee)))continue;let n=new m({label:o[a].name,value:{label:e,subLabel:o[a].personRole},name:o[a].name,identifier:o[a].identifier,type:o[a].type,id:o[a].id});w.modelForAssignee.addRoot(n)}return w.modelForAssignee.pushUpdate(),w.modelForAssignee},filterByTrigramHandler:function(){w.modelForChangeCoordinator.getFilterManager().registerFilter("trigramNameFilter_CCO",(new C).getTrigramNameFilter()),w.modelForAssignee.getFilterManager().registerFilter("trigramNameFilter_Assignee",(new C).getTrigramNameFilter()),w.modelForApprover.getFilterManager().registerFilter("trigramNameFilter_Approver",(new C).getTrigramNameFilter()),w.modelForFollower.getFilterManager().registerFilter("trigramNameFilter_Follower",(new C).getTrigramNameFilter())},dragAndDropHandler:function(){var e=w.options.target.querySelector("#memberFieldElementchangeCoordinator");o.makeDroppable(e,this.ExecuteDropForChangeCoordinatorField)},ExecuteDropForChangeCoordinatorField:function(e){return e},addmember:function(e,t){let i=e.assignee,n=e.approver,o=e.follower;var a=w.id,l=b.makeUpdateMemberJson("CONNECT",i,n,o,"",t);s.updateChangeActionMembers(a,l).then(function(e){var t=r.processedChangeActionMemberList(e);require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],function(e){for(var i=e.membersTreeModel.getChildren(),n=[],o=0;o<t.length;o++){var a=t[o];if("approver"==a.role){if("Route Template"==a.type){n.push(a),D.reviewerType.typeOfReviewer="Route Template";continue}"Person"==a.type&&(D.reviewerType.typeOfReviewer="Person")}"Coordinator"==a.role&&(b.isChangeCoordinatorConnected=!0);for(var s=a.id,r=!1,l=0;l<i.length;l++)if(s==i[l].options.grid.id){r=!0;break}if(1==r){e.ChgMembersTreeModel.prepareUpdate();let t=a.role,n="";if(t.includes(",")){let e=t.split(",");for(let t=0;t<e.length;t++)n+=", "+b.getRoleNLSValue(e[t].trim()),i[l].options.grid.roles.push(e[t].trim())}else n=", "+b.getRoleNLSValue(t),i[l].options.grid.roles.push(t);i[l].options.description=i[l].options.grid.roleList+=n,i[l].options.grid.role+=","+t,e.ChgMembersTreeModel.pushUpdate()}else n.push(a)}n.length>0&&e.addNodesInLayout(n)})})}};return w}),define("DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAdaptor",["UWA/Class","UWA/Class/Model","DS/CoreEvents/ModelEvents","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/view/ChgIDCardHeaderBuilder","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAttributeSubscriber","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderMenuSubscriber","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChangeIDCard","DS/PlatformAPI/PlatformAPI"],function(e,t,i,n,o,a,s,r,l){return{createIDCardHeader:function(e,t,i){var s=this.prepareIdCardData(t,i);this._idCardHeaderBuilder=new n({model:s}),o.init(s),a.init(s),e.empty(),e.setAttribute("draggable","true"),e.setAttribute("droppable","true");var r=this.prepareDragData(t),l=s.get("smallIcon"),d=new Image;d.src=l,this._idCardHeaderBuilder.render().inject(e),this._idCardHeaderBuilder.attachResizeSensor(),e.addEventListener("dragstart",function(e){console.log("inside drag"+r),e.dataTransfer.setData("Text",r),e.dataTransfer.setDragImage(d,0,0),e.dataTransfer.effectAllowed="copy"})},prepareDragData:function(e){var t={protocol:"3DXContent",version:"1.1",source:widget.getValue("appId"),widgetId:widget.id,data:{items:[]}},i=[],n={envId:widget.getValue("x3dPlatformId")?widget.getValue("x3dPlatformId"):"OnPremise",serviceId:"3DSpace",objectId:e.id,objectType:e.type,displayName:e.title};return i.push(n),t.data.items=i,JSON.stringify(t)},prepareIdCardData:function(e,n){var o=this;if(null!=e&&void 0!==e.attributes){for(var a,s=[],l=e.attributes,d=[],c=l.layout,u=0;u<c.length;u++){var p=c[u];d.push(p.length);for(var g=0;g<p.length;g++){var h=p[g],m=l.mapping[h];if(m){var C=m.showLoader?"":m.valueDisplay,f=m.showLoader?"":m.valueActual,v=m.showLoader?r.loading:"maturity"===h||m.showCustomTooltip?"":m.valueTitle?m.valueTitle:m.valueDisplay,D=m.displayWhenMinified,b=m.editable,w=m.accessBit;s.push({name:m.fieldNLS,valueDisplay:C,valueActual:f,valueTooltip:v,displayWhenMinified:D,showLoader:m.showLoader,editable:b,command:h,accessBit:w}),"maturity"===h&&(a={valueDisplay:C,valueActual:f,editable:b})}}}o.modelEventForIdCard=new i;var S=l.mapping.owner.valueActual?l.mapping.owner.valueActual:"",I=e.id?e.id:"",_=e.name?e.name:"",y=e.type?e.type:"",E=e.policy?e.policy:"",O=e.title?e.title:e.name,G=e.revision?e.revision:"",N=e.thumbnail?e.thumbnail:"",A=e.iconURL?e.iconURL:"",T=!!e.minified&&e.minified,M="true"==e.onHold,V=e.isKindOfType?e.isKindOfType:"",R="";e.freeSpaces[0]&&e.freeSpaces[0].data&&(R=e.freeSpaces[0].data);var U={items:e.menuItems,hiddenItems:[],events:{onClick:function(e,t){console.log("Publish idcard-dropdown-menu-action : "+t.id),o.modelEventForIdCard.publish({event:"chg-idcard-dropdown-menu-action",data:t})}}},x={id:I,withToggleMinifiedButton:!0,withActionsButton:!0,minified:T,type:y,policy:E,title:O,owner:S,version:G,currentState:a,thumbnail:N,smallIcon:A,modelEvents:o.modelEventForIdCard,dropdown:U,freezones:[R],attributes:s,attributesLayout:d,onHold:M,accessBits:n.accessBits,name:_,isKindOfType:V};return o.updateDataBasedOnAccessBit(x,n.accessBits),new t(x)}console.log("[ChgIDCardHeaderAdaptor:prepareIdCardData] Error!!! Incorrect/null data!!!")},updateDataBasedOnAccessBit:function(e,t){var i=[],n=[];e.dropdown.items.forEach(function(e,o){"true"==t[e.accessBit]?i.push(e):n.push(e)}),e.dropdown.items=i,e.dropdown.hiddenItems=n,e.attributes.forEach(function(e,i){var n=e.accessBit;n&&("false"==t[n]&&(e.editable=!1))})}}}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h){"use strict";var m=p.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),C=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"crOrchestration",useAsyncPreExpand:!0});return e.onPreExpand(function(e){var t=e.target.options.grid.id;if(console.log("call for children"+e.target),t){let n=!0;"ChangeOrder"==e.target.options.grid.isKindOfType?r.getChangeOrchestration(t,n).then(function(e){i(e)},function(e){return Promise.reject(e)}):"ChangeRequest"==e.target.options.grid.isKindOfType&&r.getCRChangeOrchestration(t,n).then(function(e){i(e)},function(e){return Promise.reject(e)})}function i(t){l.processCRChangeOrchestration(t).then(function(t){var i=C.prototype.createTreeDocumentNodeModel(t);if(e.target.hasChildren())for(var n=!1,o=e.target.getChildren(),a=0;a<i.length;a++){n=!1;for(var s=0;s<o.length;s++)if(o[s].options.grid.id==i[a].options.grid.id){n=!0;break}n||e.target.addChild(i[s])}else e.target.addChild(i);e.target.preExpandDone()})}}),e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",m)},loadChangeOrchestrationData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){var t=this.createCustomNameField(e);e.chgObjName=t;var n=this.createCustomSeverity(e);e.sev=n;var a=this.createCustomChangeCoordinatorField(e);e.chgObjCoordinator=a;var s=this.createCustomOwnerField(e);e.chgObjOwner=s;var r=e.name+" | "+e.ownerFullName,l=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var d,c=this.getStatusBarIcons(e),u=this.statusbarIconsTooltips(e),p=this.getCustomTooltip(e);return d=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:d,subLabel:r,description:l,children:e.isKindOfChangeAction?null:[],grid:e,icons:[e.iconURL],thumbnail:e.thumbnail,contextualMenu:["Copy1","Move1"],statusbarIcons:c,statusbarIconsTooltips:u,customTooltip:p,useAsyncPreExpand:!0})},createCustomNameField:function(e){var t=new UWA.Element("div",{class:"wux-tweakers wux-tweakers-string wux-tweakers-string-label wux-tweakers-labelonly"}),i=UWA.createElement("span",{html:e.name});i.style.setProperty("text-overflow","ellipsis"),i.inject(t);var n=new UWA.Element("div",{class:"iconsDiv"});if(e.ecm_change_on_hold&&"true"==e.ecm_change_on_hold.toLowerCase()){var o=new UWA.Element("div",{class:"gridIconContainer",title:a.CHG_GOV_TOOLTIP_HOLD});UWA.createElement("div",{class:"fonticon fonticon-pause"}).inject(o),o.inject(n)}return n.inject(t),t.outerHTML},createCustomSeverity:function(e){var t="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e.severity?t="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e.severity&&(t="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");var i=new UWA.Element("div",{}),n=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:t}).inject(n);var o=UWA.createElement("span",{html:e.severityNLS});return n.inject(i),o.inject(i),i.outerHTML},createCustomChangeCoordinatorField:function(e){var t=new UWA.Element("div",{class:"members"});if(""!=e.changeCoordinatorFullName){var i=new UWA.Element("div",{class:"assignee"}),n="/api/user/getpicture/login/"+e.changeCoordinator+"/format/normal",a=o.getGlobalVariable().computeSwymUrl(n),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:a});else{var l=s.getAvatarDetails(e.changeCoordinatorFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(i);var d=UWA.createElement("span",{class:"userName",html:e.changeCoordinatorFullName});i.inject(t),d.inject(t)}return t.outerHTML},createCustomOwnerField:function(e){var t="/api/user/getpicture/login/"+e.owner+"/format/normal",i=o.getGlobalVariable().computeSwymUrl(t),n=new UWA.Element("div",{class:"members"}),a=new UWA.Element("div",{class:"assignee"}),r="";if(o.getGlobalVariable().isSwymInstalled)r=UWA.createElement("img",{class:"userIcon",src:i});else{var l=s.getAvatarDetails(e.ownerFullName);(r=UWA.createElement("div",{html:l.avatarStr,class:"avatarIcon"})).style.setProperty("background",l.avatarColor)}r.inject(a);var d=UWA.createElement("span",{class:"userName",html:e.ownerFullName});return a.inject(n),d.inject(n),n.outerHTML},getStatusBarIcons:function(e){var t=[];return"Low"==e.severity?t.push("level-low"):"Medium"==e.severity?t.push("level-medium"):"High"==e.severity&&t.push("level-high"),e.ecm_change_on_hold&&"true"==e.ecm_change_on_hold.toLowerCase()&&t.push("pause"),t},statusbarIconsTooltips:function(e){var t=[];return t.push(e.severityNLS),e.ecm_change_on_hold&&"true"==e.ecm_change_on_hold.toLowerCase()&&t.push(a.CHG_GOV_TOOLTIP_HOLD),t},getCustomTooltip:function(e){return a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Severity+": "+e.severityNLS+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS},updateNodeIndexed:function(e,t){console.log(t)},addNewChildren:function(e){var t=this;let i="Change Request";if(this.treeDocument.getSelectedNodes().length>1)c.error(a.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{this.treeDocument.getSelectedNodes().length?(this.treeDocument.getSelectedNodes()[0].options.grid.id,i="Change Order"):this.contextID;var n=document.getElementById("outer-orchestration-grid-div");"undefined"!=n&&null!=n&&u.mask(n),"Change Order"==e.type?r.getChangeOrderInfo(e.objectID).then(function(e){l.processedChangeOrchestrationSummaryList(e).then(function(e){h.fetchMaturityStateCSS(e),C.prototype.addNodesInLayoutModel(t.treeDocument,e,!0),u.unmask(n)})},function(e){u.unmask(n)}):"Change Action"==e.type?r.getNewCADetails(e.objectID).then(function(e){var t=l.processChangeActionInContext(e),i=t.processData;h.fetchMaturityStateCSS(t.processData),console.log(i),require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout"],function(e){e.addNodesInLayout(i),u.unmask(n)})},function(e){u.unmask(n)}):"Change Request"==e.type&&r.getChangeRequestInfo(e.objectID).then(function(e){h.fetchMaturityStateCSS(e.data),l.processedChangeOrchestrationSummaryList(e).then(function(e){C.prototype.addNodesInLayoutModel(t.treeDocument,e),u.unmask(n)})},function(e){u.unmask(n)})}},addExistingChildren:function(e){var t,i=this;let n="Change Request";if(this.treeDocument.getSelectedNodes().length>1)c.error(a.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else{this.treeDocument.getSelectedNodes().length?(t=this.treeDocument.getSelectedNodes()[0].options.grid.id,n="Change Order"):t=this.contextID;var o=document.getElementById("outer-orchestration-grid-div");"undefined"!=o&&null!=o&&u.mask(o),r.addExistingInCRChangeOrchestration(t,n,e).then(function(e){l.processCRChangeOrchestration(e).then(function(e){C.prototype.addNodesInLayoutModel(i.treeDocument,e),u.unmask(o)})},function(e){u.unmask(o)})}},addNodesInLayoutModel:function(e,t,i=!1){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var n,o,a=C.prototype.createTreeDocumentNodeModel(t);if(e.getSelectedNodes().length?(n=!1,o=e.getSelectedNodes()[0]):n=!0,n){if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(a);else for(var s=a.length-1;s>=0;s--)e.addRoot(a[s],0);if(e.pushUpdate(),i)try{let e=g("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var r=t[0];e.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:r,View:"Change Orchestration"})}catch(e){console.log(e)}}else if(null==o.getChildren())e.addRoot(a,0);else{if(o.prepareUpdate(),0==o.getChildren().length)o.addChild(a);else for(s=a.length-1;s>=0;s--)o.addChild(a[s],0);o.pushUpdate(),o.isExpanded()||o.expand()}},removeChildren:function(){var e=this,t=e.treeDocument.getSelectedNodes();if(t.length){let p="Change Order";var i,n,s=t[0].getParent().options.grid.id;void 0===s?(i=e.contextID,p="Change Request",n=!0):(i=s,n=!1);var l=[];l.push({id:t[0].options.grid.id,type:t[0].options.grid.type});for(var d=0;d<t.length;d++)if("ChangeAction"===t[d].options.grid.isKindOfType){if(c.error(a.CHG_GOV_ChangeOrchestration_CA_Not_Removed),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}return}for(d=1;d<t.length;d++){if(s!==t[d].getParent().options.grid.id){if(c.error(a.CHG_GOV_ChangeOrchestration_Toolbar_Invalid_Selection),o.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}return}l.push({id:t[d].options.grid.id,type:t[d].options.grid.type})}r.removeInCRChangeOrchestration(i,p,l).then(function(i){if(n){for(var s=0;s<t.length;s++)e.treeDocument.removeRoot(t[s]);0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"})}else{var r=t[0].getParent();r.prepareUpdate();for(s=0;s<t.length;s++)r.removeChild(t[s]);r.pushUpdate()}if(o.getGlobalVariable().is3DSpace){console.log("unmasking orchestratiom item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}c.success(a.CHG_GOV_ChangeOrchestration_Toolbar_Remove_Success)},function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking orchestration item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&u.isMasked(e)&&u.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&u.isMasked(e)&&u.unmask(e)}})}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},filterView:function(e,t){let i=t,n=e.matchingIDs;i.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:n}}})},enableColorizeView:function(e,t){let i=t.getAllDescendants();var n,o;n=e,o=function(e,t){i.map(i=>{if(i.options.grid.id===t){var n={grid:{biColor:e},color:e};i.updateOptions(n)}})},UWA.is(n,"array")&&n.forEach(function(e){var t=e.color,i=e.id;o(t,i)})},disableColorizeView:function(e,t){t.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return C}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/util/ChgCROrchestrationGridContextualMenu","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y,E,O){"use strict";var G={contextId:null,treeDocument:null,accessBit:null,contextDetails:null,createChangeOrchestrationView:function(t,o){var r=this;t.target.setStyles({position:"relative"}),r.contextId=t.id,r.copyOptions=t,r.contextDetails=t.contextDetails;var l=t.contextDetails.access,d={};d=UWA.merge(d,t),l.accessBits.ManageImplementingChanges&&"true"===l.accessBits.ManageImplementingChanges&&p.makeDroppable(d.target,r.dropHandler),d.modelEvents=o,this.modelEvents=o,d.columns=i.getColumns(),r.ChgOrchestrationDataGridModel=new n(d.id,d.contextDetails),r.treeDocument=d.treeDocument=r.ChgOrchestrationDataGridModel.createTreeDocument(),r.ChgCOlayoutModel=d.treeDocument,r.ChgOrchestrationDataGridModel.registerCustomFilter(),r.subscribeToModelEvents(d.treeDocument),r.ChgOrchestrationTreeModel=d.treeDocument,r.orchestrationGridView=new e(d),y.showLoader(d.target,r.orchestrationGridView.loader);let c=r.orchestrationGridView.chgOrchestrationGrid;b.publish("CO-AccessBit-Update",l),a.getCRChangeOrchestration(t.id).then(function(e){console.log("Orchestration list: "+e),s.processCRChangeOrchestration(e).then(function(e){if(r.chgOrchestrationDataGridModel=new n(t.id),0==e.length){if(v.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&S.isMasked(e)&&S.unmask(e)}else y.hideLoader(d.target,r.orchestrationGridView.loader);r.modelEvents.publish({event:"showEmpty-datagrid",data:c})}y.fetchMaturityStateCSS(e),r.chgOrchestrationDataGridModel.loadChangeOrchestrationData(d.treeDocument,e),r.orchestrationGridView.loadCustomColumns();var i=s.getDefaultFilter(d.columns);d.treeDocument.setFilterModel(i),d.isSelected&&"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(r.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:r.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,r.ChgOrchestrationTreeModel)}),0==d.treeDocument.getChildren().length?d.treeDocument._modelEvents.publish({event:"treeEmpty"}):d.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),G.changeView(),y.hideLoader(d.target,r.orchestrationGridView.loader)})},function(e){if(v.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&S.isMasked(e)&&S.unmask(e)}else y.hideLoader(d.target,r.orchestrationGridView.loader);return Promise.reject(e)})},dropHandler(e){console.log("dropHandler called"+e);var t=G.ChgOrchestrationDataGridModel.treeDocument,i=[],n="";var o=v.getGlobalVariable().changeActionSubTypes,a=v.getGlobalVariable().subTypes;if(1==o.length){for(var s=0;s<e.length;s++)if(a.includes(e[s].objectType)&&o[0]["Change Action"].includes(e[s].objectType))return void l.error(r.CHG_CA_ADD_VIA_IA_ERROR)}else{for(let{label:e}of o)i.push(e);for(s=0;s<e.length;s++)if(a.includes(e[s].objectType)&&i.includes(e[s].objectType))return void l.error(r.CHG_CA_ADD_VIA_IA_ERROR)}for(s=0;s<e.length;s++)a.includes(e[s].objectType)||i.includes(e[s].objectType)||(n=n+e[s].displayName+",");if(""!=n)return n+=r.CHG_IMPLEMENTING_CHNAGE_ERROR,void l.error(n);if(t.getSelectedNodes().length>1)l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection);else if(1==t.getSelectedNodes().length&&t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{var d=[];for(s=0;s<e.length;s++)if(d.push({id:e[s].objectId,type:e[s].objectType}),t.getSelectedNodes().length&&t.getSelectedNodes()[0].options.grid.id==d[s].id)return void l.error(r.CHG_GOV_ChangeOrchestration_DRAG_DROP_ERROR+e[s].displayName);if(d.length){var c,u,p=[{label:r.CHG_GOV_OK_Button_Label,handler:function(){G.ChgOrchestrationDataGridModel.addExistingChildren(d),g.closeDialog()},className:"primary"},{label:r.CHG_GOV_CANCEL_Button_Label,handler:function(){g.closeDialog()},className:"default"}];if(0===t.getSelectedNodes().length?(c=G.ChgOrchestrationDataGridModel.contextDetails.name,u=G.ChgOrchestrationDataGridModel.contextDetails.title):(c=t.getSelectedNodes()[0].options.grid.name,u=t.getSelectedNodes()[0].options.grid.title),v.getGlobalVariable().is3DSpace&&null!=window.parent.currentBC.label){c=window.parent.currentBC.label;var h=r.CHG_GOV_ChangeOrchestration_Drop_Content+"("+c+")<br>"+r.CHG_GOV_ChangeOrchestration_Drop_Confirmation}else h=r.CHG_GOV_ChangeOrchestration_Drop_Content+u+"("+c+")<br>"+r.CHG_GOV_ChangeOrchestration_Drop_Confirmation;var m={title:r.CHG_GOV_ChangeOrchestration_Drop_Info_Title,content:h,buttonArray:p};g.launchInfoDailog(m)}}},refreshLayout:function(e){this.ChgOrchestrationTreeModel;(new n).updateNodeIndexed(ChgCROrchestrationTreeModel,e)},addNodesInLayout:function(e){G.ChgOrchestrationDataGridModel.addNodesInLayoutModel(this.ChgOrchestrationTreeModel,e)},refreshGrid:function(e,t,i,n){},changeView:function(e){try{if(v.getGlobalVariable().is3DSpace){let e=G.treeDocument.getAllDescendants();for(var t of(G.treeDocument.prepareUpdate(),e)){let e='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+t.options.grid.id+"\"'>"+UWA.String.escapeHTML(t.options.grid.title)+"</a>";t.updateOptions({label:e})}G.treeDocument.pushUpdate()}}catch(e){console.log(e)}i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),t.hideEmptyView()}),b.unsubscribe(`crOrchestration:${widget.id}`),b.subscribe(`crOrchestration:${widget.id}`,function(){if("false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgOrchestrationTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgOrchestrationTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgOrchestrationTreeModel)}),Object.keys(i.orchestrationGridView.options.treeDocument.getXSO()._items).length>0){let e=i.orchestrationGridView.options.treeDocument.getXSO()._items;for(let t in e)i.orchestrationGridView.onSelectionChange(i.orchestrationGridView._modelEvents,e[t],i.orchestrationGridView.id,i.orchestrationGridView.options.contextDetails.isKindOfType,!0)}else i.orchestrationGridView.onSelectionChange(i.orchestrationGridView._modelEvents,i.orchestrationGridView.options.treeDocument._getTrueRoot(),i.orchestrationGridView.id,i.orchestrationGridView.options.contextDetails.isKindOfType,!1)}),b.unsubscribe(`${e.options.id} of ${widget.id}`),b.subscribe(`${e.options.id} of ${widget.id}`,function(t){G.chgOrchestrationDataGridModel.filterView(t,e)}),b.unsubscribe(`${e.options.id} colorize ${widget.id}`),b.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){G.chgOrchestrationDataGridModel.enableColorizeView(t,e)}),b.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),b.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){G.chgOrchestrationDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("CROrchestration-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"CROrchestration-DataGrid-on-dblclick"},function(e){if(v.getGlobalVariable().is3DSpace){_("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else if("ChangeOrder"==e.model.isKindOfType||"ChangeRequest"==e.model.isKindOfType||"ChangeAction"==e.model.isKindOfType){let t,i={level:""},n=!1,o=C.getRouter().getState().name;o==m.ROUTE_CR_DETAILS||o==m.ROUTE_CR_DETAILS_LEVEL3PLUS?1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL1,i.level1Node={id:e.model.id,title:e.model.title},i.level="level1"):2==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level1Node=e.parentModel,i.level="level2"):3==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level2Node=e.parentModel,i.level1Node=e.gradParentModel,i.level="level3"):(n=!0,i.rootNode=e.model,i.level="root"):o==m.ROUTE_CR_ORCHESTRATION_LEVEL1?1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL2,i.level2Node={id:e.model.id,title:e.model.title},i.level="level2"):2==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0:o==m.ROUTE_CR_ORCHESTRATION_LEVEL2&&(1==e.pathlength?(t=m.ROUTE_CR_ORCHESTRATION_LEVEL3,i.level3Node={id:e.model.id,title:e.model.title},i.level="level3"):n=!0),1!=n&&o!=m.ROUTE_CR_ORCHESTRATION_LEVEL3||(t=e.model&&"ChangeRequest"==e.model.isKindOfType?m.ROUTE_CR_DETAILS_LEVEL3PLUS:e.model&&"ChangeOrder"==e.model.isKindOfType?m.ROUTE_CO_DETAILS:m.ROUTE_CA_DETAILS,i.level="root",i=e),C.navigate(t,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:i})}else G.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-orchestration-object-selection-update")]||this.modelEvents.subscribe({event:"cr-orchestration-object-selection-update"},function(e){G.handleObjectSelectionUpdate(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-orchestration-grid-update-CA-Creation")]||this.modelEvents.subscribe({event:"cr-orchestration-grid-update-CA-Creation"},function(e){let t={contextDetails:G.contextDetails,id:G.contextId},i=G.orchestrationGridView.chgOrchestrationGrid;G.action=e.action,a.getCRChangeOrchestration(t.id).then(function(e){let o=[];s.processCRChangeOrchestration(e).then(function(e){if(G.chgOrchestrationDataGridModel=new n(t.id,t.contextDetails),0==e.length){if(v.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&S.isMasked(e)&&S.unmask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&S.isMasked(e)&&S.unmask(e)}G.modelEvents.publish({event:"showEmpty-datagrid",data:i})}let a=G.treeDocument.getAllDescendants(),s=!1;if("Add"===G.action)for(let t of e){for(let e of a){if(t.id===e.options.grid.id){s=!0;break}s=!1}!1===s&&o.push(t)}else if("delete"===G.action){let t=!1;for(let i of a){for(let n of e){if(n.id===i.options.grid.id){t=!0;break}t=!1}!1===t&&G.treeDocument.removeRoot(i)}}else if("remove"===G.action){let t=!1;for(let i of a){for(let n of e){if(n.id===i.options.grid.id){t=!0;break}t=!1}!1===t&&G.treeDocument.removeRoot(i)}}G.chgOrchestrationDataGridModel.loadChangeOrchestrationData(G.treeDocument,o),0==G.treeDocument.getChildren().length?G.treeDocument._modelEvents.publish({event:"treeEmpty"}):G.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),G.changeView()})},function(e){return Promise.reject(e)})})},createChangeActionInContext:function(){let e=G.ChgOrchestrationTreeModel;if(e.getSelectedNodes().length)if(e.getSelectedNodes().length>1||e.getSelectedNodes()[0].options.grid.isKindOfChangeAction)e.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let t={parentID:e.getSelectedNodes()[0].options.grid.id};d.createNewChangeActionInContext(t)}else{let e={parentID:G.contextId};d.createNewChangeActionInContext(e)}},createChangeOrderInContext:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>New Change Order"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=G.ChgOrchestrationTreeModel;if(t.getSelectedNodes().length)if(t.getSelectedNodes().length>1||t.getSelectedNodes()[0].options.grid.isKindOfChangeAction)t.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed);else{let e={parentID:t.getSelectedNodes()[0].options.grid.id};d.createNewChangeOrderInContext(e)}else{let e={parentID:G.contextId};d.createNewChangeOrderInContext(e)}},createChangeRequestInContext:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>New Change Request"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=G.ChgOrchestrationTreeModel;if(t.getSelectedNodes().length)if(t.getSelectedNodes().length>1||"ChangeRequest"!=t.getSelectedNodes()[0].options.grid.isKindOfType)t.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):"Change Request"!=t.getSelectedNodes()[0].options.grid.isKindOfType&&l.error(r.CHG_GOV_ChangeOrchestration_Add_ChangeRequest_Not_Allowed);else{let e={parentID:t.getSelectedNodes()[0].options.grid.id};d.createChangeRequestInContext(e)}else{let e={parentID:G.contextId};d.createChangeRequestInContext(e)}},addExistingHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Add Existing"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});G.contextId;let t={condition:"addExistingCROrchestration",extendedQuery:'AND (NOT ecm_95_ca_95_is_95_implementing_95_cr:"TRUE") AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND (NOT current:"On Hold" AND NOT current:"Cancelled" AND current:"Prepare")'};var i=G.ChgOrchestrationTreeModel;if(0===i.getSelectedNodes().length||1===i.getSelectedNodes().length&&!i.getSelectedNodes()[0].options.grid.isKindOfChangeAction)if(v.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=Change Order:ECM_CHANGE_ON_HOLD!=TRUE:CURRENT!=policy_Cancelled.state_Cancelled:CURRENT=policy_FasttrackChange.state_Prepare&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var n=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,G.OnSearchComplete(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",n)}else console.log("inside EVENT")};window.addEventListener("storage",n)}else{var a=o.activateSearch();o.search("Add Existing","Change Order",G.OnSearchComplete,"changeOrchestration",a,void 0,void 0,t)}else i.getSelectedNodes().length&&i.getSelectedNodes().length>1?l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Single_Selection):l.error(r.CHG_GOV_ChangeOrchestration_AddExisting_Not_Allowed)},OnSearchComplete:function(e){var t=v.getGlobalVariable().changeActionSubTypes,i=[],n=v.getGlobalVariable().subTypes;if(1==t.length){for(var o=0;o<e.length;o++)if(n.includes(e[o][2])&&t[0]["Change Action"].includes(e[o][2]))return void l.error(r.CHG_CA_ADD_VIA_IA_ERROR)}else{for(let{label:e}of t)i.push(e);for(o=0;o<e.length;o++)if(n.includes(e[o][2])&&i.includes(e[o][2]))return void l.error(r.CHG_CA_ADD_VIA_IA_ERROR)}var a=[];for(o=0;o<e.length;o++)a.push({id:e[o][0],type:e[o][2]});a.length&&G.ChgOrchestrationDataGridModel.addExistingChildren(a)},isCRInSelectedList:function(e){var t=!1;return e.forEach(function(e){"ChangeRequest"!=e.options.grid.isKindOfType||(t=!0)}),t},removeHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Remove"}};if(E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),G.isCRInSelectedList(G.ChgOrchestrationTreeModel.getSelectedNodes()))l.error(r.CHG_GOV_ChangeOrchestration_Remove_ChangeRequest_Not_Allowed);else if(0!=G.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes().length){if(v.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crOrchestrationFullViewContainer");e&&S.mask(e)}else{let e=document.getElementById("crChangeOrchestration");e&&S.mask(e)}G.ChgOrchestrationDataGridModel.removeChildren()}},deleteHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Delete"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("deleteHandler!");var t=G.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();if(t.length){for(var i=[],n=0;n<t.length;n++){var o=t[n],a={physicalid:o.options.grid.id,nodeName:o.options.grid.name,nodeTitle:o.options.grid.title};i.push(a)}var s=document.getElementById("outer-orchestration-grid-div");u.deleteNodes(i,s,G.removeDeletedNodesUsingIDs)}},mergeChangeAction:function(){var e={commandInfo:{type:"Change Request",facet:"Change Orchestration",action:"CR>Change Orchestration>Merge Change Action"}};E.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=G.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();const i=[];for(let e of t)i.push(e.options.grid.id);let n=[],o={changeActionIds:i};n.push(o),a.mergeChangeAction(n).then(function(e){a.getNewCADetails(e.data[0].id).then(function(e){var t=s.processChangeActionInContext(e).processData;G.addNodesInLayout(t);var i=G.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();for(let e of i)e.updateOptions({grid:{maturityNLS:"Canceled",maturityWithBadge:"Canceled"}})})})},globalSubscribeForCOOrchestrationView:function(){h.addObserver("ChgCROrchestrationDataGridLayout","CO-AccessBit-Update",G.handleAccessBitUpdate),h.addObserver("ChgCROrchestrationDataGridLayout","CO-Properties-Update",G.handlePropertiesUpdate),h.addObserver("ChgCROrchestrationDataGridLayout","ENOLC_MOVE_CMD_UPDATE",G.handleCROrchestrationViewTransfer),h.addObserver("ChgCROrchestrationDataGridLayout","Lifecycle.Modification",G.handleForMaturityUpdate)},handleCROrchestrationViewTransfer:function(e){var t,n,o=G.ChgOrchestrationTreeModel.getAllDescendants(),a=[];Object.keys(e.data.attributes).forEach(function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)});for(var s=0;s<a.length;s++){t=a[s];for(var r=0;r<o.length;r++){if(o[r].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;o[r].options.grid.owner=l,o[r].options.grid.ownerFullName=t.newOwnerFullName;var d=t.newOwnerFullName}if(t.newOrganization){var c=t.newOrganization;o[r].options.grid.orgnaizationNLS=c}if(t.newCollabSpace){var u=t.newCollabSpace;o[r].options.grid.collabspaceNLS=u}""==t.newOwnerId?(l=o[r].options.grid.owner,d=o[r].options.grid.ownerFullName,n=i.createCustomOwner(l,d)):n=i.createCustomOwner(l,d);var p=o[r].options.grid.name,g={};g.name=p,g.title=o[r].options.grid.title,g.severity=o[r].options.grid.severity,g.severityNLS=o[r].options.grid.severityNLS,g.ownerFullName=d,g.maturityNLS=o[r].options.grid.maturityNLS;var h=G.ChgCROrchestrationDataGridModel.getCustomTooltip(g),m=p+" | "+d;o[r].updateOptions({label:o[r].options.grid.title,grid:{collabspaceNLS:o[r].options.grid.collabspaceNLS,organizationNLS:o[r].options.grid.organizationNLS,owner:o[r].options.grid.ownerFullName,chgObjOwner:n},customTooltip:h,subLabel:m})}}}},handlePropertiesUpdate:function(e){var t=G.ChgOrchestrationTreeModel;t&&O.handlePropertiesOnUpdate(t,e)},handleAccessBitUpdate:function(e){e.id==G.contextId&&("true"!==v.getGlobalVariable().isFullLicence&&"true"!==v.getGlobalVariable().isDerivativeLicense||"false"===e.accessBits.Hold&&"false"===e.accessBits.ManageImplementingChanges&&G.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("create",{visibleFlag:!1}),"false"==e.accessBits.CROrchestrationMergeCA?G.accessBitMergeCA=!1:G.accessBitMergeCA=!0,"false"==e.accessBits.CROrchestrationRemove?G.accessBitRemove=!1:G.accessBitRemove=!0,"false"==e.accessBits.CROrchestrationDelete?G.accessBitDelete=!1:G.accessBitDelete=!0)},handleObjectSelectionUpdate:function(e){e.count>1&&G.accessBitMergeCA?G.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!0}):G.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("MergeCA",{visibleFlag:!1}),e.count>0?(G.accessBitDelete&&G.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!0}),G.accessBitRemove&&G.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0})):(G.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("delete",{visibleFlag:!1}),G.orchestrationGridView.chgOrchestrationGrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1}))},removeDeletedNodesUsingIDs:function(e){for(var t=0;t<e.length;t++){var i=e[t];G.ChgOrchestrationTreeModel.search({shouldStop:function(e){return e.options.grid.id===i&&(e.getParent().removeChild(e),!0)}})}0==G.ChgOrchestrationTreeModel.getChildren().length&&G.ChgOrchestrationTreeModel._modelEvents.publish({event:"treeEmpty"})},handleForMaturityUpdate:function(e){if(e){let t=G.ChgOrchestrationDataGridModel.treeDocument.getSelectedNodes();y.getHandleForMaturityUpdate(JSON.parse(e),t)}}};return G.globalSubscribeForCOOrchestrationView(),G}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil"],function(e,t){"use strict";return{changeView:function(e){setTimeout(function(){t.changeView("TileView")},100)},showEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){var e=document.getElementById("memberEmptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/components/triptych/ChgGovTriptychWrapper",["DS/ENOXTriptych/js/ENOXTriptych","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i){"use strict";var n=function(){};return n.prototype.init=function(i,n,o,a,s){this._left=document.createElement("div"),this._left.classList.add("gov-triptych-wrapper"),this._main=document.createElement("div"),this._main.classList.add("gov-triptych-wrapper"),this._right=document.createElement("div"),this._right.classList.add("gov-triptych-wrapper"),this._applicationChannel=i,this._triptych=new e;var r=widget.body.offsetWidth<550?"close":"open",l={left:{resizable:!1,originalSize:t.LEFT_PANEL_SIZE_EXPANDED,originalState:r,overMobile:!0,withClose:!1},right:{resizable:!0,minWidth:250,originalSize:400,originalState:"close",overMobile:!0},borderLeft:!0,container:n,withtransition:!0,modelEvents:this._applicationChannel};this._triptych.init(l,this._left,this._main,this._right)},n.prototype.inject=function(e){this._triptych.inject(e)},n.prototype._getTriptych=function(){return this._triptych},n.prototype.getLeftPanelContainer=function(){return this._left},n.prototype.getLeftPanelContainerTriptych=function(){return this._triptych._leftPanelContent},n.prototype.getRightPanelContainer=function(){return this._right},n.prototype.getMainPanelContainer=function(){return this._main},n}),define("DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridView","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/facets/members/util/ChgMembersGridUtil","DS/ENOChgGovernanceUX/scripts/model/facets/members/ChgMembersDataGridModel","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/Controls/Button","DS/UIKIT/Mask","DS/PlatformAPI/PlatformAPI","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";var C={createMembersView:function(o){var a=this,l={},d=document.querySelector(".wux-controls-autoComplete-popup");d&&d.hide(),l=UWA.merge(l,o),this._modelEvents=l.contextDetails._modelEvents,a.id=l.id,l.columns=i.getColumns(),a.ChgMembersDataGridModel=new n(o.id),l.treeDocument=a.ChgMembersDataGridModel.createTreeDocument(),a.subscribeToModelEvents(l.treeDocument),a.ChgMembersTreeModel=l.treeDocument;var c=new e(l);a.membersDataGridView=c,p.mask(l.target);let u=a.membersDataGridView.membersDatagrid;s.getChangeOrderMembers(o.id).then(function(e){console.log("Orchestration list: "+e);var i=r.processedChangeOrderMemberList(e);if(0==i.length){let e=document.getElementById("coMembers");e&&p.isMasked(e)&&p.unmask(e),a._modelEvents.publish({event:"showEmpty-datagrid",data:u})}a.ChgMembersDataGridModel.loadChangeOrderMembersData(l.treeDocument,i),0==l.treeDocument.getChildren().length?t.showEmptyView():t.hideEmptyView(),t.changeView()},function(e){let t=document.getElementById("coMembers");return t&&p.isMasked(t)&&p.unmask(t),Promise.reject(e)})},subscribeToModelEvents:function(e){var t=this;this._modelEvents._pubsub.topics[this._modelEvents._formatEvent("co-members-object-selection-update")]||this._modelEvents.subscribe({event:"co-members-object-selection-update"},function(e){C.handleObjectSelectionUpdate(e)}),g.unsubscribe(`${e.options.id}:${widget.id}`),g.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgMembersTreeModel),e._cleanBIFilterProxy()})}),g.unsubscribe(`coMembers:${widget.id}`),g.subscribe(`coMembers:${widget.id}`,function(){t._modelEvents.publish({event:"update_object_select",data:{node:t.membersDataGridView.options.treeDocument._getTrueRoot(),contextID:t.membersDataGridView.options.contextDetails.id,contextType:t.membersDataGridView.options.contextDetails.isKindOfType,isNodeAdded:!1}})})},changeView:function(e){i.changeView("GridView")},addNodesInLayout:function(e){C.ChgMembersDataGridModel.addNodesInLayoutModel(this.ChgMembersTreeModel,e)},removeHandler:function(){var e={commandInfo:{type:"Change Order",facet:"Members",action:"CO>Members>Remove"}};if(m("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=C.ChgMembersDataGridModel.treeDocument.getSelectedNodes().length){let e=document.getElementById("coMembers");e&&p.mask(e)}C.ChgMembersDataGridModel.removeChildren()},updatePersonRole:function(e,t){if(console.log("updatePersonRole"),0==C.ChgMembersTreeModel.getSelectedNodes().length);else{var n="",o={person:[],userGroup:[]},a={person:[],userGroup:[]},s="",r=t.role,l=Array.isArray(r)?t[r[0]]:t[r];if("Route Template"==t.currentObjType||"Group"==t.currentObjType)var d=C.ChgMembersTreeModel.getSelectedNodes()[0].options.grid.id;if("Person"==t.currentObjType)var c=C.ChgMembersTreeModel.getSelectedNodes()[0].options.grid.userId;r.indexOf("Coordinator")>=0&&(n=c),r.indexOf("Follower")>=0&&("Person"==t.currentObjType?o.person.push(c):"Group"==t.currentObjType&&o.userGroup.push(d)),r.indexOf("Approver")>=0&&(s=d),r.indexOf("Assignee")>=0&&("Person"==t.currentObjType?a.person.push(c):"Group"==t.currentObjType&&a.userGroup.push(d));var u=i.makeUpdateMemberJson(l,n,s,o,a);"DISCONNECT"==l&&1==t.showConfirmation?C.showConfirmationDialog(u):C.updateCOPeople(u,!1,r)}},showConfirmationDialog:function(e){var t=new d({}),i=document.getElementById("outer-member-grid-div");t.inject(i),new c({immersiveFrame:t,title:h.CHG_Member_Remove_Title,content:h.CHG_Member_Remove_Message,activeFlag:!1,modelFlag:!0,width:500,buttons:{No:new u({onClick:function(e){t.destroy()}}),Yes:new u({onClick:function(i){t.destroy(),C.updateCOPeople(e,!0)}})}}).addEventListener("close",function(e){t&&t.destroy()})},updateCOPeople:function(e,t,n){if(""!=e){var o=C.id;s.updateChangeOrderMembers(o,e).then(function(e){var o=C.ChgMembersTreeModel,a=o.getSelectedNodes()[0];if(1==t){let e=a.options.grid.role.split(",");for(let t=0;t<e.length;t++)"Coordinator"==e[t]&&(i.isChangeCoordinatorConnected=!1);"Approver"==a.options.grid.role&&(i.isRouteTemplateConnected=!1),a.remove()}else if(""!=n&&1==e.success){o.prepareUpdate();var s=a.options.grid.role,r=a.options.description,l=","+n;if(n&&"Assignee"==n)d=h.CHG_Member_Role_Assignee;else var d="Coordinator"==n?h.CHG_Member_Role_ChangeCoordinator:h.CHG_Member_Role_Follower;var c=d+",";if(d=", "+d,e.data.length>0){var u=r.concat(d);a.options.description=u,a.setAttribute("roleList",u),a.options.grid.role=s.concat(l),a.options.grid.roles.push(n),"Coordinator"==n&&(i.isChangeCoordinatorConnected=!0)}else{u=(u=r.replace(d,"")).replace(c,""),a.setAttribute("roleList",u),a.options.description=u,a.options.grid.role=s.split(",").filter(e=>e!=l.replace(/,/g,"")).join(",");var p=a.options.grid.roles.filter(function(e,t,i){return e!=n});a.options.grid.roles=p,"Coordinator"==n&&(i.isChangeCoordinatorConnected=!1)}o.pushUpdate()}})}},globalSubscribeForCOMemberView:function(){o.addObserver("ChgMembersDataGridLayout","CO-AccessBit-Update",C.handleAccessBitUpdate),o.addObserver("ChgMembersDataGridLayout","ENOLC_MOVE_CMD_UPDATE",C.handleTransferownership)},handleTransferownership:function(e){e.data.attributes.hasOwnProperty(C.id)&&s.getChangeOrderMembers(C.id).then(function(e){C.ChgMembersTreeModel.empty();var t=r.processedChangeOrderMemberList(e);C.ChgMembersDataGridModel.loadChangeOrderMembersData(C.ChgMembersTreeModel,t)})},handleAccessBitUpdate:function(e){e.id==C.id&&(console.log("ChgMembersDataGridLayout handleAccessBitUpdate: "+e.accessBits),"false"==e.accessBits.SetCoordinator?C.setCoordinatorAccessBit=!1:C.setCoordinatorAccessBit=!0,"false"==e.accessBits.ManageFollowers?C.ManageFollowersAccessBit=!1:C.ManageFollowersAccessBit=!0,"false"==e.accessBits.ManageRouteTemplates?C.manageApproverAccessBit=!1:C.manageApproverAccessBit=!0,"false"==e.accessBits.ManageAssignees?C.ManageAssigneesAccessBit=!1:C.ManageAssigneesAccessBit=!0,C.setCoordinatorAccessBit||C.manageApproverAccessBit?(C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{visibleFlag:!0}),C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!0})):(C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("add",{visibleFlag:!1}),C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{visibleFlag:!1})))},handleObjectSelectionUpdate:function(e){0===e.count?C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!0}):C.membersDataGridView.membersDatagrid.getToolbar().updateNodeModel("remove",{disabled:!1})}};return C.globalSubscribeForCOMemberView(),C}),define("DS/ENOChgGovernanceUX/scripts/components/zApplicationFrame/ChgGovzApplicationFrame",["DS/CoreEvents/ModelEvents","DS/Core/Core","DS/ENOChgGovernanceUX/scripts/components/triptych/ChgGovTriptychWrapper","DS/ENOChgGovernanceUX/scripts/components/applicationTopBar/ChgGovApplicationTopBarWrapper","DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovWidgetPreferenceManager","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/UIKIT/UIKIT.css","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s,r,l){"use strict";var d=function(){};return d.prototype._init=function(e,t,i,n){this._applicationChannel=e,this._router=t,this._leftContent=i,this._middleContent=n,this._pathModel=[a._KEY,a._VIEWS_PREFERENCES],this._initDom()},d.prototype._initDom=function(){var e=document.querySelector("#zPlaneid");e&&e.destroy(),this._content=UWA.createElement("div",{id:"zPlaneid"}),this._content.classList.add("z-panel"),this._topbar=UWA.createElement("div",{id:"ztoolbar",styles:{}}),this._topbar.classList.add("z-topbar"),this._mainContainer=document.createElement("div"),this._mainContainer.classList.add("z-content"),this._content.appendChild(this._mainContainer),this._pageToolBarComponent=new n,this._pageToolBarComponent.init(this._applicationChannel,this._router,this._topbar),this._triptychWrapper=new i,this._triptychWrapper.init(this._applicationChannel,this._mainContainer),this._middleContainer=document.createElement("div"),this._middleContainer.classList.add("z-content-wrapper"),this._middleContainer.appendChild(this._topbar),this._applicationContent=document.createElement("div"),this._applicationContent.classList.add("cogov-content-wrapper"),this._middleContainer.appendChild(this._applicationContent),this._middleContent&&this._middleContent._container&&this._applicationContent.appendChild(this._middleContent._container),this._applicationChannel.publish({event:"triptych-set-content",data:{side:"middle",content:this._middleContainer}}),this._subscribeEvents();this.__mobileBreakpoint=this._triptychWrapper._triptych.__mobileBreakpoint},d.prototype._subscribeEvents=function(){var e=this;this._listSubscription=[],(e=this)._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-show-panel"},function(t){e._content.clientWidth<e.__mobileBreakpoint&&(e._topbar.classList.add("hide"),e._mainContainer.classList.add("full-height"))})),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-panel-hide-started"},function(t){e._content.clientWidth<e.__mobileBreakpoint&&(e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height")),e._applicationChannel.publish({event:"model-conflict-panel-closed"});var i=document.querySelector("#taskViewPanelClose");i&&i.click();var n=document.querySelectorAll(".gov-triptych-wrapper");e.infoDialog=n;var o=n[1].childNodes;if("right"===t)for(var a=0;a<o.length;a++){var s=o[a].getAttribute("name");UWA.is(s)&&"EditProp_MasterContain"===s?o[a].style.display="block":o[a].style.display="none"}})),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-entering-mobile"},function(){e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height"),e._applicationChannel.publish({event:"triptych-hide-panel",data:"left"})})),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-resized"},function(e){if("right"===e.side)e.width})),e._listSubscription.push(e._applicationChannel.subscribe({event:"triptych-leaving-mobile"},function(){e._topbar.classList.remove("hide"),e._mainContainer.classList.remove("full-height")})),e._listSubscription.push(e._applicationChannel.subscribe({event:"welcome-panel-action-selected"},function(t){e._content.clientWidth<e.__mobileBreakpoint&&e._applicationChannel.publish({event:"triptych-hide-panel",data:"left"})})),r.unsubscribe(`PropHeaderActivated:${widget.id}`),r.subscribe(`PropHeaderActivated:${widget.id}`,function(t){if(console.log(`PropHeaderActivated:${widget.id}`),console.log(t.currentFacet),"true"==l.getGlobalVariable().slidePanelTagger);else{e.infoDialog[1].classList.add("taggerSectionActivate"),l.getGlobalVariable().slidePanelTagger="true",["social","properties","relations","CO_Applicability","CO_Attachment","Applicability","Attachment","CA_Flowdown","IA_Assignee"].includes(t.currentFacet)?"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.ChgCRlayoutModel),t._cleanBIFilterProxy()}):"IA_ImpactBasis"==t.currentFacet?r.publish(`crImpactBasis:${widget.id}`):"IA_ImpactItem"==t.currentFacet?r.publish(`IA_ImpactItem:${widget.id}`):"Issue"==t.currentFacet?r.publish(`Issue:${widget.id}`):"CR_RelatedScope"==t.currentFacet?r.publish(`CR_RelatedScope:${widget.id}`):"CO_RelatedScope"==t.currentFacet?r.publish(`CO_RelatedScope:${widget.id}`):"CA_Context"==t.currentFacet&&r.publish(`CA_Context:${widget.id}`)}}),r.unsubscribe(`Applicability:${widget.id}`),r.subscribe(`Applicability:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`Attachment:${widget.id}`),r.subscribe(`Attachment:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`CA_Flowdown:${widget.id}`),r.subscribe(`CA_Flowdown:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`IA_Assignee:${widget.id}`),r.subscribe(`IA_Assignee:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`CO_Applicability:${widget.id}`),r.subscribe(`CO_Applicability:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`properties:${widget.id}`),r.subscribe(`properties:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`CO_Attachment:${widget.id}`),r.subscribe(`CO_Attachment:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`relations:${widget.id}`),r.subscribe(`relations:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`social:${widget.id}`),r.subscribe(`social:${widget.id}`,function(t){e.doCleanProxy()}),r.unsubscribe(`PropHeaderDeActivated:${widget.id}`),r.subscribe(`PropHeaderDeActivated:${widget.id}`,function(){console.log(`PropHeaderActivated:${widget.id}`),e.infoDialog[1].classList.remove("taggerSectionActivate"),"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/PlatformAPI/PlatformAPI"],function(t,i,n,o){t._initializationPromiseBIFilter||t.initializeBIFilter(e.ChgCRlayoutModel),t._cleanBIFilterProxy();let a=n.getRouteInfo();if(a.name.includes("CRDetails")){let t=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_REQUESTS_DETAILS],a=n.getTab(t),s=e.getPublishKeyForCRTab(a);o.publish(`${s}:${widget.id}`,{})}else if(a.name.includes("CODetails")){let t=[i._KEY,i._VIEWS_PREFERENCES,i._CHANGE_ORDERS_DETAILS],a=n.getTab(t),s=e.getPublishKeyForCOTab(a);o.publish(`${s}:${widget.id}`,{})}}),l.getGlobalVariable().slidePanelTagger="false"})},d.prototype.inject=function(e){e.appendChild(this._content)},d.prototype.destroy=function(){this._content=null},d.prototype.getPublishKeyForCRTab=function(e){let t="";return t="crAssessment"==e?"crImpactAnalysis":e},d.prototype.getPublishKeyForCOTab=function(e){let t="";return t="ChangeOrchestration"==e?"coOrchestration":e},d.prototype.doCleanProxy=function(){"true"==l.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.ChgCRlayoutModel),e._cleanBIFilterProxy()})},d}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridModel","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactedItem/ChgCRImpacedItemDataGridModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/components/ChgCommonDailog","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridContextualMenu","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgImpactAnalysisServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisViewToolbar","DS/UIKIT/Mask","DS/Windows/ImmersiveFrame","DS/Windows/Dialog","DS/ENOXVersionExplorerController/VersionExplorerController","DS/LifecycleServices/LifecycleServicesSettings","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y,E,O,G,N,A,T,M,V,R,U,x,F,P,L){"use strict";var H={createImpactAnalysisView:function(t,i){var o=this;t.target.setStyles({position:"relative"}),this.contextId=t.id,this.copyOption=t,this.contextDetails=t.contextDetails;var s=t.contextDetails.access;H.rolledUpIA=!1;var r={};let l;(r=UWA.merge(r,t)).modelEvents=i,this.modelEvents=i,r.columns=n.getColumns(),this.ChgCRImpactAnalysisDataGridModel=new a(r.id,r.contextDetails),o.treeDocument=r.treeDocument=o.ChgCRImpactAnalysisDataGridModel.createTreeDocument(),o.ChgCRImpactAnalysisTreeModel=r.treeDocument,o.ChgCRImpactAnalysisDataGridModel.registerCustomFilter(),o.subscribeToModelEvents(r.treeDocument),o.chgCRImpactAnalysisView=new e(r),o.chgCRImpactAnalysisView.chgGridView.placeholder="",P.showLoader(t.target,o.chgCRImpactAnalysisView.loader),(l="ChangeAnalysis"==r.contextDetails.isKindOfType?d.getImpactAnalysisFromId(t.id):d.getCRImpactAnalysis(t.id)).then(async function(e){let i=await x.getExtensions("Change Analysis");var n=c.processCRImpactAnalysis(e,t.id,i);P.fetchMaturityStateCSS(n),o.ChgCRImpactAnalysisDataGridModel.loadImpactAnalysisData(r.treeDocument,n);var a=c.getDefaultFilter(r.columns);r.treeDocument.setFilterModel(a),E.publish("CO-AccessBit-Update",s),r.isSelected&&"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(o.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let t={data:{roots:o.ChgCRImpactAnalysisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,o.ChgCRImpactAnalysisTreeModel)}),0==r.treeDocument.getChildren().length?r.treeDocument._modelEvents.publish({event:"treeEmpty"}):r.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),o.chgCRImpactAnalysisView.chgGridView.getCellsXSO().onPostAdd(function(e){e.forEach(function(e){o.chgCRImpactAnalysisView.chgGridView.getCellIDFromXSOElement(e)})}),H.changeView(),H.handleObjectSelectionUpdate({count:0});let l="",d=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;if(console.log(d),null!=d){let e=[N._KEY,N._VIEWS_PREFERENCES,N._CHANGE_REQUESTS_DETAILS];l=G.getTab(e);let t=H.treeDocument.getAllDescendants();if("crAssessment"==l)for(let e=0;e<t.length;e++){if(t[e].options.grid.id==d.data.items[0].IAid){H.treeDocument.getAllDescendants()[e].select(),H.modelEvents.publish({event:"triptych-show-panel",data:"right"}),H.modelEvents.publish({event:"information-panel-visible",data:null});break}}}if(o.chgCRImpactAnalysisView.loadCustomColumns(),0==e.data.length){A.toolbar.getNodeModelByID("impactedItems").updateOptions({visibleFlag:!1}),o.chgCRImpactAnalysisView.chgGridView.placeholder=u.CHG_GOV_Empty_DataGrid_PlaceHolder}P.hideLoader(r.target,o.chgCRImpactAnalysisView.loader)},function(e){return P.hideLoader(r.target,o.chgCRImpactAnalysisView.loader),Promise.reject(e)})},refreshGrid:function(e){let t=this,i=A.toolbar.getNodeModelByID("filter"),o=A.toolbar.getNodeModelByID("impactedItems"),a=(i.options.grid.semantics.label,i.options.grid.data.menu[0].state),s=i.options.grid.data.menu[1].state,r=i.options.grid.data.menu[2].state;"selected"==a?(e={filterView:"activeIA"},H.inactiveCA=!1,H.rolledUpIA=!1):"selected"==s?(e={filterView:"inactiveIA"},H.inactiveCA=!0,H.rolledUpIA=!1):"selected"==r&&(e={filterView:"rolledUpIA"},H.rolledUpIA=!0,H.inactiveCA=!1);let l=this.ChgCRImpactAnalysisDataGridModel.contextID;t.chgCRImpactAnalysisView.chgGridView.placeholder="",P.showLoader(t.chgCRImpactAnalysisView.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div"),t.chgCRImpactAnalysisView.loader),d.getCRImpactAnalysis(l,e).then(function(e){P.hideLoader(t.chgCRImpactAnalysisView.chgGridViewContainer.getElement(".content-impactAnalysis-grid-div"),t.chgCRImpactAnalysisView.loader),0==e.data.length?(o.updateOptions({visibleFlag:!1}),t.chgCRImpactAnalysisView.chgGridView.placeholder=u.CHG_GOV_Empty_DataGrid_PlaceHolder):o.updateOptions({visibleFlag:!0});var i=c.processCRImpactAnalysis(e,l);P.fetchMaturityStateCSS(i),t.ChgCRImpactAnalysisDataGridModel.loadImpactAnalysisData(H.ChgCRImpactAnalysisTreeModel,i),t.chgCRImpactAnalysisView.loadCustomColumns(),v.getGlobalVariable().is3DSpace||"false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let i=t.ChgCRImpactAnalysisTreeModel.getAllDescendants();if(1==i.length){H.treeDocument._modelEvents.publish({event:"treeNotEmpty"});let e="";if(1==H.treeDocument.getAllDescendants().length){e=!0;for(let t of H.treeDocument.getAllDescendants())if("ia_Total"===t.options.grid.id){e=!1;break}}let t=H.inactiveCA;!0!==e||t||H.rolledUpIA||H.modelEvents.publish({event:"add_aggregation_row_datagrid",data:{treeDocument:H.treeDocument}})}n.changeView("GridView");let o={data:{roots:i}};e.cleanPathTag(),e._onSetPathTags(o,t.ChgCRImpactAnalysisTreeModel),H.handleObjectSelectionUpdate({count:0})})},function(e){return Promise.reject(e)})},changeView:function(e){let t="";if(0!=H.treeDocument.getAllDescendants().length){t=!0;for(let e of H.treeDocument.getAllDescendants())if("ia_Total"===e.options.grid.id){t=!1;break}}let i=H.inactiveCA;!0!==t||i||H.rolledUpIA||H.modelEvents.publish({event:"add_aggregation_row_datagrid",data:{treeDocument:H.treeDocument}}),n.changeView("GridView")},subscribeToModelEvents:function(e){let t=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){i.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){i.hideEmptyView()}),E.unsubscribe(`crImpactAnalysis:${widget.id}`),E.subscribe(`crImpactAnalysis:${widget.id}`,function(){if("false"==v.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgCRImpactAnalysisTreeModel),e._cleanBIFilterProxy();let i={data:{roots:t.ChgCRImpactAnalysisTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(i,t.ChgCRImpactAnalysisTreeModel)}),Object.keys(t.chgCRImpactAnalysisView.options.treeDocument.getXSO()._items).length>0){let e=t.chgCRImpactAnalysisView.options.treeDocument.getXSO()._items;for(let i in e)t.chgCRImpactAnalysisView.onSelectionChange(t.chgCRImpactAnalysisView._modelEvents,e[i],t.chgCRImpactAnalysisView.id,t.chgCRImpactAnalysisView.options.contextDetails.isKindOfType,!0)}else t.chgCRImpactAnalysisView.onSelectionChange(t.chgCRImpactAnalysisView._modelEvents,t.chgCRImpactAnalysisView.options.treeDocument._getTrueRoot(),t.chgCRImpactAnalysisView.id,t.chgCRImpactAnalysisView.options.contextDetails.isKindOfType,!1)}),E.unsubscribe(`${e.options.id} of ${widget.id}`),E.subscribe(`${e.options.id} of ${widget.id}`,function(t){H.ChgCRImpactAnalysisDataGridModel.filterView(t,e)}),E.unsubscribe(`${e.options.id} colorize ${widget.id}`),E.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){H.ChgCRImpactAnalysisDataGridModel.enableColorizeView(t,e)}),E.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),E.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){H.ChgCRImpactAnalysisDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-object-selection-update"},function(e){H.handleObjectSelectionUpdate(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update_AnalysisBasis_count_IA_grid")]||this.modelEvents.subscribe({event:"update_AnalysisBasis_count_IA_grid"},function(e){H.updateAnalysisBasisCountOnGrid(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-impact-basis")]||this.modelEvents.subscribe({event:"update-impact-basis"},function(e){if("CONNECT"==e.operation){let t=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactBasis+e.context.length;t.updateOptions({grid:{countImpactBasis:i}})}if("DISCONNECT"==e.operation){let t=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactBasis-e.context.length;t.updateOptions({grid:{countImpactBasis:i}}),0==w.treeDocument.getChildren().length&&w.treeDocument._modelEvents.publish({event:"treeEmpty"})}}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-impact-items")]||this.modelEvents.subscribe({event:"update-impact-items"},function(e){if("CONNECT"==e.operation){let t=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactedItems+e.context.length;t.updateOptions({grid:{countImpactedItems:i}})}if("DISCONNECT"==e.operation){let t=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countImpactedItems-e.context.length;t.updateOptions({grid:{countImpactedItems:i}}),0==S.treeDocument.getChildren().length&&S.treeDocument._modelEvents.publish({event:"treeEmpty"})}}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("update-contributor")]||this.modelEvents.subscribe({event:"update-contributor"},function(e){if("CONNECT"==e.operation){let t=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countContributors+e.context.length;t.updateOptions({grid:{countContributors:i}})}if("DISCONNECT"==e.operation){let t=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countContributors-e.context.length;t.updateOptions({grid:{countContributors:i}})}}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("IA-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"IA-DataGrid-on-dblclick"},function(e,t){if(v.getGlobalVariable().is3DSpace){F("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else H.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("IA-DataGrid-on-click")]||this.modelEvents.subscribe({event:"IA-DataGrid-on-click"},function(e){4===e.column_id?t.launchVersionExplorer(e.ia_id,e.ia_name,e.ia_type):(5===e.column_id||6===e.column_id)&&e.cr_ids.length>1&&t.launchCRPopupView(e)})},launchCRPopupView:function(e){var t=[];e.cr_ids.forEach(function(e){t.push(e.Id)}),0!==t.length?require(["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgChangeRequestDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel"],function(e,i,n,o){var a=new o;H.crPopupTreeDocument=a.createTreeDocument(),a.registerCustomFilter(),H.crDGV=null,H.crPopupDiv=UWA.createElement("div",{styles:{height:"100%"}});var s={isManagingCRPopup:!0,target:H.crPopupDiv,columns:i.getColumns(),showModelChangesFlag:!0,treeDocument:H.crPopupTreeDocument,postMaturityCallback:function(e){d.getChangeRequestInfo(t.toString()).then(function(e){c.processedCRSummaryList(e).then(function(e){H.crPopupTreeDocument=a.createTreeDocument(),a.loadIndexedChangeRequests(H.crPopupTreeDocument,e),H.crDGV.crDatagrid.treeDocument=H.crPopupTreeDocument,H.crDGV.crTilesView.treeDocument=H.crPopupTreeDocument,H.crDGV.crTilesView.loadApplicativeModel(H.crPopupTreeDocument)})})}};n.createCustomColumn().then(async function(i){v.getGlobalVariable().customeViewCRList=[],s.columns=[...s.columns,...i],H.crDGV=new e(s),await H.crDGV.render();let n=H.crDGV.crDatagrid._customViewsManager.getCustomViews()[0].columnsVisibleFlag;if(null!=n&&null!=n){let e=Object.keys(n);v.getGlobalVariable().customeViewCRList=e}d.getChangeRequestInfo(t.toString()).then(function(e){c.processedCRSummaryList(e).then(function(e){a.loadIndexedChangeRequests(H.crPopupTreeDocument,e),H.crDGV.crDatagrid.sortModel=[{dataIndex:"sev",sort:"desc"}],H.crDGV.reapplySortModel(),H.changeCRView({view:"TileView"})})})});var r=new M({identifier:"WebUX_IMF_ECM_CR_POPUP"});new V({immersiveFrame:r,title:u.CHG_GOV_IA_CR_POPUP,content:H.crPopupDiv,width:540,height:640,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_CR_POPUP"});r.inject(widget.body)}):p.error(u.CHG_GOV_NO_MANAGING_CR)},launchVersionExplorer:function(e,t,i){var n=UWA.createElement("div",{styles:{height:"100%"}}),o=new R({versionGraphContainer:n}),a=[{"3DSpace":v.getGlobalVariable().baseURL,platformId:v.getGlobalVariable().tenant}];U.setOption("platform_services",a),o.setSingleSelectionMode(),o.setCheckVersionExternalFunction("ENOXVersionExplorerOpenVersion",function(e){return!1}),o.publishEvent("ENOXVersionExplorerLoadVersionModel",{id:e,securityContext:v.getGlobalVariable().getSecurityContext(),tenantId:v.getGlobalVariable().tenant,type:i,context:null,onComplete:function(){}});var s=new M({identifier:"WebUX_IMF_ECM_VERSION_EXP"});new V({immersiveFrame:s,title:u.CHG_GOV_IA_VERSION_EXP_REFINEMENT+t,content:n,height:360,width:620,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_VERSION_EXP"});s.inject(widget.body)},newImpactAnalysisHandler:function(){console.log("newImpactAnalysisHandler cr ImpactAnalysis!")},updateAnalysisBasisCountOnGrid:function(e){for(let t of e){let e=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getAllDescendants();for(let i of e)if(i.options.grid.id===t.id){let e=i.options.grid.countImpactBasis+t.affectedItemIds.length;i.updateOptions({grid:{countImpactBasis:e}}),e=0;break}}},duplicateImpactAnalysis:function({contextCRId:e}){var t={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Duplicate Impact Analysis"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});let i=[],n={id:H.treeDocument.getSelectedNodes()[0].options.grid.id};i.push(n),d.duplicateImpactAnalysis(e,i).then(function(e){""!=e.data[0].id&&H.ChgCRImpactAnalysisDataGridModel.addNodeInModelFromId(e.data[0].id)})},cancelHandler:function({contextCRId:e}){let t={chgPhysicalId:e,boxTitle:u.CHG_GOV_ImpactAnalysis_Toolbar_CancelImpactAnalysis,subTitle:u.CHG_CO_Cancel_SubTitle,txtPlaceHolder:u.CHG_CO_Cancel_PlaceHolder,DoneCallback:function(t){let i=H.treeDocument.getSelectedNodes(),n={data:[]};for(let e=0;e<i.length;e++)n.data.push({id:i[e].options.grid.id,reason:t.userComment});d.cancelRelatedImpactAnalysis(e,n).then(function(e){for(let t=0;t<e.data.length;t++)for(let o=0;o<i.length;o++)if(e.data[t].id==i[o].options.grid.id){i[o].options.grid.maturity=e.data[t].current,i[o].options.grid.maturityNLS=e.data[t].currentNLS,i[o].options.grid.name=e.data[t].name,i[o].options.grid.cancelComment=n.data[0].reason;let a={maturity:i[o].options.grid.maturity,cancelComment:i[o].options.grid.cancelComment,name:i[o].options.grid.name},s=H.createCustomNameField(a);i[o].updateOptions({grid:{maturity:i[o].options.grid.maturity,maturityNLS:i[o].options.grid.maturityNLS,ia_name:s,cancelComment:i[o].options.grid.cancelComment,pushCancelIcon:!0}})}p.success(u.CHG_CANCEL_NOTICE),F("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/util/ChgCRImpactAnalysisGridColsUtil").filterView("activeIA")}),b.closeDialog()},CancelCallback:function(){b.closeDialog()}};var i={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Cancel"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),b.launchInfoDailog(t)},createCustomNameField:function(e){var t=new UWA.Element("div",{});UWA.createElement("span",{html:e.name}).inject(t);var i=new UWA.Element("div",{class:"iconsDiv"});if("Cancelled"==e.maturity){var n=new UWA.Element("div",{class:"gridIconContainer",title:e.cancelComment});UWA.createElement("div",{class:"fonticon fonticon-block"}).inject(n),n.inject(i)}return i.inject(t),t.outerHTML},refreshHandler:function(){H.ChgCRImpactAnalysisTreeModel.empty();H.refreshGrid({filterView:"activeIA"})},deleteHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Delete"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=H.treeDocument.getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id);if(t.length>0){for(var i=[],n=0;n<t.length;n++){var o=t[n],a={physicalid:o.options.grid.id,nodeName:o.options.grid.name,nodeTitle:o.options.grid.title,parentCRId:o.options.grid.parentCRId};i.push(a)}h.deleteNodes(i,void 0,H.refreshHandler,void 0,"ImpactAnalysis")}else p.error(u.CHG_SELECT_IA_FOR_DELETE)},globalSubscribeForCRImpactAnalysisView:function(){f.addObserver("ChgCRImpactAnalysisDataGridLayout","CO-AccessBit-Update",H.handleAccessBitUpdate),f.addObserver("ChgCRImpactAnalysisDataGridLayout","ENOLC_MOVE_CMD_UPDATE",H.handleForImpactAnalysisTransfer),f.addObserver("ChgCRImpactAnalysisDataGridLayout","Lifecycle.Modification",H.handleForMaturityUpdate),f.addObserver("ChgCRImpactAnalysisDataGridLayout","CO-Properties-Update",H.handlePropertiesUpdateForImpactAnalysis),f.addObserver("ChgCRImpactAnalysisDataGridLayout","co-update-attachment-complete",H.handleForAttachmentCount),f.addObserver("ChgCRImpactAnalysisDataGridLayout","update-impact-anlysis-grid",H.handleForUpdateImpactAnlysisGrid),f.addObserver("ChgCRImpactAnalysisDataGridLayout","CR-ImpactAnalysis-AccessBit-Update-On-Properties-Load",H.handleForAccessBitUpdateImpactAnalysis)},handlePropertiesUpdateForImpactAnalysis:function(e){var t=H.ChgCRImpactAnalysisTreeModel;let i=I.attrMap;if(t){for(var n=t.getAllDescendants(),o=e.objectId,a=0;a<n.length;a++){if(n[a].options.grid.id==o){if(e&&e.Title){let t,o=e.Title.value,s=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Benefit Impact"].value),r=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Cost Impact"].value),l=parseFloat(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Validation Effort"].value),d=parseInt(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Risk Impact"].value),c=parseFloat(e["Default Change Analysis Metrics-Default Change Analysis Metrics.Implementation Effort"].value),u=e["Abstract Change Analysis.Completion Date Due"].value,p=e["Abstract Change Analysis.Start Date Estimated"].value,g=e["Abstract Change Analysis.Completion Date Estimated"].value,h=e["Abstract Change Analysis.Completion Date Actual"].value;e["Abstract Change Analysis.Start Date Actual"]&&(t=e["Abstract Change Analysis.Start Date Actual"].value),n[a].options.grid.title=o,n[a].options.grid.benefitImpact=s,n[a].options.grid.costImpact=r,n[a].options.grid.validationEffort=l,n[a].options.grid.riskImpact=d,n[a].options.grid.implementationEffort=c,n[a].options.label=o,n[a].options.grid.dueDate=u,n[a].options.grid.estimatedStartDate=p,n[a].options.grid.estimatedEndDate=g,n[a].options.grid.startDateActual=t,n[a].options.grid.completionDateActual=h,i.forEach(t=>{t.forEach((t,i,o)=>{if(e[t]&&t==e[t]._identifier){let o=i;n[a].updateOptions({label:n[a].options.label,grid:{[o]:e[t].value}})}})})}n[a].updateOptions({label:n[a].options.label,grid:{title:n[a].options.grid.title,benefitImpact:n[a].options.grid.benefitImpact,costImpact:n[a].options.grid.costImpact,validationEffort:n[a].options.grid.validationEffort,riskImpact:n[a].options.grid.riskImpact,implementationEffort:n[a].options.grid.implementationEffort,dueDate:n[a].options.grid.dueDate,estimatedStartDate:n[a].options.grid.estimatedStartDate,estimatedEndDate:n[a].options.grid.estimatedEndDate,startDateActual:n[a].options.grid.startDateActual,completionDateActual:n[a].options.grid.completionDateActual}})}}n[n.length-1].updateOptions()}},handleForAttachmentCount:function(e){if("CONNECT"==e.operation){let t=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countAttachment+e.referentials.attached.length;t.updateOptions({grid:{countAttachment:i}})}if("DISCONNECT"==e.operation){let t=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()[0],i=t.options.grid.countAttachment-e.referentials.detached.length;t.updateOptions({grid:{countAttachment:i}})}},handleForImpactAnalysisTransfer:function(e){var t,i,o=H.ChgCRImpactAnalysisTreeModel.getAllDescendants(),a=[];Object.keys(e.data.attributes).forEach(function(t){var i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)});for(var s=0;s<a.length;s++){t=a[s];for(var r=0;r<o.length;r++){if(o[r].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName){var l=t.newOwnerId;o[r].options.grid.owner=l,o[r].options.grid.ownerFullName=t.newOwnerFullName;var d=t.newOwnerFullName}if(t.newOrganization){var c=t.newOrganization;o[r].options.grid.orgnaization=c}if(t.newCollabSpace){var u=t.newCollabSpace;o[r].options.grid.collabspace=u}""==t.newOwnerId?(l=o[r].options.grid.owner,d=o[r].options.grid.ownerFullName,i=n.createCustomOwner(l,d)):i=n.createCustomOwner(l,d);var p=o[r].options.grid.name,g={};g.name=p,g.title=o[r].options.grid.title,g.severity=o[r].options.grid.severity,g.severityNLS=o[r].options.grid.severityNLS,g.ownerFullName=d,g.maturityNLS=o[r].options.grid.maturityNLS;var h=H.ChgCRImpactAnalysisDataGridModel.getCustomTooltip(g),m=p+" | "+d;o[r].updateOptions({label:o[r].options.grid.title,grid:{collabspace:o[r].options.grid.collabspace,organization:o[r].options.grid.organization,owner:o[r].options.grid.ownerFullName,chgObjOwner:i},customTooltip:h,subLabel:m})}}}},handleForMaturityUpdate:function(e){e&&("Change Analysis"==JSON.parse(e).Refresh.modified[0].policy&&H.refreshHandler())},handleForUpdateImpactAnlysisGrid:function(e){H.ChgCRImpactAnalysisDataGridModel.addNodeInModelFromId(e.selectedObjID)},handleAccessBitUpdate:function(e){e.id==H.contextId&&("false"==e.accessBits.ManageChangeAnalysis?H.accessBit=!1:H.accessBit=!0)},handleForAccessBitUpdateImpactAnalysis:function(e){H.getSelectedNodes()&&H.getSelectedNodes()[0].options.grid.id==e.id&&(H.getSelectedNodes()[0].options.accessBits=e.accessBits)},handleObjectSelectionUpdate:function(e){1===e.count&&H.accessBit?(1==H.inactiveCA?H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}):H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!0}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("refine",{visibleFlag:!0})):(H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("refine",{visibleFlag:!1})),e.count>0&&H.accessBit?(H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{visibleFlag:!0}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!0}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IADispatchMenu",{visibleFlag:!0})):(H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IADispatchMenu",{visibleFlag:!1})),null!=H.inactiveCA&&1==H.inactiveCA?(H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IAMenu",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IADispatchMenu",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("refine",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!1})):null!=H.rolledUpIA&&1==H.rolledUpIA?(H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IAMenu",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IADispatchMenu",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("refine",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("duplicate",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("cancel",{visibleFlag:!1}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("delete",{visibleFlag:!1})):H.accessBit&&(H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("IAMenu",{visibleFlag:!0}),H.chgCRImpactAnalysisView.chgGridView.getToolbar().updateNodeModel("newImpactAnalysis",{visibleFlag:!0}))},removeDeletedNodesUsingIDs:function(e){v.getGlobalVariable().deletionData={wid:widget.id,deletedIDs:e,nav:"CR_IA"},e.length+1===H.treeDocument.getAllDescendants().length&&H.modelEvents.publish({event:"remove_aggregation_row_datagrid",data:{treeDocument:H.treeDocument}});for(var t=0;t<e.length;t++){var i=e[t];H.treeDocument.search({shouldStop:function(e){return e.options.grid.id===i&&(e.remove(),!0)}})}0==H.treeDocument.getChildren().length&&H.treeDocument._modelEvents.publish({event:"treeEmpty"})},getSelectedNodes:function(){return H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes()},impactsHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Impacts"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var i=[],n="",a=H.treeDocument.getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id);0===a.length&&(a=(a=H.treeDocument.getAllDescendants()).filter(e=>"ia_Total"!=e.options.grid.id));for(var r=0;r<a.length;r++){var l=a[r].options.grid.id;i.push(l),n+=l,r<a.length-1&&(n+=",")}H.impactsContent=new UWA.Element("div",{styles:{height:"100%"}});var g={target:H.impactsContent,grid:a[0].options.grid,columns:o.getColumns(a[0].options.accessBits,!0),physicalId:i,type:a[0].options.grid.type,accessBits:a[0].options.accessBits,isReadOnly:!0};let h=new s(g.grid.parentCRId,i);g.treeDocument=h.createTreeDocument();h.registerCustomFilter(),H.chgCRImpactedItemView=null,d.getImpactAnalysisFromId(n,"impactedItems").then(async e=>{for(var i=0;i<e.data.length;i++){var n=e.data[i];if(n.impactedItems){var o={};n&&n.impactedItems&&n.impactedItems[0]&&n.impactedItems[0].non3DSpaceNonIndexedData&&(o=n.impactedItems[0].non3DSpaceNonIndexedData,n.impactedItems.splice(0,1));var a=await c.processIAImpactsForGet(n.impactedItems);if(h.loadImpactedItem(g.treeDocument,a),P.fetchMaturityStateCSS(a),o&&o.length>0){var s=new Map,r=o.length;for(let t=0;t<o.length;t+=125){let i=[];i=r<125?o.slice(t,t+r):o.slice(t,t+125);for(var l=[],d=new Map,m=i,C=0;C<m.length;C++){var f=m[C];l.push(f.id),d.set(f.id,f)}var v=[];if(l.length>0){var b=c.commonPredicatedForFedSearch(),w=await c.callFederatedSearch(l,b);w&&w.results&&w.results.length>0&&(v=await c.processIAImpactsFederatedSearch(w,d))}h.loadImpactedItem(g.treeDocument,v),s=new Map([...s,...d]),r-=125,e.data[0].impactedItems=[...e.data[0].impactedItems,...v]}if(s&&s.size>0){var S=await D.recent();if(S&&S.results&&S.results.length>0){var I=c.filterNonIndexedDataNew(S,s);s.size!=I.length&&p.warn(u.CHG_GOV_Not_Accessable_Data);var _=[];I.length>0&&(_=await c.processInformationForRecentIAImpacts(I),P.fetchMaturityStateCSS(_)),h.loadImpactedItem(g.treeDocument,_),e.data[0].impactedItems=[...e.data[0].impactedItems,..._]}}}}}H.chgCRImpactedItemView=new t(g);let y=e.data[0].impactedItems.map(e=>({id:e.id})),E="";for(C=0;C<e.data.length-1;C++)E+=e.data[C].id+",";E+=e.data[C].id,h.addCAInfoForImpactedItems(y,E),H.changeImpactView({view:"GridView"})});var m=new M({identifier:"WebUX_IMF_ECM_IMPACTS"});new V({immersiveFrame:m,title:u.ECM_CR_IA_IMPACTED_ITEMS,content:H.impactsContent,height:360,width:420,resizableFlag:!0,modalFlag:!0,identifier:"WebUX_PANEL_ECM_IMPACTS"});m.inject(widget.body)},changeCRView:function(e){if("GridView"==e.view)(t=H.crDGV.crDatagrid.getToolbar().getNodeModelByID("view"))&&"view-list"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:u.CHG_TOOLTIP_GRID_VIEW}),t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected",(i=H.crPopupDiv.getElement(".toolbar-cr-div .wux-ui-3ds-view-list"))&&i.addClassName("currentView"),(n=H.crPopupDiv.getElement(".toolbar-cr-div .wux-ui-3ds-view-small-tile"))&&n.removeClassName("currentView"),(o=H.crPopupDiv.getElement(".crgridView"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=H.crPopupDiv.getElement(".crtileView"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==e.view){var t,i,n,o,a;(t=H.crDGV.crDatagrid.getToolbar().getNodeModelByID("view"))&&"view-small-tile"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:u.CHG_TOOLTIP_TILE_VIEW}),t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected",(i=H.crPopupDiv.getElement(".toolbar-cr-div .wux-ui-3ds-view-list"))&&i.removeClassName("currentView"),(n=H.crPopupDiv.getElement(".toolbar-cr-div .wux-ui-3ds-view-small-tile"))&&n.addClassName("currentView"),(o=H.crPopupDiv.getElement(".crgridView"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=H.crPopupDiv.getElement(".crtileView"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},changeImpactView:function(e){if("GridView"==e.view)(t=H.chgCRImpactedItemView.getToolbar().getNodeModelByID("view"))&&"view-list"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:u.CHG_TOOLTIP_GRID_VIEW}),t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected",(i=H.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&i.addClassName("currentView"),(n=H.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&n.removeClassName("currentView"),(o=H.impactsContent.getElement(".content-impactedItem-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=H.impactsContent.getElement(".content-impactedItem-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==e.view){var t,i,n,o,a;(t=H.chgCRImpactedItemView.getToolbar().getNodeModelByID("view"))&&"view-small-tile"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:u.CHG_TOOLTIP_TILE_VIEW}),t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected",(i=H.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&i.removeClassName("currentView"),(n=H.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&n.addClassName("currentView"),(o=H.impactsContent.getElement(".content-impactedItem-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=H.impactsContent.getElement(".content-impactedItem-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},filterActiveView:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Filter by Active IA"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("calling filter view..."),n.filterView("activeIA")},filterInActiveView:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Filter by Inactive IA"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),console.log("calling filter view..."),n.filterView("inactiveIA")},filterRolledUpView:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Filter by Rolled-up IA"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),n.filterView("rolledUpIA")},addIAFromParentCRDialog:function({contextCRId:e}){if(v.getGlobalVariable().is3DSpace);else{var t=l.activateSearch();l.search(u.CHG_GOV_Add_From_ParentCR,"Change Analysis",H.OnSearchCompleteForAddIAFromPrentCR,void 0,t,void 0,void 0,void 0)}},OnSearchCompleteForAddIAFromPrentCR:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i][0]);t.length},dispatchToNewSubCRDialog:function({contextCRId:e}){var t={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Dispatch to New"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});const i=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id);if(i.length>0){let t={parentID:e,selectedIDs:[],postComplete:function(){n.filterView("activeIA"),p.success(u.CHG_GOV_Dispacth_OK)}};i.forEach(function(e){t.selectedIDs.push(e.options.grid.id)}),r.createChangeRequestInContext(t)}else p.error(u.CHG_GOV_SELECT_IA_FOR_Dispacth)},dispatchToExistingSubCRDialog:function({contextCRId:e}){var t={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Dispatch to Existing"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t}),H.contextCRId=e;let i={condition:"addChildChangeRequest",extendedQuery:" AND (ecm_95_cr_95_governing_95_cr_95_id:"+e+")"};if(H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id).length>0)if(v.getGlobalVariable().is3DSpace);else{var n=l.activateSearch(!0);l.search(u.CHG_GOV_Dispatch_To_Existing_SubCR,"Change Request",H.OnSearchCompleteForSubCR,void 0,n,void 0,void 0,i)}else p.error(u.CHG_GOV_SELECT_IA_FOR_Dispacth)},OnSearchCompleteForSubCR:function(e){let t=[];const i=H.ChgCRImpactAnalysisDataGridModel.treeDocument.getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id);for(let i=0;i<e.length;i++)t.push(e[i][0]);if(t.length){let e={id:t,impactAnalysisIds:[]};i.forEach(function(t){e.impactAnalysisIds.push(t.options.grid.id)}),d.dispatchImpactAnalysisToSubCR(H.contextCRId,new Array(e)).then(function(e){!0===e.success&&200===e.statusCode?(n.filterView("activeIA"),p.success(u.CHG_GOV_Dispacth_OK)):p.error(u.CHG_GOV_Dispacth_KO)})}},refineImpactAnalysis:function({contextCRId:e}){var t={commandInfo:{type:"Impact Analysis",facet:"Impact Analysis",action:"CR>Impact Analysis>Refine"}};L.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:t});let i=H.treeDocument.getSelectedNodes();if(1==i.filter(e=>"ia_Total"!=e.options.grid.id).length){let t=[];t.push({id:i[0].options.grid.id}),d.refineImpactAnalysis(e,t).then(function(e){!0===e.success&&200===e.statusCode&&""!=e.data[0].id?(n.filterView("activeIA"),p.success(u.CHG_GOV_Refine_OK)):p.error(u.CHG_GOV_Refine_KO)})}else p.error(u.CHG_SELECT_SINGLE_IA_FOR_DELETE)}};return H.globalSubscribeForCRImpactAnalysisView(),H}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeAction/ChgChangeActionDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"changeAction-mainContainer"}))},updateFacet:function(){var e=this,t=e.getModel();if(1!=t.isMergedModel()){if(!t)return!1;this.elements.container.empty();var s={id:t.get("objectId"),physicalId:this.options.data[0].physicalId,type:this.options.data[0].type,grid:this.options.data[0].grid,modelEvents:this.options.data[0].modelEvents};o.getObjectTypeInformation(s.id).then(function(t){if("Change Analysis"==t||""==t){var o=e.elements.container;let t=n.getSelectedNodes();s.accessBits=t[0].options.accessBits,a.getGlobalVariable().IAAccessBitsData&&a.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&a.getGlobalVariable().IAAccessBitsData.iaID===t[0].options.grid.id&&(s.accessBits=a.getGlobalVariable().IAAccessBitsData.accessBits),s.attributes=n.contextDetails.attributes,i.createCAView(o,s)}})}},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgImpactBasisfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactBasis/ChgCRImpactBasisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"impactBasis-mainContainer"}))},onTabClickAction:function(e){console.log("action tab clicked.............")},updateFacet:function(){if(1==this.getModel().isMergedModel())return;this.elements.container.empty();let e=n.getSelectedNodes();e.length&&(this.options.data[0].grid=e[0].options.grid,this.options.data[0].physicalId=e[0].options.grid.id,this.options.data[0].type=e[0].options.grid.type,this.options.data[0].accessBits=e[0].options.accessBits,o.getGlobalVariable().IAAccessBitsData&&o.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&o.getGlobalVariable().IAAccessBitsData.iaID===e[0].options.grid.id&&(this.options.data[0].accessBits=o.getGlobalVariable().IAAccessBitsData.accessBits),i.createImpactBasisView(this.elements.container,this.options.data))},switchFacet:function(e){console.log("_switchFacet.......................")},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgContributorfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/contributor/ChgCRContributorsDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX"],function(e,t,i,n,o,a,s){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"contributor-mainContainer",styles:{width:"100%",height:"100%",display:"block"}}))},updateFacet:function(){if(this.elements.container.empty(),o.mask(this.elements.container),1==model.isMergedModel())return;let e=n.getSelectedNodes();e.length&&(this.options.data[0].grid=e[0].options.grid,this.options.data[0].accessBits=e[0].options.accessBits,a.getGlobalVariable().IAAccessBitsData&&a.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&a.getGlobalVariable().IAAccessBitsData.iaID===e[0].options.grid.id&&(this.options.data[0].accessBits=a.getGlobalVariable().IAAccessBitsData.accessBits),i.createMembersView(this.elements.container,this.options.data))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemViewToolbar","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/util/ChgCRImpactedItemGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/impactedItem/ChgCRImpacedItemDataGridModel","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemCreateNewCA","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","UWA/Core","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S){"use strict";let I={createImpactedItemView:async function(t,i,a,s){var d=this;t.setStyles({position:"relative"}),I.impactsContent=t;let c={};i.modelEvents?(c.modelEvents=i.modelEvents,i=i[0]):i=i[0],this.contextId=i.physicalId,c=UWA.merge(c,i),this.modelEvents=c.modelEvents,c.target=t,c.columns=n.getColumns(i.accessBits),this.impactAnalysisSelectedNodes=a,this.ChgCRImpacedItemDataGridModel=new o(c.grid.parentCRId,c.physicalId),p.makeDroppable(c.target,d.dropHandler),d.treeDocument=c.treeDocument=d.ChgCRImpacedItemDataGridModel.createTreeDocument(),d.ChgImpacedItemTreeModel=c.treeDocument,d.ChgCRImpacedItemDataGridModel.registerCustomFilter(),d.chgCRImpactedItemView=new e(c),w.showLoader(c.target,d.chgCRImpactedItemView.loader),this.subscribeToModelEvents(c.treeDocument);I.changeImpactView({view:"GridView"}),await g.getImpactAnalysisFacet(c.grid.id,"impactedItems").then(async e=>{var t={},i={};e.data[0]&&e.data[0].impactedItems&&e.data[0].impactedItems[0]&&e.data[0].impactedItems[0].non3DSpaceNonIndexedData&&(t=e.data[0].impactedItems[0].non3DSpaceNonIndexedData,e.data[0].impactedItems[0].mapping&&(i=e.data[0].impactedItems[0].mapping),e.data[0].impactedItems.splice(0,1));var n=await h.processIAImpactsForGet(e.data[0].impactedItems);if(await d.ChgCRImpacedItemDataGridModel.loadImpactedItem(c.treeDocument,n),w.fetchMaturityStateCSS(n),w.hideLoader(c.target,d.chgCRImpactedItemView.loader),i.length>0&&await d.ChgCRImpacedItemDataGridModel.i3dxInformationFilteringAndCalling(t,i,c.treeDocument),t&&t.length>0){var o=new Map,a=t.length;for(let i=0;i<t.length;i+=125){let n=[];n=a<125?t.slice(i,i+a):t.slice(i,i+125);for(var p=[],g=new Map,m=n,v=0;v<m.length;v++){var D=m[v];p.push(D.id),g.set(D.id,D)}var b=[];if(p.length>0){var S=h.commonPredicatedForFedSearch(),_=await h.callFederatedSearch(p,S);_&&_.results&&_.results.length>0&&(b=await h.processIAImpactsFederatedSearch(_,g))}d.ChgCRImpacedItemDataGridModel.loadImpactedItem(c.treeDocument,b),o=new Map([...o,...g]),a-=125,e.data[0].impactedItems=[...e.data[0].impactedItems,...b]}if(o&&o.size>0){d.chgCRImpactedItemView.indexInfoDiv.show();var y=await f.recent();if(y&&y.results&&y.results.length>0){var E=h.filterNonIndexedDataNew(y,o);o.size!=E.length&&l.warn(r.CHG_GOV_Not_Accessable_Data);var O=[];E.length>0&&(O=await h.processInformationForRecentIAImpacts(E),w.fetchMaturityStateCSS(O)),d.ChgCRImpacedItemDataGridModel.loadImpactedItem(c.treeDocument,O),e.data[0].impactedItems=[...e.data[0].impactedItems,...O]}}}else d.chgCRImpactedItemView.indexInfoDiv.hide();var G=h.getDefaultFilter(c.columns);if(c.treeDocument.setFilterModel(G),"true"==u.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(d.ChgImpacedItemTreeModel),e._cleanBIFilterProxy();let t={data:{roots:d.ChgImpacedItemTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,d.ChgImpacedItemTreeModel)}),0==c.treeDocument.getChildren().length)c.treeDocument._modelEvents.publish({event:"treeEmpty"});else{c.treeDocument._modelEvents.publish({event:"treeNotEmpty"});let t=e.data[0].impactedItems.map(e=>({id:e.id})),i=e.data[0].id;d.ChgCRImpacedItemDataGridModel.addCAInfoForImpactedItems(t,i)}!0===s&&l.message(r.CHG_Orchestration_complete),I.chgCRImpactedItemView.chgGridView.addEventListener("postEdit",function(e,t){I.updateReasonForChangeValue(t),I.updateStatusOfImpactedItem(t)});let N=document.querySelector("#impactItem-mainContainer");N&&C.isMasked(N)&&C.unmask(N),w.hideLoader(c.target,d.chgCRImpactedItemView.loader)}),d.chgCRImpactedItemView.loadCustomColumns()},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),g.updateImpactItemReasonForChangeValue(i,I.contextId).then(e=>{console.log("updated on backend")})}},i3dxInformationFilteringAndCalling:async function(e,t){let i=t.length;var n=u.getGlobalVariable().tenant,o=u.getGlobalVariable().tenantMappings.find(e=>e.platformId===n);for(let n=0;n<i;n++){let i=t[n],d=i.uris,c=d.length,u=i.ServiceInfo,p=i.RelativePath,g=o[u];if(null==g||null==p)continue;let m=g+p;for(let t=0;t<d.length;t+=50){var a=[],s=new Map;let i=[];i=c<50?d.slice(t,t+c):d.slice(t,t+50);for(let t=0;t<i.length;t++){const n=i[t],o=e.findIndex(e=>e.id===n);if(-1!==o){const t=e.splice(o,1)[0];a.push(t),s.set(t.id,t)}}try{var r=await f.fetchbyService({ids:i,url:m});console.log("Result of is "+r);var l=await h.processIAImpactsWithi3dxItems(r,s);console.log("Node information with NLS value"+l),await this.ChgCRImpacedItemDataGridModel.loadImpactBasisData(this.treeDocument,l)}catch(e){console.log(e)}console.log("The sliced array is "+i),c-=50}console.log("The modeler information is "+a),console.log("The modeler information is "+s)}},updateStatusOfImpactedItem:function(e){if(e.nodeModel){let t="";t="impactedKey"==e.nodeModel.options.grid.impact?"IMPACTED":"NOTIMPACTED";let i={id:e.nodeModel.options.grid.id,impactedItem:t},n=[];n.push(i),g.updateStatusOfImpactedItem(n,I.contextId).then(e=>{console.log("updated on backend")})}},massUpdateHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Mass Update"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),I.chgCRImpactedItemView.chgGridView.showModelMassUpdateDialog();let t=I.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog.buttons.Ok.elements.button,i=I.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog.buttons.Apply.elements.button;t.addEventListener("click",function(){I.updateMassValue()}),i.addEventListener("click",function(){I.updateMassValue()})},updateMassValue:function(){let e=I.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants();if(1==I.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog._dataGridView.model[0].isSelected()){let t=[];for(let i of e){let e=I.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog._dataGridView.model[0]._options.grid.value;void 0===i.options.grid.reasonForChange&&(i.options.grid.reasonForChange=e);let n={id:i.options.grid.id,reasonForChange:i.options.grid.reasonForChange};t.push(n)}g.updateImpactItemReasonForChangeValue(t,I.contextId).then(e=>{console.log("updated on backend")})}if(1==I.chgCRImpactedItemView.chgGridView._modelMassUpdateDialog._dataGridView.model[1].isSelected()){let t=[];for(let i of e){let e="";e="impactedKey"==i.options.grid.impact?"IMPACTED":"NOTIMPACTED";let n={id:i.options.grid.id,impactedItem:e};t.push(n)}g.updateStatusOfImpactedItem(t,I.contextId).then(e=>{console.log("updated on backend")})}},subscribeToModelEvents:function(e){var t=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){console.log("subscribeToModelEvents treeEmpty"),i.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){console.log("subscribeToModelEvents treeNotEmpty"),i.hideEmptyView()}),m.unsubscribe(`IA_ImpactItem:${widget.id}`),m.subscribe(`IA_ImpactItem:${widget.id}`,function(e){"true"==u.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(t.ChgImpacedItemTreeModel),e._cleanBIFilterProxy();let i={data:{roots:t.ChgImpacedItemTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(i,t.ChgImpacedItemTreeModel)})}),m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,function(t){I.ChgCRImpacedItemDataGridModel.filterView(t,e)}),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,function(t){I.ChgCRImpacedItemDataGridModel.enableColorizeView(t,e)}),m.unsubscribe("updateIndexingIconForHideOrShowInImpacts"),m.subscribe("updateIndexingIconForHideOrShowInImpacts",function(e){t.chgCRImpactedItemView.indexInfoDiv.show()}),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(t){I.ChgCRImpacedItemDataGridModel.disableColorizeView(t,e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-impact-analysis-impactedItem-object-selection-update")]||this.modelEvents.subscribe({event:"cr-impact-analysis-impactedItem-object-selection-update"},function(e){I.handleObjectSelectionUpdate(e)})},changeImpactView:function(e){if("GridView"==e.view)(t=I.chgCRImpactedItemView.getToolbar().getNodeModelByID("view"))&&"view-list"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:r.CHG_TOOLTIP_GRID_VIEW}),t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected",(i=I.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&i.addClassName("currentView"),(n=I.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&n.removeClassName("currentView"),(o=I.impactsContent.getElement(".content-impactedItem-grid-div"))&&(o.removeClassName("hideView"),o.removeClassName("nonVisible"),o.addClassName("showView")),(a=I.impactsContent.getElement(".content-impactedItem-tile-div"))&&(a.removeClassName("showView"),a.addClassName("hideView"));else if("TileView"==e.view){var t,i,n,o,a;(t=I.chgCRImpactedItemView.getToolbar().getNodeModelByID("view"))&&"view-small-tile"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:r.CHG_TOOLTIP_TILE_VIEW}),t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected",(i=I.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-list"))&&i.removeClassName("currentView"),(n=I.impactsContent.getElement(".toolbar-impactedItem-grid-div .wux-ui-3ds-view-small-tile"))&&n.addClassName("currentView"),(o=I.impactsContent.getElement(".content-impactedItem-grid-div"))&&(o.removeClassName("showView"),o.addClassName("hideView")),(a=I.impactsContent.getElement(".content-impactedItem-tile-div"))&&(a.removeClassName("hideView"),a.addClassName("showView"))}},dropHandler(e){console.log("dropHandler called"+e);I.ChgCRImpacedItemDataGridModel.treeDocument;var t=[];t=f.parseObjectInformation(e);let i=I.treeDocument.getAllDescendants().map(e=>e.options.grid.id),n=e.map(e=>e.objectId);var o=[],a=0;for(let e=0;e<n.length;e++)for(let t=0;t<i.length;t++)n[e]==i[t]&&(o[a]=e,a++);o.length>0&&l.warn(r.CHG_GOV_NODE_PRESENT_WARN_IMPACTED_ITEM,!0);for(let e=0;e<o.length;e++)t.splice(o[e]-e,1);t.length>0&&I.ChgCRImpacedItemDataGridModel.addExistingChildren(t).then(function(e){I.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:e.data}})},function(e){})},addExistingHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Add Impact"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=I.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingImpactedItems",extendedQuery:I.createExcludeListForSearch(t)};const n=c.activateSearch();u.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),c.search(r.CHG_GOV_ImpactBasis_Toolbar_AddImpactedItem,"",I.OnSearchComplete,"impactedItems",n,void 0,void 0,i)},addNewChangeAction:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Add to New Change Action"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t={parentID:I.ChgCRImpacedItemDataGridModel.impactAnalysisId},i=I.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();s.createNewChangeActionInImpactedItemContext(t,i)},addExistingChangeAction:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Add to Existing Change Action"}};if(b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),u.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeAction:CURRENT=policy_ChangeAction.state_Prepare:ECM_CHANGE_ON_HOLD!=TRUE&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var t=function(i){if(i.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,console.log(e),I.OnSearchCompleteCA(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",t)}else console.log("inside EVENT")};window.addEventListener("storage",t)}else{let e={condition:"addExistingCROrchestration",extendedQuery:'current:"Prepare" AND (NOT flattenedtaxonomies:"interfaces/Change On Hold")'};var i=c.activateSearch("","Change Action");c.search(r.CHG_GOV_Affected_Item_AddExisting_CA,"Change Action",I.OnSearchCompleteCA,"addExistingChangeAction",i,void 0,void 0,e)}},_OrchestrateChangeActions:function(){let e=[],t=[],i=I.ChgCRImpacedItemDataGridModel.impactAnalysisId,n=I.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();if(0==n.length){let e=I.ChgCRImpacedItemDataGridModel.treeDocument.getAllDescendants();for(let i of e){let e={};e.id=i.options.grid.id,e.type=i.options.grid.type,e.service=i.options.grid.serviceName,t.push(e)}}else for(let e of n){let i={};i.id=e.options.grid.id,i.type=e.options.grid.type,i.service=e.options.grid.serviceName,t.push(i)}let o={orchestrateItemIds:t,dispatchType:widget.getValue("DefaultCASubType")?widget.getValue("DefaultCASubType"):"Change Action"};e.push(o),e[0].orchestrateItemIds&&e[0].orchestrateItemIds.length>0&&g.orchestrateChangeAction(e,i).then(function(e){if(null!=e.data[0].relelements&&0!=Object.keys(e.data[0].relelements).length){let e,t={grid:I.impactAnalysisSelectedNodes[0].options.grid,physicalId:I.impactAnalysisSelectedNodes[0].options.grid.id,type:I.impactAnalysisSelectedNodes[0].options.grid.type,accessBits:I.impactAnalysisSelectedNodes[0].options.accessBits},i=[];i.push(t),document.querySelector("#impactItem-mainContainer")&&((e=document.querySelector("#impactItem-mainContainer")).empty(),C.mask(e)),i.modelEvents=I.modelEvents,I.createImpactedItemView(e,i,I.impactAnalysisSelectedNodes,!0),I.modelEvents.publish({event:"cr-orchestration-grid-update-CA-Creation",data:{action:"Add"}}),I.modelEvents.publish({event:"CA-Creation-Update-ImpactedItem",data:{}})}else l.error(r.CHG_Alredy_Orchestrate)})},createFinalIncludeListFrSearch:function(e){let t="(";for(let i=0;i<e.length;i++)t=t+"physicalid:"+e[i],i!=e.length-1&&(t+=" OR ");return t+=")"},createExcludeListForSearch:function(e){let t=[];for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchCompleteCA:function(e){const t=[],i=[];let o=I.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();for(let e of o)t.push(e.options.grid.id),i.push({id:e.options.grid.id,service:e.options.grid.serviceName,type:e.options.grid.type});const a=[];for(let[t]of e)a.push(t);let s=[];for(let e of a){let t={id:e,proposedInformation:i,updateAction:"CONNECT"};s.push(t)}let d=I.ChgCRImpacedItemDataGridModel.impactAnalysisId;0!=a.length&&0!=i.length&&g.connecteCAwithImpactedItem(s,d).then(function(e){let i=e.data[0].connectedProposedIds;if(0!=e.data[0].errorReport.length){var a=e.data[0].errorReport,s=[];for(var d in a)s+=a[d]+"<br/>";l.warn(s,"false")}else l.success(r.CHG_GOV_ImpactedItem_Toolbar_Add_Existing_ChangeAction_Product_Success);s=[];let c=e.data;for(let e of c){e.id;let a=e.proposedIds,s=h.processChangeAction(e);for(let e of a)if(t.includes(e))for(let t of o)if(0!=i.length&&i.includes(t.options.grid.id)&&t.options.grid.id==e){t.options.grid.proposedChangeActionsData.push(s);let e=n.getProposedColumnBasedOnData(t.options.grid.proposedChangeActionsData);t.updateOptions({grid:{proposedChangeAction:e}})}}})},OnSearchComplete:function(e){var t=[];let n=I.treeDocument.getAllDescendants().map(e=>e.options.grid.id);for(var o=!1,a=0;a<e.length;a++)n.includes(e[a][0])?o=!0:t.push({id:e[a][8]&&null!=e[a][8]?e[a][8]:e[a][0],type:e[a][2],service:e[a][7]&&e[a][7].includes(":")?e[a][7].split(":")[0]:e[a][7],environment:u.getGlobalVariable().tenant,updateAction:"CONNECT"});o&&l.warn(r.CHG_GOV_NODE_PRESENT_WARN_IMPACTED_ITEM,!0),t.length&&(i.hideEmptyView(),I.ChgCRImpacedItemDataGridModel.addExistingChildren(t).then(function(e){I.modelEvents.publish({event:"update-impact-items",data:{operation:"CONNECT",context:e.data}})},function(e){}))},removeHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Remove"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=I.treeDocument.getSelectedNodes();for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,type:t[n].options.grid.type,updateAction:"DISCONNECT"});I.ChgCRImpacedItemDataGridModel.removeChildren(i).then(function(e){I.modelEvents.publish({event:"update-impact-items",data:{operation:"DISCONNECT",context:e}})},function(e){})},removeDeletedNodesUsingIDs:function(e){for(let t=0;t<e.length;t++){let i=e[t];I.treeDocument.search({shouldStop:function(e){if(e.options.grid.id===i){return e.getParent().removeChild(e),!0}return!1}})}0==I.treeDocument.getChildren().length&&I.treeDocument._modelEvents.publish({event:"treeEmpty"})},changeAssessmentHandler:function(){var e={commandInfo:{type:"Impact Analysis",facet:"Impacts",action:"IA>Impacts>Change Assessment"}};b("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=I.treeDocument.getSelectedNodes();if(t&&t.length>0){let e=[];t.forEach(t=>{e.push(t.options.grid.serviceBasedObjId)});const i=widget.id+"ChgCRImpactedItemDataGridLayout";c.launchAppInAppMode(i,e,"ENORIPE_AP")}else l.error(r.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleChangeAssessmentOK:function(e){if(e.length){var t=!1;for(let i=0;i<e.length;i++)e[i].id.includes("uuid:")?(t=!0,e.splice(i,1),i--):(e[i].updateAction="CONNECT",e[i].service="3DSpace");t&&l.error(r.CHG_GOV_Relation_Cross_Service_NotSupported_Error),e.length&&I.ChgCRImpacedItemDataGridModel.addExistingChildren(e)}},handleObjectSelectionUpdate:function(e){e.count>0?("true"===e.accessBits.RemoveImpactedItems&&I.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),"true"===e.accessBits.AddImpactedItems&&(I.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!0}),I.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!0})),u.getGlobalVariable().is3DSpace&&(I.chgCRImpactedItemView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="enabled"),I.chgCRImpactedItemView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[2].state="enabled"):(I.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),I.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!1}),I.chgCRImpactedItemView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!1}),I.chgCRImpactedItemView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[2].state="disabled")},handleForMaturityUpdate:function(e){if(e){JSON.parse(e);let t=I.ChgCRImpacedItemDataGridModel.treeDocument.getSelectedNodes();w.getHandleForMaturityUpdate(JSON.parse(e),t)}},globalSubscribeForImpactedItemView:function(){d.addObserver("ChgCRImpactedItemDataGridLayout","ENORIPE-InApp-"+widget.id+"ChgCRImpactedItemDataGridLayout/onOK",I.handleChangeAssessmentOK),d.addObserver("ChgCRImpactedItemDataGridLayout","Lifecycle.Modification",I.handleForMaturityUpdate),d.addObserver("ChgCRImpactedItemDataGridLayout","CO-Properties-Update",I.handlePropertiesUpdateForImpactedItems)},handlePropertiesUpdateForImpactedItems:function(e){var t=I.ChgImpacedItemTreeModel;t&&S.handlePropertiesOnUpdate(t,e)}};return I.globalSubscribeForImpactedItemView(),I}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgImpactedItemfacet",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","DS/EditPropWidget/constants/EditPropConstants","DS/ENOChgServices/scripts/services/ChgDataService","UWA/Class/Model","css!DS/ENOChgGovernanceUX/ENOChgGovernanceUX","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactedItem/ChgCRImpactedItemDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable"],function(e,t,i,n,o,a,s,r,l,d){"use strict";return t.extend({init:function(){this._parent.apply(this,arguments),this.elements.container||(this.elements.container=e.createElement("div",{id:"impactItem-mainContainer"}))},updateFacet:function(){let e;this.elements.container.empty();let t=l.getSelectedNodes();2==t.length&&("Aggregation"==t[0]._options.label?e=0:"Aggregation"==t[1]._options.label&&(e=1),1==e&&t.splice(1,1),0==e&&t.splice(0,1)),t.length&&1==t.length&&"ChangeAnalysis"==d.getGlobalVariable().lastSelectedInfoType&&(this.options.data[0].grid=t[0].options.grid,this.options.data[0].physicalId=t[0].options.grid.id,this.options.data[0].type=t[0].options.grid.type,this.options.data[0].accessBits=t[0].options.accessBits,d.getGlobalVariable().IAAccessBitsData&&d.getGlobalVariable().IAAccessBitsData.widgetID===widget.id&&d.getGlobalVariable().IAAccessBitsData.iaID===t[0].options.grid.id&&(this.options.data[0].accessBits=d.getGlobalVariable().IAAccessBitsData.accessBits),r.createImpactedItemView(this.elements.container,this.options.data,t))},destroyComponent:function(){e.is(this.destroy,"function")&&this.destroy()}})}),define("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChangeActionUX/scripts/CAPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/LifecycleCmd/MaturityCmd","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/UIKIT/DropdownMenu","DS/UIKIT/Dropdown","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestFeaturesUtil","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y){"use strict";var E=Object.create(null);return E.getColumns=function(){let e=[];return e.push(I.getColumnDefinition({dataIndex:"titleTree"})),e.push(I.getColumnDefinition({dataIndex:"co_name"})),e.push(I.getColumnDefinition({dataIndex:"maturityWithBadge"})),e.push(I.getColumnDefinition({dataIndex:"severityNLS"})),e.push(I.getColumnDefinition({dataIndex:"ownerFullName"})),e.push(I.getColumnDefinition({dataIndex:"changeCoordinatorFullName"})),e.push(I.getColumnDefinition({dataIndex:"collabspaceNLS"})),e.push(I.getColumnDefinition({dataIndex:"organizationNLS"})),e.push(I.getColumnDefinition({dataIndex:"applicabilityNLS"})),e.push(I.getColumnDefinition({dataIndex:"modificationDate"})),e.push(I.getColumnDefinition({dataIndex:"creationDate"})),e},E.makeCopyLinkObject=function(e){var t={protocol:"3DXContent",data:{items:[]}};return t.data.items.push({envId:n.getGlobalVariable().tenant,objectId:e.options.grid.id,openLink:!0}),t},E.showNotification=function(e,t,i,n,o,a,s){var r={level:e,title:t,subtitle:i,message:n,sticky:o,allowUnsafeHTML:s||!1};window.notifs||(window.notifs=v,D.setNotificationManager(window.notifs)),a?D.inject(a):D.elements.container.isInjected()||D.inject(),window.notifs.addNotif(r)},E.getRelationalExplorerMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Relational_Explorer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-object-related"},action:{callback:function(e){require(["DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"],function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),o=[];for(let e=0;e<t.length;e++){let i=t[e].options.grid.id;o.push(i)}e.openRelationalExplorer(n||o)})}}}},E.getTransferMenu=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Menu_Transfer,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-move-to"},action:{callback:function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),n=[];for(let e=0;e<t.length;e++)n.push(t[e].options.grid);require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTransferWrapper"],function(e){e.launchTransferDialog(n)})}}}},E.getOpen=function(t,i){return{type:"PushItem",title:e.CHG_GOV_Welcome_Activity_Open_Change_Orders,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-open"},action:{callback:function(e){let t=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();console.log("Opening it");var n={};n.model=t[0].options.grid,p.navigate(o.ROUTE_IR_DETAILS,{id:n.model.id,name:n.model.name,title:n.model.title,nodeModel:n})}}}},E.getDeleteMenu=function(t,i,n){return{type:"PushItem",title:e.CHG_GOV_Menu_Delete,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-trash"},action:{callback:function(){let e=i.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),t=[];for(let i=0;i<e.length;i++){let n=e[i],o={physicalid:n.options.grid.id,nodeName:n.options.grid.name,nodeTitle:n.options.grid.title};t.push(o)}let o=require("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout");s.deleteNodes(t,n,o.removeDataFromGrid)}}}},E.changeView=function(t){if(widget.body.getDimensions().width<=o.MOBILE_CUTOFF?a.updateCASummaryViewMobile(t):a.updateCASummaryViewDesktop(t),"GridView"==t){this.currentView="Grid";let t=i.toolbar.getNodeModelByID("view");t&&"view-list"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-list"}}},tooltip:e.CHG_TOOLTIP_GRID_VIEW}),t.options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected";let n=document.querySelector(".crgridView");n&&(n.removeClassName("hideView"),n.removeClassName("nonVisible"),n.addClassName("showView"));let o=document.querySelector(".crtileView");o&&(o.removeClassName("showView"),o.addClassName("hideView"))}else if("TileView"==t){this.currentView="Tile";let t=i.toolbar.getNodeModelByID("view");t&&"view-small-tile"!=t.options.grid.semantics.icon.iconName&&t.updateOptions({grid:{semantics:{icon:{iconName:"view-small-tile"}}},tooltip:e.CHG_TOOLTIP_TILE_VIEW}),t.options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected";let n=document.querySelector(".crgridView");n&&(n.removeClassName("showView"),n.addClassName("hideView"));let o=document.querySelector(".crtileView");o&&(o.removeClassName("hideView"),o.addClassName("showView"))}},E.createCustomSeverity=function(e,t){let i="sevLow wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low";"Medium"==e?i="sevMed wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium":"High"==e&&(i="sevHigh wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high");let n=new UWA.Element("div",{}),o=new UWA.Element("div",{class:"gridIconContainer"});UWA.createElement("div",{class:i}).inject(o);let a=UWA.createElement("span",{html:t});return o.inject(n),a.inject(n),n.outerHTML},E.createCustomOwner=function(e,t){let i="/api/user/getpicture/login/"+t+"/format/normal",o=n.getGlobalVariable().computeSwymUrl(i),a=new UWA.Element("div",{class:"members"}),s=new UWA.Element("div",{class:"assignee"}),l="";if(n.getGlobalVariable().isSwymInstalled)l=UWA.createElement("img",{class:"userIcon",src:o});else{let e=r.getAvatarDetails(t);(l=UWA.createElement("div",{html:e.avatarStr,class:"avatarIcon"})).style.setProperty("background",e.avatarColor)}l.inject(s);let d=UWA.createElement("span",{class:"userName",html:t});return s.inject(a),d.inject(a),a.outerHTML},E.createHeaderFieldsJSON=function(t){return new Promise(function(i,o){let a={"ds6w:project":[t.model.collabspace],"ds6w:organizationResponsible":[t.model.organization]};g.getNLSValuesPromise(a).then(function(o){let a=o["ds6w:organizationResponsible"][t.model.organization],s=o["ds6w:project"][t.model.collabspace],r={id:t.model.id,name:t.model.name,revision:t.model.revision,type:t.model.type,policy:t.model.policy,title:t.model.title,thumbnail:t.model.thumbnail,iconURL:t.model.iconURL,minified:!1,onHold:t.model.onHold,isKindOfType:t.model.isKindOfType,attributes:{layout:[["maturity","owner","collabSpace"],["Issues","irAttachments","AffectedItems"],["orgnaization"]],mapping:{owner:{fieldNLS:e.CHG_GOV_DataGrid_Column_Owner,valueActual:t.model.owner,valueDisplay:t.model.ownerFullName,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},collabSpace:{fieldNLS:e.CHG_GOV_DataGrid_Column_CollabSpace,valueActual:t.model.collabspace,valueDisplay:s,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},maturity:{fieldNLS:e.CHG_GOV_DataGrid_Column_Maturity,valueActual:t.model.maturity,valueDisplay:t.model.maturityNLS,showLoader:!1,displayWhenMinified:!0,editable:!0},orgnaization:{fieldNLS:e.CHG_GOV_DataGrid_Column_Organization,valueActual:t.model.organization,valueDisplay:a,showLoader:!1,displayWhenMinified:!0,editable:!0,accessBit:"TransferOwnership"},Applicability:{fieldNLS:e.CHG_GOV_Header_Applicability,valueActual:"No",valueDisplay:"No",showLoader:!0,displayWhenMinified:!0,editable:!0},Issues:{fieldNLS:e.CHG_GOV_Header_Issue,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0},irAttachments:{fieldNLS:e.CHG_GOV_Header_Attachments,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0},AffectedItems:{fieldNLS:e.CHG_GOV_Home_Tab_AffectedItems,valueActual:"No",valueDisplay:"No",showLoader:!1,displayWhenMinified:!0,editable:!0}}},freeSpaces:[{type:"text",data:t.model.description}],menuItems:[{id:"chgRequestClarification",text:e.CHG_GOV_Investigation_Header_Menu_Request_Clarification,fonticon:"fonticon fonticon-reply",accessBit:"Cancel"},{id:"chgProvideClarification",text:e.CHG_GOV_Investigation_Header_Menu_Provide_Clarification,fonticon:"fonticon fonticon-forward",accessBit:"Cancel"},{id:"chgCancel",text:e.CHG_GOV_Header_Menu_Cancel,fonticon:"fonticon fonticon-block",accessBit:"Cancel"}]};"true"==n.getGlobalVariable().CHG_CR_DUPLICATE&&r.menuItems.push({id:"chgDuplicateCR",text:e.CHG_GOV_Change_Request_Duplicate_Header_Dropdown,fonticon:"fonticon fonticon-copy",accessBit:"Edit"}),i(r)})})},E.getIRTabs=function(e,t,i){this._pathRequestsDetails=[d._KEY,d._VIEWS_PREFERENCES,d._INVESTIGATION_REQUESTS_DETAILS];var n=l.getTab(this._pathRequestsDetails);let o="irAffectedItems";o=""==n?"irAffectedItems":n,console.log(n);let a=this.getIRMembersTab(e,t,o);return[this.getIRAffectedItemsTab(e,t,o,i),a,this.getIRAttachmentsTab(e,t,o,i),this.getIRIssuesTab(e,t,o,i)]},E.getIRMembersTab=((t,i,n)=>{let o=!1;return"irMembers"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Home_Tab_Members,isSelected:o,value:"irMembers",index:1,content:t.createIRMembersTab(i),icon:{iconName:"users",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getIRAffectedItemsTab=((t,i,n,o)=>{let a=!1;return"irAffectedItems"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Home_Tab_AffectedItems,isSelected:a,value:"irAffectedItems",index:0,content:t.createIRAffectedItemsTab(i,o),icon:{iconName:"change-request-attention",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getIRAttachmentsTab=((t,i,n)=>{let o=!1;return"irAttachments"==n&&(o=!0),i.isSelected=o,{label:e.CHG_GOV_Header_Attachments,isSelected:o,value:"irAttachments",index:2,content:t.createIRAttachmentsTab(i),icon:{iconName:"attach",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getIRIssuesTab=((t,i,n,o)=>{let a=!1;return"irIssues"==n&&(a=!0),i.isSelected=a,{label:e.CHG_GOV_Header_Issue,isSelected:a,value:"irIssues",index:3,content:t.createIRIssuesTab(i,o),icon:{iconName:"issue",fontIconFamily:WUXManagedFontIcons.Font3DS}}}),E.getInvestigationRequestModelForIDCard=function(e){return new Promise(function(t,i){c.getInvestigationRequestInfo(e).then(function(e){u.processedCRSummaryList(e).then(function(e){var i={model:e[0]};t(i)})})})},E.displayObjectInfoInsideIDcard=function(e,t=!1){var i=this;c.getInvestigationRequestInfo(e).then(function(e){u.processedIRSummaryList(e).then(function(n){var a={model:n[0]};i.createHeaderFieldsJSON(a).then(function(i){var a={model:i};if(t)try{let t=y("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");(i=n[0]).dueDate=e.data[0].dueDate,t.cloudProbeUtils.sendChgObjectCreateTrackerEvent({createData:i})}catch(e){console.log(e)}p.navigate(o.ROUTE_IR_DETAILS,{id:i.id,name:i.name,title:i.title,nodeModel:a,mode:"outsideCall"},{reload:!0})})})},function(e){var t=document.getElementsByClassName("moduleWrapper")[0];return t&&S.isMasked(t)&&S.unmask(t),Promise.reject(e)})},E.filterView=function(e){if("activeCR"==e)(t=i.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="selected",t.options.grid.data.menu[1].state="unselected";else if("inactiveCR"==e){var t;(t=i.toolbar.getNodeModelByID("filter")).options.grid.data.menu[0].state="unselected",t.options.grid.data.menu[1].state="selected"}},E}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRTileViewLayout",["UWA/Core","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil"],function(e,t){"use strict";return{changeView:function(e){require(["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout"],function(e){e.irGridView.irDatagrid.groupRows({dataIndexesToGroup:[]}),setTimeout(function(){t.changeView("TileView")},100)})},showEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.removeClassName("hideView"),e.addClassName("showEmptyView"))},hideEmptyView:function(){let e=document.getElementById("emptyTileViewDiv");e&&(e.addClassName("hideView"),e.removeClassName("showEmptyView"))}}}),define("DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";return{showRMBMenuOnGrid:async function(e,t,n,o){let a=[];try{"true"==d.getGlobalVariable().CHG_APPROVAL_COLUMN&&t.cellInfos.nodeModel.options.grid.approvalStatusModel&&await m.getColumnApprovalStatusMenu(t.cellInfos.nodeModel.options.grid.approvalStatusModel).then(function(e){a.push(e)})}catch(e){console.error(e)}return new Promise(function(s,r){let c=g("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),u=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const m=u.map(e=>e.options.grid.id);let C={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType};if(!0===n){let n=[];n.push(l.createPropertyPushItem(m)),n.push(i.getRelationalExplorerMenu(e,t)),n.push(h.getMaturityMenu(t,void 0,o)),c.openWith(C).then(e=>{n.splice(2,0,e),s(n)})}else{let n="false";u.length>1&&(n="true"),C.facetName="dependency";let r=[];r.push(l.createPropertyPushItem(m)),r.push(i.getRelationalExplorerMenu(e,t)),[].push(C);let f=g("DS/ENOChgServices/scripts/services/ChgDataService"),v=null,D=c.openWith(C),b=[],w=document.getElementById("outer-co-div");b.push(D),"false"==n&&(v=f.getChangeRequestUserAccess(t.cellInfos.nodeModel.options.grid.id),b.push(v)),Promise.all(b).then(function(l){if(l[0]&&r.push(l[0]),r.push(h.getMaturityMenu(t,void 0,o)),r.push(p.getCopyLink(u)),"false"==n){if(l[1]&&"true"==l[1].data[0].dataelements.TransferOwnership&&r.push(i.getTransferMenu(e,t)),"true"==l[1].data[0].dataelements.Delete&&r.push(i.getDeleteMenu(e,t,w)),"true"==d.getGlobalVariable().CHG_APPROVAL_COLUMN&&a.length>0)for(let e=0;e<a[0].length;e++)r.push(a[0][e])}else r.push(i.getTransferMenu(e,t)),r.push(i.getDeleteMenu(e,t,w));s(r)})}})},createCRAssessmentTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-assessment-container"),t.target=n,s.createImpactAnalysisView(t,i),n},createCRAffectedItemsTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-affectedItems-container"),t.target=n,a.createAffectedItemsView(t,i),n},createCROrchestrationTab:function(t,i){let o=e.createElement("div");return o.classList.add("chg-orchestration-container"),t.target=o,n.createChangeOrchestrationView(t,i),o},createCRMembersTab:function(t){let i=e.createElement("div");return i.classList.add("chg-member-container"),t.target=i,o.createMembersView(t),i},createCRApprovalsTab:function(t,i){let n=e.createElement("div"),o=e.createElement("div"),a=e.createElement("div");o.classList.add("chg-Approval-container"),a.classList.add("chg-Approval-Header-container");let s=e.createElement("div",{id:"chg-Task-container"});return"true"==d.getGlobalVariable().CHG_APPROVAL_CYCLE&&n.appendChild(o),t.target=o,t.targetHeader=a,t.taskContainer=s,r.createApprovalsView(t),o},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=d.getGlobalVariable().changeRequestSubTypes;c.getCombinedClassList(n).then(function(i){c.getPropertyForClassGrid(i).then(function(i){let n=c.makeCombinedColumnList(i),o=t.filterColumn(n);e(o)})})})},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:organizationResponsible","ds6w:modified","ds6w:created"];for(let t of n)e.delete(t);return e.forEach((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:u.getGetCellValueFunction(i,t)}}}}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgChangeRequestDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridReportViewToolbar","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D){"use strict";return e.extend({init:function(e){this.options=e,this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}},this._modelEvents=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.crDatagridView=""},loadCustomColumns:function(){let e=v.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&D.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){let t=this.processColumns(),g=this;var e={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCRSummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(g,e,g.options.isManagingCRPopup,g.options.postMaturityCallback).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){s.readyDragContent(e,t)},onDragStartCell:function(e,t){s.readyDragContent(e,t)}};e=UWA.merge(e,this.options),this.crDatagrid=new n(e),this.crDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){f.onCustomViewsSave(e,t,g.options.custom_view_options)},this.crTilesView=new p({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){s.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});let h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(g,e,g.options.isManagingCRPopup,g.options.postMaturityCallback).then(function(e){return e})}};this.crTilesView.onContextualEvent=h;let C={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:l.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:l.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},v={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}},D={expandInput:{stdTemplate:"expandInputtemplate"}},b={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.crDatagrid.getTypeRepresentationFactory().registerTypeTemplates(b),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(D),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(C),this.crDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),this.options.isManagingCRPopup?this.crDatagrid.setToolbar(m.writetoolbarDefinition(this.options)):(this.crDatagrid.setToolbar(a.writetoolbarDefination(this.options)),a.toolbar=this.crDatagrid.getToolbar()),this.crDatagrid.getToolbar().typeRepresentationFactory.registerTypeTemplates(b),this.crDatagrid.getToolbar().typeRepresentationFactory.registerTypeRepresentations(D),this.crDatagrid.getToolbar().addEventListener("onReady",function(e){let t=g.crDatagrid.getToolbar().getNodeModelByID("addNewBlankCAId");t&&t._associatedView.registerkeyDownCallback(u.createBlankChangeOrder)}),this.crDatagrid.addEventListener("allCellsRendered",function(){g.crDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.crDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.crDatagrid.getTreeDocument().getSelectedNodes().length}}]),g.crTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.crTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.crTilesView.getTreeDocument().getSelectedNodes().length}}])}),g.crDatagrid.addEventListener(i.POINTERHIT,function(e,t){g.onItemClick(e,t)}),g.crDatagrid.getTreeDocument().getXSO().onAdd(function(e){g.duplicateCmdController(e),g.crDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.crDatagrid.getTreeDocument().getSelectedNodes().length}}),g.crTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.crDatagrid.getTreeDocument().getSelectedNodes().length}}),g._modelEvents.publish({event:"cr-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})}),g.crDatagrid.getTreeDocument().getXSO().onRemove(function(e){g.duplicateCmdController(e),g.crDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.crTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?g._modelEvents.publish({event:"cr-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):g._modelEvents.publish({event:"cr-DataGrid-on-unselect",data:{model:e,context:e},context:e})}),g.crTilesView.addEventListener(i.POINTERHIT,function(e,t){g.onItemClick(e,t)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount)t.nodeModel.select(!0),g._modelEvents.publish({event:"cr-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel});else if(t&&2==t.columnID){var i={};i.cellInfos=t,f.executeMaturity(i)}},this.crDatagridView=UWA.createElement("div",{id:"outer-cr-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-cr-div"});let w=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-cr-div"});this.crDatagrid.getToolbar().getContent().inject(w);let S=UWA.createElement("div",{class:"content-cr-div crgridView showView"}),I=UWA.createElement("div",{class:"crtileView hideView"}),_=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_DataGrid_PlaceHolder_ChgRequest}).inject(_),this.crDatagrid.inject(S),this.crTilesView.inject(I),_.inject(I),this.crDatagridView.addContent(w),this.crDatagridView.addContent(S),this.crDatagridView.addContent(I),this.crDatagridView.inject(this.options.target),this.crDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.subscribe({event:"cr-DataGrid-on-search"},function(e){var t=e.query;t&&g.crDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(t.toLowerCase())||e.options.grid.name.contains(t.toLowerCase())||e.options.grid.title.contains(t.toUpperCase())||e.options.grid.name.contains(t.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(t.toLowerCase())||e.options.grid.name.contains(t.toLowerCase())||e.options.grid.title.contains(t.toUpperCase())||e.options.grid.name.contains(t.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"cr-DataGrid-on-reset-search"},function(e){g.crDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.options.custom_view_options.dgvHandle=this.crDatagrid,this.options.custom_view_options.ootb_columns=[...t],this.options.custom_view_options.dgvDiv=S,this.loader=(new o).inject(this.options.target);let y=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];f.registerCustomEventsOnDGV(y,this.crDatagrid,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.crDatagrid.reapplySortModel()},duplicateCmdController:function(e){let t=this,i=e.getTreeDocument();i.getSelectedNodes()&&1===i.getSelectedNodes().length&&"Cancelled"!=i.getSelectedNodes()[0].options.grid.maturity?t.crDatagrid.getToolbar().updateNodeModel("duplicateCR",{disabled:!1}):t.crDatagrid.getToolbar().updateNodeModel("duplicateCR",{disabled:!0})},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgChangeRequestDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgServices/scripts/services/ChgErrors","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I){"use strict";let _={loadRealTimeCRDataPromise:function(e){return new Promise(function(t,i){n.getTimestamp().then(function(a){var s=o.processTimestampData(a);n.getConfiguredChangeRequestList({indexed:!1,simplifiedJSON:!0,timestamp:s,filter:e}).then(function(e){o.processedCRSummaryList(e,_.extns).then(function(i){t({realTimeData:e,processedCRList:i})})},function(e){i(e)})},function(e){i(e)})})},loadIndexedCRDataPromise:function(e){return new Promise(function(t,i){n.getConfiguredChangeRequestList(e).then(function(e){o.processedCRSummaryList(e,_.extns).then(function(i){t({CRSummaryList:e,processedCRList:i})},function(e){i(e)})},function(e){i(e)})})},postProcessing:function(){0==this.treeDocument.getChildren().length?this.treeDocument._modelEvents.publish({event:"crSummaryEmpty"}):this.treeDocument._modelEvents.publish({event:"crSummaryNotEmpty"}),this.globalSubscribeCOSummaryUpdateFromPropertyPanel(),this.globalSubscribeForTransferFromCOSummaryView(),this.globalSubscribeForMaturityUpdate(),this.crGridView.loadCustomColumns(),b.hideLoader(this.options.target,this.crGridView.loader)},updateTagger:function(){var e=this;"false"==c.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)})},createChangeRequestView:async function(n){n.target.setStyles({position:"relative"}),this._pathChangeRequestSummary=[p._KEY,p._VIEWS_PREFERENCES,p._LIST_VIEW,p._FILTERVIEW];var a=u.getFilter(this._pathChangeRequestSummary),s={};s=UWA.merge(s,n),this.options=s,_.extns=await D.getExtensions("Change Request"),s.columns=t.getColumns(),this.ChgCRDataGridModel=new i,this.treeDocument=s.treeDocument=this.ChgCRDataGridModel.createTreeDocument(),this.ChgCRlayoutModel=this.treeDocument,this.ChgCRDataGridModel.registerCustomFilter();var r=o.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(r),this.crGridView=new e(s),this.crGridView.render(),b.showLoader(s.target,this.crGridView.loader),this.subscribeToModelEvents(this.treeDocument);var l="";"inactive"===a?l="inactiveCR":(l="activeCR",u.updateFilter(this._pathChangeRequestSummary,"activeCR")),this.updateGrid(l)},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_FetchChgRequest,this.updateTagger()},updateGrid:async function(e){var t=this;if(t.preUpdateProcessing(),"inactiveCR"!=e){var i=await t.loadRealTimeCRDataPromise(e);b.fetchMaturityStateCSS(i.processedCRList),t.ChgCRDataGridModel.loadChangeRequestData(t.treeDocument,i.processedCRList)}t.params.filter=e,t.loadIndexedCRDataPromise(t.params).then(async function(e){b.fetchMaturityStateCSS(e.CRSummaryList.data),t.ChgCRDataGridModel.loadIndexedChangeRequests(t.treeDocument,e.processedCRList),t.currentPage=parseInt(e.CRSummaryList.summary["Current Page"]),t.totalPages=parseInt(e.CRSummaryList.summary["Total Pages"]),t.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_NoChgRequest,t.currentPage<t.totalPages?(t.updateTagger(),t.crGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.crGridView.crDatagrid.onInfiniteScroll(async function(e){t.getNextPageChangeRequests("DGV")}),t.crGridView.crTilesView.onInfiniteScroll(async function(e){t.getNextPageChangeRequests("RTV")})):(t.updateTagger(),t.crGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())})},getNextPageChangeRequests:async function(e){if(this.currentPage<this.totalPages){b.showLoader(this.options.target,this.crGridView.loader),this.params.pageNumber++,this.currentPage++;let t=await this.loadIndexedCRDataPromise(this.params);this.ChgCRDataGridModel.loadIndexedChangeRequests(this.treeDocument,t.processedCRList),this.updateTagger(),this.crGridView.setListnersOnToolbar(),this.loadingViewPreference(),this.postProcessing(),"DGV"===e?this.crGridView.crDatagrid.infiniteScrollProcessDone():this.crGridView.crTilesView.infiniteScrollProcessDone()}},changeView:function(){t.changeView("GridView")},refreshLayout:function(e){let t=this.ChgCRlayoutModel;(new i).updateNodeIndexed(t,e),this.crGridView.crDatagrid.ensureNodeModelVisible(this.ChgCRlayoutModel.getChildren()[0],!1)},removeDataFromGrid:function(e,t){_.ChgCRlayoutModel.getChildren();for(let t=0;t<e.length;t++){let i=e[t];_.ChgCRlayoutModel.search({shouldStop:function(e){return e.options.grid.id===i&&(_.removingNode(e),!0)}}),0==_.ChgCRlayoutModel.getChildren().length&&_.ChgCRlayoutModel._modelEvents.publish({event:"crSummaryEmpty"})}},removingNode:function(e){this.ChgCRlayoutModel.removeRoot(e)},globalSubscribeCOSummaryUpdateFromPropertyPanel:function(){l.addObserver("ChgCRDataGridLayout","CO-Properties-Update",this.handleForUpdatingFromPropertyPanel)},globalSubscribeForTransferFromCOSummaryView:function(){l.addObserver("ChgCRDataGridLayout","ENOLC_MOVE_CMD_UPDATE",this.handleForCOSummaryTransfer)},globalSubscribeForMaturityUpdate:function(){l.addObserver("ChgCRDataGridLayout","Lifecycle.Modification",this.handleForMaturityUpdate)},handleForUpdatingFromPropertyPanel:function(e){let t=_.ChgCRlayoutModel;t&&w.handlePropertiesOnUpdate(t,e)},handleForCOSummaryTransfer:function(e){let n,o=_.ChgCRlayoutModel.getAllDescendants(),a=[],s="",r="";Object.keys(e.data.attributes).forEach(function(t){let i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)});for(let e=0;e<a.length;e++){n=a[e];for(let e=0;e<o.length;e++){if(o[e].options.grid.id==n.id){if(n.newOwnerId&&n.newOwnerFullName&&(r=o[e].options.grid.name,s=n.newOwnerId,o[e].options.grid.owner=s,o[e].options.grid.ownerFullName=n.newOwnerFullName),n.newOrganization){let t=n.newOrganization;o[e].options.grid.orgnaizationNLS=t}if(n.newCollabSpace){let t=n.newCollabSpace;o[e].options.grid.collabspaceNLS=t}let a=n.newOwnerFullName,u=t.createCustomOwner(s,a);var l={};l.name=r,l.title=o[e].options.grid.title,l.severity=o[e].options.grid.severity,l.severityNLS=o[e].options.grid.severityNLS,l.ownerFullName=a,l.maturityNLS=o[e].options.grid.maturityNLS;var d=r+" | "+a,c=i.prototype.createCustomTooltip(l);o[e].updateOptions({grid:{collabspaceNLS:o[e].options.grid.collabspaceNLS,organizationNLS:o[e].options.grid.organizationNLS,owner:o[e].options.grid.owner,ownerFullName:o[e].options.grid.ownerFullName,co_Owner:u},customTooltip:c,subLabel:d})}}}},loadingViewPreference:function(){let e=v("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=s.MOBILE_CUTOFF){let t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(r.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{let t=e.getCASummaryViewDesktop();void 0===t||"GridView"===t?this.changeView():r.changeView()}},filterView:function(e){t.filterView(e.filter),_.updateGrid(e.filter)},duplicateChangeRequest:function(){var e={commandInfo:{type:"Change Request",facet:"My Change Requests",action:"CR>My Change Requests>Duplicate CR"}};v("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=[],i={id:_.ChgCRlayoutModel.getSelectedNodes()[0].options.grid.id,type:_.ChgCRlayoutModel.getSelectedNodes()[0].options.grid.type,policy:_.ChgCRlayoutModel.getSelectedNodes()[0].options.grid.policy,title:_.ChgCRlayoutModel.getSelectedNodes()[0].options.grid.title};t.push(i),n.duplicateChangeRequestCR(t).then(function(e){if(_.params&&_.params.filter&&"activeCR"==_.params.filter){var t=e.data[0].id;_.loadRealTimeCRDataPromise("activeCR").then(function(e){var i=[];if(e&&e.processedCRList){var n=e.processedCRList;for(let e=0;e<n.length;e++)if(n[e].id==t){i.push(n[e]);break}i.length>0&&_.ChgCRDataGridModel.loadChangeRequestData(_.ChgCRDataGridModel.treeDocument,i,"true")}})}e.data[0]["warn report"]?S.warn(h.CHG_GOV_Change_Request_Duplicate_Message+e.data[0].name+"<br/>"+h.CHG_GOV_Error_Duplicate_Message+"<br/>"+e.data[0]["warn report"][0].message):S.success(h.CHG_GOV_Change_Request_Duplicate_Message+e.data[0].name)})},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"crSummaryEmpty"},function(e){r.showEmptyView(),_.crGridView.crDatagrid.placeholder=h.CHG_GOV_DataGrid_PlaceHolder_NoChgRequest}),e._modelEvents.subscribe({event:"crSummaryNotEmpty"},function(e){r.hideEmptyView()}),m.unsubscribe(`${e.options.id}:${widget.id}`),m.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.treeDocument),e._cleanBIFilterProxy();let t={data:{roots:that.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,that.treeDocument)})}),m.unsubscribe(`${e.options.id} of ${widget.id}`),m.subscribe(`${e.options.id} of ${widget.id}`,function(e){_.ChgCRDataGridModel.filterView(e)}),m.unsubscribe(`${e.options.id} colorize ${widget.id}`),m.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){_.ChgCRDataGridModel.enableColorizeView(e)}),m.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){_.ChgCRDataGridModel.disableColorizeView(e)}),m.unsubscribe("updateRouteContent-"+widget.id),m.subscribe("updateRouteContent-"+widget.id,function(e){if("true"==c.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=I.getApprovalStatusValue(e);var t=_.ChgCRDataGridModel.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach(e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS,maturityWithBadge:n.maturity_NLS}})})}})},handleForMaturityUpdate:function(e){if(e){let t=_.ChgCRlayoutModel.getSelectedNodes();b.getHandleForMaturityUpdate(JSON.parse(e),t)}}};return _}),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMemberFilterLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAAddMemberLayout","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/PlatformAPI/PlatformAPI","require","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCAAddMemberHandler","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewFeaturesUtil","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgIRAddMemberHandler","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCRAddMemberHandler","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCOAddMemberHandler"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D){"use strict";return e.extend({init:function(e){this._parent(e);var t=this;this._modelEvents=null,this._modelEvents=e.contextDetails._modelEvents,this.objectType=e.contextDetails.isKindOfType,this.membersDatagridView="","undefined"!=this.options.target&&null!=this.options.target&&(this.render(),this.membersDatagridView.inject(this.options.target),this.membersDatagridView.setStyle("width",this.options.target.offsetWidth)),u.subscribe("idcard-header-minified",function(e){e.value?(t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").addClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("minified-header-height")):(t.membersDatagridView.getElement(".content-member-grid-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-grid-div").removeClassName("minified-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").addClassName("expanded-header-height"),t.membersDatagridView.getElement(".content-member-tile-div").removeClassName("minified-header-height"))})},render:function(){try{var e=this.processColumns(),t=this,s={treeDocument:this.options.treeDocument,columns:e,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:d.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder,identifier:"width",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},showContextualMenuColumnFlag:!0,onContextualEvent:function(e){var i=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1){return p("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewFeaturesUtil").showRMBMenuOnGrid(t,e).then(function(e){return e})}e.collectionView.columns.length,e.cellInfos.columnID;i=e.collectionView.buildDefaultContextualMenu(e,{pin:!0,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return i},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){r.readyDragContent(e,t)},onDragStartCell:function(e,t){r.readyDragContent(e,t)}};s=UWA.merge(s,this.options);var u={model:this.options.treeDocument,height:"inherit",allowUnsafeHTMLContent:!0,displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag"]};this.membersDatagrid=new n(s),this.membersDatagrid.rowSelection="multiple",this.membersDatagrid.cellSelection="none";let y=this.membersDatagrid;this._modelEvents.publish({event:"hideEmpty-datagrid",data:y}),this.tileView=new o(u);var g={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return C.showRMBMenuOnGrid(t,e).then(function(e){return e})}};this.tileView.onContextualEvent=g;var h={expandInput:{stdTemplate:"expandInputtemplate"}},f={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.membersDatagrid.getTypeRepresentationFactory().registerTypeTemplates(f),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(h),this.membersDatagrid.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"plus"}}}),m.toolbar=this.membersDatagrid.setToolbar(m.writetoolbarDefinition(this.options.contextDetails)),this.toolbar=m.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(f),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(h);t=this;this.membersDatagrid.addEventListener("allCellsRendered",function(){t.membersDatagrid.buildStatusBar([{type:l.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_TotalItems+t.membersDatagrid.getTreeDocument().getAllDescendants().length}},{type:l.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}]),t.tileView.buildStatusBar([{type:l.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_TotalItems+t.tileView.getTreeDocument().getAllDescendants().length}},{type:l.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:d.CHG_GOV_StatusBar_SelectedItems+t.tileView.getTreeDocument().getSelectedNodes().length}}])}),t.membersDatagrid.getTreeDocument().getXSO().onAdd(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+t.membersDatagrid.getTreeDocument().getSelectedNodes().length}}))}),t.membersDatagrid.getTreeDocument().getXSO().onRemove(function(e){t.membersDatagrid.elements.statusBar&&(t.membersDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),t.tileView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:d.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}))}),t.membersDatagrid.addEventListener(i.POINTERHIT,function(e,i){console.log(">>>>>>>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),t.onItemClick(e,i)}),this.tileView.addEventListener(i.POINTERHIT,function(e,i){t.onItemClick(e,i)}),this.onItemClick=function(e,i){i&&i.nodeModel&&i.nodeModel.options.grid&&2==e.multipleHitCount&&(console.log("ca-DataGrid-on-dblclick"),i.nodeModel.select(!0),t._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:i.nodeModel.options.grid},context:i.nodeModel}))},this.membersDatagridView=UWA.createElement("div",{id:"outer-member-grid-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-member-grid-div"});var v=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-member-grid-div"});this.toolbar.inject(v);var D=UWA.createElement("div",{class:"content-member-grid-div expanded-header-height"}),b=(UWA.createElement("div",{class:"content-member-tile-div membertileView expanded-header-height"}),UWA.createElement("div",{styles:{position:"relative"},class:"content-member-filter-div memberfilterView hideView"})),w=UWA.createElement("div",{styles:{position:"relative"},class:"content-add-member-div addmemberView hideView"}),S=UWA.createElement("div",{class:"hideView",id:"memberEmptyTileViewDiv"});UWA.createElement("div",{html:d.CHG_GOV_ChangeOrchestration_DataGrid_PlaceHolder}).inject(S);var I={target:b,model:this.options.treeDocument},_={id:this.options.contextDetails.id,type:this.options.contextDetails.isKindOfType,target:w,model:this.options.treeDocument,objectTitle:this.options.contextDetails.title};a.createMemberFilter(I),this.handleAddMemberHandler(_),this.membersDatagrid.inject(D),this.membersDatagridView.addContent(v),this.membersDatagridView.addContent(b),this.membersDatagridView.addContent(w),this.membersDatagridView.addContent(D)}catch(e){}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.membersDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}},handleAddMemberHandler:function(e){const t="true"===g.getGlobalVariable().ECM_EnableAddMemberGenericComponent;let i=e.type;if("InvestigationRequest"===i&&f.getDataToBuildAddMemberPanel(e),t)switch(i){case"ChangeRequest":f.getDataToBuildAddMemberPanel(e);break;case"ChangeAction":h.getDataToBuildAddMemberPanel(e);break;case"ChangeOrder":D.getDataToBuildAddMemberPanel(e);break;default:console.error("Unsupported action type:",i)}else s.createAddMemberPanel(e)}})}),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridModel","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridView","DS/Controls/Button","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgAddMembersServices","require","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m){"use strict";var C={createMembersNewTab:function(e){this.view=e;var t={};(t=UWA.merge(t,e)).columns=n.getColumns();let i=e.contextDetails.id;this.id=i,C.objectType=e.contextDetails.isKindOfType;let a=C.objectType,s=new o(e.contextDetails);this.membersDataGridModel=s,t.treeDocument=s.createTreeDocument(),s.setFilterModel(s.getFilterModel()),s.registerCustomFilter(),this.membersTreeModel=t.treeDocument;var r=new c(t);this.membersDataGridView=r,this._customizeColumnRendering(t.columns);this.membersDataGridView.membersDatagrid;return this.loadMembersData(t.treeDocument,i,a)},loadMembersData:async function(e,t,i){try{const n=await g.getMembersByObjectType(t,i);console.log("Member list: "+n);let o=l.processMembersList(n);if(this.processMembersList=o,0==o.length){let e=document.getElementById("caMembers");e&&p.isMasked(e)&&p.unmask(e),this._modelEvents.publish({event:"showEmpty-datagrid",data:gridoption})}this.membersDataGridModel.loadMembersData(e,o,i)}catch(e){let t=document.getElementById("caMembers");return t&&p.isMasked(t)&&p.unmask(t),Promise.reject(e)}},_customizeColumnRendering:function(e){var t=this;e.forEach(function(e){switch(e.dataIndex){case"tree":e.onCellRequest=t.rendering.title.bind(t);break;case"user":break;case"ContextualMenuColumn":e.hasCellValue=t.rendering.contextualMenuColumn.bind(t)}})},rendering:{title:function(t){var i="";if(t.nodeModel.options.grid.isRoot){var n=t.nodeModel.getNumberOfChildren();"Owner"===t.nodeModel.options.grid.role?i=UWA.createElement("span",{class:"member-title",html:e.CHG_GOV_Members_DataGrid_Owner+" ("+n+")"}):"Assignees"===t.nodeModel.options.grid.role?i=UWA.createElement("span",{class:"member-title",html:e.CHG_GOV_Members_DataGrid_Assignee+" ("+n+")"}):"Approvers"===t.nodeModel.options.grid.role?i=UWA.createElement("span",{class:"member-title",html:e.CHG_GOV_Members_DataGrid_Approver+" ("+n+")"}):"Informed Users"===t.nodeModel.options.grid.role?i=UWA.createElement("span",{class:"member-title",html:e.CHG_GOV_Members_DataGrid_InformedUser+" ("+n+")"}):"Change Coordinators"===t.nodeModel.options.grid.role&&(i=UWA.createElement("span",{class:"member-title",html:e.CHG_GOV_Members_DataGrid_ChangeCoordinators+" ("+n+")"}))}else i=this.membersDataGridModel.createCustomPersonNameField(t.nodeModel.options.grid);i.computeContentSize=function(){return this.getChildren().length>0&&this.getChildren()[1]?this.getChildren()[1].getDimensions().width+50:this.getDimensions().width+50},t.cellView.setReusableContent(i)},contextualMenuColumn:function(e){let t=!0;return t=!e.nodeModel.options.grid.isRoot}},changeView:function(e){n.changeView("GridView")},addNodesInLayout:function(e){C.membersDataGridModel.addNodesInLayoutModel(this.membersTreeModel,e)},subscribeToModelEvents:function(e){var t=this;PlatformAPI.unsubscribe(`caMembers:${widget.id}`),PlatformAPI.subscribe(`caMembers:${widget.id}`,function(){t._modelEvents.publish({event:"update_object_select",data:{node:t.membersDataGridView.options.treeDocument._getTrueRoot(),contextID:t.membersDataGridView.options.contextDetails.id,contextType:t.membersDataGridView.options.contextDetails.isKindOfType,isNodeAdded:!1}})})},handleAccessBitUpdate:function(e){if(e.id===C.id){console.log(`${C.name} handleAccessBitUpdate: ${e.accessBits}`);const t=e.accessBits;C.accessBitSetCoordinator=C.setAccessBitFlag(t.SetCoordinator),C.addReviewerAccessBit=C.setAccessBitFlag(t.ManageRouteTemplates),C.addFollowerAccessBit=C.setAccessBitFlag(t.ManageFollowers),C.addContributorAccessBit=C.setAccessBitFlag(t.ManageAssignees);const i={accessBitSetCoordinator:C.accessBitSetCoordinator,addReviewerAccessBit:C.addReviewerAccessBit,addFollowerAccessBit:C.addFollowerAccessBit,addContributorAccessBit:C.addContributorAccessBit};for(const e in i)if(e.startsWith("accessBit")){const e=C.membersDataGridView.membersDatagrid.getToolbar();Object.values(C).some(e=>e)?e.updateNodeModel("add",{visibleFlag:!0,disabled:!1}):e.updateNodeModel("add",{visibleFlag:!1,disabled:!0})}}},setAccessBitFlag:function(e){return"false"===e?"false":"true"},globalSubscribeForMembersTeamView:function(){a.addObserver("ChgMembersNewDataGridLayout","CO-AccessBit-Update",C.handleAccessBitUpdate)},updatePersonRole:function(e,t){if(console.log("updatePersonRole"),0==C.membersDataGridModel.treeDocument.getSelectedNodes().length);else{var i={person:[],group:[]},o={person:[],routetemplate:""},a={person:[],group:[]},s={person:[]};let e=t.role,l=Array.isArray(e)?t[e[0]]:t[e],d="",c="",u=this.objectType;"Route Template"!=t.currentObjType&&"Group"!=t.currentObjType||(d=C.membersDataGridModel.treeDocument.getSelectedNodes()[0].options.grid.id),"Person"==t.currentObjType&&(c=C.membersDataGridModel.treeDocument.getSelectedNodes()[0].options.grid.userId),e.indexOf("Coordinator")>=0&&(s.person=c),e.indexOf("contributor")>=0&&("Person"==t.currentObjType?i.person.push(c):"Group"==t.currentObjType&&i.userGroup.push(d)),e.indexOf("follower")>=0&&("Person"==t.currentObjType?a.person.push(c):"Group"==t.currentObjType&&a.userGroup.push(d)),e.indexOf("approver")>=0&&("Person"==t.currentObjType?o.person.push(c):"Route Template"==t.currentObjType&&(o.routeTemplate=d));var r=n.makeUpdateMemberJson(l,i,o,a,s,u);"DISCONNECT"==l&&1==t.showConfirmation?C.showConfirmationDialog(r):C.updateTreeDocumentMembersWithRole(r,!1,e)}},updateTreeDocumentMembersWithRole:function(e,t,i){let o=this.objectType;if(""!=e){let a=C.id;g.updateMembers(o,a,e).then(function(e){let o=C.membersDataGridModel.treeDocument,a=o.getSelectedNodes()[0];if(1==t){if("Coordinator"==a.options.grid.role&&(n.isChangeCoordinatorConnected=!1),"approver"==a.options.grid.role&&("Route Template"==a.options.grid.type&&(g.reviewerType.typeOfReviewer=""),"Person"==a.options.grid.type)){let e=o.getChildren(),t=!1,i=0;for(var s=0;s<e.length;s++){if(e[s].options.grid.role.indexOf("approver")>=0&&2==++i){t=!0;break}}0==t&&(g.reviewerType.typeOfReviewer="")}a.remove()}else if(""!=i&&1==e.success){o.prepareUpdate();let t=a.options.grid.role,r=n.getRoleNLSValue(t),l=","+i,d=n.getRoleNLSValue(i),c=d+",";if(d=", "+d,e.data.length>0){let e=r.concat(d);a.options.description=e,a.setAttribute("roleList",e),a.options.grid.role=t.concat(l),a.options.grid.roles.push(i),"approver"==i&&(g.reviewerType.typeOfReviewer="Person")}else{let e=r.replace(d,"");e=e.replace(c,""),a.setAttribute("roleList",e),a.options.description=e,a.options.grid.role=t.split(",").filter(e=>e!=l.replace(/,/g,"")).join(",");let n=a.options.grid.roles.filter(function(e,t,n){return e!=i});if(a.options.grid.roles=n,"approver"==i){let e=o.getChildren(),t=!1;for(s=0;s<e.length;s++){if(e[s].options.grid.role.indexOf("approver")>=0){t=!0;break}}0==t&&(g.reviewerType.typeOfReviewer="")}}o.pushUpdate()}C.membersDataGridModel.updateCountOnContextualAction(a,i)})}},showConfirmationDialog:function(e){var n=new i({}),o=document.getElementById("outer-member-grid-div");n.inject(o),new t({immersiveFrame:n,title:m.CHG_Member_Remove_Title,content:m.CHG_Member_Remove_Message,activeFlag:!1,modelFlag:!0,width:500,buttons:{No:new u({onClick:function(e){n.destroy()}}),Yes:new u({onClick:function(t){n.destroy(),C.updateTreeDocumentMembersWithRole(e,!0)}})}}).addEventListener("close",function(e){n&&n.destroy()})},removeHandler:function(){let e=C.objectType,t=h("DS/ENOChgProbes/scripts/ChgCloudProbeUtils");var i={};if(i.commandInfo={type:e,facet:"Members",action:"CA>Members>Remove"},t.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:i}),0!=C.membersDataGridModel.treeDocument.getSelectedNodes().length){let e=document.getElementById("caMembers");e&&p.mask(e)}C.membersDataGridModel.removeChildren()}};return C.globalSubscribeForMembersTeamView(),C}),define("DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestFeaturesUtil",["UWA/Core","DS/i3DXCompassPlatformServices/OpenWith","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/members/ChgCRMembersDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/facets/affectedItems/ChgIRAffectedItemsDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/approvals/ChgGovCRApprovalsView","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/issue/ChgCRIssueDataGridLayout","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/facets/issue/ChgIssueDataGridLayout"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";return{showRMBMenuOnGrid:function(e,t,i,o){return new Promise(function(a,s){let r=h("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices"),l=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const c=l.map(e=>e.options.grid.id);let u={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType};if(!0===i){let i=[];i.push(d.createPropertyPushItem(c)),i.push(n.getRelationalExplorerMenu(e,t)),i.push(m.getMaturityMenu(t,void 0,o)),r.openWith(u).then(e=>{i.splice(2,0,e),a(i)})}else{let i="false";l.length>1&&(i="true"),u.facetName="dependency";let s=[];s.push(d.createPropertyPushItem(c)),s.push(n.getRelationalExplorerMenu(e,t)),[].push(u);let p=h("DS/ENOChgServices/scripts/services/ChgDataService"),C=null,f=r.openWith(u),v=[],D=document.getElementById("outer-co-div");v.push(f),"false"==i&&(C=p.getInvestigationRequestUserAccess(t.cellInfos.nodeModel.options.grid.id),v.push(C)),Promise.all(v).then(function(r){r[0]&&s.push(r[0]),s.push(m.getMaturityMenu(t,void 0,o)),s.push(g.getCopyLink(l)),"false"==i?(r[1]&&"true"==r[1].data[0].dataelements.TransferOwnership&&s.push(n.getTransferMenu(e,t)),"true"==r[1].data[0].dataelements.Delete&&s.push(n.getDeleteMenu(e,t,D)),s.unshift(n.getOpen(e,t))):(s.push(n.getTransferMenu(e,t)),s.push(n.getDeleteMenu(e,t,D))),a(s)})}})},createIRAffectedItemsTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-affectedItems-container"),t.target=n,s.createAffectedItemsView(t,i),n},createIRMembersTab:function(t){let i=e.createElement("div");return i.classList.add("chg-member-container"),t.target=i,f.createMembersNewTab(t),i},createIRAttachmentsTab:function(t){let i=e.createElement("div");i.classList.add("chg-member-container"),t.target=i,t.target.setContent("");var n={id:t.id,target:t.target,parentType:t.type};return h("DS/ENOChgGovernanceUX/scripts/components/attachmentView/ChgAttachmentView").create(n,"false"==t.contextDetails.access.accessBits.Attachment),i},createIRIssuesTab:function(t,i){let n=e.createElement("div");return n.classList.add("chg-affectedItems-container"),t.target=n,v.createIssueView(t.target,t,i),n},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=c.getGlobalVariable().changeRequestSubTypes;u.getCombinedClassList(n).then(function(i){u.getPropertyForClassGrid(i).then(function(i){let n=u.makeCombinedColumnList(i),o=t.filterColumn(n);e(o)})})})},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:organizationResponsible","ds6w:modified","ds6w:created"];for(let t of n)e.delete(t);return e.forEach((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:p.getGetCellValueFunction(i,t)}}}}),define("DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil",["UWA/Core","DS/CoreEvents/ModelEvents","DS/Controls/Button","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesView","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/approvals/ChgCAApprovalsView","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgPropertiesServices","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","require","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesController"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D){"use strict";return{showRMBMenuOnGrid:async function(e,t){let i=[];try{"true"==c.getGlobalVariable().CHG_APPROVAL_COLUMN&&t.cellInfos.nodeModel.options.grid.approvalStatusModel&&await d.getColumnApprovalStatusMenu(t.cellInfos.nodeModel.options.grid.approvalStatusModel).then(function(e){i.push(e)})}catch(e){console.error(e)}return new Promise(function(n,a){let s="false",r=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes();const l=r.map(e=>e.options.grid.id);r.length>1&&(s="true");let d=[];d.push(p.createPropertyPushItem(l)),d.push(o.getRelationalExplorerMenu(e,t));let u={objectId:t.cellInfos.nodeModel.options.grid.id,objectType:t.cellInfos.nodeModel.options.grid.type,displayName:t.cellInfos.nodeModel.options.grid.name,displayType:t.cellInfos.nodeModel.options.grid.displayType,facetName:"dependency"};[].push(u);let g=f("DS/ENOChgServices/scripts/services/ChgDataService"),m=null,C=f("DS/ENOChgServices/scripts/services/ChgIDCardCommonServices").openWith(u),v=[],D=document.getElementById("outer-co-div");v.push(C),"false"==s&&(m=g.getChangeActionUserAccess(t.cellInfos.nodeModel.options.grid.id),v.push(m)),Promise.all(v).then(function(a){if(a[0]&&d.push(a[0]),d.push(o.getMaturityMenu(t)),d.push(h.getCopyLink(r)),"false"==s?(a[1]&&"true"==a[1].data[0].Transfer&&d.push(o.getTransferMenu(e,t)),"true"==a[1].data[0].Delete&&d.push(o.getDeleteMenu(e,t,D))):(d.push(o.getTransferMenu(e,t)),d.push(o.getDeleteMenu(e,t,D))),"true"==c.getGlobalVariable().CHG_APPROVAL_COLUMN&&i.length>0)for(let e=0;e<i[0].length;e++)d.push(i[0][e]);n(d)})})},createMembersNewTab:function(t){const i="true"===c.getGlobalVariable().ECM_EnableAddMemberGenericComponent;let n=e.createElement("div");return n.classList.add("chg-member-container"),t.target=n,i?v.createMembersNewTab(t):a.createMembersView(t),n},createProposedChangeTab:function(t){let i=e.createElement("div");return i.classList.add("chg-proposed-container"),t.target=i,s.createProposedChangesView(t),i},createRealizedChangeTab:function(t){let i={};i=e.merge(i,t);let n=e.createElement("div");n.classList.add("chg-realized-container"),i.target=n;let o=m.getUserPreference(C.keys.viewKeys.REALIZED_DEF_VIEW);return i.cmd&&"LTV"===i.cmd||o&&"LTV"===o?r.createRealizedChangesView(i):new D(i).createRealizedChangesView(),n},createApprovalsTab:function(t,i){let n=e.createElement("div"),o=new e.Element("div"),a=e.createElement("div");a.classList.add("chg-Approval-container"),o.classList.add("chg-Approval-Header-container");let s=e.createElement("div",{id:"chg-Task-container"});return n.appendChild(a),t.target=a,t.targetHeader=o,t.taskContainer=s,l.createApprovalsView(t),a},createCustomColumn:function(e){let t=this;return new Promise(function(e,i){let n=c.getGlobalVariable().changeActionSubTypes;u.getCombinedClassList(n).then(function(i){u.getPropertyForClassGrid(i).then(function(i){let n=u.makeCombinedColumnList(i),o=t.filterColumn(n);e(o)})})})},filterColumn:function(e){console.log("filterColumn...............");let t=this,i=[],n=["ds6w:label","ds6w:severity","ds6w:status","ds6w:type","ds6w:identifier","ds6w:responsible","ds6w:project","ds6w:organizationResponsible","ds6w:modified","ds6w:created"];for(let t of n)e.delete(t);return e.forEach((e,n,o)=>{let a=t.createColumnDefination(e,n);i.push(a)}),i},createColumnDefination:function(e,t){e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");let i=e.dataType.replace("http://www.w3.org/2001/XMLSchema#","");return{text:e.vocabColumnsNameNLS,dataIndex:t,editableFlag:!1,allowUnsafeHTMLContent:!1,visibleFlag:!1,dataType:i,range:e.range,getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:g.getGetCellValueFunction(i,t)}}}}),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewFeaturesUtil",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","require","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridCol"],function(e,t,i,n,o,a){"use strict";var s={showRMBMenuOnGrid:function(e,t){var i=this,r=e.objectType;return new Promise(function(e,l){var d="false",c={},u=t.cellInfos.nodeModel.getTreeDocument().getSelectedNodes(),p=u[0].options.grid.roles;c.currentObjType=u[0].options.grid.type;var g=0;u.length>1&&(d="true"),p.indexOf("Coordinator")>=0?(c.Coordinator="DISCONNECT",g++):c.Coordinator="CONNECT",p.indexOf("contributor")>=0?(c.contributor="DISCONNECT",g++):c.contributor="CONNECT",p.indexOf("approver")>=0?(c.approver="DISCONNECT",g++):c.approver="CONNECT",p.indexOf("follower")>=0?(c.follower="DISCONNECT",g++):c.follower="CONNECT";let h=p.indexOf("owner")>=0;0==h&&1==g&&(c.showConfirmation=!0);let m="";"false"==d&&(m=o("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"));let C=[];var f=t.cellInfos.nodeModel.options.grid.id,v=t.cellInfos.nodeModel.options.grid.type,D=t.cellInfos.nodeModel.options.grid.name,b=t.cellInfos.nodeModel.options.grid.displayType;"Group"==v&&(v="foaf:Group",D=t.cellInfos.nodeModel.options.grid.fullName,b=t.cellInfos.nodeModel.options.grid.type);var w={objectId:f,objectType:v,displayName:D,displayType:b,facetName:"dependency"};[].push(w);var S=[n.openWith(w)];Promise.all(S).then(function(n){if("Person"==c.currentObjType){(1!=a.isChangeCoordinatorConnected||1==a.isChangeCoordinatorConnected&&"DISCONNECT"==c.Coordinator)&&C.push(s.getChangeCoordinatorMenu(i,t,c)),"true"==m.addContributorAccessBit&&C.push(s.getContributorMenu(i,t,c));let e=m.membersDataGridModel.treeDocument.getChildren();m.isRouteTempleteAttached=!1;for(var o=0;o<e.length;o++){"Route Template"==e[o].options.grid.type&&(m.isRouteTempleteAttached=!0)}"InvestigationRequest"!=r&&(m.isRouteTempleteAttached||"true"!=m.addReviewerAccessBit||C.push(s.getReviewerMenu(i,t,c))),"true"==m.addFollowerAccessBit&&C.push(s.getFollowerMenu(i,t,c))}else"Group"==c.currentObjType&&("true"==m.addContributorAccessBit&&C.push(s.getContributorMenu(i,t,c)),"true"==m.addFollowerAccessBit&&C.push(s.getFollowerMenu(i,t,c)));"true"==m.addFollowerAccessBit&&0==h&&C.push(s.getDeleteMenu(i,t,c)),n[0]&&C.push(n[0]),e(C)}).catch(function(e){l(e)})})},getContributorMenu:function(t,i,n){var a={type:"CheckItem",title:e.CHG_Member_Menu_Assignees,action:{callback:function(){var e=o("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout");console.log("contributor : "+n.contributor),n.role="contributor",e.updatePersonRole(i.cellInfos,n)}}};return"DISCONNECT"==n.contributor&&(a.state="selected"),a},getReviewerMenu:function(t,i,n){var a={type:"CheckItem",title:e.CHG_Member_Menu_Approvers,action:{callback:function(){var e=o("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout");console.log("approver : "+n.approver),n.role="approver",e.updatePersonRole(i.cellInfos,n)}}};return"DISCONNECT"==n.approver&&(a.state="selected"),a},getFollowerMenu:function(t,i,n){var o={type:"CheckItem",title:e.CHG_Member_Menu_Follower,action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],function(e){console.log("follower : "+n.follower),n.role="follower",e.updatePersonRole(i.cellInfos,n)})}}};return"DISCONNECT"==n.follower&&(o.state="selected"),o},getDeleteMenu:function(t,i,n){return{type:"PushItem",title:e.CHG_Member_Menu_Remove,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-remove"},action:{callback:function(){require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],function(e){console.log("remove "),n.role=[],"DISCONNECT"==n.follower&&n.role.push("follower"),"DISCONNECT"==n.approver&&n.role.push("approver"),"DISCONNECT"==n.contributor&&n.role.push("contributor"),n.showConfirmation=!0,e.updatePersonRole(i.cellInfos,n)})}}}},getChangeCoordinatorMenu:function(t,i,n){var o={type:"CheckItem",title:e.CHG_Member_Menu_Change_Coordinator,action:{callback:function(){console.log("Callback is executed!");require(["DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout"],function(e){console.log("Coordinator: "+n.Coordinator),n.role="Coordinator",e.updatePersonRole(i.cellInfos,n),console.log("updatePersonRole called")})}}};return"DISCONNECT"==n.Coordinator&&(o.state="selected",console.log('Menu state set to "selected"')),console.log("Menu state:",o.state),o}};return s}),define("DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridViewToolbar",["i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridView"],function(e,t,i){var n=Object.create(null);return n.toolbar=null,n.viewData={menu:[{type:"CheckItem",title:e.CHG_TOOLTIP_GRID_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-list"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersDataGridLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_GRID_VIEW},{type:"CheckItem",title:e.CHG_TOOLTIP_TILE_VIEW,fonticon:{family:1,content:"wux-ui-3ds wux-ui-3ds-view-small-tile"},action:{module:"DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/members/ChgCAMembersTileViewLayout",func:"changeView"},tooltip:e.CHG_TOOLTIP_TILE_VIEW}]},n.writetoolbarDefinition=function(t){const i=this.getAddMemberModule(t.isKindOfType);return{entries:[{id:"add",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"user-add",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_AddMember,position:"far",category:"addRemove",action:{module:i,func:"launchAddMemberPanel"}}},{id:"remove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},tooltip:e.CHG_Member_Toolbar_Remove,position:"far",category:"addRemove",action:{module:"DS/ENOChgGovernanceUX/scripts/components/membersViewNew/ChgMembersNewDataGridLayout",func:"removeHandler"}}}]}},n.getAddMemberModule=function(e){const i="true"===t.getGlobalVariable().ECM_EnableAddMemberGenericComponent;let n="";if("InvestigationRequest"===e)n="DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgIRAddMemberHandler";else if(i)switch(e){case"ChangeRequest":n="DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgIRAddMemberHandler";break;case"ChangeAction":n="DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCAAddMemberHandler";break;case"ChangeOrder":n="DS/ENOChgGovernanceUX/scripts/components/addMemberPanel/ChgCOAddMemberHandler"}return n},n}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgInvestigateRequestDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";return e.extend({init:function(e){this.options=e,this._parent(e),this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}},this._modelEvents=null,e&&e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.irDatagridView=""},loadCustomColumns:function(){let e=f.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){let t=this.processColumns(),g=this;var e={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCRSummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(g,e,g.options.isManagingCRPopup,g.options.postMaturityCallback).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){s.readyDragContent(e,t)},onDragStartCell:function(e,t){s.readyDragContent(e,t)}};e=UWA.merge(e,this.options),this.irDatagrid=new n(e),this.irDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){C.onCustomViewsSave(e,t,g.options.custom_view_options)},this.irTilesView=new p({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){s.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});let h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(g,e,g.options.isManagingCRPopup,g.options.postMaturityCallback).then(function(e){return e})}};this.irTilesView.onContextualEvent=h;let m={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:l.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:l.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},f={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}};try{new c}catch(e){console.log(e)}this.irDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(m),this.irDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),this.irDatagrid.setToolbar(a.writetoolbarDefination(this.options)),a.toolbar=this.irDatagrid.getToolbar(),this.irDatagrid.getToolbar().addEventListener("onReady",function(e){let t=g.irDatagrid.getToolbar().getNodeModelByID("addNewBlankCAId");t&&t._associatedView.registerkeyDownCallback(u.createBlankChangeOrder)}),this.irDatagrid.addEventListener("allCellsRendered",function(){g.irDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.irDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.irDatagrid.getTreeDocument().getSelectedNodes().length}}]),g.irTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.irTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.irTilesView.getTreeDocument().getSelectedNodes().length}}])}),g.irDatagrid.addEventListener(i.POINTERHIT,function(e,t){g.onItemClick(e,t)}),g.irDatagrid.getTreeDocument().getXSO().onAdd(function(e){g.irDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.irDatagrid.getTreeDocument().getSelectedNodes().length}}),g.irTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.irDatagrid.getTreeDocument().getSelectedNodes().length}}),g._modelEvents.publish({event:"ir-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})}),g.irDatagrid.getTreeDocument().getXSO().onRemove(function(e){g.irDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.irTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?g._modelEvents.publish({event:"ir-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):g._modelEvents.publish({event:"ir-DataGrid-on-unselect",data:{model:e,context:e},context:e})}),g.irTilesView.addEventListener(i.POINTERHIT,function(e,t){g.onItemClick(e,t)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount)t.nodeModel.select(!0),g._modelEvents.publish({event:"ir-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel});else if(t&&2==t.columnID){var i={};i.cellInfos=t,C.executeMaturity(i)}},this.irDatagridView=UWA.createElement("div",{id:"outer-cr-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-cr-div"});let v=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-cr-div"});this.irDatagrid.getToolbar().getContent().inject(v);let D=UWA.createElement("div",{class:"content-cr-div crgridView showView"}),b=UWA.createElement("div",{class:"crtileView hideView"}),w=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_DataGrid_PlaceHolder_NoInvestigationRequest}).inject(w),this.irDatagrid.inject(D),this.irTilesView.inject(b),w.inject(b),this.irDatagridView.addContent(v),this.irDatagridView.addContent(D),this.irDatagridView.addContent(b),this.irDatagridView.inject(this.options.target),this.irDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.subscribe({event:"ir-DataGrid-on-search"},function(e){var t=e.query;t&&g.irDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(t.toLowerCase())||e.options.grid.name.contains(t.toLowerCase())||e.options.grid.title.contains(t.toUpperCase())||e.options.grid.name.contains(t.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(t.toLowerCase())||e.options.grid.name.contains(t.toLowerCase())||e.options.grid.title.contains(t.toUpperCase())||e.options.grid.name.contains(t.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"ir-DataGrid-on-reset-search"},function(e){g.irDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.options.custom_view_options.dgvHandle=this.irDatagrid,this.options.custom_view_options.ootb_columns=[...t],this.options.custom_view_options.dgvDiv=D,this.loader=(new o).inject(this.options.target);let S=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];C.registerCustomEventsOnDGV(S,this.irDatagrid,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.irDatagrid.reapplySortModel()},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgChangeActionDataGridView",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/Core/PointerEvents","DS/DataGridView/DataGridView","DS/Controls/Loader","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgServices/scripts/services/ChgInfraService","DS/CollectionView/CollectionViewStatusBar","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/CollectionView/ResponsiveTilesCollectionView","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOCustomAttributeUtils/scripts/CustomAttributeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v){"use strict";return e.extend({init:function(e){this._parent(e),this.options=e,this.options.custom_view_options={dgvHandle:null,ootb_columns:[],dgvDiv:null,settings:{url:h.getGlobalVariable().get3DSpaceURL(),securityContext:h.getGlobalVariable().getSecurityContext(),isNative:h.getGlobalVariable().isNative}},this._modelEvents=null,"undefined"!=e&&"undefined"!=e.modelEvents?this._modelEvents=e.modelEvents:this._modelEvents=new t,this.caDatagridView=""},loadCustomColumns:function(){let e=f.getUserPreference(this.options.custom_view_options.dgvHandle.identifier);if(e){let t=JSON.parse(e);t&&v.restoreCustomViews(t,this.options.custom_view_options)}},render:function(){if("undefined"!=this.options.target&&null!=this.options.target){let t=this.processColumns(),g=this;var e={treeDocument:this.options.treeDocument,columns:t,cellSelection:"none",rowSelection:"multiple",cellDragEnabledFlag:!0,showNodeKPIColorFlag:!0,placeholder:"",identifier:"chgCASummaryGrid",defaultColumnDef:{width:"auto",resizableFlag:!0,sortableFlag:!0},onContextualEvent:function(e){let t=[];if(e&&e.collectionView&&e.cellInfos){if(e.cellInfos.rowID>-1)return d.showRMBMenuOnGrid(g,e).then(function(e){return e});e.collectionView.columns.length,e.cellInfos.columnID;t=e.collectionView.buildDefaultContextualMenu(e,{pin:!1,firstColumnsVisibility:!0,columnsManagement:!1,sizeColumnToFit:!1})}return t},filterBaseCAId:"All My Active Changes",onDragStartRowHeader:function(e,t){s.readyDragContent(e,t)},onDragStartCell:function(e,t){s.readyDragContent(e,t)}};e=UWA.merge(e,this.options),this.caDatagrid=new n(e),this.caDatagrid.getCustomViewsManager().onCustomViewsSave=function(e,t){C.onCustomViewsSave(e,t,g.options.custom_view_options)},this.caTilesView=new p({model:this.options.treeDocument,height:"inherit",displayedOptionalCellProperties:["contextualMenu","description","propertiesList","activeFlag","statusbarIcons"],allowUnsafeHTMLContent:!1,useDragAndDrop:!0,grid:{selectionBehavior:{toggle:!0,unselectAllOnEmptyArea:!0,canMultiSelect:!0,canInteractiveMultiselectWithCheckboxClick:!0}},onDragStartCell:function(e,t){s.readyDragContent(e,t)},onDragEnterBlankDefault:function(e){},onDragEnterBlank:function(e){}});let h={callback:function(e){if(e&&e.cellInfos&&e.cellInfos.cellModel)return d.showRMBMenuOnGrid(g,e).then(function(e){return e})}};this.caTilesView.onContextualEvent=h;let m={viewdropdown:{stdTemplate:"comboSelector",semantics:{possibleValues:[{value:l.CHG_VIEW_LIST,icon:{iconName:"view-list",fontIconFamily:1}},{value:l.CHG_VIEW_TILE,icon:{iconName:"view-small-tile",fontIconFamily:1}}]}}},f={sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}},v={expandInput:{stdTemplate:"expandInputtemplate"}},D={expandInputtemplate:{path:"DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovTweakerExpandInput",options:{displayStyle:"TextBox"}}};try{new c}catch(e){console.log(e)}this.caDatagrid.getTypeRepresentationFactory().registerTypeTemplates(D),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(v),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(m),this.caDatagrid.getTypeRepresentationFactory().registerTypeRepresentations(f),a.toolbar=this.caDatagrid.setToolbar(a.writetoolbarDefination(this.options)),this.toolbar=a.toolbar,this.toolbar.typeRepresentationFactory.registerTypeTemplates(D),this.toolbar.typeRepresentationFactory.registerTypeRepresentations(v),g.toolbar.addEventListener("onReady",function(e){let t=g.toolbar.getNodeModelByID("addNewBlankCAId");t&&t._associatedView.registerkeyDownCallback(u.createBlankChangeOrder)}),this.caDatagrid.addEventListener("allCellsRendered",function(){g.caDatagrid.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.caDatagrid.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedGridCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.caDatagrid.getTreeDocument().getSelectedNodes().length}}]),g.caTilesView.buildStatusBar([{type:r.STATUS.CUSTOM,id:"totalItems",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_TotalItems+g.caTilesView.getTreeDocument().getAllDescendants().length}},{type:r.STATUS.CUSTOM,id:"selectedTileCount",dataElements:{typeRepresentation:"string",value:l.CHG_GOV_StatusBar_SelectedItems+g.caTilesView.getTreeDocument().getSelectedNodes().length}}])}),g.caDatagrid.addEventListener(i.POINTERHIT,function(e,t){g.onItemClick(e,t)}),g.caDatagrid.getTreeDocument().getXSO().onAdd(function(e){g.duplicateCmdController(e),g.caDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.caDatagrid.getTreeDocument().getSelectedNodes().length}}),g.caTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+g.caDatagrid.getTreeDocument().getSelectedNodes().length}}),g._modelEvents.publish({event:"ca-DataGrid-on-click",data:{model:e.options.grid,context:e},context:e})}),g.caDatagrid.getTreeDocument().getXSO().onRemove(function(e){g.duplicateCmdController(e),g.caDatagrid.elements.statusBar.getNodeModelByID("selectedGridCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),g.caTilesView.elements.statusBar.getNodeModelByID("selectedTileCount").updateOptions({grid:{data:l.CHG_GOV_StatusBar_SelectedItems+e.getTreeDocument().getSelectedNodes().length}}),0==e.getTreeDocument().getSelectedNodes().length?g._modelEvents.publish({event:"ca-DataGrid-on-unselect-all",data:{model:e.options.grid,context:e,type:e.options.grid.isKindOfType,load:!1},context:e}):g._modelEvents.publish({event:"ca-DataGrid-on-unselect",data:{model:e,context:e},context:e})}),g.caTilesView.addEventListener(i.POINTERHIT,function(e,t){g.onItemClick(e,t)}),this.onItemClick=function(e,t){if(t&&t.nodeModel&&t.nodeModel.options.grid)if(2==e.multipleHitCount)t.nodeModel.select(!0),g._modelEvents.publish({event:"ca-DataGrid-on-dblclick",data:{model:t.nodeModel.options.grid},context:t.nodeModel});else if(t&&2==t.columnID){var i={};i.cellInfos=t,C.executeMaturity(i)}},this.caDatagridView=UWA.createElement("div",{id:"outer-ca-div",styles:{width:"100%",height:"100%",display:"inline-block"},class:"outer-ca-div"});let b=UWA.createElement("div",{styles:{width:"100%"},class:"toolbar-ca-div"});this.toolbar.inject(b);let w=UWA.createElement("div",{class:"content-ca-div cagridView showView"}),S=UWA.createElement("div",{class:"catileView hideView"}),I=UWA.createElement("div",{class:"hideView",id:"emptyTileViewDiv"});UWA.createElement("div",{html:l.CHG_GOV_DataGrid_PlaceHolder_NoChgAction}).inject(I),this.caDatagrid.inject(w),this.caTilesView.inject(S),I.inject(S),this.caDatagridView.addContent(b),this.caDatagridView.addContent(w),this.caDatagridView.addContent(S),this.caDatagridView.inject(this.options.target),this.caDatagridView.setStyle("width",this.options.target.offsetWidth),this._modelEvents.subscribe({event:"ca-DataGrid-on-search"},function(e){var t=e.query;t&&g.caDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){!e.isVisible()||e.options.grid.title.contains(t.toLowerCase())||e.options.grid.name.contains(t.toLowerCase())||e.options.grid.title.contains(t.toUpperCase())||e.options.grid.name.contains(t.toUpperCase())?!e.isVisible()&&(e.options.grid.title.contains(t.toLowerCase())||e.options.grid.name.contains(t.toLowerCase())||e.options.grid.title.contains(t.toUpperCase())||e.options.grid.name.contains(t.toUpperCase()))&&e.show():e.hide()})}),this._modelEvents.subscribe({event:"ca-DataGrid-on-reset-search"},function(e){g.caDatagrid.getTreeDocument().getAllDescendants().forEach(function(e){e.isVisible()||e.show()})}),this.options.custom_view_options.dgvHandle=this.caDatagrid,this.options.custom_view_options.ootb_columns=[...t],this.options.custom_view_options.dgvDiv=w,this.loader=(new o).inject(this.options.target);let _=["sortModelChange","columnOrderChange","columnWidthChange","columnVisibleStateChange"];C.registerCustomEventsOnDGV(_,this.caDatagrid,this.options.custom_view_options)}},processColumns:function(){return this.options.columns},reapplySortModel:function(){this.caDatagrid.reapplySortModel()},duplicateCmdController:function(e){let t=this,i=e.getTreeDocument();i.getSelectedNodes()&&1===i.getSelectedNodes().length&&"Cancelled"!=i.getSelectedNodes()[0].options.grid.maturity?t.toolbar.updateNodeModel("duplicateCA",{disabled:!1}):t.toolbar.updateNodeModel("duplicateCA",{disabled:!0})},setListnersOnToolbar:function(){widget.onRefresh=function(){},widget.onResize=function(){}}})}),define("DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgInvestigateRequestDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/ChgCRDataGridModel","DS/ENOChgGovernanceUX/scripts/model/investigationRequest/ChgIRDataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridViewToolbar","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridViewToolbar","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRTileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgServices/scripts/services/ChgErrors"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y,E){"use strict";let O={loadRealTimeIRDataPromise:function(e){return new Promise(function(t,i){a.getTimestamp().then(function(n){var o=s.processTimestampData(n);a.getConfiguredInvestigationRequestList({indexed:!1,simplifiedJSON:!0,timestamp:o,filter:e}).then(function(e){s.processedIRSummaryList(e).then(function(i){t({realTimeData:e,processedIRList:i})})},function(e){i(e)})},function(e){i(e)})})},loadIndexedIRDataPromise:function(e){return new Promise(function(t,i){a.getConfiguredInvestigationRequestList(e).then(function(e){s.processedIRSummaryList(e).then(function(i){t({IRSummaryList:e,processedIRList:i})},function(e){i(e)})},function(e){i(e)})})},postProcessing:function(){0==this.treeDocument.getChildren().length?this.treeDocument._modelEvents.publish({event:"irSummaryEmpty"}):this.treeDocument._modelEvents.publish({event:"irSummaryNotEmpty"}),_.hideLoader(this.options.target,this.irGridView.loader)},createInvestigationRequestView:function(t){t.target.setStyles({position:"relative"});var n={};n=UWA.merge(n,t),this.options=n,n.columns=i.getColumns(),this.ChgIRDataGridModel=new o,this.treeDocument=n.treeDocument=this.ChgIRDataGridModel.createTreeDocument(),this.ChgIRlayoutModel=this.treeDocument,this.ChgIRDataGridModel.registerCustomFilter();var a=s.getDefaultFilter(n.columns);n.treeDocument.setFilterModel(a),this.irGridView=new e(n),this.irGridView.render(),_.showLoader(n.target,this.irGridView.loader),this.subscribeToModelEvents(this.treeDocument);this.updateGrid("")},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.irGridView.irDatagrid.placeholder=v.CHG_GOV_DataGrid_PlaceHolder_FetchInvestigationRequest},updateGrid:async function(e){var t=this;if(t.preUpdateProcessing(),"inactiveCR"!=e){var i=await t.loadRealTimeIRDataPromise(e);_.fetchMaturityStateCSS(i.processedIRList),t.ChgIRDataGridModel.loadInvestigationRequestData(t.treeDocument,i.processedIRList)}t.params.filter=e,t.loadIndexedIRDataPromise(t.params).then(async function(e){_.fetchMaturityStateCSS(e.IRSummaryList.data),t.ChgIRDataGridModel.loadIndexedInvestigationRequest(t.treeDocument,e.processedIRList),t.currentPage=parseInt(e.IRSummaryList.summary["Current Page"]),t.totalPages=parseInt(e.IRSummaryList.summary["Total Pages"]),t.irGridView.irDatagrid.placeholder=v.CHG_GOV_DataGrid_PlaceHolder_NoInvestigationRequest,t.currentPage<t.totalPages?(t.irGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.irGridView.irDatagrid.onInfiniteScroll(async function(e){t.getNextPageChangeRequests("DGV")}),t.irGridView.irTilesView.onInfiniteScroll(async function(e){t.getNextPageChangeRequests("RTV")})):(t.irGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())})},changeView:function(){i.changeView("GridView")},removeDataFromGrid:function(e,t){O.ChgIRlayoutModel.getChildren();for(let t=0;t<e.length;t++){let i=e[t];O.ChgIRlayoutModel.search({shouldStop:function(e){return e.options.grid.id===i&&(O.removingNode(e),!0)}}),0==O.ChgIRlayoutModel.getChildren().length&&O.ChgIRlayoutModel._modelEvents.publish({event:"irSummaryEmpty"})}},removingNode:function(e){this.ChgIRlayoutModel.removeRoot(e)},loadingViewPreference:function(){let e=S("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=d.MOBILE_CUTOFF){let t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(u.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{let t=e.getCASummaryViewDesktop();void 0===t||"GridView"===t?this.changeView():u.changeView()}},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"irSummaryEmpty"},function(e){u.showEmptyView()}),e._modelEvents.subscribe({event:"irSummaryNotEmpty"},function(e){u.hideEmptyView()}),D.unsubscribe(`${e.options.id}:${widget.id}`),D.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.treeDocument),e._cleanBIFilterProxy();let t={data:{roots:that.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,that.treeDocument)})}),D.unsubscribe(`${e.options.id} of ${widget.id}`),D.subscribe(`${e.options.id} of ${widget.id}`,function(e){}),D.unsubscribe(`${e.options.id} colorize ${widget.id}`),D.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){}),D.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),D.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){})}};return O}),define("DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout",["UWA/Class","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgChangeActionDataGridView","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/model/changeAction/ChgCADataGridModel","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridViewToolbar","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCATileViewLayout","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/Controls/ProgressBar","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/RouteWebAppUX/scripts/RouteWebAppApprovalStatusUX","DS/UIKIT/Mask","DS/ENOChgServices/scripts/services/ChgErrors","require","DS/ENOChgServices/scripts/services/ChgCustomAttributeService","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_){"use strict";let y={loadRealTimeCADataPromise:function(e){return new Promise(function(t,i){o.getTimestamp().then(function(n){var s=a.processTimestampData(n);o.getConfiguredChangeActionList({indexed:!1,simplifiedJSON:!0,timestamp:s,filter:e}).then(function(e){a.processedCASummaryList(e,y.extns).then(function(i){t({realTimeData:e,processedCAList:i})})},function(e){i(e)})},function(e){i(e)})})},loadIndexedCADataPromise:function(e){return new Promise(function(t,i){o.getConfiguredChangeActionList(e).then(function(e){a.processedCASummaryList(e,y.extns).then(function(i){t({CASummaryList:e,processedCAList:i})},function(e){i(e)})},function(e){i(e)})})},postProcessing:function(){0==this.treeDocument.getChildren().length?this.treeDocument._modelEvents.publish({event:"caSummaryEmpty"}):this.treeDocument._modelEvents.publish({event:"caSummaryNotEmpty"}),this.globalSubscribeCOSummaryUpdateFromPropertyPanel(),this.globalSubscribeForTransferFromCOSummaryView(),this.globalSubscribeForCAGroupCreation(),this.globalSubscribeForMaturityUpdate(),this.caGridView.loadCustomColumns(),I.hideLoader(this.options.target,this.caGridView.loader)},updateTagger:function(){var e=this;u.getGlobalVariable().isNative||"false"!=u.getGlobalVariable().slidePanelTagger||require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(t){t._initializationPromiseBIFilter||t.initializeBIFilter(e.treeDocument),t._cleanBIFilterProxy();let i={data:{roots:e.treeDocument.getAllDescendants()}};t.cleanPathTag(),t._onSetPathTags(i,e.treeDocument)})},createChangeActionView:async function(e){e.target.setStyles({position:"relative"}),this._pathChangeActionSummary=[g._KEY,g._VIEWS_PREFERENCES,g._LIST_VIEW,g._FILTERVIEW];var o=p.getFilter(this._pathChangeActionSummary),s={};s=UWA.merge(s,e),this.options=s,y.extns=await S.getExtensions("Change Action"),s.columns=i.getColumns(),this.ChgCADataGridModel=new n,this.treeDocument=s.treeDocument=this.ChgCADataGridModel.createTreeDocument(),this.ChgCAlayoutModel=this.treeDocument,this.ChgCADataGridModel.registerCustomFilter();var r=a.getDefaultFilter(s.columns);s.treeDocument.setFilterModel(r),this.caGridView=new t(s),this.caGridView.render(),I.showLoader(s.target,this.caGridView.loader),this.subscribeToModelEvents(this.treeDocument);var l="";"inactive"===o?l="inactiveCA":(l="activeCA",p.updateFilter(this._pathChangeActionSummary,"activeCA")),this.updateGrid(l)},changeView:function(){i.changeView("GridView")},refreshLayout:function(e){let t=this.ChgCAlayoutModel;this.ChgCADataGridModel.updateNodeIndexed(t,e),this.caGridView.caDatagrid.ensureNodeModelVisible(this.ChgCAlayoutModel.getChildren()[0],!1)},preUpdateProcessing:function(){this.treeDocument&&this.treeDocument.empty(),this.params={},this.params.simplifiedJSON=!0,this.params.pageNumber=1,this.params.pageSize=1e3,this.params.indexed=!0,this.currentPage=0,this.totalPages=0,this.caGridView.caDatagrid.placeholder=f.CHG_GOV_DataGrid_PlaceHolder_FetchChgAction,this.updateTagger()},updateGrid:async function(e){var t=this;if(t.preUpdateProcessing(),"inactiveCA"!=e){var i=await t.loadRealTimeCADataPromise(e);I.fetchMaturityStateCSS(i.processedCAList),t.ChgCADataGridModel.loadChangeActionData(t.treeDocument,i.processedCAList)}t.params.filter=e,t.loadIndexedCADataPromise(t.params).then(async function(e){I.fetchMaturityStateCSS(e.processedCAList),t.ChgCADataGridModel.loadIndexedChangeActions(t.treeDocument,e.processedCAList),t.currentPage=parseInt(e.CASummaryList.summary["Current Page"]),t.totalPages=parseInt(e.CASummaryList.summary["Total Pages"]),t.caGridView.caDatagrid.placeholder=f.CHG_GOV_DataGrid_PlaceHolder_NoChgAction,t.currentPage<t.totalPages?(t.updateTagger(),t.caGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing(),t.caGridView.caDatagrid.onInfiniteScroll(async function(e){t.getNextPageChangeActions("DGV")}),t.caGridView.caTilesView.onInfiniteScroll(async function(e){t.getNextPageChangeActions("RTV")})):(t.updateTagger(),t.caGridView.setListnersOnToolbar(),t.loadingViewPreference(),t.postProcessing())})},getNextPageChangeActions:async function(e){if(this.currentPage<this.totalPages){I.showLoader(this.options.target,this.caGridView.loader),this.params.pageNumber++,this.currentPage++;let t=await this.loadIndexedCADataPromise(this.params);this.ChgCADataGridModel.loadIndexedChangeActions(this.treeDocument,t.processedCAList),this.updateTagger(),this.caGridView.setListnersOnToolbar(),this.loadingViewPreference(),this.postProcessing(),"DGV"===e?this.caGridView.caDatagrid.infiniteScrollProcessDone():this.caGridView.caTilesView.infiniteScrollProcessDone()}},removeDataFromGrid:function(e,t){y.ChgCAlayoutModel.getChildren();for(let t=0;t<e.length;t++){let i=e[t];y.ChgCAlayoutModel.search({shouldStop:function(e){return e.options.grid.id===i&&(y.removingNode(e),!0)}}),0==y.ChgCAlayoutModel.getChildren().length&&y.ChgCAlayoutModel._modelEvents.publish({event:"caSummaryEmpty"})}},removingNode:function(e){this.ChgCAlayoutModel.removeRoot(e)},sortBySeverity:function(){s.sortingData.menu[1].fonticon.content=s.sortingData.menu[1].fonticon.content.replace(" icon-blue","");let e=y.caGridView,t=s.toolbar.getNodeModelByID("sorting");s.sortingData.menu[0].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(s.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.caDatagrid.sortModel=[{dataIndex:"severityNLS",sort:"asc"}]):(s.sortingData.menu[0].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.caDatagrid.sortModel=[{dataIndex:"severityNLS",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:s.sortingData}})},sortByMaturity:function(){s.sortingData.menu[0].fonticon.content=s.sortingData.menu[0].fonticon.content.replace(" icon-blue","");let e=y.caGridView,t=s.toolbar.getNodeModelByID("sorting");s.sortingData.menu[1].fonticon.content.contains("wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z")?(s.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-z-a icon-blue",e.caDatagrid.sortModel=[{dataIndex:"maturityWithBadge",sort:"asc"}]):(s.sortingData.menu[1].fonticon.content="wux-ui-3ds wux-ui-3ds-alpha-sorting-a-z icon-blue",e.caDatagrid.sortModel=[{dataIndex:"maturityWithBadge",sort:"desc"}]),e.reapplySortModel(),t.updateOptions({grid:{data:s.sortingData}})},globalSubscribeCOSummaryUpdateFromPropertyPanel:function(){d.addObserver("ChgCADataGridLayout","CO-Properties-Update",this.handleForUpdatingFromPropertyPanel)},globalSubscribeForTransferFromCOSummaryView:function(){d.addObserver("ChgCADataGridLayout","ENOLC_MOVE_CMD_UPDATE",this.handleForCOSummaryTransfer)},globalSubscribeForCAGroupCreation:function(){d.addObserver("ChgCADataGridLayout","CA-Group-Update",this.handleForUpdatingGroup)},globalSubscribeForMaturityUpdate:function(){d.addObserver("ChgCADataGridLayout","Lifecycle.Modification",this.handleForMaturityUpdate)},handleForUpdatingGroup:function(e){for(var t=y.ChgCAlayoutModel.getAllDescendants(),i=0;i<e.changeactions.length;i++)for(var n=e.changeactions[i].replace("pid:",""),o=0;o<t.length;o++)if(t[o].options.grid.id==n){var a=y.createCustoTooltipForGivenNode(t[o],e);t[o].updateOptions({grid:{"ds6w:changeActionGroup":e.title},customTooltip:a})}var s=document.getElementById("outer-ca-div");s&&D.unmask(s)},createDescForGivenNode:function(e,t){var i="",n="-";null!=e.options.grid.dueDate&&null!=e.options.grid.dueDate&&(n=e.options.grid.dueDate);i=e.options.grid.maturity;return"-"!=n&&(i=i+" | "+n),""!=t.title&&(i=i+" | "+t.title),i},createCustoTooltipForGivenNode:function(e,t){var i="-";null!=e.options.grid.dueDate&&null!=e.options.grid.dueDate&&(i=e.options.grid.dueDate);var n=f.CHG_GOV_DataGrid_Column_Title+": "+e.options.grid.title+"\n"+f.CHG_GOV_DataGrid_Column_Name+": "+e.options.grid.name+"\n"+f.CHG_GOV_DataGrid_Column_Severity+": "+e.options.grid.severity+"\n"+f.CHG_GOV_DataGrid_Column_Owner+": "+e.options.grid.owner+"\n"+f.CHG_GOV_DataGrid_Column_Maturity+": "+e.options.grid.maturity;return"-"!=i&&(n=n+"\n"+f.CHG_GOV_DataGrid_Column_DueDate+": "+i),""!=t.title&&(n=n+"\n"+f.CHG_GOV_DataGrid_Column_Group+": "+t.title),n},handleForUpdatingFromPropertyPanel:function(e){let t=y.ChgCAlayoutModel;t&&_.handlePropertiesOnUpdate(t,e)},handleForCOSummaryTransfer:function(e){let t,o=y.ChgCAlayoutModel.getAllDescendants(),a=[],s="",r="";Object.keys(e.data.attributes).forEach(function(t){let i={};i.id=e.data.attributes[t],i.newCollabSpace=i.id.newCollabSpace,i.newOrganization=i.id.newOrganization,i.newOwnerFullName=i.id.newOwnerFullName,i.newOwnerId=i.id.newOwnerId,a.push(i.id)});for(let e=0;e<a.length;e++){t=a[e];for(let e=0;e<o.length;e++){if(o[e].options.grid.id==t.id){if(t.newOwnerId&&t.newOwnerFullName&&(r=o[e].options.grid.name,s=t.newOwnerId,o[e].options.grid.owner=s,o[e].options.grid.ownerFullName=t.newOwnerFullName),t.newOrganization){let i=t.newOrganization;o[e].options.grid.orgnaizationNLS=i}if(t.newCollabSpace){let i=t.newCollabSpace;o[e].options.grid.collabspaceNLS=i}let a=t.newOwnerFullName,u=i.createCustomOwner(s,a);var l={};l.name=r,l.title=o[e].options.grid.title,l.severity=o[e].options.grid.severity,l.severityNLS=o[e].options.grid.severityNLS,l.ownerFullName=a,l.maturityNLS=o[e].options.grid.maturityNLS;var d=r+" | "+a,c=n.prototype.createCustomTooltip(l);o[e].updateOptions({grid:{collabspaceNLS:o[e].options.grid.collabspaceNLS,organizationNLS:o[e].options.grid.organizationNLS,owner:o[e].options.grid.owner,ownerFullName:o[e].options.grid.ownerFullName,co_Owner:u},customTooltip:c,subLabel:d})}}}},loadingViewPreference:function(){let e=w("DS/ENOChangeActionUX/scripts/CAPreferencesManager");if(widget.body.getDimensions().width<=r.MOBILE_CUTOFF){let t=e.getCASummaryViewMobile();void 0===t||"TileView"===t?(ChgCRTileViewLayout.changeView(),e.updateCASummaryViewMobile("TileView")):t&&"GridView"===t&&this.changeView()}else{let t=e.getCASummaryViewDesktop();void 0===t||"GridView"===t?this.changeView():l.changeView()}},filterView:function(e){i.filterView(e.filter),y.updateGrid(e.filter)},duplicateChangeAction:function(){var e={commandInfo:{type:"Change Action",facet:"My Change Actions",action:"CA>My Change Actions>Duplicate CA"}};w("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});var t=y.ChgCAlayoutModel.getSelectedNodes()[0].options.grid.id;o.duplicateChangeActionCA(t).then(function(e){if(y.params&&y.params.filter&&"activeCA"==y.params.filter){var t=e.data[0].id;y.loadRealTimeCADataPromise("activeCA").then(function(e){var i=[];if(e&&e.processedCAList){var n=e.processedCAList;for(let e=0;e<n.length;e++)if(n[e].id==t){i.push(n[e]);break}i.length>0&&y.ChgCADataGridModel.loadChangeActionData(y.ChgCADataGridModel.treeDocument,i,"true")}})}b.success(f.CHG_GOV_Change_Action_Duplicate_Message+e.data[1].id)})},subscribeToModelEvents:function(e){e._modelEvents.subscribe({event:"caSummaryEmpty"},function(e){l.showEmptyView(),y.caGridView.caDatagrid.placeholder=f.CHG_GOV_DataGrid_PlaceHolder_NoChgAction}),e._modelEvents.subscribe({event:"caSummaryNotEmpty"},function(e){l.hideEmptyView()}),m.subscribe(`${e.options.id}:${widget.id}`,function(){require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(that.treeDocument),e._cleanBIFilterProxy();let t={data:{roots:that.treeDocument.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,that.treeDocument)})}),m.subscribe(`${e.options.id} of ${widget.id}`,function(e){y.ChgCADataGridModel.filterView(e)}),m.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){y.ChgCADataGridModel.enableColorizeView(e)}),m.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){y.ChgCADataGridModel.disableColorizeView(e)}),widget.updateRouteContentToken&&m.unsubscribe(widget.updateRouteContentToken),m.unsubscribe("updateRouteContent-"+widget.id),m.subscribe("updateRouteContent-"+widget.id,function(e){if("true"==u.getGlobalVariable().CHG_APPROVAL_COLUMN){e="string"==typeof results?JSON.parse(e):e,e=v.getApprovalStatusValue(e);var t=y.ChgCADataGridModel.treeDocument.getSelectedNodes();for(const[i,n]of Object.entries(e))t.forEach(e=>{i!=e.options.grid.id||e.updateOptions({grid:{ApprovalStatus:n.approvalStatus,approvalStatusModel:n.approvalStatusModel,maturity:n.maturity,maturityNLS:n.maturity_NLS,maturityWithBadge:n.maturity_NLS}})})}})},assignGroupToCAs:function(){var e=y.ChgCAlayoutModel.getSelectedNodes(),t=[];if(e.length>0)if(y.CheckGroupCreateCondition(e)){for(var i=0;i<e.length;i++){var n="pid:"+e[i].options.grid.id;t.push(n)}var o=e[0].options.grid.groupId,a={facetName:"createGroupFromSummary",ChangeActionList:t,oldGroupId:o=""==o||null==o?"":o.indexOf("pid:")>-1?o:"pid:"+o,oldGroupTitle:e[0].options.grid.group};require(["DS/ENOChgGovernanceUX/scripts/util/changeAction/group/ChgChangeActionCreateGroup"],function(e){e.createGroup(a)})}else b.error(f.CHG_GROUP_MULTI_CREATE_WARN);else b.error(f.CHG_GROUP_CREATE_WARN)},CheckGroupCreateCondition:function(e){for(var t=!0,i=e[0].options.grid.groupId,n=1;n<e.length;n++){if(i!=e[n].options.grid.groupId){t=!1;break}}return t},handleForMaturityUpdate:function(e){if(e){let t=y.ChgCAlayoutModel.getSelectedNodes();I.getHandleForMaturityUpdate(JSON.parse(e),t)}}};return y}),define("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome",["DS/ENOChgServices/scripts/services/ChgNativeInitService","UWA/Core","DS/CoreEvents/ModelEvents","DS/ENOChgGovernanceUX/scripts/components/zApplicationFrame/ChgGovzApplicationFrame","DS/ENOChgGovernanceUX/scripts/components/welcomePanel/ChgGovWelcomePanelWrapper","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgActionGridUX/scripts/Config/ChgCAAppGlobalVariable","DS/PlatformAPI/PlatformAPI","DS/ENOChgGovernanceUX/scripts/view/ChgCODataGridLayout","DS/ENOChgGovernanceUX/scripts/config/ChgGovAppGlobalConfig","DS/ENOChgGovernanceUX/scripts/components/tab/ChgGovernanceTab","DS/ENOChgGovernanceUX/scripts/components/idCardHeader/util/ChgIDCardHeaderAdaptor","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgGovPropertiesPanel","DS/ENOChgGovernanceUX/scripts/util/ChgChangeOrderHomeUtil","DS/ENOChgGovernanceUX/scripts/view/facets/changeOrchestration/ChgOrchestrationDataGridLayout","DS/ENOChgGovernanceUX/scripts/view/facets/members/ChgMembersDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/ChgIDCardHeaderEventsUtility","DS/ENOChgRouter5/scripts/ChgRouter","DS/ENOChgGovernanceUX/scripts/router/ChgGovRouterConfig","DS/ENOChgGovernanceUX/scripts/util/ChgGovApplicationPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgGovernanceUX/scripts/view/recents/recentlyOpened/ChgRecentlyOpenedView","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/util/ChgGovInit","DS/ENOChgGovernanceUX/scripts/view/facets/approvals/ChgGovApprovalsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCreateChangeRequest","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgCreateInvestigationRequest","DS/ENOChgGovernanceUX/scripts/view/changeRequest/ChgCRDataGridLayout","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestUtil","DS/ENOChgGovernanceUX/scripts/util/changeRequest/ChgChangeRequestFeaturesUtil","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCreateChangeAction","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionUtil","DS/ENOChgGovernanceUX/scripts/util/changeAction/ChgChangeActionFeaturesUtil","DS/ENOChgGovernanceUX/scripts/view/investigationRequest/ChgIRDataGridLayout","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/view/ChgCreateChangeOrder","DS/ENOChgGovernanceUX/scripts/components/propertiesView/ChgPropertiesPanelTab","DS/ENOChgGovernanceUX/scripts/util/ChgGovPreferenceConstant","DS/ENOChgGovernanceUX/scripts/view/changeAction/ChgCADataGridLayout","DS/UIKIT/Mask","DS/TreeModel/TreeNodeModel","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/proposedChanges/ChgCAProposedChangesController","DS/ENOChgGovernanceUX/scripts/view/changeAction/facets/realizedChanges/ChgCARealizedChangesController","DS/ENOChgServices/scripts/services/UserPreferenceUtil","DS/ENOChgServices/scripts/services/DefaultPreferencesManager","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestUtil","DS/ENOChgGovernanceUX/scripts/util/investigationRequest/ChgInvestigationRequestFeaturesUtil","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y,E,O,G,N,A,T,M,V,R,U,x,F,P,L,H,B,k,W,X,j,q,z,K,$,J,Y){"use strict";var Q={initHome:function(e){this._welcomePanelComponent=new o,this._applicationContainer=document.createElement("div"),t.extendElement(this._applicationContainer),widget.body.setContent(this._applicationContainer),s.getImmersiveFrame().inject(this._applicationContainer),this._zApplicationFrame=new n,this._zApplicationFrame._init(this._applicationChannel,f,this._welcomePanelComponent),s.getImmersiveFrame().setContentInBackgroundLayer(this._zApplicationFrame),this.infoPanel=this._zApplicationFrame._triptychWrapper.getRightPanelContainer(),this._welcomePanelComponent.init(this._applicationChannel,f,this._zApplicationFrame._triptychWrapper.getLeftPanelContainerTriptych()),this._applicationChannel.publish({event:"triptych-set-size",data:{side:"left",size:d.LEFT_PANEL_SIZE_EXPANDED}}),f.start("/home")},init:function(e,t){C.init();v.initialize();var n={name:"appChannelModleEvent"};this._applicationChannel=new i(n),this._subscribeToEvents(),f.setDependency("applicationChannel",this._applicationChannel),f.setDependency("xChangeApp",this),this.initHome(t),this.updateCRTab()},updateCRTab:function(){let e=widget.getValue("X3DContentId")?JSON.parse(widget.getValue("X3DContentId")):null;console.log(e),null!=e&&"crAssessment"===e.data.items[0].tabName&&(this._pathChangeRequestsDetails=[B._KEY,B._VIEWS_PREFERENCES,B._CHANGE_REQUESTS_DETAILS],this.contentX3D=e,D.updateTab(this._pathChangeRequestsDetails,"crAssessment"),r.publish(`crImpactAnalysis:${widget.id}`,{}))},openWithIDCard:function(e,t){this.init(e,t);var i={};let n=t.extData.objectId;i.context=n,"Change Order"==t.extData.parentType?(Q.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(n)):"Change Request"==t.extData.parentType?(Q.launchPropertyPanelContext(i),M.displayObjectInfoInsideIDcard(n)):"Change Action"==t.extData.parentType&&(Q.launchPropertyPanelContext(i),U.displayObjectInfoInsideIDcard(n))},clearContent:function(){if(this.govContainer&&this.govContainer.hasChildNodes())if(void 0!==window.__karma__){var e=this.govContainer.childNodes;for(let t=0;t<e.length;t++)e[t].remove()}else this.govContainer.innerHTML=""},makeDropPayload:function(e){let t=e[0].objectId;var i={};i.context=t,1==e.length?w.getObjectTypeInformation(t).then(function(e){"Change Order"==e?(Q.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(t)):"Change Request"==e?"true"===P.getGlobalVariable().CHG_CHANGE_REQUEST&&(Q.launchPropertyPanelContext(i),M.displayObjectInfoInsideIDcard(t)):"Change Action"==e?(Q.launchPropertyPanelContext(i),U.displayObjectInfoInsideIDcard(t)):""==e&&I.warn(a.CHG_GOV_Block_NotSupported_Drop)}):I.warn(a.CHG_GOV_Block_Multi_Drop)},loadingMyChangeOrders:function(){var e=this;this._applicationChannel;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_MY_CHANGE_ORDERS}}),this._container=t.createElement("div"),this._container.classList.add("changeorder-landingpage"),f.setDependency("landingpage",this._container);this._zApplicationFrame._triptychWrapper.getMainPanelContainer();b.makeDroppable(this._container,function(e){Q.makeDropPayload(e)}),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(this._container);var i={};i.modelEvents=this._applicationChannel,i.target=this._container,l.createChangeOrderView(i),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("co-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"co-DataGrid-on-dblclick"},function(e){g.displayObjectInfoInsideIDcard(e.model.id)});var n=this._applicationChannel;widget.addEvents({onSearch:function(t){n.publish({event:"co-DataGrid-on-search",data:{query:t},context:e})},onResetSearch:function(t){n.publish({event:"co-DataGrid-on-reset-search",data:{query:t},context:e})}}),this._applicationChannel.subscribe({event:"co-DataGrid-on-click"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t);var i={[t.model.id]:{id:t.model.id,name:t.model.name,title:t.model.title,type:t.model.type}},n={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[t.model.id],attributes:i},version:"1.0"};r.publish("DS/Object/select",n)}),this._applicationChannel.subscribe({event:"co-DataGrid-on-unselect"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),this._applicationChannel.subscribe({event:"co-DataGrid-on-unselect-all"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)})},_initRecentContent:function(){var e=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_RECENTY_OPENED}}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("load-info-panel-chg-recents")]||this._applicationChannel.subscribe({event:"load-info-panel-chg-recents"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("recent-DataGrid-on-unselect-all")]||this._applicationChannel.subscribe({event:"recent-DataGrid-on-unselect-all"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),t.createElement("div").classList.add("outerRecentlyOpenedDiv");var i=t.createElement("div");i.classList.add("firstROChildDiv"),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i);var n={};n.target=i,n._applicationChannel=this._applicationChannel;var o=new y(n);b.makeDroppable(i,function(e){Q.makeDropPayload(e)}),o.globalSubscribeForRecentlyOpenedView()},_initChangeRequestContent:function(){var e=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_MY_CHANGE_REQUESTS}});var i=t.createElement("div");i.classList.add("outerMYCRDiv");var n=t.createElement("div");n.classList.add("mainMyCRDiv");var o={};o.target=n,o.modelEvents=this._applicationChannel,n.inject(i),b.makeDroppable(i,function(e){Q.makeDropPayload(e)}),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i),T.createChangeRequestView(o);var a=this._applicationChannel;this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("cr-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"cr-DataGrid-on-dblclick"},function(e){f.navigate(d.ROUTE_CR_DETAILS,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:e})}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("cr-DataGrid-on-click")]||this._applicationChannel.subscribe({event:"cr-DataGrid-on-click"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t);var i={[t.model.id]:{id:t.model.id,name:t.model.name,title:t.model.title,type:t.model.type}},n={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[t.model.id],attributes:i},version:"1.0"};r.publish("DS/Object/select",n)}),this._applicationChannel.subscribe({event:"cr-DataGrid-on-unselect"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),this._applicationChannel.subscribe({event:"cr-DataGrid-on-unselect-all"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),widget.addEvents({onSearch:function(t){a.publish({event:"cr-DataGrid-on-search",data:{query:t},context:e})},onResetSearch:function(t){a.publish({event:"cr-DataGrid-on-reset-search",data:{query:t},context:e})}})},_initChangeInvestigationRequestContent:function(){var e=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_MY_INVESTIGATION_REQUESTS}});var i=t.createElement("div");i.classList.add("outerMYIRDiv");var n=t.createElement("div");n.classList.add("mainMyIRDiv");var o={};o.target=n,o.modelEvents=this._applicationChannel,n.inject(i),b.makeDroppable(i,function(e){Q.makeDropPayload(e)}),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i),F.createInvestigationRequestView(o);var a=this._applicationChannel;this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ir-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"ir-DataGrid-on-dblclick"},function(e){f.navigate(d.ROUTE_IR_DETAILS,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:e})}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ir-DataGrid-on-click")]||this._applicationChannel.subscribe({event:"ir-DataGrid-on-click"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t);var i={[t.model.id]:{id:t.model.id,name:t.model.name,title:t.model.title,type:t.model.type}},n={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[t.model.id],attributes:i},version:"1.0"};r.publish("DS/Object/select",n)}),this._applicationChannel.subscribe({event:"ir-DataGrid-on-unselect"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),this._applicationChannel.subscribe({event:"ir-DataGrid-on-unselect-all"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),widget.addEvents({onSearch:function(t){a.publish({event:"ir-DataGrid-on-search",data:{query:t},context:e})},onResetSearch:function(t){a.publish({event:"ir-DataGrid-on-reset-search",data:{query:t},context:e})}})},_initChangeActionContent:function(){var e=this;this._applicationChannel.publish({event:"welcome-panel-select-action",data:{id:d.PATH_MY_CHANGE_ACTIONS}});var i=t.createElement("div");i.classList.add("outerMYCADiv");var n=t.createElement("div");n.classList.add("mainMyCADiv");var o={};o.target=n,o.modelEvents=this._applicationChannel,n.inject(i),b.makeDroppable(i,function(e){Q.makeDropPayload(e)}),this.govContainer=document.querySelector(".cogov-content-wrapper"),this.govContainer.appendChild(i),k.createChangeActionView(o);var a=this._applicationChannel;this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ca-DataGrid-on-dblclick")]||this._applicationChannel.subscribe({event:"ca-DataGrid-on-dblclick"},function(e){f.navigate(d.ROUTE_CA_DETAILS,{id:e.model.id,name:e.model.name,title:e.model.title,nodeModel:e})}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("ca-DataGrid-on-click")]||this._applicationChannel.subscribe({event:"ca-DataGrid-on-click"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t);var i={[t.model.id]:{id:t.model.id,name:t.model.name,title:t.model.title,type:t.model.type}},n={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[t.model.id],attributes:i},version:"1.0"};r.publish("DS/Object/select",n)}),this._applicationChannel.subscribe({event:"ca-DataGrid-on-unselect"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),this._applicationChannel.subscribe({event:"ca-DataGrid-on-unselect-all"},function(t){t.context.getTreeDocument()&&e.launchPropertyPanel(t)}),widget.addEvents({onSearch:function(t){a.publish({event:"ca-DataGrid-on-search",data:{query:t},context:e})},onResetSearch:function(t){a.publish({event:"ca-DataGrid-on-reset-search",data:{query:t},context:e})}})},_initWelcomePanel:function(){this._welcomePanelComponent.init(this._applicationChannel,f,this._zApplicationFrame._triptychWrapper.getLeftPanelContainer())},_initWelcomePanelDeactivate:function(){this._welcomePanelComponent.init(this._applicationChannel,f,this._zApplicationFrame._triptychWrapper.getLeftPanelContainerTriptych())},reactivateWP:function(e){if(e||1!=this._isWPActivated){widget.body.offsetWidth>d.MOBILE_BREAKPOINT&&this._applicationChannel.publish({event:"triptych-show-panel",data:"left"}),this._applicationChannel.publish({event:"show-welcomepanel-icon"}),this._applicationChannel.publish({event:"topbar-show-title"});var t=this;this._tokenSub=this._applicationChannel.subscribe({event:"resizing-triptych-container"},function(e){e<d.MOBILE_BREAKPOINT?t._applicationChannel.publish({event:"triptych-hide-panel",data:"left"}):t._applicationChannel.publish({event:"triptych-show-panel",data:"left"})}),this._isWPActivated=!0}},deactivateWP:function(e){e||0!=this._isWPActivated?(this._applicationChannel.publish({event:"triptych-hide-panel",data:"left"}),this._applicationChannel.publish({event:"hide-welcomepanel-icon"}),this._applicationChannel.publish({event:"topbar-hide-title"}),this._tokenSub&&this._applicationChannel.unsubscribe(this._tokenSub),this._isWPActivated=!1):this._applicationChannel.publish({event:"topbar-hide-title"})},showIDCard:function(t,i){let n={},o=Y("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome");if("ChangeOrder"==t.model.isKindOfType)n.context=t.model.id,n.type="ChangeOrder",o.launchPropertyPanelContext(n),this.buildIDCardViewForCO(t,i);else if("ChangeRequest"==t.model.isKindOfType)n.context=t.model.id,n.type="ChangeRequest",o.launchPropertyPanelContext(n),this.buildIDCardViewForCR(t,i);else if("ChangeAction"==t.model.isKindOfType){if(n.context=t.model.id,n.type="ChangeAction",o.launchPropertyPanelContext(n),this.buildIDCardViewForCA(t,i),P.getGlobalVariable().isNative&&"true"==P.getGlobalVariable().CHG_NATIVE_BREADCRUMB){t=t.model.id;e.DispatchEventToWin("Native_CA_SUMMARY_PAGE",t)}}else"InvestigationRequest"==t.model.isKindOfType?(n.context=t.model.id,n.type="InvestigationRequest",o.launchPropertyPanelContext(n),this.buildIDCardViewForIR(t,i)):this.buildIDCardViewForCO(t,i)},buildIDCardViewForCO:function(e,i){var n=this;w.getChangeOrderUserAccess(e.model.id).then(function(o){var a=o.data[0].id,s=(o.data[0].type,o.data[0].dataelements);s=S.processAccessBitCO(s);var l={id:a,type:e.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var d=document.getElementsByClassName("moduleWrapper")[0];d&&W.isMasked(d)&&W.unmask(d);let p=t.createElement("div");if(p.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(p),p){p.setContent("");var h=t.createElement("div");h.classList.add("outerContainerDiv"),h.inject(p);var m=t.createElement("div");m.classList.add("outerContainerHeaderDiv"),m.inject(h),m.innerHTML="<h1>Change Order Header</h1>";var f=t.createElement("div");if(f.classList.add("outerContainerTabDiv"),f.inject(h),"outsideCall"==i){var v=e.model;u.createIDCardHeader(m,v,l)}else g.createHeaderFieldsJSON(e).then(function(e){u.createIDCardHeader(m,e,l)});let o;b.makeDroppable(m,function(e){Q.makeDropPayload(e)}),e.model.maturity?o=e.model.maturity:e.model.attributes&&e.model.attributes.mapping&&e.model.attributes.mapping.maturity&&e.model.attributes.mapping.maturity.valueActual&&(o=e.model.attributes.mapping.maturity.valueActual);var D={};D.id=e.model.id,D.contextDetails={id:D.id,name:e.model.name,title:e.model.title,maturity:o,isKindOfType:e.model.isKindOfType,_modelEvents:n._applicationChannel,access:l};var w=g.getTabs(n,D);D.tabs=w,c.createGovTab(f,D);var I=e.model.id;C.setId(I);var _={};_.id=e.model.id,_.type=e.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(_))}})},updatingRecent:function(e){this._pathRecents=[B._KEY,B._VIEWS_PREFERENCES,B._RECENTLY_OPENED],D.updateRecents(this._pathRecents,e)},getRecents:function(){this._pathRecents=[B._KEY,B._VIEWS_PREFERENCES,B._RECENTLY_OPENED];var e=D.getRecents(this._pathRecents);return e&&(e=(e=JSON.parse(e)).slice(0,parseInt(widget.getPreference("recentlyOpenedCount").value)),e=JSON.stringify(e)),e},addRecentItemsIdsInPreference:function(e){let t=this,i=[],n=t.getRecents();if(""==n)i.push(e),t.updatingRecent(JSON.stringify(i));else{let i=JSON.parse(n),o=t.checkExistingIdAndRemoved(i,e);o.unshift(e),t.updatingRecent(JSON.stringify(o))}},checkExistingIdAndRemoved:function(e,t){var i=e.indexOf(t);return i>=0&&e.splice(i,1),e},buildIDCardViewForCR:function(e,i){var n=this;w.getChangeRequestUserAccess(e.model.id).then(function(o){var a=e.model.id,s=(o.data[0].type,o.data[0].dataelements);s=S.processAccessBitCR(s);var l={id:a,type:e.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var d=document.getElementsByClassName("moduleWrapper")[0];d&&W.isMasked(d)&&W.unmask(d);let p=t.createElement("div");if(p.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(p),p){p.setContent("");var g=t.createElement("div");g.classList.add("outerContainerDiv"),g.inject(p);var h=t.createElement("div");h.classList.add("outerContainerHeaderDiv"),h.inject(g),h.innerHTML="<h1>Change Order Header</h1>";var m=t.createElement("div");if(m.classList.add("outerContainerTabDiv"),m.inject(g),"outsideCall"==i){var f=e.model;u.createIDCardHeader(h,f,l)}else M.createHeaderFieldsJSON(e).then(function(e){u.createIDCardHeader(h,e,l)});let o;b.makeDroppable(h,function(e){Q.makeDropPayload(e)}),e.model.maturity?o=e.model.maturity:e.model.attributes&&e.model.attributes.mapping&&e.model.attributes.mapping.maturity&&e.model.attributes.mapping.maturity.valueActual&&(o=e.model.attributes.mapping.maturity.valueActual);var v={};v.id=e.model.id,v.contextDetails={id:v.id,name:e.model.name,title:e.model.title,maturity:o,isKindOfType:e.model.isKindOfType,_modelEvents:n._applicationChannel,access:l,attributes:e.model.attributes};var D=M.getCRTabs(V,v,n._applicationChannel);v.tabs=D,c.createGovTab(m,v);var w=e.model.id;C.setId(w);var I={};I.id=e.model.id,I.type=e.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(I))}})},buildIDCardViewForCA:function(e,i){var n=this,o=[];o.push(w.getChangeActionUserAccess(e.model.id)),o.push(w.getCAContext(e.model.id)),o.push(w.getChangeGroupData(e.model.id)),Promise.all(o).then(function(o){let a=o[0].data[0].id,s=o[0].data[0];s=S.processAccessBitCA(s);let l=S.processedChangeActionContext(o[1]),d=o[2].changeaction.group;var p=[];Array.isArray(l)&&l.forEach(function(e){var t=e.id;t&&p.push(t)});var g={id:a,type:e.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",g);var h=document.getElementsByClassName("moduleWrapper")[0];h&&W.isMasked(h)&&W.unmask(h);let m=t.createElement("div");if(m.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(m),m){m.setContent("");var f=t.createElement("div");f.classList.add("outerContainerDiv"),f.inject(m);var v=t.createElement("div");v.classList.add("outerContainerHeaderDiv"),v.inject(f),v.innerHTML="<h1>Change Action Header</h1>";var D=t.createElement("div");if(D.classList.add("outerContainerTabDiv"),D.inject(f),"outsideCall"==i){var w=e.model;u.createIDCardHeader(v,w,g)}else U.createHeaderFieldsJSON(e).then(function(e){u.createIDCardHeader(v,e,g)});let o;b.makeDroppable(v,function(e){Q.makeDropPayload(e)}),e.model.maturity?o=e.model.maturity:e.model.attributes&&e.model.attributes.mapping&&e.model.attributes.mapping.maturity&&e.model.attributes.mapping.maturity.valueActual&&(o=e.model.attributes.mapping.maturity.valueActual);var I={};I.id=e.model.id,I.applicationChannel=Q._applicationChannel,I.contextDetails={isCAGrouped:null==d?"false":"true",id:I.id,name:e.model.name,title:e.model.title,description:e.model.description,severity:e.model.severity,maturity:o,isKindOfType:e.model.isKindOfType,_modelEvents:n._applicationChannel,userAccess:s,contextIds:p},Q.realized_options_copy=I,Q.realized_options_copy.cmd=void 0,Q.realized_options_copy.outerContainerTabDiv=D,Q.proposed_options_copy=I,Q.proposed_options_copy.outerContainerTabDiv=D;var _=U.getTabs(x,I,n._applicationChannel);I.tabs=_,c.createGovTab(D,I);var y=e.model.id;C.setId(y);var E={};E.id=e.model.id,E.type=e.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(E))}})},buildIDCardViewForIR:function(e,i){var n=this;w.getInvestigationRequestUserAccess(e.model.id).then(function(o){var a=e.model.id,s=(o.data[0].type,o.data[0].dataelements);s=S.processAccessBitIR(s);var l={id:a,type:e.model.isKindOfType,accessBits:s};r.publish("CO-AccessBit-Update",l);var d=document.getElementsByClassName("moduleWrapper")[0];d&&W.isMasked(d)&&W.unmask(d);let p=t.createElement("div");if(p.classList.add("changeorderIDCard-landingpage"),n.govContainer=document.querySelector(".cogov-content-wrapper"),n.govContainer.appendChild(p),p){p.setContent("");var g=t.createElement("div");g.classList.add("outerContainerDiv"),g.inject(p);var h=t.createElement("div");h.classList.add("outerContainerHeaderDiv"),h.inject(g),h.innerHTML="<h1>Investigation Request Header</h1>";var m=t.createElement("div");if(m.classList.add("outerContainerTabDiv"),m.inject(g),"outsideCall"==i){var f=e.model;u.createIDCardHeader(h,f,l)}else $.createHeaderFieldsJSON(e).then(function(e){u.createIDCardHeader(h,e,l)});b.makeDroppable(h,function(e){Q.makeDropPayload(e)});var v={};v.id=e.model.id,v.type=e.model.isKindOfType,v.contextDetails={id:v.id,name:e.model.name,title:e.model.title,isKindOfType:e.model.isKindOfType,_modelEvents:n._applicationChannel,access:l,attributes:e.model.attributes};var D=$.getIRTabs(J,v,n._applicationChannel);v.tabs=D,c.createGovTab(m,v);var w=e.model.id;C.setId(w);var I={};I.id=e.model.id,I.type=e.model.isKindOfType,n.addRecentItemsIdsInPreference(JSON.stringify(I))}})},createOrchestrationTab:function(e){var i=t.createElement("div");return i.classList.add("chg-orchestration-container"),e.target=i,h.createChangeOrchestrationView(e,this._applicationChannel),i},createMembersTab:function(e){var i=t.createElement("div");return i.classList.add("chg-member-container"),e.target=i,m.createMembersView(e),i},createApprovalsTab:function(e,i){let n=t.createElement("div"),o=t.createElement("div"),a=t.createElement("div");o.classList.add("chg-Approval-container"),a.classList.add("chg-Approval-Header-container");let s=t.createElement("div",{id:"chg-Task-container"});return"true"==P.getGlobalVariable().CHG_APPROVAL_CYCLE&&n.appendChild(o),e.target=o,e.targetHeader=a,e.taskContainer=s,G.createApprovalsView(e),o},launchPropertyPanelContext:function(e){var t=[],i={physicalId:e.context,metatype:"businessobject",type:e.type,modelEvents:this._applicationChannel,facetSelect:e.facetSelect,isViaHeader:e.isViaHeader};if(P.getGlobalVariable().lastSelectedInfoType!=e.type&&(P.getGlobalVariable().lastSelectedInfoType=e.type),t.push(i),this.propertyCmp){var n=t;this.propertyCmp.setState(n,!0)}else{var o={objectInfo:t},a=new p;a.start(o),this.propertyCmp=a}C.makePropertyViewVisible(this.infoPanel)},launchPropertyPanel:function(e){const t=e.context.getTreeDocument().getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id);var i=[];if(t.length>0)i=this.createJsonForInfoPanel(t,e.isContextDiffrent),P.getGlobalVariable().lastSelectedInfoType!=i[0].type&&(P.getGlobalVariable().lastSelectedInfoType=i[0].type);else{if(1!==e.context.getTreeDocument()._updateCnt)return;var n={physicalId:e.PhysicalID,metatype:"businessobject",type:e.type,modelEvents:this._applicationChannel};P.getGlobalVariable().lastSelectedInfoType=e.type,i.push(n)}if(this.propertyCmp)this.propertyCmp.setState(i,!0);else{var o={objectInfo:i},a=new p;a.start(o),this.propertyCmp=a}C.makePropertyViewVisible(this.infoPanel)},launchInformationPanel:function(e){var t=[];if(e.node&&void 0!==e.node.getTreeDocument&&e.node.getTreeDocument()){const n=e.node.getTreeDocument().getSelectedNodes().filter(e=>"ia_Total"!=e.options.grid.id);if(n.length>0)t=this.createJsonForInfoPanel(n),P.getGlobalVariable().lastSelectedInfoType!=t[0].type&&(P.getGlobalVariable().lastSelectedInfoType=t[0].type);else{if(0!=n.length)return;var i={physicalId:e.contextID,metatype:"businessobject",type:e.contextType,modelEvents:this._applicationChannel};P.getGlobalVariable().lastSelectedInfoType=e.contextType,t.push(i)}}else{i={physicalId:e.contextID,metatype:"businessobject",type:e.contextType,modelEvents:this._applicationChannel};P.getGlobalVariable().lastSelectedInfoType=e.contextType,t.push(i)}if(this.propertyCmp)this.propertyCmp.setState(t,!0);else{var n={objectInfo:t},o=new p;o.start(n),this.propertyCmp=o}C.makePropertyViewVisible(this.infoPanel)},notifySelection:function(t){var i=[];if(t.node&&void 0!==t.node.getTreeDocument&&t.node.getTreeDocument()){let e=t.node.getTreeDocument().getSelectedNodes();for(let t=0;t<e.length;t++)if("ia_Total"!=e[t].options.grid.id){let n=e[t].options.grid.id;i.push(n)}if("ia_Total"!=t.node.options.grid.id&&t.isNodeAdded){let e=t.node.options.grid.id,i=t.node.options.grid.name,c=t.node.options.grid.title,u=t.node.options.grid.type;var n=[];n.push(e);var o={data:{paths:[]}};o.data.paths.push(n),r.publish("DS/PADUtils/PADCommandProxy/select",o);var a={operation:"select",operationVersion:"1.0",appId:widget.id,appName:widget.getValue("appId"),content:{version:"1.1",id:e,name:i,title:c,type:u}};r.publish("webinwin:web:notification",JSON.stringify(a));var s={[e]:{id:e,name:i,title:c,type:u}},l={metadata:{appId:widget.id,appName:widget.getValue("appId"),timestamp:Math.floor(Date.now())},data:{paths:[e],attributes:s},version:"1.0"};r.publish("DS/Object/select",l);var d={objectId:e,envId:P.getGlobalVariable().tenant,contextId:P.getGlobalVariable().getSecurityContext()};P.getGlobalVariable().compassSocket.dispatchEvent("onSetObject",d,P.getGlobalVariable().compassSocketName)}}e.DispatchEventToWin("Add_to_CSO",i.toString())},initializePropertyPanelwithEmptyData:function(){var e=[],t={objectInfo:e},i=new p;i.start(t),this.propertyCmp=i;var n=e;this.propertyCmp.setState(n,!0),C.makePropertyViewVisible(this.infoPanel)},createJsonForInfoPanel:function(e){var t=[];for(let i=0;i<e.length;i++){let n={physicalId:e[i].options.grid.ref_details?e[i].options.grid.ref_details.id:e[i].options.grid.id,metatype:"businessobject",type:e[i].options.grid.isKindOfType?e[i].options.grid.isKindOfType:e[i].options.grid.ref_details?e[i].options.grid.ref_details.dataelements["ds6w:type"][0]:e[i].options.grid.type,grid:e[i].options.grid,modelEvents:this._applicationChannel};t.push(n)}return t},_subscribeToEvents:function(){var i=this;r.unsubscribe("launch_change_action"+(widget?widget.id:"")),r.subscribe("launch_change_action"+(widget?widget.id:""),function(t){if(P.getGlobalVariable().isNative)e.DispatchEventToWin("OpenCATransferTo",t.id);else{let e={};e.context=t.id,"Change Order"==t.objectType?(e.type="ChangeOrder",i.launchPropertyPanelContext(e),g.displayObjectInfoInsideIDcard(t.id,!0)):(e.type="ChangeAction",i.launchPropertyPanelContext(e),U.displayObjectInfoInsideIDcard(t.id,!0))}}),r.unsubscribe("ca-dblclick-on-dependency-facet"+(widget?widget.id:"")),r.subscribe("ca-dblclick-on-dependency-facet"+(widget?widget.id:""),function(e){let t={};t.context=e.id,t.type="ChangeAction",i.launchPropertyPanelContext(t),U.displayObjectInfoInsideIDcard(e.id,!0)}),r.unsubscribe("ECM_GOV_Realized_DGV_ON:"+(widget?widget.id:"")),r.subscribe("ECM_GOV_Realized_DGV_ON:"+(widget?widget.id:""),function(e){z.saveUserPreference({[K.keys.viewKeys.REALIZED_DEF_VIEW]:"DGV"}),Q.realized_options_copy.cmd="DGV",e.init_options.target=document.querySelector("."+e.init_options.targetclassName),e.init_options.target.empty(),e.init_options.applicationChannel=Q._applicationChannel,new q(e.init_options).createRealizedChangesView()}),r.unsubscribe("ECM_GOV_Realized_LTV_ON:"+(widget?widget.id:"")),r.subscribe("ECM_GOV_Realized_LTV_ON:"+(widget?widget.id:""),function(){z.saveUserPreference({[K.keys.viewKeys.REALIZED_DEF_VIEW]:"LTV"}),Q.realized_options_copy.cmd="LTV",Q.realized_options_copy.outerContainerTabDiv.empty();let e=U.getRealizedChangeTab(x,Q.realized_options_copy,"RealizedChange");var t=Q.realized_options_copy.tabs;Array.isArray(t)&&t.forEach(function(e){e.value&&"caRealizedChange"!=e.value&&(e.isSelected=!1)}),Q.realized_options_copy.tabs[2]=e,c.createGovTab(Q.realized_options_copy.outerContainerTabDiv,Q.realized_options_copy)}),r.unsubscribe("ECM_GOV_ProposedDGV_ON:"+(widget?widget.id:"")),r.subscribe("ECM_GOV_ProposedDGV_ON:"+(widget?widget.id:""),function(e){z.saveUserPreference({[K.keys.viewKeys.PROPOSED_DEF_VIEW]:"DGV"}),document.querySelector(".proposedDGV").show(),document.querySelector(".proposedLTV").hide()}),r.unsubscribe("ECM_GOV_ProposedDGV_OFF:"+(widget?widget.id:"")),r.subscribe("ECM_GOV_ProposedDGV_OFF:"+(widget?widget.id:""),function(){z.saveUserPreference({[K.keys.viewKeys.PROPOSED_DEF_VIEW]:"LTV"}),document.querySelector(".proposedDGV").hide(),document.querySelector(".proposedLTV").show()}),this._applicationChannel.subscribe({event:"welcome-panel-action-selected"},function(e){i.postActionClickFlags&&i.postActionClickFlags.isClickProcessing||(i.postActionClickFlags={isClickProcessing:!1},e&&e.id===d.PATH_NEW_CHANGE_REQUEST&&(N.launchCreateChangeRequestDialog(i.postActionClickFlags),i.postActionClickFlags.isClickProcessing=!0),e&&e.id===d.PATH_NEW_INVESTIGATION_REQUEST?(A.launchCreateInvestigationRequestDialog(i.postActionClickFlags),i.postActionClickFlags.isClickProcessing=!0):e&&e.id===d.PATH_NEW_CHANGE_ORDER?(console.log("...........  open create dailog for CO creation...................."),L.createChangeOrder(i.postActionClickFlags),i.postActionClickFlags.isClickProcessing=!0):e&&e.id===d.PATH_OPEN_CHANGE_ORDER?i.openChangeOrderFromActivity():e&&e.id===d.PATH_NEW_CHANGE_ACTION&&(console.log("...........  open create dailog for CA creation...................."),R.launchCreateChangeActionDialog(i.postActionClickFlags),i.postActionClickFlags.isClickProcessing=!0))}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("update-property-panel-data")]||this._applicationChannel.subscribe({event:"update-property-panel-data"},function(e){if(e.context.getTreeDocument()){if(P.getGlobalVariable().deletionData&&P.getGlobalVariable().deletionData.wid==widget.id&&"CR_IA"==P.getGlobalVariable().deletionData.nav&&P.getGlobalVariable().deletionData.deletedIDs.includes(e.context.options.grid.id))return;i.launchPropertyPanel(e)}}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("update_object_select")]||this._applicationChannel.subscribe({event:"update_object_select"},function(e){e.node&&(i.launchInformationPanel(e),i.notifySelection(e))}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("update-property-panel-contextdata")]||this._applicationChannel.subscribe({event:"update-property-panel-contextdata"},function(e){e.context&&"string"==typeof e.context&&i.launchPropertyPanelContext(e)}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("hideEmpty-datagrid")]||this._applicationChannel.subscribe({event:"hideEmpty-datagrid"},function(e){e.elements.poolContainerSync.getChildren()[1].empty()}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("showEmpty-datagrid")]||this._applicationChannel.subscribe({event:"showEmpty-datagrid"},function(e){var i=t.createElement("div",{html:a.CHG_GOV_Empty_DataGrid_PlaceHolder});null!=e.elements.poolContainerSync.getChildren()[1]&&""==e.elements.poolContainerSync.getChildren()[1].innerHTML&&e.elements.poolContainerSync.getChildren()[1].appendChild(i)}),this._applicationChannel.subscribe({event:"triptych-leaving-mobile"},function(e){0!=i._isWPActivated&&i._applicationChannel.publish({event:"triptych-show-panel",data:"left"})}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("add_aggregation_row_datagrid")]||this._applicationChannel.subscribe({event:"add_aggregation_row_datagrid"},function(e){"true"==P.getGlobalVariable().CHG_IA_COLUMN_ASSESSMENT&&e.treeDocument.addRoot(new X({label:a.CHG_GOV_IA_LastColumn_label,grid:{isLastNode:!0,id:"ia_Total",title:a.CHG_GOV_IA_LastColumn_label}}))}),this._applicationChannel._pubsub.topics[this._applicationChannel._formatEvent("remove_aggregation_row_datagrid")]||this._applicationChannel.subscribe({event:"remove_aggregation_row_datagrid"},function(e){const t=e.treeDocument.getAllDescendants().filter(e=>"ia_Total"===e.options.grid.id);e.treeDocument.removeRoot(t[0])})},openChangeOrderFromActivity:function(){let e=_.activateSearch("Change Order"),t="Change Order";"true"===P.getGlobalVariable().CHG_CHANGE_REQUEST&&(t+=",Change Request"),t+=",Change Action",t+=",Investigation Request",_.search(a.CHG_GOV_Welcome_Activity_Open_Change_Orders,t,this.OnSearchComplete,"changeorderopen",e)},OnSearchComplete:function(e){let t=e[0][0];if(1==e.length){let i={};i.context=e[0][0],w.getObjectTypeInformation(t).then(function(e){"Change Order"==e?(Q.launchPropertyPanelContext(i),g.displayObjectInfoInsideIDcard(t)):"Change Request"==e?"true"===P.getGlobalVariable().CHG_CHANGE_REQUEST&&(Q.launchPropertyPanelContext(i),M.displayObjectInfoInsideIDcard(t)):"Change Action"==e?(Q.launchPropertyPanelContext(i),U.displayObjectInfoInsideIDcard(t)):"Investigation Request"==e?(Q.launchPropertyPanelContext(i),$.displayObjectInfoInsideIDcard(t)):""==e&&I.warn(a.CHG_GOV_Block_NotSupported_Drop)})}},openIDCard:function(e,t){w.getObjectTypeInformation(e).then(function(t){"Change Order"==t?g.getChangeOrderModelForIDCard(e).then(function(e){Q.showIDCard(e)}):"Change Request"==t?"true"===P.getGlobalVariable().CHG_CHANGE_REQUEST&&M.getChangeRequestModelForIDCard(e).then(function(e){Q.showIDCard(e)}):"Change Action"==t?U.getChangeActionModelForIDCard(e).then(function(e){Q.showIDCard(e)}):"Investigation Request"==t&&$.getInvestigationRequestModelForIDCard(e).then(function(e){Q.showIDCard(e)})})},onRefresh:function(){var e=document.querySelector(".dropdown-menu");e&&e.hide(),E.setInfraValue().then(function(e){new O({type:"ChangeOrder",information:e}).loadInfraForGovWidget().then(function(e){var t=D.getRouteInfo();if(t&&t.name==d.ROUTE_MY_CHANGE_ORDERS)f.navigate(d.ROUTE_MY_CHANGE_ORDERS,{isRefresh:!0},{reload:!0});else if(t&&t.name==d.ROUTE_CO_DETAILS)g.displayObjectInfoInsideIDcard(t.params.changeOrderId);else if(t&&t.name==d.ROUTE_CR_DETAILS)M.displayObjectInfoInsideIDcard(t.params.changeRequestId);else if(t&&t.name==d.ROUTE_CA_DETAILS)U.displayObjectInfoInsideIDcard(t.params.changeRequestId);else if(t&&t.name==d.ROUTE_IR_DETAILS)$.displayObjectInfoInsideIDcard(t.params.changeRequestId);else if(t&&t.name==d.ROUTE_MY_CHANGE_REQUESTS)f.navigate(d.ROUTE_MY_CHANGE_REQUESTS,{isRefresh:!0},{reload:!0});else if(t&&t.name==d.ROUTE_MY_INVESTIGATION_REQUESTS)f.navigate(d.ROUTE_MY_INVESTIGATION_REQUESTS,{isRefresh:!0},{reload:!0});else if(t&&t.name==d.ROUTE_MY_CHANGE_ACTIONS)f.navigate(d.ROUTE_MY_CHANGE_ACTIONS,{isRefresh:!0},{reload:!0});else if(t&&(t.name.includes(d.ROUTE_CR_ORCHESTRATION_LEVEL1)||t.name.includes(d.ROUTE_CO_ORCHESTRATION_LEVEL1))){let e=[B._KEY,B._MODEL],i=D.getPreference(e),n={};n.rootNode=i[B._ID_CARD],n.level1Node=i[B._ORCHESTRATION_LEVEL1],n.level="level1",(t.name.includes(d.ROUTE_CR_ORCHESTRATION_LEVEL2)||t.name.includes(d.ROUTE_CO_ORCHESTRATION_LEVEL2))&&(n.level2Node=i[B._ORCHESTRATION_LEVEL2],n.level="level2"),(t.name.includes(d.ROUTE_CR_ORCHESTRATION_LEVEL3)||t.name.includes(d.ROUTE_CO_ORCHESTRATION_LEVEL3))&&(n.level3Node=i[B._ORCHESTRATION_LEVEL3],n.level="level3");let o=t.name;f.navigate(o,{id:t.params.changeOrderId,name:t.params.changeOrderName,title:t.params.changeOrderTitle,nodeModel:n},{reload:!0})}else f.navigate(d.ROUTE_RECENTY_OPENED,{},{reload:!0})})})}};return Q}),define("DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout",["DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsView","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsTileViewLayout","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/util/ChgCRAffectedItemsGridColsUtil","DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridModel","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/changeOrchestration/ChgCROrchestrationCreateChange","DS/ENOChgActionCMDs/scripts/CAActionBarController","DS/ENOChgGovernanceUX/scripts/util/ChgGovCommonDelete","DS/ENOChgGovernanceUX/scripts/util/ChgGovMakeDroppable","DS/ENOChgServices/scripts/services/ChgInfodialog","DS/ENOChgGovernanceUX/scripts/util/ChgGovGlobalSubscriber","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter","DS/PlatformAPI/PlatformAPI","DS/ENOChgServices/scripts/services/ChgInfraService","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/impactAnalysis/ChgCRImpactAnalysisCreate","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsCreateIA","DS/UIKIT/Mask","require","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/ChgGridModelPropertiesUpdate","DS/ENOChgProbes/scripts/ChgCloudProbeUtils"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f,v,D,b,w,S,I,_,y){"use strict";var E={createAffectedItemsView:async function(t,o){var d=this;t.target.setStyles({position:"relative"}),this.contextId=t.id;var c={};c=UWA.merge(c,t),p.makeDroppable(c.target,d.dropHandler),c.modelEvents=o,this.modelEvents=o,c.columns=i.getColumns(),this.ChgCRAffectedItemsDataGridModel=new n(c.id,c.contextDetails),this.treeDocument=c.treeDocument=this.ChgCRAffectedItemsDataGridModel.createTreeDocument(),this.ChgCRAffectedItemsDataGridModel.registerCustomFilter(),d.ChgCRAffectedItemsTreeModel=c.treeDocument,this.subscribeToModelEvents(c.treeDocument),this.chgCRAffectedItemsView=new e(c),I.showLoader(c.target,this.chgCRAffectedItemsView.loader);let u=this.chgCRAffectedItemsView.chgGridView;await a.getCRAffectedItems(t.id,!0).then(async function(e){console.log("AffectedItems list: "+e);var i={},o={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(o=e.data[0].mapping),e.data.splice(0,1));var a=await s.processCRAffectedItems(e);if(d.chgCRAffectedItemsDataGridModel=new n(t.id),0==a.length){if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&w.isMasked(e)&&w.unmask(e)}else I.hideLoader(c.target,d.chgCRAffectedItemsView.loader);d.modelEvents.publish({event:"showEmpty-datagrid",data:u})}if(I.fetchMaturityStateCSS(a),await d.chgCRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,a),E.changeView(),I.hideLoader(c.target,d.chgCRAffectedItemsView.loader),o.length>0&&await d.chgCRAffectedItemsDataGridModel.i3dxInformationFilteringAndCalling(i,o,c.treeDocument),i&&i.length>0){var p=new Map,g=i.length;for(let e=0;e<i.length;e+=50){let t=[];t=g<50?i.slice(e,e+g):i.slice(e,e+50);for(var h=[],C=new Map,f=t,D=0;D<f.length;D++){var b=f[D];h.push(b.id),C.set(b.id,b)}var S=[];if(h.length>0){var _=s.commonPredicatedForFedSearch(),y=await s.callFederatedSearch(h,_);if(y&&y.results&&y.results.length>0)S=await s.processCRAffectedItemsFederatedSearch(y,C)}await d.chgCRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,S),I.hideLoader(c.target,d.chgCRAffectedItemsView.loader),p=new Map([...p,...C]),g-=50}if(p&&p.size>0){d.chgCRAffectedItemsView.indexInfoDiv.show();var O=await v.recent();if(O&&O.results&&O.results.length>0){var G=s.filterNonIndexedDataNew(O,p);p.size!=G.length&&l.warn(r.CHG_GOV_Not_Accessable_Data,!0);var N=await s.processInformationForRecentCRAffected(G);I.fetchMaturityStateCSS(N),d.chgCRAffectedItemsDataGridModel.loadAffectedItemsData(c.treeDocument,N)}}}else d.chgCRAffectedItemsView.indexInfoDiv.hide();var A=s.getDefaultFilter(c.columns);c.treeDocument.setFilterModel(A),c.isSelected&&"false"==m.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(d.ChgCRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:d.ChgCRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,d.ChgCRAffectedItemsTreeModel)}),0==c.treeDocument.getChildren().length?c.treeDocument._modelEvents.publish({event:"treeEmpty"}):c.treeDocument._modelEvents.publish({event:"treeNotEmpty"}),E.changeView(),I.hideLoader(c.target,d.chgCRAffectedItemsView.loader)},function(e){if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&w.isMasked(e)&&w.unmask(e)}else I.hideLoader(c.target,d.chgCRAffectedItemsView.loader);return Promise.reject(e)}),d.chgCRAffectedItemsView.loadCustomColumns(),this.chgCRAffectedItemsView.chgGridView.addEventListener("postEdit",function(e,t){E.updateReasonForChangeValue(t)})},dropHandler(e){var t;E.ChgCRAffectedItemsDataGridModel.treeDocument;t=v.parseObjectInformation(e);t.length>0?E.ChgCRAffectedItemsDataGridModel.addExistingChildren(t):l.error(r.CHG_GOV_Common_Drop_Error)},changeView:function(e){try{if(m.getGlobalVariable().is3DSpace){let e=E.treeDocument.getAllDescendants();for(var t of(E.treeDocument.prepareUpdate(),e)){let e='<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+t.options.grid.id+"\"'>"+UWA.String.escapeHTML(t.options.grid.title)+"</a>";t.updateOptions({label:e})}E.treeDocument.pushUpdate()}}catch(e){console.log(e)}i.changeView("GridView")},subscribeToModelEvents:function(e){var i=this;e._modelEvents.subscribe({event:"treeEmpty"},function(e){t.showEmptyView()}),e._modelEvents.subscribe({event:"treeNotEmpty"},function(e){t.hideEmptyView()}),f.unsubscribe(`crAffectedItems:${widget.id}`),f.subscribe(`crAffectedItems:${widget.id}`,function(){if("false"==m.getGlobalVariable().slidePanelTagger&&require(["DS/ENOChgGovernanceUX/scripts/wrapper/ChgGovBIFilter"],function(e){e._initializationPromiseBIFilter||e.initializeBIFilter(i.ChgCRAffectedItemsTreeModel),e._cleanBIFilterProxy();let t={data:{roots:i.ChgCRAffectedItemsTreeModel.getAllDescendants()}};e.cleanPathTag(),e._onSetPathTags(t,i.ChgCRAffectedItemsTreeModel)}),Object.keys(i.chgCRAffectedItemsView.options.treeDocument.getXSO()._items).length>0){let e=i.chgCRAffectedItemsView.options.treeDocument.getXSO()._items;for(let t in e)i.chgCRAffectedItemsView.onSelectionChange(i.chgCRAffectedItemsView._modelEvents,e[t],i.chgCRAffectedItemsView.id,i.chgCRAffectedItemsView.options.contextDetails.isKindOfType,!0)}else i.chgCRAffectedItemsView.onSelectionChange(i.chgCRAffectedItemsView._modelEvents,i.chgCRAffectedItemsView.options.treeDocument._getTrueRoot(),i.chgCRAffectedItemsView.id,i.chgCRAffectedItemsView.options.contextDetails.isKindOfType,!1)}),f.unsubscribe(`${e.options.id} of ${widget.id}`),f.subscribe(`${e.options.id} of ${widget.id}`,function(e){E.ChgCRAffectedItemsDataGridModel.filterView(e)}),f.unsubscribe(`${e.options.id} colorize ${widget.id}`),f.subscribe(`${e.options.id} colorize ${widget.id}`,function(e){E.ChgCRAffectedItemsDataGridModel.enableColorizeView(e)}),f.unsubscribe(`${e.options.id} uncolorize ${widget.id}`),f.subscribe(`${e.options.id} uncolorize ${widget.id}`,function(e){E.ChgCRAffectedItemsDataGridModel.disableColorizeView(e)}),f.unsubscribe("updateIndexingIconForHideOrShowInAffectedItem"),f.subscribe("updateIndexingIconForHideOrShowInAffectedItem",function(e){i.chgCRAffectedItemsView.indexInfoDiv.show()}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("AffectedItem-DataGrid-on-dblclick")]||this.modelEvents.subscribe({event:"AffectedItem-DataGrid-on-dblclick"},function(e){if(m.getGlobalVariable().is3DSpace){S("DS/ENOChgGovernanceUX/scripts/util/Chg3DSpaceInfoPanel").createSlidein()}else E.modelEvents.publish({event:"information-panel-open",data:null})}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("remove_AnalysisBasis_count_AI_grid")]||this.modelEvents.subscribe({event:"remove_AnalysisBasis_count_AI_grid"},function(e){E.updateImpactAnalysisCountOnGrid(e)}),this.modelEvents._pubsub.topics[this.modelEvents._formatEvent("cr-affected-item-object-selection-update")]||this.modelEvents.subscribe({event:"cr-affected-item-object-selection-update"},function(e){E.handleObjectSelectionUpdate(e)})},massUpdateHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Mass Update"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),E.chgCRAffectedItemsView.chgGridView.showModelMassUpdateDialog();let t=E.chgCRAffectedItemsView.chgGridView._modelMassUpdateDialog.buttons.Ok.elements.button,i=E.chgCRAffectedItemsView.chgGridView._modelMassUpdateDialog.buttons.Apply.elements.button;t.addEventListener("click",function(){E.updateMassValue()}),i.addEventListener("click",function(){E.updateMassValue()})},updateMassValue:function(){let e=E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants(),t=[];for(let i of e){let e={id:i.options.grid.id,reasonForChange:i.options.grid.reasonForChange};null!=e.reasonForChange?t.push(e):(e.reasonForChange="",t.push(e))}t.length>0&&a.updateAIReasonForChangeValue(t,E.contextId).then(e=>{console.log("updated on backend")})},updateReasonForChangeValue:function(e){if(e.nodeModel){let t={id:e.nodeModel.options.grid.id,reasonForChange:e.nodeModel.options.grid.reasonForChange},i=[];i.push(t),a.updateAIReasonForChangeValue(i,E.contextId).then(e=>{console.log("updated on backend")})}},newImpactAnalysisHandler:function(){console.log("newImpactAnalysisHandler cr affecteditems!")},updateImpactAnalysisCountOnGrid:function(e){let t=E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants();for(let i of e.selectedAnalysisBasis)for(let e of t)if(i.options.grid.id==e.options.grid.id){let t=e.options.grid.countImpactAnalysis-1;e.updateOptions({grid:{countImpactAnalysis:t}})}},addExistingHandler:function(){console.log("addExistingHandler cr affecteditems!");var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add Affected Item"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants(),i={condition:"addExistingAffectedItem",extendedQuery:E.createExcludeListForSearch(t)};const n=o.activateSearch();m.getGlobalVariable().is3DSpace&&n.socket.subscribeServer("SearchComServer",getTopWindow()),o.search(r.CHG_GOV_AffectedItems_AddExisting_Search_Header,"",E.OnSearchComplete,"changeAffectedItems",n,void 0,void 0,i)},createExcludeListForSearch:function(e){let t="";for(let i of e)t=t+"NOT (physicalid:"+i.options.grid.id+") ";return t},OnSearchComplete:function(e){for(var t=[],i=0;i<e.length;i++)t.push({id:e[i][8]&&null!=e[i][8]?e[i][8]:e[i][0],updateAction:"CONNECT",service:e[i][7]&&e[i][7].includes(":")?e[i][7].split(":")[0]:e[i][7],type:e[i][2],environment:m.getGlobalVariable().tenant});t.length&&E.ChgCRAffectedItemsDataGridModel.addExistingChildren(t)},OnSearchCompleteIA:function(e){console.log(e);var t=[];for(let[i]of e)t.push({id:i});let i=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();var n=[];for(let e of i)n.push({id:e.options.grid.id,service:e.options.grid.serviceName,type:e.options.grid.type,environment:m.getGlobalVariable().tenant});let o=[];o.push({impactAnalysisIds:t,objectIdToSend:n,updateAction:"CONNECT"}),0!=t.length&&0!=n.length&&a.connecteIAwithAffactedItem(o).then(function(e){!0===e.success&&e.data.length==e.items&&l.success(r.CHG_GOV_Affected_Item_Objects_Processed_Success_Analysis_Basis);let t=0,i=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let n of i){for(let i of e.data)i&&i.affectedItemIds&&i.affectedItemIds.includes(n.options.grid.id)&&t++;let i=n.options.grid.countImpactAnalysis+t;n.updateOptions({grid:{countImpactAnalysis:i}}),t=0}t=0,E.modelEvents.publish({event:"update_AnalysisBasis_count_IA_grid",data:e.data})})},removeHandler:function(){console.log("removeHandler!");var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Remove"}};if(y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e}),0!=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes().length)if(m.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&w.mask(e)}else{let e=document.getElementById("crAffectedItems");e&&w.mask(e);let t=document.getElementById("affectedItem-index-data-info-div");t&&E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes().length==E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants().length&&(t.style.display="none")}E.ChgCRAffectedItemsDataGridModel.removeChildren()},globalSubscribeForCOOrchestrationView:function(){h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-AccessBit-Update",E.handleAccessBitUpdate),h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-Properties-Update",E.handlePropertiesUpdateForAffectedItem)},handlePropertiesUpdateForAffectedItem:function(e){var t=E.ChgCRAffectedItemsTreeModel;t&&_.handlePropertiesOnUpdate(t,e)},_orchestrateImpactAnalysis:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Orchestrate Impact Analysis"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=[],i=[],n=E.contextId,o=E.ChgCRAffectedItemsDataGridModel.treeDocument.getAllDescendants().length,s=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let e of s){let t={};t.id=e.options.grid.id,t.type=e.options.grid.type,t.service=e.options.grid.serviceName,i.push(t)}let d={orchestrateItemIds:i};t.push(d),0!=o?a.orchestrateImpactAnalysis(t,n).then(function(e){if(!0===e.success){S("DS/ENOChgGovernanceUX/scripts/view/ChgChangeOrderHome").onRefresh(),l.success(r.CHG_GOV_AffectedItems_OrchestrateImpactAnalysis_Success)}}):l.error(r.CHG_GOV_AffectedItems_OrchestrateImpactAnalysis_Error)},createImpactAnalysisInContext:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add to New Impact Analysis"}};S("DS/ENOChgProbes/scripts/ChgCloudProbeUtils").cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t={contextCRId:E.contextId};h.CHG_CR_AFF_IA="true";let i=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();console.log(E.modelEvents),b.launchAffectedItemsCreateNewIADialog(t,i,E.modelEvents)},addExistingImpactAnalysisInContext:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Add to Existing Impact Analysis"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t=a.getCRImpactAnalysis(E.contextId),i=E.contextId;console.log(i),t.then(function(e){var t=s.processCRImpactAnalysis(e,E.contextId);let n=[];for(const e of t)"In Work"===e.maturity&&n.push(e.id);let a={condition:"addExistingImpactAnalysis",extendedQuery:E.createFinalIncludeListFrSearch(n)};if(m.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeAnalysis&includeOIDprogram=enoECMChangeRequestUX:getConnectedImpactAnalysis&objectid="+i+"&table=AEFGeneralSearchResults&selection=single&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var r=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,E.OnSearchCompleteIA(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",r)}else console.log("inside EVENT")};window.addEventListener("storage",r)}var l=o.activateSearch("impact analysis","IA_ImpactAnalysis");o.search("Add Existing",m.getGlobalVariable().proposedSearchType,E.OnSearchCompleteIA,"addExistingImpactAnalysis",l,void 0,void 0,a)},function(e){return Promise.reject(e)})},moveAffactedItemToOtherCR:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Move to Change Request"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});let t={condition:"addExistingCROrchestration",extendedQuery:'AND (NOT flattenedtaxonomies:"interfaces/Change On Hold") AND ( current: "Prepare" OR current: "In Work") AND (NOT physicalid:"'+E.contextId+'")'};if(m.getGlobalVariable().is3DSpace){const e="wdg_"+(new Date).getTime();showChooser("../common/emxFullSearch.jsp?field=TYPES=type_ChangeRequest:ECM_CHANGE_ON_HOLD!=TRUE:CURRENT=policy_RequestForChange.state_Prepare,policy_RequestForChange.state_InWork&table=AEFGeneralSearchResults&selection=single&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../enterprisechangemgtapp/ECMWebSearchUtil.jsp?fromOperation=searchObjects&uniqueKey="+e,850,630);var i=function(t){if(t.storageArea===localStorage&&null!=localStorage.searchedObjectDetails&&""!=localStorage.searchedObjectDetails&&localStorage.searchedObjectDetails.indexOf(e)>-1){let e=JSON.parse(localStorage.searchedObjectDetails);delete e.uniqueKey,E.OnSearchCompleteCR(Object.values(e)),localStorage.removeItem("searchedObjectDetails"),window.removeEventListener("storage",i)}else console.log("inside EVENT")};window.addEventListener("storage",i)}else{var n=o.activateSearch("","Change Request");o.search("Add Existing","Change Request",E.OnSearchCompleteCR,"changeOrchestration",n,void 0,void 0,t)}},OnSearchCompleteCR:function(e){let t=[],i="";console.log(e);let n=E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes();for(let e of n)t.push(e.options.grid.id);for(let[t]of e)i=t;let o=[],s={toId:i,affectedItemIds:t};o.push(s),o[0].toId==E.contextId?l.warn(r.CHG_GOV_ChangeRequest_AffectedItems_Same_CR_Warning,!0):(console.log("CHGCRAffactedItem Moce IA to CR"+o),a.moveAffactedItemToOtherCR(o,E.contextId).then(function([e,t]){!0===e.success&&null==t&&l.success(r.CHG_GOV_Affected_Item_Objects_Processed_Success);var i=[...E.ChgCRAffectedItemsDataGridModel.treeDocument.getSelectedNodes()];if(t)for(let e=0;e<i.length;e++)t.includes(i[e].options.grid.id)&&(i.splice(e,1),e--);for(var n=0;n<i.length;n++)E.ChgCRAffectedItemsDataGridModel.treeDocument.removeRoot(i[n])}))},createFinalIncludeListFrSearch:function(e){let t="(";for(let i=0;i<e.length;i++)t=t+"physicalid:"+e[i],i!=e.length-1&&(t+=" OR ");return t+=")"},changeEditibility:function(e){let t=E.chgCRAffectedItemsView.options.columns;for(let i of t)if("reasonForChange"===i.dataIndex){i.editableFlag=e;break}},handleAccessBitUpdate:function(e){e.id==E.contextId&&(console.log("ChgCRAffectedItemsDataGridLayout handleAccessBitUpdate"+e),"false"==e.accessBits.ManageAffectedItem?(E.accessBitManageAffectedItem=!1,E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("addExisting",{visibleFlag:!1}),E.changeEditibility(!1)):(E.accessBitManageAffectedItem=!0,E.changeEditibility(!0)),"false"==e.accessBits.ManageChangeAnalysis?(E.accessBitManageChangeAnalysis=!1,E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("create",{visibleFlag:!1})):(E.accessBitManageChangeAnalysis=!0,E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("create",{visibleFlag:!0})))},handleObjectSelectionUpdate:function(e){e.count>0?(E.accessBitManageAffectedItem&&(E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!0}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!0}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!0}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("moveToCR",{visibleFlag:!0})),E.accessBitManageChangeAnalysis&&(E.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="enabled"),E.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[2].state="enabled"):(E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("changeAssessment",{visibleFlag:!1}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("remove",{visibleFlag:!1}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("massUpdate",{visibleFlag:!1}),E.chgCRAffectedItemsView.chgGridView.getToolbar().updateNodeModel("moveToCR",{visibleFlag:!1}),E.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[1].state="disabled",E.chgCRAffectedItemsView.chgGridView.getToolbar().getNodeModelByID("create").options.grid.data.menu[2].state="disabled")},changeAssessmentHandler:function(){var e={commandInfo:{type:"Change Request",facet:"Affected Items",action:"CR>Affected Items>Change Assessment"}};y.cloudProbeUtils.genericCommandClickEventForAnalytics({inputJSON:e});const t=E.treeDocument.getSelectedNodes();if(t&&t.length>0){let e=[];t.forEach(t=>{e.push(t.options.grid.serviceBasedObjId)});const i=widget.id+"ChgCRAffectedItemsDataGridLayout";o.launchAppInAppMode(i,e,"ENORIPE_AP")}else l.error(r.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},handleForMaturityUpdate:function(e){if(e){JSON.parse(e);let t=E.treeDocument.getSelectedNodes();I.getHandleForMaturityUpdate(JSON.parse(e),t)}},globalSubscribeForAffectedItemsBasisView:function(){h.addObserver("ChgCRAffectedItemsDataGridLayout","ENORIPE-InApp-"+widget.id+"ChgCRAffectedItemsDataGridLayout/onOK",E.handleChangeAssessmentOK),h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-AccessBit-Update",E.handleAccessBitUpdate),h.addObserver("ChgCRAffectedItemsDataGridLayout","CO-Properties-Update",E.handlePropertiesUpdateForAffectedItem),h.addObserver("ChgCRAffectedItemsDataGridLayout","Lifecycle.Modification",E.handleForMaturityUpdate)},handleChangeAssessmentOK:function(e){if(e.length){var t=!1;for(let i=0;i<e.length;i++)e[i].id.includes("uuid:")?(t=!0,e.splice(i,1),i--):(e[i].updateAction="CONNECT",e[i].service="3DSpace");t&&l.error(r.CHG_GOV_Relation_Cross_Service_NotSupported_Error),e.length&&E.ChgCRAffectedItemsDataGridModel.addExistingChildren(e)}}};return E.globalSubscribeForAffectedItemsBasisView(),E}),define("DS/ENOChgGovernanceUX/scripts/model/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridModel",["UWA/Class/Model","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/ENOChgServices/scripts/services/ChgServiceGlobalVariable","i18n!DS/ENOChgGovernanceUX/assets/nls/ENOChgGovernanceNLS","DS/ENOChgServices/scripts/services/ChgMembersServices","DS/ENOChgServices/scripts/services/ChgDataService","DS/ENOChgServices/scripts/services/ChgDataProcess","DS/ENOChgServices/scripts/services/ChgIDCardCommonServices","DS/ENOChgServices/scripts/services/ChgErrors","DS/ENOChgServices/scripts/services/ChgInfraService","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Mask","DS/TreeModel/BaseFilter","DS/ENOChgGovernanceUX/scripts/util/ChgDataGridUtil","DS/ENOChgGovernanceUX/scripts/view/changeRequest/facets/affectedItems/ChgCRAffectedItemsDataGridLayout","require"],function(e,t,i,n,o,a,s,r,l,d,c,u,p,g,h,m,C,f){"use strict";var v=h.inherit({publishedProperties:{},isDataFiltered:function(e){var t=e.getAttributeValue("id");return!(!this.filterModel||!this.filterModel.allowedIDs)&&-1===this.filterModel.allowedIDs.indexOf(t)},isEmpty:function(){return void 0===this.filterModel.allowedIDs}}),D=e.extend({init:function(e,t){this.contextID=e,this.contextDetails=t},setTreeDocument:function(e){this.treeDocument=e},getTreeDocument:function(){return this.treeDocument},createTreeDocument:function(){var e=new t({id:"craffectedItems",useAsyncPreExpand:!0});return e.isChildOf=function(e){for(var t=e.getChildren(),i=0;i<t.length;i++)if(this.options.grid.id==t[i].options.grid.id)return!0;return!1},this.setTreeDocument(e),e},registerCustomFilter:function(){this.treeDocument.getFilterManager().registerFilter("stringRole",v)},loadAffectedItemsData:function(e,t){e.prepareUpdate();var i=this.createTreeDocumentNodeModel(t);if(e.addRoot(i),e.pushUpdate(),o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&g.isMasked(e)&&g.unmask(e)}},createTreeDocumentNodeModel:function(e){for(var t=[],i=0;i<e.length;i++){var n=this.createTreeNode(e[i]);t.push(n)}return t},createTreeNode:function(e){let t=e.name?e.name+" | "+e.ownerFullName:e.ownerFullName;var n,a=e.maturityNLS;e.maturityWithBadge=e.maturityNLS;var s=this.getCustomTooltip(e);return n=o.getGlobalVariable().is3DSpace?'<a onclick=\'findFrame(getTopWindow(), "content").location.href = "../common/emxTree.jsp?objectId='+e.id+"\"'>"+UWA.String.escapeHTML(e.title)+"</a>":e.title,new i({label:n,subLabel:t,description:a,grid:e,icons:[e.icon],thumbnail:e.thumbnail,customTooltip:s,contextualMenu:["dummy placeholder"]})},getCustomTooltip:function(e){return e.name&&e.maturityNLS?a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Name+": "+e.name+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName+"\n"+a.CHG_GOV_DataGrid_Column_Maturity+": "+e.maturityNLS:a.CHG_GOV_DataGrid_Column_Title+": "+e.title+"\n"+a.CHG_GOV_DataGrid_Column_Owner+": "+e.ownerFullName},addExistingChildren:function(e){var t=this,i=this.contextID,n=document.getElementById("outer-affectedItems-grid-div");"undefined"!=n&&null!=n&&g.mask(n),r.addExistingInCRAffectedItems(i,e).then(async function(e){console.log(m),console.log("AffectedItems list: "+e);var i={},o={};e.data[0]&&e.data[0].non3DSpaceNonIndexedData&&(i=e.data[0].non3DSpaceNonIndexedData,e.data[0].mapping&&(o=e.data[0].mapping),e.data.splice(0,1));var s=await l.processCRAffectedItems(e);if(D.prototype.addNodesInLayoutModel(t.treeDocument,s),g.unmask(n),o.length>0&&await D.prototype.i3dxInformationFilteringAndCalling(i,o,t.treeDocument),i&&i.length>0){var r=new Map,d=i.length;for(let e=0;e<i.length;e+=50){let n=[];n=d<50?i.slice(e,e+d):i.slice(e,e+50);for(var h=[],C=new Map,f=n,v=0;v<f.length;v++){var b=f[v];h.push(b.id),C.set(b.id,b)}var w=[];if(h.length>0){var S=l.commonPredicatedForFedSearch(),I=await l.callFederatedSearch(h,S);if(I&&I.results&&I.results.length>0)w=await l.processCRAffectedItemsFederatedSearch(I,C)}D.prototype.addNodesInLayoutModel(t.treeDocument,w),r=new Map([...r,...C]),d-=50}if(r&&r.size>0){p.publish("updateIndexingIconForHideOrShowInAffectedItem",{});var _=await u.recent();if(_&&_.results&&_.results.length>0){var y=l.filterNonIndexedDataNew(_,r);r.size!=y.length&&c.warn(a.CHG_GOV_Not_Accessable_Data);var E=[];y.length>0&&(E=await l.processInformationForRecentCRAffected(y)),D.prototype.addNodesInLayoutModel(t.treeDocument,E)}}}g.unmask(n)},function(e){g.unmask(n)})},addNodesInLayoutModel:function(e,t){0==e.getChildren().length&&e._modelEvents.publish({event:"treeNotEmpty"});var i=D.prototype.createTreeDocumentNodeModel(t);if(e.prepareUpdate(),0==e.getRoots().length)e.addRoot(i);else for(var n=i.length-1;n>=0;n--)e.addRoot(i[n],0);e.pushUpdate()},removeChildren:function(){var e=this,t=[...this.treeDocument.getSelectedNodes()];if(this.treeDocument.unselectAll(),t.length){for(var i=[],n=0;n<t.length;n++)i.push({id:t[n].options.grid.id,updateAction:"DISCONNECT"});var s=this.contextID;r.removeCRAffectedItems(s,i).then(function([i,n]){if(null!=n)for(let e=0;e<t.length;e++){let i=!1;for(let o=0;o<n.length;o++)if(t[e].options.grid.id==n[o]){t.splice(e,1),i=!0;break}1==i&&e--}for(var s=0;s<t.length;s++)e.treeDocument.removeRoot(t[s]);if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&g.isMasked(e)&&g.unmask(e)}0==e.treeDocument.getChildren().length&&e.treeDocument._modelEvents.publish({event:"treeEmpty"}),null!=n&&0!=n.length||c.success(a.CHG_GOV_AffectedItems_Remove)},function(e){if(o.getGlobalVariable().is3DSpace){console.log("unmasking affected item 3dspace");let e=document.getElementById("crAffectedItemsFullViewContainer");e&&g.isMasked(e)&&g.unmask(e)}else{let e=document.getElementById("crAffectedItems");e&&g.isMasked(e)&&g.unmask(e)}})}else c.error(a.CHG_GOV_ChangeOrchestration_Remove_No_Objects)},i3dxInformationFilteringAndCalling:async function(e,t,i){var n=i;let a=t.length;var s=o.getGlobalVariable().tenant,r=o.getGlobalVariable().tenantMappings.find(e=>e.platformId===s);for(let i=0;i<a;i++){let o=t[i],a=o.uris,s=a.length,h=o.ServiceInfo,m=o.RelativePath,C=r[h];if(null==C||null==m)continue;let f=C+m;for(let t=0;t<a.length;t+=50){var d=[],c=new Map;let i=[];i=s<50?a.slice(t,t+s):a.slice(t,t+50);for(let t=0;t<i.length;t++){const n=i[t],o=e.findIndex(e=>e.id===n);if(-1!==o){const t=e.splice(o,1)[0];d.push(t),c.set(t.id,t)}}try{var p=await u.fetchbyService({ids:i,url:f});console.log("Result of is "+p);var g=await l.processCRAffectedWithi3dxItems(p,c);console.log("Node information with NLS value"+g),await D.prototype.addNodesInLayoutModel(n,g)}catch(e){console.log(e)}console.log("The sliced array is "+i),s-=50}}},filterView:function(e){let t=this.treeDocument,i=e.matchingIDs;t.setFilterModel({role:{filterId:"stringRole",filterModel:{allowedIDs:i}}})},enableColorizeView:function(e){let t=this.treeDocument.getAllDescendants();var i,n;i=e,n=function(e,i){t.map(t=>{if(t.options.grid.id===i){var n={grid:{biColor:e},color:e};t.updateOptions(n)}})},UWA.is(i,"array")&&i.forEach(function(e){var t=e.color,i=e.id;n(t,i)})},disableColorizeView:function(){this.treeDocument.getAllDescendants().map(e=>{e.updateOptions({grid:{biColor:"rgba(0, 0, 0, 0)"},color:"rgba(0, 0, 0, 0)"})})}});return D});