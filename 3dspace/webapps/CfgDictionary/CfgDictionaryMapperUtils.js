define("DS/CfgDictionary/CfgDictionaryMapperUtils",["UWA/Core","DS/CfgDictionary/CfgDictionaryTypeEnum"],function(e,t){"use strict";var i={},r=function(e,i,r){"reference"===r.kind?e[r.rel_lid]={type:t.OPTION,parent:i,name:r.attributes._name,title:r.attributes._title,description:r.attributes._description,image:r.attributes._image,seqNumber:parseInt(r.attributes._sequenceNumber),kind:"reference"}:r.kind},a=function(e,i,r,a,n){var s=0;if("reference"===r.kind)for(e[r.lid]={type:t.VARIANT,parent:i,name:r.attributes._name,image:r.attributes._image,description:r.attributes._description,mandatory:a,seqNumber:n,values:[],kind:"reference",title:r.attributes._title},s=0;s<r.values.member.length;s+=1)e[r.lid].values.push(r.values.member[s].rel_lid),e[r.values.member[s].rel_lid]={type:t.VALUE,parent:r.lid,name:r.values.member[s].attributes._name,description:r.values.member[s].attributes._description,image:r.values.member[s].attributes._image,kind:"reference",seqNumber:parseInt(r.values.member[s].attributes._sequenceNumber),title:r.values.member[s].attributes._title},e[r.values.member[s].id]={type:t.VALUE,parent:r.lid,name:r.values.member[s].attributes._name,image:r.values.member[s].attributes._image,description:r.values.member[s].attributes._description,kind:"reference",seqNumber:parseInt(r.values.member[s].attributes._sequenceNumber),title:r.values.member[s].attributes._title}},n=function(e,i,s){var m=0;e[s.lid]={parent:i,name:s.attributes._name,image:s.attributes._image,type:t.VARIABILITY_GROUP,seqNumber:parseInt(s.attributes._sequenceNumber),content:[],title:s.attributes._title};var l=s.variants?s.variants.member:[];for(m=0;m<l.length;m+=1)a(e,s.lid,l[m]),e[s.lid].content.push(l[m].lid);var u=s.options?s.options.member:[];for(m=0;m<u.length;m+=1)r(e,s.lid,u[m]),u[m].rel_lid&&e[s.lid].content.push(u[m].rel_lid);var o=s.variabilityGroups?s.variabilityGroups.member:[];for(m=0;m<o.length;m+=1)n(e,s.lid,o[m]),e[s.lid].content.push(o[m].lid)},s=function(e,i){"instance"===i.kind&&(e[i.lid]={id:i.id,name:i.attributes._name,image:i.attributes._image,type:t.PARAMETER,min:i.attributes._minValue,max:i.attributes._maxValue,kind:"instance",description:i.attributes._description,title:i.attributes._title})};return i.dicoMinifiedV3ToMap=function(t){var i={},m=void 0,l=void 0;if(null!=t){if(t.member)return this.formatDicoFromGetRuleCriteria(t);if("3.0"!==t._version)return null;var u,o,b=0,p=t.portfolioClasses?t.portfolioClasses.member[0].portfolioComponents.member[0]:t,d=p.options?p.options.member:[],c=p.variants?p.variants.member:[],f=p.variabilityGroups?p.variabilityGroups.member:[],g=p.parameters?p.parameters.member:[],v=p.rules&&p.rules.member?p.rules.member:[];for(b=0;b<d.length;b+=1)r(i,null,d[b]);for(b=0;b<c.length;b+=1)"instance"===c[b].kind&&c[b].attributes&&(m=c[b].attributes._mandatory,l=parseInt(c[b].attributes._sequenceNumber)),a(i,null,c[b],m,l);for(b=0;b<f.length;b+=1)n(i,null,f[b]);for(b=0;b<v.length;b+=1)u=i,o=v[b],u[o.id]={name:o.attributes._title,type:o.attributes._type};for(b=0;b<g.length;b++)s(i,g[b]);return i}e.log("CfgDictionaryMapperUtils.dicoMinifiedV3ToMap : The dictionary wasn't define")},i.formatDicoFromGetRuleCriteria=function(t){var i={};if(t.member){for(var r=0;r<t.member.length;r++){var a=t.member[r];switch(a.type){case"Variant":i[a.busLogicalId]={name:a.name,title:a.title,type:a.type,parent:a.parent,image:a.image,values:[]};break;case"Variant Value":i[a.relLogicalId]={name:a.name,title:a.title,type:a.type,parent:a.parent,image:a.image},i[a.parent]?i[a.parent].values.push(a.relLogicalId):i[a.parent]={values:[a.relLogicalId]};break;case"Option Group":case"Option":i[a.relLogicalId]={name:a.name,title:a.title,type:a.type,parent:a.parent,image:a.image};break;default:e.log("Issue CfgDictionaryMapperUtils.formatDicoFromGetRuleCriteria : Variability no type","error")}}return i}return null},i});