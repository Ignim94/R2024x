define("DS/WebInWinUtils/FramingValidator",[],function(){"use strict";var e={checkType:function(e,n,t,i){const a=typeof n;if(a!==t)throw new TypeError("Argument "+String(e+1)+" for function "+i+"() should be of type: "+t+". Actual type is: "+a)},hasParameter:function(e,n){return new URLSearchParams(e).has(n)},isExpectedType:function(e){return"string"===typeof e&&e.length>1},isRightFlowDirection:function(e){return"server"===e.data.from&&"client"===e.data.to},isSameSite:function(n){return e.removeParameterFromUrl(window.location.href,"WiWdgetId")===n||window.location.href===n},isUnSupportedType:function(e){const n=typeof e;return"undefined"===n||"function"===n||"symbol"===n},removeParameterFromUrl:function(e,n){const t=new URL(e);if(t.search&&t.searchParams.get(n))return t.searchParams.delete(n),t.toString()}};return e}),define("DS/WebInWinUtils/FramingLog",[],function(){"use strict";return{debug:function(e){this.__emit("debug",e)},error:function(e){this.__emit("error",e)},info:function(e){this.__emit("info",e)},warn:function(e){this.__emit("warn",e)},__emit:function(e,n){if("string"==typeof e)switch(e){case"debug":case"error":case"info":case"warn":console[e](`${(new Date).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"})} - ${(new Date).toLocaleTimeString("en-US")} : [A2X WebViewer] : ${n}`)}}}}),define("DS/WebInWinUtils/FramingService",["DS/WebInWinUtils/FramingLog","DS/WebInWinUtils/FramingValidator"],function(e,n){"use strict";var t={start:function(){window.addEventListener("message",async function(t){if(!n.isRightFlowDirection(t))return;const i=t.data.message;if(n.hasParameter(i.search,"WiWdgetId")&&n.isSameSite(i.navigationURL))try{switch(i.type){case"RunJavaScript":window.eval(i.code)}}catch(n){if(!(n instanceof SyntaxError))throw n;e.warn(`#${n.name}# due to ${n.message}`),e.warn(`#${n.name}# with stack ${n.stack}`),e.error(`Could not execute ${i.code} using ${i.type}() on webviewer with url: ${i.navigationURL}`)}}),window.addEventListener("contextmenu",async function(n){"boolean"!=typeof n.cancelable||n.cancelable?void 0!==n.preventDefault&&n.preventDefault():(e.warn(`The ${n.type} event couldn't be canceled.`),e.warn(`Indeed, cancelable property is : ${n.cancelable}.`),e.warn("So, browser's default context-menu will appear.")),this.dscef.__postMessage({type:"onBeforeContextMenu",navigationURL:window.location.href,search:window.location.search})}.bind(this),!1),window.addEventListener("resize",async function(){window.devicePixelRatio!==window.__lastRatio&&(this.dscef.__postMessage({type:"onZoomUpdate",navigationURL:window.location.href,params:window.devicePixelRatio,search:window.location.search}),window.__lastRatio=window.devicePixelRatio)}.bind(this),!1),window.__lastRatio=window.devicePixelRatio},dscef:{getContext:function(e){return n.isExpectedType(e)?(this.__postMessage({type:"getContext",params:e,navigationURL:window.location.href,search:window.location.search}),new Promise((e,n)=>{this.__receiveMessage("getContext",e,n)})):Promise.reject(new Error("1st argument is invalid: the name should be a non-empty string"))},getMyAppsURL:function(){return this.__postMessage({type:"getMyAppsURL",navigationURL:window.location.href,search:window.location.search}),new Promise((e,n)=>{this.__receiveMessage("getMyAppsURL",e,n)})},loadHomepage:function(){this.__postMessage({type:"loadHomepage",navigationURL:window.location.href,search:window.location.search})},loadValue:function(e){return n.isExpectedType(e)?(this.__postMessage({type:"loadValue",params:e,navigationURL:window.location.href,search:window.location.search}),new Promise((e,n)=>{this.__receiveMessage("loadValue",e,n)})):Promise.reject(new Error("1st argument is invalid: the name should be a non-empty string"))},saveValue:function(e,t){return n.isExpectedType(e)?n.isUnSupportedType(t)?Promise.reject(new Error(`2nd argument is invalid: unsupported type ${typeof t}`)):(this.__postMessage({type:"saveValue",params:[e,t],navigationURL:window.location.href,search:window.location.search}),new Promise((e,n)=>{this.__receiveMessage("saveValue",e,n)})):Promise.reject(new Error("1st argument is invalid: the name should be a non-empty string"))},sendString:function(...e){let t=[];const i=e.length;if(i<1)throw new Error("The sendString() function needs at least one argument.");for(let a=0;a<i;++a){const i=e[a];n.checkType(a,i,"string","sendString"),t.push(i)}this.__postMessage({type:"sendString",params:t,navigationURL:window.location.href,search:window.location.search})},showNotification:function(e,t,i){n.checkType(0,e,"string","showNotification"),n.checkType(1,t,"string","showNotification"),n.checkType(2,i,"number","showNotification"),this.__postMessage({type:"showNotification",params:[e,t,i],navigationURL:window.location.href,search:window.location.search})},__postMessage(e){var n=window.location!==window.parent.location?document.referrer:document.location.href;window.parent.postMessage({message:e,from:"client",to:"server"},n)},__receiveMessage(t,i,a){window.addEventListener("message",async function(o){if(!n.isRightFlowDirection(o))return;const r=o.data.message;if(n.hasParameter(r.search,"WiWdgetId")&&n.isSameSite(r.navigationURL))try{switch(r.type){case t:r.error?a(r.params):i(r.params)}}catch(n){e.warn(`#${n.name}# due to ${n.message}`),e.warn(`#${n.name}# with stack ${n.stack}`),e.error(`Could not execute ${r.type}() on webviewer with url: ${r.navigationURL}`)}},{once:!0})}}};return Object.defineProperty(t.dscef,"isA2X",{value:!0,writable:!1,configurable:!1}),t}),define("DS/WebInWinUtils/_dscef",["DS/WebInWinUtils/FramingService"],function(e){"use strict";return function(){var n=null;try{n=window.dscef?window.dscef:dscef}catch(t){t instanceof ReferenceError&&(n=e.dscef,e.start(),window.dscef=n)}return n}()}),define("DS/WebInWinUtils/dscef",["DS/WebInWinUtils/_dscef"],function(e){"use strict";var n={isA2X:function(){return!!("function"==typeof Object.hasOwn&&Object.hasOwn(e,"sendString")&&Object.hasOwn(e,"__postMessage")&&this.__hasSearchParam())||!!("function"==typeof e.hasOwnProperty&&e.hasOwnProperty("sendString")&&e.hasOwnProperty("__postMessage")&&this.__hasSearchParam())},is3Dx:function(){return!("function"!=typeof Object.hasOwn||!Object.hasOwn(e,"sendString")||Object.hasOwn(e,"__postMessage")||this.__hasSearchParam())||!("function"!=typeof e.hasOwnProperty||!e.hasOwnProperty("sendString")||e.hasOwnProperty("__postMessage")||this.__hasSearchParam())},__hasSearchParam:function(){const e=new URL(window.location.href);return!!e.search&&!!e.searchParams.get("WiWdgetId")}};return n.isA2X()?e:n.is3Dx()?(Object.defineProperty(e,"isA2X",{value:!1,writable:!1,configurable:!1}),e):void 0});