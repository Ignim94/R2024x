/*!  COPYRIGHT DASSAULT SYSTEMES 2015   */
define("DS/PADCommands/PADActionBar",["UWA/Core","DS/ApplicationFrame/ActionBar","DS/RuntimeView/NLSManager","DS/PADUtils/PADContext"],function(e,t,n,o){"use strict";return function(i){this.options={action_bar:{file:null,module:null,context:null,language:"en"},renderTo:null,callback:{onactionbarcb:null}},o.set(i.xnav_app),this.options=e.extend(this.options,i,!0),n.DEFAULT_LANGUAGE=this.options.action_bar.language;var s=new t(this.options.action_bar),r=this;if(UWA.is(this.options.callback.onactionbarcb,"function")){if(UWA.is(s.onActionBarDisplay,"function"))var a=s.onActionBarDisplay(function(){s._modelEvents.unsubscribe(a),r.options.callback.onactionbarcb.call(null,"onActionBarDisplay")});var c=s.onActionBarReady(function(){s._modelEvents.unsubscribe(c),r.options.callback.onactionbarcb.call(null,"onActionBarReady")})}s.elements.container.addClassName("xnav_actionbar"),s.inject(this.options.renderTo),s.open(!0)}}),define("DS/PADCommands/PADSelectAll",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,n=t.getRoots();if(n.length){t.prepareBroadcastSelect(),t.prepareUpdate(),t._selected_paths=[];var o=t.getXSO(),i=[];n.forEach(function(e){i.push(e),e.processDescendants({processNode:function(){this.isVisible()&&i.push(this)}})}),o.add(i),t.pushUpdate(),t.pushBroadcastSelect()}}}}),define("DS/PADCommands/PADSelectParent",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,n=t.getSelectedNodes();n.length&&(t.prepareBroadcastSelect(),t.prepareUpdate(),t.unselectAll(),n.forEach(function(e){e.getParent().select()}),t.pushUpdate(),t.pushBroadcastSelect())}}}),define("DS/PADCommands/PADToggleRightPanel",["UWA/Core","DS/ApplicationFrame/Command","DS/PADUtils/PADContext","DS/PADUtils/PADUtilsServices","DS/PADServices/utils/PlatformURL","DS/Utilities/Utils","DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/facets/Common/FacetsBase","i18n!DS/PADCommands/assets/nls/PADCommands.json","css!DS/PADCommands/assets/css/PADToggleRightPanel"],function(e,t,n,o,i,s,r,a,c,l,d){"use strict";return t.extend({_context:null,_propertiesWdg:null,_state:null,init:function(e){this._parent(e,{}),this._context=n.get(),this.enable()},execute:function(){var t=this,n=this._context.options.model.getXSO(),i=s.debounce(function(){!0===t._state&&t._selectionChange()},100);if(n.onPostAdd(i),n.onPostRemove(i),n.onEmpty(i),document.querySelector(".triptych-close-right.fonticon.fonticon-wrong").addEventListener("click",function(){t._state=!1,document.contains(document.querySelector(".enxpropertiestab"))&&document.querySelector(".enxpropertiestab").destroy()}),this._context.elements.appBody&&0===this._context.elements.appBody.getRightPanelContainer().firstElementChild.childElementCount){document.contains(document.querySelector(".enxpropertiestab"))&&document.querySelector(".enxpropertiestab").destroy();var c=t._context.elements.right;let n;t._propertiesWdg=new r({className:"enxpropertiestab",domId:"mysession-propertiestab",setEditButton:!0,readOnly:!1,typeOfDisplay:a.ALL,selectionType:a.NO_SELECTION,multiselection:!1,actions:[{name:"action_close_panel",text:d.Close,icon:"close",handler:function(){t._state=!1,t._propertiesWdg.destroy(),document.querySelector(".triptych-close-right.fonticon.fonticon-wrong").click()}}]}),t._propertiesWdg.removeFacets([a.FACET_VIEWS]),void 0!==widget.getValue("addinmode")&&"solidworks"===widget.getValue("addinmode")&&(t._propertiesWdg.removeFacets([a.FACET_RELATIONS]),require(["DS/ENORIPE_Relations/RelationsTabSettings"],function(n){var i={getPlatformID:function(){return o.getPlatformId()},getServiceID:function(){return"3DSpace"}};n.isAvailable(i,{isDraggable:!0}).then(function(n){e.is(n,"object")&&e.is(n.facetInfo)?(n.facetInfo.options={defaultProfile:"PowerBySolidworks_Relations"},n.facetInfo.position=2,t._propertiesWdg.addFacets([n.facetInfo])):console.log("facets info is NOT in good format")},function(){console.log("this facet is not available for this context = "+n)})},function(e){console.warn("Cannot load "+e.requireModules)})),t._propertiesWdg.addFacets([{require:"DS/PADServices/views/private/docsMgt/AttachmentsFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"specificationdocuments",icon:"docs",text:d.facet_text_specdocuments},options:{hideAttachments:!0,readonly:!1,renderDiv:".explorer-root"}},{require:"DS/PADServices/views/private/docsMgt/AttachmentsFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"referencedocuments",icon:"attach",text:d.facet_text_attachments},options:{hideSpecifications:!0,readonly:!1,renderDiv:".explorer-root",supportedTypes:{includedTypes:["Document","DOCUMENTS","Drawing"],excludedTypes:[]}}}]),widget.getPreference("pad_security_ctx")&&(n=widget.getPreference("pad_security_ctx").value),widget.getValue("makeFromFacet")&&t._propertiesWdg.addFacets([{require:"DS/ENOMadeFromUX/view/MBMFFacet",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"specsMadeFromFacet",icon:"part-made-from",text:d.facet_text_makefrom},options:{SecurityContext:n}}]),t._propertiesWdg.addFacets([{require:"DS/EditPropWidget/facets/GeneralHistory/History",alwaysVisible:!0,services:["3DSpace"],inheritance:!0,content:null,facet:{name:"History",icon:"clock",text:d.facet_text_history},options:{}}]),t._context.togglePanel("right"),t._selectionChange(),t._propertiesWdg.inject(c)}},_selectionChange:function(){var e=this;e._state=!0;var t=this._context.options.model.getXSO().get();new Promise(function(n){if(1===t.length){e._propertiesWdg.initDatas([]);var o=new c({metatype:"businessobject",objectId:t[0].getID(),source:"3DSpace"});document.querySelector(".triptych-close-right.fonticon.fonticon-wrong").style.display="none",i.retrievePlatformUrl({addDefaults:!0,initWSAcess:!0}).then(function(){e._propertiesWdg.initDatas([o])})}else 0===t.length?(document.querySelector(".triptych-close-right.fonticon.fonticon-wrong").style.display="block",e._propertiesWdg.initDatas([])):(document.querySelector(".triptych-close-right.fonticon.fonticon-wrong").style.display="block",e._propertiesWdg.initDatas([]),document.contains(document.querySelector(".EditProp_MainError"))?document.querySelector(".EditProp_MainError").getChildren()[0].innerHTML=d.multi_selection_text:setTimeout(function(){document.querySelector(".EditProp_MainError").getChildren()[0].innerHTML=d.multi_selection_text},100));n()})}})}),define("DS/PADCommands/PADColumnCusto",[],function(){"use strict";return{execute:function(e){require(["DS/PowerByHome/utils/PADCustomizeView","DS/PADUtils/PADUtilsServices"],function(t,n){new t({id:e.command_id,columns:e.tree.options.columns,render_div:".powerbyHomeComponent-main",events:{modifyColumRendering:e.tree.modifyColumRendering.bind(e.tree),custoViewChange:e.tree.custoViewChange.bind(e.tree),reset:e.tree.reset.bind(e.tree),customizationWindowChange:function(e){n.customizationWindowChange(e)}}})})}}}),define("DS/PADCommands/PADCollapseAll",[],function(){"use strict";return{execute:function(e){require(["DS/Utilities/Data"],function(t){var n=e.model,o=n.getSelectedNodes();n.prepareUpdate(),t.forEach(o,function(e){e.hasChildren()&&e.collapseAll()},10,function(){n.pushUpdate()})})}}}),define("DS/PADCommands/PADModelEvents",["DS/CoreEvents/ModelEvents"],function(e){"use strict";var t=new e;return{getModelEvents:function(){return t},publish:function(e){return t.publish(e)},subscribe:function(e,n){return t.subscribe(e,n)},unsubscribe:function(e){return t.unsubscribe(e)},unsubscribeAll:function(e){return t.unsubscribeAll(e)}}}),define("DS/PADCommands/PADPropertiesView",["UWA/Core","DS/ApplicationFrame/CommandCheckHeader","UWA/Promise","DS/PADUtils/PADContext","DS/Utilities/Utils","UWA/Class/Model","i18n!DS/PADCommands/assets/nls/PADCommands.json"],function(e,t,n,o,i,s,r){"use strict";var a=[];return t.extend({_context:null,_propertiesWdg:null,init:function(t){this._parent(t,{}),this._context=o.get();var s=this,c=this._context.options.model.getXSO(),l=i.debounce(function(){!0===s.getState()&&s._selectionChange()},100);if(c.onPostAdd(l),c.onPostRemove(l),c.onEmpty(l),this._context.elements.appBody){if(0===this._context.elements.appBody.getRightPanelContainer().firstElementChild.childElementCount){var d=new n(function(t){var n=s._context.elements.appBody.getRightPanelContainer();require(["DS/EditPropWidget/EditPropWidget","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel","DS/EditPropWidget/facets/Common/FacetsBase"],function(o,i,a,c){for(var l=s._context.getPropertiesFacet(),d=[],u=0;u<l.length;u++){var p=l[u];if(e.is(p,"string")&&"properties"===p)d.push(i.FACET_PROPERTIES);else{if(p.facet.text||(p.facet.text=r[p.facet.name+"_cmd_title"]),p.actions&&p.actions.length>0)for(var m=0;m<p.actions.length;m++)p.actions[m].text=r[p.facet.name+p.actions[m].text];d.push(p)}}s._propertiesWdg=new o({className:"enxpropertiestab",setEditButton:!0,readOnly:!1,typeOfDisplay:i.ALL,selectionType:i.NO_SELECTION,facets:d,multiselection:!1,collapseTabs:!1,actions:[{name:"action_close_panel",text:r.Close,icon:"close",handler:function(){s.setState(!1)}}]}),s._propertiesWdg.inject(n),!0===s.getState()&&s._selectionChange(),t()})});a.push(d)}this.onStateChange(function(){!0===s.getState()&&s._selectionChange(),s._context.togglePanel("right")})}},_selectionChange:function(){var e=this._context.options.model.getXSO().get(),t=this,o=new n(function(o){n.all(a).then(function(){if(1===e.length){t._propertiesWdg.initDatas([]);var n=new(require("DS/EditPropWidget/models/EditPropModel"))({metatype:"businessobject",objectId:e[0].getID(),source:"3DSpace"});t._propertiesWdg.initDatas([n])}else if(0===e.length)t._propertiesWdg.initDatas([]);else{t._propertiesWdg.initDatas([{metatype:"businessobject",objectId:"fakeid1",source:"fakekeservice"},{metatype:"businessobject",objectId:"fakeid1",source:"fakekeservice"}])}o()})});a.push(o)}})}),define("DS/PADCommands/PADSelectChildren",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,n=t.getSelectedNodes();require(["DS/PADCommands/PADSelectCmdsUtils"],function(e){var o=e._filterParentsOnly(n);t.prepareBroadcastSelect(),t.prepareUpdate(),t.unselectAll();var i=t.getXSO(),s=[];o.forEach(function(e){s.push(e),e.processDescendants({processNode:function(){s.push(this)}})}),i.add(s),t.pushUpdate(),t.pushBroadcastSelect()})}}}),define("DS/PADCommands/PADSelectLeaves",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,n=t.getSelectedNodes();require(["DS/PADCommands/PADSelectCmdsUtils"],function(e){var o=e._filterParentsOnly(n);t.prepareBroadcastSelect(),t.prepareUpdate(),t.unselectAll();var i=t.getXSO(),s=[];o.forEach(function(e){e.processDescendants({processNode:function(){!1===this.hasChildren()&&"noChildren"===this.getState()&&s.push(this)}})}),i.add(s),t.pushUpdate(),t.pushBroadcastSelect()})}}}),define("DS/PADCommands/PADSelectSiblings",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,n=t.getSelectedNodes();t.prepareBroadcastSelect(),t.prepareUpdate(),t.unselectAll();var o=[];n.forEach(function(e){var t=e.getParent(),n=JSON.stringify(e.getOccurencePath());e.getOccurencePath()&&""===e.getOccurencePath()[0]&&e.getOccurenceCADIDPath&&(n=JSON.stringify(e.getOccurenceCADIDPath())),o.push(n),t.getChildren().forEach(function(t){var i=JSON.stringify(t.getOccurencePath());t.getOccurencePath()&&""===t.getOccurencePath()[0]&&e.getOccurenceCADIDPath&&(i=JSON.stringify(t.getOccurenceCADIDPath())),-1===o.indexOf(i)&&n!==i?t.isSelected()||t.select():t.isSelected()&&t.unselect()})}),t.pushUpdate(),t.pushBroadcastSelect()}}}),define("DS/PADCommands/PADExport",[],function(){"use strict";return{execute:function(e){require(["DS/PADCommands/_XNavExportTemplate","DS/PowerByHome/utils/PADCustomizeView","DS/PADUtils/PADUtilsServices","i18n!DS/PADUtils/assets/nls/PADUtils.json"],function(t,n,o,i){function s(e,t){var n=e.options.grid[t],o=Date.parse(n);return isNaN(o)||(n=new Date(o).toLocaleString()),n}var r={customizedColumnRenderers:{"ds6w:created":function(e){return s(e,"ds6w:created")},"ds6w:modified":function(e){return s(e,"ds6w:modified")},"ds6w:reserved":function(e){return e.options.grid["ds6w:reserved"]?i.reserved:i.notReserved}},renderColumn:function(e,t){return"tree"===e?t.options.label:UWA.is(r.customizedColumnRenderers[e],"function")?r.customizedColumnRenderers[e](t):UWA.is(t.options.grid[e],"string")?t.options.grid[e]:void 0}};switch(t.setOptions({renderRow:function(e){var t='<td style="border:1px solid black;font-size:.8em;word-break:break-word;display:table-cell;">',n="<tr>";n+=t+e.node.getDepth()+"</td>",n+=t+e.node.getLabel()+"</td>";for(var o=0,i=e.columns.length;o<i;o++){var s=r.renderColumn(e.columns[o].dataIndex,e.node);void 0===s&&(s=""),n+=t+s+"</td>"}return n+="</tr>"},exportcsvRow:function(e){var t="";t+='"'+e.node.getDepth()+'",',t+='"'+e.node.getLabel()+'",';for(var n=0,o=e.columns.length;n<o;n++){var i=r.renderColumn(e.columns[n].dataIndex,e.node);void 0===i&&(i=""),-1<i.search("&quot;")&&(i=i.replace(/&quot;/g,'""')),t+='"'+i+'",'}return t+="\r\n"}}),e.command_id){case"Print":t.print({context:e.xnav_app});break;case"ExportCSV":t.export_csv({context:e.xnav_app});break;case"PrintOptions":case"ExportCSVOptions":new n({id:e.command_id,columns:e.xnav_app.getPADTreeListView().options.columns,render_div:".powerbyHomeComponent-main",events:{modifyColumRendering:e.xnav_app.getPADTreeListView().modifyColumRendering.bind(e.xnav_app.getPADTreeListView()),reset:e.xnav_app.getPADTreeListView().reset.bind(e.xnav_app.getPADTreeListView()),ok:function(){switch(e.command_id){case"PrintOptions":t.print({context:e.xnav_app});break;case"ExportCSVOptions":t.export_csv({context:e.xnav_app})}},customizationWindowChange:function(e){o.customizationWindowChange(e)}}})}})}}}),define("DS/PADCommands/PADExpandN",[],function(){"use strict";return{execute:function(e){require(["DS/PADUtils/views/PADLevelSel"],function(t){var n=e.model.getSelectedNodes();new t({events:{onApply:function(e){n.forEach(function(t){t.expandNLevels({numberOfLevelsToExpand:parseInt(e)})})}}})})}}}),define("DS/PADCommands/PADGraphCmds",[],function(){"use strict";var e=null;return{execute:function(t){var n=t.xnav_app.options.views.graphview;switch(t.command_id){case"ReframeAll":n.reframeAll();break;case"ReframeOn":n.reframeOn();break;case"ToggleOverview":n.toggleOverview();break;case"LayoutDown":case"LayoutRight":case"LayoutUp":case"LayoutLeft":n.toggleLayout(t.command_id);break;case"SwapThumbState":require(["DS/etree/syncwidget"],function(t){null===e&&(e=t.ThumbnailState.EXPANDED);var o=!1;e===t.ThumbnailState.EXPANDED?(e=t.ThumbnailState.COLLAPSED,o=!0):e===t.ThumbnailState.COLLAPSED&&(e=t.ThumbnailState.EXPANDED,o=!0),!0===o&&n.setAllThumbnailsState(e)})}}}}),define("DS/PADCommands/PADSelectCmdsUtils",[],function(){"use strict";function e(e,t){for(var n=!1,o=0;o<t.length&&!1===n;o++)e.getID()!==t[o].getID()&&(n=e.isDescendantOf(t[o]));return n}return{_filterParentsOnly:function(t){for(var n=[],o=t.length-1;o>=0;o--){var i=t[o];!1===e(i,t)&&n.push(i)}return n}}}),define("DS/PADCommands/_XNavExportTemplate",["i18n!DS/PADUtils/assets/nls/PADUtils.json","UWA/Class","UWA/Class/Options","DS/PADUtils/PADUtilsServices","DS/PADUtils/PADPredicatesNls"],function(e,t,n,o,i){"use strict";function s(e,t){var n=e.options.grid[t],o=Date.parse(n);return isNaN(o)||(n=new Date(o).toLocaleString()),n}var r={customizedColumnRenderers:{"ds6w:created":function(e){return s(e,"ds6w:created")},"ds6w:modified":function(e){return s(e,"ds6w:modified")}},renderColumn:function(e,t){return"tree"===e?t.options.label:UWA.is(r.customizedColumnRenderers[e],"function")?r.customizedColumnRenderers[e](t):UWA.is(t.options.grid[e],"string")?t.options.grid[e]:void 0}};return t.singleton(n,{defaultOptions:{use_default:!0,columns_to_remove:["tree","find_in_ctx","hide_show","bi_color"],renderTitle:function(e){return""},renderHeader:function(t){var n='<th style="border:1px solid black; background-color:#A7C942; text-align:left; color:#FFFFFF; font-size:.8em; padding-top:5px; paddingbottom:4px;">',o="<thead><tr>";o+=n+e.export_level+"</th>",o+=n+t.tree.text+"</th>";for(var i=0,s=t.columns.length;i<s;i++){o+=n+t.columns[i].text+"</th>"}return o+="</tr></thead>"},beginNewTable:function(e){return e.node.isRoot()},renderRow:function(e){var t='<td style="border:1px solid black;font-size:.8em;word-break:break-word;display:table-cell;">',n="<tr>";n+=t+e.node.getDepth()+"</td>",n+=t+e.node.getLabel()+"</td>";for(var o=0,i=e.columns.length;o<i;o++){var s=r.renderColumn(e.columns[o].dataIndex,e.node);void 0===s&&(s=""),n+=t+s+"</td>"}return n+="</tr>"},csv_base_file_name:e.csv_base_file_name,exportcsvHeader:function(t){var n="\ufeff";n+='"'+e.export_level+'",',n+='"'+t.tree.text+'",';for(var o=0,i=t.columns.length;o<i;o++){n+='"'+t.exportHeaders[o]+'",'}return n+="\r\n"},exportcsvRow:function(e){var t="";t+='"'+e.node.getDepth()+'",',t+='"'+e.node.getLabel()+'",';for(var n=0,o=e.columns.length;n<o;n++){var i=r.renderColumn(e.columns[n].dataIndex,e.node);void 0===i&&(i=""),t+='"'+i+'",'}return t+="\r\n"}},init:function(e){this._parent(e),this.setOptions(this.defaultOptions)},initialize:function(e){this.setOptions(e)},print:function(e){if(!UWA.is(e,"object")||!UWA.is(e.context))throw new Error("Invalid input parameters: context undefined");for(var t=e.context,n=require("DS/PowerByHome/utils/PowerBySettings").getAvailableColumns(),i=t.options.views.treelistview.options.columns.slice(),s=this.options.columns_to_remove.slice(),r=0;r<i.length;r++){var a=i[r].customisation?i[r].customisation:i[r].xnav_options,c=!(!a||!a.exportable)&&a.exportable.value;if(void 0!==c&&!c){var l=i[r].dataIndex;-1===s.indexOf(l)&&s.push(l)}}for(var d,u=[],p=0;p<i.length;p++){var m=i[p];if("tree"===m.dataIndex)d=m;else if(-1!==n.available_columns.indexOf(m.dataIndex)&&-1===s.indexOf(m.dataIndex)){m.dataIndex;u.push(m)}}var f=this.options.renderTitle(),D=this,h=!1;function g(){var e='<table style="border:1px solid black; border-collapse:collapse;">';return e+=D.options.renderHeader({tree:d,columns:u}),h=!0,e+="<tbody>"}function v(){return h=!1,'</tbody><table style="border:1px solid black; border-collapse:collapse;"><br>'}t.options.model.getRoots().forEach(function(e){!0===D.options.beginNewTable({node:e})?(!0===h&&(f+=v()),f+=g()):!1===h&&(f+=g()),!0===e.isVisible()&&(f+=D.options.renderRow({node:e,columns:u}),e.processDescendants({processNode:function(){!0===D.options.beginNewTable({node:this})&&(!0===h&&(f+=v()),f+=g()),!0===this.isVisible()&&(f+=D.options.renderRow({node:this,columns:u}))}}))}),h&&(f+=v()),o.printhtml(f)},export_csv:function(t){if(!UWA.is(t,"object")||!UWA.is(t.context))throw new Error("Invalid input parameters: context undefined");for(var n=this,i=t.context,s=require("DS/PowerByHome/utils/PowerBySettings").getAvailableColumns(),r=i.options.views.treelistview.options.columns.slice(),a=this.options.columns_to_remove.slice(),c=0;c<r.length;c++){var l=r[c].customisation?r[c].customisation:r[c].xnav_options,d=!(!l||!l.exportable)&&l.exportable.value;if(void 0!==d&&!d){var u=r[c].dataIndex;-1===a.indexOf(u)&&a.push(u)}}var p,m=[],f=(i.options.views.treelistview,[]);function D(t){var n="";if(""===t.text||null===t.text||void 0===t.text){var o="treelistview_customization_"+t.dataIndex;n=UWA.is(e[o])?e[o]:t.dataIndex}else n=t.text;return n}for(var h=0;h<r.length;h++){var g=r[h];if("tree"===g.dataIndex)p=g;else if(-1!==s.available_columns.indexOf(g.dataIndex)&&-1===a.indexOf(g.dataIndex)){g.dataIndex;m.push(D(g)),f.push(g)}}var v=this.options.exportcsvHeader({tree:p,columns:f,exportHeaders:m});i.options.model.getRoots().forEach(function(e){!0===e.isVisible()&&(v+=n.options.exportcsvRow({node:e,columns:f}),e.processDescendants({processNode:function(){!0===this.isVisible()&&(v+=n.options.exportcsvRow({node:this,columns:f}))}}))}),o.downloadfile(v,this.options.csv_base_file_name+(new Date).toString().split(" ").splice(1,4).join(" ")+".csv","text/csv")}})}),define("DS/PADCommands/PADSelectInversion",[],function(){"use strict";return{execute:function(e){e.xnav_app;var t=e.model,n=t.getRoots();if(n.length){t.prepareBroadcastSelect(),t.prepareUpdate();var o=t.getXSO(),i=[];n.forEach(function(e){e.isSelected()||i.push(e),e.processDescendants({processNode:function(){this.isSelected()||i.push(this)}})}),t.unselectAll(),o.add(i),t.pushUpdate(),t.pushBroadcastSelect()}}}}),define("DS/PADCommands/PADSwitchView",["DS/PADCommands/PADModelEvents"],function(e){"use strict";return{execute:function(t){e.publish({event:"PADCommand/ToogleView",data:t.command_id})}}}),define("DS/PADCommands/PADExpandAll",["DS/PADCommands/PADModelEvents"],function(e){"use strict";return{execute:function(t){var n,o=t.model.getSelectedNodes().filter(function(e){return e.isVisible()}).sort(function(e,t){return e._getRowID()>t._getRowID()});null!=widget.getValue("isExpandNodeProtocol")&&Boolean(widget.getValue("isExpandNodeProtocol"))&&e.publish({event:"HomeComponent/preExpand/expandAllNode",data:!0});var i=[];o.forEach(function(e){if(null!=e.getChildren()){var t=-1;for(n=0;n<i.length&&-1===t;n++)t=e.getParents().indexOf(i[n]);-1===t&&(i.push(e),e.expandAll())}}),null!=widget.getValue("isExpandNodeProtocol")&&Boolean(widget.getValue("isExpandNodeProtocol"))&&e.publish({event:"HomeComponent/preExpand/expandAllNode",data:!1})}}}),define("DS/PADCommands/PADActionBarCmds",["DS/ApplicationFrame/Command","DS/PADUtils/PADContext","DS/PADUtils/PADUtilsServices","DS/PADCommands/PADModelEvents"],function(e,t,n,o){"use strict";var i=["ExpandAll","CollapseAll","ExpandN","SelectChildren","SelectParent","SelectSiblings","SelectLeaves","ReframeOn"],s=["ReframeAll","ReframeOn","ToggleOverview","LayoutDown","LayoutRight","LayoutUp","LayoutLeft","SwapThumbState"],r=["Print","PrintOptions","ExportCSV","ExportCSVOptions"],a=["ExpandAll","CollapseAll","ExpandN"],c=["Print","ExportCSV"],l=["ColumnVisibility"];function d(e,t){return-1!==e.indexOf(t)}return e.extend({init:function(e){this._parent(e);var n=this,a=(u=t.get()).options.model?u.options.model:u.getPADTreeDocument();if(-1!==i.indexOf(this.options.ID)&&-1!==s.indexOf(this.options.ID))this._check_view(!0),o.subscribe({event:"PADCommand/ToogleView/UpdateCmd"},n._check_view.bind(n)),a.getXSO().onChange(function(){n._check_view(!0)});else if(-1!==i.indexOf(this.options.ID))this._check_select(),a.getXSO().onChange(this._check_select.bind(this));else if(-1!==s.indexOf(this.options.ID))this._check_view(),o.subscribe({event:"PADCommand/ToogleView/UpdateCmd"},n._check_view.bind(n));else if(-1!==r.indexOf(this.options.ID))this._check_roots(),o.subscribe({event:"PADCommand/RootVisibilityChange"},this._check_roots.bind(this));else if(c.indexOf(this.options.ID)&&-1!==c.indexOf(this.options.ID)){this._parent(e);var u;a=(u=t.get()).options.model?u.options.model:u.getPADTreeDocument();this.disable(),o.subscribe({event:"PADCommand/RootVisibilityChange"},this._check_added_roots.bind(this))}else d(l,this.options.ID)&&(this._check_if_treeview(),o.subscribe({event:"PADCommand/ToogleView/UpdateCmd"},n._check_if_treeview.bind(n)))},execute:function(){var e=this,o=t.get(),i=o.options.model?o.options.model:o.getPADTreeDocument();switch(this.options.ID){case"treelistview":case"graphview":case"tileview":case"thumbnailview":require(["DS/PADCommands/PADSwitchView"],function(t){t.execute({command_id:e.options.ID,xnav_app:o})});break;case"ExpandAll":require(["DS/PADCommands/PADExpandAll"],function(e){e.execute({xnav_app:o,model:i})});break;case"CollapseAll":require(["DS/PADCommands/PADCollapseAll"],function(e){e.execute({xnav_app:o,model:i})});break;case"ExpandN":require(["DS/PADCommands/PADExpandN"],function(e){e.execute({xnav_app:o,model:i})});break;case"SelectAll":require(["DS/PADCommands/PADSelectAll"],function(e){e.execute({xnav_app:o,model:i})});break;case"SelectChildren":require(["DS/PADCommands/PADSelectChildren"],function(e){e.execute({xnav_app:o,model:i})});break;case"SelectInversion":require(["DS/PADCommands/PADSelectInversion"],function(e){e.execute({xnav_app:o,model:i})});break;case"SelectParent":require(["DS/PADCommands/PADSelectParent"],function(e){e.execute({xnav_app:o,model:i})});break;case"SelectSiblings":require(["DS/PADCommands/PADSelectSiblings"],function(e){e.execute({xnav_app:o,model:i})});break;case"SelectLeaves":require(["DS/PADCommands/PADSelectLeaves"],function(e){e.execute({xnav_app:o,model:i})});break;case"ReframeAll":case"ReframeOn":case"ToggleOverview":case"LayoutDown":case"LayoutRight":case"LayoutUp":case"LayoutLeft":case"SwapThumbState":require(["DS/PADCommands/PADGraphCmds"],function(t){t.execute({command_id:e.options.ID,xnav_app:o,model:i})});break;case"Print":case"PrintOptions":case"ExportCSV":case"ExportCSVOptions":if("Print"===e.options.ID&&n.printWindowOpen())return;require(["DS/PADCommands/PADExport"],function(t){t.execute({command_id:e.options.ID,xnav_app:o,model:i})});break;case"ColumnVisibility":require(["DS/PADCommands/PADColumnCusto"],function(t){var n=o.options.views?o.options.views.treelistview:o.getPADTreeListView();t.execute({command_id:e.options.ID,xnav_app:o,tree:n})});break;case"Find":require(["DS/PADCommands/PADFind"],function(e){new e({context:o,position:"above_action_bar"})});break;default:throw new Error("Unknown command")}},_check_roots:function(){t.get().getPADTreeDocument().getRoots().length>0?this.enable():this.disable()},_check_added_roots:function(e){t.get().getPADTreeDocument();0===e.data.nb_root?this.disable():this.enable()},_check_select:function(){if(!0===!!t.get().getPADTreeDocument().getXSO().get().length){var e=t.get().getPADTreeDocument().getXSO().get();d(a,this.options.ID)&&!function(e){for(var t=0,n=0;n<e.length;n++)null!==e[n].getChildren()&&t++;return t>0}(e)?this.disable():this.enable()}else this.disable()},_check_view:function(e){if(!0===e){var n=!!t.get().getPADTreeDocument().getXSO().get().length;"graphview"===t.get().options.active_view&&!0===n?this.enable():this.disable()}else{switch(t.get().options.active_view){case"tileview":case"thumbnailview":t.get().getPADTreeDocument()._pagerview&&t.get().getPADTreeDocument()._pagerview.hide();break;case"treelistview":case"graphview":t.get().getPADTreeDocument()._pagerview&&t.get().getPADTreeDocument()._pagerview.show()}"graphview"===t.get().options.active_view?this.enable():this.disable()}},_check_if_treeview:function(){switch(t.get().getPADTreeDocument().options.active_view){case"treelistview":this.enable();break;case"graphview":case"tileview":case"thumbnailview":this.disable()}}})});