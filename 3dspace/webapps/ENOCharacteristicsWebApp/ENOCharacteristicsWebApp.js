define("DS/ENOCharacteristicsWebApp/ENOCharacteristicsWebApp",["UWA/Core","UWA/Controls/Abstract","UWA/Class/Debug","DS/ENOCharacteristicsWebApp/controls/CharacteristicsControl","DS/ENOCharacteristicsWebApp/utils/RequestUtils","DS/ENOCharacteristicsWebApp/utils/ComponentUtil","DS/ENOCharacteristicsWebApp/utils/Constants","css!DS/ENOCharacteristicsWebApp/ENOCharacteristicsWebApp.css","css!DS/UIKIT/UIKIT.css","css!DS/W3DXComponents/W3DXComponents.css"],function(e,t,i,o,n,s,a){"use strict";return t.extend(i,{debugMode:!0,mInstantiatedIn:void 0,mRootModel:null,mIsConsolidatedView:void 0,charControl:null,init:function(t){this._parent({}),this.objId=t.ObjectID,this.objActualType=t.ObjectActualType,this.objType=t.ObjectType,this.objRevision=t.ObjectRevision,this.objMaturity=t.ObjectMaturity,this.objOriginated=t.ObjectOriginated,this.objLastModified=t.ObjectLastModified,this.objDescription=t.ObjectDescription,this.objOwner=t.ObjectOwner,this.objTitle=t.ObjectTitle,this.mInstantiatedIn=t.InstantiatedIn,this.mIsConsolidatedView=t.isConsolidatedView,this.mParentApp=t.ParentApp;var i=this;this.elements.container=new e.Element("div",{class:"enogls-chrts-root-div-CharacteristicsWebApp"});var o=this.elements.container,n=new e.Class.Listener;return i.loadConfiguration(function(){var e={M1ObjectId:i.objId,charContainer:o};if(i.mRootModel=s.getItemModel(e),i.mRootModel.setAsRootItem(),i.mIsConsolidatedView&&i.mRootModel.setIsConsolidatedRootItem(!0),i.render(),i.charControl.setModelEventsCallback(),n.listenTo(i.charControl,"onContextChange",i.onContextChange.bind(i)),n.listenTo(i.charControl,"DeleteCharacteristicSelected",i.DeleteCharacteristicSelected.bind(i)),null!==i.objId){i.charControl.setViewPreferences(i.objId);var t={ownerItemRootId:i.mRootModel.mObjectId};i.charControl.setOwnerItemRootModelId(t);var a=i.itemsDetails();s.getCharacteristicIdCardDetails(i.mRootModel,a),s.fetchCharacteristicStructure(i.mRootModel,!1)}}),this},itemsDetails:function(){return{objType:this.objType,objMaturity:this.objMaturity,objOriginated:this.objOriginated,objRevision:this.objRevision,objLastModified:this.objLastModified,objDescription:this.objDescription,objOwner:this.objOwner,objTitle:this.objTitle}},loadConfiguration:function(e){var t=this.objId;if(null===n.get3DSpaceCSRFToken()){n.send3DSpaceRequest(n.getGLSWebServiceURL()+"characteristics/configuration","GET",{type:"json",headers:{"Content-type":"application/json"}},function(i){var o;console.log("Success"),n.set3DSpaceCSRFToken(i.csrf),n.setEnableTestMethodSpecificationFlag(i.enableTestMethodSpecification),n.setTestMethodsTypesActualValue(i.typesActualValue),n.setSecurityContext(i.SecurityContext),o=n.getGLSWebServiceURL()+a.CHARACTERISTICS_ENDPOINT+a.CHARACTERISTICS_GET_FIELDSEPARATOR,n.send3DSpaceRequest(o,"GET",{type:"json",headers:{"Content-type":"application/x-www-form-urlencoded"}},function(e){n.fieldSeparator=e.result},function(e){console.log(e),n.fieldSeparator="COMMA"}),n.send3DSpaceRequest(a.PARTSPECS_BASE_URL+a.PARTSPECS_GET_WORK_UNDER_CHANGE_ID+"?objectId="+t,"GET",{type:"json",headers:{"Content-type":"application/x-www-form-urlencoded"}},function(e){e&&e.changeMaturity&&"Prepare"!=e.changeMaturity&&n.setWorkUnderChange(e.changeId)},function(e){console.error(e)}),n.setTimeout(i.timeout),e()},function(t){console.log("Failure"),console.error(t),e()})}else e()},isInstantiatedIn3DDashboard:function(){return"3DDashboard"===this.mInstantiatedIn?(n.setInitializedin3DD(!0),!0):(n.setInitializedin3DD(!1),!1)},isConsolidatedView:function(){return!0===this.mIsConsolidatedView},render:function(){this.charControl=new o(this).inject(this.elements.container)},onContextChange:function(e){this.isInstantiatedIn3DDashboard()&&this.charControl.refreshCharacteristicView(this.mRootModel,!1)},onCharacteristicsSelected:function(){},DeleteCharacteristicSelected:function(){},createHeader:function(){var t=new e.Element("div",{id:"pageHeadDiv",class:"pageHead"}),i=new e.Element("div",{id:"pageHeadDiv",class:"pageHead"});return t.inject(i),i},onSwitch:function(e,t,i){}})});