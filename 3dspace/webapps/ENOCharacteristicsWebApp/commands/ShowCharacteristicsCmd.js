define("DS/ENOCharacteristicsWebApp/commands/ShowCharacteristicsCmd",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/ApplicationFrame/CommandCheckHeader","DS/Windows/Dialog","DS/ENOCharacteristicsWebApp/controls/CharacteristicsWindow","i18n!DS/ENOCharacteristicsWebApp/assets/nls/ENOCharacteristicsWebAppNLS"],function(i,t,e,s,o,a){"use strict";return e.extend({_myDialog:null,_cmd:null,_characteristicsWindow:null,init:function(e){t.subscribe("DS.MFN.Selection.SelectionModified",this.onSelectionChange.bind(this)),t.subscribe("DS.MGA.Selection.SelectionModified",this.onSelectionChange.bind(this)),t.subscribe("DS.GLS.UpdateWindowTitle",this.updateTitle.bind(this)),e.parentApp=e.context.widget.data.appId,this._parent(e,{mode:"exclusive",isAsynchronous:!1});var d=this.getFrameWindow().getImmersiveFrame(),n=e.ID+"_WindowTitle";this._cmdWindowTitle=n,this._cmd=e.ID,this._characteristicsWindow=new o(e);var c=this;if(this._myDialog=new s({title:a[n],content:c._characteristicsWindow,immersiveFrame:d,resizableFlag:!0,position:{at:"left top",my:"left top"},width:1190,height:380}),i.is(this._characteristicsWindow)&&this._characteristicsWindow.setDlgWindow(this._myDialog),i.is(this._myDialog)){c=this;this._myDialog.close=function(){c.toggleState();var t=c._characteristicsWindow.mFrameWindow;if(i.is(t)){var e=t.elements.filterDialog;i.is(e)&&e.clearAndHide()}},this._myDialog.hide()}this.onStateChange(this._stateChanged)},_stateChanged:function(){var e,s;if(this.getState()){e=i.is(this.options.context)?this.options.context.getSelectedNodes():[],s={selectedObjectsPID:[],modifiedObjectSelectionState:null,modifiedObjectPID:[],widgetId:widget.id?widget.id:"defaultId"},i.is(e,"array")&&e.forEach(function(i){s.selectedObjectsPID.push(i.getID())});var o=s.selectedObjectsPID.pop();i.is(this._myDialog)&&(this._myDialog.title=a[this._cmdWindowTitle],this._myDialog.show(),t.publish("DS."+this._cmd+".CharWindowShow",{widgetId:widget.id?widget.id:"defaultId",selectedMGAObjectId:o}))}else i.is(this._myDialog)&&(this._myDialog.hide(),t.publish("DS."+this._cmd+".CharWindowHide",{widgetId:widget.id?widget.id:"defaultId"}))},onSelectionChange:function(){var i=this.options.context?a[this._cmdWindowTitle]:"";this._myDialog.title=i},updateTitle:function(t){i.is(this._myDialog)&&(this._myDialog.title=a[this._cmdWindowTitle]+":  "+t.title)}})});