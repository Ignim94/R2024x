define("DS/ENOCharacteristicsWebApp/commands/CreateFromMaster",["UWA/Core","DS/ApplicationFrame/Command","DS/UIKIT/Mask","DS/ENOCharacteristicsWebApp/controls/SearchConfiguration","DS/ENOCharacteristicsWebApp/utils/Constants","DS/ENOCharacteristicsWebApp/utils/RequestUtils","DS/ENOCharacteristicsWebApp/utils/AlertManager","DS/ENOCharacteristicsWebApp/utils/ComponentUtil","DS/ENOCharacteristicsWebApp/utils/CommandsManagerUtil"],function(t,e,r,a,s,i,n,o,c){"use strict";return e.extend({isInsert:!0,mSearchConfig:null,mTitle:null,init:function(t){this.charControl=t.context,this.mTitle="Results - Characteristics Master in Released State",this.mSearchConfig=new a(this.mTitle),this._parent(t,{mode:"exclusive",isAsynchronous:!1})},beginExecute:function(){this.charControl=c.getCharacteristicsControlFromCommand(this.options.context)},execute:function(t){this.mSearchConfig.activate("","Characteristic Master","current==Released",this.onSelectedCharMaster.bind(this),"","")},onSelectedCharMaster:function(t){var e=this,a=e.charControl.mRootItem.mWebAppViewContainer;r.mask(a);for(var o=[],c=0;c<t.length;c++)o[c]={masterId:t[c].id};var C={objectId:e.charControl.mObjectId,charMasterIds:o},h=JSON.stringify(C);i.send3DSpaceRequest(i.getGLSWebServiceURL()+s.CHARACTERISTICS_ENDPOINT+s.CHARACTERISTICS_CREATE_MASTER_ON_ITEM,"POST",{type:"text",headers:{"Content-type":"application/json; charset=UTF-8"},data:h},function(t){var s=JSON.parse(t);e.charControl.mRootItem.loadCharacteristics(s);var i={rootNode:e.charControl.mRootItem.mTreeNodeModel,reOrderAcrossCategory:!1};e.charControl.updateSequenceOrder(i),r.unmask(a)},function(t,s){r.unmask(a),n.displayErrorResponse(e.charControl.mAlert,s)})},endExecute:function(){}})});