define("DS/ENOCharacteristicsWebApp/models/CharacteristicsCategoryModel",["UWA/Class/Model","DS/TreeModel/TreeNodeModel","DS/ENOCharacteristicsWebApp/utils/Constants"],function(e,t,r){"use strict";return e.extend({mOwnerItem:null,mCharCategory:null,mTreeNodeModel:null,mNumNodes:0,setup:function(e){this.mCharCategory=e.iCharCategory,this.mOwnerItem=e.iOwnerItem,this.mTreeNodeModel=new t({label:"",grid:{title:e.iCharCategory,itemId:e.iOwnerItem.mObjectId}}),this.mTreeNodeModel.setAttribute("ownerModel",this),this.mTreeNodeModel.setAttribute("modelType",r.CHARACTERISTICS_CATEGORY_MODEL_TYPE),this.mTreeNodeModel.onSelect(function(){void 0!==this&&this!==window&&this.getChildren()&&this.getChildren().forEach(function(e){e.isHidden()||e.select()})}),this.mTreeNodeModel.onUnselect(function(){void 0!==this&&this!==window&&this.getChildren()&&this.getChildren().forEach(function(e){!e.isHidden()&&e.isSelected()&&e.unselect()})})},copyDataFromNodeModel:function(e){this.mTreeNodeModel.setLabel(e.label),this.mTreeNodeModel.setAttribute("charCategory",e.grid.charCategory),this.mTreeNodeModel.setAttribute("ownerModel",this),this.mNumNodes=e.children.length},removeCategory:function(){for(var e=0;e<this.mOwnerItem.mCharCategoryList.length;e++)if(this.mTreeNodeModel.options.label.indexOf(this.mOwnerItem.mCharCategoryList[e].mCharCategory)>-1){this.mOwnerItem.mCharCategoryList.splice(e,1);break}this.mTreeNodeModel.remove()},updateCategory:function(){if(this.mTreeNodeModel.hasChildren()){this.mNumNodes=this.mTreeNodeModel.getChildren().length;var e=this.mCharCategory+" ("+this.mNumNodes+")";this.mTreeNodeModel.setLabel(e),this.mTreeNodeModel.setAttribute("charCategory",e)}else{for(var t=0;t<this.mOwnerItem.mCharCategoryList.length;t++)if(this.mTreeNodeModel.options.label.indexOf(this.mOwnerItem.mCharCategoryList[t].mCharCategory)>-1){this.mOwnerItem.mCharCategoryList.splice(t,1);break}this.mTreeNodeModel.remove()}}})});