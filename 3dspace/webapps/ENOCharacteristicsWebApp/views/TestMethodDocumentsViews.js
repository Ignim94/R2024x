define("DS/ENOCharacteristicsWebApp/views/TestMethodDocumentsViews",["UWA/Core","UWA/Class/View","i18n!DS/ENOCharacteristicsWebApp/assets/nls/ENOCharacteristicsWebAppNLS","DS/ENOCharacteristicsWebApp/utils/RequestUtils","DS/ENOCharacteristicsWebApp/utils/Constants"],function(e,t,n,i,o){"use strict";return t.extend({setup:function(){},render:function(){this.elements.mContainer=new e.Element("div",{class:"enosho-properties-container review"}),this.container=this.elements.mContainer,this.model.save(),this.renderForm(),this.model.get("documentTitle")&&this.renderData()},renderForm:function(){if(this.elements.mPropertiesContainer=new e.Element("div",{class:"enosho-properties-prop-wrap"}).inject(this.container),this.elements.mPropertiesTable=new e.Element("table",{class:"table table-striped"}).inject(this.elements.mPropertiesContainer),this.elements.mPropertiesTableBody=new e.Element("tbody",{}).inject(this.elements.mPropertiesTable),this.model.get("documentTitle"))if(this.mPropertyFields=[],"string"==typeof this.model.get("documentTitle")){var t=[{documentId:this.model.get("documentId"),documentTitle:this.model.get("documentTitle"),modelId:this.model.id}];this.mPropertyFields.push(this.renderTableProperty(t))}else for(var i=0;i<this.model.get("documentTitle").length;i++){t=[{documentId:this.model.get("documentId")[i],documentTitle:this.model.get("documentTitle")[i],modelId:this.model.id}];this.mPropertyFields.push(this.renderTableProperty(t))}else this.mPropertyFields=[this.renderTableProperty(n.NoDocumentsFound)]},renderTableProperty:function(t){var s=new e.Element("tr",{}).inject(this.elements.mPropertiesTableBody),r=new e.Element("td",{class:"title"}).inject(s);return t===n.NoDocumentsFound?new e.Element("p",{html:t}).inject(r):new e.Element("a",{id:"downloadDoc",href:"javascript:void(0)",events:{click:function(){i.send3DSpaceRequest(i.getGLSWebServiceURL()+o.CHARACTERISTICS_ENDPOINT+o.DOWNLOAD+"?fileId="+t[0].documentId+"&objectId="+t[0].modelId,"GET",{type:"blob",headers:{"Content-type":"application/x-www-form-urlencoded"}},function(n){var i=window.URL.createObjectURL(n),o=new e.Element("a",{href:i,download:t[0].documentTitle,target:"_blank"}).inject(document.body);o.hide(),o.click(),setTimeout(function(){o.destroy(),window.URL.revokeObjectURL(i)},100)},function(){alert(n.FileDownloadFailureMessage)})}},html:t.documentTitle}).inject(r)},htmlDecode:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},renderData:function(){var e=this,t=function(t,n){console.log(n);var i="";n&&(i=e.htmlDecode(n)),e.mPropertyFields[t].setHTML(i)};if("string"==typeof this.model.get("documentTitle"))t(0,this.model.get("documentTitle"));else for(var n=0;n<this.model.get("documentTitle").length;n++)t(n,this.model.get("documentTitle")[n])}})});