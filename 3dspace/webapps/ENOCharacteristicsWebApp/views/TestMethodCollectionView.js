define("DS/ENOCharacteristicsWebApp/views/TestMethodCollectionView",["UWA/Core","DS/WebappsUtils/WebappsUtils","DS/W3DXComponents/Views/EmptyView","DS/W3DXComponents/Views/Layout/GridView","DS/W3DXComponents/Views/Layout/NestedScrollView","DS/W3DXComponents/Views/Item/ThumbnailView","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/ContentSet","DS/W3DXComponents/Collections/ActionsCollection","DS/ENOCharacteristicsWebApp/utils/RequestUtils","DS/ENOCharacteristicsWebApp/utils/Constants","DS/UIKIT/SuperModal","i18n!DS/ENOCharacteristicsWebApp/assets/nls/ENOCharacteristicsWebAppNLS"],function(e,t,i,n,o,s,l,c,a,r,d,h,m){"use strict";var p=n.extend({emptyView:i,setup:function(){return this.container.removeClassName("loading"),this._parent.apply(this,arguments)},itemViewOptions:{mapping:{title:function(){var e=this.model.get("latest");return"TRUE"===e||""===e?this.model.get("name"):this.model.get("name")+'  <span><img title="'+m.LatestRevisionExists+'" style="height:15px;width=15px;" src="../../webapps/ENOCharacteristicsWebApp/assets/icons/32/colorSwatchLightOrange.png" /></span>'},subtitle:"type",image:function(){return r.get3DSpaceURL()+"/webapps/ENOCharacteristicsWebApp/assets/images/I_Document.png"},description:"description",content:function(){var e=this.model.get("originated"),t=this.model.get("description"),i=this.model.get("owner"),n="";return i&&(n+=i+"</br>"),e&&(n+=e+"</br>"),t&&(n+=t+"</br>"),n}},contextualActions:function(){var e=[],t=new h({closable:!0,animate:!0,className:"deleteCharConfirmModal",renderTo:document.body,okButtonText:m.OK});return!0===window.contextObjectAccess.Modify&&e.push({text:m.RemoveTestMethod,fonticon:"cancel",handler:function(e){t.confirm(m.RemoveTestMethodConfirmAlert,m.RemoveTestMethod,function(t){if(1==t){var i={};i.view=e,i.method="POST",i.data={charObjId:window.characId,testMethodId:e.model._attributes.id},e.model.destroy(i)}})}}),e},onItemViewClick:function(e,t){e!==this.currentItemView&&function(){this._selectionState.isActive?this.selectItemView(e,{event:t,silent:!0}):this.selectItemView(e,{event:t,silent:!1})}.bind(this)()},appendHtml:function(e,t,i){var n=e.container,o=n.getChildren();i>=o.length?n.appendChild(t.container):n.insertBefore(t.container,o[i]),this.currentItemView&&this.currentItemView.model.id===t.model.id&&this.selectItemView(t,{silent:!0})}}}),u=o.extend({nested:p,setup:function(){return this.listenTo(this,{onInfiniteScroll:this.onInfiniteScroll.bind(this),onPullToRefresh:this.onPullToRefresh.bind(this)}),this.listenTo(this.collection,{onReload:this.onCollectionReload.bind(this),onSync:this.onCollectionSync.bind(this)}),this._parent.apply(this,arguments)},onInfiniteScroll:function(){this._loadCollectionNextPage()},onPullToRefresh:function(){this._reloadCollection()},onCollectionReload:function(){this._reloadCollection()},onCollectionSync:function(){this.container.removeClassName("loading"),this.scrollView.useInfiniteScroll(!1)},_reloadCollection:function(){if(!this.collection.isSyncing()){var e=this,t={onComplete:function(){e.container.removeClassName("loading"),e.scrollView.endLoading()}};this.collection.getFirstPage(t)}},_loadCollectionNextPage:function(){}});return c.extend({emptyView:i,contextualActions:function(){return{id:"delete",text:"Delete",fonticon:"trash",multisel:!0,handler:function(e){Core.log("delete on :"+e.model.get("title"))}}},defaultOptions:{emptyView:i,actions:{},switcher:{},detail:{},contents:{views:[{id:"tile",view:u,default:!0,title:m.TileView,itemView:l},{id:"thumbnail",title:m.ThumbnailView,view:u},{id:"list",view:u,itemView:l}]}}})});