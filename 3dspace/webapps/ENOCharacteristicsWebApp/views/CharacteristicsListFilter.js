define("DS/ENOCharacteristicsWebApp/views/CharacteristicsListFilter",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","UWA/Class/Options","DS/Logger/Logger","DS/ENOCharacteristicsWebApp/views/CharacteristicsFilterView","DS/Windows/Dialog","DS/ENOCharacteristicsWebApp/utils/CommandsManagerUtil","i18n!DS/ENOCharacteristicsWebApp/assets/nls/ENOCharacteristicsWebAppNLS","DS/UIKIT/Tooltip"],function(i,t,e,s,o,r,n,l,a,h){"use strict";return t.extend(s,{name:"ListFilter",_logger:null,_charWindow:null,_charDlgWindow:null,_frmWindow:null,init:function(i){this._logger=o.getLogger("ListFilter"),this._logger.log("init"),this._parent(i),this._charWindow=l.getCharacteristicsWindowFromCommand(i.context),this.setOptions(i);var t=i.renderTo;if(UWA.is(this._charWindow)){var s=this._charWindow.getCharListControl();this._frmWindow=this._charWindow.mFrameWindow,this._charDlgWindow=this._charWindow.getDlgWindow(),t||(t=this._charDlgWindow.immersiveFrame);var a=UWA.createElement("div"),h=this;this._listsrcview=new r({CharacteristicsControl:s,CharacteristicsWindow:this._charDlgWindow}).render().inject(a);var g=this.getAbsPositionToPlace(),c={my:"top center",at:"top center"};switch(i.position){case"beside_action_bar":c={to:this._charDlgWindow,my:"left top",at:"left top",offsetX:g.x,offsetY:g.y};break;default:this._logger.log("unknown style")}var d=null;if(!this._frmWindow.elements.filterDialog){(d=new n({className:this.name+"_dialog",content:a,immersiveFrame:t,resizableFlag:!1,titleBarVisibleFlag:!1,closeButtonFlag:!1,usePaddingFlag:!1,autoCloseFlag:!1,position:c,width:40,height:"auto"})).elements._titleBarDiv.hide(),d.getContent().addClassName("charfltr-wux-window");h=this;d.clearAndHide=function(){h._listsrcview.setFilter(""),this.hide()},this._frmWindow.elements.filterDialog=d}e.subscribe("DS/Windows/Dialog#close",this.closeDialog.bind(this))}else this._logger.log("Warning: Char Window not set")},closeDialog:function(i){this._logger.log("closeDialog"),this._charDlgWindow===i.dsModel&&(this._frmWindow.elements.filterDialog.close(),this._frmWindow.elements.filterDialog=null)},getAbsPositionToPlace:function(){this._logger.log("getAbsPositionToPlace");var i={x:320,y:-20};if(!UWA.is(this._charWindow))return i;var t,e=UWA.is(this._charDlgWindow)?this._charDlgWindow.getAbsolutePosition():{x:80,y:10};return t=this._charWindow.elements.container,i.x=e.x+.35*t.scrollWidth+320,i.y=e.y+t.scrollHeight-20,i},resetAbsPosition:function(){var i=this.getAbsPositionToPlace();this._frmWindow.elements.filterDialog.setAbsolutePosition(i)},toggleVisibility:function(){this._logger.log("toggleVisibility");var i=this._charWindow.mFrameWindow.elements.filterDialog;if(null!==i)if(!0===i.visibleFlag){var t=i.getZIndex(),e=-1,s=this.options.renderTo;if(s)for(var o=0;o<s.windows.length;o++){var r=s.windows[o];if(r&&r!==i){var n=r.getZIndex();e<n&&(e=n)}}if(e>=t){var l=e+1;i.getContent().setStyle("z-index",l),this.resetAbsPosition()}else i.hide(),this._listsrcview.setFilter("")}else i.show(),this.resetAbsPosition(),i.bringToFront()}})});