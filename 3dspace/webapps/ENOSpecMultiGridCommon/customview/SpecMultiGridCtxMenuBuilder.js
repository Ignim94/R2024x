define("DS/ENOSpecMultiGridCommon/customview/SpecMultiGridCtxMenuBuilder",["DS/Controls/Abstract","DS/TreeModel/TreeNodeModel","DS/DataGridView/DataGridViewContextualMenuBuilder","DS/Utilities/Dom","i18n!DS/DataGridView/assets/nls/translation"],function(e,t,i,n,l){"use strict";return e.extend({name:"SpecMultiGridCtxMenuBuilder",init:function(e){this._collectionView=e},buildMenu:function(e,t){var i=this;if(!i._collectionView)return console.log("A collection view is mandatory to build its contextual menu"),[];t=UWA.extend({pin:!0,firstColumnsVisibility:!0,columnsManagement:!0,sizeColumnToFit:!0,insertRow:!1},t);var n=i._collectionView._contextualMenuBuilder,l=[];return n._supportedMenus.forEach(function(o){if(!0===t[o]){var s="_create"+(o.substring(0,1).toUpperCase()+o.substring(1,o.length))+"ContextualMenu";if("firstColumnsVisibility"==o)var a=i[s](e);else a=n[s](e);a.length>0&&l.length>0&&l.push({type:"SeparatorItem",title:""}),l=l.concat(a)}}),l},_createFirstColumnsVisibilityContextualMenu:function(e){var t=[],i=e.cellInfos&&-1===e.cellInfos.rowID;if(!i&&e.infos&&e.infos.target&&(i=n.firstParentWithClass(e.infos.target,"wux-layouts-header")),i)for(var l=void 0,o=this._collectionView.layout,s=o.getLeafColumns(),a=0;a<s.length;a++){l=s[o._orderedColumnsIndexes[a]];var r=o.getColumnVisibleFlag(l.dataIndex)?"selected":"unselected";t.push({type:"CheckItem",title:l.text,icon:l.icon,state:o.getColumnAlwaysVisibleFlag(l.dataIndex)?"disabled|"+r:r,action:{callback:function(e){if(e&&e.context&&e.context.id){var t=o.getColumnVisibleFlag(e.context.id);o.setColumnVisibleFlag(e.context.id,!t,{isUserInteraction:!0})}},context:{id:l.dataIndex}}})}return t}})});