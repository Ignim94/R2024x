define("DS/ENOSpecMultiGridCommon/controller/SpecMultiGridViewManager",["UWA/Core","UWA/Class","DS/ENOSpecMultiGridCommon/customview/SpecMultiGridCustomGridView","DS/ENOSpecMultiGridCommon/utils/SpecMultiGridBusinessUtil","DS/ENOSpecMultiGridCommon/utils/Constants","i18n!DS/ENOSpecMultiGridCommon/assets/nls/SpecMultiGridCommon"],function(e,t,o,i,n,l){"use strict";return t.extend({init:function(t){var o=t;this._parent(o),this.appCore=o.appCore,this.itemId=o.itemId;var i=o.container;this.modelEvents=o.modelEvents,this.model=o.model,this.currentTabKey=o.currentTabKey,this.rowDragEnabledFlag=!t.dvgOpts||!1!==t.dvgOpts.rowDragEnabledFlag,this.basicModelEvents=o.appCore.basicModelEvents,this.container=e.createElement("div",{id:"grid-row-view"}).inject(i),this._subscribe()},_subscribe:function(){this.eventList=[]},addColumn:function(e,t,o){if(!o){this.grid.addColumnOrGroup(e,t)}},removeColumn:function(e,t){t&&this.grid.removeColumnOrGroup(e)},setColumns:function(e){this.columns=e},drawGrid:function(e){var t=this,i=e.enableCustomView;!function(){t.grid=new o({columns:t.columns,showModelChangesFlag:!0,showTreeIconsFlag:!0,showRowBorderFlag:!0,treeDocument:t.model,showNodeKPIColorFlag:t.model.isColorized,cellSelection:"none",columnSelection:"multiple",rowSelection:"multiple",rowDragEnabledFlag:t.rowDragEnabledFlag,onContextualEvent:function(e,t){if(e&&e.collectionView&&e.cellInfos){e.collectionView.columns.length;var o=e.cellInfos.columnID,n=e.cellInfos.rowID;if(!(o>=0&&n>=0)){let t=void 0;return i||(t={columnsManagement:!1}),e.collectionView.buildDefaultContextualMenu(e,t)}}}.bind(this)});let n={colHeaderHTMLObjId:e.colHeaderHTMLObjId,rowHeaderIndex:e.rowHeaderIndex,colHeaderIndex:e.colHeaderIndex};t.grid.setContextManager(e.contextGridManager),t.grid.manageColumnHeaderRequests(n),t.grid.initializeContextualMenuBuilder(),t.grid.inject(t.container),t.grid.layout.columnHeaderHeight=40,t.grid.layout.useLastColumnWidthAutoFlag=!0,t.grid.layout.cellHeight=24,e.customRepresentation&&t.grid.getTypeRepresentationFactory().registerTypeRepresentations(JSON.stringify(e.customRepresentation)),t.model.setLayoutInstance(t.grid.layout),t.addEvents()}(),this.model.unselectAll()},addEvents:function(){},highlightCell:function(e,t){if(e&&t){var o=this.grid.layout.getColumnIndex(t),i=this.grid.layout.getCellIDFromCoordinates({rowID:e,columnID:o});i&&this.grid.selectCell(i)}},setColumnVisibilityFlag:function(e,t){this.grid.layout.setColumnVisibleFlag(e,t)},setExportableColumns:function(e){this.exportableColumns=e},exportCSV:function(e){var t=this.grid.layout.getVisibleOrderedColumnsIndexes(),o=[];if(t&&t.length>0){this.model.selectAll();for(var n=0;n<t.length;n++){var l=t[n],s=this.grid.layout.getDataIndexFromColumnIndex(l);this.exportableColumns.indexOf(s)>=0&&o.push(s)}var r=this.grid.getAsCSV({forceQuotes:!1,allColumns:!1,onlySelectedRows:!(!e||!e.onlySelectedRows)&&e.onlySelectedRows,columnKeys:o,columnSeparator:e&&e.columnSeparator?e.columnSeparator:void 0});i.downloadCSV(r,e.fileName),this.model.unselectAll()}},personalizeColumns:function(){this.grid.showCustomViewsDialog()},destroy:function(){this.eventList&&this.eventList.length>0&&this.modelEvents.unsubscribeList(this.eventList)}})});