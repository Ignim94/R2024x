define("DS/ENOSpecMultiGridCommon/SpecMultiGridCommonView",["UWA/Core","UWA/Class","DS/ENOSpecMultiGridCommon/model/SpecMultiGridTreeDocument","DS/ENOSpecMultiGridCommon/controller/SpecMultiGridViewManager","DS/ENOSpecMultiGridCommon/controller/SpecMultiGridCollectionToolBar","i18n!DS/ENOSpecMultiGridCommon/assets/nls/SpecMultiGridCommon","css!DS/ENOSpecMultiGridCommon/ENOSpecMultiGridCommon.css"],function(e,t,i,r,n,o){"use strict";return t.extend({init:function(t){this._parentView=t,this.itemNodes=t.itemIDs,this.container=t.container,this.modelEvents=t.modelEvents,this.appCore=t.appCore,this.columns=t.columns,this.currentTabKey=t.currentTabKey,this.toolbarContainer=e.createElement("div",{id:"multiitemgrid-toolbar"}).inject(this.container),this.subscribeEvents();var r={modelEvents:this.modelEvents,enableCrossWidgetFeature:!1,currentTabKey:this.currentTabKey,appCore:this.appCore};this.gridTreeDocument=new i(r),this.model=this.gridTreeDocument.getTreeDocuments()},setToolBarActions:function(e){var t={container:this.container,modelEvents:this.modelEvents,currentTabKey:this.currentTabKey,appCore:this.appCore};this.toolbar=new n(t),this.toolbar.setCurrentModel(this.model),this.toolbar.setActions(e),this.toolbar.draw(this.toolbarContainer)},setFiltersOnColumns:function(e){this.gridManager.setFiltersOnColumns(e)},initializeGridViewManager:function(){this.multigrid=e.createElement("div",{id:"multi-edit-grid"}).inject(this.container),this.gridManager=new r({container:this.multigrid,itemNodes:this.itemNodes,appCore:this.appCore,model:this.model,modelEvents:this.modelEvents,currentTabKey:this.currentTabKey})},subscribeEvents:function(){this.subs=[]},getGridNodes:function(){return this.model.getOriginalGridRoots()},getGridNodeCount:function(){return this.model.getOriginalGridRoots().length},setColumns:function(e){this.columns=e},setColumnsOnDatagridView:function(){this.gridManager&&this.gridManager.setColumns(this.columns)},addColumn:function(e,t){if(this.gridManager){var i=this.gridManager.columns.find(function(t){return t.dataIndex===e.dataIndex});this.gridManager.addColumn(e,t,i)}},findColumn:function(e){return this.gridManager.columns.find(function(t){return t.dataIndex===e})},removeColumns:function(e){var t=this;t.gridManager&&e.forEach(function(e){var i=t.findColumn(e);t.gridManager.removeColumn(e,i)})},render:function(e){if(this.gridManager&&(this.gridManager.drawGrid(e),this.gridManager.grid))return this.gridView=this.gridManager.grid,this.gridView},getColumnsXSO:function(){if(this.gridView)return this.gridView.getColumnsXSO()},unSelectAll:function(){this.gridView&&this.gridView.unselectAll()},getColumnIndex:function(e){let t=-1;if(this.gridView){let i=this.gridView.columns;if(i)for(let r in i)if(i[r].dataIndex==e.dataIndex){t=r;break}return t}},getSelectedColumnIdentifiers:function(){if(this.gridView){let e=[],t=this.gridView.getColumnsXSO();if(t._items&&(t._items,1)){let i=t._items;for(let t in i)e.push(this.gridView.layout.getColumnIdentifiers(i[t]))}return e}},getDataGridInstance:function(){return this.gridView},addRootNodes:function(e,t){e&&this.gridTreeDocument.addRoot(e,t)},removeRootNodes:function(e){e&&this.gridTreeDocument.removeRoot(e)},removeGroupingTable:function(){this.model.removeFakeGridTable()},groupRoots:function(e){let t=this.getPreferredView();t?Constants.GRID_VIEW==t?this.gridManager.grid.getTreeDocument().getRoots().length>0&&this.gridManager.grid.groupRows({dataIndexesToGroup:Array.isArray(e)?e:[e]}):Constants.BIG_TILE==t&&this.gridTreeDocument.groupRoots(e):this.isTileViewRendered?this.gridTreeDocument.groupRoots(e):this.gridManager.grid.getTreeDocument().getRoots().length>0&&this.gridManager.grid.groupRows({dataIndexesToGroup:Array.isArray(e)?e:[e]})},getPreferredView:function(){var e="grid-preferred-view-"+this.currentTabKey;return null==widget.getValue(e)?Constants.GRID_VIEW:widget.getValue(e)},unselectAll:function(){this.model.unselectAll()},getTreeDocument:function(){return this.model},exportGrid:function(e){var t={fileName:e?e+"__"+(new Date).toString().split(" ").splice(1,4).join(" ")+".csv":this.currentTabKey+"_"+(new Date).toString().split(" ").splice(1,4).join(" ")+".csv",columnSeparator:widget.getValue("column-seperator")};this.gridManager.exportCSV(t)},destroy:function(){this.toolbar.destroy(),this.multigrid.destroy(),this.gridTreeDocument.destroy(),this.gridManager&&this.gridManager.destroy(),this.subs&&this.modelEvents&&this.modelEvents.unsubscribeList(this.subs)}})});