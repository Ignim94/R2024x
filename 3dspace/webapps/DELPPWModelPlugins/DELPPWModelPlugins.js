define("DS/DELPPWModelPlugins/DatabasePlugin/DatabasePlugin",["UWA/Core","UWA/Promise","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWNavigationServices/NavigateUtil","DS/DELPPWModelServices/ModelUtils","DS/DELPPWModelServices/BehaviorUtil","DS/DELPPWNavigationServices/SwitchDBModeManager","DS/DELPPWResourceServices/ResourceUtils"],function(e,t,n,i,o,r,s,u){"use strict";return function(c){var a,l,d,f,g=[],m=[];return f=function(){return e.is(d)||(d=c.getPlugins("DicoPlugin").instance),d},a=function e(t,i){var o,r,s;if(i.id!==t.id){for(o=n.getParentInstancesFromCollection(i.id),s=0;s<o.length;s++)if(r=o[s],e(t,n.getAggregatingReferenceModelFromInstance(r)))return!0;return!1}return!0},l=function t(i,o){var r,s=[];return(s=n.getParentInstancesFromCollection(i)).length>0?s.forEach(function(e){var n,r;n=e.get("PID"),r=e.get("isAggregatedBy"),m.unshift(i),m.unshift(n),t(r,o),m=m.slice(2)}):(m.unshift(i),r=e.clone(m),o.push(r),m=m.slice(1)),o},{name:"DatabasePlugin",onStart:function(){var e=this;n.setReferenceCollectionEvents({onAdd:function(e,t,n){c.getMediator().notify("referenceAdded",[e,t,n])},onChange:function(e,t,n){c.getMediator().notify("referenceChanged",[e,t,n])},"onChange:sortIndex":function(e,t,n){c.getMediator().notify("changeSortIndex",[e,t,n])},onRemove:function(t,i,o){var r,s,u=e.getInstancesFromCollection(t.id),a=e.getParentInstancesFromCollection(t.id);for(r=0;r<a.length;r++)e.removeInstance(a[r]);for(r=0;r<u.length;r++)e.removeInstance(u[r]);s=n.getImpactedConnections(t.id),e.removeConnection(s,{silent:!0}),c.getMediator().notify("connectionRemoved",[s]),c.getMediator().notify("referenceRemoved",[t,i,o])}}),n.setConnectionsCollectionEvents({onAdd:function(e,t,n){c.getMediator().notify("connectionAdded",[e,t,n])},onChange:function(e,t,n){c.getMediator().notify("connectionChanged",[e,t,n])},onRemove:function(e,t,n){c.getMediator().notify("connectionRemoved",[e,t,n])}}),n.setInstanceCollectionEvents({onAdd:function(e,t,n){c.getMediator().notify("instanceAdded",[e,t,n])},onChange:function(e,t,n){c.getMediator().notify("instanceChanged",[e,t,n])},onRemove:function(t,i,o){var r;r=n.getImpactedConnections(null,t.id),e.removeConnection(r,{silent:!0}),c.getMediator().notify("connectionRemoved",[r]),c.getMediator().notify("instanceRemoved",[t,i,o])}}),g.push(c.addExternalListener("reset",e.resetAll))},onStop:function(){var e,t;for(n.removeCollectionEvents(),e=0,t=g.length;e<t;e++)c.removeExternalListener(g[e]);g=[]},findSomeConnection:function(e,t){return n.findSomeConnection(e,t)},findConnections:function(e){return n.findConnections(e)},findReferences:function(e){return n.findReferences(e)},findInstances:function(e){return n.findInstances(e)},getAllChildrenFromCollection:function(e){var t={referencesPID:[e],instancesPID:[]};return n.expandOnBackbone(e,t),t},getInstancesFromCollection:function(t,i){var o,r=i||{};return o=n.getInstancesFromCollection(t),e.is(r.sort)&&r.sort&&n.sortInstancesByTreeOrder(o),o},getParentInstancesFromCollection:function(e){return n.getParentInstancesFromCollection(e)},getReference:function(e){return n.getReferenceFromCollection(e)},getAllReferences:function(){return n.getAllReferences()},getReferencesFromArray:function(e){return n.getReferencesArrayFromCollection(e)},getReferenceModelFromInstance:function(e){return n.getReferenceModelFromInstance(e)},getAggregatingReferenceModelFromInstance:function(e){return n.getAggregatingReferenceModelFromInstance(e)},getReferenceModel:function(t){var n=null,i=this.getReference(t),o=null,s=null;return e.is(i)||(n=this.getInstance(t),e.is(n)?i=this.getReferenceModelFromInstance(n):c.getLogger().debug("Failed to get reference model. No instance or reference model found for PID: "+t)),r.isMdlAccessTestEnabled()&&(e.is(n)&&(c.getLogger().debug("Manipulated instance is: "),o=n.pick("PID","PLM_ExternalID","V_TreeOrder","isAggregatedBy","isInstanceOf"),c.getLogger().debug(JSON.stringify(o,null,4))),e.is(i)&&(c.getLogger().debug("Manipulated reference is: "),s=i.pick("PID","type","V_Name","V_description"),c.getLogger().debug(JSON.stringify(s,null,4)))),i},getReferenceIdFromInstance:function(t){var n,i=null;return n=this.getInstance(t),e.is(n)?i=n.get("isInstanceOf"):c.getLogger().debug("Failed to get reference Id. No instance model found for PID: "+t),i},getParentReferenceIdFromInstance:function(t){var n,i=null;return n=this.getInstance(t),e.is(n)?i=n.get("isAggregatedBy"):c.getLogger().debug("Failed to get reference Id. No instance model found for PID: "+t),i},isReference:function(e){return n.isReference(e)},isInstance:function(e){return n.isInstance(e)},getInstance:function(e){return n.getInstanceFromCollection(e)},getConnection:function(e){return n.getConnectionFromCollection(e)},createReference:function(e,t){return n.createRef(e,t)},addReference:function(e,t){return n.addRef(e,t)},fetchRefList:function(e,t){return n.fetchRefList(e,t)},fetchAttributes:function(e,t){n.fetch(e,t)},fetchReferences:function(e,t){n.fetchReferences(e,t)},fetchRoot:function(e,t){i.fetchRoot(e,t)},fetchMultiplePromise:function(e,t){return i.fetchMultiplePromise(e,t)},getProductScopedLinksFromIndex:function(e,t,n){i.getProductScopedLinksFromIndex(e,t,n)},navigateScopesFromIndex:function(e,t,n){i.navigateScopesFromIndex(e,t,n)},navigateScopesFromDB:function(e,t,n){n.onComplete=t,i.getProductScopedLinksFromDB(e,n)},navigateOnIndex:function(e,t,n){i.navigateOnIndex.navigateOnIndex(e,t,n)},getReferenceFromInstance:function(e,t,n){i.navigateOnIndex.getReferenceFromInstance(e,t,n)},updateReference:function(t,i){return i.isFacet=!!e.is(c.getConfig().isFacet)&&c.getConfig().isFacet,n.updateRef(t,i)},updateReferences:function(e,t){return n.updateRefs(e,t)},deleteReference:function(e,t){return n.deleteRef(e,t)},removeReference:function(e,t){n.removeRef(e,t)},createInstance:function(e,t){return n.createInst(e,t)},insertExistingRefs:function(e,t){return n.insertExistingRefs(e,t)},addInstance:function(e,t){return n.addInst(e,t)},fetchInstance:function(e,t){return n.fetchInst(e,t)},updateInstance:function(e,t){return n.updateInst(e,t)},updateInstances:function(e,t){return n.updateInsts(e,t)},deleteInstance:function(e,t){return n.deleteInst(e,t)},removeInstance:function(e,t){n.removeInstance(e,t)},removeConnection:function(e,t){n.removeConnection(e,t)},createConnection:function(e,t){return n.createConn(e,t)},addConnection:function(e,t){return n.addConn(e,t)},updateConnection:function(e,t){return n.updateConn(e,t)},deleteConnection:function(e,t){return n.deleteConn(e,t)},needToQueryForConnections:function(e){return n.needToQueryForConnections(null,e)},needToQueryForChildren:function(e){return n.needToQueryForChildren(e)},setScope:function(e,t,i){var o,r,s;o={oldPID:t.get("PID"),newPID:e.PID},r={oldPID:t.get("to"),newPID:e["to.attributesValue"].PID},n.updateConnectionsCache(t.get("from"),r,o),i?t.set({PID:e.PID,to:e["to.attributesValue"].PID}):(s=e.PID.split("|")[2],t.set({PID:e.PID,to:s})),c.getMediator().notify("connectionChanged",t)},findMissingLinkedObjects:function(t,n,o){i.findMissingLinkedObjects(t,function(t){e.is(n,"function")&&n.call(null,t)},o)},getImpacted:function(t,i,o){var r,s,u,c,a,l,d=[],f=[],g=[],m=[],p=this.getInstance(t),P={};if(o=o||{},e.is(o.relationTypes)?P.relationTypes=o.relationTypes:(e.is(o.excludeRelationTypes)&&(P.excludeRelationTypes=o.excludeRelationTypes),e.is(o.excludeTimeConstraintType)&&(P.excludeTimeConstraintType=o.excludeTimeConstraintType)),e.is(p)?(s=this.getReferenceModelFromInstance(p),u=e.is(o.onlyInstanceRelations)&&o.onlyInstanceRelations?null:s.id,g=n.getImpactedConnections(u,p.id,P),m=[s.id,p.id]):(P.isRefRefOnly=!0,g=n.getImpactedConnections(t,null,P),m=[t]),d=g,e.is(i)&&!0===i){for(r=0;r<g.length;r++)c=g[r].get("from"),a=g[r].get("to"),l=e.is(c,"array")?c[c.length-1]:c,m.indexOf(l)>-1?f.push(a):f.push(c);d=f}return d},getConnectionsByModel:function(t,n,o){var r,s=f(),u=e.is(t)?t.get("PPRTYPE"):e.is(n)?n.get("PPRTYPE"):null;o=o||{},r={forceDBMode:!!e.is(o.forceDBMode)&&o.forceDBMode,relationTypes:"array"===e.typeOf(o.relationTypes)?o.relationTypes:s.getAllConfiguredRelations(u,"read"),isRefRefOnly:!!e.is(o.isRefRefOnly)&&o.isRefRefOnly,silentMode:!!e.is(o.silentMode)&&o.silentMode,onComplete:e.is(o.onComplete)?o.onComplete:null,onFailure:e.is(o.onFailure)?o.onFailure:null},i.getConnectionsByModel(t,n,r)},getAltSubContextProductPromise:function(e,t){return i.getAltSubContextProductPromise(e,t)},getMultipleAltSubContextProductsPromise:function(e){return i.getMultipleAltSubContextProductsPromise(e)},getAlternateEnggItemPromise:function(e){return i.getAlternateEnggItemPromise(e)},getEngAlternatesFromBLPromise:function(e){return i.getEngAlternatesFromBLPromise(e).then(function(e){const{altSubInfosResult:n,someErrorOccured:i}=e;return i&&c.getLogger().warn("DatabasePlugin",u.getNLSValue("AltSub.BL.SomeError")),t.resolve(n)})},getAlternateEnggItemInfoPromise:function(t,n){var o=c.getService("ConfigService"),r=null;return e.is(o)&&(r=o.getUserId()),i.getAlternateEnggItemInfoPromise(t,n,r)},getMfgItemsFromDesignAlternatesPromise:function(e,t,n){return i.getMfgItemsFromDesignAlternatesPromise(e,t,n)},fetchInstancesAndTheirReferences:function(e,t){return i.fetchInstancesAndTheirReferences(e,t)},addToCollections:function(e){n.addToCollections(e)},parseServerObjects:function(t,i){var o,r,s=i.stackedObjects?i.stackedObjects:{stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},u={referencePIDs:[],instancePIDs:[]},c=!e.is(i.silentOpt,"boolean")||i.silentOpt,a=this.getConnectionParser();e.is(t.instancesAndReferences)&&t.instancesAndReferences.forEach(function(e){o=e.attributesValue,Object.prototype.hasOwnProperty.call(o,"isInstanceOf")?(u.instancePIDs.push(o.PID),s.stackedInstances.push(o)):(u.referencePIDs.push(o.PID),s.stackedReferences.push(o))}),e.is(t.deletedObjects)&&t.deletedObjects.forEach(function(e){s.deletedObjects.push(e)}),e.is(t.connections)&&t.connections.forEach(function(e){a.parse(e,s)}),r=e.merge(s,{silentMode:c,onComplete:function(){e.is(i.onComplete)&&i.onComplete(u)}}),n.addToCollections(r)},getDocuments:function(t){var n,i;if(e.is(t)&&e.is(t.documents,"object")&&Object.keys(t.documents).length>0&&(i=c.getPlugins("DocumentPlugin"),e.is(i)&&(i=i.instance,e.is(t.documents,"object")))){const o=new Set;for(n in t.documents)Object.prototype.hasOwnProperty.call(t.documents,n)&&t.documents[n].forEach(e=>{o.add(e.PID)});i.getDocumentInfo([...o],{onComplete:function(o){var r,s=[];for(r=0;r<o.data.length;r++){const e=o.data[r];i.addDocument(e,{silent:!0})}for(n in t.documents)Object.prototype.hasOwnProperty.call(t.documents,n)&&e.is(t.documents[n])&&t.documents[n].length>0&&(s.push(n),t.documents[n].forEach(function(e){i.addDocumentConnection(n,e.PID,e.type,{silent:!0})}));c.getMediator().notify("documentAdded",[s])}})}},getConnectionsFromServer:function(t,n,o){var r=o||{},s=this,u={noTimeout:!0};c.getMediator().notify("startProgress",u),i.getConnectionsFromServer(t,function(t){e.is(n,"function")&&n.call(null,t),s.getDocuments(t),c.getMediator().notify("stopProgress",u)},r)},getDescendantsFromServer:function(t,n,o){var r=o||{},s=this;i.getDescendantsFromServer(t,function(t){var i=e.is(r.context)?r.context:null;e.is(n,"function")&&n.call(i,t),s.getDocuments(t)},r)},getInverseConnectionsFromServer:function(e,t){i.getInverseConnectionsFromServer(e,t)},resetAll:function(){n.reset(),c.getMediator().notify("refreshAll")},resetCollections:function(e){n.reset(e)},setSelectPredicate:function(e,t){i.setSelectPredicate(e,t)},getConnectionParser:function(){return i.getConnectionParser()},getNavigateOnIndex:function(){return o.getNavigateOnIndex()},isStandAlone:function(){return o.isStandAlone()},isNavigateOnDemand:function(){return o.isNavigateOnDemand()},isAuthoringMode:function(){var e=!0;return o.getNavigateOnDatabasePreference()||(e=s.isDbMode()),e},computeIsInstancePossible:function(t,n){var i,r,s,c=!0;e.is(n,"string")?r=n:(i=n,r=n.get("type"));let l=null;if(-1===this.getValidChildTypes(t).indexOf(r))c=!1,l=u.getNLSValue("InsertInstance.InvalidChildType.Failure");else if(t&&i)if(a(i,t)){c=!1;const e=i.get("PLMEntity.V_Name"),n=t.get("PLMEntity.V_Name");l=u.getNLSValue("InsertInstance.cyclicDependencyExists.Failure",{parentName:n,childName:e})}else"RESOURCE"!==(s=i.get("PPRTYPE"))&&"PRODUCT"!==s||!1===(c=o.isMGALicenseAvailable()||o.isRMELicenseAvailable())&&(l=u.getNLSValue("InsertInstance.LicenseDoesNotExist.Failure"));return{isInstancePossible:c,errorMessage:l}},getValidChildTypes:function(t){var n,i=f(),o=[];return e.is(t)&&(n=t.get("type"),o=i.getValidChildTypes(n)),o},getPPRType:function(t){var n,i=f(),o=t;return e.is(t,"string")?o=this.getReferenceModel(t):e.is(t)&&t.isInstance()&&(o=this.getReference(t.get("isInstanceOf"))),e.is(o)&&(n=o.get("PPRTYPE"),e.is(n)||(n=i.getPPRType(o.get("type")))),n},isSystem:function(t){return!(!e.is(t)||"SYSTEM"!==this.getPPRType(t))},isOperation:function(t){return!(!e.is(t)||"OPERATION"!==this.getPPRType(t))},isWorkInstruction:function(t){return!(!e.is(t)||"WORKINSTRUCTION"!==this.getPPRType(t))},isProcess:function(t){return!(!e.is(t)||"PROCESS"!==this.getPPRType(t))},isService:function(t){return!(!e.is(t)||"SERVICE"!==this.getPPRType(t))},isResource:function(t){return!(!e.is(t)||"RESOURCE"!==this.getPPRType(t))},getWhereUsedReferences:function(e,t){i.getWhereUsedReferences(e,t)},getFilteredInstancesFromCollection:function(t,i,o){var r,s=o||{};return r=n.getFilteredInstancesFromCollection(t,i,o),e.is(s.sort)&&s.sort&&n.sortInstancesByTreeOrder(r),r},removeFilterFromCollection:function(e,t){n.removeFilterFromCollection(e,t)},getExecuteByBlockPromise:function(e){return o.getExecuteByBlockPromise(e)},transformToRIROccurrencePath:function(e){return n.transformToRIROccurrencePath(e)},transformRIRToAbsolutePath:function(e){return n.transformRIRToAbsolutePath(e)},isValidPID:function(t){var n=!1;return e.is(t,"string")&&t.length>0&&(n=!0),n},getLastElement:function(t){var n=null;return e.is(t,"array")&&(n=t.length>0?t[t.length-1]:null),n},getLastElementInstanceInfoPID:function(t,n){var i,o=null,r=null;return i=this.getLastElement(t),this.isValidPID(i)&&(o=this.getInstance(i),e.is(o)&&(r=o.get(n),this.isValidPID(r)||(r=null))),r},arrayCompare:function(t,n){var i,o;if(!e.is(t,"array")||!e.is(n,"array"))return!1;if(t.length!==n.length)return!1;for(i=0,o=t.length;i<o;i++)if(t[i]instanceof Array&&n[i]instanceof Array){if(!this.arrayCompare(t[i],n[i]))return!1}else if(t[i]!==n[i])return!1;return!0},groupingBy:function(e,t,n){var i=new Map;return e.forEach(function(e){var o=t(e),r=n(e);i.has(o)?i.set(o,i.get(o).concat(r)):i.set(o,[].concat(r))}),i},hasConnection:function(e){return n.hasConnection(e)},traverseInstanceModels:function(e,t){n.traverseInstanceModels(e,t)},syncMaturity:function(e,t,i,o,r){n.syncMaturity(e,t,i,o,r)},getCurrentStates:function(e,t,i){n.getCurrentStates(e,t,i)},getSequencingModeAttrName:function(e){return n.getSequencingModeAttrName(e)},getSequencingMode:function(e,t){n.getSequencingMode(e,t)},setSequencingMode:function(e,t,i){n.setSequencingMode(e,t,i)},setOOTBRole:function(e,t,i){n.setOOTBRole(e,t,i)},manageLinearProductFlowsOnCreateInstance:function(e){n.manageLinearProductFlowsOnCreateInstance(e)},manageLinearProductFlowsOnCreateInstancePID:function(e){n.manageLinearProductFlowsOnCreateInstance(n.getInstanceFromCollection(e))},manageLinearProductFlowsOnDeleteInstance:function(e){n.manageLinearProductFlowsOnDeleteInstance(e)},manageLinearProductFlowsOnDeleteInstancePID:function(e){n.manageLinearProductFlowsOnDeleteInstance(n.getInstanceFromCollection(e))},detachExtn:function(e,t){n.detachExtn(e,t)},isUsagePointManagementEnabled:function(){return r.isUsagePointManagementEnabled()},findAllRIRPaths:function(e){var t=[],n=Array.isArray(e)?e[0]:e;return m=[],l(n,t),Array.isArray(e)&&(t=t.map(function(t){return t.pop(),t=t.concat(e)})),t}}}}),define("DS/DELPPWModelPlugins/DicoPlugin",["UWA/Core","DS/DELPPWDicoServices/DicoUtils"],function(e,t){"use strict";return function(n){var i={},o={};return{name:"DicoPlugin",getAttributeProperties:function(){return i},getMagnitudePreferences:function(){return o},getProtectedAttributes:function(e){return t.getProtectedAttributes(e)},getAttributeInfo:function(e,n){return t.getAttributeInfo(e,n)},getTypeInfo:function(e){return t.getTypeInfo(e)},getTypeMaskInfo:function(e){return t.getTypeMaskInfo(e)},getTypeExtnInfo:function(e){return t.getTypeExtnInfo(e)},getPPRType:function(e){return t.getPPRType(e)},getTypeHierarchy:function(e){return t.getTypeHierarchy(e)},getParentTypes:function(e){return t.getParentTypes(e)},getReadOnlyTypes:function(){return t.getReadOnlyTypes()},addTypeExtnCustomInterface:function(e,n){t.addTypeExtnCustomInterface(e,n)},isAKindOf:function(e,n){return t.isAKindOf(e,n)},getConfiguredRelations:function(e,n,i){return t.getConfiguredRelations(e,n,i)},getConfiguredCustomRelations:function(e,n,i){return t.getConfiguredCustomRelations(e,n,i)},isRelationTypeConfigured:function(e,n,i,o){var r;return r=t.getPossibleRelations(n,i,o),Array.isArray(r)&&r.indexOf(e)>-1},getPossibleRelations:function(e,n,i){return t.getPossibleRelations(e,n,i)},getPossibleRelationTypes:function(e,i){var o=e.get("type"),r=i.get("type");if(o&&r)return t.getPossibleRelations(o,r,"write");n.getLogger().debug(" No PPRTypes on models")},isReferencesHasReadOnlyType:function(t,n){let i=!1,o=null,r=n||{};const s=this,u=function(e){let t=o.has(e);return t||(t=s.getParentTypes(e).some(function(e){return o.has(e)})),t};if(Array.isArray(r.excludeReferenceTypes)&&r.excludeReferenceTypes.length>0?(o=new Set(this.getReadOnlyTypes()),r.excludeReferenceTypes.forEach(function(e){o.delete(e)})):o=this.getReadOnlyTypes(),e.is(t,"string"))i=u(t);else if(e.is(t,"object")){const e=t.get("type");i=u(e)}else Array.isArray(t)&&(i=t.some(function(t){if(e.is(t)){const e=t.get("type");return u(e)}return!1}));return i},isLinkPossible:function(e,t,n,i){var o=this.getPossibleRelationTypes(e,t,n,i),r=this.getPossibleRelationTypes(t,e,i,n);return o.length>0||r.length>0},isEntityReference:function(e){return t.isEntityReference(e)},isEntityInstance:function(e){return t.isEntityInstance(e)},isEntityConnection:function(e){return t.isEntityConnection(e)},isReparentPossible:function(e){var n=t.getAcceptedPPRTypesForActions();return null===n||n.REPARENT.PPRType.includes(e)},isReorderPossible:function(e){var n=t.getAcceptedPPRTypesForActions();return null===n||n.REORDER.PPRType.includes(e)},getAcceptedBaseTypesForActions:function(){return t.getAcceptedBaseTypesForActions()},isAutoCreateScopeOnHOP:function(){return t.isAutoCreateScopeOnHOP()},fetchDicoAttributeInfo:function(e,n,i){return t.fetchDicoAttributeInfo(e,n,i)},getDocumentTypes:function(){return t.isAutoCreateScopeOnHOP()},addAttributeInfo:function(e){return t.addAttributeInfo(e)},getAllConfiguredRelations:function(e,n){return t.getAllConfiguredRelations(e,n)},getValidChildTypes:function(e){return t.getValidChildTypes(e)},getReferenceTypes:function(){return t.getReferenceTypes()},getInstanceTypes:function(){return t.getInstanceTypes()}}}}),define("DS/DELPPWModelPlugins/BI/MfgProcessBIPlugin",["UWA/Core","DS/DELPPWModelServices/MfgProcessBIUtils","DS/DELPPWResourceServices/ResourceUtils"],function(e,t,n){"use strict";return function(i){var o,r="BIPlugin",s=!1,u=[],c=function(){return e.is(o)||(o=i.getPlugins("DicoPlugin").instance),o},a=function(o){var u,c,a,l,d,f,g,m={noTimeout:!0},p=i.getPlugins("RootsPlugin"),P=function(t){var n,o={};return p?t.forEach(function(t){n=p.getRootFilter(t),e.is(n)?1===n.filters.length&&1===Object.keys(n.filters[0]).length&&e.is(n.filters[0].config_filter)?o[t]=n.filters[0].config_filter:(o[t]="",i.getLogger().debug(r,"IncompatibleFilter for rootPID : "+t)):o[t]=""}):i.getLogger().debug(r,"Roots Plugin unavailble"),o};!1!==s&&(d=i.getLogger().log(r,n.getNLSValue("BI.LogMessage"))),t.resetBIModelCollection(),g=!1,p?(f=(p=p.instance).getRoots(r),e.is(f,"array")&&f.length>=2&&(u=f[0],c=f[1],e.is(c,"array")&&c.length>0&&e.is(u,"array")&&u.length>0?g=!0:i.getLogger().warn(r,n.getNLSValue("BI.Computation.NoItemsOrSystems"),d))):i.getLogger().debug(r,"Roots Plugin unavailble"),g?(i.getMediator().notify("startProgress",m),a=P(u),l=P(c),t.fetchBIComputation({rootItems:u,itemConfigFilter:a,rootSystems:c,sysConfigFilter:l,onFailure:function(){i.getMediator().notify("stopProgress",m),i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),i.getLogger().warn(r,n.getNLSValue("BI.Computation.Failure"),d)}},function(){var u=t.getMfgItemAssignmentStatus(),c=t.getSystemUpdateStatus();i.getMediator().notify("stopProgress",m),e.is(o,"function")&&o(),!1!==s&&(i.getLogger().info(r,n.getNLSValue("BI.Computation.Success"),d),i.getMediator().notify("updateBIStatus",{ItemAssignmentStatus:u,SystemUpdateStatus:c}))})):i.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1})},l=function(e){!0===e.state?(s=!0,a()):(s=!1,t.isBIComputed()&&t.resetBIModelCollection())},d=function(n){var o,s,u,a=!1;if(s=function(t){var n=t.get("type");return e.is(n,"string")?"ProcessImplementLink"===n||"ProcessImplementLinkOcc"===n:(i.getLogger().debug(r,"Connection type is not defined"),!1)},u=function(t){var n,o=c();return n=t.get("type"),e.is(n,"string")?!("PROCESS"!==o.getPPRType(n)||!t.hasChanged("V_NeedDedicatedSystem")):(i.getLogger().debug(r,"Connection type is not defined"),!1)},t.isBIComputed())for(n=e.is(n,"array")?n:[n],o=0;o<n.length&&(n[o].isConnection()&&(a=s(n[o])),n[o].isReference()&&(a=u(n[o])),!a);o++);return a},f=function(e){d(e)&&a()},g=function(t){var n,o,s,u=!1;for(t=Array.isArray(t)?t:[t],n=0;n<t.length;n++)if(s=(o=t[n]).get("type"),e.is(s,"string")){if("ProcessImplementLinkOcc"===s&&o.hasChanged("ImplementLinkUsageFamily.V_ImplLinkUsage")){u=!0;break}}else i.getLogger().debug(r,"Connection type is not defined");u&&a()},m=function(e){d(e)&&a()},p=function(n){var o,s,u,l=c(),d=!1;if(e.is(n)&&t.isBIComputed()){for(n=e.is(n,"array")?n:[n],o=0;o<n.length;o++)if(s=n[o].get("type"),e.is(s,"string")){if(u=l.getPPRType(s),["PROCESS","SYSTEM","OPERATION"].includes(u)){d=!0;break}}else i.getLogger().debug(r,"Model type is not defined");d&&a()}};return t.init({core:i}),{name:"MfgProcessBIPlugin",onStart:function(){t.setBIModelEvents({onReset:function(e,t,n){i.getMediator().notify("resetBIModel",[e,t,n],{sourceModuleId:r})}}),u.push(i.addExternalListener("BIEssentialsCmd",l)),u.push(i.addExternalListener("referenceChanged",m)),u.push(i.addExternalListener("connectionAdded",f)),u.push(i.addExternalListener("connectionChanged",g)),u.push(i.addExternalListener("connectionRemoved",f)),u.push(i.addExternalListener("hideRootNode",p))},onStop:function(){var e,n;for(t.removeBIModelEvents(),e=0,n=u.length;e<n;e++)i.removeExternalListener(u[e]);u=[]},computeBI:function(){a()},getBICmdState:function(){return s},resetBIModelCollection:function(){return t.resetBIModelCollection()},getBrokenMfgProcessStatus:function(e,n){t.isBIComputed()?t.getBrokenMfgProcessStatus(e,n):a(function(){t.getBrokenMfgProcessStatus(e,n)})}}}}),define("DS/DELPPWModelPlugins/AttributePlugin",["UWA/Core","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWResourceServices/ResourceUtils","DS/DELPPWModelServices/ModelUtils"],function(e,t,n,i){"use strict";return function(o){var r,s,u,c,a,l,d,f,g,m,p,P,C,h,I,y,v,D,S,b,M,R,L,A,E,T,F,O,N,B,x,V,U,k,w,W,j,_,q,z=/(\d+)\/(\d+)\/(\d+)@\d+:\d+:\d+:\w+/;const G=["ProcessContinuousProvide","ProcessContinuousCreateMaterial","DELContinuousServicePartReference","DELConstructionWorkElementLength","DELConstructionWorkElementArea"];return _=function(){return e.is(j)||(j=o.getPlugins("DicoPlugin").instance),j},r=function(t){var n="";return e.is(t)&&(n=e.is(t.Type)?t.Type:""),n},U=function(e){var t,n,i,o,r,s,u,c,a,l;return e?(t=e.split("@"),n=e,t.length>1&&(o=(i=t[0].split("/"))[0],r=i[1]-1,s=i[2],c=(u=t[1].split(":"))[0],a=u[1],l=u[2],(n=new Date).setUTCHours(c),n.setUTCMinutes(a),n.setUTCSeconds(l),n.setUTCFullYear(o),n.setUTCDate(1),n.setUTCMonth(r),n.setUTCDate(s)),n):null},k=function(t){var n,i="";return"NULL"===t?i="":(z.test(t)&&(t=U(t).toUTCString()),n=e.is(t,"number")?t:Date.parse(t),isNaN(n)||(i=new Date(n))),i},s=function(e){return"Boolean"===r(e)},u=function(e){return"Double"===r(e)},c=function(e){return"Integer"===r(e)},a=function(e){return"Date"===r(e)},l=function(e){return"String"===r(e)},d=function(t,n){var i=!1;return e.is(t)&&(e.is(t.Protection)&&(i=3===t.Protection?-1===["V_ContQuantity","V_SequencingMode","V_OverlapQty","V_OOTBRole","V_CustoRole"].indexOf(t.Name):8===t.Protection?-1===["V_DimensionType","V_RefQuantity","V_UseCase","V_WIPQuantityRatio","V_ScrapQuantityRatio","V_LossQuantity","V_IsConstQuantity"].indexOf(t.Name):1!==t.Protection&&2!==t.Protection),i=i||!0===t.isReadOnly||e.is(t.UIAccess)&&"ReadOnly"===t.UIAccess),e.is(n)&&(i=i||!0===n.readOnly||!1===n.visible),i},f=function(t){var n=!0;return e.is(t)&&(n=t.visible),n},m=function(t){return e.is(t)&&e.is(t.MultiValuated)&&"Yes"===t.MultiValuated},g=function(e){return a(e)&&m(e)},p=function(t){return e.is(t.MultiLine)&&"Yes"===t.MultiLine},P=function(t,n){var i=!1;return i=e.is(t)&&e.is(t.HasRangeDefined)&&"Yes"===t.HasRangeDefined,e.is(n)&&Array.isArray(n.authorizedValues)&&(i=i||n.authorizedValues.length>0),i},C=function(t){return e.is(t.Magnitude)&&""!==t.Magnitude&&!P(t)},h=function(t,n,i){var o;if(e.is(n)&&Array.isArray(n.authorizedValues)&&n.authorizedValues.length>0){for(o=0;o<n.authorizedValues.length;o++)if(n.authorizedValues[o].NLS===i)return o;return 1}for(o=0;o<t.AuthorizedValues.length;o++)if(I(t,o)===i)return o},I=function(e,t){var i;return a(e)?i=isNaN(e.AuthorizedValues[t].NLS)?x(e.AuthorizedValues[t].NLS):x(1e3*e.AuthorizedValues[t].NLS):"V_SequencingMode"===e.Name?"Linear"===e.AuthorizedValues[t].Name?i=n.getNLSValue("SetSequencingModeUI.Linear"):"Advanced"===e.AuthorizedValues[t].Name&&(i=n.getNLSValue("SetSequencingModeUI.Advanced")):i=e.AuthorizedValues[t].NLS,i},y=function(e,t){return t<0?null:e.AuthorizedValues[t].Name},v=function(e,t){return t<0?null:e.AuthorizedValues[t].value},D=function(t,n){var i,o=[];if(e.is(n)&&Array.isArray(n.authorizedValues)&&n.authorizedValues.length>0){for(i=0;i<n.authorizedValues.length;i++)o.push(n.authorizedValues[i].NLS);return o}for(i=0;i<t.AuthorizedValues.length;i++)o.push(I(t,i));return o},S=function(t,n,i){var r=null,s=!1,u=function(n){var i=null;return e.is(t)&&Array.isArray(t.AuthorizedValues)&&t.AuthorizedValues.some(function(e,o){var r=!1;return I(t,o)===n&&(i=c(t)?Number.isInteger(parseInt(e.Name))?e.Name:(o+1).toString():e.Name,r=!0),r}),i},a=function(n){var r=o.getLogger(),s=e.is(t,"string")?t:JSON.stringify(t);e.is(r)&&e.is(r.debug,"function")&&(r.debug(n+" (attributeInfo): "+s),r.debug(n+" (value): "+i))};return e.is(n)&&Array.isArray(n.authorizedValues)&&(s=n.authorizedValues.some(function(e,n){var o=!1;return e===i&&(r=c(t)?n+1:e,o=!0),o})),s||(r=u(i)),!e.is(r)&&e.is(t)&&e.is(t.DefaultValue)&&(r=u(t.DefaultValue),a("attributePlugin._getAuthorizedValue, from NLS to integer failure, default value fallback")),e.is(r)||(r=i,a("attributePlugin._getAuthorizedValue, from NLS to integer complete failure")),r},b=function(t,n){var i=[];return Array.isArray(n)?(P(t)&&e.is(t.AuthorizedValues,"array")&&n.forEach(function(n){t.AuthorizedValues.some(function(t){return!(!e.is(t.Name,"string")||n!==t.Name||(i.push(t.NLS),0))})}),i):i},M=function(t){return e.is(t.DefaultValue)?t.DefaultValue:""},R=function(e){return C(e)?e.Magnitude:""},L=function(e){return e.FullName},A=function(t){return e.is(t.MaxLength)?t.MaxLength:0},E=function(t){var n;return e.is(t)&&e.is(t.pattern)?t.pattern:c(t)?"^[-+]?([0-9]+)$":u(t)?"^([+-]?([1-9][0-9]*)|(0))([.,][0-9]+)?":(n=A(t))<=0?null:"^.{0,"+n+"}$"},T=function(t){var n="";return e.is(t)&&(n=e.is(t.NLS)?t.NLS:t.Name),n},F=function(t,n){return!!e.is(t)&&Object.prototype.hasOwnProperty.call(t._attributes,n)},O=function(t){return"array"!==e.typeOf(t)&&(t=e.is(t)&&t.length>0&&"NULL"!==t&&"null"!==t?t.split(i.getPrefSeparator()):[]),t},N=function(t){var n,o,r=[];if(Array.isArray(t))for(n=0;n<t.length;n++)o=V(t[n]),e.is(o)&&r.push(o);else if(e.is(t)&&t.length>0&&"NULL"!==t&&"null"!==t)for(t=t.split(i.getPrefSeparator()),n=0;n<t.length;n++)o=V(t[n]),e.is(o)&&r.push(o);return r},B=function(t,n,o){var r="",s=O(t),u=widget.lang,c=i.getPrefSeparator(),a=e.is(n,"string")&&"Double"===n,l=e.is(n,"string")&&"Integer"===n,d=!e.is(o,"boolean")||o,f=l?1:2;return e.is(s,"array")&&s.forEach(function(e,t){var n=null;t>0&&(r+=c),(l||a)&&d?(n=l?parseInt(e):parseFloat(e),isNaN(n)||(n=n.toLocaleString(u,{minimumSignificantDigits:f,maximumSignificantDigits:21}),r+=n)):r+=e}),r},x=function(e,t,n){var i=widget.lang,o=k(e);return isNaN(o)||""===o?"":!0===t?o.toLocaleString(i,n):o.toLocaleDateString(i,n)},V=function(e){return k(e)},w=function(t,n){var i,o,r=!1,s=_();return e.is(t)&&(i="string"===e.typeOf(t)?t:t.get("type"),o=s.getTypeExtnInfo(i),Array.isArray(o)&&o.length>0&&-1!==n.indexOf(".")&&-1!==o.indexOf(n.split(".")[0])&&(r=!0)),r},W=function(e){var t=_(),n=e.split(".")[0];return t.getProtectedAttributes(n).indexOf(e.split(".")[1])>-1},q=function(t,n){var i=!1;if(!e.is(t))return!1;const o=t.get("type");return e.is(o)&&!G.includes(o)&&(i=n.contains("DELFmiRatioOfDiscreteQuantity")),i},{name:"AttributePlugin",getColumnInfos:function(t){var n,i,o,r,s,u,c,a,l,d,f,g;if(e.is(t)){if(e.is(t.dataIndex))n="tree"===t.dataIndex?t.label:t.dataIndex,i=e.is(t.dicoType)?t.dicoType:null,o=e.is(t.entity)?t.entity:null,s=e.is(i)?i+"."+n:n,u=e.is(t.displayType)?t.displayType:null,r={name:s,dataIndex:n,dicoType:i,entity:o};else if(e.is(t.Attribute)){s=[],r=[],u=e.is(t.displayType)?t.displayType:"MultiType";var m,p=t.Attribute;for(p=Array.isArray(p)?p:[p],m=0;m<p.length;m++){var P,C,h,I,y=p[m];C=y.name,h=e.is(y.dicoType)?y.dicoType:null,I=e.is(y.entity)?y.entity:null,P=e.is(h)?h+"."+C:C,s.push(P),r.push({name:P,dataIndex:C,dicoType:h,entity:I})}}f=!e.is(t.isGroupable)||t.isGroupable,g=!e.is(t.isFilterable)||t.isFilterable,c=!!e.is(t.isHidden)&&t.isHidden,a=e.is(t.width)?t.width:null,l=e.is(t.minWidth)?t.minWidth:null,d=e.is(t.Tooltip)?t.Tooltip:null}return{attribute:r,dataIndex:Array.isArray(r)?s.join(","):s,displayType:u,isHidden:c,isGroupable:f,isFilterable:g,width:a,minWidth:l,Tooltip:d}},getLabelInfos:function(t){var n,i,o,r,s,u,c;if(e.is(t)){for(t=Array.isArray(t)?t:[t],i=[],o=[],n=0;n<t.length;n++){var a,l,d,f,g=t[n];l=g.dataIndex,d=e.is(g.dicoType)?g.dicoType:null,f=e.is(g.entity)?g.entity:null,a=e.is(d)?d+"."+l:l,o.push(a),i.push({name:a,dataIndex:l,dicoType:d,entity:f})}i=1===i.length?i[0]:i,o=1===o.length?o[0]:o.join(","),r=e.is(t.width)?t.width:null,s=e.is(t.minWidth)?t.minWidth:null,u=1!==t.length||!e.is(t[0].isGroupable)||t[0].isGroupable,c=1!==t.length||!e.is(t[0].isFilterable)||t[0].isFilterable}return{attribute:i,dataIndex:o,width:r,minWidth:s,isGroupable:u,isFilterable:c}},getNodeAndColumnInfos:function(n,i){var o,r,s,u,c,a,l=_(),d={};if(e.is(i))if(Array.isArray(i.attribute)&&e.is(n)){for(a=0;a<i.attribute.length;a++)if(s=(r=i.attribute[a]).name,c="instance"===(u=r.entity)?t.getInstanceFromCollection(n.getInstancePID()):"link"===u?t.getConnectionFromCollection(n.getLinkPID()):t.getReferenceFromCollection(n.getReferencePID()),e.is(c.get(s))){d.objectToBeModified=c,d.attributeName=r.name,d.dataIndex=r.dataIndex,d.instOrRef=r.entity;break}}else e.is(n)&&("instance"===i.attribute.entity?d.objectToBeModified=t.getInstanceFromCollection(n.getInstancePID()):"link"===i.attribute.entity?d.objectToBeModified=t.getConnectionFromCollection(n.getLinkPID()):d.objectToBeModified=t.getReferenceFromCollection(n.getReferencePID())),d.attributeName=i.attribute.name,d.dataIndex=i.attribute.dataIndex,d.instOrRef=i.attribute.entity;return d.attributeInfo=l.getAttributeInfo(d.attributeName),e.is(d.attributeInfo)||(d.attributeInfo={}),e.is(d.objectToBeModified)?(d.attributeDef={},o=l.getTypeMaskInfo(d.objectToBeModified.get("type")),e.is(o)&&e.is(Object.prototype.hasOwnProperty.call(o,d.dataIndex))&&(d.attributeDef=o[d.dataIndex])):d.attributeDef={},d.attributeNLSTitle=T(d.attributeInfo),d},getNodeAndColumnInfosForReference:function(n,i){var o,r,s,u=_(),c={};if(s=this.getAttributeInfoFromColumn(i),n&&(r=n.getReferencePID()),c.objectToBeModified=t.getReferenceFromCollection(r),e.is(c.objectToBeModified)&&e.is(i)&&e.is(i.attribute,"array")&&i.attribute.length>0){let t=c.objectToBeModified.get("DELFmiMagnitudeExt.V_DimensionType");if(!e.is(t)){const n=c.objectToBeModified.get("type");e.is(n)&&!G.includes(n)&&(t="DELFmiRatioOfDiscreteQuantity")}i.attribute.forEach(function(e){const n=e.name;if(n.contains(t))return s.attributeName=s.dataIndex=n,s.dicoType=e.dicoType,void(s.entity=e.entity)})}if(c.attributeName=s.attributeName,c.dataIndex=s.dataIndex,c.instOrRef=s.entity,c.attributeInfo=u.getAttributeInfo(s.attributeName),!e.is(c.attributeInfo)){if(e.is(c.objectToBeModified)){const t=c.objectToBeModified.get("type");o=e.is(t,"string")?c.objectToBeModified.get("type")+"."+s.dataIndex:s.dataIndex}else o=s.dataIndex;c.attributeInfo=u.getAttributeInfo(o),e.is(c.attributeInfo)||(c.attributeInfo={})}return c.dataIndex.contains("DELFmiRatioOfDiscreteQuantity")&&e.is(c.attributeInfo)&&e.is(c.attributeInfo.DefaultValue)&&(c.attributeInfo.DefaultValue=1),c.attributeDef={},c.attributeNLSTitle=T(c.attributeInfo),c},getAttributeInfoFromColumn:function(t){var n={};return e.is(t)&&("tree"===t.dataIndex?(n.dataIndex=t.label,n.entity=t.attribute.entity,n.dicoType=t.attribute.dicoType,n.attributeName=t.attribute.name):(n.dataIndex=t.dataIndex,n.dicoType=t.attribute.dicoType,n.attributeName=t.attribute.name,n.entity=t.attribute.entity)),n},getColumnDisplayValue:function(t){var i,o,r=this,s=_();return o=function(t){var i;return i=s.getAttributeInfo(t),e.is(i)?r.getNLS(i):n.getNLSValue("Column."+t)},i=e.is(t.dataIndex)&&e.is(t.attribute)?t:this.getColumnInfos(t),o(Array.isArray(i.attribute)?i.attribute[0].name:i.attribute.name)},getObjectAndAttributeInfos:function(t){var n,i=_(),o=this,r=[],s=function(t){var n,s,u;u=e.is(t.dicoType)?t.dicoType+"."+t.name:t.name,n=i.getAttributeInfo(u,null),s={attributeName:u,dataIndex:t.name,dicoType:t.dicoType,attributeNLSTitle:o.getNLS(n),attributeInfo:n,readOnly:!(!e.is(t.readOnly)||!0!==t.readOnly),mandatory:!(!e.is(t.mandatory)||!0!==t.mandatory)},r.push(s)};if("array"!==e.typeOf(t))s(t);else for(n=0;n<t.length;n++)s(t[n]);return r},getAttributeInfo:function(e,t){return _().getAttributeInfo(e,t)},isBoolean:function(e){return s(e)},isDouble:function(e){return u(e)},isInteger:function(e){return c(e)},isDate:function(e){return a(e)},isString:function(e){return l(e)},getFormattedDate:function(e,t,n){return x(e,t,n)},getDate:function(e){return V(e)},isReadOnly:function(e,t){return d(e,t)},isVisible:function(e){return f(e)},isMultiValuated:function(e){return m(e)},isMultiDate:function(e){return g(e)},isMultiLine:function(e){return p(e)},hasRangeDefined:function(e,t){return P(e,t)},hasMagnitude:function(e){return C(e)},getAuthorizedValueIndex:function(e,t,n){return h(e,t,n)},getAuthorizedValueNLS:function(e,t){return I(e,t)},getAuthorizedValueDB:function(e,t){return y(e,t)},getAuthorizedValueSavedValue:function(e,t){return v(e,t)},getAuthorizedValuesNLSList:function(e,t){return D(e,t)},getAuthorizedValue:function(e,t,n){return S(e,t,n)},getAuthorizedNLSvalues:function(e,t,n){return b(e,t)},getDefaultValue:function(e){return M(e)},getMagnitude:function(e){return R(e)},getFullName:function(e){return L(e)},getMaxLength:function(e){return A(e)},getPattern:function(e){return E(e)},getNLS:function(e){return T(e)},getType:function(e){return r(e)},doesAttributeExist:function(e,t){return F(e,t)},isAttributeInProtectedList:function(e){return W(e)},getValueAsArray:function(e,t){return O(e)},getValueAsDateArray:function(e){return N(e)},getValueAsString:function(e,t,n){return B(e,t,n)},getNLSForUnit:function(t){var i,o="";if(e.is(t)&&C(t)&&e.is(t.ManipulationUnit,"string")){if(0!==t.ManipulationUnit.length)i=t.ManipulationUnit;else{let n=widget.getPreference(t.Magnitude);null==(i=e.is(n)&&"hidden"!==n.type?n.value:null)&&"Ratio"===t.Magnitude&&(i="PERCENTAGE")}o=e.is(i)?n.getNLSForUnit(t.Magnitude,i):n.getNLSForUnit(t.Magnitude)}return o},getMagnitudeValue:function(t,n,i){return C(n)&&(t=e.is(t,"array")?B(t,r(n),i):e.is(t)||1!==n.Protection?"NULL"===t?"":t:n.DefaultValue),t},convertDateToStandard:function(t){var n,i,o,r,s,u,c,a=widget.lang;return t?(n=e.is(t,"date")?e.clone(t):new Date,i=t.getUTCFullYear(),(o=t.getUTCMonth()+1)<10&&(o="0"+o),(r=t.getUTCDate())<10&&(r="0"+r),(s=t.getUTCHours())<10&&(s="0"+s),(u=t.getUTCMinutes())<10&&(u="0"+u),(c=t.getUTCSeconds())<10&&(c="0"+c),n.setYear(i),n.setMonth(t.getMonth()),n.setDate(r),n.setHours(s),n.setMinutes(u),n.setSeconds(c),{value:t.toLocaleString(a),valueDB:i+"/"+o+"/"+r+"@"+s+":"+u+":"+c+":GMT"}):{value:"",valueDB:""}},getDimensions:function(){return n.getDimensions()},getDimension:function(e){return n.getDimension(e)},addAttributeInfo:function(e){return _().addAttributeInfo(e)},isAttrApplicableForType:function(e,t){return w(e,t)},isAttrOfRatioDiscreteQuantity:function(e,t){return q(e,t)}}}}),define("DS/DELPPWModelPlugins/DocumentPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DocumentManagement/DocumentManagement","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWModelServices/ModelUtils"],function(e,t,n,i,o){"use strict";return function(r){var s,u,c,a,l,d,f,g,m,p,P,C,h,I,y=r.getLogger(),v=[],D={},S=r.getConfig().resource.documemntColumnConfigXML,b="dsmfg/private/V0/MfgElement/document";return s=function(){var e=t.get3DSpaceServiceName(),n=t.getServiceUrl(e);return n=n.endsWith("/")?n.substring(0,n.length-1):n,{securityContext:t.getSecurityContext(),csrf:{name:"ENO_CSRF_TOKEN",value:t.getCSRFToken(e)},tenantUrl:n,tenant:t.getPlatformID({serviceId:e})}},u=function(i,r){o.isStandAlone()?(e.merge(r,{url:b,method:"GET",data:i}),t.webServiceRequest(r)):n.getDocuments(i,r)},c=function(i,r,s){o.isStandAlone()?(e.merge(s,{url:"dsmfg/private/V0/invoke/createDocuments",method:"POST",data:i}),t.webServiceRequest(s)):e.is(i.id)?n.addFileToDocument(i,s):n.createDocument(i,s)},a=function(i,r,s){o.isStandAlone()?(e.merge(s,{url:"dsmfg/private/V0/invoke/modifyFile",method:"POST",data:i}),t.webServiceRequest(s)):n.modifyDocument(i,s)},l=function(i,r,s){o.isStandAlone()?(e.merge(s,{url:"dsmfg/private/V0/invoke/fetchDocuments",method:"POST",data:i}),t.webServiceRequest(s)):n.downloadDocument(i,r,!1,s)},d=function(i,r,s){o.isStandAlone()?(e.merge(s,{url:"dsmfg/private/V0/invoke/deleteFile",method:"POST",data:{docId:i,fileID:r}}),t.webServiceRequest(s)):n.deleteFile(i,r,s)},g=function(i,r){o.isStandAlone()?(e.merge(r,{url:"dsmfg/private/V0/invoke/fetchDocuments",method:"POST",data:i}),t.webServiceRequest(r)):n.downloadDocuments(i,r)},m=function(i,r){o.isStandAlone()?(e.merge(r,{url:"dsmfg/private/V0/invoke/deleteDocuments",method:"DELETE",data:i}),t.webServiceRequest(r)):n.deleteDocument(i,r)},I=function(n){e.is(S)?t.getXMLValues(S,function(t){var i,o,r,s;if(e.is(t.DisplayAttributeDescriptionList))for(i=t.DisplayAttributeDescriptionList,i=e.is(i.Document,"array")?i.Document:[i.Document],o=0;o<i.length;o++)r=e.is(i[o].Attribute,"array")?i[o].Attribute:[i[o].Attribute],s=[],r.forEach(function(e){s.push(e.name)}),D[i[o].coloumnName]=s;n()},function(){y.debug("DocumentsColumnMappingXML couldn't be fetched'"),n()}):(y.debug("DocumentsColumnMappingXML is not available"),n())},h=function(n,i){t.webServiceRequest({url:"dsmfg/private/V0/MfgElement/document/policyNames",method:"GET",data:null,onComplete:function(t){e.is(t,"array")?(f=t,e.is(n,"function")&&n(f)):e.is(i,"function")&&i("Document Policies are not recieved from server")},onFailure:function(t){y.debug("!!! WS call 'dsmfg/private/V0/MfgElement/document/policyNames' in DocumentPlugin._fetchDocumentsPolicies() failed"),e.is(i,"function")&&i(t)},onTimeout:function(t){y.debug("!!! WS call 'dsmfg/private/V0/MfgElement/document/policyNames' in DocumentPlugin._fetchDocumentsPolicies() timed out"),e.is(i,"function")&&i(t)}})},C=function(t){new e.Promise.all([new Promise(I)]).then(function(){y.debug("DocumentPlugin initialized!"),t()},function(e){y.debug("Failed to load DocumentPlugin Plugin. Error Description:"+e),t()})},P=function(){f=void 0},p=function(e){var t=new(r.getPlugins("UXComponentsPlugin").instance.getComponent("Element"))("a"),n=e+"&attachment=true";"download"in t||(t.target="_blank"),t.setAttributes({download:!0,href:n}),t.click()},{name:"DocumentPlugin",onStart:function(e){C(e),i.setDocumentCollectionEvents({"onChange:relateddata":function(e,t,n){r.getMediator().notify("documentChanged",[e,t,n])}}),v.push(r.addExternalListener("endEdit",P))},onStop:function(){var e,t;for(i.removeDocumentCollectionEvents(),e=0,t=v.length;e<t;e++)r.removeExternalListener(v[e]);v=[],f=void 0},getDocumentTypes:function(){var t=[],n=r.getPlugins("DicoPlugin");return e.is(n)&&(t=(n=n.instance).getDocumentTypes()),t},getDocumentsPolicies:function(t){t=t||{},e.is(f,"array")?e.is(t.onComplete,"function")&&t.onComplete(f):h(t.onComplete,t.onFailure)},getAttributesConfiguredOnDocumentColumn:function(t){var n;return e.is(t)&&e.is(D)&&(n=D[t]),n},isColumnConfigured:function(t){return e.is(this.getAttributesConfiguredOnDocumentColumn(t))},isDocConnection:function(e){return"PLMDocConnection"===e.get("type")},hasDocuments:function(e){return this.getDocumentConnections(e).length>0},getConnectedDocuments:function(e){var t=[];return i.getImpactedConnections(e,null,{relationTypes:["PLMDocConnection","Reference Document","SpecificationDocument"]}).forEach(function(e){t.push(e.get("to"))}),t},getConnectedDocumentPIDs:function(e){let t=[];return i.getImpactedConnections(e,null,{relationTypes:["PLMDocConnection","Reference Document","SpecificationDocument"]}).forEach(function(e){t.push(e.get("PID"))}),t},addDocument:function(e,t){return i.addDocument(e,t)},getDocument:function(e){return i.getDocument(e)},removeDocument:function(e){return i.removeDocument(e)},addDocumentConnection:function(t,n,o,r){const s=e.is(o)?o:"PLMDocConnection";return i.addConn({PID:s+"|"+t+"|"+n,from:t,to:n,type:"PLMDocConnection"},r)},getDocumentConnections:function(e){var t=i.isReference(e)?e:i.getInstanceFromCollection(e).get("isInstanceOf");return i.findConnections({from:t,type:"PLMDocConnection"})},getDocumentConnectionsByDocID:function(e){return i.findConnections({to:e,type:"PLMDocConnection"})},removeDocumentConnections:function(e){var t=this;t.getConnectedDocumentPIDs(e).forEach(function(n){const[i,,o]=n.split("|");t.removeDocumentConnection(e,o,i)})},removeDocumentConnection:function(t,n,o,r){const s=e.is(o)?o:"PLMDocConnection";return i.removeConnection(s+"|"+t+"|"+n,r)},getDocumentID:function(n,i){var o;i=i||{},o=e.merge({url:b+"?irpcPID="+n,method:"GET",onComplete:function(t){y.debug("Get document information is succeeded."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){y.debug("Get document information is failed due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),t.webServiceRequest(o)},linkWithDocumentID:function(n,i,o){var r,s={pid:n,myDocumentPID:i,isVPLMControlled:"true"};o=o||{},r=e.merge({url:b,method:"POST",data:e.Json.encode(s),onComplete:function(t){y.debug("Linking document with IRPC is succeeded."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){y.debug("Linking document with IRPC is failed due to :  "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),t.webServiceRequest(r)},deleteLink:function(n,i,o){var r,s={pid:n,myDocumentPID:i};o=o||{},r=e.merge({url:b,method:"DELETE",data:e.Json.encode(s),onComplete:function(t){y.debug("Delete link between IRPC and Document is succeeded."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){y.debug("Delete link between IRPC and Document is failed due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),t.webServiceRequest(r)},getDocumentInfo:function(n,i){var o,r=function(t){y.debug("Get document inforation is succeeded."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)};i=i||{},o=e.merge(s(),i),o=e.merge({securityContext:t.getSecurityContext(),onComplete:r,onFailure:function(t){y.debug("Get document inforation is failed due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},o),Array.isArray(n)||(n=[n]),n.length>0?u(n,o):r({data:[]})},attachFile:function(t,n,i){var o;(t=t||{}).fileInfo=n,i=i||{},o=e.merge(s(),i),o=e.merge({onComplete:function(t){y.debug("File successfully created."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){y.debug("Unable to attach file due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},o),c(t,0,o)},modifyFile:function(n,i,o){var r;(n=n||{}).fileInfo=i,o=o||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){y.debug("File successfully modifed."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){y.debug("Unable to modify file due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),a(n,0,r)},fetchFileURL:function(n,i,o){var r;o=o||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){y.debug("File URL successfully fetched.."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){y.debug("Unble to fetch File URL due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),l(n,i,r)},downloadFile:function(n,i,o){var r;o=o||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){p(t),y.debug("Files successfully downloaded.."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){y.debug("Unble to download files due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),l(n,i,r)},removeFile:function(n,i,o){var r;o=o||{},r=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){y.debug("File successfully modifed."),e.is(o.onComplete,"function")&&o.onComplete.call(null,t)},onFailure:function(t){y.debug("Unable to modify file due to : "+e.Json.encode(t)),e.is(o.onFailure,"function")&&o.onFailure.call(null,t)}},o),d(n,i,r)},downloadDocuments:function(n,i){var o,r,s;i=i||{},n=e.is(n,"array")?n:[n],o=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){for(r=0;r<t.length;r++)s=t[r].downloadUrl,p(s);y.debug("Files successfully downloaded.."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){y.debug("Unble to download files due to : "+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),g(n,o)},deleteDocument:function(n,i){var o;i=i||{},o=e.merge({securityContext:t.getSecurityContext(),onComplete:function(t){y.debug("Document successfully deleted.."),e.is(i.onComplete,"function")&&i.onComplete.call(null,t)},onFailure:function(t){y.debug("unable to delete document due to"+e.Json.encode(t)),e.is(i.onFailure,"function")&&i.onFailure.call(null,t)}},i),m(n,o)}}}}),define("DS/DELPPWModelPlugins/InterWidgetComPlugin",["UWA/Core"],function(e){"use strict";return function(t){var n,i,o,r="InterWidgetComPlugin",s=t.getLogger(),u=null,c=t.getConfig().widgetLinkOpts;return o=function(){return e.is(n)||(n=t.getPlugins("PlatformPlugin").instance),n},i=function(t){const n=parent.require;window.__karma__?(s.debug(r,"We are in karma test environment, thus preventing the use of WidgetLink."),t()):n(["DS/WidgetLink/WidgetLink"],function(n){e.is(n)&&(c=c||{},(u=n.get(widget)).setLinkability(c)),t()},function(){s.debug(r,'ERROR couldnt fetch "DS/WidgetLink/WidgetLink"'),t()})},{name:r,onStart:function(e){i(e)},onStop:function(){},getComLink:function(){return u},addEventListener:function(t,n){var i=this.getComLink();e.is(i)&&e.is(t,"string")&&e.is(n,"function")?i.addEventListener(t,n):s.debug(r,"ERROR couldnt addEventListener to widgetLink")},subscribeEvent:function(t,n){var i=this.getComLink();e.is(i)&&e.is(t,"string")&&e.is(n,"function")?i.subscribe(t,n):s.debug(r,"ERROR couldnt subscribeEvent from widgetLink")},publishEvent:function(t,n){var i=this.getComLink();e.is(i)&&e.is(t,"string")?i.publish(t,n):s.debug(r,"ERROR couldnt publishEvent to widgetLink")},isWidgetLinked:function(t){var n,i,o=!1;return n=this.getComLink(),e.is(n)&&(i=n.getLinked())&&i.length>0&&(o=i.some(e=>e.appId===t)),o},isOpsViewerWidgetLinked:function(){var e;return e=o().isCloud()?"DELOERC_AP":"DELOER_AP",this.isWidgetLinked(e)},isCloud:function(){return o().isCloud()}}}}),define("DS/DELPPWModelPlugins/BI/BIPlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWModelServices/BIUtils","DS/DELPPWResourceServices/ResourceUtils"],function(e,t,n,i){"use strict";return function(t){var o="BIPlugin",r=!1,s=[],u=function(){var s,u={noTimeout:!0},c=function(e){return Array.isArray(e)&&e.length>0};!1!==r&&(s=t.getLogger().log(o,i.getNLSValue("BI.LogMessage"))),n.resetBIModelCollection();const{rootProducts:a,rootProcesses:l}=function(){let n=null,i=null,r=t.getPlugins("RootsPlugin");if(e.is(r)){const e=(r=r.instance).getRoots(o);2===e.length&&(n=e[0],i=e[1])}else t.getLogger().debug(o,"Roots Plugin unavailble");return{rootProducts:n,rootProcesses:i}}();if(function(e,t){return c(e)&&c(t)}(a,l)){let c=t.getPlugins("RootsPlugin");if(e.is(c)){const d=(c=c.instance).getCompatibleConfigurationFilters(l),f=c.getCompatibleConfigurationFilters(a);e.is(d)&&e.is(f)?(t.getMediator().notify("startProgress",u),n.fetchBIComputation({rootEBOM:a,rootMBOM:l,rootMBOMConfigFilter:d,rootEBOMConfigFilter:f,onFailure:function(){t.getMediator().notify("stopProgress",u),t.getMediator().notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),t.getLogger().warn(o,i.getNLSValue("BI.Computation.Failure"),s)}},function(){var e=n.getProductAssignmentStatus(),c=n.getMfgItemUpdateStatus();t.getMediator().notify("stopProgress",u),!1!==r&&(t.getLogger().info(o,i.getNLSValue("BI.Computation.Success"),s),t.getMediator().notify("updateBIStatus",{ProductStatus:e,ProcessStatus:c}))})):t.getLogger().warn(o,i.getNLSValue("BI.Computation.IncompatibleFilter"))}else t.getLogger().debug(o,"Roots Plugin unavailble")}else t.getLogger().warn(o,i.getNLSValue("BI.Computation.NoMBOMorEBOM"),s)},c=function(e){!0===e.state?(r=!0,u()):(r=!1,n.isBIComputed()&&n.resetBIModelCollection())};return n.init({core:t}),{name:"BIPlugin",onStart:function(){n.setBIModelEvents({onAdd:function(e,n,i){t.getMediator().notify("addBIModel",[e,n,i])},onChange:function(e,n,i){t.getMediator().notify("changeBIModel",[e,n,i])},onReset:function(e,n,i){t.getMediator().notify("resetBIModel",[e,n,i],{sourceModuleId:o})}}),s.push(t.addExternalListener("BIEssentialsCmd",c))},onStop:function(){var e,i;for(n.removeBIModelEvents(),e=0,i=s.length;e<i;e++)t.removeExternalListener(s[e]);s=[]},computeBI:function(){u()},getBrokenMfgItemStatus:function(t,i){n.getBrokenMfgItemStatus({rootEBOM:t.rootEBOM,rootMBOM:t.rootMBOM,rootMBOMConfigFilter:t.rootMBOMConfigFilter,rootEBOMConfigFilter:t.rootEBOMConfigFilter,areRootsBroken:!!e.is(t.areRootsBroken,"boolean")&&t.areRootsBroken,prefix:t.prefix,forceBIComputation:!!e.is(t.forceBIComputation,"boolean")&&t.forceBIComputation},i)},getPhantomNodeItems:function(){return n.getPhantomNodeItems()},getBIModel:function(e){return n.getBIModel(e)},getBICmdState:function(){return r},resetBIModelCollection:function(){return n.resetBIModelCollection()},clearPseudoBIStatus:function(){n.clearPseudoBIStatus()},isBIComputed:function(){return n.isBIComputed()},fetchBIComputation:function(e,t){n.fetchBIComputation(e,t)},getProductStatus:function(e,t){return n.getProductStatus(e,t)},getProcessStatus:function(e,t){return n.getProcessStatus(e,t)},getBIModelCollection:function(){return n.getBIModelCollection()}}}}),define("DS/DELPPWModelPlugins/MfgProcess/MfgProcessPlugin",["UWA/Core","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWNavigationServices/NavigateUtil"],function(e,t,n,i){"use strict";return function(o){return{name:"MfgProcessPlugin",webserviceAndProcessing:function(r,s,u){var c,a,l=[],d={instancesAndReferences:[],connections:[]},f=JSON.parse(s),g=function(t,n){e.is(u)&&e.is(u.onFailure)&&u.onFailure(n)};f.rootMfgItemID&&(c=f.rootMfgItemID),n.webServiceRequest({url:e.is(u.appenedURL)?"dsmfg/private/V0/invoke/MfgProcess/BI/"+u.appenedURL:"dsmfg/private/V0/invoke/MfgProcess/BI",method:r,logMessage:e.is(u.logMessage)?u.logMessage:null,headers:n.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:s,context:this,onFailure:g,onTimeout:g,onCancel:g,onComplete:function(n){var r={stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[],deletedConnections:[]},s=[],f=[],g=null,m=!1,p=i.getConnectionParser();!function(n){e.is(n.revisedObjects)&&n.revisedObjects.forEach(function(e){e.revisedFrom===c&&(g=e.revisedTo),s.push(e.revisedTo)}),n.instancesAndReferences.forEach(function(e){var t=e.attributesValue;t.hasOwnProperty("isInstanceOf")?(e.queriedForConnections=!0,r.stackedInstances.push(e)):(-1===s.indexOf(t.PID)&&(e.queriedForConnections=!0,e.queriedForDocuments=!0),f.push(t.PID),r.stackedReferences.push(e))}),n.connections.forEach(function(t){p.parse(t,r),d.connections.push(t),e.is(t["from.attributesValue"])&&t["from.attributesValue"].PID===c&&(m=!0)}),e.is(n.reusedReferences)&&(l=n.reusedReferences.filter(function(n){var i=e.is(t.getReferenceFromCollection(n)),o=-1!==f.indexOf(n);return!(i||o)})),Object.keys(n.deletedUsagePoints).forEach(function(i){var o,r,s,u=n.deletedUsagePoints[i],c=t.getConnectionFromCollection(i);e.is(c)&&e.is(c.get("usagePoint"))&&e.is(u)&&(u.forEach(function(t){for(o=0;o<t.length;o++)r=c.get("usagePoint").findIndex(e=>JSON.stringify(e)===JSON.stringify(t[o])),e.is(r)&&-1!==r&&c.get("usagePoint").splice(r,1)}),s={data:c,onComplete:function(){console.log("Usage point deleted successfully")},onFailure:function(){console.log("Deletion of Usage point failed")}},t.updateConn(i,s))}),Object.keys(n.usagePoints).forEach(function(i){var r,s=n.usagePoints[i],u=t.getConnectionFromCollection(i);e.is(u)&&e.is(u.get("usagePoint"))&&e.is(s)&&(s.forEach(function(e){u.get("usagePoint").push(...e)}),r={data:u,onComplete:function(){o.getMediator().notify("refreshImpacted"),o.getMediator().notify("updateCrossHighlight"),console.log("Usage point rerouted successfully")},onFailure:function(){console.log("Rerouting of Usage point failed")}},t.updateConn(i,r))}),r.deletedObjects=r.deletedObjects.concat(n.deletedObjects),r.deletedConnections=r.deletedConnections.concat(n.deletedConnections),r.stackedInstances.forEach(function(e){"PROCESS"===e.attributesValue.PPRTYPE&&d.instancesAndReferences.push(e.attributesValue)}),o.getMediator().notify("createMfgItemStructure",d)}(n),0!==r.deletedObjects.length||0!==r.stackedReferences.length||0!==r.stackedInstances.length||0!==r.stackedConnections.length||0!==r.deletedConnections.length||null!==g?(a=function(){var i=[];r.onComplete=function(){i.length>0&&o.getMediator().notify("instanceRemoved",[i]),e.is(u)&&e.is(u.onComplete)&&u.onComplete(c,g,n,m)},e.is(r.deletedObjects)&&r.deletedObjects.forEach(function(n){var o=t.getInstanceFromCollection(n);e.is(o)&&i.push(o)}),t.addToCollections(r)},e.is(l,"array")&&l.length>0?i.getDescendantsFromServer(l,a,{expandLevel:0,silentMode:!0}):a()):e.is(u)&&e.is(u.onComplete)&&u.onComplete(null,null,n)}})}}}}),define("DS/DELPPWModelPlugins/ModelObserverPlugin",["UWA/Core","UWA/Utils","DS/DELPPWModelServices/CollectionUtils"],function(e,t,n){"use strict";return function(i){var o,r,s=i.getLogger(),u=function(t){Object.keys(r).forEach(n=>{e.is(r[n],"function")&&r[n](t)})};return{name:"ModelObserverPlugin",onStart:function(){r={},o=n.subscribeToModelChanges(u)},onStop:function(){r=null,n.unSubscribeToModelChanges(o)},subscribeToModelChanges:function(n){var i;return e.is(n,"function")?(i=t.getUUID(),r[i]=n):s.debug("ModelObserverPlugin::subscribeToModelChanges expected first argument to be function"),i},unSubscribeToModelChanges:function(t){e.is(r[t])&&delete r[t]}}}}),define("DS/DELPPWModelPlugins/DELPXPSessionPlugin",["UWA/Core","DS/DELPXPMfgModelers/DELPXPMfgModelersAPI","DS/DELPXPSessionManager/DELPXPSessionManager","DS/DELPXPProcessBuildUp/DELPXPProcessBuildUpAPI"],function(e,t,n,i){"use strict";return function(e){var o,r,s=e.getLogger(),u={},c=null;return r=function(){return s.debug("DELPXPSessionManager::create session method invoked"),n.createPXPSession()},{name:"DELPXPSessionPlugin",onStart:function(){},onStop:function(){},retriveSessionIdForSelected:function(e,t){var n=null,i=e+","+t;return-1!==Object.keys(u).indexOf(i)&&(n=u[i]),n},retriveActiveSessionId:function(){return c},retriveActiveSession:function(){return o},retriveAllSessions:function(){return u},resetAllSessions:function(){o=c=null,u={}},getMfgModelers:function(e){return t.GetMfgModelers(e)},createSession:function(e,t){var n;return null===(n=this.retriveSessionIdForSelected(e,t))&&(n=r(),u[[e,t]]=n),c=n,n},connectBuildUpSession:async function(e,n){var r,u,c;return r=this.createSession(e,n),u=await i.connectProcessBuildUp(r),c=i.GetProcessBuildUpAPI(u),o=u,s.debug("DELPXPProcessBuildUpAPI::Build Up session connected"),{processBuildUpAPI:c,initBuildupModelers:t.GetMfgModelers(u)}}}}}),define("DS/DELPPWModelPlugins/MfgItem/MfgItemPlugin",["UWA/Core","DS/DELPPWModelServices/CollectionUtils","DS/DELPPWWebServices/WebserviceUtils","DS/DELPPWNavigationServices/NavigateUtil","DS/DELPPWModelServices/BehaviorUtil"],function(e,t,n,i,o){"use strict";return function(r){return{name:"MfgItemPlugin",webserviceAndProcessing:function(o,s,u){var c,a,l,d=[],f={instancesAndReferences:[],connections:[]},g=JSON.parse(s),m=function(t,n){e.is(u)&&e.is(u.onFailure)&&u.onFailure(n)};g.rootMfgItemID&&(c=g.rootMfgItemID),l=n.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml"),e.is(l,"string")&&(g.xmlLinkAuthoringConfig=l,s=e.Json.encode(g)),n.webServiceRequest({url:e.is(u.appenedURL)?"dsmfg/private/V0/invoke/MfgItem/"+u.appenedURL:"dsmfg/private/V0/invoke/MfgItem",method:o,logMessage:e.is(u.logMessage)?u.logMessage:null,headers:n.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:s,context:this,onFailure:m,onTimeout:m,onCancel:m,onComplete:function(n){var o,s={stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},l=[],g=[],m=null,p=!1,P=i.getConnectionParser(),C=function(n){e.is(n.revisedObjects)&&n.revisedObjects.forEach(function(e){e.revisedFrom===c&&(m=e.revisedTo),l.push(e.revisedTo)}),n.instancesAndReferences.forEach(function(t){var n=t.attributesValue;e.owns(n,"isInstanceOf")?(t.queriedForConnections=!0,s.stackedInstances.push(t)):(-1===l.indexOf(n.PID)&&(t.queriedForConnections=!0,t.queriedForDocuments=!0),g.push(n.PID),s.stackedReferences.push(t))}),n.connections.forEach(function(t){P.parse(t,s),f.connections.push(t),e.is(t["from.attributesValue"])&&t["from.attributesValue"].PID===c&&(p=!0)}),e.is(n.reusedReferences)&&(d=n.reusedReferences.filter(function(n){var i=e.is(t.getReferenceFromCollection(n)),o=-1!==g.indexOf(n);return!(i||o)})),s.deletedObjects=s.deletedObjects.concat(n.deletedObjects);const i=s.stackedInstances.reduce(function(e,t){return"PROCESS"===t.attributesValue.PPRTYPE&&e.push(t.attributesValue),e},[]);f.instancesAndReferences=f.instancesAndReferences.concat(i),r.getMediator().notify("createManufacturingItemStructure",f)};"RerouteMfgItem"===u.appenedURL?(o=n.succeeded,Object.keys(o).forEach(function(e){var t=o[e];Object.keys(t).forEach(function(e){C(t[e])})})):C(n),0!==s.deletedObjects.length||0!==s.stackedReferences.length||0!==s.stackedInstances.length||0!==s.stackedConnections.length||null!==m?(a=function(){var i=[];e.is(s.deletedObjects)&&s.deletedObjects.forEach(function(n){var o=t.getInstanceFromCollection(n);e.is(o)&&i.push(o)}),s.onComplete=function(){i.length>0&&r.getMediator().notify("instanceRemoved",[i]),e.is(u)&&e.is(u.onComplete)&&u.onComplete(c,m,n,p)},t.addToCollections(s)},e.is(d,"array")&&d.length>0?i.getDescendantsFromServer(d,a,{expandLevel:0,silentMode:!0}):a()):e.is(u)&&e.is(u.onComplete)&&u.onComplete(null,null,n)}})},callScalCreateMBOM:function(t){return new Promise((i,r)=>{const s=o.isCloud()?n.getAppCloudServiceName():n.get3DSpaceServiceName();n.webServiceRequest({url:"dsmfg/private/V0/scal/createMBOM",method:"POST",serviceName:s,headers:n.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(t),onFailure:(e,t)=>r(t),onTimeout:(e,t)=>r(t),onCancel:(e,t)=>r(t),onComplete:e=>i(e)})})},getCreateMfgItemStatus:function(){return new Promise((e,t)=>{const i=o.isCloud()?n.getAppCloudServiceName():n.get3DSpaceServiceName();n.webServiceRequest({url:"dsmfg/private/V0/scal/getAllStatus",method:"GET",serviceName:i,headers:n.getHeaders({isAuthoringCtx:!1,isJsonOnly:!0}),onComplete:function(t){e(t)},onFailure:function(e){t(e)}})})},createMBOMOnResubmit:function(t,i){return new Promise((r,s)=>{const u=o.isCloud()?n.getAppCloudServiceName():n.get3DSpaceServiceName();n.webServiceRequest({url:`dsmfg/private/V0/scal/createMBOM?correlationId=${i}`,method:"POST",serviceName:u,headers:n.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(t),onFailure:(e,t)=>s(t),onTimeout:(e,t)=>s(t),onCancel:(e,t)=>s(t),onComplete:function(e){r(e)}})})}}}}),define("DS/DELPPWModelPlugins/ChangeActionPlugin",["UWA/Core","DS/PlatformAPI/PlatformAPI","DS/DELPPWWebServices/WebserviceUtils","DS/CfgAuthoringContextUX/scripts/CfgAuthoringContext"],function(e,t,n,i){"use strict";return function(o){var r,s,u,c,a,l,d,f,g,m,p=[],P=[];return a=function(){return widget.id+"/AuthKey"},u=function(){return widget.getValue("storedChangeAction")},c=function(e){widget.setValue("storedChangeAction",e)},m=function(){const t=u();e.is(t,"string")&&t.length>0&&i.cleanAuthDetails().then(function(){c("")})},l=function(){const t=u();e.is(t,"string")&&t.length>0&&c("")},d=function(t){e.is(t)&&e.is(t.change)&&e.is(t.change.id,"string")&&c(t.change.id)},f=function(t){var r={context:1};return new e.Promise(function(s,u){n.webServiceRequest({url:"modeler/change/changeaction/pid:"+t,method:"GET",header:n.getHeaders({isJsonOnly:!0}),data:r,onComplete:function(n){var r=[];o.getLogger().debug(self.name,"Change action set completed: %s",n),(e.is(n)&&e.is(n.changeaction)&&e.is(n.changeaction.context,"array")?n.changeaction.context:[]).forEach(function(t){var n=e.is(t)&&e.is(t.id,"string")?t.id.split(":"):[];2===n.length&&"pid"===n[0]&&0!==n[1].length&&r.push(n[1])}),i.set({version:"1.0",change:{id:t}}),c(t),s(r)},onFailure:u,onTimeout:u})})},g=function(){const t=u();e.is(t,"string")&&t.length>0&&f(t)},r=function(){P.push(o.addExternalListener("LoadNewSession",m)),P.push(o.addExternalListener("LoadRecentContent",g)),p.push(t.subscribe(a(),d)),p.push(t.subscribe("removeAuthCtxEvent"+a(),l))},s=function(){p.forEach(function(e){t.unsubscribe(e)}),P.forEach(function(e){o.removeExternalListener(e)}),P=[],p=[]},{name:"ChangeActionPlugin",onStart:function(){r()},onStop:function(){s()},getAuthoringContextPID:function(){var t=i.get();return e.is(t)&&e.is(t.change.id)?t.change.id:null},getAuthoringContextHdr:function(){var t=i.get();return e.is(t)&&e.is(t.AuthoringContextHeader)?t.AuthoringContextHeader:{}},setCAAndGetDetails:function(e){return f(e)}}}}),define("DS/DELPPWModelPlugins/Graph/EGraphPlugin",["UWA/Core","DS/DELPPWModelServices/EGraphUtils"],function(e,t){"use strict";return function(n){var i,o;return o=function(){return e.is(i)||(i=n.getPlugins("DicoPlugin").instance),i},{name:"EGraphPlugin",onStart:function(){var e,i=o(),r=[];n.getLogger().debug("EGraphPlugin - onStart"),["PRODUCT","PROCESS","SERVICE","SYSTEM","OPERATION","RESOURCE","CONSTRUCTION"].forEach(t=>{e=i.getAllConfiguredRelations(t,"read"),r=[...new Set([...r,...e])]}),t.setup({supportedLinks:r})},getEGraphDataToDisplay:function(e){return t.getEGraphData(e)},setLinkDisplayStatus:function(e,n){t.setLinkDisplayStatus(e,n)},getCreatableTypesOfLink:function(){return t.getCreatableTypesOfLink()},getProductFlowDataToDisplay:function(e,n){return t.getProductFlowData(e,n)},isProductFlowDataLooped:function(e){return t.isProductFlowLooped(e)},getType:function(e){return t.getType(e)},getProductFlowGraphInstance:function(e,n){return t.getProductFlowGraphInstance(e,n)}}}}),define("DS/DELPPWModelPlugins/ResourcePlugin/WebServicePlugin",["UWA/Core","DS/DELPPWWebServices/WebserviceUtils"],function(e,t){"use strict";return function(n){var i="WebServicePlugin";return{name:i,onStart:function(){},getXMLValues:function(o,r,s){var u=null;return e.is(o,"string")&&o.length>0?u=t.getXMLValues(o,r,s):(n.getLogger().debug(i,"Invalid XML path (ixmlKey)"),e.is(s,"function")),u},webServiceRequest:function(e){t.webServiceRequest(e)},getSecurityContext:function(){return t.getSecurityContext()},get3DSpaceUrl:function(){return t.get3DSpaceUrl()},getTenant:function(){return t.getTenant()},getHeaders:function(e){return t.getHeaders(e)},get3DSpaceServiceName:function(){return t.get3DSpaceServiceName()},getPlatformID:function(e){return t.getPlatformID(e)},getServerConfigurationRawXML:function(e){return t.getServerConfigurationRawXML(e)}}}}),define("DS/DELPPWModelPlugins/ResourcePlugin/ResourcePlugin",["UWA/Core","DS/DELPPWResourceServices/ResourceUtils"],function(e,t){"use strict";return function(e){return{name:"ResourcePlugin",getNLSForUnit:function(e,n){return t.getNLSForUnit(e,n)},getLabelForUnit:function(e,n){return t.getLabelForUnit(e,n)},addCATNlsFile:function(e){t.addCATNlsFile(e)},addNls:function(e){t.addNls(e)},addNlsJSON:function(e,n=!1){t.addNlsJSON(e,n)},getNLSValue:function(e,n,i,o){return t.getNLSValue(e,n,i,o)},addIconsFromCATRsc:function(e,n){t.addIconsFromCATRsc(e,n)},addIcons:function(e,n){t.addIcons(e,n)},getIconURLFromKey:function(e,n,i){return t.getIconURLFromKey(e,n,i)},getIconElem:function(e,n){return t.getIconElem(e,n)}}}});