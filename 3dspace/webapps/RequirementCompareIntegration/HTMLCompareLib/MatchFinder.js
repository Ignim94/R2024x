define(["require","exports","./Utils"],function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.findMatch=void 0;var r=function(e,n,t){return e.push(n),e.length>t&&e.shift(),e.length!==t?null:e.join("")},i=function(e,n){return e=t.stripAnyAttributes(e),n&&t.isWhiteSpace(e)?" ":e};n.findMatch=function(e,n,t,l,u,a,s){var f,o,c=function(e,n,t,l){for(var u,a=new Map,s=[],f=n;f<t;f++){var o=i(e[f],l.ignoreWhiteSpaceDifferences),c=r(s,o,l.blockSize);null!==c&&(a.has(c)?null===(u=a.get(c))||void 0===u||u.push(f):a.set(c,[f]))}return a}(n,u,a,s);if(0===c.size)return null;for(var v=t,d=u,h=0,p=new Map,g=s.blockSize,M=[],w=t;w<l;w++){var S=i(e[w],s.ignoreWhiteSpaceDifferences),b=r(M,S,g);if(null!==b){var z=new Map;if(c.has(b)){for(var I=0,O=null!==(f=c.get(b))&&void 0!==f?f:[];I<O.length;I++){var W=O[I],j=(null!==(o=p.get(W-1))&&void 0!==o?o:0)+1;z.set(W,j),j>h&&(v=w-j-g+2,d=W-j-g+2,h=j)}p=z}else p=z}}var k=h+g-1;return 0!==h?{startInOld:v,startInNew:d,endInOld:v+k,endInNew:d+k,size:k}:null}});