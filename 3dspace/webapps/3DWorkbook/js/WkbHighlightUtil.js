define("DS/3DWorkbook/js/WkbHighlightUtil",["UWA/Core"],function(t){"use strict";return{getTopAssemblyPath:function(t,e){var n="//GranularObject[";return n+="count(InstancePath/Instance)=1 and InstancePath/Instance[@ReferenceName='"+t+"'] ",n+="]/@HighlightPath",e.evaluate(n,e,null,2,null).stringValue},getPathFromMap:function(e,n,a){var r=null,l=null,u=null,c=n,i="//GranularObject[",h=0;for(r=e.length-1;r>-1;r-=1)r<e.length-1&&(i+=" and "),i+="InstancePath/Instance[last()-"+h+"][@InstanceName='"+(t.is(e[r].instName)?e[r].instName:e[r].getAttribute("data-prdInstance"))+"']",h+=1;i+="]/@HighlightPath";if(1!==n.evaluate("count("+i+")",c,null,XPathResult.ANY_TYPE,null).numberValue)return null;u=n.evaluate(i,c,null,4,null);try{l=u.iterateNext().textContent}catch(t){console.log("Error: Document tree modified during iteration finding highlightId"+t)}return l},getPartPhysicalId:function(t,e){var n,a="//GranularObject[";for(n=0;n<t.length;n++)n>0&&(a+=" and "),a+="InstancePath/Instance[@Index>='",a+=n+1,a+="' and @InstanceName='",a+=t[n].instName+"']";return a+="and count(InstancePath/Instance)="+t.length.toString(),a+="]/ProxyProduct/InstancePath/Instance[@Index='1']/@InstPhyID",e.evaluate(a,e,null,2,null).stringValue},getPathConnected:function(t,e,n){var a="//GranularObject[";return a+="InstancePath/Instance[last()][@InstPhyID='",a+=t+"']",a+="]/ProxyProduct/InstancePath/Instance[@Index='1']/@InstPhyID",e.evaluate(a,e,null,XPathResult.STRING_TYPE,null).stringValue},getPathConnectedFromReferenceName:function(t,e,n){var a="//GranularObject[";return a+="InstancePath/Instance[last()][@ReferenceName='",a+=t+"']",a+="]/ProxyProduct/InstancePath/Instance[@Index='1']/@InstPhyID",e.evaluate(a,e,null,XPathResult.STRING_TYPE,null).stringValue},getPathFromMapConnected:function(t,e,n){var a=t.getAttribute("data-phyid");return this.getPathConnected(a,e,n)},getToolHighlightPathFromRefName:function(t,e,n){var a,r,l="",u=null,c=null,i=0,h=e.getElementsByTagName("GranularObject"),o="Connected"===n;for(a=0;a<h.length;a++)if(i=(c=(u=h[a]).children[0].children).length-1,"Resource"===u.getAttribute("Type")&&i>-1&&c[i].getAttribute("ReferenceName")===t){if(o){for(r=0;r<u.children.length;r+=1)"ProxyProduct"===u.children[r].nodeName&&(l.length>0&&(l+=";"),l+=u.children[r].children[0].children[0].getAttribute("InstPhyID"));return l}return u.getAttribute("HighlightPath")}return""},getToolHighlightPath:function(t,e,n){return this.getToolHighlightPathFromRefName(t.dataset.referenceName,e,n)},getInstancePath:function(t,e){var n,a,r,l,u="//GranularObject[";if(u+="ProxyProduct/InstancePath/Instance[@InstPhyID='"+t+"']",u+=" and count(ProxyProduct/InstancePath/Instance)=1",u+="]/InstancePath",1!==e.evaluate("count("+u+")",e,null,XPathResult.ANY_TYPE,null).numberValue)return null;a=e.evaluate(u,e,null,5,null);try{n=a.iterateNext()}catch(t){console.log("Error: Document tree modified during iteration finding highlightId"+t)}if(n.children.length>0){var c=0;for(r=[],l={};c<n.children.length;c+=1)(l={}).index=n.children[c].getAttribute("Index"),l.referenceName=n.children[c].getAttribute("ReferenceName"),l.instanceName=n.children[c].getAttribute("InstanceName"),l.referenceTitle=n.children[c].getAttribute("ReferenceTitle"),l.instPhyID=n.children[c].getAttribute("InstPhyID"),r.push(l)}return r}}});