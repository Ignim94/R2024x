define("DS/3DWorkbook/js/views/WkbToolListView",["UWA/Core","UWA/Class","UWA/Utils/Client","DS/CoreEvents/ModelEvents","DS/UIKIT/Scroller","DS/3DWorkbook/js/views/WkbViewsUtils","DS/3DWorkbook/js/views/WkbSecondaryToolsListView","DS/3DWorkbook/js/views/WkbSecondaryToolListHeaderView","i18n!DS/3DWorkbook/assets/nls/3DWorkbook"],function(t,i,e,o,s,n,r,a,l){"use strict";return i.extend({init:function(t){this.modelEvtManager=t.modelEvtManager||new o,this.container=null,this.attributeConfig=t.attributeConfig,this.scroller=null,this.cardList=[],this.wkbSecondaryToolListMap=new Map,this.resourcePreference=t.resourceType,this.buildSkeleton()},buildSkeleton:function(){this.container=t.createElement("div",{id:"toolList",class:"toolList",styles:{height:"98%",display:"block","white-space":"pre-line"}}),this.mainList=t.createElement("div",{class:"mainToolList",styles:{height:e.getSize().height-230+"px",display:"block","white-space":"pre-line"}}),this.mainList.inject(this.container);var i={modelEvtManager:this.modelEvtManager};this.wkbSecondaryToolListHeaderView=new a(i),this.wkbSecondaryToolListHeaderView.inject(this.container),this.secondaryToolLists=t.createElement("div",{class:"secondaryToolsList",styles:{height:e.getSize().height-230+"px",display:"block","white-space":"pre-line"}}),this.secondaryToolLists.inject(this.container),this.secondaryToolLists.hide()},clearTiles:function(){var t=this;this.cardList.forEach(function(i){i.removeOnClick(t._getOnCardSelected(i)),i.destroy()}),this.cardList=[],this._destroyScroll();for(const t of this.wkbSecondaryToolListMap.values())t.clearTiles(),t.destroy();this.wkbSecondaryToolListMap.clear(),this.currentSecondaryToolListView=null},hideMainList:function(){this.mainList.hide()},showMainList:function(){this.secondaryToolLists.hide(),t.is(this.currentSecondaryToolListView)&&this.currentSecondaryToolListView.hide(),this.mainList.show()},hideSecondaryToolList:function(){this.secondaryToolLists.hide(),t.is(this.currentSecondaryToolListView)&&this.currentSecondaryToolListView.hide()},showSecondaryToolList:function(t){this.hideMainList(),this.secondaryToolLists.show(),this.currentSecondaryToolListView=this.wkbSecondaryToolListMap.get(t),this.currentSecondaryToolListView.show()},showSecondaryToolHeader:function(){this.wkbSecondaryToolListHeaderView.show()},hideSecondaryToolHeader:function(){this.wkbSecondaryToolListHeaderView.hide()},updateSecondaryToolHeaderTitle:function(t){this.wkbSecondaryToolListHeaderView.updateTitle(t)},hide:function(){this.container.hide()},show:function(){this.container.show()},unhighlightCard:function(t){t.unhighlight()},highlightCard:function(t){t.highlight()},unhighlightAll:function(){this.container.querySelectorAll(".toolItem").forEach(function(t){n.setCardStyleNotSelected(t)})},syncHighlightToViewer:function(i,e){var o,s=this.container.querySelectorAll(".toolItem");t.is(s)&&(n.doHighlight(s,i,e)||(o=i.split("/"),n.doHighlight(s,o[0],e)))},inject:function(t){this.container.inject(t)},getContainer:function(){return this.container},loadCards:function(i){this._destroyScroll();var e=0,o=null;if(0!==i.length){for(;e<i.length;e++)o=this._getToolCard(i[e]),t.is(o)&&(o.inject(this.mainList),this.cardList.push(o)),t.is(i[e].children)&&i[e].children.length>0&&this._loadSecondaryToolsCards(i[e]);this._addScroll(this.mainList,this.mainList.parentElement)}},addHighlightingData:function(i){if(!(this.cardList.length<1)){var e=null,o=0;for(o=0;o<this.cardList.length;o+=1){const s=this.cardList[o];e=t.is(i)?n.getToolHighlightPath(s,i):s.getPID(),n.createHighlightingData(s,e);const r=this.wkbSecondaryToolListMap.get(s.dataset.id);t.is(r)&&r.addHighlightingData(i)}}},_loadSecondaryToolsCards:function(t){var i={modelEvtManager:this.modelEvtManager,attributeConfig:this.attributeConfig,resourceType:this.resourcePreference,pid:t.physicalId},e=new r(i);e.loadCards(t),e.hide(),e.inject(this.secondaryToolLists),this.wkbSecondaryToolListMap.set(t.physicalId,e)},_onCapableResourceExpand:function(t){this.modelEvtManager.publish({event:"wkbToolListView-onCapableResourceExpand",data:t}),t.stopPropagation()},_getToolCard:function(i){var e=n.getToolCard(i,this.attributeConfig.tool);return e.setOnClick(this._getOnCardSelected(e)),t.is(i.children,"array")&&i.children.length>0&&e.addContextMenu(this._onCapableResourceExpand.bind(this),i.physicalId,i.displayName),e},_getOnCardSelected:function(t){var i=this;return function(){i.modelEvtManager.publish({event:"wkbToolListView-Select",data:t})}},_addNoToolDataMarkup:function(){var i=l.NoToolsFoundMsg,e=t.createElement("div",{class:"noToolMsg"});e.textContent=i,e.inject(this.container)},_addScroll:function(t,i){this.scroller=new s({element:t}).inject(i)},_destroyScroll:function(){t.is(this.scroller)&&(this.scroller.destroy(),this.scroller=null)},destroy:function(){this._destroyScroll(),this.container.destroy(),this.container=null,this.cardList.length=0}})});