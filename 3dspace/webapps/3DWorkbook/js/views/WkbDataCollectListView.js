define("DS/3DWorkbook/js/views/WkbDataCollectListView",["UWA/Core","DS/3DWorkbook/js/WkbDataCollectCard","DS/3DWorkbook/js/views/WkbChildListView","DS/3DWorkbook/js/views/WkbViewsUtils","DS/3DWorkbook/js/views/WkbCustomAttributesView","i18n!DS/3DWorkbook/assets/nls/3DWorkbook"],function(t,e,i,n,r,s){"use strict";const a="dcplanchild";return i.extend({init:function(t){t.containerClassName="dcPlanChildItems",t.parentPID=t.planPID,this._parent(t),this.wkbCapableResourceListMap=new Map},unhighlightAllCapableToolCards:function(){this.cardList.forEach(e=>{t.is(e.toolCards)&&e.toolCards.forEach(t=>{t.unhighlight()})})},getCard:function(t){for(var e=null,i=0;i<this.cardList.length;i+=1)if((e=this.cardList[i]).getPID()===t)return e},unhighlightLinkedInstruction:function(e){var i=this.getCard(e);return!!t.is(i)&&(i.unhighlight(),!0)},secondaryHighlightLinkedInstruction:function(e){const i=this.getCard(e);return!!t.is(i)&&(i.secondaryHighlight(),!0)},highlightLinkedInstruction:function(e){const i=this.getCard(e);return!!t.is(i)&&(i.highlight(),!0)},syncHighlightToViewer:function(t,e){"REMOVE"===e?this.unhighlightLinkedInstruction(t):this.secondaryHighlightLinkedInstruction(t)},_onItemClick:function(t){const e=t.target.parentElement.className;if(e.indexOf("wux-controls-expander-container")>-1||e.indexOf("wux-controls-expander-header-container")>-1||e.indexOf("wux-controls-expander-header")>-1)return;if(n.isCardSelected(t.currentTarget))return;const i=t.currentTarget.dataset.id;this.unHighlightAllCards(),this.modelEvtManager.publish({event:"wkbDetails-InstructionSelected",data:{pid:i,type:"DCROW",userSelect:!0}}),this.modelEvtManager.publish({event:"wkbDataCollectListView-DCItemClick",data:{}}),n.setCardStyleSelected(t.currentTarget)},loadCards:function(e){t.is(this.container.parentElement)&&this._parent(e,this._getChildCard.bind(this))},_getDCRowAttributeConfig:function(t){switch(t){case 1:return this.attributeConfig.dcplanrow_real;case 2:return this.attributeConfig.dcplanrow_integer;case 3:return this.attributeConfig.dcplanrow_text;case 4:return this.attributeConfig.dcplanrow_boolean;case 5:return this.attributeConfig.dcplanrow_timestamp;default:return""}},_getChildCard:function(i,s){var o=s;t.is(i.label)&&i.label.length>0&&(o=o+" - "+i.label);var l=this._getDCRowAttributeConfig(i.dcType),c={title:o,itemClass:"dcPlanChildItem cardNoHighlight itemHover wkiItem",fonticonClass:"fonticon fonticon-pencil",html:r.getCustomAttributesElement(i,l).getHTML(),stampElement:null,isClickable:!0},h=new e(c);h.setPID(i.physicalId),h.setOnClick(this._onItemClick.bind(this)),h.type=a;const d=widget.getValue("resType");return t.is(i.capableResources)&&i.capableResources.length>0&&"capable"===d&&n.insertCapableResources(i.capableResources,h,this.modelEvtManager,this.attributeConfig.tool),h.show(),h},addToolHighlightingData:function(t){n.addToolHighlightingData(this.cardList,t)},destroy:function(){this._parent()}})});