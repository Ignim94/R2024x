define("DS/3DWorkbook/js/views/WkbHomePage",["UWA/Core","UWA/Class","DS/WebUAUtils/WebUAUtils","DS/WelcomeScreenView/WelcomeScreen","DS/WelcomeScreenView/WelcomeScreenButtonController","DS/WelcomeScreenView/WelcomeScreenMRUController","i18n!DS/3DWorkbook/assets/nls/3DWorkbook"],function(e,t,n,i,o,r,s){"use strict";var a=null;return t.extend({init:function(e){this.wkbSearch=e.wkbSearch,this.ematrixURL=e.ematrixURL,a=e.modelEvtManager},show:function(){this.container.show()},hide:function(){this.container.hide()},inject:function(t){var o=this;require("css!DS/WelcomeScreenView/afr-welcome-screen.css");var r=e.createElement("div",{id:"initialWKB",class:"initialWKB"});r.inject(t),this.container=r;var a=this._getMRU(),c=this._getButtons(),l={destroy:function(){return Promise.resolve()},callbacks:{onDragEnter:function(e){return Promise.resolve("OverFullPage")},onDrop:function(t){var n=t.dataTransfer;e.is(n.types,"array")&&n.types.includes("text/plain")&&o.wkbSearch.onSelectedObjectsSearch(n.getData("text/plain"))}}};const u=n.getHelpFullPath("DelWkbUserMap/delwkb-c-ov.htm"),d=n.getHelpFullPath("delwkbusermap/delwkb-r-wn.htm");var g=[{id:"contentAndKnowledge",i18n:{title:s.LandingPageContent},links:[{id:"userAssistance",i18n:{title:s.LandingPageUserAssistance},icon:"fonticon fonticon-i-question",url:u},{id:"whatsNew",i18n:{title:s.LandingPageWhatsNew},icon:"fonticon fonticon-i-question",url:d}]},{id:"socialNetworks",i18n:{title:s.LandingPageSocialNetworks},links:[{id:"delmiaCommunity",i18n:{title:s.LandingPageDelmiaCommunity},icon:"logo-3dswym",url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:44"},{id:"processEngineeringCommunity",i18n:{title:s.LandingPageProcessEngineering},icon:"logo-3dswym",url:"https://r1132100503382-eu1-3dswym.3dexperience.3ds.com/#community:47"}]}];this.welcomeScreen=new i({title:"3DWorkbook",subtitle:s.LandingPageSubtitle,background:this._getBackgroundImage(this.ematrixURL),guidedTour:null,linksCategories:g,buttons:c,MRU:a,dragAndDrop:l}),r.appendChild(this.welcomeScreen.getDOM())},refreshMRU:function(){this.welcomeScreen.setMRU(this._getMRU())},_getBackgroundImage:function(e){var t="",n=screen.width,i=screen.height;return n&&i&&(n+i<=1e3?t="_400x600":n+i<=1500?t="_600x900":n+i<=3200&&(t="_1920x1280")),e+"webapps/3DWorkbook/assets/images/WkbStartPageV2"+t+".jpg"},_getMRUItems:function(){var t="[]";return t=widget.getValue("mruList"),e.is(t,"string")&&(t=JSON.parse(t)),t},_getMRU:function(){const t=this._getMRUItems();var n=widget.getValue("mruViewMode");return e.is(n)||(n="Tiles"),{defaultViewMode:n,items:t,onViewModeChange:function(e){widget.setValue("mruViewMode",e)},controller:new r({onHit:e=>{a.publish({event:"wkbHomePage-Open",data:e})},onContextualMenu:e=>{let t=[];return e&&(t=[{type:"PushItem",title:"Open",action:{callback:t=>{a.publish({event:"wkbHomePage-Open",data:e})}}}]),t}})}},_getButtons:function(){return{items:[{id:"OpenButton",icon:"open",i18n:{title:s.LandingPageOpenButton},hasCustomContent:!1,controller:new o({onAction:e=>(a.publish({event:"wkbHomePage-SelectOpenButton",data:{}}),Promise.resolve())})}]}},destroy:function(){try{e.is(this.welcomeScreen)&&this.welcomeScreen.destroy()}catch(e){}this.welcomeScreen=null,this.wkbSearch=null}})});