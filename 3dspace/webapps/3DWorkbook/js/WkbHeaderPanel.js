define("DS/3DWorkbook/js/WkbHeaderPanel",["UWA/Core","DS/CoreEvents/ModelEvents","DS/UIKIT/Popover","DS/UIKIT/Tooltip","DS/Controls/Button","DS/Controls/ButtonGroup","DS/3DWorkbook/js/WkbUtils","DS/3DWorkbook/js/WkbSearch","i18n!DS/3DWorkbook/assets/nls/3DWorkbook"],function(e,t,n,a,i,s,l,o,c){"use strict";var r,d,b,p,u,y,v,h,m,D,f,k,j,N,g,w,E,_,I,P,S,C,T="OPERATION",H="SYSTEM",M=!0,W=!1,B=[],L=function(e){_=e.modelEvtManager||new t,d=e.name,b=e.systemRefName,p=e.systemPhysicalId,u=e.publishedProductId,f=e.widgetPreferences,W=e.breadcrumbDisabled,I=e.displayMode,P=e.threeDViewerDataExists;var n=_.subscribe({event:"wkbNav-SelectOper"},G);B.push(n),n=_.subscribe({event:"wkbNav-RenderGraphics"},O),B.push(n),n=_.subscribe({event:"wkb3DViewer-No3D"},V),B.push(n),n=_.subscribe({event:"wkb3DViewer-LoadingBackground"},function(){x(!0)}),B.push(n),n=_.subscribe({event:"wkb3DViewer-LoadingBackgroundDone"},function(){x(!1)}),B.push(n),this.setContainer();var a=this.getContainer();return a.dispose=this.dispose,a};function O(e){h=e.object_type,v=e.object_data.physicalId,m=e.object_data.parentType,D=e.object_data.id}function V(e){var t=r.getElement("#threeDButton");t&&(t.onclick=null,t.style.color="#f1f1f1"),x(!1)}function x(e){C&&(e?(C.elements.iconPlaceholder.style.display="",C.disabled=!0):(C.elements.iconPlaceholder.style.display="none",C.disabled=!1))}function G(e){let t=!1;switch(e.level){case 0:e.object_type=H,e.object_data.systemPhysicalId=p,e.object_data.physicalId=p,j.style.display="none",k.style.display="none",w.className="noNav",(n=r.getElement("#toggleDiv"))&&(n.style.visibility="hidden"),M=!0;break;case 1:e.object_type=T,j.style.display="none",k.style.display="flex",N.innerHTML=e.object_data.displayName,y=e.object_data,w.className=W?"noNav":"canNav",N.className="noNav",t=!0;break;case 2:e.object_type=T,j.style.display="flex",k.style.display="flex",g.innerHTML=e.object_data.displayName,N.innerHTML=e.parent.displayName,W?(N.className="noNav",w.className="noNav"):(N.className="canNav",w.className="canNav"),y=e.parent,W||(N.onclick=function(){R({level:1,object_type:T,object_data:y})}),t=!0}var n;O(e),t&&function(){var e=r.getElement("#toggleDiv");e&&(e.style.visibility="");if(M){var t=l.getPreferenceValue(f,"defaultViewType");"2D"===t?I===l.graphicsMode.Graphics3D&&P?A():U():I!==l.graphicsMode.Graphics2D||P?A():U()}M=!1}()}function R(e){G(e),_.publish({event:e.object_type===T?"wkbHeader-SelectOper":"wkbHeader-SelectOrder",data:e}),O(e)}function U(e){S.checkFlag=!0,_.publish({event:"wkbHeader-Select2D",data:{systemPhysicalId:p,PID:v,object_type:h,parent_type:m,id:D}})}function A(e){C.checkFlag=!0,_.publish({event:"wkbHeader-Select3D",data:{PID:v,object_type:h,parent_type:m,id:D,systemRefName:b,systemPhysicalId:p,publishedProductId:u}})}return L.prototype={setContainer:function(){var t=e.createElement("div",{id:"headerPanelDiv",class:"headerPanelDiv"}),n=e.createElement("div",{id:"breadcrumbDiv",class:"breadcrumbDiv"}).inject(t);(E=e.createElement("div",{class:"homeIcon fonticon-home"}).inject(n)).onclick=function(){_.publish({event:"wkbHeader-SelectHome"})},w=e.createElement("p",{html:d,class:"noNav"}).inject(n),W||(w.onclick=function(){R({level:0,object_type:H,object_data:{}})}),k=e.createElement("div",{id:"operDiv"}).inject(n),e.createElement("div",{class:"headerIcon fonticon fonticon-open-right"}).inject(k),N=e.createElement("p",{class:"noNav"}).inject(k),k.style.display="none",j=e.createElement("div",{id:"subOperDiv"}).inject(n),e.createElement("div",{class:"headerIcon fonticon fonticon-open-right"}).inject(j),g=e.createElement("p",{class:"noNav"}).inject(j),j.style.display="none";var a=e.createElement("div",{id:"headerButtonsDiv",class:"headerButtonsDiv"}).inject(t),l=e.createElement("div",{id:"toggleDiv",class:"wux-control-inline-container",style:{"vertical-align":"top"}}).inject(a),o=new s;o.inject(l),S=new i({type:"radio",label:c.TwoDLbl,value:"2D"}),(C=new i({type:"radio",label:c.ThreeDLbl,value:"3D",icon:{}})).elements.iconPlaceholder.addClassName("wkbbtn-spinner"),o.addChild(S),o.addChild(C),S.onClick=U,C.onClick=A,l.style.visibility="hidden",r=t,M=!0},getContainer:function(){return r},dispose:function(){B.forEach(function(e){_.unsubscribe(e)}),e.is(E)&&(E.destroy(),E=null),e.is(w)&&(w.destroy(),w=null),e.is(N)&&(N.destroy(),N=null),e.is(k)&&(k.destroy(),k=null),e.is(g)&&(g.destroy(),g=null),e.is(j)&&(j.destroy(),j=null)}},L});