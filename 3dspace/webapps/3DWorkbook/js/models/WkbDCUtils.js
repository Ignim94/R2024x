define("DS/3DWorkbook/js/models/WkbDCUtils",["UWA/Core","UWA/Class","DS/KnowledgeWebJSInfra/KnowledgeMagnitudeServices","i18n!DS/3DWorkbook/assets/nls/3DWorkbook"],function(e,n,t,a){"use strict";function l(e,n){return'<span style="color: '+e+'">'+n+"</span>"}return n.singleton({init:function(e){},convertAttributesToMap:function(n){for(var t=null,a=new Map,l=0;l<n.length;l+=1)"ds6w:kind"===n[l].name?(t=a.get("extensions"),e.is(t)?t.push(n[l].value):a.set("extensions",[n[l].value])):a.set(n[l].name,n[l].value);return a},getAttributes:function(n,t){for(var a=0,l=0,i=0,u=null,s=null;a<n.length;a+=1)for(u=n[a].results,l=0;l<u.length;l+=1)if(e.is(u[l].attributes))for(s=u[l].attributes,i=0;i<s.length;i+=1)if("physicalid"===s[i].name&&s[i].value===t)return u[l].attributes;return[]},_addToElements:function(n,t,a){if(e.is(a)&&a.length>0){var i=function(n,t){var a=e.createElement("div");return a.setHTML(l("#77797c",n)+l("3D3D3D",t)),a}(t,a);n.push(i)}},getExtensionElements:function(n){var t=[],l=n.unit,i=null;switch(n.dcType){case 1:this._addToElements(t,a.DCUnit,l),e.is(n.nominalValue)&&n.nominalValue.value.length>0&&(i=this.getConvertedValue(n.nominalValue.value,n.nominalValue.magnitude,n.nominalValue.unit),this._addToElements(t,a.DCNominalValue,i));case 2:e.is(n.minValue)&&n.minValue.value.length>0&&(i=this.getConvertedValue(n.minValue.value,n.minValue.magnitude,n.minValue.unit),this._addToElements(t,a.DCMinValue,i)),e.is(n.maxValue)&&n.maxValue.value.length>0&&(i=this.getConvertedValue(n.maxValue.value,n.maxValue.magnitude,n.maxValue.unit),this._addToElements(t,a.DCMaxValue,i)),e.is(n.minControlValue)&&n.minControlValue.value.length>0&&(i=this.getConvertedValue(n.minControlValue.value,n.minControlValue.magnitude,n.minControlValue.unit),this._addToElements(t,a.DCMinControlValue,i)),e.is(n.maxControlValue)&&n.maxControlValue.value.length>0&&(i=this.getConvertedValue(n.maxControlValue.value,n.maxControlValue.magnitude,n.maxControlValue.unit),this._addToElements(t,a.DCMaxControlValue,i));break;case 3:case 4:this._addToElements(t,a.DCPossibleValues,n.possibleValues)}return t},getConfigName:function(e){switch(e){case 1:return"dcplanrow_real";case 2:return"dcplanrow_integer";case 3:return"dcplanrow_text";case 4:return"dcplanrow_boolean";case 5:return"dcplanrow_timestamp";default:return""}},getDCTypeNLS:function(e){switch(e){case 1:return a.DCTypeReal;case 2:return a.DCTypeInteger;case 3:return a.DCTypeText;case 4:return a.DCTypeBoolean;case 5:return a.DCTypeTimestamp;default:return""}},getMagnitudeAndUnit:function(n){var t={magnitude:null,unit:null,displayUnit:null},a=null;return e.is(n.nominalValue)&&e.is(n.nominalValue.displayUnit)&&n.nominalValue.displayUnit.length>0?a=n.nominalValue:e.is(n.maxValue)&&e.is(n.maxValue.displayUnit)&&n.maxValue.displayUnit.length>0?a=n.maxValue:e.is(n.minValue)&&e.is(n.minValue.displayUnit)&&n.minValue.displayUnit.length>0?a=n.minValue:e.is(n.minControlValue)&&e.is(n.minControlValue.displayUnit)&&n.minControlValue.displayUnit.length>0?a=n.minValue:e.is(n.maxControlValue)&&e.is(n.maxControlValue.displayUnit)&&n.maxControlValue.displayUnit.length>0&&(a=n.minValue),e.is(a)&&(t.magnitude=a.magnitude,t.displayUnit=a.displayUnit,t.unit=a.unit),t},getConvertedValue:function(n,a,l){if(!e.is(n)||!e.is(l)||!e.is(a)||0===l.length||0===a.length)return n;var i=t.getMagnitude(a).Units.find(function(e){return e.Name===l}),u=t.getMKSUnit(a);return t.convert(n,u,i).toString()},getExtensionAttributeFunction:function(e){return 0===e.indexOf("DELExtTargetValues")?this.getTargetValuesAttributes:0===e.indexOf("DELExtControlLimits")?this.getControlLimitAttributes:function(e,n){return[]}},getControlLimitAttributes:function(e,n){const t="bo."+n+".";var a=[];switch(e){case"Real":case"Integer":a=[t+"V_MinControlValue",t+"V_MaxControlValue"]}return a},getTargetValuesAttributes:function(e,n){const t="bo."+n+".";var a=[];switch(e){case"Real":a=[t+"V_MinValue",t+"V_MaxValue",t+"V_Value"];break;case"Integer":a=[t+"V_MinValue",t+"V_MaxValue"];break;case"Text":case"Boolean":a=[t+"V_PossibleValues"]}return a}})});