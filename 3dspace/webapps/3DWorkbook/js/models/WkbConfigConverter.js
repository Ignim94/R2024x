define("DS/3DWorkbook/js/models/WkbConfigConverter",["UWA/Core","UWA/Class","DS/WebappsUtils/WebappsUtils","DS/3DWorkbook/js/models/WkbDocumentDS"],function(e,t,i,o){"use strict";return t.extend({init:function(e){this.modelEvtManager=e.modelEvtManager,this.ematrixURL=e.ematrixURL},convert:async function(t){if(!e.is(t))return{};var r=this._getDataByTypes(t),n={attributeConfig:{system:this._convertAttributeConfig(r.DELLmiPPRSystemReference),operation:this._convertAttributeConfig(r.DELLmiOperationPPRReference),alert:this._convertAttributeConfig(r.DELWkiAlertReference),datacollectplan:this._convertAttributeConfig(r.DELWkiDataCollectPlanReference),dcplanrow_real:this._convertAttributeConfig(r.PLMSpecifyHowToCollectDataCnx_Real),dcplanrow_integer:this._convertAttributeConfig(r.PLMSpecifyHowToCollectDataCnx_Integer),dcplanrow_text:this._convertAttributeConfig(r.PLMSpecifyHowToCollectDataCnx_Text),dcplanrow_boolean:this._convertAttributeConfig(r.PLMSpecifyHowToCollectDataCnx_Boolean),dcplanrow_timestamp:this._convertAttributeConfig(r.PLMSpecifyHowToCollectDataCnx_TimeStamp),datacollect:this._convertAttributeConfig(r.DELWkiDataCollectReference),instruction:this._convertAttributeConfig(r.DELWkiInstructionReference),signoff:this._convertAttributeConfig(r.DELWkiSignOffReference),tool:this._convertAttributeConfig(r.Resource),part:this._convertAttributeConfig(r.DELFmiFunctionReference)},orientationViewConfig:this._convertOrientationViewConfig(r.orientationViewer),webRequestTimeout:this._convertWebRequestTimeout(r.webRequestTimeout)},a=new o(this.modelEvtManager,this.ematrixURL);if(n.orientationViewConfig.modelDocPID){var s=await a.getDocumentURL(n.orientationViewConfig.modelDocPID);n.orientationViewConfig.modelDocURL=s}else n.orientationViewConfig.modelDocURL=i.getWebappsAssetUrl("DELMOMWKIExperience","images/DELMOMov.cgr");return n},_convertAttributeConfig:function(t){return e.is(t)?t.map(function(e){var t={metaName:e.params.attribute,displayLabel:e.params.attrLabel||"",newRow:e.params.newRow};return"DELFmiFunctionReference"===e.params.types&&"instanceName"===e.params.attribute&&(t.objPropertyName=e.params.attribute,t.metaName=""),t}):[]},_convertOrientationViewConfig:function(t){var i=this,o={height2d:"100px",width2d:"150px",modelFile:"DELMOMov.cgr",positionY2d:"100px",delmiaViewerRatio:"1.0",delmiaViewerPosition:"top-right",positionX2d:"300px"};if(!e.is(t))return o;const r={"2DViewerYPosition":"positionY2d","2DViewerXPosition":"positionX2d","2DViewerHeight":"height2d","2DViewerWidth":"width2d",ViewerRatio:"delmiaViewerRatio",ViewerPositionCombobox:"delmiaViewerPosition",ModelDocument:"orientationModel"};return t.forEach(t=>{var n=t.params.value,a=r[t.paramid];if(e.is(a))switch(a){case"positionY2d":case"positionX2d":case"height2d":case"width2d":o[a]=t.params.value+"px";break;case"orientationModel":var s=i._getModelDocument(t.params.value);o.modelDocPID=s.pid,o.modelDocName=s.name;break;case"delmiaViewerPosition":n=i._getViewerPosition(n),o[a]=n;break;default:o[a]=t.params.value}}),o},_getViewerPosition:function(e){var t=null;switch(e.toLowerCase()){case"top_left":t="top-left";break;case"top_right":t="top-right";break;case"bottom_left":t="bottom-left";break;case"bottom_right":t="bottom-right";break;default:t=e}return t},_getModelDocument:function(t){var i={pid:null,name:""};if(!e.is(t))return i;var o=t.split(",");return 0===o.length?i:(o.forEach(e=>{var t=e.split(":");"id"===t[0]?i.pid=t[1]:i[t[0]]=t[1]}),i)},_convertWebRequestTimeout:function(t){return e.is(t)&&e.is(t.params)?t.params.value:null},_getDataByTypes:function(t){var i={orientationViewer:[]};return t.forEach(function(t){switch(t.familyid){case"DEL3DWorkbookAttributesDisplayFamily":var o=t.params.types;e.is(i[o])||(i[o]=[]),i[o].push(t);break;case"DEL3DWorkbookOrientationViewerFamily":i.orientationViewer.push(t);break;case"DEL3DWorkbookWebServiceRequestTimeoutFamily":i.webRequestTimeout=t}}),i}})});