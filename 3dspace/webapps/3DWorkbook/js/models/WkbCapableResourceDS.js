define("DS/3DWorkbook/js/models/WkbCapableResourceDS",["UWA/Core","UWA/Class","UWA/Promise","DS/3DWorkbook/js/WkbUtils","i18n!DS/3DWorkbook/assets/nls/3DWorkbook"],function(e,t,r,n,s){"use strict";var o=null,i=null,u=null;return t.extend({init:function(e){o=e.modelEvtManager,i=e.serverURL,u=e.securityContext},getCapableResource:function(t){return e.is(t)?new r(function(e,r){var n;e((n={label:"DELMOMWKB-CapableResourceDS",input_physical_ids:t,version:3,primitives:[{navigate_to_sr:{id:1,filter:{role:["490"]},mode:"path"}}],patterns:{resourceArea_pathSR:[{id:1}]},attributes:["ds6w:label","physicalid","ds6w:type","pathsr"]},JSON.stringify(n)))}).then(function(e){var t=i+"cvservlet/navigate?SecurityContext="+encodeURIComponent(u);return n.serverRequestPromise(t,"json","POST",e)}).then(function(e){return new r(function(r,n){let s,o,i=[];e&&e.result&&(s=e.result.find(e=>e.input_object&&e.input_object.physicalid===t))&&s.outputs&&s.outputs.resourceArea_pathSR&&(i=(o=s.outputs.resourceArea_pathSR.find(e=>e.owner&&e.owner.physicalid===t)).elements),i.length>0?r(i[0].physicalid):r(null)})}).catch(function(e){console.log(e);var t="";widget.Debug.debugMode&&(t=e.message),o.publish({event:"wkbNotify",data:{src:"WkbDocumentDS",title:s.ErrorTitle,subtitle:s.ErrDocListWebService,message:t,isVanishes:!1,type:"error"}})}):new r(function(e,t){e(null)})}})});