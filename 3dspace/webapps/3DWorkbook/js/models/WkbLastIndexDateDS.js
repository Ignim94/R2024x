define("DS/3DWorkbook/js/models/WkbLastIndexDateDS",["UWA/Core","UWA/Class","UWA/Promise","DS/3DWorkbook/js/WkbUtils","i18n!DS/3DWorkbook/assets/nls/3DWorkbook"],function(e,t,n,r,s){"use strict";var o="",i="",a="",l=null;return t.extend({init:function(e){l=e.modelEvtManager,i=e.serverURL,a=e.securityContext,o=i+"cvservlet/indexingdate?SecurityContext="+encodeURIComponent(a)},getLastIndexDate:function(){var e=this,t=JSON.stringify({select_service:["EXPAND"]});return r.serverRequestPromise(o,"application/json","POST",t).then(function(t){var r=JSON.parse(t),s=e._transformToObject(r);return new n(function(e,t){e(s)})}).catch(function(e){console.log(e);var t="";widget.Debug.debugMode&&(t=e.message),l.publish({event:"wkbNotify",data:{src:"WkbLastIndexDateDS",title:s.ErrorTitle,subtitle:s.ErrLastIndexDateService,message:t,isVanishes:!1,type:"error"}})})},_transformToObject:function(t){var n=null;if(e.is(t)&&e.is(t.EXPAND)&&e.is(t.EXPAND.allvaultsacl)){var r=1e3*t.EXPAND.allvaultsacl;n=new Date(r)}return n}})});