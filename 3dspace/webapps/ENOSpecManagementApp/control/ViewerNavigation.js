define("DS/ENOSpecManagementApp/control/ViewerNavigation",["UWA/Class","DS/ENOSpecManagementApp/view/ViewerNavTriptych","DS/XSRCommonComponents/utils/Constants","DS/ENOSpecManagementApp/control/ViewerNavigationCarousel","DS/XSRCommonComponents/utils/RequestUtil","i18n!DS/ENOSpecMultiGrid/assets/nls/ENOSpecMultiGrid"],function(e,t,i,a,o,n){"use strict";return e.extend({expanderDiv:void 0,homeButton:void 0,specExpandToggle:void 0,currentnode:void 0,viewerCarousel:void 0,mobileTouchMode:!1,init:function(e){this._parent(e),this.appCore=e.appCore,this.xsrBasicModelEvents=this.appCore.basicModelEvents},drawLayout:function(){let e=this,i={instantiateTab:!1,appCore:e.appCore,leftVisible:!0,rightVisible:!1};new t(i);var a=UWA.createElement("div",{class:"viewerNavContainer"});a.inject(this.appCore.specMiddleContainer),e.appCore.viewerNav.inject(a),e.drawHome();let n=o.getTouchMode(),s=o.isMobile();(n||s)&&(e.mobileTouchMode=!0)},drawNextPreviousExpand:function(){var e=this;if(void 0===this.appCore.viewerNav.currentNode){var t=UWA.createElement("div",{id:"viewNavPrevious"}),i=UWA.createElement("div",{id:"viewNavNext"});this.specExpandToggle=UWA.createElement("span",{id:"specExpandToggle",title:n.label_Collapse,class:"wux-ui-3ds wux-ui-3ds-2x wux-ui-3ds-expand-left"});var a=this.appCore.viewerNav.getRight();a.setAttribute("style","display:flex; width: 0px; left: 100%;"),t.inject(a,"top"),i.inject(a),e.mobileTouchMode||(this.specExpandToggle.inject(t,"before"),specExpandToggle.addEvent("click",function(){e.toggleExpand()}))}},render:function(){var e=this;e.eventsSusb=[],e.appCore.viewerNav.enabled=!0,e.manageHomeExpandIcon(!0,!1),e.appCore.viewerNav._showRight(),e.mobileTouchMode&&e.appCore.viewerNav._hideLeft(),e.appCore.viewerNav.currentNode&&new a(e).render(e.getCurrentNode()),e.landingPageToolbarEvents=e.appCore.toolBarModelEvents,e.landingPageToolbarEvents&&e.landingPageToolbarEvents.publish({event:i.COLLECTION_TOOLBAR_COMMAND_TOGGLE,data:{hide:!0}}),e.eventsSusb.push(this.xsrBasicModelEvents.subscribe({event:i.WELCOMEPANEL_EVENT_EXPAND},function(){e.destroy(),e.xsrBasicModelEvents.publish({event:i.SPEC_VIEW_REMOVE_PENDINGACTIONS})})),e.eventsSusb.push(e.appCore.triptychManager.triptychEvent.subscribe({event:i.EVENT_TRIPTYCH_PANEL_VISIBLE},function(t){t===i.TRIPTYCH_SIDE_Left&&e.appCore.viewerNav.enabled&&e.appCore.triptychManager.hideLeftPanel()}))},update:function(e){let t=e.isMEI;if(e&&e.getID){var a=e.getID(),o=e.getTypeActualName()||e.getType(),n=e.getType(),s=e.getKindOf();this.currentNode=e,this.setCurrentNode(e),t=e.getAttributeValue("isMEI")}let r={itemPid:a||e.id,typeActual:o||e.type,typeName:n||e.type,kindOf:s||"",cmdId:i.OPEN_SPEC_VIEW,isMEI:t};this.appCore.viewerNav&&this.appCore.viewerNav.currentNodeId===r.itemPid||this.appCore.basicModelEvents.publish({event:i.OPEN_SPECIFICATION_VIEW,data:r})},setCurrentNode:function(e){this.appCore.viewerNav.currentNode=e},getCurrentNode:function(){let e=this.appCore.viewerNav.currentNode;return e?Array.isArray(e)?e[0]:e:void 0},drawHome:function(){var e=this;e.expanderDiv=document.querySelector(".welcome-panel.panel-icon-wrapper"),e.homeButton=UWA.createElement("div",{class:"panel-icon-wrapper",styles:{left:0,marginLeft:"5px",display:"none",backgroundColor:"white"},html:{tag:"span",class:"fonticon fonticon-2x fonticon-home"}}).inject(e.expanderDiv,"before"),e.homeButton.addEvent("click",function(){e.xsrBasicModelEvents.publish({event:i.LAUNCH_XSR_HOME_PAGE})})},manageHomeExpandIcon:function(e,t){void 0===this.expanderDiv||t||(this.expanderDiv.style.display="none"),void 0===this.homeButton||e||(this.homeButton.style.display="none"),void 0!==this.expanderDiv&&t&&(this.expanderDiv.style.display="block"),void 0!==this.homeButton&&e&&(this.homeButton.style.display="block")},toggleExpand:function(){let e=this.appCore.viewerNav._leftVisible;e?this.appCore.viewerNav._hideLeft():this.appCore.viewerNav._showLeft(),this.toggleExpandIcon(e)},toggleExpandIcon:function(e){let t=n.label_Expand,i=n.label_Collapse;e?(this.specExpandToggle.removeClassName("wux-ui-3ds-expand-left"),this.specExpandToggle.addClassName("wux-ui-3ds-expand-right"),this.specExpandToggle.setAttributes({title:t})):(this.specExpandToggle.removeClassName("wux-ui-3ds-expand-right"),this.specExpandToggle.addClassName("wux-ui-3ds-expand-left"),this.specExpandToggle.setAttributes({title:i}))},removeSubscription:function(){this.eventsSusb&&this.xsrBasicModelEvents.unsubscribeList(this.eventsSusb)},destroy:function(){var e=this;e.appCore.viewerNav.pageToolbar.iconSection.empty(),e.appCore.viewerNav.enabled=!1,e.appCore.specRouteManager.resetStack(),document.querySelector(".enox-collection-toolbar-v2-container").classList.remove("xsr-toolbarV2"),document.querySelector(".enox-basic-filter-autocomplete-wrapper").classList.remove("xsr-searchbar"),e.appCore.viewerNav._showLeft(),e.appCore.viewerNav._hideRight(),e.manageHomeExpandIcon(!1,!0),setTimeout(function(){e.landingPageToolbarEvents&&e.landingPageToolbarEvents.publish({event:i.COLLECTION_TOOLBAR_COMMAND_TOGGLE,data:{hide:!1}}),e.removeSubscription()},500)}})});