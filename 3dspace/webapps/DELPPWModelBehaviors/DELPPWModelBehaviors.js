define("DS/DELPPWModelBehaviors/InterWidgetComBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["InterWidgetComPlugin"],creator:function(e,t,n){e.getLogger();return{listenTo:function(){return{}},onStart:function(){},onStop:function(){},addEventListener:function(e,t){n.addEventListener(e,t)},subscribeEvent:function(e,t){n.subscribeEvent(e,t)},publishEvent:function(e,t){n.publishEvent(e,t)},isWidgetLinked:function(e){return n.isWidgetLinked(e)},isOpsViewerWidgetLinked:function(){return n.isOpsViewerWidgetLinked()},isCloud:function(){return n.isCloud()}}}}}),define("DS/DELPPWModelBehaviors/OperationTimeBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["TreeViewPlugin","DicoPlugin","DatabasePlugin","ResourcePlugin","AttributePlugin","WebServicePlugin"],creator:function(t,n,i,o,r,a,s,c){var l,u,f,g,d,m,p,P,L,h,I,S,C,y,D,R,v,A,V=null,E="DELLmiOperationReference.V_TimeMode",N=["DELLmiHeaderOperationReference.V_UseGanttTimeSolver","DELLmiGeneralOperationReference.V_UseGanttTimeSolver"],b={};return l=function(){var e,t={},n={},i="DELLmiOperationReference.V_OperationTime";e={Name:"V_OperationTime",NLS:a.getNLSValue("Attribute."+i),Type:"Double",Protection:3,MultiValuated:"No",HasRangeDefined:"No",DefaultValue:"",MaxLength:256,Magnitude:"TIME",ManipulationUnit:"",MultiLine:"No",UIAccess:"",HasDefault:"No"},n[i]=e.NLS,t[i]=e,a.addNlsJSON(n),s.addAttributeInfo(t)},f=function(t){var n=null,i=r.getReference(t);if(e.is(i)){let e=i.get(E);if(null!==e){let t=o.getAttributeInfo(E);n=s.getAuthorizedValue(t,null,e)}}return n},u=function(t){var o,r;return e.is(V)||(e.is(t)&&"V_OperationTime"===t.dataIndex?V=t.visibleFlag:(o=i.getViewColumnPreferences(n.getId()),r=e.is(o)?o.Columns.Column:[],V=r.some(function(e){return"V_OperationTime"===e.dataIndex&&!e.isHidden}))),V},g=function(t,n,i){return c.webServiceRequest({url:"dsmfg/private/V0/invoke/MfgProcess/fetchOperationTime",method:"POST",headers:c.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode({rirPaths:t}),context:this,onFailure:i,onTimeout:i,onCancel:i,onComplete:function(t){var i,o={};if(e.is(t))for(i in t)Object.hasOwnProperty.call(t,i)&&(b[i]=t[i],o[i]={},o[i].V_OperationTime=b[i]);n(o)}})},d=function(e){var t=n.getBehavior("WUXNodeModelBehavior"),i=[],o={};u()&&(e instanceof Set&&(e=Array.from(e)),(e=Array.isArray(e)?e:[e]).length>0&&(e.forEach(function(e){var n=t.getNodeModel(e);null!==n&&n.forEach(function(e){var t=e.getRIRpath().toString();i.push(t),o[t]={},o[t].V_OperationTime="FetchInProgress"})}),n.notify("updateNodes",o),g(i,function(e){n.notify("updateNodes",e)},function(){n.notify("unsetNodeAttr",[i,"V_OperationTime"])})))},m=function(t){var i=[],o={};return u()&&Array.isArray(t)&&(t.forEach(function(t){var n=r.getReference(t[t.length-1]);r.isOperation(n)&&(t=t.toString(),o[t]={},e.is(b[t])?o[t].V_OperationTime=b[t]:(i.push(t),o[t].V_OperationTime="FetchInProgress"))}),i.length>0&&g(i,function(e){n.notify("updateNodes",e)},function(){n.notify("unsetNodeAttr",[i,"V_OperationTime"])})),o},p=function t(n,i,o){var a=[];(e.is(i)?[i]:r.getParentInstancesFromCollection(n)).forEach(function(n){var i=r.getAggregatingReferenceModelFromInstance(n),s=i.get("PID");if(-1===a.indexOf(s)){if(r.isOperation(i)){let n=D(i.keys());e.is(n)&&"TRUE"===i.get(n)&&(t(s,null,o),o.add(s))}a.push(s)}})},P=function t(n,i){var o=r.getReference(n),a=D(o.keys());e.is(a)&&"TRUE"===o.get(a)&&r.getInstancesFromCollection(n).forEach(function(e){let n=e.get("isInstanceOf");"3"===f(n)&&i.add(n),t(n,i)})},L=function(t){var n=new Set;u()&&((t=e.is(t,"array")?t:[t]).forEach(function(e){var t,i=e.get("PID");r.isOperation(e)&&(t=e.changedAttributes(),(Object.hasOwnProperty.call(t,E)||Object.hasOwnProperty.call(t,"DELLmiOperationReference.V_EstimatedTime")||Object.hasOwnProperty.call(t,"DELLmiOperationReference.V_MeasuredTime")||R(Object.keys(t)))&&(p(i,null,n),n.add(i)))}),d(n))},h=function(t){var n=new Set;u()&&((t=e.is(t,"array")?t:[t]).forEach(function(e){var t=e.changedAttributes(),i=e.get("type");if("DELAsmProcessCanUseCnx"===i){let i=e.get("from");Object.hasOwnProperty.call(t,"DELLmiEstimatedTime.V_EstimatedTime")?"3"===f(i)&&(p(i,null,n),n.add(i)):Object.hasOwnProperty.call(t,"DELAsmProcessCanUseCnx.V_IsPreferred")&&"TRUE"===t["DELAsmProcessCanUseCnx.V_IsPreferred"]&&(n.add(i),P(i,n))}if("PrimaryResourceLinkDetail"===i){let i=e.get("from"),o=Array.isArray(i)?i[i.length-1]:i;Object.hasOwnProperty.call(t,"DELLmiEstimatedTime.V_EstimatedTime")&&"3"===f(o)&&(p(o,null,n),n.add(o))}}),d(n))},S=function(t){var n=new Set;u()&&((t=e.is(t,"array")?t:[t]).forEach(function(e){if("DELAsmProcessCanUseCnx"===e.get("type")){let t=e.get("from");0===r.getImpacted(t,!0,{relationTypes:["DELAsmProcessCanUseCnx"]}).length&&(n.add(t),P(t,n))}}),d(n))},I=function(t){var n=new Set;u()&&((t=e.is(t,"array")?t:[t]).forEach(function(e){p(null,e,n)}),d(n))},C=function(t){var n,i;if(u()&&e.is(t)&&(n=t.newParentPID,i=r.getReference(n),r.isOperation(i))){let t=D(i.keys());e.is(t)&&"TRUE"===i.get(t)&&d(n)}},y=function(t){var i,o,a,s=n.getBehavior("WUXNodeModelBehavior"),c=e.is(V)?V:null;V=null,c!==(i=u(t))&&(i?e.is(s)&&(o=(o=s.getVisibleNodesInViewport().map(e=>e.getReferencePID())).filter(e=>r.isOperation(e)),d(o)):(a=[],r.getAllReferences().forEach(function(e){if(r.isOperation(e)){let t=s.getNodeModel(e.get("PID"));null!==t&&t.forEach(function(e){var t=e.getRIRpath().toString();b.hasOwnProperty(t)&&a.push(t)})}}),a.length>0&&n.notify("unsetNodeAttr",[a,"V_OperationTime"]),v()))},D=function(e){var t;if(Array.isArray(e)&&Array.isArray(N))for(let n=0;n<N.length;n++)if(-1!==e.indexOf(N[n])){t=N[n];break}return t},R=function(t){var n=!1,i=D(t);return e.is(i)&&(n=!0),n},v=function(){u()&&(b={})},A=function(){var e=n.getBehavior("WUXNodeModelBehavior").getSelectedNodes();u()&&e.forEach(function(e){let t=e.getRIRpath().toString();b.hasOwnProperty(t)&&(delete b[t],Object.keys(b).forEach(function(e){e.startsWith(t)&&delete b[e]}))})},{listenTo:function(){return{referenceChanged:L,connectionChanged:h,instanceAdded:I,instanceRemoved:I,connectionRemoved:S,reparentInstances:C,TreeViewColumnVisibleStateChange:y,refreshOperationTime:d,refreshAll:v,RefreshCmd:A}},onStart:function(){var e;e={boAttrName:[E,"DELLmiOperationReference.V_EstimatedTime","DELLmiOperationReference.V_MeasuredTime"],roAttrName:[],otherAttrName:[]},N.forEach(function(t){e.boAttrName.push(t)}),V=u(),l(),r.setSelectPredicate(n.getId(),e)},onStop:function(){},isColumnVisible:function(){return u()},getUpdateOptionsForVisibleNodes:function(e){return m(e)}}}}}),define("DS/DELPPWModelBehaviors/MfgProcessBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["MfgProcessPlugin","ResourcePlugin","BIPlugin","DatabasePlugin","ProcessImplementPlugin","DicoPlugin"],creator:function(t,n,i,o,r,a,s,c){var l,u;t.getLogger();return l=function(t){var n,i,o,r=[];return Array.isArray(t)?(n=t[t.length-1],i=a.getReferenceModel(n),0===(r=s.getScopeLinks(i.get("PID"))).length&&(o=s.findInstanceWhoseParentIsScoped(t),e.is(o,"object")&&(r=o.scopeLinks))):r=s.getScopeLinks(t),r},u=function(e){var t=[];return e.forEach(function(e){var n=e.get("to");t.push(n)}),t},{webservice:function(t,s,c,l){var u,f,g,d,m={noTimeout:!0},p=!1,P={silentMode:!0,updateItem:!0};n.notify("startProgress",m),e.is(c)&&e.is(c.logMessage)&&(f=n.log(c.logMessage)),(s=s||{}).product&&(s.product.referencePID,s.product.OccPath),s.mfgItem&&(s.mfgItem.referencePID,s.mfgItem.instancePID),d=function(t){var i,o,r=[];t.instancesAndReferences.forEach(function(t){i=t.attributesValue,e.is(i.isInstanceOf)&&(o=a.getInstance(i.PID),n.notify("instanceAdded",[o,P]))}),t.connections.forEach(function(e){r.push(a.getConnection(e.PID))}),r.length>0&&n.notify("connectionAdded",[r])},"rerouteLink"===t&&(u="POST",g=e.Json.encode(c),(c=e.merge(c,{appenedURL:"ExecuteSuggestedActions"})).onComplete=function(t,i,o){d(o),e.is(l)&&l(o),p&&n.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!0}),n.notify("stopProgress",m)}),c.onFailure=function(t){var i=c.logMessage+" "+o.getNLSValue("failed");e.is(t)&&(i=i+". "+t.message),n.warn(i,f),n.notify("stopProgress",m),e.is(l)&&l(),p&&n.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!0})},(p=r.getBICmdState())&&n.notify("toggleCmdCheckHeaderState",{cmdName:"BIEssentialsCmd",cmdState:!1}),i.webserviceAndProcessing(u,g,c)},isInstPossible:function(t){var n,i,o,r,a,f,g=t.parent,d=t.child,m=e.is(t.targetAbsPath)?t.targetAbsPath:null,p=!0;return e.is(m)&&c.isAKindOf(d,"DELLmiHeaderOperationReference")&&(n=Array.isArray(m)&&m.length>0?m:g.get("PID"),i=d.get("PID"),r=s.getPartialScopeLinks(i),Array.isArray(r)&&r.length>0&&(p=!1,o=l(n),r.length===o.length&&(a=u(o),f=u(r),p=a.every(function(e){return f.indexOf(e)>=0})))),p},getBrokenMfgProcessStatus:function(e,t){r.getBrokenMfgProcessStatus(e,t)}}}}}),define("DS/DELPPWModelBehaviors/ResourceBehavior",[],function(){"use strict";return{plugins:["ResourcePlugin"],creator:function(e,t,n){return{onStart:function(){},onStop:function(){},getNLSValue:function(e,t,i,o){return n.getNLSValue(e,t,i,o)},getLabelForUnit:function(e,t){return n.getLabelForUnit(e,t)},getNLSForUnit:function(e,t){return n.getNLSForUnit(e,t)},getIconURLFromKey:function(e,t,i){return n.getIconURLFromKey(e,t,i)},getIconElem:function(e,t){return n.getIconElem(e,t)}}}}}),define("DS/DELPPWModelBehaviors/SpecifyScopeIntentDialog",["UWA/Core"],function(e){"use strict";return function(t,n){const i=function(i,o,r){const a=[n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.message.line1"),n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.message.line2")].map(e=>`<p>${e}</p>`).join("");let s=e.createElement("div",{class:"specifyScopeIntent-container",html:a}),c=e.createElement("div",{class:"specifyScopeIntent-content-container"});s.inject(c),"function"!=typeof o?function(i,o,r){let a=t.create("Dialog",{title:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Title"),domId:"specifyScopeIntentDialog",identifier:"specifyScopeIntentDialog",content:i,minHeight:150,minWidth:400,modalFlag:!0,resizableFlag:!0,customButtonsDefinition:[{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Cancel"),emphasize:"primary",onClick:function(){e.is(o,"function")&&o(),a.close()}},{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Fabrication"),emphasize:"secondary",onClick:function(){e.is(r,"function")&&r(),a.close()}}]});a.close=function(){this.destroy()}}(c,i,r):"function"!=typeof r?function(i,o,r){let a=t.create("Dialog",{title:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Title"),domId:"specifyScopeIntentDialog",identifier:"specifyScopeIntentDialog",content:i,minHeight:150,minWidth:400,modalFlag:!0,resizableFlag:!0,customButtonsDefinition:[{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Cancel"),emphasize:"primary",onClick:function(){e.is(o,"function")&&o(),a.close()}},{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Assembly"),emphasize:"secondary",onClick:function(){e.is(r,"function")&&r(),a.close()}}]});a.close=function(){this.destroy()}}(c,i,o):function(i,o,r,a){let s=t.create("Dialog",{title:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Title"),domId:"specifyScopeIntentDialog",identifier:"specifyScopeIntentDialog",content:i,minHeight:150,minWidth:400,modalFlag:!0,resizableFlag:!0,customButtonsDefinition:[{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Cancel"),emphasize:"primary",onClick:function(){e.is(o,"function")&&o(),s.close()}},{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Assembly"),emphasize:"secondary",onClick:function(){e.is(r,"function")&&r(),s.close()}},{label:n.getNLSValue("ImplementBehavior.SpecifyScopeIntent.Button.Fabrication"),emphasize:"secondary",onClick:function(){e.is(a,"function")&&a(),s.close()}}]});s.close=function(){this.destroy()}}(c,i,o,r)};return{show:function(e,t,n){i(e,t,n)}}}}),define("DS/DELPPWModelBehaviors/UserDefProceduresBehaviour",["UWA/Core"],function(e){"use strict";const t="workplan",n="process",i="resource",o="product";return{plugins:["WebServicePlugin","DatabasePlugin","RootsPlugin","PlatformPlugin","ResourcePlugin"],creator:function(r,a,s,c,l,u,f){var g,d={ProcDisplayName:f.getNLSValue("UserDefExploreBehavior.DefaultBehavior.ProcDisplayName"),ProcID:"default",ProcShortDescription:f.getNLSValue("UserDefExploreBehavior.DefaultBehavior.ProcShortDescription")},m=!!e.is(u.isLoadOOTBProcedures())&&u.isLoadOOTBProcedures(),p=[],P=new Set,L=null;return{isLoadOOTBProcedures:function(){return u.isLoadOOTBProcedures()},getAllProcedures:function(t){var n=function(e){var t,n;return g=[],P.clear(),e.forEach(function(e){e.forEach(function(e){t=c.getPPRType(e.id),n=c.transformToRIROccurrencePath(e.path).length>0?c.transformToRIROccurrencePath(e.path):[e.id],p.push(e.id),g.push({type:t,path:n}),t="OPERATION"===t?"SYSTEM":t,P.add(t)})}),P}(t);return new e.Promise(function(t){var i,o;e.is(L)?t({procs:L,selectedPPRTypes:n}):(i={url:"delmcb/api/UDOWebServices/GetProcedureList",method:"GET",onFailure:function(e){a.debug("GetProcedureList Failed "+e),t({procs:[],selectedPPRTypes:n})},onComplete:function(i){o=e.is(i)&&e.is(i.Scenarios)?i.Scenarios:[],L=m?o:o.filter(function(e){return"Custo"===e.ProcCategory}),a.debug("GetProcedureList succeeded"),t({procs:L,selectedPPRTypes:n})}},s.webServiceRequest(i))})},filterApplicableProcedures:function(t,n){var i,o=t.procs,r=t.selectedPPRTypes,c=[];e.is(o)&&o.length>0&&!e.is(o[0].supportedPPRTypes)&&(c=o.map(function(t){return new e.Promise(function(e,n){var i;i={url:"delmcb/api/UDOWebServices/GetProcedureDetails",method:"POST",data:JSON.stringify({ProcID:t.ProcID}),onFailure:function(e){a.debug(e),n(e)},onComplete:function(n){switch(n.ProcNodeType){case"EBOM":t.supportedPPRTypes=["PRODUCT"];break;case"MBOM":t.supportedPPRTypes=["PROCESS","SERVICE"];break;case"Workplan":case"System":t.supportedPPRTypes=["SYSTEM"];break;case"Resource":t.supportedPPRTypes=["RESOURCE"];break;case"Any":t.supportedPPRTypes=["ALL"];break;default:a.debug("Unsupported procedure in MGA")}e()}},s.webServiceRequest(i)})})),e.Promise.allSettled(c).then(function(e){var t=0;e.forEach(function(e){"rejected"===e.state&&t++}),0===t?(i=function(e){var t=[];return 1===e.size&&null!==L?t=L.filter(function(t){var n=!1;return Array.isArray(t.supportedPPRTypes)&&(n=t.supportedPPRTypes.indexOf(Array.from(e)[0])>-1||t.supportedPPRTypes.indexOf("ALL")>-1),n}):console.error("Objects of different PPR types are selected or Procedures are not available."),t.unshift(d),t}(r),n(i)):t===e.length?(a.debug("GetProcedureDetails failed"),n([d])):(a.debug("GetProcedureDetails partially failed"),n([d]))})},executeProcedure:function(r,u,d){var m,P,L,h,I={},S=d||{},C=function(r,s){var u,f,d,m={workplan:[],process:[],resource:[],product:[]};return f={workplan:{path:[],rootPID:"",configId:""},process:{path:[],rootPID:"",configId:""},product:{path:[],rootPID:"",configId:""},resource:{path:[],rootPID:"",configId:""}},u=function(e,t){f[e].path.push({pids:t}),f[e].rootPID=t[0],f[e].configId=l.getCompatibleConfigurationFilters([t[0]])[t[0]]},d=function(r){var a="";switch(c.getPPRType(r)){case"PROCESS":case"SERVICE":a=n;break;case"PRODUCT":a=o;break;case"RESOURCE":a=i;break;case"SYSTEM":case"OPERATION":a=t}e.is(m[a])&&m[a].push({compiledForm:"",configuration:f[a].configId,rootId:r,volume:""})},g.forEach(function(e){switch(e.type){case"PROCESS":case"SERVICE":u(n,e.path);break;case"PRODUCT":u(o,e.path);break;case"RESOURCE":u(i,e.path);break;case"SYSTEM":case"OPERATION":u(t,e.path);break;default:a.debug("Invalid Type")}}),l.getRoots(a.getId()).forEach(function(e){Array.isArray(e)&&e.forEach(function(e){d(e)})}),'<execute xmlns="http://www.3ds.com/xmql/query"><function>'+r+"</function><version>"+s+'</version><params><param name="SEL_WK_PL">{"modelerName":"workplan","occurrences":'+JSON.stringify(f.workplan.path)+'}</param><param name="SEL_PRCS">{"modelerName":"process","occurrences":'+JSON.stringify(f.process.path)+'}</param><param name="SEL_PRD">{"modelerName":"product","occurrences":'+JSON.stringify(f.product.path)+'}</param><param name="SEL_RSC">{"modelerName":"resource","occurrences":'+JSON.stringify(f.resource.path)+'}</param><param name="SEL_PROD_SYS">{"modelerName":"productionSystem","occurrences":'+JSON.stringify(f.workplan.path)+'}</param><param name="SEL_CPBL_RSC">{"modelerName":"resource","occurrences":'+JSON.stringify(f.resource.path)+'}</param><param name="PRD">{"modelerName":"product","occurrences":'+JSON.stringify(f.product.path)+'}</param><param name="PROD_SYS">{"modelerName":"productionSystem","occurrences":'+JSON.stringify(f.workplan.path)+'}</param><param name="WK_PL">{"modelerName":"workplan","occurrences":'+JSON.stringify(f.workplan.path)+'}</param><param name="RSC">{"modelerName":"resource","occurrences":'+JSON.stringify(f.resource.path)+'}</param><param name="PRCS">{"modelerName":"process","occurrences":'+JSON.stringify(f.process.path)+'}</param><param name="CPBL_RSC">{"modelerName":"capableResource","occurrences":'+JSON.stringify(f.resource.path)+'}</param><param name="ConfigurationsVal">[{"filters":'+JSON.stringify(m.product)+',"modelerName":"product"},{"filters":'+JSON.stringify(m.process)+',"modelerName":"process"},{"filters":'+JSON.stringify(m.workplan)+',"modelerName":"workplan"},{"filters":[{"compiledForm":"","configuration":'+JSON.stringify(f.workplan.configId)+',"rootId":'+JSON.stringify(f.workplan.rootPID)+',"volume":""}],"modelerName":"productionSystem"},{"filters":'+JSON.stringify(m.resource)+',"modelerName":"resource"},{"filters":[{"compiledForm":"","configuration":'+JSON.stringify(f.resource.configId)+',"rootId":'+JSON.stringify(f.resource.rootPID)+',"volume":""}],"modelerName":"capableResource"}]</param></params></execute>'}(r,u);a.notify("startProgress",I),L=function(t){var n=[],i=[],o=e.is(t.xmql_response.footer["global error"])?t.xmql_response.footer["global error"]:null,r=t.xmql_response.body.result;e.is(r)&&null===o?(r.forEach(function(e){Object.keys(e).length>0&&e.output.occurrences.forEach(function(e){i.push(e.pids),e.pids.forEach(function(e){-1===n.indexOf(e)&&n.push(e)})})}),m=function(e){var t,o,r,s,l=[],u=[],f=[],g=[];s=function(){a.notify("addOccurrece",[i]),r.length>0&&a.notify("selectNodes",[r])},p.forEach(e=>{t=c.getPPRType(e),-1===u.indexOf(t)&&u.push(t),c.getImpacted(e,!0,{excludeRelationTypes:["LinearProductFlowCnx"]}).forEach(function(e){e=Array.isArray(e)?e:[e],-1!==n.indexOf(e[e.length-1])&&l.push(e[e.length-1])})}),p=[],S.selectConnectedObjects&&(r=[],l.forEach(e=>{u.includes(c.getPPRType(e))||r.push(e)})),e.instancesAndReferences.forEach(e=>{f.push(e.id)}),(o=n.filter(e=>!f.includes(e))).length>0?(o.forEach(e=>{c.isInstance(e)||g.push(e)}),g.length>0?c.fetchInstancesAndTheirReferences(g,{onComplete:function(e){s()},silentMode:"true"}):s()):s(),a.notify("stopProgress",I)},P=function(){a.debug("Fetching getDescendantsFromServer for user defined procedure failed.")},c.getDescendantsFromServer(n,m,{onFailure:P,silentMode:!0,expandLevel:0,forceDBMode:!0})):(a.notify("stopProgress",I),o=(o=JSON.parse(o).MESSAGE).substr(o.lastIndexOf(":")+1),a.warn(o))},h=function(){a.notify("stopProgress",I),a.warn(f.getNLSValue("UserDefExploreBehavior.ExecuteProc.Failure"))},s.webServiceRequest({url:s.get3DSpaceUrl()+"i3dx/services/xmql",method:"POST",data:C,headers:{Accept:"application/json","Content-Type":"application/xml"},onComplete:L,onFailure:h,onTimeout:h,onCancel:h})}}}}}),define("DS/DELPPWModelBehaviors/LinkBehavior",["UWA/Core","UWA/Promise"],function(e,t){"use strict";return{plugins:["DatabasePlugin","DicoPlugin","WebServicePlugin","AttributePlugin","ResourcePlugin","ProductImplementPlugin","ProcessImplementPlugin","SelectionPlugin","PlatformPlugin"],creator:function(n,i,o,r,a,s,c,l,u,f,g){const d=l.getPartialScopeLinkType(),m="DELLmiProductionSystemOutputCnxToMBOM",p="MfgProcessAlternate",P="HistorizationLinkRefRef";var L,h,I,S,C,y,D,R,v,A,V,E,N,b,M,k;return I=function(t,n,o,r){o=o||{},e.is(n,"string")&&i.info(n,r),i.notify("stopProgress",t),e.is(o.onComplete,"function")&&o.onComplete.call(null,n)},S=function(t,n,o,r,a){r=r||{},e.is(o,"string")&&(n+="\n"+o),e.is(n,"string")&&(i.warn(n,a),i.debug(n)),i.notify("stopProgress",t),e.is(r.onFailure,"function")&&r.onFailure.call(null,n)},C=function(t){return new e.Promise(function(n){var r=[],a=function(t){var n,i;-1===r.indexOf(t)&&(n=o.getInstance(t),i=t,e.is(n)&&(i=n.get("isInstanceOf"),o.needToQueryForConnections(t)&&r.push(t)),-1===r.indexOf(i)&&o.needToQueryForConnections(i)&&r.push(i))};o.isNavigateOnDemand()||n({impactedList:[],relationsLoaded:!0}),(e.is(t)?t:f.getModuleSelections(i.getId())).forEach(function(e){a(e.id),Array.isArray(e.path)&&e.path.forEach(function(e){a(e)})}),r.length>0?o.getConnectionsFromServer(r,function(t){e.is(t)&&Array.isArray(t.connections)&&t.connections.length>0&&i.notify("connectionAdded",[t.connections]),n({impactedList:r,result:t,relationsLoaded:!0})}):n({impactedList:r,relationsLoaded:!0})})},y=function(e){return C(e).then(function(e){var t=e.impactedList;t.length>0&&(i.notify("refreshImpacted",{impactedChildren:[],impactedObjects:t}),i.getBehavior("RefreshBehavior").onRefreshSelected({impactedChildren:[],impactedObjects:t}))})},D=function(){return e.is(L)||(L=i.getBehavior("ProductImplementBehavior")),L},R=function(){return e.is(h)||(h=i.getBehavior("ProcessImplementBehavior")),h},v=function(t){var n,i,a,s,l,u=!0,f={};return e.is(t.fromSideRefPID)&&e.is(t.toSideRefPID)?(n=t.fromSideRefPID,i=t.toSideRefPID,a=o.getReference(n),s=o.getReference(i)):(u=!1,l=c.getNLSValue("LinkBehavior.canCreateOutputLinkError.InsufficentInfo")),u&&(r.isAKindOf(s,"Provide")||r.isAKindOf(a,"DELLmiHeaderWorkPlanReference")||r.isAKindOf(a,"DELLmiQtyControlProcessReference")||r.isAKindOf(a,"DELLmiServiceHeaderWorkPlanReference")?(u=!1,l=c.getNLSValue("LinkBehavior.canCreateOutputLinkError.ObjectTypeDoesntSupport")):o.hasConnection({from:n,to:i,type:m})&&(u=!1,l=c.getNLSValue("LinkBehavior.canCreateOutputLinkError.LinkAlreadyExists"))),f={canCreateLink:u},u?f.data=e.merge({type:m,IDFrom:t.fromSideRefPID,IDTo:t.toSideRefPID,displayText:c.getNLSValue(m,null,"CreateLink"),buttonIdentifier:c.getNLSValue(m,null,"CreateLink")},e.clone(t)):f.errorMessage=l,f},A=function(t){var n,i,a,s,l,u=!0,f={};return e.is(t.fromSideRefPID)&&e.is(t.toSideRefPID)?(i=t.fromSideRefPID,a=t.toSideRefPID,s=o.getReference(i),l=o.getReference(a)):(u=!1,n=c.getNLSValue("LinkBehavior.canCreateOriginateLinkError.InsufficentInfo")),u&&(o.hasConnection({from:i,to:a,type:P})||o.hasConnection({from:a,to:i,type:P})?(u=!1,n=c.getNLSValue("LinkBehavior.canCreateOriginateLinkError.LinkAlreadyExists")):(r.isAKindOf(s,"DELLmiHeaderWorkPlanReference")||r.isAKindOf(l,"DELLmiHeaderWorkPlanReference")||r.isAKindOf(s,"DELLmiServiceHeaderWorkPlanReference")||r.isAKindOf(l,"DELLmiServiceHeaderWorkPlanReference"))&&(u=!1,n=c.getNLSValue("LinkBehavior.canCreateOriginateLinkError.ObjectTypeDoesntSupport"))),f={canCreateLink:u},u?f.data=e.merge({type:P,IDFrom:i,IDTo:a,displayText:c.getNLSValue(P,null,"CreateLink"),buttonIdentifier:c.getNLSValue(P,null,"CreateLink")},e.clone(t)):f.errorMessage=n,f},V=function(t){let n,i,o="PLMReqSpecifyHowToCnx",r=!0,a="",s={};return e.is(t.fromSideRefPID)&&e.is(t.toSideRefPID)?(n=t.fromSideRefPID,i=t.toSideRefPID):(r=!1,a=c.getNLSValue("LinkBehavior.canCreateRequirementLinkError.InsufficentInfo")),r||(s.errorMessage=a),(s={canCreateLink:r}).data=e.merge({type:o,IDFrom:n,IDTo:i,displayText:c.getNLSValue(o,null,"CreateLink"),buttonIdentifier:c.getNLSValue(o,null,"CreateLink")},e.clone(t)),s},E=function(t){var n,i,r,a=!0,s={};return e.is(t.fromSideRefPID)&&e.is(t.toSideRefPID)?(n=t.fromSideRefPID,i=t.toSideRefPID,(o.hasConnection({from:n,to:i,type:p})||o.hasConnection({from:i,to:n,type:p}))&&(a=!1,r=c.getNLSValue("LinkBehavior.canCreateAlternateLinkError.LinkAlreadyExists"))):(a=!1,r=c.getNLSValue("LinkBehavior.canCreateAlternateLinkError.InsufficentInfo")),s={canCreateLink:a},a?s.data=e.merge({type:p,IDFrom:n,IDTo:i,displayText:c.getNLSValue(p,null,"CreateLink"),buttonIdentifier:c.getNLSValue(p,null,"CreateLink")},e.clone(t)):s.errorMessage=r,s},N=function(t){var n,i,a,s,l=!0,u={};return e.is(t.fromSideRefPID)&&e.is(t.toSideRefPID)?(n=t.fromSideRefPID,i=t.toSideRefPID,a=o.getReference(n),r.isAKindOf(a,"DELLmiHeaderWorkPlanReference")||r.isAKindOf(a,"DELLmiServiceHeaderWorkPlanReference")?(l=!1,s=c.getNLSValue("LinkBehavior.canCreateMfgResponsibilityLinkError.SourceTypeNotAllowed")):o.hasConnection({from:n,to:i,type:"DELMfgResponsibilityCnx"})&&(l=!1,s=c.getNLSValue("LinkBehavior.canCreateMfgResponsibilityLinkError.LinkAlreadyExists"))):(l=!1,s=c.getNLSValue("LinkBehavior.canCreateMfgResponsibilityLinkError.InsufficentInfo")),u={canCreateLink:l},l?u.data=e.merge({type:"DELMfgResponsibilityCnx",IDFrom:n,IDTo:i,displayText:c.getNLSValue("DELMfgResponsibilityCnx",null,"CreateLink"),buttonIdentifier:c.getNLSValue("DELMfgResponsibilityCnx",null,"CreateLink")},e.clone(t)):u.errorMessage=s,u},b=function(t){var n,i,r,a=!0,s={};return e.is(t.fromSideAbsPath)&&e.is(t.toSideRefPID)?(n=t.toSideRefPID,e.is(t.fromSideAbsPath,"array")&&t.fromSideAbsPath.length>0?(i=t.fromSideAbsPath[t.fromSideAbsPath.length-1],o.hasConnection({from:i,to:n,type:"DELFmiMfgSubstituteCnx"})&&(a=!1),r=o.getInstance(i),o.getReferenceModelFromInstance(r).get("PID")===n&&(a=!1),e.is(t.IDFrom)&&(t.IDFrom=i)):a=!1):a=!1,s={canCreateLink:a},a&&(s.data=e.merge({type:"DELFmiMfgSubstituteCnx",IDFrom:i,IDTo:n,displayText:c.getNLSValue("DELFmiMfgSubstituteCnx",null,"CreateLink"),buttonIdentifier:c.getNLSValue("DELFmiMfgSubstituteCnx",null,"CreateLink")},e.clone(t))),s},M=function(t,n){var o,r=i.getBehavior("ProductFlowLinkBehavior"),a=i.getBehavior("CapableResourceLinkBehaviour");switch(e.is(t.type)?t.type:n){case"ProductImplementLink":o=l.canCreateScopeLink(t);break;case"ProductImplementLinkOcc":o=l.canCreateImplementLink(t);break;case d:o=l.canCreatePartialScopeLink(t);break;case"ProcessImplementLink":o=u.canCreateScopeLink(t);break;case"ProcessImplementLinkOcc":o=u.canCreateImplementLink(t);break;case"ResultingProductLink":o=l.canCreateResultingProductLink(t);break;case m:o=v(t);break;case p:o=E(t);break;case P:o=A(t);break;case"DELAsmProcessCanUseCnx":o=a.canCreatePrimaryCapableRscLink(t);break;case"SecondaryCandidateResourceLink":o=a.canCreateSecondaryCapableRscLink(t);break;case"DELAssetsStructureLink":o=a.canCreateAssetsStructureLink(t);break;case"DELLmiTimeConstraintCnx":case"DELLmiMaterialPathCnxCust":o=r.canCreateProductFlowLink(t,n);break;case"DELMfgResponsibilityCnx":o=N(t);break;case"DELFmiMfgSubstituteCnx":o=b(t);break;case"PLMReqSpecifyHowToCnx":o=V(t);break;default:o={canCreateLink:!1}}return o},k=function(n,r){var a,s,c,l,u=D(),f=R(),g=i.getBehavior("ProductFlowLinkBehavior"),d=i.getBehavior("CapableResourceLinkBehaviour");return new t(function(t,i){var L=function(e){t(e)},h=function(e){i(e)};switch(n.type){case"ProductImplementLinkOcc":u.createImplementLink(n,r,L,h);break;case"ProcessImplementLinkOcc":f.createImplementLink(n,r,L,h);break;case"DELAsmProcessCanUseCnx":case"SecondaryCandidateResourceLink":case"DELAssetsStructureLink":d.createConnection(n,r,L,h);break;case"DELLmiTimeConstraintCnx":case"DELLmiMaterialPathCnxCust":g.createProductFlowLink(n,r,L,h);break;case P:case p:case"ResultingProductLink":case m:default:s={linkType:n.type,target:n.IDFrom,source:n.IDTo},c=function(){e.is(L,"function")&&L(s)},l=function(t,n){e.is(n)&&e.is(n.message)&&(s.errorMessage=n.message),e.is(h,"function")&&h(s)},(a=M(n)).canCreateLink?(r=r||{},o.createConnection({IDFrom:n.IDFrom,IDTo:n.IDTo,type:n.type},e.merge({onFailure:l,onTimeout:l,onCancel:l,onComplete:c},r))):(s.errorMessage=a.errorMessage,l())}})},{listenTo:function(){return{LoadRelations:function(e){var t;return Array.isArray(e)&&(t=e),y(t)}}},onStart:function(){},onStop:function(){},getPossibleRelationTypes:function(t){var n=e.is(t.fromSideRefPID)?o.getReference(t.fromSideRefPID):null,a=e.is(t.toSideRefPID)?o.getReference(t.toSideRefPID):null,s=e.is(n)?n.get("type"):null,c=e.is(a)?a.get("type"):null,l={};return e.is(s)&&e.is(c)?(r.getPossibleRelations(s,c,"write").forEach(function(n){var i={};(i=M(t,n)).canCreateLink&&(delete i.canCreateLink,i.data=e.is(i.data,"array")?i.data:[i.data],l[n]=i)}),l):(i.debug("No Types on models"),[])},canCreatePartialScopeLink:function(e){return u.canCreatePartialScopeLink(e)},isUsagePointManagementEnabled:function(){return o.isUsagePointManagementEnabled()},isLinkPossible:function(e,t,n,i){return r.isLinkPossible(e,t,n,i)},isRelationTypeConfiguredForPPRTypes:function(e,t,n,i){const o=r.getConfiguredRelations(t,n,i);return Array.isArray(o)&&o.indexOf(e)>-1},webServiceRequest:function(e){a.webServiceRequest(e)},getConnection:function(e){return o.getConnection(e)},isExploreWebAppEnabled:function(){return g.isCloud()?!g.isCloud():"true"===localStorage.getItem("isExploreWebAppEnabled")},createConnectionsByType:function(e,t){var n,i=D(),o=R(),r=e.linkType,a=e.linksData;switch(r){case"ProductImplementLink":i.createScopeLink(a,t);break;case d:(n=a[0]).cmdAction=i.PartialScopeAction.CREATE_PARTIALSCOPE,i.managePartialScopeLink(n,t);break;case"ProcessImplementLink":o.createScopeLink(a,t);break;default:this.createConnection(a,t)}},createConnection:function(n,r){var a,s={},l=[];e.is(n)&&e.is(n,"array")&&(i.notify("startProgress",s),a=i.log(c.getNLSValue("CreateLink.LogMessage")),l=n.map(function(e){return k(e,r)}),t.allSettled(l).then(function(t){var n=0,l={},u={},f={success:l,failed:u};t.forEach(function(t){var o,r;"rejected"===t.state?(n++,r=u,o=t.reason,e.is(o.errorMessage,"string")&&i.debug(o.linkType+" creation failed :  "+o.errorMessage)):(r=l,o=t.value),e.is(r[o.linkType])||(r[o.linkType]={}),e.is(r[o.linkType][o.target])||(r[o.linkType][o.target]=[]),r[o.linkType][o.target].push({errorMessage:o.errorMessage,source:o.source})}),Object.keys(f).forEach(function(e){var t="success"===e,n=t?"CreateLink.Success":"CreateLink.Failure",r=f[e];Object.keys(r).forEach(function(e){var s=r[e];Object.keys(s).forEach(function(r){var l,u,f=s[r],g=[],d=o.getReferenceModel(r).get("PLMEntity.V_Name");u=[],f.forEach(function(e){var t=e.source,n=o.getReferenceModel(t);e.errorMessage&&u.push(e.errorMessage),g.push(n.get("PLMEntity.V_Name"))}),u=u.join(", "),l=c.getNLSValue(n,{linkType:c.getNLSValue(e),target:d,source:g.join(", ")}),l=u.length>0?l+" "+u:l,t?i.info(l,a):(i.warn(l,a),i.debug(l))})})}),0===n?I(s,null,r,a):S(s,null,null,r,a)}))},createHOPMfgItemPartialScopeLink:function(e){var t,n={},o=c.getNLSValue("ImplementBehavior.CreateMGAPartialScopeLink.LogMessage");i.notify("startProgress",n),t=i.log(o),u.createHOPMfgItemPartialScopeLink(e,{onSuccess:function(e){I(n,e,null,t)},onFailure:function(e){S(n,e,null,null,t)}})},setUsagePoints:function(t,n,o){var r,a=i.log(c.getNLSValue("LinkBehavior.SetUsagePoints.LogMessage")),s={},l=this.getConnection(t),f=e.is(o)?o.get("type"):l.get("type"),g={IDFrom:l.get("from"),IDTo:l.get("to")};i.notify("startProgress",s),r={connPID:t,connectionParams:g,pathOfInstanceIds:n,implementLinkId:e.is(o)?o.get("PID"):null},e.is(r)&&e.is(f)&&u.setUsagePoints(r,f,{onSuccess:function(){"ProcessImplementLink"===f?I(s,c.getNLSValue("LinkBehavior.SetUsagePoints.CreateUsagePoints.SaveSucceeded"),null,a):"ProcessImplementLinkOcc"===f&&I(s,c.getNLSValue("LinkBehavior.SetUsagePoints.AssignImplementLink.SaveSucceeded"),null,a)},onFailure:function(e){"ProcessImplementLink"===f?S(s,c.getNLSValue("LinkBehavior.SetUsagePoints.CreateUsagePoints.SaveFailed"),e,null,a):"ProcessImplementLinkOcc"===f&&S(s,c.getNLSValue("LinkBehavior.SetUsagePoints.AssignImplementLink.SaveFailed"),e,null,a)}})},deleteUsagePoint:function(t,n){var o,r=i.log(c.getNLSValue("LinkBehavior.DeleteUsagePoint.LogMessage",{pathInstIds:n})),a={};i.notify("startProgress",a),o={pid:t,pathOfInstanceIds:n},e.is(o)&&u.deleteUsagePoint(o,{onSuccess:function(){I(a,c.getNLSValue("LinkBehavior.DeleteUsagePoint.SaveSucceeded"),null,r),i.notify("refreshImpacted"),i.notify("updateCrossHighlight")},onFailure:function(e){S(a,c.getNLSValue("LinkBehavior.DeleteUsagePoint.SaveFailed"),e,null,r)}})},unassignImplementLinkFromUsagePoints:function(t,n){var o,r=i.log(c.getNLSValue("LinkBehavior.UnassignImplementLinkFromUsagePoints.LogMessage")),a={};i.notify("startProgress",a),o={pid:t,implementLinkId:n},e.is(o)&&u.unassignImplementLinkFromUsagePoints(o,{onSuccess:function(){I(a,c.getNLSValue("LinkBehavior.UnassignImplementLinkFromUsagePoints.SaveSucceeded"),null,r),i.notify("refreshImpacted"),i.notify("updateCrossHighlight")},onFailure:function(e){S(a,c.getNLSValue("LinkBehavior.UnassignImplementLinkFromUsagePoints.SaveFailed"),e,null,r)}})},setImplementLinkToUsagePoints:function(t,n){var i,o,r=this.getConnection(t);e.is(r)&&(1===(i=u.findInstanceWhoseParentIsScoped(r.get("from")).scopeLinks).length?o=i[0]:i.length>1&&i.forEach(function(t){"ProcessImplementLink"===t.get("type")&&e.is(t.get("usagePoint"))&&t.get("usagePoint").includes(n[0])&&(o=t)}),e.is(o)&&(n.length>0?this.setUsagePoints(o.get("PID"),n,r):this.unassignImplementLinkFromUsagePoints(o.get("PID"),t)))},canDeleteRelation:function(t){var n,i,a,s,c,l,u=!1;return n=this.getConnection(t),e.is(n)&&("CapableResourcesStructureLink"===(i=n.getAttribute("type"))?u=!1:"SecondaryCandidateResourceLink"===i?u=!0:"DELLmiMaterialPathCnxCust"===i?u=!0:(a=n.getAttribute("from"),s=o.getReferenceModel(a).get("type"),c=n.getAttribute("to"),l=o.getReferenceModel(c).get("type"),u=r.isRelationTypeConfigured(i,s,l,"write"))),u},switchScope:function(t,n,o,r,a,s){var l,f,g={};f=i.log(c.getNLSValue("LinkBehavior.SwitchScope.LogMessage")),i.notify("startProgress",g),l={fromID:t,mbomRefID:n,mbomInstID:o,connectionType:r,isRefInstRefScope:a},e.is(s)&&l&&u.switchScope(l,s,{onSuccess:function(){I(g,c.getNLSValue("LinkBehavior.SwitchScope.SaveSucceeded"),null,f)},onFailure:function(e){S(g,c.getNLSValue("LinkBehavior.SwitchScope.SaveFailed"),e,null,f)}})},deleteConnection:function(t,n){var r,a,s,f,g,m={},p=o.getConnection(t),P=p.getAttribute("type"),L=c.getNLSValue(P),h=D();switch(n=n||{},i.notify("startProgress",m),s=i.log(c.getNLSValue("DeleteLink.LogMessage",{linkType:L})),r={onComplete:function(t,o){var r={};I(m,c.getNLSValue("DeleteLink.Success",{linkType:L}),n,s),e.is(t)&&e.is(t.preferred)&&(r.linkPID=t.preferred,r.state=!0,i.notify("updatePreferredLink",r)),e.is(o)?i.notify("deleteLink",[o.deletedConnections]):i.notify("deleteLink",p.toJSON())},onFailure:f=function(e,t){S(m,c.getNLSValue("DeleteLink.Failure",{linkType:L}),t,n,s)},onTimeout:f,onCancel:f},a=e.extend({},n),r=e.extend(a,r),P){case"ProductImplementLink":l.deleteScopeLink(t,r);break;case"ProcessImplementLink":u.deleteScopeLink(t,r);break;case"ProductImplementLinkOcc":l.isDeleteOfProductImplementLinkAllowed()?l.deleteImplementLink(t,r):S(m,c.getNLSValue("DeleteLink.ProductImplementLinkDeleteNotAllowed"),null,n,s);break;case"ProcessImplementLinkOcc":u.deleteImplementLink(t,r);break;case d:if(3===(g=t.split("|")).length){r.cmdAction=h.PartialScopeAction.DELETE_PARTIALSCOPE;const[,e,t]=g;l.manageScopeAndImplementLink(e,null,t,null,r)}break;default:o.deleteConnection(t,r)}},addConnection:function(e,t){return o.addConnection(e,t)},updateLinkAttributes:function(t,n,r){var a,l,f,g,d,m=[],p={},P={},L={};for(n=n||{},r=r||{},a=0;a<n.length;a++)d=s.hasRangeDefined(n[a].attributeInfo,n[a].attributeDef)&&s.isInteger(n[a].attributeInfo),g=n[a].objectToBeModified.get(n[a].dataIndex),f=n[a].newValue,d&&(g=s.getAuthorizedValueIndex(n[a].attributeInfo,n[a].attributeDef,g)),s.isDate(n[a].attributeInfo)&&(g=new Date(g).getTime()/1e3),g!==f&&(n[a].previousValue=g,m.push(n[a]));if(0!==m.length){for(a=0;a<m.length;a++)p[m[a].attributeName]=m[a].newValue;p=u.addCustoRoleToLinkData(p),l={data:p=u.validateQuantityToEdit(t,p),onFailure:function(t,n){var i;for(a=0;a<m.length;a++)t.set(m[a].dataIndex,m[a].previousValue);e.is(n)&&e.is(n.message,"string")&&(i=n.message),S(L,c.getNLSValue("AttributeUtil.SaveFailed"),i,r)},onComplete:function(){I(L,c.getNLSValue("AttributeUtil.SaveSucceeded"),r),i.notify("editLinkAttributes",P),i.notify("refreshImpacted")},logMessage:c.getNLSValue("AttributeUtil.EditAttributesLogMessage")},i.notify("startProgress",L),o.updateConnection(t,l)}},getConnectionsByModel:function(e,t,n){o.getConnectionsByModel(e,t,n)},getImpactedConnections:function(e,t,n){return o.getImpacted(e,t,n)},getConnectedObjects:function(t,n,r){var a,s,c,l,u=R(),f=i.getBehavior("CapableResourceLinkBehaviour"),g=[];return a=o.getInstance(t),e.is(a)?(s=t,c=o.getReferenceModelFromInstance(a),l=c.get("PID")):(c=o.getReference(t),l=t),o.getImpacted(t,!1,r).forEach(function(e){var t,i=e.get("type"),o=e.get("from"),a=e.get("to");switch(i){case"ProcessImplementLink":case"PartialProcessImplementLink":case"ProcessImplementLinkOcc":g=g.concat(u.getConnectedObjects(l,s,n,e));break;case"CapableResourcesStructureLink":case"DELAsmProcessCanUseCnx":case"SecondaryCandidateResourceLink":case"DELAssetsStructureLink":g=g.concat(f.getConnectedObjects(l,s,n,e,r));break;case m:case p:case P:t=o===l?a:o,g.push(t);break;case"ProductImplementLink":case"ProductImplementLinkOcc":case"ResultingProductLink":case"DELLmiTimeConstraintCnx":case"DELLmiMaterialPathCnxCust":break;default:console.log("Invalid Type")}}),g},getConnectedUsagePoints:function(t,n){var i,a,s=[];return i=o.getInstance(t),a=e.is(i)?o.getReferenceModelFromInstance(i):o.getReference(t),e.is(a)&&(r.isAKindOf(a.get("type"),"DELLmiServiceWorkPlanSystemReference")||r.isAKindOf(a.get("type"),"DELServicePartReference")||r.isAKindOf(a.get("type"),"DELServiceAssemblyReference")||r.isAKindOf(a.get("type"),"DELServiceKitReference"))&&o.getImpacted(t,!1,n).forEach(function(t){var n=t.get("usagePoint");e.is(n)&&n.length>0&&s.push(...n.map(e=>e[e.length-1]))}),s},getXMLValues:function(e,t,n){return a.getXMLValues(e,t,n)},getRelations:function(t){return C(t).then(function(t){var n=t.result;return{isRelationsLoaded:t.relationsLoaded,connections:e.is(n)?n.connections:[]}})},areRelationsLoaded:function(t){var n=!0;return t=Array.isArray(t)?t:[t],o.isNavigateOnDemand()&&(n=t.some(function(t){var n,i,r,a=o.getReferenceModel(t),s=a.get("PID")===t;return e.is(a)&&(s||(r=t),i=o.getInstance(r),n=e.is(i)?a.getAdditionalInfo("queriedForConnections")&&i.getAdditionalInfo("queriedForConnections"):a.getAdditionalInfo("queriedForConnections")),n})),n},hasConnection:function(e){return o.hasConnection(e)},getLinkInfo:function(t){var n,o=i.getBehavior("ProductFlowLinkBehavior"),r={NLS:null,type:null,subType:null,iconName:null,interface:null};return e.is(t)&&("DELLmiTimeConstraintCnx"===(n=t.get("type"))&&e.is(o)?r=o.getLinkInfo(t):(r.NLS=c.getNLSValue(n),r.type=n,r.iconName=n)),r},getSecondaryRscLinksFromPrimaryLink:function(e){var t;return t=e.get("PID"),o.getImpacted(t,!1,{relationTypes:["SecondaryCandidateResourceLink"]})},cloneSecondaryCapableRscLinkWithFromAttr:function(t){var n=this.getConnection(t.get("from"));return e.is(n)&&(t=t.clone()).set("from",n.get("from")),t},getSecondaryResourceLinksInfo:function(t){var n,i=this,r=[],a=o.getConnection(t),s=this.getSecondaryRscLinksFromPrimaryLink(a);return n=function(t){var n=t.get("PID"),i=t.get("type"),r=t.get("DELAsmProcessCanUseCnx.V_IsPreferred"),a=t.get("from"),s=t.get("to"),c=o.getReference(a),l=o.getReference(s),u=e.is(c)?c.get("type"):null,f=e.is(l)?l.get("type"):null,g=e.is(c)?c.get("PLMEntity.V_Name"):null,d=e.is(l)?l.get("PLMEntity.V_Name"):null,m=e.is(t.get("ResourceUsage"))?t.get("ResourceUsage"):null,p=e.is(m)?o.getInstance(m):null;return{connPID:n,isPreferred:"DELAsmProcessCanUseCnx"===i?r:"",fromPID:a,toPID:s,fromType:u,toType:f,fromName:g,toName:d,resourceUsage:e.is(p)?p.get("PLMInstance.PLM_ExternalID"):"",resourceUsagePID:m}},s.forEach(function(e){var t=i.cloneSecondaryCapableRscLinkWithFromAttr(e);r.push(n(t))}),r},isAuthoringMode:function(){return o.isAuthoringMode()},getAttributeNLSForUnit:function(e){var t=r.getAttributeInfo(e);return s.getNLSForUnit(t)}}}}}),define("DS/DELPPWModelBehaviors/BuildUpBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DicoPlugin","UXComponentsPlugin","DatabasePlugin","ResourcePlugin","DELPXPSessionPlugin","ModelObserverPlugin"],creator:function(t,n,i,o,r,a,s,c){const l=["DELLmiGeneralOperationReference","DELLmiHeaderOperationReference","DELLmiLoadingOperationReference","DELLmiUnloadingOperationReference","DELLmiWorkPlanSystemReference"],u=["DELLmiGeneralOperationInstance","DELLmiHeaderOperationInstance","DELLmiLoadingOperationInstance","DELLmiUnloadingOperationInstance","DELLmiWorkPlanSystemInstance","DELLmiServiceWorkPlanSystemInstance"],f="type",g="PLMEntity.V_Name",d="isAggregatedBy",m="isInstanceOf",p="PLMInstance.PLM_ExternalID",P="from",L="to",h="PLMEntity.V_usage",I="flowType",S="DELLmiTimeConstraintCnx.V_MaterialNeed",C="V_TreeOrder",y=["1.0","0.0","0.0","0.0","1.0","0.0","0.0","0.0","1.0","0.0","0.0","0.0"],D="type",R="pid",v="name",A="isinstanceof",V="duration",E="isaggregatingby",N="from",b="to",M="transformationmatrix",k="materialneed",O="productFlowType",T="role",F="treeorder",w="isOwnedBy",x="transformationMatrix",B="materialNeed",_="treeOrder",U="isInstanceOf",W="sequencingmode",j="DELLmiTimeConstraintCnx",H="LinearProductFlowCnx",q="ProcessImplementLink",J="ProcessImplementLinkOcc",K="TimeConstraint",z="Scope",Y="ImplementLink",G="MfgProductionPlanning",X={SCRAPPED:"Scrapped",FAILED:"Failed",GOOD:"Good",QUANTITYDISTRIBUTION:"Good"},Q={"Start to Start":"TCDependencyType_StartToStart","Start to Finish":"TCDependencyType_StartToFinish","Finish to Start":"TCDependencyType_FinishToStart","Finish to Finish":"TCDependencyType_FinishToFinish","Previous Cycle":"TCDependencyType_PreviousCycle"},$={MaxDelay:"DelayMode_maxDelay",MinDelay:"DelayMode_minDelay",Synchro:"DelayMode_synchro"};var Z,ee,te,ne,ie,oe,re,ae,se,ce,le,ue,fe,ge,de,me,pe,Pe,Le={},he=(t.getLogger(),n.getAppContext()),Ie=o.getComponent("WUXCommandsManager"),Se=[],Ce=[],ye=[];let De,Re,ve,Ae,Ve,Ee,Ne,be={DELLmiHeaderWorkPlanReference:"DELLmiHeaderWorkPlanReference",DELLmiServiceHeaderWorkPlanReference:"DELLmiHeaderWorkPlanReference",DELLmiWorkPlanSystemReference:"DELLmiWorkPlanSystemReference",DELLmiServiceWorkPlanSystemReference:"DELLmiServiceWorkPlanSystemReference"},Me={DELLmiHeaderOperationReference:"Op_HeaderOperation",DELLmiGeneralOperationReference:"Op_GeneralOperation",DELLmiInterruptOperationReference:"Op_InterruptOperation",DELLmiPunctualOperationReference:"Op_PunctualOperation",DELLmiSinkOperationReference:"Op_SinkOperation",DELLmiCurveOperationReference:"Op_CurveOperation",DELLmiLoadingOperationReference:"Op_LoadingOperation",DELLmiUnloadingOperationReference:"Op_UnloadingOperation",DELLmiRemoveMaterialOperationReference:"Op_RemoveMaterialOperation",DELLmiTransferOperationReference:"Op_TransferOperation",DELLmiPickingOperationReference:"Op_PickingOperation"},ke={Provide:"Item_Provide",ProcessContinuousProvide:"Item_ProcessContinuousProvide",Transform:"Item_Transform",Drill:"Item_Drill",PreDrill:"Item_PreDrill",NoDrill:"Item_NoDrill",Cutting:"Item_Cutting",Grinding:"Item_Grinding",Beveling:"Item_Beveling",CreateAssembly:"Item_CreateAssembly",Fasten:"Item_Fasten",ElementaryEndItem:"Item_ElementaryEndItem",Machine:"Item_Machine",SplitProcess:"Item_SplitProcess",CreateMaterial:"Item_CreateMaterial",ProcessContinuousCreateMaterial:"Item_CreateContinuousMaterial",CreateKit:"Item_CreateKit",Disassemble:"Item_Disassemble",Installation:"Item_Installation"},Oe=[],Te=0,Fe=null;Ne=function(e){De={SYSTEM:{add:e.createOperationReference,update:e.updateOperationReference,remove:e.deleteOperationReference},OPERATION:{add:e.createOperationReference,update:e.updateOperationReference,remove:e.deleteOperationReference},PROCESS:{add:e.createMfgItemReference,update:e.updateMfgItemReference,remove:e.deleteMfgItemReference},RESOURCE:{add:null,update:null,remove:null},SystemInstance:{add:e.createOperationInstance,update:e.updateOperationInstance,remove:e.deleteOperationInstance},OperationInstance:{add:e.createOperationInstance,update:e.updateOperationInstance,remove:e.deleteOperationInstance},DELFmiFunctionIdentifiedInstance:{add:e.createMfgItemInstance,update:e.updateMfgItemInstance,remove:e.deleteMfgItemInstance},VPMInstance:{add:null,update:null,remove:null},ProductImplementLink:{add:null,update:null,remove:null},ProductImplementLinkOcc:{add:null,update:null,remove:null},ProcessImplementLink:{add:e.createScopeLink,update:e.updateScopeLink,remove:e.deleteScopeLink},ProcessImplementLinkOcc:{add:e.createImplementLink,update:e.updateImplementLink,remove:e.deleteImplementLink},PartialProcessImplementLink:{add:null,update:null,remove:null},CapableResourcesStructureLink:{add:null,update:null,remove:null},DELAsmProcessCanUseCnx:{add:null,update:null,remove:null},SecondaryCandidateResourceLink:{add:null,update:null,remove:null},PrimaryResourceLinkDetail:{add:null,update:null,remove:null},SecondaryResourceLinkDetail:{add:null,update:null,remove:null},DELLmiTimeConstraintCnx:{add:e.createTimeConstraint,update:e.updateTimeConstraint,remove:e.deleteTimeConstraint},LinearProductFlowCnx:{add:null,update:null,remove:null},HistorizationLinkRefRef:{add:null,update:null,remove:null},MfgProcessAlternate:{add:null,update:null,remove:null}}};let we={references:{add:ve=function(t,n){var i,o;return i={apiToCall:e.is(t.PPRTYPE)&&e.is(De[t.PPRTYPE])?De[t.PPRTYPE][n]:null,info:{pid:t.PID,type:t.type}},"SYSTEM"!==t.PPRTYPE&&"OPERATION"!==t.PPRTYPE||(i.info.duration=600),e.is(Le.newBuildUpAPI)&&Le.newBuildUpAPI?(i.info.type=t.type,(o=r.getSequencingModeAttrName(t.PID))&&e.is(t[o])&&(i.info[W]=t[o])):("OPERATION"===t.PPRTYPE&&Object.keys(Me).includes(t.type)&&(i.info.type=t.type,(o=r.getSequencingModeAttrName(t.PID))&&e.is(t[o])&&(i.info[W]=t[o])),"SYSTEM"===t.PPRTYPE&&Object.keys(be).includes(t.type)&&(i.info.type=t.type,(o=r.getSequencingModeAttrName(t.PID))&&e.is(t[o])&&(i.info[W]=t[o])),"PROCESS"===t.PPRTYPE&&Object.keys(ke).includes(t.type)&&(i.info.type=t.type)),i},update:ve,remove:Ee=function(t,n){var i,o;if(i={apiToCall:null,info:t.PID},o=t.type,t.type.contains("OperationInstance")||t.type.contains("SystemInstance"))o="OperationInstance";else if("SYSTEM"===t.PPRTYPE||"OPERATION"===t.PPRTYPE||"PROCESS"===t.PPRTYPE||"RESOURCE"===t.PPRTYPE)o=t.PPRTYPE;else if("ProcessImplementLinkOcc"===t.type)de(t.to,n);else if("LinearProductFlowCnx"===t.type&&"remove"===n){let n,i={},o=pe(t.from,t.to),a=r.getReference(o);(n=r.getSequencingModeAttrName(o))&&e.is(a.get(n))&&(i={pid:o,type:a.get(f),sequencingmode:a.get(n),duration:600},ee.updateOperationReference.call(ee,i))}return i.apiToCall=De[o][n],i}},instances:{add:Ae=function(t,n){var i;return i={apiToCall:De.OperationInstance[n],info:{pid:t.PID}},e.is(Le.newBuildUpAPI)&&Le.newBuildUpAPI?(i.info.isOwnedBy=t.isAggregatedBy,i.info.isInstanceOf=t.isInstanceOf,i.info.type=t.type,"DELFmiFunctionIdentifiedInstance"!==t.type&&"VPMInstance"!==t.type||(i.info.transformationMatrix=y)):(i.info.isaggregatingby=t.isAggregatedBy,i.info.isinstanceof=t.isInstanceOf,"DELFmiFunctionIdentifiedInstance"!==t.type&&"VPMInstance"!==t.type||(i.info.transformationmatrix=y)),t.type.contains("OperationInstance")||t.type.contains("SystemInstance")?i.info[F]=Number(t[C]):i.apiToCall=e.is(De[void 0])?De[void 0][n]:null,i},update:Ae,remove:Ee},connections:{add:Ve=function(t,n){var i,o={apiToCall:e.is(De[t.type])?De[t.type][n]:null,info:{pid:t.PID}};switch(e.is(t.from)&&(o.info=e.extend(o.info,{from:Array.isArray(t.from)?t.from:[t.from]})),e.is(t.to)&&(o.info=e.extend(o.info,{to:Array.isArray(t.to)?t.to:[t.to]})),t.type){case"ProcessImplementLinkOcc":o.info=e.extend(o.info,{role:"NULL"===t["PLMEntity.V_usage"]?"Add":t["PLMEntity.V_usage"],type:"MfgProductionPlanning"}),i=r.getConnection(t.PID),e.is(Le.newBuildUpAPI)&&Le.newBuildUpAPI&&(e.is(i)?(o.info.isOwnedBy=Pe(i.get("from")[0]),de(i.get("to"),n)):(o.info.isOwnedBy=Pe(o.info.from[0]),de(o.info.to,n)));break;case"DELLmiTimeConstraintCnx":e.is(Le.newBuildUpAPI)&&Le.newBuildUpAPI?o.info=e.extend(o.info,{materialNeed:t["DELLmiTimeConstraintCnx.V_MaterialNeed"],type:t.type,isOwnedBy:pe(t.from,t.to)}):o.info=e.extend(o.info,{delay:Number(t["DELLmiTimeConstraintCnx.V_Delay"]),materialneed:"TRUE"===t["DELLmiTimeConstraintCnx.V_MaterialNeed"],productFlowType:-1===Object.values(X).indexOf(t["DELLmiTimeConstraintCategoryAbstractCusto.flowType"])?X.GOOD:t["DELLmiTimeConstraintCategoryAbstractCusto.flowType"],timeConstraintsDependencyType:Q[t["DELLmiTimeConstraintCnx.V_DependencyType"]],delayMode:$[t["DELLmiTimeConstraintCnx.V_DelayMode"]],type:"TimeConstraint"});break;case"LinearProductFlowCnx":if(e.is(Le.newBuildUpAPI)&&Le.newBuildUpAPI){let i,o=[],a={},s=pe(t.from,t.to),c=r.getReference(s);o=(o=o.concat(t.from)).concat(t.to),"add"===n&&(i=r.getSequencingModeAttrName(s))&&e.is(c.get(i))&&(a={pid:s,type:c.get(f),sequencingmode:c.get(i),duration:600},ee.updateOperationReference.call(ee,a)),o.forEach(function(e){let t=r.getInstance(e);a={pid:e,isOwnedBy:t.get(d),isInstanceOf:t.get(m),type:t.get(f),treeOrder:t.get(C)},ee.updateOperationInstance.call(ee,a)})}}return o},update:Ve,remove:Ee}};return Re=function(t){var n=t||{};Object.keys(n).forEach(function(t){Object.keys(n[t]).forEach(function(i){n[t][i]=Array.isArray(n[t][i])?n[t][i]:[n[t][i]],n[t][i].forEach(function(n){if(e.is(we[t][i])){let o=we[t][i](n,i);e.is(o.apiToCall)&&e.is(o.info)&&o.apiToCall.call(ee,o.info)}})})})},me=function(e,t){var n,i;return[n,i]=e.length>t.length?[e,t]:[t,e],i.every(e=>n.includes(e))},de=function(n,i){var o,a,s,c,l,u=!1,f=!1,g=[];if(l=t.getBehavior("MANUFACTURING","WUXNodeModelBehavior"),e.is(l)||(l=t.getBehavior("SBOM","WUXNodeModelBehavior")),e.is(n))if(o=r.transformToRIROccurrencePath(n),g=l.getChildren(o[o.length-1]),"add"===i)if(Ce.length>0)if(ye.push(o),0===g.length){for(a=0;a<Ce.length;a++)if(e.equals(Ce[a],o)){Ce.splice(a,1);break}}else g.length>0&&g.forEach(function(t){for(f=!1,a=0;a<ye.length;a++)if(me(ye[a],[t])){f=!0;break}f||(s=r.getReferenceIdFromInstance(t),l.getNodeModel(s).forEach(function(n){if(-1!==(c=r.transformToRIROccurrencePath(n.getAbsolutePath())).indexOf(t))for(a=0;a<Ce.length;a++)if(e.equals(Ce[a],c)){Ce.splice(a,1);break}}))});else ye.push(o);else if("remove"===i)if(ye.length>0){for(a=0;a<ye.length;a++)if(e.equals(ye[a],o)){ye.splice(a,1);break}if(0===g.length){for(a=0;a<ye.length;a++)if(me(ye[a],o)){u=!0;break}u?Ce.splice(a,1):Ce.push(o)}else g.length>0&&g.forEach(function(e){for(f=!1,a=0;a<ye.length;a++)if(me(ye[a],[e])){f=!0;break}f||(s=r.getReferenceIdFromInstance(e),l.getNodeModel(s).forEach(function(t){-1!==(c=r.transformToRIROccurrencePath(t.getAbsolutePath())).indexOf(e)&&Ce.push(c)}))})}else Ce.push(o)},pe=function(t,n){var i,o,a,s,c,l,u,f={},g=!1;if(e.is(t,"array")&&e.is(n,"array"))for(o=t.length-1;o>=0;o--){for(s=t[o],a=r.getInstance(s).get("isAggregatedBy"),c=n.length-1;c>=0;c--)if(l=n[c],e.is(f[l])?u=f[l]:(u=r.getInstance(l).get("isAggregatedBy"),f[l]=u),a===u&&s!==l){g=!0,i=a;break}if(g)break}return i},Pe=function(e){var t;return t=r.getInstance(e),r.getAggregatingReferenceModelFromInstance(t).get("PID")},te=function n(i,o,a,s,c){var l,u=t.getBehavior("MANUFACTURING","WUXNodeModelBehavior"),P={};-1===s.indexOf(i.id)&&(P[R]=i.id,P[D]="Item_"+i.get(f),P[v]=i.get(g),o.push(P),s.push(i.id)),r.findInstances({isInstanceOf:i.id}).forEach(function(e){var t={};-1===c.indexOf(e.id)&&(t[R]=e.id,t[E]=e.get(d),t[A]=e.get(m),t[v]=e.get(p),t[M]=y,a.push(t),c.push(e.id))}),(l=r.findInstances({isAggregatedBy:i.id})).length>0?l.forEach(function(e){r.findReferences({PID:e.get(m)}).forEach(function(e){n(e,o,a,s,c)})}):u.getNodeModel(i.id).forEach(function(t){let n,i=!1,o=r.transformToRIROccurrencePath(t.getAbsolutePath());for(n=0;n<Se.length;n++)if(e.equals(Se[n],o)){i=!0;break}i||Se.push(o)})},ie=function e(t,n,i,o,a){r.findInstances({isAggregatedBy:t.id}).forEach(function(t){r.findReferences({PID:t.get(m)}).forEach(function(t){var s,c={};(r.isOperation(t.id)||r.isSystem(t.id))&&(-1===o.indexOf(t.id)&&(o.push(t.id),s=t.get(f),s=l.indexOf(s)>=0?"UnloadingOperation"===(s=s.replace("DELLmi","").replace("Reference",""))?"UnloadOperation":s:"AssembleOperation",c[R]=t.id,c[D]=s,c[v]=t.get(g),c[V]=parseFloat(t.get("DELLmiOperationReference.V_EstimatedTime")),n.push(c)),r.findInstances({isInstanceOf:t.id}).forEach(function(e){var t={};-1===a.indexOf(e.id)&&(a.push(e.id),t[R]=e.id,t[E]=e.get(d),t[A]=e.get(m),t[v]=e.get(p),t[F]=Number(e.get(C)),i.push(t))}),e(t,n,i,o,a))})})},re=function(n,i,o,a,s,c,l,g,m){var p=t.getBehavior("MANUFACTURING","WUXNodeModelBehavior"),C=[],y=[];return(y=(y=r.findConnections({type:j})).concat(r.findConnections({type:H}))).forEach(function(t){var o,s,c,l,g,m={},p=!1;if(-1===n.indexOf(t.id)&&((a.indexOf(t.getAttribute("to"))>-1||a.indexOf(t.getAttribute("from"))>-1)&&(p=!0),!0===p&&(1===(s=r.findInstances({PID:t.getAttribute(P)})).length&&((s=s[0]).get(d)!==i?1===r.findInstances({isInstanceOf:s.get(d)}).length&&(l=[r.findInstances({isInstanceOf:s.get(d)},1)[0].id,s.id]):l=[s.id]),1===(o=r.findInstances({PID:t.getAttribute(L)})).length&&((o=o[0]).get(d)!==i?null!==(g=r.findInstances({isInstanceOf:o.get(d)},1))&&(c=[g[0].id,o.id]):c=[o.id]),u.indexOf(o.get(f))>=0&&u.indexOf(s.get(f))>=0&&a.indexOf(l[l.length-1])>-1&&a.indexOf(c[c.length-1])>-1))){if(m[R]=t.id,m[D]=K,m[N]=l,m[b]=c,m[k]=!e.is(t.get(S))||"TRUE"===t.get(S),e.is(t.get(I)))switch(t.get(I)){case X.SCRAPPED:m[O]=X.SCRAPPED;break;case X.FAILED:m[O]=X.FAILED;break;default:m[O]=X.GOOD}C.push(m),n.push(t.id)}}),(y=r.findConnections({type:q})).forEach(function(t){var o={};i===t.get(P)&&s===t.get(L)&&-1===n.indexOf(t.id)&&(o[R]=t.id,o[D]=z,o[N]=e.is(t.get(P),"array")?t.get(P):[t.get(P)],o[b]=e.is(t.get(L),"array")?t.get(L):[t.get(L)],C.push(o),n.push(t.id))}),y=r.findConnections({type:J}),Ce=[...Se],y.forEach(function(t){var i,o,s,c={};-1===n.indexOf(t.id)&&(i=t.get(P)[t.get(P).length-1],a.indexOf(i)>-1&&(o=t.get(L)[t.get(L).length-1],l.indexOf(o)>-1&&(c[R]=t.id,c[D]=Y,c[N]=e.is(t.get(P),"array")?t.get(P):[t.get(P)],c[b]=e.is(t.get(L),"array")?t.get(L):[t.get(L)],e.is(t.get(h))&&"NULL"!==t.get(h)&&(c[T]=t.get(h)),C.push(c),n.push(t.id),s=r.getReferenceIdFromInstance(o),p.getNodeModel(s).forEach(function(t){let n,i=!1,a=!1,s=r.transformToRIROccurrencePath(t.getAbsolutePath());if(-1!==s.indexOf(o)){for(ye.push(s),n=0;n<Se.length;n++){if(e.equals(Se[n],s)){i=!0;break}if(me(Se[n],s)){a=!0;break}}if(i){for(n=0;n<Ce.length;n++)if(e.equals(Ce[n],s)){Ce.splice(n,1);break}}else if(a)for(n=0;n<Ce.length;n++)me(Ce[n],s)&&(Ce.splice(n,1),n--)}}))))}),C},se=function(e){var t,n,i=[],o=[],s=[],c=[],l=[],u=[],f=[],d=[],m=[];try{return t=r.getReference(e.sysPID),n=r.getReference(e.scopedMfgItemPID),te(n,s,c,i,o),s.length<=1&&a.getNLSValue("BuildUp.Error.NoMBOM"),c.length<=1&&a.getNLSValue("BuildUp.Error.NoMBOM"),ie(t,f,d,l,u),f.length<=1&&a.getNLSValue("BuildUp.Error.NoOperations"),d.length<=1&&a.getNLSValue("BuildUp.Error.NoOperations"),m=re([],t.id,0,u,n.id,0,o),{version:"1.0",workplan:{pid:t.id,name:t.get(g),scopedItem:n.id,manufactureditems:{references:s,instances:c},resources:{references:[],instances:[]},operations:{references:f,instances:d},links:m}}}catch(e){console.error(e.stack),console.error(e.message)}},ne=function n(i,o,a,s,c){var l,u,P={};l=t.getBehavior("MANUFACTURING","WUXNodeModelBehavior"),e.is(l)||(l=t.getBehavior("SBOM","WUXNodeModelBehavior")),-1===s.indexOf(i.id)&&(P[R]=i.id,P[D]=i.get(f),P[v]=i.get(g),o.push(P),s.push(i.id)),r.findInstances({isInstanceOf:i.id}).forEach(function(e){var t={};-1===c.indexOf(e.id)&&(t[R]=e.id,t[w]=e.get(d),t[U]=e.get(m),t[D]=e.get(f),t[v]=e.get(p),t[x]=y,a.push(t),c.push(e.id))}),(u=r.findInstances({isAggregatedBy:i.id})).length>0?u.forEach(function(e){r.findReferences({PID:e.get(m)}).forEach(function(e){n(e,o,a,s,c)})}):l.getNodeModel(i.id).forEach(function(t){let n,i=!1,o=r.transformToRIROccurrencePath(t.getAbsolutePath());for(n=0;n<Se.length;n++)if(e.equals(Se[n],o)){i=!0;break}i||Se.push(o)})},oe=function(t,n,i,o,a){var s,c,l={};s=function t(n,i,o,a,s){r.findInstances({isAggregatedBy:n.id}).forEach(function(n){r.findReferences({PID:n.get(m)}).forEach(function(n){var l={};(r.isOperation(n.id)||r.isSystem(n.id))&&(-1===a.indexOf(n.id)&&(a.push(n.id),l[R]=n.id,l[D]=n.get(f),l[v]=n.get(g),c=r.getSequencingModeAttrName(n.id),e.is(c)&&(l[W]=n.get(c)),e.is(n.get("DELLmiOperationReference.V_EstimatedTime"))&&(l[V]=parseFloat(n.get("DELLmiOperationReference.V_EstimatedTime"))),i.push(l)),r.findInstances({isInstanceOf:n.id}).forEach(function(e){var t={};-1===s.indexOf(e.id)&&(s.push(e.id),t[R]=e.id,t[D]=e.get(f),t[w]=e.get(d),t[U]=e.get(m),t[v]=e.get(p),t[_]=Number(e.get(C)),o.push(t))}),t(n,i,o,a,s))})})},(r.isOperation(t.id)||r.isSystem(t.id))&&-1===o.indexOf(t.id)&&(o.push(t.id),l[R]=t.id,l[D]=t.get(f),l[v]=t.get(g),c=r.getSequencingModeAttrName(t.id),e.is(c)&&(l[W]=t.get(c)),e.is(t.get("DELLmiOperationReference.V_EstimatedTime"))&&(l[V]=parseFloat(t.get("DELLmiOperationReference.V_EstimatedTime"))),n.push(l)),s(t,n,i,o,a)},ae=function(n,i,o,a,s,c,l,g,m){var p,I=[],C=[];return p=t.getBehavior("MANUFACTURING","WUXNodeModelBehavior"),e.is(p)||(p=t.getBehavior("SBOM","WUXNodeModelBehavior")),(C=r.findConnections({type:j})).forEach(function(t){var o,s,c,l,g,m={},p=!1;-1===n.indexOf(t.id)&&((a.indexOf(t.getAttribute("to"))>-1||a.indexOf(t.getAttribute("from"))>-1)&&(p=!0),!0===p&&(1===(s=r.findInstances({PID:t.getAttribute(P)})).length&&((s=s[0]).get(d)!==i?1===r.findInstances({isInstanceOf:s.get(d)}).length&&(l=[r.findInstances({isInstanceOf:s.get(d)},1)[0].id,s.id]):l=[s.id]),1===(o=r.findInstances({PID:t.getAttribute(L)})).length&&((o=o[0]).get(d)!==i?null!==(g=r.findInstances({isInstanceOf:o.get(d)},1))&&(c=[g[0].id,o.id]):c=[o.id]),u.indexOf(o.get(f))>=0&&u.indexOf(s.get(f))>=0&&a.indexOf(l[l.length-1])>-1&&a.indexOf(c[c.length-1])>-1&&(m[R]=t.id,m[D]=j,m[N]=l,m[b]=c,m[B]=e.is(t.get(S))?t.get(S):"FALSE",m[w]=pe(l,c),I.push(m),n.push(t.id))))}),(C=r.findConnections({type:q})).forEach(function(t){var i={};o.indexOf(t.get(P))>-1&&c.indexOf(t.get(L))>-1&&-1===n.indexOf(t.id)&&(i[R]=t.id,i[D]=G,i[N]=e.is(t.get(P),"array")?t.get(P):[t.get(P)],i[b]=e.is(t.get(L),"array")?t.get(L):[t.get(L)],i[w]="",I.push(i),n.push(t.id))}),C=r.findConnections({type:J}),Ce=[...Se],C.forEach(function(t){var i,o,s,c={};-1===n.indexOf(t.id)&&(i=t.get(P)[t.get(P).length-1],a.indexOf(i)>-1&&(o=t.get(L)[t.get(L).length-1],l.indexOf(o)>-1&&(c[R]=t.id,c[D]=G,c[N]=e.is(t.get(P),"array")?t.get(P):[t.get(P)],c[b]=e.is(t.get(L),"array")?t.get(L):[t.get(L)],c[w]=Pe(t.get(P)[0]),e.is(t.get(h))&&"NULL"!==t.get(h)&&(c[T]=t.get(h)),I.push(c),n.push(t.id),s=r.getReferenceIdFromInstance(o),p.getNodeModel(s).forEach(function(t){let n,i=!1,a=!1,s=r.transformToRIROccurrencePath(t.getAbsolutePath());if(-1!==s.indexOf(o)){for(ye.push(s),n=0;n<Se.length;n++){if(e.equals(Se[n],s)){i=!0;break}if(me(Se[n],s)){a=!0;break}}if(i){for(n=0;n<Ce.length;n++)if(e.equals(Ce[n],s)){Ce.splice(n,1);break}}else if(a)for(n=0;n<Ce.length;n++)me(Ce[n],s)&&(Ce.splice(n,1),n--)}}))))}),I},ce=function(e){var t,n,i=[],o=[],s=[],c=[],l=[],u=[],f=[],g=[],d=[];try{return t=r.getReference(e.sysPID),n=r.getReference(e.scopedMfgItemPID),ne(n,s,c,i,o),s.length<=1&&a.getNLSValue("BuildUp.Error.NoMBOM"),c.length<=1&&a.getNLSValue("BuildUp.Error.NoMBOM"),oe(t,f,g,l,u),f.length<=1&&a.getNLSValue("BuildUp.Error.NoOperations"),g.length<=1&&a.getNLSValue("BuildUp.Error.NoOperations"),d=ae([],t.id,l,u,n.id,i,o),{version:"2.0",mfgItemReferences:s,mfgItemInstances:c,mfgOperationReferences:f,mfgOperationInstances:g,mfgResourceReferences:[],mfgResourceInstances:[],connections:d}}catch(e){console.error(e.stack),console.error(e.message)}},le=function(t,i,o){var r=this;return new Promise(function(a,c){var l,u={},f=null;n.notify("startProgress",u),i.sysPID===t&&s.connectBuildUpSession(t,i.scopedMfgItemPID).then(function(g){Ce=[],Se=[],ye=[],fe=g.initBuildupModelers,ge=g.processBuildUpAPI,l=e.is(Le.newBuildUpAPI)&&Le.newBuildUpAPI?ce(i):se(i),fe.load(JSON.stringify(l)).then(function(){f=s.retriveSessionIdForSelected(t,i.scopedMfgItemPID),n.notify("stopProgress",u),r.startEventListener(),ge.subscribeToBuildUpResultChange(function(e){console.log(e),o()}),a(f)},function(){n.notify("stopProgress",u),ue.call(r),c(f)})},function(){n.notify("stopProgress",u),ue.call(r),c(f)})})},ue=function(){fe=ge=ee=void 0,Ce=[],Se=[],ye=[],Te=0,e.is(this)&&this.stopEventListener()},{onStart:function(t){Le=e.extend(t,Le),Z=Ie.getCommandCheckHeader("BuildUpReviewModeCmd",he)},onStop:function(){s.resetAllSessions()},getBuildUpCmd:function(){return Z},initBuildUpSession:function(e,t,n){return le.call(this,e,t,n)},retriveActiveSession:function(){return{session:s.retriveActiveSession()}},retriveActiveSessionId:function(){return s.retriveActiveSessionId()},resetActiveSession:function(){e.is(this)?ue.call(this):ue()},resetAllSessions:function(){e.is(this)?ue.call(this):ue(),s.resetAllSessions()},getContextItemRIRPaths:function(){return Ce},databasePlugin:r,delPXPSessionPlugin:s,startEventListener:function(){var n=s.retriveActiveSession();e.is(n)&&null!==n&&(Oe.push(t.addExternalListener("startProgress",this.onStartProgress)),Oe.push(t.addExternalListener("stopProgress",this.onStopProgress)))},stopEventListener:function(){for(let e=0;e<Oe.length;e++)t.removeExternalListener(Oe[e])},onStartProgress:function(){1==++Te&&(Fe=c.subscribeToModelChanges(Re),ee=fe.createPXPTransaction(),Ne(ee))},onStopProgress:function(){0==--Te&&(c.unSubscribeToModelChanges(Fe),fe.commitTransaction(ee).then(e=>{console.log(e)}).catch(e=>{console.log(e)}))}}}}}),define("DS/DELPPWModelBehaviors/ResourceParameterPlanBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DicoPlugin","DatabasePlugin","WebServicePlugin","AttributePlugin","ResourcePlugin"],creator:function(t,n,i,o,r,a,s){var c,l={},u=!1,f="DELResourcePrmPlanSET",g="DELResourcePrmPlanGET",d=[f,g],m={},p={},P="PLMSpecifyHowToResourcePlanCnx_Custo";return l={attributesToFetch:[{type:"PLMEntity",attributes:["PLM_ExternalID","V_description"]},{type:"BusinessType",attributes:["organization","project","reservedby","originated","modified"]},{type:"DELExtTargetValuesInteger",attributes:["V_RPPMaxValue","V_RPPMinValue","V_PossibleValues","V_RPPRscMinValue","V_RPPRscMaxValue"]},{type:"DELExtControlLimitsInteger",attributes:["V_RPPMaxControlValue","V_RPPMinControlValue"]},{type:"DELExtTargetValuesText",attributes:["V_PossibleValues"]}],customRPPAttributes:["V_RPPMode","V_RPPMagnitude","V_RPPValue","V_RPPMinValue","V_RPPMaxValue","V_RPPRscMinValue","V_RPPRscMaxValue","V_RPPRichText","V_RPPTitle","V_RPPMaxValue_Inclusive","V_RPPMinValue_Inclusive","V_RPPMinControlValue","V_RPPMinControlValue_Inclusive","V_RPPMaxControlValue","V_RPPMaxControlValue_Inclusive","V_PossibleValues","GETCustoExten","SETCustoExten"]},c=function(t){var n,i=P+"."+t;switch(n={Name:t,NLS:s.getNLSValue(i),Type:"String",Protection:2,MultiValuated:"No",HasRangeDefined:"No",DefaultValue:"",MaxLength:256,Magnitude:"",ManipulationUnit:"",MultiLine:"No",UIAccess:"",HasDefault:"Yes"},t){case"GETCustoExten":n.MultiValuated="Yes",n.HasRangeDefined="Yes",n.HasDefault="No",n.AuthorizedValues=[],e.is(p[g])&&p[g].forEach(function(e){n.AuthorizedValues.push({Name:e.Name,NLS:e.Nls})});break;case"SETCustoExten":n.MultiValuated="Yes",n.HasRangeDefined="Yes",n.HasDefault="No",n.AuthorizedValues=[],e.is(p[f])&&p[f].forEach(function(e){n.AuthorizedValues.push({Name:e.Name,NLS:e.Nls})})}return n},{listenTo:function(){return{moveResourceParameterRow:this.moveResourceParameterRow}},onStart:function(){u=!1},onStop:function(){u=!1},deleteResourceParameterRows:function(t,i,a){var c,l,u={};n.notify("startProgress",u),c={resourceParameterPlanPID:t,resourceParameterPlanRowPID:i},l={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/ResourceParameterPlanRow",method:"DELETE",context:this,data:e.Json.encode(c),onComplete:function(t){e.is(t)&&e.is(t.deletedObjects)&&(o.removeReference(t.deletedObjects[0]),e.is(a)&&e.is(a.onComplete)&&a.onComplete(t.deletedObjects[0])),n.notify("stopProgress",u)},onFailure:function(){e.is(a)&&e.is(a.onFailure)&&a.onFailure(),n.notify("stopProgress",u),n.info(s.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Success"))}},r.webServiceRequest(l)},fetchRPPAttrInfos:function(t){var i,o,f,g;g=function(){u=!0,e.is(t,"function")&&t()},u?g():(f=function(e){var t={},n={};l.customRPPAttributes.forEach(function(e){var i=P+"."+e,o=c(e);n[i]=o.NLS,t[i]=o}),s.addNlsJSON(n),a.addAttributeInfo(t),e()},o=function(t,i){var o={},c=e.clone(l.attributesToFetch);n.notify("startProgress",o),r.webServiceRequest({url:"dictionary/properties",method:"POST",onComplete:function(e){var i={},r={};e.forEach(function(e){e.info.forEach(function(t){var n=e.type+"."+t.Name;r[n]=t.NLS,i[n]=t})}),s.addNlsJSON(r),a.addAttributeInfo(i),n.notify("stopProgress",o),t()},onFailure:function(){n.notify("stopProgress",o),i()},onTimeout:function(){n.notify("stopProgress",o),i()},data:e.Json.encode(c)})},new Promise(function(t,i){var o={},a={types:d};n.notify("startProgress",o),r.webServiceRequest({url:"dsmfg/private/V0/invoke/MfgProcess/WKI/getCustoExtnInfo",method:"POST",data:e.Json.encode(a),onComplete:function(e){Object.keys(e).forEach(function(t){m[t]=e[t].DeploymentExtn,p[t]=e[t].CustoExtn,Array.isArray(m[t])&&m[t].length>0&&m[t].forEach(function(e){l.attributesToFetch.push({type:e.Name,attributes:e.Attributes})}),Array.isArray(p[t])&&p[t].length>0&&p[t].forEach(function(e){l.attributesToFetch.push({type:e.Name,attributes:e.Attributes})})}),n.notify("stopProgress",o),t()},onFailure:function(){n.notify("stopProgress",o),t()},onTimeout:function(){n.notify("stopProgress",o),t()}})}).then(function(){i=[new Promise(o),new Promise(f)],Promise.all(i).then(g,g)}))},getObjectAndAttributeInfos:function(e){return a.getObjectAndAttributeInfos(e)},getAttributeInfo:function(e,t){return a.getAttributeInfo(e,t)},getResourceParameterRows:function(t,i,a){var s,c,l={};n.notify("startProgress",l),c={resourceParameterPlanPID:t,resourceParameterPlanRIRPath:o.transformToRIROccurrencePath(i.rppPath),resourceParameterLists:e.is(i.resourceParameterListIds)?i.resourceParameterListIds:"",resourceParameterObj:e.is(i.resourceParameterListObj)?i.resourceParameterListObj:"",resourcePID:e.is(i.resourceRefs)?i.resourceRefs:""},s={data:e.Json.encode([c]),url:"dsmfg/private/V0/invoke/MfgProcess/WKI/GetResourceParameterPlanRows",method:"POST",context:this,onComplete:function(t){e.is(t)&&e.is(t.rows)&&t.rows.length>0&&(t.rows.forEach(e=>{"NotSet"===e.V_RPPMinControlValue_Inclusive&&(e.V_RPPMinControlValue=""),"NotSet"===e.V_RPPMaxControlValue_Inclusive&&(e.V_RPPMaxControlValue=""),"NotSet"===e.V_RPPMinValue_Inclusive&&(e.V_RPPMinValue=""),"NotSet"===e.V_RPPMaxValue_Inclusive&&(e.V_RPPMaxValue=""),!1===e.V_RPPValueStatus&&(e.V_RPPValue="")}),o.addToCollections({stackedReferences:t.rows,onComplete:function(t){e.is(a)&&e.is(a.onComplete)&&a.onComplete(t.instancesAndReferences)}})),n.notify("stopProgress",l)},onFailure:function(){e.is(a)&&e.is(a.onFailure)&&a.onFailure(),n.notify("stopProgress",l)}},r.webServiceRequest(s)},isResourceParameterRow:function(e){var t=e.get("type");return["DELResourcePrmPlanSET","DELResourcePrmPlanGET"].includes(t)},isResourceParameterPlan:function(e){return i.isAKindOf(e,"DELResourceParameterPlanReference")},getAuthorizedValueIndex:function(e,t,n){return a.getAuthorizedValueIndex(e,t,n)},getAuthorizedValueDB:function(e,t){return a.getAuthorizedValueDB(e,t)},getAuthorizedValue:function(e,t,n){return a.getAuthorizedValue(e,t,n)},getDeploymentExtnInfo:function(t){return e.clone(m[t])},getCustoExtnInfo:function(t){return e.clone(p[t])},getDeploymentExtn:function(t){var n=this.getDeploymentExtnInfo(t),i=[];return e.is(n)&&n.forEach(function(e){i.push({Name:e.Name,Nls:e.Nls})}),i},getCustoExtn:function(t){var n=this.getCustoExtnInfo(t),i=[];return e.is(n)&&n.forEach(function(e){i.push({Name:e.Name,Nls:e.Nls})}),i},getDeploymentExtnAttr:function(t){var n=this.getDeploymentExtnInfo(t),i=[];return e.is(n)&&n.forEach(function(t){(e.is(t.Attributes)?t.Attributes:[]).forEach(function(e){i.push(t.Name+"."+e)})}),i},getCustoExtnAttr:function(t){var n=this.getCustoExtnInfo(t),i=[];return e.is(n)&&n.forEach(function(t){(e.is(t.Attributes)?t.Attributes:[]).forEach(function(e){i.push(t.Name+"."+e)})}),i},getWidgetPreferenceValue:function(e){return widget.getValue(e)},setWidgetPreferenceValue:function(e,n){t.getService("ConfigService").setPreference(e,n)},moveResourceParameterRow:function(t,i,a,c){var l,u,f={};e.is(t)&&e.is(i)&&e.is(a)&&(l={resourceParameterPlanPID:String(t),resourceParameterPlanRowPID:String(i),newIndex:a},n.notify("startProgress",f),u={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/ResourceParameterPlanRow/Move",method:"POST",context:this,data:e.Json.encode(l),onComplete:function(t){e.is(t)&&Array.isArray(t.rows)&&o.addToCollections({stackedReferences:t.rows,silentMode:!1,onComplete:function(){n.notify("stopProgress",f),e.is(c)&&e.is(c.onComplete)&&c.onComplete()}})},onFailure:function(){n.notify("stopProgress",f),n.warn(s.getNLSValue("WUXResourceParameterRowDragDrop.ReorderFailure")),e.is(c)&&e.is(c.onFailure)&&c.onFailure()}},r.webServiceRequest(u))},updateResourceParameterRow:function(t,i,a){var c,l,u,f={};e.is(t)&&e.is(i)&&(e.is(i.V_RPPValue)?i.V_RPPValue=Array.isArray(i.V_RPPValue)?i.V_RPPValue[0]:""===i.V_RPPValue?null:i.V_RPPValue:i.V_RPPValue=null,c=e.is(t.rppPath)?o.transformToRIROccurrencePath(t.rppPath):"",l={resourceParameterPlanPID:e.is(t.resourceParameterPlanPID)?t.resourceParameterPlanPID:"",resourceParameterPlanRowPID:e.is(t.resourceParameterRowPID)?t.resourceParameterRowPID:"",resourcePID:e.is(t.resourcePID)?t.resourcePID:"",resourceParameterListPID:e.is(t.resourceParameterListPID)?t.resourceParameterListPID:"",resourceParameterPID:e.is(t.resourceParameterPID)?t.resourceParameterPID:"",resourceParameterPlanRowAttrs:e.is(i)?i:"",resourceParameterPlanRIRPath:c},n.notify("startProgress",f),u={data:e.Json.encode(l),url:"dsmfg/private/V0/invoke/MfgProcess/WKI/ResourceParameterPlanRow",method:"PUT",onComplete:function(t){e.is(t)&&("NotSet"===t.V_RPPMaxControlValue_Inclusive&&(t.V_RPPMaxControlValue=null),"NotSet"===t.V_RPPMinControlValue_Inclusive&&(t.V_RPPMinControlValue=null),"NotSet"===t.V_RPPMaxValue_Inclusive&&(t.V_RPPMaxValue=null),"NotSet"===t.V_RPPMinValue_Inclusive&&(t.V_RPPMinValue=null),e.is(t.V_RPPValueStatus)&&!1===t.V_RPPValueStatus&&(t.V_RPPValue=""),o.addToCollections({stackedReferences:[t],silentMode:!1,onComplete:function(t){n.notify("stopProgress",f),n.info(s.getNLSValue("ResourceParametersMgmtDialog.UpdateSuccess")),e.is(a)&&e.is(a.onComplete)&&a.onComplete(t.instancesAndReferences[0])}}))},onFailure:function(){n.notify("stopProgress",f),n.warn(s.getNLSValue("ResourceParametersMgmtDialog.UpdateFailure"))}},r.webServiceRequest(u))},createResourceParameterRow:function(t,i,a){var c,l,u,f={};u=o.transformToRIROccurrencePath(a.rppPath),e.is(t)&&e.is(i)&&(i.forEach(t=>{e.is(t.V_RPPMagnitude)&&(t.V_RPPMagnitude=t.V_RPPMagnitude.labelValue),e.is(t.V_RPPMagnitude)&&e.is(t.V_RPPUnit)&&(t.unit=s.getLabelForUnit(t.V_RPPMagnitude,t.V_RPPUnit))}),c={resourceParameterPlanPID:t,resourceParameterPlanRIRPath:u,resourceParameterPlanParameters:i},n.notify("startProgress",f),l={data:e.Json.encode([c]),url:"dsmfg/private/V0/invoke/MfgProcess/WKI/ResourceParameterPlanRow",method:"POST",onComplete:function(t){e.is(t)&&e.is(t.rows)&&t.rows.length>0&&(t.rows.forEach(e=>{"NotSet"===e.V_RPPMinControlValue_Inclusive&&"NotSet"===e.V_RPPMaxControlValue_Inclusive&&(e.V_RPPMinControlValue="",e.V_RPPMaxControlValue="",e.V_RPPValue=null),"NotSet"===e.V_RPPMinValue_Inclusive&&"NotSet"===e.V_RPPMaxValue_Inclusive&&(e.V_RPPMinValue="",e.V_RPPMaxValue="",e.V_RPPValue=null)}),o.addToCollections({stackedReferences:t.rows,silentMode:!1,onComplete:function(e){n.info(s.getNLSValue("ResourceParametersMgmtDialog.CreateSuccess")),n.notify("addResourceParamRef",[e.instancesAndReferences])}})),n.notify("stopProgress",f)},onFailure:function(){n.notify("stopProgress",f),n.warn(s.getNLSValue("ResourceParametersMgmtDialog.CreateFailure")),e.is(a)&&e.is(a.onFailure)&&a.onFailure()}},r.webServiceRequest(l))},getNLSForUnit:function(e,t){return s.getNLSForUnit(e,t)},getLabelForUnit:function(e,t){return s.getLabelForUnit(e,t)},getNodeOptions:function(t,i){var o,r,a,c,u={},f=l.customRPPAttributes||[],g=t.V_RPPMagnitude,d=n.getPreferenceValue("separator"),m=t,p=["V_RPPMode","V_RPPRichText","V_RPPUnit","V_TreeOrder","V_MinControlValue_Inclusive","V_MaxControlValue","V_MaxControlValue_Inclusive","V_MinControlValue"],P=["V_RPPMinValue_Inclusive","V_RPPMaxValue_Inclusive"],L={referencePID:t.PID,grid:u};for(r in m)Object.prototype.hasOwnProperty.call(m,r)&&(o=r.contains(".")?r.split(".")[1]:r,a=f.indexOf(o)>-1?"PLMSpecifyHowToResourcePlanCnx_Custo."+o:r,p.includes(o)?u[a]="NULL"!==m[r]?m[r]:"":"V_RPPMinValue"===o||"V_RPPMaxValue"===o||"V_RPPMinControlValue"===o||"V_RPPMaxControlValue"===o||"V_RPPValue"===o||"V_RPPRscMinValue"===o||"V_RPPRscMaxValue"===o?u["PLMSpecifyHowToResourcePlanCnx_Custo."+o]=m[r]:"V_RPPMinControlValue_Inclusive"===o||"V_RPPMaxControlValue_Inclusive"===o?"Excluded"===m[r]?u["PLMSpecifyHowToResourcePlanCnx_Custo."+o]=!1:"Included"===m[r]?u["PLMSpecifyHowToResourcePlanCnx_Custo."+o]=!0:u["PLMSpecifyHowToResourcePlanCnx_Custo."+o]=!1:"V_RPPMagnitude"===o?(g=m[r],u[a]={iconPath:s.getIconURLFromKey("DCMagnitude."+g),label:s.getNLSValue(g)}):"V_RPPTitle"===o?t.validResourceLinkExists?u["PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle"]={iconPath:"",label:"NULL"!==m[r]?m[r]:""}:u["PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle"]={iconPath:s.getIconURLFromKey("MarkUp"),label:""}:"V_PossibleValues"===o&&e.is(m[r],"array")?u["PLMSpecifyHowToResourcePlanCnx_Custo.V_PossibleValues"]=m[r].join(d):P.includes(o)&&("Excluded"===m[r]?u[a]=!1:"Included"===m[r]?u[a]=!0:u[a]="NotSet"));e.is(g)&&Object.prototype.hasOwnProperty.call(u,"V_RPPUnit")&&(u.V_RPPUnit=this.getNLSForUnit(g,u.V_RPPUnit)),["PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMinValue_Inclusive","PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPMaxValue_Inclusive"].forEach(function(e){Object.prototype.hasOwnProperty.call(u,e)||(c=e.replace("_Inclusive",""),delete u[c])});let h=m.type,I=this.getDeploymentExtnAttr(h),S=this.getCustoExtnAttr(h),C=[];for(r in C=Array.isArray(I)?C.concat(I):C,C=Array.isArray(S)?C.concat(S):C,m)Object.prototype.hasOwnProperty.call(m,r)&&C.includes(r)&&(u[r]="NULL"!==m[r]?m[r]:"");return L}}}}}),define("DS/DELPPWModelBehaviors/CapableResourceLinkBehaviour",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","DicoPlugin","ResourcePlugin"],creator:function(t,n,i,o,r){var a,s,c,l,u;return l=function(t,i,o,r){o=o||{},n.info(i,r),n.notify("stopProgress",t),e.is(o.onComplete,"function")&&o.onComplete.call(null,i)},u=function(t,i,o,r,a){r=r||{},e.is(o,"string")&&(i+="\n"+o),n.warn(i,a),n.debug(i),n.notify("stopProgress",t),e.is(r.onFailure,"function")&&r.onFailure.call(null,i)},a=function(t){var n=t.get("PID"),o=t.get("type"),r=t.get("DELAsmProcessCanUseCnx.V_IsPreferred"),a=t.get("from"),s=t.get("to"),c=t.get("DELLmiEstimatedTime.V_EstimatedTime"),l=i.getReference(a),u=i.getReference(s),f=e.is(l)?l.get("type"):null,g=e.is(u)?u.get("type"):null,d=e.is(l)?l.get("PLMEntity.V_Name"):null,m=e.is(u)?u.get("PLMEntity.V_Name"):null,p=e.is(t.get("ResourceUsage"))?t.get("ResourceUsage"):null,P=e.is(p)?i.getInstance(p):null;return{connPID:n,isPreferred:"DELAsmProcessCanUseCnx"===o?r:"",fromPID:a,toPID:s,estimatedTime:c,fromType:f,toType:g,fromName:d,toName:m,resourceUsage:e.is(P)?P.get("PLMInstance.PLM_ExternalID"):"",resourceUsagePID:p}},s=function(e){var t=[];return i.getImpacted(e,!1,{relationTypes:["DELAsmProcessCanUseCnx"]}).forEach(function(e){t.push(a(e))}),t},c=function(t,n,o){var r,a,s,c,l,u,f,g,d=!1;return r=e.is(o)?i.getInstance(o):null,a=e.is(r)?r.get("isAggregatedBy"):null,s=i.getReference(t),c=e.is(a)?i.getReference(a):null,l=i.getReference(n),u=s.get("PPRTYPE"),f=e.is(c)?c.get("PPRTYPE"):null,g=l.get("PPRTYPE"),"OPERATION"===u&&"SYSTEM"===f&&"RESOURCE"===g&&(d=!0),d},{listenTo:function(){},onStart:function(){},onStop:function(){},checkType:function(e,t){return i.getReference(e).get("PPRTYPE")===t},checkParentType:function(e,t){var n=i.getInstance(e).get("isAggregatedBy");return i.getReference(n).get("PPRTYPE")===t},getCapableRscStructureLinkOfAncestor:function(e){var t,n,o=[],r={relationTypes:["CapableResourcesStructureLink"]};for(t=e.length-2;t>=0&&1!==(o=i.getImpacted(e[t],!1,r)).length;t--);return e.length>0&&1!==o.length&&(n=i.getInstance(e[0]).get("isAggregatedBy"),o=i.getImpacted(n,!1,r)),1===o.length?o[0]:null},canCreatePrimaryCapableRscLink:function(t){var n,a,s,l,u,f,g,d,m,p,P="DELAsmProcessCanUseCnx",L=!0,h={};return n=t.fromSideRefPID,a=t.toSideRefPID,s=t.fromSideInstPID,l=t.toSideInstPID,u=t.fromSideAbsPath,f=t.toSideRootRefPID,m=i.getReferenceModel(n),o.isAKindOf(m,"DELLmiHeaderWorkPlanReference")||o.isAKindOf(m,"DELLmiServiceHeaderWorkPlanReference")?(L=!1,p=r.getNLSValue("CapableResourceLinkBehaviour.canCreatePrimaryCapableRscLinkError.ProcessIsHeaderWP")):i.hasConnection({from:n,to:a,type:"DELAsmProcessCanUseCnx"})&&(L=!1,p=r.getNLSValue("CapableResourceLinkBehaviour.canCreatePrimaryCapableRscLinkError.LinkAlreadyExists")),h={canCreateLink:L},L?(h.data=e.merge({type:P,displayText:r.getNLSValue(P,null,"CreateLink"),buttonIdentifier:r.getNLSValue(P,null,"CreateLink")},e.clone(t)),c(n,a,s)&&(g=this.getCapableRscStructureLinkOfAncestor(u),d=e.is(g)?g.get("to"):null,h.data.connectionParams={resourceAreaID:d,rscInstPID:e.is(d)&&d===f?l:null,operationRIRPath:e.is(d)?i.transformToRIROccurrencePath(u).toString():null})):h.errorMessage=p,h},canCreateSecondaryCapableRscLink:function(t){var n,o,l,u,f,g,d,m,p="SecondaryCandidateResourceLink",P=[],L={};return L={canCreateLink:!1,data:[]},n=t.fromSideRefPID,o=t.toSideRefPID,l=t.fromSideInstPID,u=t.fromSideAbsPath,d=c(n,o,l),f=this.getCapableRscStructureLinkOfAncestor(u),g=e.is(f)?f.get("to"):null,e.is(t.connectionParams)&&e.is(t.connectionParams.primaryResourceLinkPID)?(m=i.getConnection(t.connectionParams.primaryResourceLinkPID),P.push(a(m))):P=s(n),P.forEach(function(n){var a,s;o!==n.toPID&&(s={primaryResourceLinkPID:n.connPID},d&&(s=e.merge(s,{resourceAreaID:g,operationRIRPath:e.is(g)?i.transformToRIROccurrencePath(u).toString():null})),a=e.merge({type:p,displayText:r.getNLSValue(p,{primaryResource:n.toName},"CreateLink"),connectionParams:s,buttonIdentifier:n.connPID},e.clone(t)),L.data.push(a),L.canCreateLink||(L.canCreateLink=!0))}),L},canCreateCapableResourcesStructureLink:function(e){var t,n=!0;return t=i.getReferenceModel(e),(o.isAKindOf(t,"DELLmiWorkPlanSystemReference")||o.isAKindOf(t,"DELLmiQtyControlProcessReference ")||o.isAKindOf(t,"DELLmiServiceWorkPlanSystemReference"))&&i.getImpacted(e,!0,{relationTypes:["CapableResourcesStructureLink"]}).length>0&&(n=!1),n},canCreateAssetsStructureLink:function(t){var n,a,s,c,l,u,f="DELAssetsStructureLink",g=!0,d={};return n=t.fromSideRefPID,a=t.toSideRefPID,s=i.getReferenceModel(n),c=i.getReferenceModel(a),(o.isAKindOf(s,"DELLmiHeaderWorkPlanReference")||o.isAKindOf(s,"DELLmiServiceHeaderWorkPlanReference")||o.isAKindOf(s,"DELLmiWorkPlanSystemReference")||o.isAKindOf(s,"DELLmiServiceWorkPlanSystemReference"))&&o.isAKindOf(c,"Organizational")?i.hasConnection({from:n,to:a,type:"DELAssetsStructureLink"})?(g=!1,l=r.getNLSValue("CapableResourceLinkBehaviour.canCreateAssetsStructureLink.LinkAlreadyExists")):i.hasConnection({from:n,type:"DELAssetsStructureLink"})?(g=!0,u=r.getNLSValue(f,null,"CreateLink")+" "+r.getNLSValue("AuthorLinks.LinkExistsReplace")):g=!0:g=!1,d={canCreateLink:g},g?d.data=e.merge({type:f,displayText:r.getNLSValue(f,null,"CreateLink"),buttonIdentifier:r.getNLSValue(f,null,"CreateLink"),linkExistsInfoMessage:u},e.clone(t)):d.errorMessage=l,d},createConnection:function(t,o,a,s){var c,l,u,f,g,d,m,p;switch(o=o||{},u=(t=t||{}).fromSideRefPID,f=t.toSideRefPID,g=t.type,d={linkType:g,target:u,source:f},m=function(t,o){var r;e.is(o.instancesAndReferences,"array")&&o.instancesAndReferences.length>0&&i.addInstance(o.instancesAndReferences[0]),"DELAsmProcessCanUseCnx"!==t.get("type")&&"SecondaryCandidateResourceLink"!==t.get("type")||(r={linkPID:t.get("PID")},n.notify("updateResourceUsage",r)),e.is(o.deletedConnections,"array")&&o.deletedConnections.length>0&&o.deletedConnections.forEach(function(e){i.removeConnection(e)}),e.is(a,"function")&&a(d)},p=function(){e.is(s,"function")&&s(d)},t.type){case"DELAsmProcessCanUseCnx":l=this.canCreatePrimaryCapableRscLink(t);break;case"SecondaryCandidateResourceLink":l=this.canCreateSecondaryCapableRscLink(t),Array.isArray(l.data)&&l.data.length>=1&&(l.data=l.data[0]);break;case"DELAssetsStructureLink":l=this.canCreateAssetsStructureLink(t);break;default:l={canCreateLink:!1,errorMessage:r.getNLSValue("CapableResourceLinkBehaviour.createConnectionError.InvalidInputs")}}l.canCreateLink?(o=o||{},c={onFailure:p,onTimeout:p,onCancel:p,onComplete:m},i.createConnection({IDFrom:u,IDTo:f,type:g,connectionParams:l.data.connectionParams},e.merge(c,o))):(d.errorMessage=l.errorMessage,p())},createCapableResourceStructureLink:function(t,o){var a,s,c,f={},g="CapableResourcesStructureLink",d=function(e,t,n){return r.getNLSValue(e,{linkType:g,target:t,source:n})};return o=o||{},s={onFailure:function(){var e=i.getReferenceModel(t).get("PLMEntity.V_Name");u(f,d("CreateLink.CapableResourcesStructureLink.Failure",e,null),null,o,c)},onComplete:function(e){var t=i.getReferenceModel(e.get("from")),n=i.getReferenceModel(e.get("to")),r=t.get("PLMEntity.V_Name"),a=n.get("PLMEntity.V_Name");l(f,d("CreateLink.Success",r,a),o,c)}},a={type:g,IDFrom:t},n.notify("startProgress",f),c=n.log(r.getNLSValue("CreateLink.LogMessage")),i.createConnection(a,e.merge(s,o))},packConnInfo:function(e){return a(e)},getPrimaryResourceLinksInfo:function(e){return s(e)},getConnectedObjects:function(t,o,r,a,s){var c=[],l=s||{},u=!!e.is(l.isCrossHighlight)&&l.isCrossHighlight,f=!e.is(l.isComputeIndirectConnectedObject)||l.isComputeIndirectConnectedObject;return e.is(a)&&(a=Array.isArray(a)?a:[a]).forEach(function(o){var r,a,s,l,g,d=o.get("type"),m=o.get("PID"),p=o.get("from"),P=o.get("to");switch(d){case"CapableResourcesStructureLink":g=p===t?P:p,c.push(g);break;case"DELAsmProcessCanUseCnx":r=p,a=P,s=o.get("ResourceUsage"),g=r===t?u&&e.is(s)?s:a:r,c.push(g),f&&i.getImpacted(m,!1,{relationTypes:["SecondaryCandidateResourceLink"]}).forEach(function(t){var n=t.get("to"),i=t.get("ResourceUsage");c.push(u&&e.is(i)?i:n)});break;case"SecondaryCandidateResourceLink":l=i.getConnection(p),e.is(l)&&(r=l.get("from"),c.push(r),f&&(a=l.get("to"),s=l.get("ResourceUsage"),c.push(u&&e.is(s)?s:a)));break;case"DELAssetsStructureLink":g=p===t?P:p,c.push(g);break;default:n.debug("Invalid Type")}}),c},getIsPreferred:function(e){return e.get("DELAsmProcessCanUseCnx.V_IsPreferred")}}}}}),define("DS/DELPPWModelBehaviors/DocumentBehavior",[],function(){"use strict";return{plugins:["DocumentPlugin","ResourcePlugin","DicoPlugin","PlatformPlugin"],creator:function(e,t,n,i,o,r){var a,s;return a=function(e,n,i){i=i||{},t.info(n),t.notify("stopProgress",e),UWA.is(i.onComplete,"function")&&i.onComplete.call(null,n)},s=function(e,n,i,o){o=o||{},UWA.is(i)&&UWA.is(i.message,"string")&&(n+="\n"+i.message),t.warn(n),t.notify("stopProgress",e),UWA.is(o.onFailure,"function")&&o.onFailure.call(null,n)},{listenTo:function(){return{}},onStart:function(){},onStop:function(){},getDocumentTypes:function(){return n.getDocumentTypes()},getDocumentsPolicies:function(e){n.getDocumentsPolicies({onComplete:function(t){e(t)},onFailure:function(){t.warn(i.getNLSValue("Document.FetchDocPolicyFailed"))}})},getDocument:function(e){return n.getDocument(e)},isDocConnection:function(e){return n.isDocConnection(e)},addDocumentConnection:function(e,t,i,o){return n.addDocumentConnection(e,t,i,o)},addDocument:function(e,t){return n.addDocument(e,t)},uploadDocument:function(e,o,r,c){var l,u=this,f=r.shift(),g={},d={};t.notify("startProgress",g),l=function(l){var f=l[0],m={id:f};n.linkWithDocumentID(e,f,{onComplete:function(){n.addDocumentConnection(e,f),u.attachFile(m,r,{silent:!0,onComplete:function(){a(g,i.getNLSValue("Document.UploadDocSucceeded",{document:o.title})),UWA.is(c)&&c()},onFailure:function(){s(g,i.getNLSValue("Document.UploadDocPartialSuccess",{document:o.title}))}}),t.notify("attachDocument",d)},onFailure:function(e){n.deleteDocument(f),s(g,i.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(UWA.result(e,"message"))}))}})},u.attachFile(o,f,{silent:!0,onComplete:l,onFailure:function(e){s(g,i.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(UWA.result(e,"message"))}))}})},attachDocuments:function(e,r){var c={},l={};t.notify("startProgress",c),n.getDocumentInfo(r,{onComplete:function(r){var u,f,g;for(u=0;u<r.data.length;u++)f=r.data[u],g={onComplete:function(){n.addDocument(this),n.addDocumentConnection(e,this.id),a(c,i.getNLSValue("Document.UploadDocSucceeded",{document:this.dataelements.title})),t.notify("attachDocument",l)}.bind(f),onFailure:function(e){s(c,i.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(UWA.result(e,"message"))}))}},"DOCUMENT"!==o.getPPRType(f.type)?t.warn(i.getNLSValue("Document.SelectionNotSupported",{type:f.type})):n.linkWithDocumentID(e,f.id,g)},onFailure:function(e){s(c,i.getNLSValue("Document.UploadDocFailed",{message:UWA.Json.encode(UWA.result(e,"message"))}))}})},fetchDocuments:function(e,i){n.getDocumentID(e,{onComplete:function(o){if(Array.isArray(o)&&o.length>0){const r=new Set;o.forEach(e=>{r.add(e.PID)}),n.getDocumentInfo([...r],{onComplete:function(r){var a,s=[];for(n.getConnectedDocumentPIDs(e).forEach(function(t){const[i,,o]=t.split("|");n.removeDocumentConnection(e,o,i,{silent:!0})}),a=0;a<r.data.length;a++){const e=r.data[a];s.push(n.addDocument(e))}o.forEach(t=>{n.addDocumentConnection(e,t.PID,t.type,{silent:!0})}),t.notify("documentAdded",[[e]]),i(s)},onFailure:function(){i()}})}else 0===o.length&&i(o)},onFailure:function(){i()}})},downloadDocument:function(e){var o=n.getDocument(e),r={};t.notify("startProgress",r),n.downloadDocuments(e,{onComplete:function(){a(r,i.getNLSValue("Document.DownloadDocSucceeded",{document:o.get("dataelements").title}))},onFailure:function(e){s(r,i.getNLSValue("Document.DownloadDocFailed",{document:o.get("dataelements").title,message:UWA.Json.encode(UWA.result(e,"message"))}))}})},deleteDocument:function(e,o){var r=n.getDocument(o),c={};t.notify("startProgress",c),n.deleteLink(e,o,{onComplete:function(){n.removeDocumentConnection(e,o),0===n.getDocumentConnectionsByDocID(o).length&&n.removeDocument(o),a(c,i.getNLSValue("Document.DeleteDocLinkSucceeded",{document:r.get("dataelements").title}))},onFailure:function(e){s(c,i.getNLSValue("Document.DeleteDocLinkFailed",{document:r.get("dataelements").title,message:UWA.Json.encode(UWA.result(e,"message"))}))}})},attachFile:function(o,r,c){var l,u,f,g=[],d={};if(c=c||{},r=UWA.is(r,"array")?r:[r],UWA.is(c.silent,"boolean")&&c.silent||t.notify("startProgress",d),!UWA.is(o.id)&&r.length>1)return e.getLogger().debug("if documentID is not provided only one file can be added"),void(UWA.is(c.onFailure)&&c.onFailure());for(l=0;l<r.length;l++)f=r[l],u=new Promise(function(e,t){n.attachFile(this.docInfo,this.fileInfo,{onComplete:function(t){var i;UWA.is(o.id)?(i=n.getDocument(o.id)).addFile(t.data[0].relateddata.files[0]):i=n.addDocument(t.data[0]),e(i.id)},onFailure:function(e){t(e)}})}.bind({docInfo:o,fileInfo:f})),g.push(u);Promise.all(g).then(function(e){UWA.is(c.silent,"boolean")&&c.silent?UWA.is(c.onComplete)&&c.onComplete(e):a(d,i.getNLSValue("Document.AttachFileSuccess"))},function(e){UWA.is(c.silent,"boolean")&&c.silent?UWA.is(c.onFailure)&&c.onFailure(e):s(d,i.getNLSValue("Document.AttachFileFailed")+UWA.Json.encode(UWA.result(e,"error")))})},downloadFile:function(e,o,r){var c={};t.notify("startProgress",c),n.downloadFile(e,o,{onComplete:function(){a(c,i.getNLSValue("Document.DownloadFileSucceeded",{file:r}))},onFailure:function(e){s(c,i.getNLSValue("Document.DownloadFileFailed",{file:r,message:UWA.Json.encode(e)}))}})},modifyFile:function(e,o,r){var c={};t.notify("startProgress",c),n.modifyFile(e,o,{onComplete:function(o){n.getDocument(e.id).modifyFile(o.data[0].relateddata.files[0]),a(c,i.getNLSValue("Document.ModifyFileSucceeded",{file:r})),t.notify("editDocument",{})},onFailure:function(e){s(c,i.getNLSValue("Document.ModifyFileFailed",{file:r,message:UWA.Json.encode(e)}))}})},removeFile:function(e,o){var r={};t.notify("startProgress",r),n.removeFile(e,o,{onComplete:function(){n.getDocument(e).removeFile(o),a(r,i.getNLSValue("Document.RemoveFileSuccess"))},onFailure:function(e){s(r,i.getNLSValue("Document.RemoveFileFailure")+UWA.Json.encode(e))}})},viewFile:function(e,t,o){n.fetchFileURL(e,t,{onComplete:function(e){window.open(e,i.getNLSValue("Document.ViewFile",{title:o}),"fullscreen=no")}})},getFileCommands:function(){return r.isCloud()?{document:{authoring:["Download","Update","Delete"],nonAuthoring:["Download"]},file:{authoring:["DownloadFile","ModifyFile","RemoveFile","ViewFile"],nonAuthoring:["DownloadFile","ViewFile"]}}:{document:{authoring:["Download","Update","Delete","Explore"],nonAuthoring:["Download","Explore"]},file:{authoring:["DownloadFile","ModifyFile","RemoveFile","ViewFile"],nonAuthoring:["DownloadFile","ViewFile"]}}},removeDocumentConnection:function(e,t,i,o){return n.removeDocumentConnection(e,t,i,o)},getConnectedDocumentPIDs:function(e){return n.getConnectedDocumentPIDs(e)}}}}}),define("DS/DELPPWModelBehaviors/ProductFlowLinkBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","DicoPlugin","WebServicePlugin","ResourcePlugin","AttributePlugin","UXComponentsPlugin"],creator:function(t,n,i,o,r,a,s,c){const l=Object.freeze({GOOD:"",QUANTITYDISTRIBUTION:"DELLmiTimeConstraintQuantityDistribution",ALTERNATIVE:"DELLmiTimeConstraintAlternative",FAILED:"DELLmiTimeConstraintFailed",SCRAPPED:"DELLmiTimeConstraintScrapped"});var u,f,g,d,m,p,P,L,h,I,S,C,y,D,R,v,A="DELLmiTimeConstraintCategoryAbstractCusto.flowType",V=["DELLmiTimeConstraintCnx","DELLmiMaterialPathCnxCust","LinearProductFlowCnx"],E={DELLmiTimeConstraintQuantityDistribution:"QuantityDistribution",DELLmiTimeConstraintAlternative:"Alternative",DELLmiTimeConstraintFailed:"Failed",DELLmiTimeConstraintScrapped:"Scrapped"},N=!1,b=[A,"DELLmiTimeConstraintAlternative.V_ExecutionReturnCode","DELLmiTimeConstraintFailed.V_ExecutionReturnCode","DELLmiTimeConstraintScrapped.V_ExecutionReturnCode","DELLmiTimeConstraintCategoryAbstract.V_ExecutionReturnCode","DELLmiTCOverlapQtyCusto.isOverlapExist","DELLmiTCOverlapQtyCusto.overlapMagnitude"],M=c.getComponent("Button"),k=null;return S=function(e){var t,n,i=e.get(A);return"NULL"!==i&&(t=o.getAttributeInfo(A),(n=s.getAuthorizedValueIndex(t,null,i))&&(i=s.getAuthorizedValueDB(t,n))),i},p=function(t,n){var o,r,a;return a=t[t.length-1],!(!i.getImpacted(a,!1,{relationTypes:V}).some(function(i){return e.equals(i.get("from"),t)&&e.equals(i.get("to"),n)})&&(o=!1,(r=function(n){var a,s,c,l,u=n[n.length-1],f=i.getImpacted(u,!1,{relationTypes:V});for(c=0;c<f.length&&(a=f[c],l=S(a),!0!==o);c++){if("DELLmiTimeConstraintFailed"===l){o=!1;break}if(e.equals(a.get("from"),n)){if(e.equals(a.get("to"),t)){o=!0;break}s=a.get("to"),r(s)}}})(n),!o))},m=function(t,n){var o,r,a,s,c,l,u={},f={},g=!1;if(e.is(t,"array")&&e.is(n,"array")){for(o=t.length-1;o>=0;o--){for(a=t[o],r=i.getInstance(a).get("isAggregatedBy"),s=n.length-1;s>=0;s--)if(c=n[s],e.is(f[c])?l=f[c]:(l=i.getInstance(c).get("isAggregatedBy"),f[c]=l),r===l&&a!==c){g=!0;break}if(g)break}u.fromPath=t.slice(o),u.toPath=n.slice(s)}return u},P=function(t,n){var i,r={Name:n,Type:"String",Protection:2,MultiValuated:"No",HasRangeDefined:"No",DefaultValue:"",MaxLength:256,Magnitude:"",ManipulationUnit:"",MultiLine:"No",UIAccess:"",HasDefault:"Yes"};switch(n){case"flowType":(i=e.clone(r)).NLS=a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory"),i.AuthorizedValues=[{Name:"",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Good")},{Name:"DELLmiTimeConstraintQuantityDistribution",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.QuantityDistribution")},{Name:"DELLmiTimeConstraintFailed",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Failed")},{Name:"DELLmiTimeConstraintAlternative",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Alternative")},{Name:"DELLmiTimeConstraintScrapped",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Scrapped")}],i.HasRangeDefined="Yes",i.DefaultValue=a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Good");break;case"V_ExecutionReturnCode":switch(i=o.getAttributeInfo(n),(i=e.is(i)?e.clone(i):e.clone(r)).FullName=t+"."+n,i.HasRangeDefined="Yes",i.AuthorizedValues=[],t){case"DELLmiTimeConstraintFailed":i.AuthorizedValues=[{Name:"RCFail203",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.203")},{Name:"RCFail204",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.204")}],i.DefaultValue=a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.203");break;case"DELLmiTimeConstraintAlternative":i.AuthorizedValues=[{Name:"RCAlter201",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.201")},{Name:"RCAlter202",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.202")}],i.DefaultValue=a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.201");break;case"DELLmiTimeConstraintScrapped":i.AuthorizedValues=[{Name:"RCScrap205",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.205")},{Name:"RCScrap206",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.206")}],i.DefaultValue=a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.205");break;case"DELLmiTimeConstraintCategoryAbstract":i.AuthorizedValues=[{Name:"RCAlter201",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.201")},{Name:"RCAlter202",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.202")},{Name:"RCFail203",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.203")},{Name:"RCFail204",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.204")},{Name:"RCScrap205",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.205")},{Name:"RCScrap206",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.206")}],i.DefaultValue=a.getNLSValue("DELLmiTimeConstraintCnx.ReturnCode.205")}break;case"isOverlapExist":(i=e.clone(r)).DefaultValue="false",i.Type="Boolean",i.NLS=a.getNLSValue("DELLmiTimeConstraintCnx.Overlap");break;case"overlapMagnitude":(i=e.clone(r)).NLS=a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude"),i.AuthorizedValues=[{Name:"DELLmiTCOverlapQty_Weight",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Weight")},{Name:"DELLmiTCOverlapQty_Volume",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Volume")},{Name:"DELLmiTCOverlapQty_Length",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Length")},{Name:"DELLmiTCOverlapQty_Area",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Area")},{Name:"DELLmiTCOverlapQty_Each",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Each")}],i.HasRangeDefined="Yes",i.DefaultValue=a.getNLSValue("DELLmiTimeConstraintCnx.Overlap.Magnitude.Each")}return i},h=function(e){var t=e.get("from"),n=t[t.length-1],r=i.getInstance(n),c=r.get("type"),u=!1,f=!1,g=[{Name:"DELLmiTimeConstraintFailed",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Failed")},{Name:"DELLmiTimeConstraintAlternative",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Alternative")},{Name:"DELLmiTimeConstraintScrapped",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Scrapped")}];if(o.isAKindOf(c,"DELLmiHeaderOperationInstance")){let t=r.get("DELLmiHeaderOperationInstance.V_DistributionRule"),n=o.getAttributeInfo("DELLmiHeaderOperationInstance.V_DistributionRule"),i=s.getAuthorizedValue(n,null,t),a=e.get(A),c=e.get("DELLmiTimeConstraintCnx.V_MaterialNeed"),g=o.getAttributeInfo(A),d=s.getAuthorizedValue(g,null,a);if("NotDefined"===i)switch(d){case l.GOOD:case l.FAILED:case l.ALTERNATIVE:case l.SCRAPPED:u=!0;break;case l.QUANTITYDISTRIBUTION:u=!0,f=!0}else switch(d){case l.GOOD:"TRUE"===c&&(u=!0),f=!0;break;case l.FAILED:case l.ALTERNATIVE:case l.SCRAPPED:case l.QUANTITYDISTRIBUTION:f=!0}}else u=!0;return u&&g.unshift({Name:"",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.Good")}),f&&g.unshift({Name:"DELLmiTimeConstraintQuantityDistribution",NLS:a.getNLSValue("DELLmiTimeConstraintCnx.FlowCategory.QuantityDistribution")}),g},L=function(){var e={},t={};b.forEach(function(n){var i,o;i=n.split("."),o=P(i[0],i[1]),t[n]=o.NLS,e[n]=o}),a.addNlsJSON(t),s.addAttributeInfo(e),N=!0},I=function(t){var n,i,r,a=t.get(A);return e.is(a)&&""!==a&&(E[a]?n=a:(i=o.getAttributeInfo(b[0]),r=s.getAuthorizedValueIndex(i,null,a),e.is(r)&&(n=s.getAuthorizedValueDB(i,r)))),n},C=function(t){var o,r,s=new Map,c={};t.forEach(function(t){var n,o,a,c=t.x,l=t.y;n=i.getInstance(t.instancePID),o=i.getReferenceModelFromInstance(n).get("PPRTYPE"),r=[(a="OPERATION"===o?"DELLmiOperationInstance.":"SYSTEM"===o?"DELLmiProductionSystemInstance.":"")+"V_X2DPos",a+"V_Y2DPos"],e.is(n)&&(c===Number(n.get(a+"V_X2DPos"))&&l===Number(n.get(a+"V_Y2DPos"))||s.set(t.instancePID,{[a+"V_X2DPos"]:c,[a+"V_Y2DPos"]:l}))}),s.size>0&&(o={data:Object.fromEntries(s),onFailure:function(){n.notify("stopProgress",c),n.warn(a.getNLSValue("ProductFlowLinkBehavior.TilePosition.SaveFailed"))},onComplete:function(){n.notify("stopProgress",c),n.info(a.getNLSValue("ProductFlowLinkBehavior.TilePosition.SaveSuccess"))}},n.notify("startProgress",c),i.updateInstances(r,o))},y=function(t,o,r){var s,c={};e.is(o,"object")&&(s={data:o,onFailure:function(t){var i=a.getNLSValue("EditAnchorPositionsUI.UpdateFailure");e.is(t)&&e.is(t.message,"string")&&(i+="\n"+t.message),n.warn(i),n.notify("stopProgress",c)},onComplete:function(){var e={linkPID:t,iAnchorPositionsToSet:o};r&&n.notify("refreshNodeLinks",e),n.info(a.getNLSValue("EditAnchorPositionsUI.UpdateSuccess")),n.notify("stopProgress",c)}},n.notify("startProgress",c),i.updateConnection(t,s))},D=function(t){return new Promise(function(o,r){var s={},c=function(){n.notify("stopProgress",s),n.warn(a.getNLSValue("EditAttributeUI.retrieveDataFailure")),r()};if(!e.is(t))return n.debug("object is not available."),void r();n.notify("startProgress",s),i.fetchAttributes(t,{onComplete:function(){n.notify("stopProgress",s),o()},onFailure:c,onTimeout:c})})},v=function(t){var n,i=null,o=null,r=u.getComponent("ComboBox"),s=["North","South","East","West"],c=[],l=[],f=u.createElement("div",{class:"section-container"}),m=u.createElement("div",{class:"start-position-content",styles:{display:"flex","align-items":"center",margin:"20px"}}),p=u.createElement("div",{class:"end-position-content",styles:{display:"flex","align-items":"center",margin:"20px"}});for(new e.Element("span",{text:a.getNLSValue("ProductFlowLinkBehavior.editAnchorPositionsDialog.StartPosition.Title"),styles:{width:"45%"}}).inject(m),new e.Element("span",{text:a.getNLSValue("ProductFlowLinkBehavior.editAnchorPositionsDialog.EndPosition.Title"),styles:{width:"45%"}}).inject(p),n=0;n<s.length;n++)c.push({label:a.getNLSValue("ProductFlowLinkBehavior.editAnchorPositionsDialog."+s[n]),value:s[n]}),l.push({label:a.getNLSValue("ProductFlowLinkBehavior.editAnchorPositionsDialog."+s[n]),value:s[n]});return t.get("DELArrowDisplayExt.V_ArrowStartPosition")&&t.get("DELArrowDisplayExt.V_ArrowEndPosition")&&(i=s.findIndex(function(e){return"Default"===t.get("DELArrowDisplayExt.V_ArrowStartPosition")?"East"===e:e===t.get("DELArrowDisplayExt.V_ArrowStartPosition")}),o=s.findIndex(function(e){return"Default"===t.get("DELArrowDisplayExt.V_ArrowEndPosition")?"West"===e:e===t.get("DELArrowDisplayExt.V_ArrowEndPosition")})),g=new r({elementsList:c,enableSearchFlag:!1,actionOnClickFlag:!1,selectedIndex:null!==i?i:2}).inject(m),d=new r({elementsList:l,enableSearchFlag:!1,actionOnClickFlag:!1,selectedIndex:null!==o?o:3}).inject(p),m.inject(f),p.inject(f),f},R=function(t){var n={},i=a.getNLSValue("LinksUI.EditAnchorPositions");e.is(u)&&(f=u.createElement("div",{class:"EditAnchorPositions-Dialog"}),(k=u.create("Dialog",{domId:"EditAnchorPositionsUI-Dialog",title:i,content:f,resizableFlag:!0,modalFlag:!0,width:280,minWidth:260,height:190,minHeight:180,buttons:{Cancel:new M({onClick:function(){k.close()}}),Ok:new M({disabled:!1,emphasize:"primary",onClick:function(){n={"DELArrowDisplayExt.V_ArrowStartPosition":g.value,"DELArrowDisplayExt.V_ArrowEndPosition":d.value},e.is(t,"function")&&t(n)}})}})).close=function(){this.destroy(),e.is(f)&&f.destroy(),k=null})},{listenTo:function(){},onStart:function(){u=n.getBehavior("UXFactoryBehavior"),N||L()},onStop:function(){},canCreateProductFlowLink:function(t,n){var o,r,s,c,l,u,f,g=!0,d={};return u=function(){var t=!1,n=c.toString(),i=l.toString();return c.length>0&&l.length>0&&0!==n.indexOf(i)&&0!==i.indexOf(n)&&(o=m(c,l),t=e.is(o)&&Array.isArray(o.fromPath)&&o.fromPath.length>0&&Array.isArray(o.toPath)&&o.toPath.length>0),t},f=function(){var e,t,n;return e=i.getInstance(c[c.length-1]),t=i.getReference(e.get("isAggregatedBy")),n=i.getSequencingModeAttrName(t),"Linear"===t.get(n)},t=t||{},e.is(t.fromSideAbsPath)&&e.is(t.toSideAbsPath)?(c=t.fromSideAbsPath,l=t.toSideAbsPath,r=a.getNLSValue(n),u()?f()?(g=!1,s=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.ParentisInLinearSeqMode",{linkType:r})):p(o.fromPath,o.toPath)&&(g=!1,s=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.ExistOrLoop",{linkType:r})):(g=!1,s=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.NoCommonParent",{linkType:r}))):(g=!1,s=a.getNLSValue("ProductFlowLinkBehavior.canCreateProductFlowLinkError.InsufficentInfo")),d={canCreateLink:g},g?d.data=e.merge({type:n,fromSideOccPath:e.is(o,"object")?o.fromPath:null,toSideOccPath:e.is(o,"object")?o.toPath:null,displayText:e.is(r)?r:null,buttonIdentifier:e.is(r)?r:null},e.clone(t)):d.errorMessage=s,d},createProductFlowLink:function(t,n,o,r){var a,s,c,l,u=function(){e.is(r,"function")&&r(l)};n=n||{},s=(t=t||{}).fromSideOccPath[t.fromSideOccPath.length-1],c=t.toSideOccPath[t.toSideOccPath.length-1],l={linkType:t.type,target:s,source:c},a=this.canCreateProductFlowLink(t,t.type),e.is(t.startAnchorId)&&e.is(t.endAnchorId)&&(n.startAnchorId=t.startAnchorId,n.endAnchorId=t.endAnchorId),a.canCreateLink?i.createConnection({IDFrom:t.fromSideOccPath.toString(),IDTo:t.toSideOccPath.toString(),type:t.type},e.merge({onFailure:u,onTimeout:u,onCancel:u,onComplete:function(){e.is(o,"function")&&o(l)}},n)):(l.errorMessage=a.errorMessage,u())},getProductFlowRelationTypes:function(){return V},getProductFlowRelationTypeByTypes:function(e,t){var n,i=o.getPossibleRelations(e,t,"write");return(n=i.indexOf(V[0]))>-1?i[n]:void 0},getDynamicAuthorizedListFlowType:function(e){return h(e)},getLinkInfo:function(t){var n,i,r,c,l,u,f,g,d,m={NLS:null,type:null,subType:null,iconName:null,flowType:null,reasonCode:null,description:null,isProductFlow:!1};return n=t.get("type"),i=t.get("PLMEntity.V_description"),c=o.getAttributeInfo("DELLmiTimeConstraintCnx.V_DependencyType"),"TRUE"===t.get("DELLmiTimeConstraintCnx.V_MaterialNeed")?(m.isProductFlow=!0,r=n+"_ProductFlow",f=I(t),"Good"!==(g=e.is(f)?E[f]:"Good")&&(d=t.get("DELLmiTimeConstraintCategoryAbstract.V_ExecutionReturnCode"))):(l=t.get("DELLmiTimeConstraintCnx.V_DependencyType"),u=s.getAuthorizedValueIndex(c,null,l),r=n+"_"+s.getAuthorizedValueDB(c,u)),m.NLS=a.getNLSValue(r),m.type=n,m.description=i,m.subType=r,m.iconName=r,m.flowType=g,m.reasonCode=d,m},saveTilePositions:function(e){C(e)},saveAnchorPositions:function(e,t,n){y(e,t,n)},editAnchorPositions:function(t){var o,r=i.getConnection(t),s=e.is(r)?r.get("type"):null;e.is(r)&&"DELLmiTimeConstraintCnx"===s?D(r).then(function(){o=v(r),R(function(e){null!==e?y(t,e,!0):n.warn(a.getNLSValue("EditAnchorPositionsUI.ConfigAttrNotAvilaibleOnObject")),k.close()}),o.inject(f)}):n.warn(a.getNLSValue("EditAnchorPositionsUI.LinkNotAvailable"))}}}}}),define("DS/DELPPWModelBehaviors/DataCollectWKIBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DicoPlugin","DatabasePlugin","WebServicePlugin","AttributePlugin","ResourcePlugin"],creator:function(t,n,i,o,r,a,s){var c,l={},u=!1,f="PLMSpecifyHowToCollectDataCnx",g="PLMSpecifyHowToCollectDataCnx_Custo",d={},m={};return l={attributesToFetch:[{type:"PLMEntity",attributes:["PLM_ExternalID","V_description"]},{type:"BusinessType",attributes:["organization","project","reservedby","originated","modified"]},{type:"PLMSpecifyHowToCollectDataCnx",attributes:["V_DCLabel","V_DCMode","V_DCNbSameMeasurement"]},{type:"DELExtTargetValuesInteger",attributes:["V_MaxValue","V_MinValue","V_PossibleValues"]},{type:"DELExtControlLimitsInteger",attributes:["V_MaxControlValue","V_MinControlValue"]},{type:"DELExtTargetValuesText",attributes:["V_PossibleValues"]}],customDCAttributes:["V_DCRichText","V_DCType","V_DCMagnitude","V_DCUnit","V_MinValue","V_MinValue_Inclusive","V_MinControlValue","V_MinControlValue_Inclusive","V_MaxValue","V_MaxValue_Inclusive","V_MaxControlValue","V_MaxControlValue_Inclusive","V_Value","V_DCTimestampFormat","V_DCRequirementLink","V_DCFormula","V_DCResourceLink","V_PossibleValues","CustoExtn"]},c=function(t){var n,i=g+"."+t;switch(n={Name:t,NLS:s.getNLSValue(i),Type:"String",Protection:2,MultiValuated:"No",HasRangeDefined:"No",DefaultValue:"",MaxLength:256,Magnitude:"",ManipulationUnit:"",MultiLine:"No",UIAccess:"",HasDefault:"Yes"},t){case"V_DCType":n.AuthorizedValues=[{Name:"Real",NLS:s.getNLSValue("DCType.Real")},{Name:"Integer",NLS:s.getNLSValue("DCType.Integer")},{Name:"Text",NLS:s.getNLSValue("DCType.Text")},{Name:"Boolean",NLS:s.getNLSValue("DCType.Boolean")},{Name:"Timestamp",NLS:s.getNLSValue("DCType.Timestamp")}],n.HasRangeDefined="Yes",n.DefaultValue="Real";break;case"V_DCUnit":n.HasRangeDefined="Yes",n.AuthorizedValues=[];break;case"V_DCTimestampFormat":n.AuthorizedValues=[{Name:"hh:mm:ss",NLS:s.getNLSValue("DCRow.Timestamp.Format.HHMMSS")},{Name:"hh:mm",NLS:s.getNLSValue("DCRow.Timestamp.Format.HHMM")},{Name:"YYYY:MM:DD",NLS:s.getNLSValue("DCRow.Timestamp.Format.YYYYMMDD")}],n.HasRangeDefined="Yes",n.DefaultValue="hh:mm:ss";break;case"V_PossibleValues":n.AuthorizedValues=[{Name:"TRUE,FALSE",NLS:s.getNLSValue("DCRow.Boolean.PossibleValues.TrueFalse")},{Name:"YES,NO",NLS:s.getNLSValue("DCRow.Boolean.PossibleValues.YesNo")},{Name:"1,0",NLS:s.getNLSValue("DCRow.Boolean.PossibleValues.OneZero")}],n.DefaultValue="TRUE,FALSE";break;case"V_DCFormula":n.MultiLine="Yes";break;case"CustoExtn":n.MultiValuated="Yes",n.HasRangeDefined="Yes",n.HasDefault="No",n.AuthorizedValues=[],e.is(m[f])&&m[f].forEach(function(e){n.AuthorizedValues.push({Name:e.Name,NLS:e.Nls})})}return n},{listenTo:function(){return{moveDataCollectRow:this.moveDataCollectRow}},onStart:function(){u=!1},onStop:function(){u=!1},fetchDataCollectAttrInfos:function(t){var i,o,p,P;P=function(){u=!0,e.is(t,"function")&&t()},u?P():(p=function(e){var t={},n={};l.customDCAttributes.forEach(function(e){var i=g+"."+e,o=c(e);n[i]=o.NLS,t[i]=o}),s.addNlsJSON(n),a.addAttributeInfo(t),e()},o=function(t,i){var o={},c=e.clone(l.attributesToFetch);n.notify("startProgress",o),r.webServiceRequest({url:"dictionary/properties",method:"POST",onComplete:function(e){var i={},r={};e.forEach(function(e){e.info.forEach(function(t){var n=e.type+"."+t.Name;r[n]=t.NLS,i[n]=t})}),s.addNlsJSON(r),a.addAttributeInfo(i),n.notify("stopProgress",o),t()},onFailure:function(){n.notify("stopProgress",o),i()},onTimeout:function(){n.notify("stopProgress",o),i()},data:e.Json.encode(c)})},new Promise(function(t,i){var o={},a={types:[f]};n.notify("startProgress",o),r.webServiceRequest({url:"dsmfg/private/V0/invoke/MfgProcess/WKI/getCustoExtnInfo",method:"POST",data:e.Json.encode(a),onComplete:function(e){d[f]=e[f].DeploymentExtn,m[f]=e[f].CustoExtn;let i=d[f];Array.isArray(i)&&i.length>0&&i.forEach(function(e){l.attributesToFetch.push({type:e.Name,attributes:e.Attributes})});let r=m[f];Array.isArray(r)&&r.length>0&&r.forEach(function(e){l.attributesToFetch.push({type:e.Name,attributes:e.Attributes})}),n.notify("stopProgress",o),t()},onFailure:function(){n.notify("stopProgress",o),t()},onTimeout:function(){n.notify("stopProgress",o),t()}})}).then(function(){i=[new Promise(o),new Promise(p)],Promise.all(i).then(P,P)}))},isDataCollectPlan:function(e){return i.isAKindOf(e,"DELWkiDataCollectPlanReference")},isDataCollectCheckList:function(e){return i.isAKindOf(e,"DELWkiDataCollectChecklistReference")},isDataCollectRow:function(e){return i.isAKindOf(e,"PLMSpecifyHowToCollectDataCnx")},getDataCollectRows:function(t,i){var a,s={};n.notify("startProgress",s),a={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRows?dataCollectPID="+t,method:"GET",context:this,onComplete:function(t){e.is(t)&&e.is(t.rows)&&o.addToCollections({stackedReferences:t.rows,onComplete:function(t){e.is(i)&&e.is(i.onComplete)&&i.onComplete(t.instancesAndReferences),n.notify("stopProgress",s)}})},onFailure:function(){e.is(i)&&e.is(i.onFailure)&&i.onFailure(),n.notify("stopProgress",s)}},r.webServiceRequest(a)},getDataImportCollectRows:function(t,i){var o,a={};n.notify("startProgress",a),o={url:"v1/modeler/characteristics/product/"+t+"/performancespec",method:"GET",context:this,onComplete:function(t){if(e.is(t)&&e.is(t.data)){let o=[];t.data.specsData.forEach(e=>{let t={maturity:e.current,description:e.description,PID:e.physicalid,revision:e.revision,title:e.title,characteristics:[]};t.characteristics=e.characteristics,o.push(t)}),e.is(i)&&e.is(i.onComplete)&&i.onComplete(o),n.notify("stopProgress",a)}},onFailure:function(){e.is(i)&&e.is(i.onFailure)&&i.onFailure(),n.notify("stopProgress",a)}},r.webServiceRequest(o)},getNodeOptions:function(t){var i,o,r,a,c,u,g,d,m,p={},P=l.customDCAttributes||[],L=n.getPreferenceValue("separator"),h=t.toJSON(),I=["V_DCMode","V_DCRichText","V_DCLabel","V_DCNbSameMeasurement","V_DCUnit","V_MinValue","V_MinControlValue","V_MaxValue","V_MaxControlValue","V_DCTimestampFormat","PLM_ExternalID","V_description","organization","project","reservedby","originated","modified","V_TreeOrder"],S=["V_MinValue_Inclusive","V_MinControlValue_Inclusive","V_MaxValue_Inclusive","V_MaxControlValue_Inclusive"],C={referencePID:t.get("PID"),grid:p};for(o in h)if(Object.prototype.hasOwnProperty.call(h,o))if(i=o.contains(".")?o.split(".")[1]:o,m=P.indexOf(i)>-1?"PLMSpecifyHowToCollectDataCnx_Custo."+i:o,I.includes(i))p[m]="NULL"!==h[o]?h[o]:"";else if("V_Value"===i)p[m]=h[o];else if("V_PossibleValues"===i)e.is(h[o],"array")?p["PLMSpecifyHowToCollectDataCnx_Custo.V_Value"]=h[o].join(L):"NULL"==h[o]&&(p["PLMSpecifyHowToCollectDataCnx_Custo.V_Value"]=[""]);else if("V_DCFormula"===i)r=h[o],e.is(r)&&(a=r.match("(?<=<FormulaAsDisplayed>)(.*)(?=</FormulaAsDisplayed>)"),Array.isArray(a)&&(p[m]=a[0]));else if(S.includes(i))"Excluded"===h[o]?p[m]=!1:"Included"===h[o]?p[m]=!0:p[m]="NotSet";else if("V_DCType"===i){let e=this.getAttributeInfo(i);g="DCType."+this.getAuthorizedValue(e,h[o]),p[m]={iconPath:s.getIconURLFromKey(g),label:s.getNLSValue(g)}}else"V_DCMagnitude"===i?(u=h[o],p[m]={iconPath:s.getIconURLFromKey("DCMagnitude."+u),label:s.getNLSValue(u)}):"V_DCRequirementLink"===i?(c=h[o],p[m]={iconPath:s.getIconURLFromKey("DCLink.Rquirement"),label:c.ReqName+" "+c.ReqRevision}):"V_DCResourceLink"===i&&(p[m]={iconPath:s.getIconURLFromKey(i),label:p[i]});e.is(u)&&Object.prototype.hasOwnProperty.call(p,"PLMSpecifyHowToCollectDataCnx_Custo.V_DCUnit")&&(p["PLMSpecifyHowToCollectDataCnx_Custo.V_DCUnit"]=s.getNLSForUnit(u,p["PLMSpecifyHowToCollectDataCnx_Custo.V_DCUnit"])),S.forEach(function(e){var t=P.indexOf(e)>-1?"PLMSpecifyHowToCollectDataCnx_Custo."+e:e;Object.prototype.hasOwnProperty.call(p,t)||(d=t.replace("_Inclusive",""),delete p[d])});let y=this.getDeploymentExtnAttr(f),D=this.getCustoExtnAttr(f),R=[];for(o in R=Array.isArray(y)?R.concat(y):R,R=Array.isArray(D)?R.concat(D):R,h)Object.prototype.hasOwnProperty.call(h,o)&&R.includes(o)&&(p[o]="NULL"!==h[o]?h[o]:"");return C},deleteDataCollectRow:function(t,i,a){var s,c,l={};n.notify("startProgress",l),s={dataCollectPID:t,dataCollectRowPID:i},c={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow",method:"DELETE",context:this,data:e.Json.encode(s),onComplete:function(t){e.is(t)&&e.is(t.deletedObjects)&&(o.removeReference(t.deletedObjects[0]),e.is(a)&&e.is(a.onComplete)&&a.onComplete(t.deletedObjects[0])),n.notify("stopProgress",l)},onFailure:function(){e.is(a)&&e.is(a.onFailure)&&a.onFailure(),n.notify("stopProgress",l)}},r.webServiceRequest(c)},fetchDataCollectRow:function(t,i,a){var c,l={};e.is(t)&&e.is(i)&&(n.notify("startProgress",l),c={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow?dataCollectPID="+t+"&dataCollectRowPID="+i,method:"GET",onComplete:function(t){e.is(t)&&o.addToCollections({stackedReferences:[t],silentMode:!1,onComplete:function(){n.notify("stopProgress",l),e.is(a)&&e.is(a.onComplete)&&a.onComplete()}})},onFailure:function(){n.notify("stopProgress",l),n.warn(s.getNLSValue("DataCollectMgmtDialog.RetrieveDataFailure")),e.is(a)&&e.is(a.onFailure)&&a.onFailure()}},r.webServiceRequest(c))},getObjectAndAttributeInfos:function(e){return a.getObjectAndAttributeInfos(e)},getAttributeInfo:function(e,t){return a.getAttributeInfo(e,t)},getDimensions:function(){return a.getDimensions()},getAuthorizedValueIndex:function(e,t,n){return a.getAuthorizedValueIndex(e,t,n)},getAuthorizedValueDB:function(e,t){return a.getAuthorizedValueDB(e,t)},getDeploymentExtnInfo:function(t){return e.clone(d[t])},getCustoExtnInfo:function(t){return e.clone(m[t])},getDeploymentExtn:function(t){var n=this.getDeploymentExtnInfo(t),i=[];return e.is(n)&&n.forEach(function(e){i.push({Name:e.Name,Nls:e.Nls})}),i},getCustoExtn:function(t){var n=this.getCustoExtnInfo(t),i=[];return e.is(n)&&n.forEach(function(e){i.push({Name:e.Name,Nls:e.Nls})}),i},getDeploymentExtnAttr:function(t){var n=this.getDeploymentExtnInfo(t),i=[];return e.is(n)&&n.forEach(function(t){(e.is(t.Attributes)?t.Attributes:[]).forEach(function(e){i.push(t.Name+"."+e)})}),i},getCustoExtnAttr:function(t){var n=this.getCustoExtnInfo(t),i=[];return e.is(n)&&n.forEach(function(t){(e.is(t.Attributes)?t.Attributes:[]).forEach(function(e){i.push(t.Name+"."+e)})}),i},getWidgetPreferenceValue:function(e){return widget.getValue(e)},setWidgetPreferenceValue:function(e,n){t.getService("ConfigService").setPreference(e,n)},convertValuesBetweenUnits:function(t){var i={};return n.notify("startProgress",i),new Promise(function(o,a){var c={Dimension:t.dimension,UnitFrom:t.fromUnit,UnitTo:t.toUnit,Value:t.valuesToConvert.join(";")},l=function(){n.notify("stopProgress",i),n.warn(s.getNLSValue("DataCollectMgmtDialog.ConvertUnitFailure")),a()};r.webServiceRequest({url:"dictionary/dimensions/convertValue",method:"POST",onComplete:function(e){n.notify("stopProgress",i),o(e)},onFailure:l,onTimeout:l,data:e.Json.encode(c)})})},updateDataCollectRow:function(t,i,a,c){var l,u,f={};e.is(t)&&e.is(i)&&e.is(a)&&(l={dataCollectPID:t,dataCollectRowPID:i,dataCollectRowAttrs:a},n.notify("startProgress",f),u={data:e.Json.encode(l),url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow",method:"PUT",onComplete:function(t){e.is(t)&&o.addToCollections({stackedReferences:[t],silentMode:!1,onComplete:function(t){n.notify("stopProgress",f),n.info(s.getNLSValue("DataCollectMgmtDialog.UpdateSuccess")),e.is(c)&&e.is(c.onComplete)&&c.onComplete(t.instancesAndReferences[0])}})},onFailure:function(){n.notify("stopProgress",f),n.warn(s.getNLSValue("DataCollectMgmtDialog.UpdateFailure")),e.is(c)&&e.is(c.onFailure)&&c.onFailure()}},r.webServiceRequest(u))},moveDataCollectRow:function(t,i,a,c){var l,u,f={};e.is(t)&&e.is(i)&&e.is(a)&&(l={dataCollectPID:t,dataCollectRowPID:i,newIndex:a},n.notify("startProgress",f),u={url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow/Move",method:"POST",context:this,data:e.Json.encode(l),onComplete:function(t){e.is(t)&&Array.isArray(t.rows)&&o.addToCollections({stackedReferences:t.rows,silentMode:!1,onComplete:function(){n.notify("stopProgress",f),e.is(c)&&e.is(c.onComplete)&&c.onComplete()}})},onFailure:function(){n.notify("stopProgress",f),n.warn(s.getNLSValue("WUXDataCollectRowDragDrop.ReorderFailure")),e.is(c)&&e.is(c.onFailure)&&c.onFailure()}},r.webServiceRequest(u))},createDataCollectRow:function(t,i,a){var c,l,u={};e.is(t)&&e.is(i)&&(c={dataCollectPID:t,dataCollectRowAttrs:i},n.notify("startProgress",u),l={data:e.Json.encode(c),url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow",method:"POST",onComplete:function(t){e.is(t)&&o.addToCollections({stackedReferences:[t],silentMode:!1,onComplete:function(){n.notify("stopProgress",u),n.info(s.getNLSValue("DataCollectMgmtDialog.CreateSuccess")),e.is(a)&&e.is(a.onComplete)&&a.onComplete()}})},onFailure:function(){n.notify("stopProgress",u),n.warn(s.getNLSValue("DataCollectMgmtDialog.CreateFailure")),e.is(a)&&e.is(a.onFailure)&&a.onFailure()}},r.webServiceRequest(l))},generateDataCollectRows:function(t,i,a,c,l){var u,f,g={};e.is(t)&&e.is(i)&&e.is(a)&&e.is(c)&&(u={dataCollectPID:i,characsInfo:t,parentOpePID:c,dataCollectAbsPath:a},n.notify("startProgress",g),f={data:e.Json.encode(u),url:"dsmfg/private/V0/invoke/MfgProcess/WKI/DataCollectRow/Generate",method:"POST",onComplete:function(t){e.is(t.dataCollectRows,"array")&&o.addToCollections({stackedReferences:t.dataCollectRows,silentMode:!1,onComplete:function(){n.notify("stopProgress",g),n.info(s.getNLSValue("DataCollectMgmtDialog.CreateSuccess")),e.is(l)&&e.is(l.onComplete)&&l.onComplete()}})},onFailure:function(){n.notify("stopProgress",g),n.warn(s.getNLSValue("DataCollectMgmtDialog.CreateFailure")),e.is(l)&&e.is(l.onFailure)&&l.onFailure()}},r.webServiceRequest(f))},getAuthorizedValue:function(e,t){return a.getAuthorizedValue(e,null,t)},getAuthorizedValueNLS:function(e,t){return a.getAuthorizedValueNLS(e,t)}}}}}),define("DS/DELPPWModelBehaviors/ImplementBehaviorBase",["UWA/Core","UWA/Class/Promise"],function(e,t){"use strict";return function(n,i,o,r,a,s,c,l,u){var f,g,d,m,p=function(t,n,o,r){var s=e.is(t)?a.getNLSValue(t):n;i.info(s,o),r&&r(s)},P=function(t,n,o,r,s){var c=e.is(t)?a.getNLSValue(t):o;e.is(n,"string")&&n.length>0&&(c=n),i.warn(c,r),s&&s(c)};return f=function(e,t,n,o,r,c){var l,u,f={},g=a.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),d=a.getNLSValue("ImplementBehavior.CreateScope.Success"),L=a.getNLSValue("ImplementBehavior.CreateScope.Failed"),h=i.log(g),I=function(e){p(e,d,h,r),i.notify("createLink",f)},S=function(e,t){P(e,t,L,h,c)};(l=s.canCreateScopeLink({fromSideRefPID:e,toSideRefPID:t,fromSideAbsPath:n,toSideAbsPath:o})).canCreateLink?"ProcessImplementLink"===s.getScopeLinkType()?s.createScopeLink(e,t,{onComplete:I,onFailure:S}):(u=m(n)).hasImplementLink?S(null,a.getNLSValue("ImplementBehavior.Validation.ImplLinkExists",{obj1:u.implementingName,obj2:u.implementedName})):s.createScopeLink(e,t,{onComplete:I,onFailure:S}):S(null,l.errorMessage)},g=function(t,n,r,c){var u,f,g,d,L,h,I,S=[],C=a.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),y=a.getNLSValue("ImplementBehavior.CreateScope.Success"),D=a.getNLSValue("ImplementBehavior.CreateScope.Failed"),R=i.log(C),v=function(t,n){p(t,y,R,r),e.is(n)&&(n.connections.forEach(function(e){S.push(e.toJSON())}),i.notify("createImplementLink",S))},A=function(e,t){P(e,t,D,R,c)};if(e.is(t,"array")&&t.length>0&&e.is(n,"array")&&n.length>0)if(f=t[t.length-1],u=o.getReferenceIdFromInstance(f),d=n[n.length-1],g=o.getReferenceIdFromInstance(d),(I=s.canCreateScopeLink({fromSideRefPID:u,toSideRefPID:g,fromSideInstPID:f,toSideInstPID:d,fromSideAbsPath:t,toSideAbsPath:n})).canCreateLink)if("ProcessImplementLink"===s.getScopeLinkType())s.createScopeLink(u,g,{onComplete:v,onFailure:A});else if(s.validateIfScoped(t,n))(h=m(t,n)).hasImplementLink?h.withSameProduct?s.createScopeLink(u,g,{onComplete:v,onFailure:A}):A(null,a.getNLSValue("ImplementBehavior.Validation.ImplLinkExists",{obj1:h.implementingName,obj2:h.implementedName})):(L=s.getPathToPartialOrFullScope(t,n),s.createScopeAndImplementLink(u,f,g,L,{onComplete:v,onFailure:A}));else{if(i.getPreferenceValue("skipVaidationIfScopedCheck")&&l.isAKindOf(void 0,"Provide"))return void s.createScopeLink(u,g,{onComplete:v,onFailure:A});A(null,a.getNLSValue("ImplementBehavior.Validation.ScopeNotValid"))}else A(null,I.errorMessage);else i.debug("Input parameters are invalid."),A()},m=function(t,n){var i,r,a,c,l,u,f=!1,g=!1,d=null,m=null;return i=e.is(t,"array")&&t.length>0?s.getImplLinksOfImplementing(t):null,e.is(i,"array")&&i.length>0&&(f=!0,e.is(n)&&(g=i.some(function(t){const i=e.is(n,"array")&&n.length>0?n[n.length-1]:n;return e.equals(t.get("to"),[i])})),c=(u=i[0]).getAttribute("from"),l=o.getReferenceModel(c),e.is(l)&&(m=l.get("PLMEntity.V_Name")),r=u.getAttribute("to"),a=o.getReferenceModel(r),e.is(a)&&(d=a.get("PLMEntity.V_Name"))),{hasImplementLink:f,withSameProduct:g,implementingName:m,implementedName:d}},d=function(n,i,r,a){var c,l,u;return e.is(n,"array")&&n.length>0&&s.isUnderScope(n)&&e.is(r,"array")&&r.length>0?(l=n,u=r,c=new t(function(e,t){g(l,u,e,t)})):c=function(e,n,i,r){return new t(function(t,a){var s=o.isReference(e)?e:o.getReferenceIdFromInstance(e),c=o.isReference(n)?n:o.getReferenceIdFromInstance(n);f(s,c,i,r,t,a)})}(i,a,n,r),c},{onStart:function(){},isScoped:function(e){return s.isScoped(e)},isPartialScoped:function(e){return s.isPartialScoped(e)},getPartialScopeLinkType:function(){return s.getPartialScopeLinkType()},getScopeLinkType:function(){return s.getScopeLinkType()},getImplementLinkType:function(){return s.getImplementLinkType()},getScopeLinksOfImplemented:function(e){return s.getScopeLinksOfImplemented(e)},getPartialScopeLinks:function(e){return s.getPartialScopeLinks(e)},getPathToScope:function(e){return s.getPathToScope(e)},findInstanceWhoseParentIsScoped:function(e){return s.findInstanceWhoseParentIsScoped(e)},createScopeLink:function(n){var r,a={},s=[];return e.is(n,"array")&&n.length>0?(i.notify("startProgress",a),s=n.map(function(e){return d(e.implementingAbsPath,e.implementingPID,e.implementedAbsPath,e.implementedPID,e.isPartialScope)}),r=t.allSettled(s).then(function(){var r,s=u.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),c=[],f=o.isReference(n[0].implementingPID)?n[0].implementingPID:o.getReferenceIdFromInstance(n[0].implementingPID),g=o.isReference(n[0].implementedPID)?n[0].implementedPID:o.getReferenceIdFromInstance(n[0].implementedPID);r=o.getReferenceModel(f),l.isAKindOf(r.get("type"),"Provide")||l.isAKindOf(r.get("type"),"DELServicePartReference")?o.getCurrentStates([g],s,function(n){e.is(n)&&"RELEASED"===n.get(g)?((widget.getValue("isReleaseMaturitySynced")||i.getPreferenceValue("isReleaseSyncXENEnabled")&&widget.getValue("fromXen"))&&c.push(new t(function(e,t){o.syncMaturity([r],s,widget.getValue("isChangeRequiredSynced")||i.getPreferenceValue("isReleaseSyncXENEnabled")&&widget.getValue("fromXen"),e,t)})),t.all(c).then(function(){var e=[];e.onComplete=function(){i.notify("referenceChanged",r),i.notify("stopProgress",a)},e.onFailure=function(){i.notify("referenceChanged",r),i.notify("stopProgress",a)},e.forceDBMode=!0,o.fetchRoot(r.get("PID"),e)})):i.notify("stopProgress",a)}):(i.notify("referenceChanged",r),i.notify("stopProgress",a))})):(i.debug("Input parameters are invalid."),r=t.reject("ImplementBehavior.Validation.InvalidInput")),r},createImplementLink:function(t,n,r,c){var l,u,f,g,d=a.getNLSValue("ImplementBehavior.Validation.ScopeNotValid"),m=function(t,n){var i=e.is(t)?a.getNLSValue(t):null;e.is(n)&&(i=n),u.errorMessage=i,c(u)};if(u={linkType:t.type,target:o.getReferenceModel(t.implementingAbsPath[t.implementingAbsPath.length-1]).get("PID"),source:o.getReferenceModel(t.implementedAbsPath[t.implementedAbsPath.length-1]).get("PID")},e.is(t.fromSideAbsPath)&&e.is(t.fromSideAbsPath)||(t.fromSideAbsPath=t.implementingAbsPath,t.toSideAbsPath=t.implementedAbsPath),e.is(t.fromSideRefPID)||(t.fromSideRefPID=t.implementingPID),s.canCreateImplementLink(t).canCreateLink){let n=s.isPartialScoped(t.fromSideRefPID)?[t.fromSideRefPID]:t.implementingAbsPath,o=t.implementedAbsPath;f=(l=s.getPathsToScope(n,o)).implementingPathToScope,g=l.implementedPathToScope,e.is(f)&&e.is(g)?s.createImplementLink(f,g,{connectionParams:t.connectionParams,onComplete:function(e,t){i.notify("createImplementLink",t.toJSON()),r(u)},onFailure:m}):m(null,d)}else m(null,d)},deleteScopeLink:function(n){var o,r,c={},l=[],u=e.is(n,"array")?n:[n],f=a.getNLSValue(this.getScopeLinkType()),g=a.getNLSValue("DeleteLink.LogMessage",{linkType:f}),d=a.getNLSValue("DeleteLink.Success",{linkType:f}),m=a.getNLSValue("DeleteLink.Failure",{linkType:f});return u.length>0?(i.notify("startProgress",c),u.forEach(function(n){r=s.getScopeLinksOfImplementing(n),e.is(r)&&r.length>0&&(l=r.map(function(e){return new t(function(t,n){!function(e,t,n){var o=i.log(g);s.deleteScopeLink(e,{onComplete:function(e,n){p(e,d,o,t),i.notify("deleteLink",[n.deletedConnections])},onFailure:function(e,t){P(e,t,m,o,n)}})}(e.get("PID"),t,n)})}))}),o=t.allSettled(l).then(function(){i.notify("stopProgress",c)})):(i.debug("Unable to delete scope links as input parameters are invalid."),o=t.reject("ImplementBehavior.Validation.InvalidInput")),o}}}}),define("DS/DELPPWModelBehaviors/MfgItemBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["MfgItemPlugin","ResourcePlugin","BIPlugin","DatabasePlugin","PlatformPlugin","WebServicePlugin"],creator:function(t,n,i,o,r,a,s,c){return{webservice:function(t,c,l,u){var f,g,d,m,p,P,L,h,I,S,C,y,D,R={noTimeout:!0},v={},A={silentMode:!0,updateItem:!0},V="";if(n.notify("startProgress",R),e.is(l)&&e.is(l.logMessage)&&(g=n.log(l.logMessage)),(c=c||{}).product&&(m=c.product.referencePID,L=c.product.OccPath,V=e.is(c.product.productConfigFilter)?c.product.productConfigFilter:""),c.mfgItem&&(p=c.mfgItem.referencePID,h=c.mfgItem.instancePID,D=c.mfgItem.topRootMfgItemPID),S=function(t){e.is(P)&&n.notify(P,v),e.is(t)?e.is(t.succeeded)&&Object.keys(t.succeeded).length>0&&r.getBICmdState()&&r.computeBI():(n.info(l.logMessage+" "+o.getNLSValue("completed"),g),r.getBICmdState()&&r.computeBI()),n.notify("stopProgress",R)},I=function(t){var i,o,r=[];t.instancesAndReferences.forEach(function(t){i=t.attributesValue,e.is(i.isInstanceOf)&&(o=a.getInstance(i.PID),e.is(o)&&n.notify("instanceAdded",[o,A]))}),t.connections.forEach(function(e){r.push(a.getConnection(e.PID))}),r.length>0&&n.notify("connectionAdded",[r])},"Create"===t){if(s.isCreateMBOMv2()){const{rawXMLPhantomNodeConfig:t,rawXMLLinkAuthoringConfig:r}=this.getRawXMLsRequired4CreateMBOM();return d={rootProductID:m,productOccPath:Array.isArray(L)?L.join(","):"",rootMfgItemID:p,engConfigFilter:V,mfgInstanceID:e.is(h)?h:"",scopeCreation:l.scopeCreation,prefix:l.prefix,computeResultReport:!!e.is(l.computeResultReport)&&l.computeResultReport,topRootMfgItemPID:D,xmlPhantomNodeConfig:e.is(t,"string")?t:null,xmlLinkAuthoringConfig:e.is(r,"string")?r:null},void i.callScalCreateMBOM(d).then(e=>{n.info(o.getNLSValue("CreateMfgItemStructure.jobSubmit.Success")),n.notify("stopProgress",R)}).catch(t=>{e.is(t)&&e.owns(t,"message")&&"MfgItem_has_children"===t.message?n.warn(o.getNLSValue("CreateMBOMStatusUI.jobSubmit.Resubmit")):n.warn(o.getNLSValue("CreateMfgItemStructure.jobSubmit.Fail")),n.notify("stopProgress",R)})}f="POST",P="createMfgItemStructure",d=e.Json.encode({rootProductID:m,productOccPath:Array.isArray(L)?L.join(","):"",rootMfgItemID:p,engConfigFilter:V,mfgInstanceID:e.is(h)?h:"",scopeCreation:l.scopeCreation,prefix:l.prefix,computeResultReport:!!e.is(l.computeResultReport)&&l.computeResultReport,topRootMfgItemPID:D}),l.onComplete=function(t,i,o){C=a.getReference(t),n.notify("referenceAdded",[C,"",A]),e.is(u)&&u(o),S()}}else if("Update"===t){P="updateMfgItemStructure ",f="PUT";const t=e.is(c.mfgItem.processConfigFilter)?c.mfgItem.processConfigFilter:"";d=e.Json.encode({mbomUpdateMode:"mbomPull",rootProductID:m,rootMfgItemID:p,backgroundJobflag:l.backgroundJobFlag,scopeCreation:l.scopeCreation,prefix:l.prefix,engConfigFilter:V,mfgConfigFilter:t,updateIntermediateScopedAssemblies:l.updateIntermediateScopedAssemblies,computeResultReport:!0,topRootMfgItemPID:D}),l.onComplete=function(t,i,r,s){if(!e.is(t)){const e=r.resultReport,t=Object.values(e);let i=[];for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)"Failed"===t[e][n].Status&&i.push(t[e][n].ErrorMessage);return i.length>0?(n.warn(o.getNLSValue("Info.PartialUpdate.Title"),g),i.forEach(function(e){n.log(e,g)})):n.info(o.getNLSValue("Info.NoUpdate.Title"),g),void n.notify("stopProgress",R)}e.is(i)?(C=a.getReference(i),n.notify("referenceAdded",[C,"",A])):e.is(s)&&s?(y=a.getReference(m),n.notify("referenceAdded",[y,"",A]),I(r)):I(r),S()}}else"rerouteScopeLink"!==t&&"rerouteLink"!==t||(f="POST",d=e.Json.encode(l),l=e.merge(l,{appenedURL:"RerouteMfgItem"}),(l=e.merge(l,{logMessage:o.getNLSValue("MIL.LogMessage")})).onComplete=function(t,n,i){var o,r;o=i.succeeded,(r=Object.keys(o)).length>0&&(P="RerouteMfgItem",r.forEach(function(e){var t=o[e];Object.keys(t).forEach(function(e){I(t[e])})})),e.is(u)&&u(i),S(i)});l.onFailure=function(t){if(e.is(l.logMessage)){let i=l.logMessage+" "+o.getNLSValue("failed");e.is(t)&&(i=i+". "+t.message),n.warn(i,g)}n.notify("stopProgress",R),e.is(u)&&u()},i.webserviceAndProcessing(f,d,l)},getRawXMLsRequired4CreateMBOM:function(){return{rawXMLPhantomNodeConfig:c.getServerConfigurationRawXML("DELWebMfgAssetsPhantomNodeConfig.xml"),rawXMLLinkAuthoringConfig:c.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml")}},getBrokenMfgItemStatus:function(e,t){r.getBrokenMfgItemStatus(e,t)},getPhantomNodeItems:function(){return r.getPhantomNodeItems()},getBIModel:function(e){return r.getBIModel(e)},getCreateMfgItemStatus:function(){return i.getCreateMfgItemStatus()},isCreateMBOMv2:function(){return s.isCreateMBOMv2()},createMBOMOnResubmit:function(e,t){return i.createMBOMOnResubmit(e,t)}}}}}),define("DS/DELPPWModelBehaviors/ModelBehavior",["UWA/Core"],function(e){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","AttributePlugin","WebServicePlugin","DicoPlugin","BIPlugin"],creator:function(t,n,i,o,r,a,s,c){var l,u,f,g,d,m,p,P,L,h,I,S,C,y;return m=function(t,i,o,r,a){var s=o||{};!0===(!e.is(s.popupMessage)||s.popupMessage)?n.info(i,r):n.log(i,r),e.is(t)&&n.notify("stopProgress",t),e.is(s.onComplete,"function")&&s.onComplete.call(null,i,o,a)},p=function(t,i,o,r,a,s){var c=r||{},l=!e.is(c.popupMessage)||c.popupMessage;e.is(o)&&e.is(o.message,"string")&&(i+="\n"+o.message),!0===l?n.warn(i,a):n.log(i,a),n.notify("stopProgress",t),e.is(c.onFailure,"function")&&c.onFailure.call(null,i,s)},l=function(t,r,a,s,c,l){var u,f,g,d,P,h,I=o.getNLSValue("DeleteObject.Success"),S=o.getNLSValue("DeleteObject.Failure"),C=o.getNLSValue("DeleteObject.PatialFailure"),y=[],D=t?"Instance":"Reference",R={};if(a&&!0===a.isDetachInstance)L(t,r,a,s,c,l);else if(l=!!e.is(l)&&l,u=function(e,t){P=o.getNLSValue(D,{objectLabel:e.get(s)},"Delete","Success"),n.log(P,d),e.isInstance()&&(g=i.getReferenceModelFromInstance(e)),t(g)},f=function(t,i,r){P=o.getNLSValue(D,{objectLabel:t.get(s)},"Delete","Failure"),e.is(r)&&e.is(r.message,"string")&&(P+="\n"+r.message),n.log(P,d),i()},e.is(r,"array")&&r.length>0){if(n.notify("startProgress",R),d=n.log(o.getNLSValue("DeleteObject.LogMessage")),h=i[t?"deleteInstance":"deleteReference"],!e.is(h,"function"))return void n.debug("delete function not found on database plugin.");r.forEach(function(i){y.push(new Promise(function(o,r){h(i.id,{deep:!!e.is(c)&&c,onComplete:function(){u(i,o),t&&n.notify("instanceDeleted",i.toJSON())},onFailure:function(e,t){f(i,r,t)}})}))}),Promise.allSettled(y).then(function(i){var o=!1,r=0,s=0,c=[];for(r=0;r<i.length;r++)"rejected"!==i[r].state?e.is(i[r].value)&&c.push(i[r].value):s++;0===s?(m(R,I,a,d),o=!0):s===i.length?p(R,S,null,a,d):(p(R,C,null,a,d),o=!0),o&&t&&l&&n.notify("addToAuxiliaryView",[c,{askAddToAuxConfirmation:!l}])})}},h=function(e,t){let n,i,o=Math.ceil(e.length/t),r=[];for(i=0,n=0;i<o;i++,n+=t)r[i]=e.slice(n,n+t);return r},I=function(o,r,a){let s,c;c=function(n){return new e.Promise(function(e){t.getMediator().notify("instanceRemoved",[n]),e()})},(s=function(t){let o={};return o.deletedObjects=t.deleted,new e.Promise(function(t,r){o.onComplete=function(){e.is(a)&&n.notify("stopProgress",a),t()},o.onFailure=function(){e.is(a)&&n.notify("stopProgress",a),r()},i.addToCollections(o)})})(r).then(function(){o.length>0&&c(o)})},S=function(e,t){let n=new Map;n.set(!0,[]),n.set(!1,[]);for(let i=0;i<e.length;i++){const o=t(e[i]),r=e[i];n.set(o,n.get(o).concat(r))}return n},C=function(e){let t=new Set;for(let n=0;n<e.length;n++)if("fullfilled"===e[n].state){let i=e[n].value.deleted;for(let e=0;e<i.length;e++)t.add(i[e])}return t},L=function(t,r,s,c,l,u){var f,g,d,P,L,y=o.getNLSValue("DeleteObject.Success"),D=o.getNLSValue("DeleteObject.Failure"),R=o.getNLSValue("DeleteObject.PatialFailure"),v=t?"Instance":"Reference",A={},V=new Set;u=!!e.is(u)&&u,P=function(t){return new e.Promise(function(n,i){let o={url:"dsmfg/private/V0/MfgElement/instance/deleteMultipleInstances",method:"POST",headers:a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(t),onComplete:function(e){n(e)},onFailure:function(){i()}};a.webServiceRequest(o)})},L=function(e,t){let n="";return n=e.length===t.length?"Success":0===e.length?"Failure":"Partial Success"},r.length>0&&(n.notify("startProgress",A),g=n.log(o.getNLSValue("DeleteObject.LogMessage"))),r.forEach(function(e){V.add(e.id)});const E=h(Array.from(V),500).map(e=>P(e));e.Promise.allSettled(E).then(function(e){let a=new Set,l=[],P=!1,h=new Map;a=C(e);const V=(h=S(r,function(e){return a.has(e.id)})).get(!0),E=h.get(!1);I(V,{deleted:Array.from(a)},A);let N=[];for(let e=0;e<V.length;e++)d=o.getNLSValue(v,{objectLabel:V[e].get(c)},"Delete","Success"),n.log(d,g),V[e].isInstance()&&(f=i.getReferenceModelFromInstance(V[e]),l.push(f)),N.push(V[e].toJSON());n.notify("instanceDeleted",N);for(let e=0;e<E.length;e++)d=o.getNLSValue(v,{objectLabel:E[e].get(c)},"Delete","Failure"),n.log(d,g);switch(L(V,r)){case"Success":m(null,y,s,g),P=!0;break;case"Failure":p(A,D,null,s,g);break;case"Partial Success":p(null,R,null,s,g),P=!0;break;default:p(A,D,null,s,g)}P&&t&&u&&n.notify("addToAuxiliaryView",[l,{askAddToAuxConfirmation:!u}])}).catch(function(e){n.log(e),p(A,D,null,s,g)})},P=function(t){var o=t.parent,r=t.child,a=n.getBehavior("MfgProcessBehavior");let{isInstancePossible:c,errorMessage:l}=i.computeIsInstancePossible(o,r);return c&&s.isAKindOf(r,"DELLmiHeaderOperationReference")&&e.is(a)&&(c=a.isInstPossible(t)),{isInstancePossible:c,errorMessage:l}},u=function(t,r){var a,s,c,l={},u={},f=!1,g=!1;return r=r||{},e.is(r.securityContextOverride,"string")&&(c=r.securityContextOverride,delete r.securityContextOverride),e.is(r.silent,"boolean")&&(f=r.silent,delete r.silent),e.is(r.isBLToBecalled,"boolean")&&(g=r.isBLToBecalled),e.is(t)?e.is(t.V_Type)&&e.is(t.type)?(a=n.log(o.getNLSValue("ModelBehavior.CreateReference.LogMessage",{title:t["PLMEntity.V_Name"],type:t.type})),n.notify("startProgress",l),s=i.createReference(t,{onComplete:function(t){var i,s,c,f={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:t.toJSON(),instanceAttrs:null};r.newRef=t,m(l,o.getNLSValue("ModelBehavior.CreateReference.Success",{name:(i=t,s=o.getNLSValue("AbstractDragAndDropManager.RootNotInIndexUnknownName"),c=null,e.is(i)&&(c=i.get("PLMEntity.V_Name"),e.is(c,"string")&&c.length>0?s=c:(c=i.get("PLMEntity.PLM_ExternalID"),e.is(c,"string")&&c.length>0&&(s=c))),s)}),r,a,f),n.notify("referenceCreated",u)},onFailure:function(t,n){var i={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:null,instanceAttrs:null};p(l,o.getNLSValue("ModelBehavior.CreateReference.Failure"),n,r,a,i)},securityContextOverride:c,silent:f,isBLToBecalled:g})):n.debug("Type is required to create reference",s):n.debug("data is empty to addReference"),s},g=function(t){var o,r=!1;if(e.is(t)){let a;if(e.is(t.targetReferencePID)&&(a=t.targetReferencePID),e.is(t.isAggregatedBy)&&(a=t.isAggregatedBy),e.is(a)){let s=!0,c=null;e.is(t.referencePID)&&(o={parent:i.getReference(a),child:i.getReference(t.referencePID)},({isInstancePossible:s,errorMessage:c}=P(o))),s?r=!0:(n.debug("Instance object cannot be created between two selected Types"),n.warn(c))}else n.debug("isAggregatedBy required to create instance")}else n.debug("data is empty to createInstance");return r},f=function(t,r){var a,s,c={};r=r||{},e.is(r.securityContextOverride,"string")&&(s=r.securityContextOverride,delete r.securityContextOverride),g(t)&&(n.notify("startProgress",c),a=n.log(o.getNLSValue("ModelBehavior.CreateInstance.LogMessage")),i.createInstance(t,{onComplete:function(t){var s=i.getReferenceModelFromInstance(t),l={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:e.is(s)?s.toJSON():null,instanceAttrs:e.is(t)?t.toJSON():null};r.newInst=t,m(c,o.getNLSValue("ModelBehavior.CreateInstance.Success",{name:t.get("PLMInstance.PLM_ExternalID")}),r,a,l),n.notify("instanceCreated",t.toJSON())},onFailure:function(t,n){var i={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:null,instanceAttrs:null};p(c,o.getNLSValue("ModelBehavior.CreateInstance.Failure"),n,r,a,i)},securityContextOverride:s}))},d=function(t,r){var a,s,c,l,u={};r=r||{},e.is(r.securityContextOverride,"string")&&(l=r.securityContextOverride,delete r.securityContextOverride),(c=t.filter(g).map(function(e){return{isAggregatedBy:e.targetReferencePID,isInstanceOf:e.referencePID}})).length>0&&(n.notify("startProgress",u),a=n.log(o.getNLSValue("ModelBehavior.InsertExistingRefs.LogMessage")),s={childInfos:c},e.is(n.getPreferenceValue("skipVaidationIfScopedCheck"))&&(s.skipScopeCheck=n.getPreferenceValue("skipVaidationIfScopedCheck")),i.insertExistingRefs(s,{onComplete:function(t){var s,c=[],l={};if(e.is(t)&&e.is(t.instancesAndReferences)){for(s in t.instancesAndReferences.forEach(function(t){var n,o,r;i.isInstance(t.get("PID"))&&(c.push(t),n=t.get("isAggregatedBy"),o=i.getReference(n),r=t.get("PLMInstance.PLM_ExternalID"),e.is(o)&&(l[n]?l[n].instLabel.push(r):l[n]={aggLabel:o.get("PLMEntity.V_Name"),instLabel:[r]}))}),l)if(Object.hasOwnProperty.call(l,s)){let e=o.getNLSValue("ModelBehavior.InsertExistingRefs.Created",{instanciatedReference:l[s].instLabel.join(","),referenceName:l[s].aggLabel});n.info(e,a)}n.notify("instanceAdded",[c]),m(u,o.getNLSValue("ModelBehavior.InsertExistingRefs.Success"),r,a,c)}},onFailure:function(t,n){var i={transactionUUID:e.is(r.transactionUUID,"string")&&r.transactionUUID.length>0?r.transactionUUID:null,referenceAttrs:null,instanceAttrs:null};(r=r||{}).popupMessage=!0,p(u,o.getNLSValue("ModelBehavior.InsertExistingRefs.Failure"),n,r,a,i)},securityContextOverride:l}))},y=function(e,t,n){a.webServiceRequest({url:"dsmfg/private/V0/MfgElement/reference/type",method:"POST",data:JSON.stringify(e),onFailure:n,onTimeout:n,onCancel:n,onComplete:e=>{t(e)}})},{onStart:function(){},onStop:function(){},moveInstance:function(t){var r,s,l,u=t||{},f=null,g=null,d={},P=widget.getBool("oneDelmiaAggregationMode"),L=o.getNLSValue("ModelBehavior.ReparentInstances"),h=o.getNLSValue("ModelBehavior.ReparentInstances.Success"),I=o.getNLSValue("ModelBehavior.ReparentInstances.Failure"),S=a.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");r=function(t){var o,r={formerParentsPIDArray:f.formerInstancesParentPIDs,movedInstPIDArray:f.instancesPIDsToReparent,newParentPID:f.newParentPID,newInstPIDArray:[]},a=[],s={stackedObjects:{stackedReferences:[],stackedInstances:[],stackedConnections:[],deletedObjects:[]},silentOpt:!0,onComplete:function(t){var o,s=n.getPreferenceValue("refreshBIOnAuthoring");for(o of(s=!!e.is(s,"boolean")&&s,r.newInstPIDArray=t.instancePIDs.slice(),r.newInstPIDArray))i.manageLinearProductFlowsOnCreateInstancePID(o);n.notify("reparentInstances",r),a.length>0&&n.notify("instanceRemoved",[a]),s&&c.getBICmdState()&&c.computeBI(),m(d,h,u,g),n.notify("reparentEnd",f.newParentPID)}};for(o of f.instancesPIDsToReparent)i.manageLinearProductFlowsOnDeleteInstancePID(o);e.is(t.deletedObjects)&&t.deletedObjects.forEach(function(t){var n=i.getInstance(t);e.is(n)&&a.push(n)}),i.parseServerObjects(t,s)},s=function(e,t){u.popupMessage=!0,n.notify("reparentEnd",f.newParentPID),p(d,I,t,u,g)},g=n.log(L),n.notify("startProgress",d),f={oneDelmiaAggregationMode:P,instancesPIDsToReparent:e.is(u.instancesPIDsToReparent)?u.instancesPIDsToReparent:[],formerInstancesParentPIDs:e.is(u.formerInstancesParentPIDs)?u.formerInstancesParentPIDs:[],newParentPID:e.is(u.newParentPID)?u.newParentPID:"",newParentInstancesOrder:e.is(u.newParentInstancesOrder)?u.newParentInstancesOrder:[]},e.is(S,"string")&&(f.xmlLinkAuthoringConfig=S),l={url:"dsmfg/private/V0/invoke/reparent",method:"POST",headers:a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),onComplete:r,onFailure:s,data:e.Json.encode(f)},n.notify("reparentBegin",f.newParentPID),n.debug("Reparent instance ("+f.instancesPIDsToReparent.reduce(function(e,t,n){return e+(0===n?"":", ")+t+"#"+i.getInstance(t).get("PLMInstance.PLM_ExternalID")},"")+"), formerly under reference ("+f.formerInstancesParentPIDs.reduce(function(e,t,n){return e+(0===n?"":", ")+t+"#"+i.getReference(t).get("PLMEntity.V_Name")},"")+"), under new reference ("+f.newParentPID+"#"+i.getReference(f.newParentPID).get("PLMEntity.V_Name")+")"),a.webServiceRequest(l)},moveMultipleInstances:function(t,i,r){var a=this;return new Promise(function(n,i){var o=e.merge({onComplete:n,onFailure:i,popupMessage:!1},t);a.moveInstance(o)}).then(function(){var e=o.getNLSValue("ModelBehavior.MoveInstances.Success",{instanceLabel:r,newParentLabel:i});return n.info(e),Promise.resolve(e)})},createRefOrInst:function(t,i,o){var r,a={};if(o=o||{},e.is(t)){for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=t[r]);s.isAKindOf(a.type,"MBOMContinuousPhaseReference")&&delete a["DELFmiMagnitudeExt.V_DimensionType"],e.is(i,"string")?(a.isAggregatedBy=i,s.isAKindOf(a.type,"DELLmiHeaderOperationReference")&&(a.isAutoCreateScopeOnHOP=s.isAutoCreateScopeOnHOP()),f(a,o)):u(a,o)}else n.debug("createRefOrInst: No data to insert")},insertExistingRefs:function(e){return new Promise(function(t,n){d(e,{onComplete:t,onFailure:n,popupMessage:!1})})},insertInstance:function(t,r){var a,c,l=n.getBehavior("MfgProcessBehavior"),u={onComplete:function(){var e=t.isAggregatedBy,a={parent:i.getReference(e),child:c,targetAbsPath:r};l.isInstPossible(a)?f(t):n.warn(o.getNLSValue("ModelBehavior.InsertInstance.HOP.Error",{refName:t["PLMEntity.V_Name"]}))}};if(s.isAKindOf(t.type,"DELLmiHeaderOperationReference")){let o=n.getBehavior("ProcessImplementBehavior").getPartialScopeLinkType();a=t.isInstanceOf,c=i.getReference(a),i.getConnectionsByModel(c,null,e.merge(u,{relationTypes:[o]}))}else f(t)},deleteInstance:function(t,i){var r,a,s,c="PLMInstance.PLM_ExternalID",u=n.getBehavior("UXFactoryBehavior"),f=o.getNLSValue("Confirmation.addRefToAuxViewPostDelete");e.is(u)?(i=i||{},r=!e.is(i.askDeleteConfirmation)||i.askDeleteConfirmation,e.is(t,"array")&&t.length>0&&(r?(e.is(i.isDetachInstance)&&i.isDetachInstance?(s=o.getNLSValue("Detach.Confirmation.Title"),a=o.getNLSValue("DetachInstance.Confirmation.Message")):(s=o.getNLSValue("Delete.Confirmation.Title"),a=o.getNLSValue("DeleteInstance.Confirmation.Message")),u.showConfirmation(s,a,{attributes:[c],models:t},function(n,o,r){e.is(n)&&n&&l(!0,t,i,c,!1,r)},{check:f})):l(!0,t,i,c))):n.debug("uxFactoryBehavior is not available.")},fetchRoot:function(e,t){return i.fetchRoot(e,t)},fetchInstancesAndTheirReferences:function(e,t){return i.fetchInstancesAndTheirReferences(e,t)},isNavigateOnDemand:function(){return i.isNavigateOnDemand()},fetchInstance:function(e,t){return i.fetchInstance(e,t)},getReference:function(e){return i.getReference(e)},getReferencesFromArray:function(e){return i.getReferencesFromArray(e)},removeReference:function(e,t){i.removeReference(e,t)},getInstance:function(e){return i.getInstance(e)},getReferenceModelFromInstance:function(e){return i.getReferenceModelFromInstance(e)},getAggregatingReferenceModelFromInstance:function(e){return i.getAggregatingReferenceModelFromInstance(e)},getReferenceIdFromInstance:function(e){return i.getReferenceIdFromInstance(e)},getReferenceId:function(e){var t=e;return this.isInstance(e)&&(t=i.getReferenceIdFromInstance(e)),t},getInstancesFromCollection:function(e,t){return i.getInstancesFromCollection(e,t)},getParentInstancesFromCollection:function(e){return i.getParentInstancesFromCollection(e)},needToQueryForConnections:function(e){return i.needToQueryForConnections(e)},needToQueryForChildren:function(e){return i.needToQueryForChildren(e)},getDescendantsFromServer:function(e,t,n){i.getDescendantsFromServer(e,t,n)},getConnectionsFromServer:function(e,t,n){i.getConnectionsFromServer(e,t,n)},getAllChildrenFromCollection:function(e){return i.getAllChildrenFromCollection(e)},getImpactedConnections:function(t,n,o){var r,a=[];return e.is(t,"array")&&t.forEach(function(t){r=i.getImpacted(t,n,o),e.is(r)&&e.is(r,"array")&&r.length>0&&(a=a.concat(r))}),a},getReferenceModel:function(e){return i.getReferenceModel(e)},isReference:function(t){return e.is(this.getReference(t))},isInstance:function(t){return e.is(this.getInstance(t))},updateModelAttribute:function(t,a,s,c){var l,u,f,g,d,P,L,h,I,S,C,y,D,R,v,A,V,E,N,b,M,k,O=this,T=[],F=function(t){var n=t,i=function(t){return e.is(t,"string")?r.getFormattedDate(t):r.getFormattedDate(1e3*t)};return r.isDate(y)?n=Array.isArray(t)?t.map(function(e){return i(e)}):i(t):S&&!L&&(n=r.getValueAsString(t,r.getType(y))),n};e.is(a,"array")&&(a=a[0]),a=a||{},c=c||{},e.is(a.instOrRef)&&e.is(a.dataIndex)&&e.is(a.attributeInfo)&&e.is(a.objectToBeModified)&&e.is(a.attributeName)?(R=a.attributeName,y=a.attributeInfo,D=e.is(a.attributeDef)?a.attributeDef:{},d=r.getNLS(y),v=a.objectToBeModified,a.dataIndex,P="instance"===a.instOrRef,L=r.hasRangeDefined(y,D),h=r.isString(y),I=r.isInteger(y),S=r.isDouble(y),C=r.isMultiValuated(y),g=v.get(R),e.is(g)&&"NULL"!==g||(g=""),L&&!C&&(h||I||S)&&(g=r.getAuthorizedValue(y,D,g)),V=function(e,t,i,r){var a,s=F(i),c=F(t),l=n.getBehavior("UXFactoryBehavior"),u=l.getComponent("Button"),f=l.createElement("div",{class:"confirmation-dialog-content-container"}),g=l.createElement("div",{text:o.getNLSValue("UpdateAttributeUI.NotUptoDate")}),m=l.createElement("div"),p=l.createElement("div",{text:o.getNLSValue("UpdateAttributeUI.NewValue")}),P=l.createElement("div"),L=l.createElement("div",{text:o.getNLSValue("UpdateAttributeUI.DoYouWantToUpdate")});g.inject(f),m.textContent=s,m.inject(f),p.inject(f),P.textContent=c,P.inject(f),L.inject(f),(a=l.create("Dialog",{title:o.getNLSValue("UpdateAttributeUI.Header",{attributeName:d}),domId:"EditAttributeUI-Dialog",content:f,resizableFlag:!0,modalFlag:!0,buttons:{No:new u({onClick:function(){i===t&&A(e,r,i),a.close()}}),Yes:new u({disabled:!1,onClick:function(){A(e,t,i),a.close()}})}})).close=function(){this.destroy(),a=null}},E=function(t){var i=!1,a=s;if(e.is(t))if(f=t.get(R),L&&!C&&(h||I)&&(f=r.getAuthorizedValue(y,D,f)),r.isDate(y)&&!r.isMultiValuated(y)?(f=(f=new Date(f).getTime()/1e3).toString(),a=s=a.toString()):S&&r.hasMagnitude(y)&&!C&&(f=parseFloat(f),"AsRequired"===a?s=a:(a=parseFloat(a),s=a.toString())),(f=isNaN(f)&&"AsRequired"===a?a:f)!==a)if(r.doesAttributeExist(t,R)||r.isAttrApplicableForType(t,R)||r.isAttributeInProtectedList(R))if(R.contains(".V_ContQuantity")&&"AsRequired"!==a){const t=0===a,r=!!Number.isNaN(a),s=!e.is(Math.sign(a))||-1===Math.sign(a);if(t||r||s)n.warn(o.getNLSValue("Error.InvalidQuantity.Title")),i=!1;else{const e=new RegExp("^([0-9]+.|)[0-9]+$");!Number.isInteger(a)||e.test(a.toFixed(1))?i=!0:(n.warn(o.getNLSValue("Error.InvalidQuantity.Title")),i=!1)}}else i=!0;else n.warn(o.getNLSValue("TableView.AvailabilityFailure",{key:d}));else n.info(o.getNLSValue("TableView.NoChange"));return i},e.is(t,"array")?t.forEach(function(e){l=P?O.getInstance(e):O.getReference(e),E(l)&&T.push(l.get("PID"))}):E(v)&&T.push(v.id),0!==T.length&&(1===T.length?(A=function(t,a,s){var l,f={previous:{}},g={},L={};f[R]=a,l=P?O.getInstance(t):O.getReference(t),r.doesAttributeExist(l,R)&&(f.previous[R]=s),u={data:f,onFailure:function(e,t){p(L,o.getNLSValue("TableView.SingleUpdateFailure",{key:d,value:F(a)}),t,c)},onComplete:function(i,r){var l;l="AsRequired"===a?a:i.get(R),e.is(r)&&e.is(r.isInSync)&&!r.isInSync?(p(L,o.getNLSValue("TableView.UpdateWarning",{key:d})),V(t,a,l,s)):e.is(i._changed.modified)?(l="AsRequired"===l?l:F(l),m(L,o.getNLSValue("TableView.SingleUpdateSuccess",{key:d,value:l}),c),e.is(c.onSuccess)&&c.onSuccess(),n.notify("editAttribute",g)):(a="AsRequired"===a?a:F(a),p(L,o.getNLSValue("TableView.SingleUpdateFailure",{key:d,value:a}),r,c))},logMessage:o.getNLSValue("TableView.SingleUpdateLogMessage")},n.notify("startProgress",L),!0===P?i.updateInstance(t,u):i.updateReference(t,u)})(T[0],s,g):T.length>1&&(b=s,M={},k={},(N=T).forEach(function(e){M[e]={[R]:b}}),u={data:M,onFailure:function(e){p(k,o.getNLSValue("TableView.MassUpdateFailure",{key:d,value:F(b)}),e,c)},onComplete:function(e){e.length!==N.length?p(k,o.getNLSValue("TableView.UpdateWarning",{key:d})):(m(k,o.getNLSValue("TableView.MassUpdateSuccess",{key:d,value:F(b)}),c),n.notify("editAttribute",{}))},logMessage:o.getNLSValue("TableView.MassUpdateLogMessage")},n.notify("startProgress",k),!0===P?i.updateInstances(R,u):i.updateReferences(R,u)))):n.debug("Required attribute information is missing to update the model attribute")},getValidChildTypes:function(e){return i.getValidChildTypes(e)},computeIsInstancePossible:function(e){return P(e)},isMovePossible:function(t,n){var o,r=!1;return i.isWorkInstruction(n)?r=!1:n&&n.get("isAggregatedBy")!==t.id&&(o=this.getReferenceModelFromInstance(n).get("PPRTYPE"),e.is(o)&&(r=s.isReparentPossible(o))),r},isAKindOf:function(e,t){return s.isAKindOf(e,t)},getTypeHierarchy:function(e){return s.getTypeHierarchy(e)},getAttributeInfo:function(e){return s.getAttributeInfo(e)},fetchDicoAttributeInfo:function(e,t,n){s.fetchDicoAttributeInfo(e,t,n)},getPPRType:function(e){return i.getPPRType(e)},getPPRTypeFromType:function(e){return s.getPPRType(e)},getParentTypes:function(e){return s.getParentTypes(e)},getReadOnlyTypes:function(){return s.getReadOnlyTypes()},isReferencesHasReadOnlyType:function(e){return s.isReferencesHasReadOnlyType(e)},getMajorRevisions:function(t,r,s){var c,l,u,f=i.getReferenceModel(t).get("PLMEntity.V_Name");l=function(e,t,i){n.debug("jsonData: "+e+" error:"+t+" options: "+i),c=o.getNLSValue("Error.GetMajorRevisionFailure.Title",{objectName:f}),s(c)},u=function(e){r(e)},a.webServiceRequest({url:"dsmfg/private/V0/invoke/getMajorRevisions",method:"POST",data:e.Json.encode({pid:t}),onFailure:l,onTimeout:l,onCancel:l,onComplete:u})},isReadOnly:function(t,i,r,s){var c,l,u;l=function(e,t,i){n.debug("jsonData: "+e+" error:"+t+" options: "+i),s()},u=function(t){e.is(t.isReadOnly)&&t.isReadOnly&&(c=o.getNLSValue("Error.ObjNotInReadWrite.Title",{objectName:i})),r(c)},a.webServiceRequest({url:"dsmfg/private/V0/invoke/isReadOnly",method:"GET",data:{pid:t},onFailure:l,onTimeout:l,onCancel:l,onComplete:u})},isLatestRevision:function(t,i,r,s){var c,l,u;l=function(e,t,i){n.debug("jsonData: "+e+" error:"+t+" options: "+i),s()},u=function(t){e.is(t.isLatestRevision)&&!t.isLatestRevision&&(c=o.getNLSValue("Error.ObjNotLatestRevision.Title",{objectName:i})),r(c)},a.webServiceRequest({url:"dsmfg/private/V0/invoke/isLatestRevision",method:"GET",data:{pid:t},onFailure:l,onTimeout:l,onCancel:l,onComplete:u})},getWhereUsedReferences:function(e,t){i.getWhereUsedReferences(e,t)},getTenant:function(){return a.getTenant()},getHeaders:function(e){return a.getHeaders(e)},getSecurityContext:function(){return a.getSecurityContext()},getTypeProxy:function(e,t,n){return y(e,t,n)},get3DSpaceUrl:function(){return a.get3DSpaceUrl()},isEntityInstance:function(e){return s.isEntityInstance(e)},getAcceptedBaseTypesForCreation:function(){var t=[],n=s.getAcceptedBaseTypesForActions();return e.is(n)&&e.is(n.CREATION,"array")&&(t=n.CREATION),t},getFilteredInstancesFromCollection:function(e,t){return i.getFilteredInstancesFromCollection(e,t)},transformToRIROccurrencePath:function(e){return i.transformToRIROccurrencePath(e)},transformRIRToAbsolutePath:function(e){return i.transformRIRToAbsolutePath(e)},isOperation:function(e){return i.isOperation(e)},isSystem:function(e){return i.isSystem(e)},webServiceGETRequest:function(e,t,n,i){a.webServiceRequest({url:this.get3DSpaceUrl()+e,method:t,onFailure:i,onTimeout:i,onCancel:i,onComplete:n})},getModelMaturity:function(t){const n=this.getAttributeInfo("BusinessType.current");let i=t.get("current");if(e.is(i)&&e.is(n))return r.getAuthorizedValue(n,null,i)}}}}}),define("DS/DELPPWModelBehaviors/ProcessImplementBehavior",["UWA/Core","UWA/Class/Promise","DS/DELPPWModelBehaviors/ImplementBehaviorBase","DS/DELPPWModelBehaviors/SpecifyScopeIntentDialog","text!DS/DELPPWModelBehaviors/assets/json/NonModelAttributeInfo.json"],function(e,t,n,i,o){"use strict";return{plugins:["DatabasePlugin","AttributePlugin","ResourcePlugin","ProcessImplementPlugin","MfgItemPlugin","DicoPlugin","WebServicePlugin"],creator:function(t,i,r,a,s,c,l,u,f){let g=new n(t,i,r,a,s,c,l,u,f);return e.extend(g,{onStart:function(){var t=e.Json.decode(o);for(let e in t)"MfgProductionPlanning.V_usage"===e?t[e].NLS=s.getNLSValue("ImplementBehavior.ImplementLink.Role"):"MfgProductionPlanning.V_DimensionType"===e?(t[e].NLS=s.getNLSValue("ImplementBehavior.ImplementLink.DimensionType"),t[e].AuthorizedValues=[{Name:"Ratio",NLS:s.getNLSValue("ImplementBehavior.ImplementLink.Ratio")},{Name:"Dimension",NLS:s.getNLSValue("ImplementBehavior.ImplementLink.Dimension")}]):"DELLmiRichText.V_RichText"===e?t[e].NLS=s.getNLSValue("ImplementBehavior.ImplementLink.RichText"):"MfgProductionPlanning.usagePoint"===e&&(t[e].NLS=s.getNLSValue("ImplementBehavior.ImplementLink.UsagePoint"));a.addAttributeInfo(t),u.addTypeExtnCustomInterface("ProcessImplementLinkOcc","MfgProductionPlanning")},isImplementLinkValidForOccPath:function(e,t,n){return c.isImplementLinkValidForOccPath(e,t,n)},getRoleFromModelOrComputed:function(e){return c.getRoleFromModelOrComputed(e)},getOotbRoleFromCustoRole:function(e){return c.getOotbRoleFromCustoRole(e)},getCustoRoleFromNLS:function(e){return c.getCustoRoleFromNLS(e)},getQuantityFromModel:function(e){return c.getQuantityFromModel(e)},getConnectedObjects:function(t,n,i,o){var r=[];return e.is(c.getConnectedObjects)&&(r=c.getConnectedObjects(t,n,i,o)),r},findUpperScopeLinks:function(e){return c.findUpperScopeLinks(e)}})}}}),define("DS/DELPPWModelBehaviors/AssignProductBehavior",["UWA/Core","DS/DELPPWModelBehaviors/SpecifyScopeIntentDialog"],function(e,t){"use strict";return{plugins:["DatabasePlugin","ResourcePlugin","WebServicePlugin","ProductImplementPlugin","AttributePlugin","DicoPlugin"],creator:function(n,i,o,r,a,s,c,l){var u,f,g,d,m,p;return u=function(t,n,r,s,c){var l,u,f,g,d=0,m=0,p={instancesAndReferences:[],connections:[]},P=a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),L=a.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");c=c||{},e.is(c.securityContextOverride,"string")&&(P.SecurityContext=c.securityContextOverride),f=function(t,n){e.is(c.onFailure,"function")&&c.onFailure(n)},u=function(t){var r=o.getConnectionParser(),a={stackedReferences:[],stackedInstances:[],stackedConnections:[]},s={queriedForConnections:!0},l={queriedForChildren:!0,queriedForConnections:!0,queriedForDocuments:!1};e.is(t)&&(e.is(t.instancesAndReferences)&&t.instancesAndReferences.forEach(function(t){var n,i,o=t.attributesValue;Object.prototype.hasOwnProperty.call(o,"isInstanceOf")?(n=e.merge(o,s),a.stackedInstances.push(n),e.is(t["to.attributesValue"])&&(i=e.merge(t["to.attributesValue"],l),a.stackedReferences.push(i))):(i=e.merge(o,l),a.stackedReferences.push(i))}),e.is(t.connections)&&t.connections.forEach(function(e){r.parse(e,a)}),a.onComplete=function(o){var r=[];(!e.is(o.instancesAndReferences)||o.connections.length<2/*!UWA.is(scopeConnModel) || !UWA.is(implConnModel)*/)&&i.debug("Instance or scope or implement model is empty for instance PID:"+t.instancesAndReferences[0].attributesValue.PID),o.instancesAndReferences.forEach(function(e){e.isInstance()&&r.push(e)}),i.notify("instanceAdded",r),o.instancesAndReferences.forEach(function(e){"PROCESS"===e.toJSON().PPRTYPE&&p.instancesAndReferences.push(e.toJSON())}),o.connections.forEach(function(e){p.connections.push(e.toJSON())}),i.notify("connectionAdded",[o.connections]),m++,n.length===m&&(e.is(c.onComplete,"function")&&c.onComplete(o),i.notify("assignProduct",p))},o.addToCollections(a))},g={processID:t},e.is(L,"string")&&(g.xmlLinkAuthoringConfig=L),n.forEach(function(t){var n=e.clone(g),i=e.clone(s[d]);l=o.getReferenceModel(t),n.productPath=e.Json.encode(r[d]),n.productRefPID=l.get("PID"),n.type=i.V_Type,n.attributes=i,Object.prototype.hasOwnProperty.call(i,"PLMEntity.V_Name")||(i["PLMEntity.V_Name"]=l.get("PLMEntity.V_Name")),a.webServiceRequest({url:"dsmfg/private/V0/invoke/assignproduct",method:"POST",headers:P,context:this,data:e.Json.encode(n),onComplete:u,onFailure:f,onTimeout:f,onCancel:f}),d++},this)},f=function(t,n,i,o){return new Promise(function(r,s){var c,l=a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),u=o||{},f=a.getServerConfigurationRawXML("DELWebMfgAssetsLinkAuthoring.xml");e.is(u.securityContextOverride,"string")&&(l.SecurityContext=u.securityContextOverride),c={productID:n,processType:i.V_Type,processData:i},e.is(f,"string")&&(c.xmlLinkAuthoringConfig=f),a.webServiceRequest({url:t,method:"POST",headers:l,data:e.Json.encode(c),onFailure:function(e,t){s(t)},onTimeout:s,onComplete:r})})},g=function(t,n,r,a,s,c){var l=function(t){return new Promise(function(n,i){var r=o.getConnectionParser(),a={silentMode:!0,stackedReferences:[],stackedInstances:[],stackedConnections:[],onComplete:function(e){n(e)}};e.is(t)&&e.is(t.instancesAndReferences)&&e.is(t.connections)?(a.stackedReferences=t.instancesAndReferences.map(function(t){return e.merge(t,{queriedForChildren:!0,queriedForConnections:!0,queriedForDocuments:!0})}),t.connections.forEach(function(e){r.parse(e,a)}),o.addToCollections(a)):i()})};return new Promise(function(u,g){var d=[],m={};Array.isArray(t)&&Array.isArray(n)&&(i.notify("startProgress",m),d=t.map(function(t,i){return new Promise(function(u,g){var d=e.clone(n[i]),m=o.getReferenceModel(t),p=m.get("PLMEntity.V_Name"),P=m.get("PID");e.is(d["PLMEntity.V_Name"])||(d["PLMEntity.V_Name"]=p),f(r,P,d,c).then(l).then(function(e){a(e,d,p),u(e)}).catch(function(e){s(p,e),g()})})}),Promise.allSettled(d).then(function(e){var t,n=function(e){return e.value};t=e.some(function(e){return"rejected"===e.state})?e.filter(function(e){return"fulfilled"===e.state}).map(n):e.map(n),i.notify("stopProgress",m),t.length>0?u(t):g()}).catch(function(){i.notify("stopProgress",m),g()}))})},d=function(t,n,o,a){var s;a=a||{},i.notify("stopProgress",n),s=r.getNLSValue("AssignProdBehavior.ErrorLinkCreation.Title"),i.warn(s,t),i.debug("AssignProdBehavior.ErrorLinkCreation.Title. ERROR during product assign: "+o),e.is(a.onFailure,"function")&&a.onFailure(s,o)},m=function(e,t,n,o,a,s){i.info(r.getNLSValue(n,{processName:o["PLMEntity.V_Name"],productName:a}),s),i.notify(e,t)},p=function(t,n,s,c,u,f,g){var d=t.instancesAndReferences[2],p=t.instancesAndReferences[0].get("PID"),P=a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0});e.is(f.securityContextOverride,"string")&&(P.SecurityContext=f.securityContextOverride),o.getCurrentStates([p],P,function(t){var a=[],f=widget.getValue("fromXen"),L=null;switch(u){case"createMfgItemAndScope":L="CreateMfgItemAndScope.Success";break;case"createMfgItemAndResultingProduct":L="createMfgItemAndResultingProductLink.Success";break;default:L="WrongNLSKey"}e.is(t)&&"RELEASED"===t.get(p)&&(l.isAKindOf(d.get("type"),"Provide")||l.isAKindOf(d.get("type"),"DELServicePartReference"))?((widget.getValue("isReleaseMaturitySynced")||!0===f&&i.getPreferenceValue("isReleaseSyncXENEnabled"))&&a.push(new Promise(function(e,t){o.syncMaturity([d],P,widget.getValue("isChangeRequiredSynced")||f&&i.getPreferenceValue("isReleaseSyncXENEnabled"),e,t)})),Promise.all(a).then(function(t){var a=[];a.onComplete=function(t){e.is(t,"array")&&(t=t[0]),d.set("current",t.get("current")),i.notify("referenceAdded",d),m(u,c,L,n,s,g)},a.onFailure=function(){d.set("current",t.results[0].maturityState),i.notify("referenceAdded",d),i.warn(r.getNLSValue("MaturitySync.UIChangeFailed")),i.notify(u,c)},a.forceDBMode=!0,o.fetchRoot(d.get("PID"),a)}).catch(function(){i.warn(r.getNLSValue("MaturitySync.changeStateFailed")),i.notify("referenceAdded",d),m(u,c,L,n,s,g)})):(null===t&&i.warn(r.getNLSValue("MaturitySync.retrieveCurrentStateFailed")),i.notify("referenceAdded",d),m(u,c,L,n,s,g))})},{unassignProduct:function(t,n){var o,a,c,l=[],u=[],f=[],g={};o={onComplete:function(){i.notify("stopProgress",g),e.is(n)&&e.is(n.onComplete)?n.onComplete():i.info(r.getNLSValue("UnassignProduct.DeleteSuccess"))},onFailure:function(t){i.notify("stopProgress",g),e.is(n)&&e.is(n.onFailure)?n.onFailure():i.warn(t)}},e.is(n)&&(o=e.merge(o,n)),e.is(t,"array")&&0!==t.length&&(i.notify("startProgress",g),t.forEach(function(t){l.push(new Promise(function(n,i){a=s.getImplLinksOfImplementing(t),e.is(a)&&a.length>0&&(a.forEach(function(e){var t=e.get("PID");f.push(new Promise(function(e,n){s.deleteImplementLink(t,{onComplete:e,onFailure:n})}))}),Promise.allSettled(f).then(function(){c=s.getScopeLinksOfImplementing(t),e.is(c)&&c.length>0&&c.forEach(function(e){var t=e.get("PID");u.push(new Promise(function(e,n){s.deleteScopeLink(t,{onComplete:e,onFailure:n})}))}),Promise.allSettled(u).then(function(){n()},function(){i()})},function(){i()}))}))}),Promise.allSettled(l).then(function(){o.onComplete()},function(e){var t=0,n=0;for(t=0;t<e.length;t++)"rejected"===e[t].state&&n++;n===e.length?o.onFailure(r.getNLSValue("UnassignProduct.DeleteFailure")):o.onFailure(r.getNLSValue("UnassignProduct.PatialFailure"))}))},assignProduct:function(n){var a,c,f,g,m,p,P,L,h,I,S,C,y,D,R,v,A,V,E=[],N=[],b=[],M=[],k=[],O=[],T=[],F={},w={},x=new t(i.getBehavior("UXFactoryBehavior"),r);let B;if(C=function(t,n,o,a){const c=r.getNLSValue("ImplementBehavior.Consumption.LogMessage"),l=r.getNLSValue("ImplementBehavior.Consumption.Success"),u=r.getNLSValue("ImplementBehavior.Consumption.Failed"),f=i.log(c);s.consumeReferenceWithScopeLink(t,n.prodPID,n.mfgPID,n.mfgInstPID,{}).then(t=>{if(e.is(t)){if(e.is(t.instancesAndReferences,"array")){const e=[];t.instancesAndReferences.forEach(t=>{t.isInstance()&&e.push(t)}),i.notify("instanceAdded",e)}e.is(t.connections,"array")&&i.notify("connectionAdded",[t.connections]),i.info(l,f)}o()}).catch(()=>{i.warn(u,f),a()})},y=function(){i.info(r.getNLSValue("Success.ProductAssigned.Title",{mfgItem:S}),h),i.notify("stopProgress",F),e.is(n.onComplete,"function")&&n.onComplete()},D=function(e,t){d(h,F,t,n)},e.is(n)&&(R=n.securityContextOverride,f=n.mbomReferenceId,a=n.mbomInstanceId,c=n.bodyInstanceIds,P=n.bodyAbsolutePaths,m=n.mbomAbsolutePaths[0],L=n.isInstancePossible,g=e.is(n.newMfgAttributes)?n.newMfgAttributes:{V_Type:"DELAsmAssemblyModelDisciplines/Provide"}),e.is(m,"array")&&m.length>0)B=s.isUnderScope(m);else{const t=s.getScopeLinks(f);B=e.is(t,"array")&&t.length>0,m=f}for(p=0;p<P.length;p++)if(s.validateIfScoped(m,P[p]))N.push(P[p]),b.push(c[p]),M.push(g[p]);else{if(!i.getPreferenceValue("skipVaidationIfScopedCheck")||!B)return void i.warn(r.getNLSValue("AssignProdBehavior.NotScoped.Title"));k.push(P[p]),O.push(c[p]),T.push(g[p])}e.is(f,"array")&&f.length>0&&(f=f[0]),i.notify("startProgress",F),I=o.getReferenceModel(f),S=e.is(I)?I.get("PLMEntity.V_Name"):"";const _=[];if(k.length>0)for(p=0;p<k.length;p++){const e={prodPID:o.getReferenceModel(O[p]).get("PID"),mfgPID:f,mfgInstPID:a},t=function(){Promise.resolve()},n=function(){C("ManufacturingAssembly",e,Promise.resolve,Promise.reject)},s=function(){C("ManufacturingMadeFrom",e,Promise.resolve,Promise.reject)};if(l.isAKindOf(I.get("type"),"CreateAssembly")||l.isAKindOf(I.get("type"),"CreateKit"))x.show(t,n,"");else{if(!(l.isAKindOf(I.get("type"),"CreateMaterial")||l.isAKindOf(I.get("type"),"ElementaryEndItem")||l.isAKindOf(I.get("type"),"Provide")))return i.warn(r.getNLSValue("AssignProdBehavior.DiffEBOM.NotSupportedType")),void i.notify("stopProgress",F);x.show(t,n,s)}}if(0===N.length)return void Promise.all(_).then(y).catch(D);for(p=0;p<N.length;p++)E.push(s.getPathsTillUpperScope(m,N[p]));h=i.log(r.getNLSValue("ProductAssign.LogMessage",{mfgItem:S})),w.securityContextOverride=R,w.onComplete=(()=>{_.length>0?Promise.all(_).then(y).catch(D):y()}),w.onFailure=((e,t)=>{_.length>0?Promise.all(_).then(()=>D(0,t)).catch(()=>D(0,t)):D(0,t)});let U=!1;if(e.is(n.newMfgAttributes)&&e.is(n.newMfgAttributes[0])&&e.is(n.newMfgAttributes[0].type)&&(U=n.newMfgAttributes[0].type.contains("DELServiceSpareItemReference")),i.getPreferenceValue("insertSpareItemOnAssign")&&U){const t=o.getInstance(P[0][0]).get("isAggregatedBy");let n;n=e.is(m,"array")?o.getInstance(m[0]).get("isAggregatedBy"):m,A=e.is(a)?o.getReferenceIdFromInstance(a):n,w.computeResultReport=!0,w.insertSpareItemOnAssign=!0,s.consumeImplementedItems(t,E,n,A,w)}else!0===L?u(f,b,E,M,w):(A=o.getReferenceIdFromInstance(a),v=E[0],V=o.getReferenceIdFromInstance(v[v.length-1]),s.createScopeAndImplementLink(A,a,V,v,w))},createMfgItemAndScopeLink:function(t,n,o,s){var c,l=s||{},u=e.is(l.onComplete,"function")?l.onComplete:null,f=e.is(l.onFailure,"function")?l.onFailure:null;c=i.log(o),g(t,n,"dsmfg/private/V0/invoke/createMfgItemAndScope",function(t,n,o){var r={},s=t.instancesAndReferences[2],u=a.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0});e.is(l.securityContextOverride,"string")&&(u.SecurityContext=l.securityContextOverride),e.is(t)&&Array.isArray(t.instancesAndReferences)?p(t,n,o,r,"createMfgItemAndScope",l,c):(i.notify("referenceAdded",s),m("createMfgItemAndScope",r,"CreateMfgItemAndScope.Success",n,o,c))},function(t,n){e.is(n)&&e.is(n.message,"string")&&n.message.length>0?i.warn(r.getNLSValue("CreateMfgItemAndScope.FailureWithMessage",{productName:t,message:n.message}),c):i.warn(r.getNLSValue("CreateMfgItemAndScope.Failure",{productName:t}),c)},l).then(function(t){var n=t.map(function(e){return{toObject:e.instancesAndReferences[0],fromObject:e.instancesAndReferences[1],createdObject:e.instancesAndReferences[2]}});e.is(u,"function")&&u(n)}).catch(function(){e.is(f,"function")&&f()})},createMfgItemAndResultingProductLink:function(t,n,o,a){var s,c=a||{},l=e.is(c.onComplete,"function")?c.onComplete:null,u=e.is(c.onFailure,"function")?c.onFailure:null;s=i.log(o),g(t,n,"dsmfg/private/V0/invoke/createMfgItemAndResultingProduct",function(t,n,i){var o={};e.is(t)&&Array.isArray(t.instancesAndReferences)?p(t,n,i,o,"createMfgItemAndResultingProduct","ResultingProduct",c):m("createMfgItemAndResultingProduct",o,"createMfgItemAndResultingProductLink.Success",n,i,s)},function(t,n){e.is(n)&&e.is(n.message,"string")&&n.message.length>0?i.warn(r.getNLSValue("createMfgItemAndResultingProductLink.FailureWithMessage",{productName:t,message:n.message}),s):i.warn(r.getNLSValue("createMfgItemAndResultingProductLink.Failure",{productName:t}),s)},c).then(function(t){var n=t.map(function(e){return{toObject:e.instancesAndReferences[0],fromObject:e.instancesAndReferences[1],createdObject:e.instancesAndReferences[2]}});e.is(l,"function")&&l(n)}).catch(function(){e.is(u,"function")&&u()})}}}}}),define("DS/DELPPWModelBehaviors/ProductImplementBehavior",["UWA/Core","UWA/Class/Promise","DS/DELPPWModelBehaviors/ImplementBehaviorBase","DS/DELPPWModelBehaviors/SpecifyScopeIntentDialog"],function(e,t,n,i){"use strict";return{plugins:["DatabasePlugin","AttributePlugin","ResourcePlugin","ProductImplementPlugin","MfgItemPlugin","DicoPlugin","WebServicePlugin"],creator:function(o,r,a,s,c,l,u,f,g){var d,m,p,P,L,h,I,S,C,y,D,R,v,A=function(t,n,i,o){var a=e.is(t)?c.getNLSValue(t):n;r.info(a,i),o&&o(a)},V=function(t,n,i,o,a){var s=e.is(t)?c.getNLSValue(t):i;e.is(n,"string")&&n.length>0&&(s=n),r.warn(s,o),a&&a(s)};d=function(t,n,i,s,l){var f,g,d={},m={};f=e.Json.encode({selectedHigherProductID:t,selectedMfgItemID:n,rootMfgItemID:n,reviseMfgItem:i}),(s=e.merge(s,{appenedURL:"ReconnectScopeLink"})).onComplete=function(e,t,n){var i,u;n.connections.length>0&&(i=a.getConnection(n.connections[0].PID),o.getMediator().notify("connectionAdded",[i])),n.instancesAndReferences.length>0&&(u=n.instancesAndReferences.filter(e=>"PRODUCT"===e.attributesValue.PPRTYPE)[0].attributesValue.PID,r.notify("addProductOrPart",{pid:u})),r.info(s.logMessage+" "+c.getNLSValue("completed"),g),r.notify("stopProgress",d),r.notify("reconnectScope",m),l(e,t)},s.onFailure=function(e,t){r.warn(s.logMessage+" "+c.getNLSValue("failed"),g),r.notify("stopProgress",d),l(e,t)},s.onTimeout=function(e,t){r.warn(s.logMessage+" "+c.getNLSValue("timeout"),g),r.notify("stopProgress",d),l(e,t)},r.notify("startProgress",d),e.is(s)&&e.is(s.logMessage)&&(g=r.log(s.logMessage)),u.webserviceAndProcessing("POST",f,s)},m=function(e,t,n,i,o,a){var s,u,f={},g=c.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),d=c.getNLSValue("ImplementBehavior.CreateScope.Success"),m=c.getNLSValue("ImplementBehavior.CreateScope.Failed"),p=r.log(g),P=function(e){A(e,d,p,o),r.notify("createLink",f)},L=function(e,t){V(e,t,m,p,a)};(s=l.canCreateScopeLink({fromSideRefPID:e,toSideRefPID:t,fromSideAbsPath:n,toSideAbsPath:i})).canCreateLink?"ProcessImplementLink"===l.getScopeLinkType()?l.createScopeLink(e,t,{onComplete:P,onFailure:L}):(u=I(n)).hasImplementLink?L(null,c.getNLSValue("ImplementBehavior.Validation.ImplLinkExists",{obj1:u.implementingName,obj2:u.implementedName})):l.createScopeLink(e,t,{onComplete:P,onFailure:L}):L(null,s.errorMessage)},L=function(t,n,i,o){var s,u,g,d,m,p,P,L=[],h=c.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),S=c.getNLSValue("ImplementBehavior.CreateScope.Success"),C=c.getNLSValue("ImplementBehavior.CreateScope.Failed"),y=r.log(h),D=function(t,n){A(t,S,y,i),e.is(n)&&(n.connections.forEach(function(e){L.push(e.toJSON())}),r.notify("createImplementLink",L))},v=function(e,t){V(e,t,C,y,o)};if(e.is(t,"array")&&t.length>0&&e.is(n,"array")&&n.length>0)if(u=t[t.length-1],s=a.getReferenceIdFromInstance(u),d=n[n.length-1],g=a.getReferenceIdFromInstance(d),(P=l.canCreateScopeLink({fromSideRefPID:s,toSideRefPID:g,fromSideInstPID:u,toSideInstPID:d,fromSideAbsPath:t,toSideAbsPath:n})).canCreateLink)if("ProcessImplementLink"===l.getScopeLinkType())l.createScopeLink(s,g,{onComplete:D,onFailure:v});else if(l.validateIfScoped(t,n))(p=I(t,n)).hasImplementLink?p.withSameProduct?l.createScopeLink(s,g,{onComplete:D,onFailure:v}):v(null,c.getNLSValue("ImplementBehavior.Validation.ImplLinkExists",{obj1:p.implementingName,obj2:p.implementedName})):(m=R(t,n),l.createScopeAndImplementLink(s,u,g,m,{onComplete:D,onFailure:v}));else{if(r.getPreferenceValue("skipVaidationIfScopedCheck")&&f.isAKindOf(void 0,"Provide"))return void l.createScopeLink(s,g,{onComplete:D,onFailure:v});v(null,c.getNLSValue("ImplementBehavior.Validation.ScopeNotValid"))}else v(null,P.errorMessage);else r.debug("Input parameters are invalid."),v()},I=function(t,n){var i,o,r,s,c,u,f=!1,g=!1,d=null,m=null;return i=e.is(t,"array")&&t.length>0?l.getImplLinksOfImplementing(t):null,e.is(i,"array")&&i.length>0&&(f=!0,e.is(n)&&(g=i.some(function(t){return e.equals(t.get("to"),n)})),s=(u=i[0]).getAttribute("from"),c=a.getReferenceModel(s),e.is(c)&&(m=c.get("V_Name")),o=u.getAttribute("to"),r=a.getReferenceModel(o),e.is(r)&&(d=r.get("V_Name"))),{hasImplementLink:f,withSameProduct:g,implementingName:m,implementedName:d}},P=function(e,t,n,i,o,a){var s=c.getNLSValue("ImplementBehavior.Consumption.LogMessage"),u=c.getNLSValue("ImplementBehavior.Consumption.Success"),f=c.getNLSValue("ImplementBehavior.Consumption.Failed"),g=r.log(s);l.createScopeAndImplementLink(e,t,n,i,{onComplete:function(){A(null,u,g,o)},onFailure:function(e,t){V(null,t,f,g,a)}})},p=function(t,n,i,o,a,s,u){var f=c.getNLSValue("ImplementBehavior.Consumption.LogMessage"),g=c.getNLSValue("ImplementBehavior.Consumption.Success"),d=c.getNLSValue("ImplementBehavior.Consumption.Failed"),m=null,p=r.log(f),P={instancesAndReferences:[],connections:[]},L={};L={computeResultReport:!0,onComplete:function(t,n,i){var o;e.is(n)?(A(t,g,p,a),n.connections.forEach(function(e){P.connections.push(e.toJSON())}),n.instancesAndReferences.forEach(function(e){P.instancesAndReferences.push(e.toJSON())}),r.notify("createStructure",P)):(e.is(i)&&e.is(i.resultReport)&&e.is(i.resultReport.GlobalErrors,"array")&&i.resultReport.GlobalErrors.length>0&&e.is(i.resultReport.GlobalErrors[0])&&e.is(i.resultReport.GlobalErrors[0].Messages)&&e.is(i.resultReport.GlobalErrors[0].Messages.UserMessage,"string")&&i.resultReport.GlobalErrors[0].Messages.UserMessage.length>0&&(m=i.resultReport.GlobalErrors[0].Messages.UserMessage),V(t,m,d,p,s)),e.is(i)&&e.is(i.resultReport)?(o=r.getBehavior("UXFactoryBehavior"),e.is(o)?o.create("MfgItemCreateReportUI",{title:c.getNLSValue("MfgItemConsumeReportUI.Dialog.Title"),report:i.resultReport,mode:"erroronly_report"}):r.debug("Result report is avialable in response, but uxFactoryBehavior is not avialable")):r.debug("Result report is not avialable in response")},onFailure:function(e,t){V(e,t,d,p,s)}},e.is(u)&&(L.insertSpareItemOnAssign=u),l.consumeImplementedItems(t,n,i,o,L)},h=function(n,i,o,r){var s,c,u;return e.is(n,"array")&&n.length>0&&l.isUnderScope(n)&&e.is(o,"array")&&o.length>0?(c=n,u=o,s=new t(function(e,t){L(c,u,e,t)})):s=function(e,n,i,o){return new t(function(t,r){var s=a.isReference(e)?e:a.getReferenceIdFromInstance(e),c=a.isReference(n)?n:a.getReferenceIdFromInstance(n);m(s,c,i,o,t,r)})}(i,r,n,o),s},y=function(e,n,i,o,r){var a,s,c,l,u;return a=e,s=n,c=i,l=o,u=r,new t(function(e,t){D(a,s,c,l,u,e,t)})},D=function(t,n,i,o,s,u,f){var g,d,m,p,P,L,h,I=[],C=[],y=c.getNLSValue("ImplementBehavior.CreateScope.LogMessage"),D=c.getNLSValue("ImplementBehavior.CreateScope.Success"),v=c.getNLSValue("ImplementBehavior.CreateScope.Failed"),E=r.log(y),N=function(e,t){V(e,t,v,E,f)},b=r.getBehavior("UXFactoryBehavior");const M="CREATE_PARTIALSCOPE"===s,k="STRETCH_PARTIALSCOPE"===s,O="DELETE_PARTIALSCOPE"===s,T="SWITCH_TO_FULLSCOPE"===s;P={onComplete:function(e,t){A(e,D,E,u),t.connections.forEach(function(e){C.push(e.toJSON())}),r.notify("createImplementLink",C)},onFailure:N,cmdAction:s};const F=function(){if(T)P.isSwitchToPartialScopeLink=T;else if(k){P.isStretchPartialScopeLink=k;const t=n[n.length-1];if(Array.isArray(h)){let n=h.indexOf(t);for(n+=1;n<h.length;n++)L=e.is(L)?L+","+h[n]:h[n]}P.targetPrdOccPath=L,P.targetProductID=p,p=l.getPartialScopeLinks(g)[0].get("to")}else if(O){if(P.isDeletePartialScopeLink=O,Array.isArray(h))for(let t=0;t<h.length;t++)L=e.is(L)?L+","+h[t]:h[t];P.targetPrdOccPath=L}M&&(P.isCreatePartialScopeLink=M,I=R(t,n)),l.manageScopeAndImplementLink(g,d,p,I,P)};if(e.is(t,"array")&&t.length>0){if(d=t[t.length-1],g=a.getReferenceIdFromInstance(d),m=a.getReferenceModel(g),!0===l.isScoped(g))return void N(null,c.getNLSValue("ImplementBehavior.Validation.ScopeLinkExists",{objectName:m.get("V_Name")}));if(M&&!0===l.isPartialScoped(g))return void N(null,c.getNLSValue("ImplementBehavior.Validation.PartialScopeLinkExists",{objectName:m.get("V_Name")}));if(k&&!1===l.isPartialScoped(g))return void N(null,c.getNLSValue("ImplementBehavior.Validation.NoPartialScopeLinkExists",{objectName:m.get("V_Name")}));if(e.is(n)&&e.is(n,"array")&&n.length>0){if(p=a.getReferenceIdFromInstance(n[n.length-1]),k){const e=l.getPartialScopeLinks(g)[0].get("to");if(p===e)return void N(null,c.getNLSValue("ImplementBehavior.Validation.StretchPartialScopeToSamePrd"))}}else{p=e.is(i)?i:l.getPartialScopeLinks(g)[0].get("to");const o=S(t);n=o}if(h=S(t),M)F();else if(null===h){if(!O)return void N(null,k?c.getNLSValue("ImplementBehavior.Validation.StretchPartialScopeImplBroken"):c.getNLSValue("ImplementBehavior.Validation.SwtichPartialScopeImplBroken"));b.showConfirmation(c.getNLSValue("Confirmation.AreYouSure"),c.getNLSValue("Confirmation.DeletePartialScopeImplBroken"),null,function(t){e.is(t,"boolean")&&t?F():f()})}else F()}else e.is(i)&&e.is(o)?(g=o,p=e.is(n)&&e.is(n,"array")&&n.length>0?a.getReferenceIdFromInstance(n[n.length-1]):i,d=null,F()):(r.debug("Input parameters are invalid."),N())},R=function(t,n){let i=[];if(!e.is(n))return i;const o=l.getPathsTillUpperScope(t,n),r=((t,n)=>{let i=null;const o=l.isUnderPartialScope(t);return e.is(o)&&o&&(i=l.getPathsTillUpperPartialScope(t,n)),i})(t,n);return i=o,Array.isArray(r)&&Array.isArray(o)?i=((...e)=>{let t=e[0];const n=e.length;for(let i=1;i<n;i++)e[i].length<t.length&&(t=e[i]);return t})(r,o):Array.isArray(r)&&(i=r),i},S=function(t){var n,i,o,r,s,c=function(t){var n,i=!1;return n=a.getReferenceModel(t),e.is(n)&&"PROCESS"===n.get("PPRTYPE")&&(i=!0),i};if(Array.isArray(t)){if(0===(n=t).length)return null;if(!c(n[n.length-1]))return null;if(!l.isPartialScoped(n))return null;if(l.isUnderPartialScope(n)){s=[],o=n.slice(0);do{if(!l.isPartialScoped(o))break;if(r=l.getImplLinksOfImplementing(o),!e.is(r)||r.length>1||0===r.length){s=null;break}s=r[0].get("to").concat(s),o=C(o)}while(Array.isArray(o))}else if(r=l.getImplLinksOfImplementing(n),e.is(r)){if(1!==r.length)return null;s=r[0].get("to")}else s=[]}else s=c(i=t)&&l.isScoped(i)?[]:null;return s},C=function(t){var n,i,o,r=null;return Array.isArray(t)&&t.length>0&&(o=l.findInstanceWhoseParentIsPartialScoped(t),e.is(o)&&(0===o.absPathIndex?i=o.instanceModel.get("isAggregatedBy"):n=t.slice(0,o.absPathIndex))),e.is(n)?r=n:e.is(i)&&(r=i),r},v=function(n,i){const o=a.isReference(n)?n:a.getReferenceIdFromInstance(n),s=a.isReference(i)?i:a.getReferenceIdFromInstance(i);return u={IDFrom:o,IDTo:s,type:l.getScopeLinkType()},new t(function(t,n){const i={url:"dsmfg/private/V0/MfgElement/connection/validateBrokenScope",method:"POST",headers:g.getHeaders({isAuthoringCtx:!0,isJsonOnly:!0}),data:e.Json.encode(u),onComplete:function(i){const a=!!e.is(i.isScopeLinkBroken,"boolean")&&i.isScopeLinkBroken;if(a){const e=r.getBehavior("UXFactoryBehavior"),i=c.getNLSValue("BrokenScope.Confirmation.Title"),l=c.getNLSValue("BrokenScope.Reason.Text"),u=function(e){e?t({isScopeLinkBroken:a,implementedRefId:s,implementingRefId:o}):n()};e.showConfirmation(i,l,null,u)}else t({isScopeLinkBroken:a,implementedRefId:s,implementingRefId:o})},onFailure:function(){n()}};g.webServiceRequest(i)});var u};let E=new n(o,r,a,s,c,l,u,f,g);return e.extend(E,{onStart:function(){},PartialScopeAction:{CREATE_PARTIALSCOPE:"CREATE_PARTIALSCOPE",STRETCH_PARTIALSCOPE:"STRETCH_PARTIALSCOPE",SWITCH_TO_FULLSCOPE:"SWITCH_TO_FULLSCOPE",DELETE_PARTIALSCOPE:"DELETE_PARTIALSCOPE"},isImplementLinkPossible:function(e,t){return l.isImplementLinkPossible(e,t)},getScopeLinksOfImplementing:function(e){return l.getScopeLinksOfImplementing(e)},getPartialScopeLinksOfImplementing:function(e){return l.getPartialScopeLinksOfImplementing(e)},createEngMadeFromItem:function(t,n){var i=n.get("PID");const o=c.getNLSValue("ImplementBehavior.createEngMadeFromItem.LogMessage"),a=c.getNLSValue("ImplementBehavior.createEngMadeFromItem.Success"),s=c.getNLSValue("ImplementBehavior.createEngMadeFromItem.Failed"),u=c.getNLSValue("ImplementBehavior.createEngMadeFromItem.NotSupportedType.Failed"),g=r.log(o);f.isAKindOf(n.get("type"),"CreateMaterial")||f.isAKindOf(n.get("type"),"ElementaryEndItem")?l.createEngMadeFromItem(t,i).then(t=>{if(e.is(t)){if(e.is(t.instancesAndReferences,"array")){const e=[];t.instancesAndReferences.forEach(t=>{t.isInstance()&&e.push(t)}),r.notify("instanceAdded",e)}e.is(t.connections,"array")&&r.notify("connectionAdded",[t.connections]),r.info(a,g)}}).catch(()=>{r.warn(s,g)}):r.warn(u,g)},consumeImplementedItems:function(n){var o,s,u,g,d={},m=new i(r.getBehavior("UXFactoryBehavior"),c);return e.is(n,"array")&&n.length>0?(r.notify("startProgress",d),o=t.allSettled((s=[],u=[],g=function(t,n,i,o){const s=c.getNLSValue("ImplementBehavior.Consumption.LogMessage"),u=c.getNLSValue("ImplementBehavior.Consumption.Success"),f=c.getNLSValue("ImplementBehavior.Consumption.Failed"),g=r.log(s),d=a.getReferenceModel(n.referencePID);l.consumeReferenceWithScopeLink(t,n.referencePID,n.targetReferencePID,"",{"PLMEntity.V_Name":d.get("V_Name"),"PLMEntity.V_description":"",V_Type:"DELAsmAssemblyModelDisciplines/Provide",type:"Provide"}).then(t=>{if(e.is(t)){if(e.is(t.instancesAndReferences,"array")){const e=[];t.instancesAndReferences.forEach(t=>{t.isInstance()&&e.push(t)}),e.length>0&&r.notify("instanceAdded",e)}e.is(t.connections,"array")&&r.notify("connectionAdded",[t.connections]),r.info(u,g)}i()}).catch(()=>{r.warn(f,g),o()})},n.forEach(function(i,o){var d=new t(function(t,s){var d=null,L=null,I=null,S=null,C=e.is(i.targetInstancePIDsArray)&&i.targetInstancePIDsArray.length>0?i.targetInstancePIDsArray:i.targetReferencePID;if(l.validateIfScoped(C,i.instancePIDsArray)){const g=a.getParentReferenceIdFromInstance(i.instancePID);if(e.is(g)&&l.isPartialScoped(g)){const t=l.getPartialScopeLinks(g);if(e.is(t)&&e.is(t[0])){const n=t[0].get("from");if(e.is(i.targetInstancePIDsArray)){let e=!1;for(const t of i.targetInstancePIDsArray)if(a.getReferenceIdFromInstance(t)===n){e=!0;break}e||(d=i.instancePIDsArray)}}}if(null===d&&(d=R(i.targetInstancePIDsArray,i.instancePIDsArray)),L=a.getReference(i.targetReferencePID),f.isAKindOf(L,"DELConstructionStructure")){const e=c.getNLSValue("ImplementBehavior.ConstructionStructureConsumption.Failed");return r.warn(e),void s(e)}const m=r.getPreferenceValue("insertSpareItemOnAssign");if(m&&(f.isAKindOf(L,"DELServiceAssemblyReference")||f.isAKindOf(L,"DELServiceKitReference")||f.isAKindOf(L,"DELServicePartReference")||f.isAKindOf(L,"DELServiceAttachingItemReference")))u.push(d),o===n.length-1?p(i.rootReferencePID,u,i.targetRootReferencePID,i.targetReferencePID,t,s,m):t();else if(f.isAKindOf(L,"Provide")||f.isAKindOf(L,"ProcessContinuousProvide")||f.isAKindOf(L,"ContinuousByProduct")||f.isAKindOf(L,"MBOMContinuousPhaseReference")||f.isAKindOf(L,"DELConstructionWorkElementEach")||f.isAKindOf(L,"DELConstructionWorkElementArea")||f.isAKindOf(L,"DELConstructionWorkElementLength")||f.isAKindOf(L,"DELServicePartReference")||f.isAKindOf(L,"DELServiceAttachingItemReference")||f.isAKindOf(L,"DELServiceSpareItemReference")||f.isAKindOf(L,"DELContinuousServicePartReference"))P(i.targetReferencePID,i.targetInstancePID,i.referencePID,d,t,s);else{I=e.is(i.targetInstancePIDsArray,"array")&&i.targetInstancePIDsArray.length>0?i.targetInstancePIDsArray:i.targetReferencePID,S=e.is(i.instancePIDsArray,"array")&&i.instancePIDsArray.length>0?i.instancePIDsArray:i.referencePID;const{ebomRootPID:r,ebomPathToScope:a,mbomRootPID:c}=l.getConsumptionInfoFromOccurence(I,S);u.push(a),o===n.length-1?p(r,u,c,i.targetReferencePID,t,s):t()}}else{const n=()=>h(i.targetInstancePIDsArray,i.targetReferencePID,i.instancePIDsArray,i.referencePID);if(r.getPreferenceValue("skipVaidationIfScopedCheck")){let o=!1;if(e.is(i.targetInstancePIDsArray,"array")&&i.targetInstancePIDsArray.length>0)o=l.isUnderScope(i.targetInstancePIDsArray);else{const t=l.getScopeLinks(i.targetRootReferencePID);o=e.is(t,"array")&&t.length>0}o?m.show(function(){t()},function(){g("ManufacturingAssembly",i,t,s)},function(){g("ManufacturingMadeFrom",i,t,s)}):n().then(t,s)}else n().then(t,s)}});s.push(d)}),s)).then(function(){r.notify("stopProgress",d)})):(r.debug("Input parameters are invalid."),o=t.reject("ImplementBehavior.Validation.InvalidInput")),o},reconnectScope:function(e,t,n,i){d(e,t,!1,n,i)},reviseAndReconnectScope:function(e,t,n,i){d(e,t,!0,n,i)},prereqChecksForReconnectScope:function(e,t,n,i,o){var a=r.getBehavior("ModelBehavior");"ReconnectScope"===e?a.isReadOnly(t,n,i,o):"ReviseAndReconnectScope"===e&&a.isLatestRevision(t,n,i,o)},managePartialScopeLink:function(n){let i,o={};return e.is(n,"object")?(r.notify("startProgress",o),i=y(n.implementingAbsPath,n.implementedAbsPath,n.implementedPID,n.implementingPID,n.cmdAction).then(()=>{r.notify("stopProgress",o)}).catch(e=>{r.notify("stopProgress",o)})):(r.debug("Input parameters are invalid."),i=t.reject("ImplementBehavior.Validation.InvalidInput")),i},updateDataMaterializationLinkUsage:function(n,i,o){return new t(function(t,r){var a={rpConnectionPID:n,newValue:i},s={url:"dsmfg/private/V0/invoke/updateDataMaterializationLinkUsage",method:"POST",data:e.Json.encode(a),context:self,onComplete:function(e){t(e)},onFailure:function(t){e.is(o.onFailure,"function")&&o.onFailure(t),r()}};g.webServiceRequest(s)})},validateBrokenScopeLinkPromise:function(e,t){return v(e,t)}})}}});