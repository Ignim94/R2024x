define("DS/ENOBusinessRuleClient/Services",["UWA/Class","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t,n){return e.extend({init:function(e){e&&(this.context=e)},runBusinessRuleForUI:function(e,t,n,i){var s="/resources/v1/collabServices/businessrule/op/run",a=(this.service,this.tenant,{BRInfo:{brID:e},valuate:t});a&&this._post(a,{path:s},function(e){n(e)},function(e){i(e)})},_post:function(e,n,i,s){var a=JSON.stringify(e),o=n.path+"?tenant="+(this.context.tenant?this.context.tenant:"OnPremise"),r=this.getHeaders();this.get3DSpaceBaseUrl(function(e){var n=e+o;t.authenticatedRequest(n,{method:"POST",headers:r,timeout:864e5,data:a,type:"json",onComplete:function(e){i(e)},onFailure:function(e){s(e)},onTimeout:function(e){s(e)}})})},getHeaders:function(e){var t={Accept:"application/json","Content-Type":"application/json","Accept-Language":widget.lang};for(var n in e||(e=this.context.header),e){var i=e[n];"SecurityContext"===n&&(i=encodeURIComponent(i)),t[n]=i}return t},get3DSpaceBaseUrl:function(e){var t=this;this.baseUrl?e(this.baseUrl):n.getPlatformServices({onComplete:function(n){t.baseUrl=n[0]["3DSpace"],e(t.baseUrl)}})}})});