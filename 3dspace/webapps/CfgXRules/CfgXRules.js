define("DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum",[],function(){"use strict";var e={binary_operator_id:"binary_operator_id",binary_operator:"binary_operator",and_id:"and_id",or_id:"or_id",imply_id:"imply_id",eqvlt_id:"eqvlt_id",unary_operator_id:"unary_operator_id",not_id:"not_id",unary_operator:"unary_operator",open_id:"open_id",opening_separator:"opening_separator",close_id:"close_id",closing_separator:"closing_separator",closing_separator_id:"closing_separator_id",opening_separator_id:"opening_separator_id"};return e}),define("DS/CfgXRules/Commons/Utils/dictionaryCfgConverter",[],function(){"use strict";var e={convertFromPhysicalToLogical16X:function(e){var t=JSON.stringify(e);t=(t=t.replace(/pid:/g,"")).replace(/lid:/g,""),t=JSON.parse(t);var n=0,a=0;for(n=0;n<t.features.length;n+=1){var s=t.features[n];for(s.id=s.logicalId,s.logicalId=null,delete s.logicalId,a=0;a<s.options.length;a+=1){var i=s.options[a];i.id=i.parentRelLogicalId,i.parentRelLogicalId=null,delete i.parentRelLogicalId}}return t},convertFromV2toV1:function(e){var t={variantClasses:[],options:[],packs:[],rules:[]},n=0,a=0,s=0,i=0;if(e.portfolioClasses){var o=e.portfolioClasses;for(n=0,n=0;n<o.length;n+=1){var r=o[n];if(r.portfolioComponents)for(a=0,a=0;a<r.portfolioComponents.length;a+=1){var l=r.portfolioComponents[a];if(l.variantClasses)for(s=0;s<l.variantClasses.length;s+=1){var c={};if(c.id=l.variantClasses[s].id,c.image=l.variantClasses[s].image,c.name=l.variantClasses[s].name,c.variants=[],l.variantClasses[s].variants)for(i=0;i<l.variantClasses[s].variants.length;i+=1){var p={};p.id=l.variantClasses[s].variants[i].id,p.name=l.variantClasses[s].variants[i].name,p.image=l.variantClasses[s].variants[i].image,c.variants.push(p)}t.variantClasses.push(c)}if(l.options)for(s=0;s<l.options.length;s+=1){var d={};d.id=l.options[s].id,d.name=l.options[s].name,d.image=l.options[s].image,t.options.push(d)}if(l.packs)for(s=0;s<l.packs.length;s+=1){var u={};u.id=l.packs[s].id,u.name=l.packs[s].name,u.image=l.packs[s].image,t.packs.push(u)}}}}else t=JSON.parse(JSON.stringify(e));return t}};return e}),define("DS/CfgXRules/Commons/Utils/ServicesUrlsCatalog",[],function(){"use strict";var e={},t=function(){var e=location.pathname.substring(0,location.pathname.indexOf("/",1));return(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")).concat(e)};return e.solverUrlEndPoint=t()+"/resources/cfg/configurator/solver/",e.solverUrlEndPoint_newLib=t()+"/resources/rulesolver/solver/",e}),define("DS/CfgXRules/Commons/Presenters/VCSTablePresenter",["UWA/Class/View","UWA/Class/Listener","DS/TreeModel/TreeNodeModel","DS/Tree/TreeListView","DS/TreeModel/TreeDocument","DS/Tree/TreeNodeView","DS/Tree/Tree","DS/Tree/Manager","DS/UIKIT/Input/Text","DS/Controls/Button","DS/CoreEvents/ModelEvents","i18n!DS/CfgXRules/assets/nls/Commons/VariabilityCriteriaSelector","css!DS/CfgXRules/Commons/Presenters/VCSTablePresenter"],function(e,t,n,a,s,i,o,r,l,c,p,d){"use strict";var u=10,h=40,m=800;var g=e.extend({tagName:"div",className:"generic-detail",params:{},init:function(e){var t=this;UWA.extend(e,this.defaults,!0),this._modelEvents=new p,e.actions&&(this.actionsTreeListView=new f({actions:e.actions,_modelEvents:this._modelEvents})),e.dictionaryJSON&&(void 0===e.dictionaryJSON._version||"1.0"===e.dictionaryJSON._version||"v1"===e.dictionaryJSON._version||"V1"===e.dictionaryJSON._version?this.dicoVersion="1.0":"2.0"!==e.dictionaryJSON._version&&"v2"!==e.dictionaryJSON._version&&"V2"!==e.dictionaryJSON._version||(this.dicoVersion="2.0")),this.tableListView=new v(UWA.merge({viewIdentifier:e.viewIdentifier,dicoVersion:this.dicoVersion,dictionaryJSON:e.dictionaryJSON,actionsTreeListView:this.actionsTreeListView,_modelEvents:this._modelEvents,getAllChildrenOnParentSelection:e.getAllChildrenOnParentSelection,getParentOnChildSelection:e.getParentOnChildSelection},e.contentTreeOptions)),this._parent(e),this.tableListView._loadDictionaryJsonUpdated.bind(this.tableListView),this.tableListView._loadDictionaryJsonUpdated(),this.tableListView.options.selectionData.displayCount=this.tableListView.options.selectionData.totalCount=this.tableListView.getNodeCount(this.tableListView),console.log("Total Node count : "+this.tableListView.options.selectionData.totalCount),this.subscribe("internal_onAddAction",function(e){if(void 0!==e.nodeRowID){var n=t.emptyDicoObject();n.clickedId=null;var a=t.tableListView.getManager().getTreeNodeModelFromRowID(e.nodeRowID);if(n.clickedId=a.options.id,"1.0"===t.dicoVersion)if(a._parentNode&&a._parentNode._isTrueRoot())switch(a.options.criteriaType){case"Features":n.dictionary.features.push({id:a.options.id,name:a.options.label,options:t.getArrayOfChildren(a)})}else(s=a._parentNode)&&n.dictionary.features.push({id:s.options.id,name:s.options.label,options:[{id:a.options.id,name:a.options.label}]});else if("2.0"===t.dicoVersion){var s;if(a._parentNode&&a._parentNode._isTrueRoot())switch(a.options.criteriaType){case"Variants":n.dictionary.variantClasses.push({id:a.options.id,name:a.options.label,variants:t.getArrayOfChildren(a)});break;case"Options":n.dictionary.options.push({id:a.options.id,name:a.options.label});break;case"Packs":n.dictionary.packs.push({id:a.options.id,name:a.options.label})}else(s=a._parentNode)&&n.dictionary.variantClasses.push({id:s.options.id,name:s.options.label,variants:[{id:a.options.id,name:a.options.label}]})}t._modelEvents.publish({event:"onAddAction",data:n,context:null})}})},render:function(){var e=this,t=UWA.createElement("div",{styles:{width:"calc( 100% - 40px )",height:"100%",display:"inline-block"}});if(t.addContent(this.tableListView),this.container.addContent(t),this.actionsTreeListView){var n=UWA.createElement("div",{styles:{width:"40px",height:"100%",display:"inline-block"}});n.addContent(this.actionsTreeListView),this.actionsTreeListView.elements.container.setStyle("display","inline"),this.container.addContent(n)}this.container.style.height="100%",this.container.style.display="flex";var a=this.tableListView.getManager(),s=this.actionsTreeListView?this.actionsTreeListView.getManager():void 0;return[{manager:a,overflowType:"overflow-y",status:"hidden"},{manager:s,overflowType:"overflow-x",status:"disabled"}].forEach(function(e){e.manager&&e.manager.onReady(function(){var t=this.elements.scroller;t&&t.elements.container.setStyle(e.overflowType,e.status)})}),a.onReady(function(){e.actionsTreeListView&&e.actionsTreeListView.getManager().onReady(function(){var t=e.actionsTreeListView.getManager().elements.scroller;e.tableListView.getManager().elements.scroller.elements.container.addEvent("wheel",function(e){if(e.preventDefault(),a.getPoolNumberOfRows()!==a.getNumberOfRows()-1){UWA.Event.wheelDelta(e);for(var n=function(e){var t=0,n=0,a=0,s=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),a=t*u,s=n*u,"deltaY"in e&&(s=e.deltaY),"deltaX"in e&&(a=e.deltaX),(a||s)&&e.deltaMode&&(1===e.deltaMode?(a*=h,s*=h):(a*=m,s*=m)),a&&!t&&(t=a<1?-1:1),s&&!n&&(n=s<1?-1:1),{spinX:t,spinY:n,pixelX:a,pixelY:s}}(e),s=Math.abs(n.pixelY),i=0;i<=s;){i+=10;var o=t.elements.container.scrollTop+10*n.spinY;t.elements.container.scrollTop=o}t.setPosition({x:0,y:-t.elements.container.scrollTop},!1),t._modelEvents.publish({event:"SCROLL",context:t})}}),t.onScroll(function(t){var n=this.getPosition(),a=e.tableListView.getManager().elements.scroller.getPosition();e.tableListView.getManager().elements.scroller.setPosition({x:0,y:n.y},!1),e.tableListView.getManager().elements.scroller.elements.container.scrollTop=Math.abs(n.y),e.tableListView.getManager().elements.scroller.elements.container.scrollLeft=Math.abs(a.x),e.tableListView.getManager().elements.scroller._modelEvents.publish({event:"SCROLL",data:{originatedFrom:"ActionScroller"},context:e.tableListView.getManager().elements.scroller})})})}),this.publish("onDisplayAndSelCountUpdate",this.tableListView.options.selectionData,null),this},subscribe:function(e,t){this._modelEvents&&this._modelEvents.subscribe({event:e},t)},publish:function(e,t,n){this._modelEvents&&this._modelEvents.publish({event:e,data:t,context:n})},emptyDicoObject:function(){return new function(e){var t;return e&&"1.0"===e?t={dictionary:{_version:"1.0",features:[],options:[]}}:e&&"2.0"===e&&(t={dictionary:{_version:"2.0",variantClasses:[],options:[],packs:[]}}),t}(this.dicoVersion)},getArrayOfChildren:function(e){var t=[];e&&(e.getChildren()||[]).forEach(function(e){e&&0==e.isHidden()&&t.push({id:e.options.id,name:e.options.label})});return t}}),f=a.extend(t,{defaults:{apiVersion:2,height:"100%",width:"10%",display:"inline",allowUnsafeHTMLContent:!1,columns:[{text:"",dataIndex:"tree",isHidden:!0},{text:"",dataIndex:"actionCol",width:"auto",isSortable:!1,isEditable:!1,isSelectable:!1,onCellRequest:function(e){e.isHeader||e.cellView.reuseCellContent("_plusActionBtn")}}],selection:{nodes:!1,cells:!1,rowHeaders:!1,columnHeaders:!1,unselectAllOnEmptyArea:!1,toggle:!0,canMultiSelect:!1}},init:function(e){var t=this;UWA.extend(e,this.defaults,!0),e.treeDocument=new s({useAsyncPreExpand:!0,shouldAcceptDrop:function(e){return!1},shouldAcceptDrag:function(e){return!1},shouldBeEditable:function(e){return!1},shouldBeSelected:function(e){return!1}}),this._parent(e),UWA.is(this.options.actions,"array")&&this.options.actions.forEach(function(e){t.getManager().registerReusableCellContent({id:"_"+e.icon+"ActionBtn",buildContent:function(){var n=new c({icon:e.icon,displayStyle:"lite",allowUnsafeHTMLLabel:!1});return n.getContent().setStyle("margin-right","10"),n.getContent().addEvent("click",function(){var n=this.parentNode.dsView.getCellInfos();n&&t.options._modelEvents.publish({event:"internal_"+e.event,data:{nodeRowID:n.virtualRowID},context:null})}),n}})})}}),v=a.extend(t,{defaults:{treeDocument:{},apiVersion:2,height:"100%",width:"80%",allowUnsafeHTMLContent:!1,expanderStyle:"triangle",selection:{nodes:!0,cells:!1,rowHeaders:!0,columnHeaders:!0,unselectAllOnEmptyArea:!0,toggle:!0,canMultiSelect:!0},node:[],criteriaFilters:{searchData:{},searchText:"",checkBoxSts:{Variants:!0,Options:!0,Packs:!0}},events:{onChangeSelection:function(e){this.options._modelEvents.publish({event:"onDisplayAndSelCountUpdate",data:this.options.selectionData,context:null})}},onDragStartCell:function(e,t){if(t){var n={};if(this._parentObject.options.treeDocument){var a=this._parentObject.options.treeDocument.getSelectedNodes();a&&UWA.is(a,"array")&&a.forEach(function(e){var t=e.options.criteriaType,s=e.options.id,i=e.getLabel();if(e.isRoot())if(e.hasChildren()){var o=[];e.getChildren().forEach(function(e){-1!==a.indexOf(e)&&o.push({name:e.getLabel(),id:e.options.id})}),"Variants"==t?(void 0===n.variantClasses&&(n.variantClasses=[]),n.variantClasses.push({name:i,id:s,variants:o})):"Features"==t&&(void 0===n.features&&(n.features=[]),n.features.push({name:i,id:s,options:o}))}else{var r=t.toLowerCase();void 0===n[r]&&(n[r]=[]),n[r].push({name:i,id:s})}}),this._parentObject.options.dicoVersion?n._version=this._parentObject.options.dicoVersion:n._version="1.0",console.log("Dragged Items Dico: "+JSON.stringify(n)),-1!==navigator.userAgent.indexOf("Trident")&&navigator.userAgent.indexOf("MSIE"),e.dataTransfer.setData("text",JSON.stringify(n)),e.dataTransfer.effectAllowed="all"}}e.dataTransfer.effectAllowed="all"},applyCriteriaFilter_v2:function(e){e.filterData;var t=e.filterData.searchValue;t=t.toLowerCase();var n=e.filterData.typeFilter?e.filterData.typeFilter:void 0,a=this.options.treeDocument.getRoots();console.log("TreeDocument Root Nodes Count: "+a.length);a.length,a&&a.length>0&&(a.filter(function(e){var a=!1,s=e.getLabel().toLowerCase(),i=e.getChildren();if(n){if(!1!==n[e.options.criteriaType]||e.isHidden())if(!0===n[e.options.criteriaType]&&e.isHidden()&&s.contains(t))e.show(),""===t&&(null===i||i.length<0)&&(a=!0);else{if(!1===n[e.options.criteriaType]&&e.isHidden())return;!0!==n[e.options.criteriaType]||e.isHidden()||""===t&&(null===i||i.length<0)&&(a=!0)}else e.hide(),a=!0;if(a)return}var o=[];i&&i.length>0&&(i.length,o=i.filter(function(e){return e.getLabel().toLowerCase().contains(t)?(e.isHidden()&&e.show(),!0):(e.isHidden()||e.hide(),!1)})),e.isHidden()&&(s.contains(t)||o.length>0)?e.show():!e.isHidden()&&!s.contains(t)&&o.length<=0&&e.hide()}),this.options.selectionData.displayCount=this.getVisibleNodeCount(),this.options._modelEvents.publish({event:"onDisplayAndSelCountUpdate",data:this.options.selectionData,context:null}))},applyCriteriaFilter_v1:function(e){var t=0,n=e.filterData,a=e.filterData.searchValue;a=a.toLowerCase();var s=e.filterData.typeFilter?e.filterData.typeFilter:void 0;this.options.treeDocument.getRoots().forEach(function(e){var i=[];if(s[e.options.criteriaType]){for(var o=0;o<n.savedAttributes.length+1;o++){var r=e.getLabel().toLowerCase(),l=1,c=1;if(a=o===n.savedAttributes.length?n.value.toLowerCase():n.savedAttributes[o].value.toLowerCase(),e.getChildren())for(var p,d=e.getChildren(),u=0;u<d.length;u++){for(var h=d[u],m=0;m<n.savedAttributes.length+1;m++){l=1,c=1;if(p=m===n.savedAttributes.length?n.value.toLowerCase():n.savedAttributes[m].value.toLowerCase(),!h.getLabel().toLowerCase().contains(p)){c=0;break}c=1}1===c?(h.show(),i.push(h)):h.hide()}if(!r.contains(a)){l=0;break}l=1}1===l?e.show():i.length>0?e.show():e.hide()}else e.hide();e.getChildren()?e.isHidden()?t+=e.getChildren().length:t+=e.getChildren().length-e.getVisibleChildren().length:"Variants"!==e.options.criteriaType&&e.isHidden()&&(t+=1)}),this.options.selectionData.displayCount=this.options.selectionData.totalCount-t,this.options._modelEvents.publish({event:"onDisplayAndSelCountUpdate",data:this.options.selectionData,context:null})}},getNodeCount:function(){var e=0;if(this.options.treeDocument)e=function e(t){var n=0;t&&t.hasChildren()&&(n=t.getChildren().length,t.getChildren().forEach(function(t){n+=e(t)}));return n}(this.options.treeDocument._getTrueRoot());return e},getVisibleNodeCount:function(){var e=0;if(this.options.treeDocument)e=function e(t){var n=0;t&&t.hasChildren()&&null!==t.getVisibleChildren()&&(n=t.getVisibleChildren().length,t.getVisibleChildren().forEach(function(t){n+=e(t)}));return n}(this.options.treeDocument._getTrueRoot());return e},_loadDictionaryJsonUpdated:function(){console.log("Loading dictionary");if(this.dicoVersion)switch(this.dicoVersion){case"v1":case"V1":case"1.0":var e=this.options.dictionaryJSON.features?this.options.dictionaryJSON.features:[],t=this.options.actionsTreeListView.options.treeDocument._getTrueRoot(),n=this.options.treeDocument._getTrueRoot();this.getTreeNodeModelFromDicoObject_v02(n,t,"Features","Configuration Feature",e);break;case"v2":case"V2":case"2.0":var a=this.options.dictionaryJSON.options,s=this.options.dictionaryJSON.packs,i=this.options.dictionaryJSON.variantClasses;t=this.options.actionsTreeListView.options.treeDocument._getTrueRoot(),n=this.options.treeDocument._getTrueRoot();this.getTreeNodeModelFromDicoObject_v02(n,t,"Options",d.Option,a),this.getTreeNodeModelFromDicoObject_v02(n,t,"Packs",d.Pack,s),this.getTreeNodeModelFromDicoObject_v02(n,t,"Variants",d.VariantClass,i);break;default:console.log("Incorrect dictionary version/format: "+this.options.dictionaryJSON._version)}},init:function(e){var t=this;UWA.extend(e,this.defaults,!0),e.treeDocument=new s({useAsyncPreExpand:!0,shouldAcceptDrop:function(){return!1},shouldAcceptDrag:function(){return!0},shouldBeEditable:function(){return!1},shouldBeSelected:function(){return!0}});var n=e.treeDocument.getXSO();n.onAdd(function(e){if(e.isSelectionChangeFromUI())if(e.hasChildren()){var n=[];t.options.getAllChildrenOnParentSelection&&(e.selectAll(),e.getChildren().forEach(function(e){n.push({id:e.options.id,children:[]})}),console.log(">> After node.selectall() call")),{selection:[{id:e.options.id,children:n}],eventOrigin:t.options.viewIdentifier}}else if(e.getParent().isRoot())if(t.options.getParentOnChildSelection){var a=e.getParent();!1===a.isSelected()&&a.select(),{selection:[{id:a.options.id,children:[{id:e.options.id,children:[]}]}],eventOrigin:t.options.viewIdentifier}}else({selection:[{id:e.options.id,children:[]}],eventOrigin:t.options.viewIdentifier})}),n.onRemove(function(e){if(e.isSelectionChangeFromUI())if(e.hasChildren()){var n=[];(t.options.getAllChildrenOnParentSelection||t.options.getParentOnChildSelection)&&(e.unselectAll(),e.getChildren().forEach(function(e){n.push({id:e.options.id,children:[]})}))}else if(e.getParent().isRoot())if(t.options.getParentOnChildSelection){var a=e.getParent(),s=0;e.getParent().getChildren().forEach(function(e){e.isSelected()&&s++}),0===s&&a.unselect(),{selection:[{id:a.options.id,children:[{id:e.options.id,children:[]}]}],eventOrigin:t.options.viewIdentifier}}else({selection:[{id:e.options.id,children:[]}],eventOrigin:t.options.viewIdentifier})}),this._parent(e),this.dicoVersion=this.options.dicoVersion,this.elements.container.style.height="100%",this.options._modelEvents.subscribe({event:"onContentFilterCriteriaChange"},function(e){t.options.treeDocument.prepareUpdate(),t.options.applyCriteriaFilter_v2.call(t,e),t.options.treeDocument.pushUpdate()}),this.options.treeDocument._bindEventOnDocument("postExpand",function(e){e.parent&&e.parent.options.actionNode.expand()}),this.options.treeDocument._bindEventOnDocument("postCollapse",function(e){e.parent&&e.parent.options.actionNode.collapse()}),this.options.treeDocument._bindEventOnDocument("hide",function(e){e.data.nodeModel.options.actionNode,e.data.nodeModel.options.actionNode.hide()}),this.options.treeDocument._bindEventOnDocument("show",function(e){e.data.nodeModel.options.actionNode,e.data.nodeModel.options.actionNode.show()})},getTreeNodeModelFromDicoObject_v02:function(e,t,n,a,s){var i=this;if(s&&UWA.is(s,"array")){s.forEach(function(s){var o=i.createTreeNodeFromDicoItem(n,a,s);e.addChild(o),t.addChild(o.options.actionNode)})}},getTreeNodeModelFromDicoObject_02:function(e,t,n){var a=this;if(n&&UWA.is(n,"array")){var s=[],i=[];return n.forEach(function(n){s.push(a.createTreeNodeFromDicoItem(e,t,n)),i.push(a.createActionsTreeNodeForDicoItem(e,t,n))}),{contentTreeNodes:s,actionsTreeNodes:i}}if(n&&UWA.is(n,"object"))return a.createTreeNodeFromDicoItem(e,n)},getDummyTreeNodeModelFromDicoObject:function(e,t,n){for(var a=[],s=0;s<n;s++)a.push(this.createTreeNodeFromDicoItem(e,t,{id:"x"+s,name:"x_"+s}));return a},createTreeNodeFromDicoItem:function(e,t,a){var s=this.options.columns,i="",o={};s.forEach(function(e){var n=e.valueAttribute;e&&"tree"==e.dataIndex?i=a[n]?a[n]:a.attributes?a.attributes[n]:UWA.is(a.get,"function")?a.get(n):"":"type"===n.toLowerCase()?("Configuration Option"!==t&&"Configuration Feature"!==t||(t="ConfigurationFeature"===a[n]?d.ConfigurationFeature:"ConfigurationOption"===a[n]?d.ConfigurationOption:"VariabilityGroup"===a[n]?d.VariabilityGroup:"VariabilityOption"===a[n]?d.VariabilityOption:"VariantValue"===a[n]?d.VariantValue:a[n]),o[n]=t):o[n]=a[n]?a[n]:a.attributes?a.attributes[n]:UWA.is(a.get,"function")?a.get(n):""});var r=new n({id:a.id,label:i,criteriaType:e,children:null,grid:o,actionNode:new n({id:a.id,label:"",children:[],grid:{actionCol:""}})});return"Variants"===e&&UWA.is(a.variants,"array")&&a.variants.length>0?this.getTreeNodeModelFromDicoObject_v02(r,r.options.actionNode,e,d.Variant,a.variants):"Features"===e&&UWA.is(a.options,"array")&&a.options.length>0&&this.getTreeNodeModelFromDicoObject_v02(r,r.options.actionNode,"Options","Configuration Option",a.options),r},createActionsTreeNodeForDicoItem:function(e,t,a){return new n({id:a.id,label:"",criteriaType:e,children:[],grid:{actionCol:""}})}});return g}),define("DS/CfgXRules/Commons/Presenters/SlideInPanel",["UWA/Class/View","UWA/Class/Listener","UWA/Class/Events","DS/UIKIT/Input/Button","DS/Windows/DockingElement","css!DS/CfgXRules/Commons/Presenters/SlideInPanel"],function(e,t,n,a,s){"use strict";var i=e.extend({init:function(e){this.viewContent="",e.viewContent&&(this.viewContent=e.viewContent);var t=this;this.listenTo(this.viewContent,"onCloseAction",function(){t.dispatchEvent("onCloseAction")}),this._parent.apply(this,arguments)},render:function(){var e=this,t=new a({value:"Ok",className:"primary"});t.addEvent("onClick",function(){e.dispatchEvent("onOkAction")});var n=new a({value:"Cancel"});n.addEvent("onClick",function(){e.dispatchEvent("onCancelAction")});var s=UWA.createElement("div",{html:[t,n],class:"modal-footer",styles:{width:"100%",flexShrink:"1"}}),i=UWA.createElement("div",{styles:{width:"100%",height:"100%",display:"flex",flexDirection:"column"}}),o=new UWA.createElement("div",{html:this.viewContent,class:"slidein-view-content"});return i.addContent(o),this.options.actionPanelRequired&&!0===this.options.actionPanelRequired&&i.addContent(s),this.container.setContent(i),this.container.setStyles({position:"absolute",top:"0px",width:"100%",height:"100%"}),this}});return UWA.Class.extend(n,t,{init:function(e,t){this._parent(),this.parentContainer=e.parentContainer,this.slideInMode="frame",this.isShown=!1,this.slideInSize=e.slideInWidth?e.slideInWidth:300;var n=300;if(this.allowResize=!e.isModal||!1===e.isModal,this.allowResize||(this.slideInMode="over"),this.parentContainer){var a=this.parentContainer.getSize().width;UWA.is(a,"number")&&(n=a*(1/3)),n>this.slideInSize&&(this.slideInSize=n)}this.viewContent=new i(e),this.options=e,this.viewContent.render()},show:function(){var e=this.parentContainer.getElement(".slidein-container");e&&(e.remove(),e.destroy()),this.panelContainer=new s({side:WUXDockAreaEnum.RightDockArea,dockingZoneContent:this.viewContent,dockingZoneSize:this.slideInSize,collapsibleFlag:!1,freeZoneContent:UWA.createElement("div",{styles:{backgroundColor:"#f9f9f9",opacity:.5,height:"100%",width:"100%"}})}),this.panelContainer.inject(this.parentContainer,"before");var t=this.panelContainer.getContent();t.addClassName("slidein-container"),t.addClassName("slidein-container-"+this.slideInMode);var n=this;this.listenTo(this.viewContent,"onCancelAction",function(){UWA.is(n.options.onCancelAction,"function")&&n.options.onCancelAction(n.options.viewContent),n.hide()}),this.listenTo(this.viewContent,"onOkAction",function(){UWA.is(n.options.onOkAction,"function")&&n.options.onOkAction.call(this,n.options.viewContent),n.hide()}),this.listenTo(this.viewContent,"onCloseAction",function(){n.hide()}),this.isShown=!0,this.allowResize&&(this.listenTo(t,"dockResize",function(){n.resizePanel()}),"undefined"!=typeof widget&&this.listenTo(widget,"onResize",function(){this.resizeContainer()}),this.resizeContainer()),this.mutationObserver=new MutationObserver(function(e){e.forEach(function(e){e.target&&e.target.style&&"none"===e.target.style.display&&n.hide()})}),this.mutationObserver.observe(this.parentContainer,{attributes:!0,attributeFilter:["style"]}),UWA.is(this.options.onShowPanel,"function")&&this.options.onShowPanel(this.options.viewContent),this.dispatchEvent("onShow")},hide:function(){this.mutationObserver.disconnect(),this.allowResize&&this.parentContainer.setStyles({width:"100%"}),this.isShown=!1,this.dispatchEvent("onHide"),UWA.is(this.options.onHidePanel,"function")&&this.options.onHidePanel(this.options.viewContent);var e=this.panelContainer.getContent();e.removeClassName("slidein-container-"+this.slideInMode),this.panelContainer.remove(),e.remove(),this.stopListening()},toggle:function(){this.isShown?this.hide():this.show()},resizePanel:function(){this.panelContainer.getContent();"frame"===this.slideInMode?this.parentContainer.setStyles({width:"calc( 100% - "+this.panelContainer.dockingZoneSize+"px )"}):this.parentContainer.setStyles({width:"100%"})},resizeContainer:function(){var e="undefined"!=typeof widget?widget.getViewportDimensions():this.parentContainer.getSize(),t=this.panelContainer.getContent();t.isInjected()&&(t.removeClassName("slidein-container-"+this.slideInMode),e.width>768?this.slideInMode="frame":this.slideInMode="over",t.addClassName("slidein-container-"+this.slideInMode),this.panelContainer.dockingZoneSize=this.slideInSize,this.isShown&&this.resizePanel())}})}),define("DS/CfgXRules/Commons/Presenters/VCSTilePresenter",["UWA/Class/View","UWA/Class/Collection","UWA/Class/Model","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/Views/Layout/GridView","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Views/Layout/PanelSlider/PanelSlider","DS/W3DXComponents/Views/Layout/ActionsView","DS/UIKIT/DropdownMenu","DS/W3DXComponents/Collections/ActionsCollection","DS/CoreEvents/ModelEvents","DS/WebappsUtils/WebappsUtils","i18n!DS/CfgXRules/assets/nls/Commons/VariabilityCriteriaSelector","css!DS/CfgXRules/Commons/Presenters/VCSTilePresenter"],function(e,t,n,a,s,i,o,r,l,c,p,d,u,h){var m=t.extend({init:function(e,t){(t=t||{includePrarentWithChild:!0})&&t.parentModel&&(this.parentModel=t.parentModel),this.includePrarentWithChild=t.includePrarentWithChild,this.sortOptions={order:"ASC",attribute:"name"},this._parent(e,t)},getTitle:function(){var e="";return this.parentModel&&(e=this.parentModel.get("name")),e},getParentCollection:function(){var e=this;return this.parentModel&&(e=this.parentModel.collection),e},filterModel:function(e,t){var n=!0;if(this.filterData){var a=e.get("name"),s=e.get("type"),i="";if("Variant Class"==s||"Variants"==s?i="Variants":"Options"==s?i="Options":"Packs"==s&&(i="Packs"),i&&this.filterData.typeFilter&&0==this.filterData.typeFilter[i]&&(n=!1),n&&this.filterData.searchValue&&!a.toLowerCase().contains(this.filterData.searchValue.toLowerCase())){n=!1;var o=e.get("items");if(o&&UWA.is(o,"array")&&o.length>0)for(var r=0;r<o.length;r++)if(o[r].name&&o[r].name.toLowerCase().contains(this.filterData.searchValue.toLowerCase())){n=!0;break}}}return n},getCollectionSortComponent:function(){var e=this;if(!this.sortComponent){var t=[{value:"name",text:u.SortByName},{value:"creator",text:u.SortByCreator},{value:"modifiedDate",text:u.SortByModifiedDate}],n=UWA.createElement("div",{html:u.SortByName,styles:{display:"inline-block",color:"#368ec4",minWidth:"34px",padding:"0px 5px"}}),a=(new l({target:n,items:t,events:{onClick:function(t,a){console.log(a),a.value&&(n.setContent(a.text?a.text:a.value),e.sortOptions.attribute=a.value,e.sortCollection())}}}),UWA.createElement("div",{styles:{display:"inline-block"}})),s=new r({collection:new c([{text:"sort",icon:"down",title:u.Sort,order:"ASC"}]),events:{onActionClick:function(t,n){var a=t.model.get("order");"ASC"==a?(t.model.set("icon","up"),t.model.set("order","DESC"),a="DESC"):"DESC"==a?(t.model.set("icon","down"),t.model.set("order","ASC"),a="ASC"):(a="ASC",t.model.set("icon","down"),t.model.set("order","ASC")),t.render(),e.sortOptions.order=a,e.sortCollection()}}});a.setContent(s.render()),this.sortComponent=UWA.createElement("div",{html:[{tag:"span",html:u.SortBy+":"},n,a],styles:{display:"flex",alignItems:"center"}})}return this.sortComponent},sortCollection:function(){if(this.sortOptions){var e=this.sortBy(this.sortOptions.attribute),t=!0;"DESC"==this.sortOptions.order&&(t=!1),this.dispatchEvent("onSortCollection",[e,t])}},getSelectedDictionary:function(e){var t={variantClasses:[],options:[],packs:[]},n=[],a=[],s=[],i=[],o=[];UWA.is(e,"array")?o=e:e&&o.push(e);var r=this;return o.forEach(function(e){switch(e.get("type")){case"Variant Class":var o={id:e.get("id"),name:e.get("name"),variants:[]};e.get("items").forEach(function(e){var t={id:e.id,name:e.name};o.variants.push(t)}),n.push(o);break;case"Variants":if(1==r.includePrarentWithChild&&r.parentModel){var l=r.parentModel.get("id"),c=r.parentModel.get("name");n&&n.forEach(function(e){e.id==l&&(o=e)}),o?o.variants.push({id:e.get("id"),name:e.get("name")}):(o={id:l,name:c,variants:[{id:e.get("id"),name:e.get("name")}]},n.push(o))}else t.variants.push({id:e.get("id"),name:e.get("name")});break;case"Options":var p={id:e.get("id"),name:e.get("name")};a.push(p);break;case"Packs":var d={id:e.get("id"),name:e.get("name")};s.push(d);break;case"ConfigurationFeature":var u={id:e.get("id"),name:e.get("name"),options:[]};e.get("items").forEach(function(e){var t={id:e.id,name:e.name};u.options.push(t)}),i.push(u);break;case"ConfigurationOption":if(1==r.includePrarentWithChild&&r.parentModel){l=r.parentModel.get("id"),c=r.parentModel.get("name");i&&i.forEach(function(e){e.id==l&&(u=e)}),u?u.variants.push({id:e.get("id"),name:e.get("name")}):(u={id:l,name:c,variants:[{id:e.get("id"),name:e.get("name")}]},i.push(u))}else t.variants.push({id:e.get("id"),name:e.get("name")})}}),n.length>0&&(t.variantClasses=n),a.length>0&&(t.options=a),s.length>0&&(t.packs=s),i.length>0&&(t.features=i),{clickedId:e.id,dictionary:t}}}),g=a.extend({name:"criteria-item-view",init:function(e){UWA.merge(e,{}),this.selectChildWithParent=e.selectChildWithParent,this.selectParentWithChild=e.selectParentWithChild,this._parent(e),this.container.setAttribute("draggable",!1)},setup:function(){this._parent.apply(this,arguments)},select:function(e,t){1==t&&this._parent(e)},render:function(e){this._parent.apply(this,arguments),this.updateSelection(e)},updateSelection:function(e){var t=void 0!==e;if(e=e||this.model){var n=e.get("selectionState"),a=e.get("items"),s=e.collection.parentModel;1==n?(this.select({silent:!0},!0),this.persistCheckbox(),this.container.setAttribute("draggable",!0),t&&(1==this.selectChildWithParent&&(this.itemListView?this.itemListView.nestedView.collection&&this.itemListView.nestedView.collection.invoke("set","selectionState",1,{silent:!0},!0):a&&a.forEach(function(e){e.selectionState=1})),1==this.selectParentWithChild&&s&&s.set("selectionState",1,{silent:!0},!0))):0==n&&(this.unSelect({silent:!0}),this.unPersistCheckbox(),this.container.setAttribute("draggable",!1),t&&(1==this.selectChildWithParent&&(this.itemListView?this.itemListView.nestedView.collection&&this.itemListView.nestedView.collection.invoke("set","selectionState",0,{silent:!0},!0):a&&a.forEach(function(e){e.selectionState=0})),1==this.selectParentWithChild&&s&&(e.collection.findWhere({selectionState:1})||s.set("selectionState",0,{silent:!0},!0))))}},isItemSelected:function(){var e=!1;return 1==this.model.get("selectionState")&&(e=!0),e},getItemData:function(){return{id:this.model.id,name:this.model.get("name")}},onRender:function(){if(this._parent.apply(this,arguments),this.model.get("items")){var e=this.container.getElement(".criteria-item-view-sub-container");if(e)UWA.createElement("span",{class:"fonticon fonticon-2x fonticon-right-open",styles:{height:"100%",width:"35px",position:"absolute",top:"0",right:"35px",display:"flex",margin:"auto",alignItems:"center",color:"#b4b6ba"}}).inject(e)}}}),f=i.extend({init:function(e,t){t=t||{},UWA.merge(t,{mapping:{title:"name"}}),UWA.merge(e,{useInfiniteScroll:!1,usePullToRefresh:!1,layout:{column:1},itemView:g,selectionMode:"nullToMany",itemViewOptions:t}),this.includePrarentWithChild=e.includePrarentWithChild,this._parent(e)},setup:function(){this._parent.apply(this,arguments),this.listenTo(this.collection,"onSortCollection",function(e,t){for(var n=e.length,a=0;a<n;a++){var s=this.nestedView.getChildView(e[a]);if(s){var i=a+1;0==t&&(i=n-a),s.container.setStyle("order",i)}}console.log()})},onItemViewCheck:function(e,t,n){n.target.checked?t.model.set("selectionState",1):(console.log(),t.isItemSelected()&&t.model.set("selectionState",0))},onRender:function(e){this._parent(e);this.collection.sortCollection()},filter:function(){this.nestedView&&this.nestedView.filter(void 0,function(e,t){e.itemListView&&(t?(e.itemListView.show(),e.itemListView.filter()):e.itemListView.hide()),t?e.show():e.hide()})},getListData:function(){var e={},t=this.nestedView;this.includePrarentWithChild;return t.visibleItems&&t.visibleItems.forEach(function(n){var a=n.get("type"),s=function(e){var t;switch(e){case"Variant Class":t="variantClasses";break;case"Variants":t="variants";break;case"Options":t="options";break;case"Packs":t="packs";break;case"Variant":case"ConfigurationFeature":case"VariabilityGroup":t="features";break;case"ConfigurationOption":case"VariabilityOption":case"VariantValue":t="options"}return t},i=s(a);if(i){var o;e[i]||(e[i]=[]);var r=t.getChildView(n);if(r)if(r.isItemSelected()){if(o=r.getItemData(),r.itemListView)UWA.merge(o,r.itemListView.getListData());else if(n.get("items")){n.get("items").forEach(function(e){var t=s(e.type);t&&(o[t]||(o[t]=[]),o[t].push({id:e.id,name:e.name}))})}e[i].push(o)}else r.itemListView&&e[i].push(r.itemListView.getListData())}}),e}});return e.extend({className:"criteria-tile-view-container",init:function(e){var t=e.dictionaryJSON;this._modelEvents=new p;var a=n.extend({defaults:function(){return{selectionState:0}},setup:function(){this.addEvent("onChange:selectionState",function(e,t){if(e){var n={critType:e.get("type"),parent:{id:e.id,name:e.get("name")},child:void 0,viewId:"tile"};e.collection.parentModel&&(n.child=n.parent,n.parent={id:e.collection.parentModel.id,name:e.collection.parentModel.get("name")});var a="selectionOnAdd";0==e.get("selectionState")?a="selectionOnRemove":1==e.get("selectionState")&&(a="selectionOnAdd"),l.publish(a,n,null)}})},set:function(e,t,n,a){1==a?((n=n||{}).silent=!0,this.get(e)!=t&&(this._parent(e,t,n),this.dispatchEvent("onChange"))):this._parent(e,t,n)}}),s=!e.getParentWithChild||e.getParentWithChild,i=!e.getAllChildrenOnParentSelection||e.getAllChildrenOnParentSelection,o=!e.getParentOnChildSelection||e.getParentOnChildSelection;!!e.countParentSelection&&e.countParentSelection;this.currentCollection=new m(void 0,{model:a,includePrarentWithChild:s}),this.dictionaryVersion="2.0";var r=this.getInputData(t);this.currentCollection.add(r);var l=this;this.actions=[],UWA.is(e.actions,"array")&&e.actions.forEach(function(e){if(e.icon&&e.event){var t={text:e.title?e.title:"Action",fonticon:e.icon,handler:function(t){var n=t.model.collection.getSelectedDictionary(t.model);l.publish(e.event,n)}};l.actions.push(t)}});var c=function(e,t){var n=!0;return e.collection&&UWA.is(e.collection.filterModel,"function")&&(e.collection.filterData=l.filterData,n=e.collection.filterModel(e,t)),n},d=function(e){var t=l.gridview.getListData();(t=t||{})._version=l.dictionaryVersion,console.log("Dragged Items Dico: "+JSON.stringify(t)),e.dataTransfer.setDragImage(l.dragImageContainer.container,0,0),e.dataTransfer.setData("text",JSON.stringify(t))};this.gridview=new f({collection:this.currentCollection,filterer:c,includePrarentWithChild:s,events:{onSlideNext:function(e){l.slideNext(e)},onItemViewClick:function(e,t){var n=t.model,r=n.get("items");if(r&&r.length>0){if(!t.itemListView){var p=new f({collection:new m(r,{parentModel:n,model:a,includePrarentWithChild:s}),filterer:c,includePrarentWithChild:s},{contextualActions:l.actions,selectChildWithParent:i,selectParentWithChild:o,events:{onDrag:d}});p.render(),p.filter(),t.itemListView=p}this.dispatchEvent("onSlideNext",{name:n.get("name"),content:t.itemListView})}}}},{contextualActions:this.actions,selectChildWithParent:i,selectParentWithChild:o,events:{onDrag:d}}),this._parent.apply(this,arguments)},setup:function(){var e=this;this.subscribe("onContentFilterCriteriaChange",function(t){console.log(e),e.filterData=t.filterData,e.gridview.filter()}),this.subscribe("selectionOnAdd",function(t){console.log("selectionOnAdd");var n=t.parent.id;if(t&&"tile"!=t.viewId){var a=t.child?t.child.id:"";e.updateSelection(n,a,!0)}if(this.dragListCollection&&this.gridview){var s=this.gridview.collection.get(n);s&&this.dragListCollection.set(s,{remove:!1})}}),this.subscribe("selectionOnRemove",function(t){console.log("selectionOnRemove");var n=t.parent.id;if(t&&"tile"!=t.viewId){var a=t.child?t.child.id:"";e.updateSelection(n,a,!1)}this.dragListCollection&&this.dragListCollection.remove(n)})},updateSelection:function(e,t,n){var a=this.gridview.collection.get(e),s=n?1:0;a&&(t?console.log():a.set("selectionState",s,{silent:!0},!0))},render:function(){var e=this,t=UWA.createElement("div",{styles:{display:"inline-block"}});this.slideBackActionView=new r({collection:new c([{text:"back",icon:"left-open",title:u.Back}]),events:{onActionClick:function(t,n){e.slideBack()},onShow:function(){e.currentPanelIndex||e.currentPanelIndex>0||this.hide()}}}),t.setContent(this.slideBackActionView.render()),this.itemTitleView=UWA.createElement("div");var n=UWA.createElement("div",{html:[t,this.itemTitleView],styles:{display:"flex",alignItems:"center",paddingRight:"10px"}});this.sortActionContainer=UWA.createElement("div",{html:this.currentCollection.getCollectionSortComponent(),styles:{marginLeft:"auto",textAlign:"right"}});var s=UWA.createElement("div",{styles:{width:"100%",display:"flex"}});return s.inject(this.container),n.inject(s),this.sortActionContainer.inject(s),this.panelSlider=new o([this.gridview.render()],{layout:[{size:100,className:"big"}]}),this.dragListCollection=new m,this.dragImageContainer=new i({collection:this.dragListCollection,itemView:a,useInfiniteScroll:!1,usePullToRefresh:!1,itemViewOptions:{mapping:{title:"name"}}}),this.dragImageContainer.render(),this.dragImageContainer.container.addClassName("drag-item-container"),this.panelSlider.render(),this.panelSlider.inject(this.container),this.dragImageContainer.inject(this.container),this._parent(this,arguments),this},subscribe:function(e,t){this._modelEvents&&this._modelEvents.subscribe({event:e},t)},publish:function(e,t,n){this._modelEvents&&this._modelEvents.publish({event:e,data:t,context:n})},slideNext:function(e){this.panelSlider&&(this.currentPanelIndex||(this.currentPanelIndex=0),e&&e.content&&(this.currentCollection=e.content.collection),this.panelSlider.slideNext(e),this.currentPanelIndex++,this.updatePanelDetails(),this.slideBackActionView.show())},slideBack:function(e){this.panelSlider&&this.currentPanelIndex&&this.currentPanelIndex>0&&(this.currentPanelIndex--,this.panelSlider.slideBack(e),0==this.currentPanelIndex&&this.slideBackActionView.hide(),this.currentCollection=this.currentCollection.getParentCollection(),this.updatePanelDetails())},updatePanelDetails:function(){this.itemTitleView.setContent(this.currentCollection.getTitle()),this.sortActionContainer.setContent(this.currentCollection.getCollectionSortComponent())},getDictionaryData:function(e){var t=[];return e.variantClasses&&e.variantClasses.forEach(function(e){t.push(UWA.merge({type:"variantClass"},e))}),e.options&&e.options.forEach(function(e){t.push(UWA.merge({type:"option"},e))}),e.packs&&e.packs.forEach(function(e){t.push(UWA.merge({type:"pack"},e))}),t},getInputData:function(e){var t=[];return!e._version||"v2"!=e._version&&"V2"!=e._version&&"2.0"!=e._version?(this.dictionaryVersion="1.0",e.features&&e.features.forEach(function(e){var n={};n.id=e.id,n.type=e.type,n.name=e.displayValue,n.image=e.image?e.image:d.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png"),n.attributes=e.attributes,n.kpis=[],n.actions=[],n.items=[],e.options&&e.options.length>0&&e.options.forEach(function(e){var t={};t.id=e.id,t.type=e.type,t.name=e.displayValue,t.image=e.image?e.image:d.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png"),t.attributes=e.attributes,t.kpis=[],t.actions=[],n.items.push(t)}),t.push(n)})):(this.dictionaryVersion="2.0",e.variantClasses&&e.variantClasses.forEach(function(e){var n={};n.id=e.id,n.type="Variant Class",n.name=e.displayValue,n.image=e.image?e.image:d.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png"),n.attributes=[],n.kpis=[],n.actions=[],n.items=[],e.variants&&e.variants.length>0&&e.variants.forEach(function(e){var t={};t.id=e.id,t.type="Variants",t.name=e.displayValue,t.image=e.image?e.image:d.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png"),t.attributes=[],t.kpis=[],t.actions=[],n.items.push(t)}),t.push(n)}),e.options&&e.options.forEach(function(e){var n={};n.id=e.id,n.type="Options",n.name=e.displayValue,n.image=e.image?e.image:d.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png"),n.attributes=[],n.kpis=[],n.actions=[],t.push(n)}),e.packs&&e.packs.forEach(function(e){var n={};n.id=e.id,n.type="Packs",n.name=e.displayValue,n.image=e.image?e.image:d.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png"),n.attributes=[],n.kpis=[],n.actions=[],t.push(n)})),t}})}),define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationItemModel",["UWA/Class/Model"],function(e){"use strict";return e.extend({title:null,description:null,elements:[]})}),define("DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Model/AutoCompleteRuleModel",["UWA/Class/Model"],function(e){"use strict";return e.extend({editable:null,dictionary:null,currentExpression:null,withAdvancedOperator:null})}),define("DS/CfgXRules/Commons/Utils/CfgUtils",["DS/UIKIT/Mask","UWA/Drivers/Alone"],function(e,t){"use strict";var n={mergeJSON:function(e,t){var n={};for(var a in e)n[a]=e[a];for(var a in t)n[a]=t[a];return n}};return n}),define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationModelFTR",["i18n!DS/CfgXRules/assets/nls/LanguageInformationComponent/LanguageInformationComponent"],function(e){"use strict";return[{title:"criteria_title",description:"",elements:["<span>"+e.criteria_Feature+" / "+e.criteria_option+" : </span>","<br>","<span class='spanitalic'>"+e.criteria_featureoption_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample+"</span></span>","<br>","<br>","<span>"+e.criteria_Feature+" / "+e.criteria_severalOptions+" : </span>","<br>","<span class='spanitalic'>"+e.criteria_severalOptions_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample2+"</span></span>","<br>","<br>","<span>"+e.criteria_Feature+" : </span>","<br>","<span class='spanitalic'>"+e.criteria_feature_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>"]},{title:"standard_operators_title",description:"",elements:["<span>"+e.standard_operators_not+" : </span>","<span class='badge badge-default'><span class='badge-content'>NOT</span></span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.not_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>NOT</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample+"</span></span>","<br>","<br>","<span>"+e.standard_operators_and+" : </span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>AND</span></span>","<span>&nbsp;"+e.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.and_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>AND</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample1+"</span></span>","<br>","<br>","<span>"+e.standard_operators_or+" : </span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>OR</span></span>","<span>&nbsp;"+e.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.or_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>OR</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample4+"</span></span>","<br>","<br>","<span>"+e.standard_operators_parenthesis+" : </span>","<span class='badge badge-default'><span class='badge-content'>(</span></span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>)</span></span>","<br>","<span class='spanitalic'>"+e.parenthesis_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>(</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>OR</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>)</span></span>","<span class='badge badge-default'><span class='badge-content'>AND</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample3+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample1+"</span></span>"]},{title:"conditional_requirement_title",description:"",elements:["<span>"+e.conditional_requirement_imply+" : </span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>IMPLY</span></span>","<span>&nbsp;"+e.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.imply_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>IMPLY</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample4+"</span></span>"]},{title:"co_dependency_title",description:"",elements:["<span>"+e.co_dependency_equivalent+" : </span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>EQUIVALENT</span></span>","<span>&nbsp;"+e.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.equivalent_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample3+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>EQUIVALENT</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample4+"</span></span>"]},{title:"incompatibility_title",description:"",elements:["<span class='spanitalic'>"+e.incompatibility_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>IMPLY</span></span>","<span class='badge badge-default'><span class='badge-content'>NOT</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample4+"</span></span>"]}]}),define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationModelXPortfolio",["i18n!DS/CfgXRules/assets/nls/LanguageInformationComponent/LanguageInformationComponent"],function(e){"use strict";return[{title:"criteria_title",description:"",elements:["<span>"+e.criteria_variantClass+" / "+e.criteria_variant+" : </span>","<br>","<span class='spanitalic'>"+e.criteria_variantclassvariant_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample+"</span></span>","<br>","<br>","<span>"+e.criteria_variantClass+" / "+e.criteria_variants+" : </span>","<br>","<span class='spanitalic'>"+e.criteria_variantclassvariants_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample2+"</span></span>","<br>","<br>","<span>"+e.criteria_variantClass+" : </span>","<br>","<span class='spanitalic'>"+e.criteria_variantClass_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<br>","<br>","<span>"+e.criteria_option+" : </span>","<br>","<span class='spanitalic'>"+e.option_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_OptionSample+"</span></span>","<br>","<br>","<span>"+e.criteria_Pack+" : </span>","<br>","<span class='spanitalic'>"+e.pack_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_PackSample+"</span></span>"]},{title:"standard_operators_title",description:"",elements:["<span>"+e.standard_operators_not+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_not+"</span></span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.not_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_not+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample+"</span></span>","<br>","<br>","<span>"+e.standard_operators_and+" : </span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_and+"</span></span>","<span>&nbsp;"+e.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.and_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_and+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample1+"</span></span>","<br>","<br>","<span>"+e.standard_operators_or+" : </span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_or+"</span></span>","<span>&nbsp;"+e.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.or_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_or+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample4+"</span></span>","<br>","<br>","<span>"+e.standard_operators_parenthesis+" : </span>","<span class='badge badge-default'><span class='badge-content'>(</span></span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>)</span></span>","<br>","<span class='spanitalic'>"+e.parenthesis_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>(</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant1Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_or+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>)</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_and+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample3+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample1+"</span></span>"]},{title:"conditional_requirement_title",description:"",elements:["<span>"+e.conditional_requirement_imply+" : </span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>"+e.conditional_requirement_imply+"</span></span>","<span>&nbsp;"+e.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.imply_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.conditional_requirement_imply+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample4+"</span></span>"]},{title:"co_dependency_title",description:"",elements:["<span>"+e.co_dependency_equivalent+" : </span>","<span>&nbsp;"+e.expression1+"&nbsp;</span>","<span class='badge badge-default'><span class='badge-content'>"+e.co_dependency_equivalent+"</span></span>","<span>&nbsp;"+e.expression2+"&nbsp;</span>","<br>","<span class='spanitalic'>"+e.equivalent_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample3+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample1+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.co_dependency_equivalent+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample4+"</span></span>"]},{title:"incompatibility_title",description:"",elements:["<span class='spanitalic'>"+e.incompatibility_explanation+"</span>","<br>","<span class='spanitalic'>"+e.example+" : </span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant2Sample2+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.conditional_requirement_imply+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.standard_operators_not+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_VariantClassSample4+"</span></span>","<span class='badge badge-default'><span class='badge-content'>"+e.sample_Variant3Sample4+"</span></span>"]}]}),define("DS/CfgXRules/RuleExpressionComponent/Model/RuleExpressionModel",["UWA/Class/Model"],function(e){"use strict";return e.extend({editable:null,fullDictionary:null,autoCompleteRuleModel:null,languageInformation:null,solverKey:null})}),define("DS/CfgXRules/Commons/Presenters/ViewSearch",["UWA/Class/View","DS/CoreEvents/ModelEvents","DS/UIKIT/Input/Toggle","DS/UIKIT/DropdownMenu","DS/UIKIT/Autocomplete","DS/UIKIT/Scroller","i18n!DS/CfgXRules/assets/nls/Commons/VariabilityCriteriaSelector","css!DS/CfgXRules/Commons/Presenters/ViewSearch.css"],function(e,t,n,a,s,i,o,r){"use strict";return e.extend({init:function(e){var n=UWA.clone(e,!1),a=this;UWA.merge(n,{searchTextBox:"",enableCache:!0,attributeSelected:{},selectedAttrContainer:"",data:{searchValue:""}}),this.modelEvent=new t,this.options=n,n.enableCache&&(this.options.data.savedAttributes=[]),this.modelEvent.subscribe({event:"onSaveInCache"},function(e){if(n.enableCache&&(!a.isAlreadyPresent(a.options.data.savedAttributes,e)&&e.searchValue.length>0)){var t=0==a.options.data.savedAttributes.length?"25px":25*(a.options.data.savedAttributes.length+1)+"px";a.options.savedAttrContainer.setStyles({height:t}),a.saveSearch(e.searchValue,e.searchAttribute)}}),UWA.is(n.onSearch,"function")&&this.modelEvent.subscribe({event:"OnSearchValueChange"},n.onSearch),this._parent()},isAlreadyPresent:function(e,t){for(var n=0;n<e.length;n++)if(e[n].value.toString().toLowerCase()==t.searchValue.toString().toLowerCase()&&e[n].attribute==t.searchAttribute.id)return!0;return!1},render:function(){var e=UWA.createElement("div",{class:"searchContainer"}),t=UWA.createElement("div",{class:"defaultContainer"}).inject(e);if(null!=this.options.typeFilter){var n=UWA.createElement("div",{class:"checksContainer"}).inject(e);this.createCheckbox(this.options.typeFilter,n)}var a=UWA.createElement("div",{class:"textboxContainer"}).inject(t);if(this.createSearchBox().inject(a),this.options.savedAttrContainer=UWA.createElement("div",{class:"selectedAttrContainer",styles:{"min-height":"20px","max-height":"75px","margin-left":"5px"}}).inject(a),this.options.savedAttrContainer.hide(),this.options.selectedAttrContainer=UWA.createElement("div",{class:"selectedAttrContainer"}),this.options.savedAttrContainer.setContent(this.options.selectedAttrContainer),this.options.savedSearchScroll=new i({element:this.options.savedAttrContainer}).inject(a),null!=this.options.attributeFilter){var s=UWA.createElement("span",{class:"fonticon fonticon-xx fonticon-menu attributeContainer"}).inject(t);this.createAttributeFilter(s)}return e},createSearchBox:function(){var e=this;return this.options.searchTextBox=new s({placeholder:"Search",noResultsMessage:""}),this.options.searchTextBox.elements.clear.addEvent("click",function(t){e.resetInput()}),this.options.searchTextBox.elements.inputContainer.addClassName("search-input"),this.getSearchBoxPlaceholder(this.options.attributeSelected,!0),this.options.searchTextBox.elements.input.onkeyup=function(t){e.options.data.searchValue=t.target.value.trim(),"Enter"==t.key?e.publishSaveInCache():(t.target.value.length>0?e.options.searchTextBox.elements.clear.show():e.resetInput(),e.publishSearch())},this.options.searchTextBox},createAttributeFilter:function(e){var t=this,n=new a({target:e,items:[],events:{onClick:function(e,a){t.setSelectedAttribute(n.items),t.publishSearch()}}});return this.setSelectedAttribute(this.options.attributeFilter),n.addItem(this.options.attributeFilter),e.setStyles({color:"#368ec4",opacity:"1"}),n},saveSearch:function(e,t){var n=this,a=0,s=e,i=this.options.selectedAttrContainer.getChildren();null!=t.text&&(e=e+" ("+t.text+")");for(var o=0;o<i.length;o++)if(i[o].textContent==e){a=1;break}if(0==a){var r=UWA.createElement("div",{class:"itemContainer"}).inject(this.options.selectedAttrContainer);UWA.createElement("span",{text:e,class:"itemSelectionSpan"}).inject(r),UWA.createElement("span",{class:"fonticon fonticon-xx fonticon-cancel clearSpan clearSelectionSpan"}).inject(r);this.options.selectedAttrContainer.show(),this.options.savedAttrContainer.show(),this.options.savedSearchScroll.getScrollbar("y",!0),this.options.savedSearchScroll.show(),this.options.savedSearchScroll.scrollToElement(r),this.options.data.savedAttributes.push({value:s,attribute:t.id}),this.publishSearch()}(i=this.options.selectedAttrContainer.getChildren()).forEach(function(e){e.lastChild.addEvents({click:function(e){n.removeSavedSearch(e.currentTarget.parentElement),n.publishSearch()}})})},removeSavedSearch:function(e){e.getChildren()[0].getText().split(" ");for(var t=this.options.selectedAttrContainer.getChildren(),n=0;n<t.length;n++)e.getChildren()[0].getText()==t[n].getText()&&this.options.data.savedAttributes.splice(n,1);var a=25*this.options.data.savedAttributes.length+"px";this.options.savedAttrContainer.setStyles({height:a}),0==this.options.data.savedAttributes.length&&this.options.savedAttrContainer.hide(),e.remove()},getSearchBoxPlaceholder:function(e,t){var n=o.Search;1==t&&null!=e&&null!=e.text&&(n=n+" ("+e.text+")"),this.options.searchTextBox.elements.input.placeholder=n},publishSaveInCache:function(){this.modelEvent.publish({event:"onSaveInCache",data:{searchValue:this.options.data.searchValue,searchAttribute:this.options.attributeSelected}})},publishSearch:function(){this.modelEvent.publish({event:"OnSearchValueChange",data:this.options.data})},resetInput:function(){this.options.data.searchValue="",this.options.searchTextBox.resetInput(),this.getSearchBoxPlaceholder(this.options.attributeSelected,!0),this.publishSearch()},setSelectedAttribute:function(e){this.options.data.searchAttribute="",this.options.attributeSelected=null;for(var t=0;t<e.length;t++)null==e[t].selectable&&(e[t].selectable=!0,e[t].name=e[t].id),null==e[t].selected&&(e[t].selected=!1),1==e[t].selected&&(this.options.attributeSelected=e[t],this.options.data.searchAttribute=e[t].name);null==this.options.attributeSelected&&(this.options.data.searchAttribute=e[0].name,e[0].selected=!0,this.options.attributeSelected=e[0]),this.getSearchBoxPlaceholder(this.options.attributeSelected,!0)},createCheckbox:function(e,t){this.options.data.typeFilter={};for(var a=[],s=this,i=0;i<e.length;i++)null==e[i].selected&&(e[i].selected=!1),a[i]=new n({type:"checkbox",className:"primary toggle-viewSearch",value:e[i].text,label:e[i].text,checked:e[i].selected,id:e[i].id,events:{onClick:function(e){s.options.data.typeFilter[e.target.id]=e.target.checked,s.publishSearch()}}}).inject(t),this.options.data.typeFilter[a[i].options.id]=a[i].options.checked;return a},getCurrentSearchText:function(){return this.options.data.searchValue},getCurrentAttribute:function(){return this.options.attributeFilter?this.options.attributeSelected:void 0},getTypeFilters:function(){return this.options.typeFilter?this.options.data.typeFilter:void 0}})}),define("DS/CfgXRules/Commons/Utils/dictionaryCfgEnum",[],function(){"use strict";var e={PACK_NAME:"pack",PACKCLASS_NAME:"packclass",VARIANT_NAME:"variant",VARIANTCLASS_NAME:"variantclass",OPTION_NAME:"option",BASELINE_NAME:"baseline",PORTFOLIO_COMPONENT_NAME:"portfoliocomponent",RULE_NAME:"rule"};return e}),define("DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionComponentExpressionGenerator",["DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum"],function(e,t){"use strict";var n={generateRawExpression:function(n){var a="";if(n&&n.items&&0!==n.items.length){var s=0,i=null,o=null,r=null,l=!1,c=!1,p=!0,d=!1;for(s=0;s<n.items.length;s+=1)d=!1,i=n.items[s].type,o=n.items[s+1]?n.items[s+1].type:null,r=n.items[s],n.items[s+1],i===e.VARIANTCLASS_NAME&&o===e.VARIANT_NAME?(l=!0,c=!1,d=!0):i===e.VARIANT_NAME&&o===e.VARIANT_NAME?(l=!0,c=!0,d=!0):(l=!1,c=!1,d=!1),l&&c&&!p&&(a+=" OR "+r.id,d=!0),l&&p&&c?(a+="( "+r.id,p=!1,d=!0):!1===l&&i===e.VARIANT_NAME&&p?(a+=" "+r.id,d=!0):!1===l&&i===e.VARIANT_NAME&&(a+=" OR "+r.id+" )",d=!0,p=!0),l||d||(i===t.binary_operator||i===t.unary_operator||i===t.opening_separator||i===t.closing_separator?a+=" "+r.value:a+=" "+r.id)}return a=" "===(a=a.replace(/  +/g," "))[0]?a.substr(1):a},generateExpression:function(e){var t,a={version:"1.0.1"};return t=n.generateRawExpression(e),a.expression=t,"EREV1:"+JSON.stringify(a)},generateDependencies:function(t){var n=[],a=0,s=[];for(a=0;a<t.items.length;a+=1)if(t.items[a].type===e.VARIANTCLASS_NAME||t.items[a].type===e.VARIANT_NAME||t.items[a].type===e.OPTION_NAME||t.items[a].type===e.PACK_NAME){var i=t.items[a].id;s.indexOf(i)<0&&s.push(i)}var o={};for(a=0;a<s.length;a+=1)(o={}).id=s[a],n.push(o);return n}};return n}),define("DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionComponentWrappedExpressionGenerator",["DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum","DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionComponentExpressionGenerator"],function(e,t,n){"use strict";var a=function(e,t){var n=0;for(n=0;n<t.features.length;n+=1)if(t.features[n].logicalId===e)return t.features[n];return null},s=function(e,t){var n=t.features,a=0,s=0;for(a=0;a<n.length;a+=1)for(s=0;s<n[a].options.length;s+=1)if(n[a].options[s].parentRelLogicalId===e)return n[a].options[s];return null},i={generateFullExpressionForExpressionModeler:function(e,t){var i={};i.expression=n.generateExpression(e);var o=n.generateDependencies(e);i.dependencies=[];var r=null,l=null,c=0;for(c=0;c<o.length;c+=1){r=null,l=null,o[c]=[o[c]],o[c][0].logicalId=o[c][0].id;var p=null;a(o[c][0].id,t)?p=a(o[c][0].id,t).id:s(o[c][0].id,t)?(p=s(o[c][0].id,t).parentRelId,l=s(o[c][0].id,t).id,r=null):p=null,o[c][0].physicalid=p,l&&o[c].push({logicalid:r,physicalid:l}),delete o[c][0].id,i.dependencies.push(o[c])}return i}};return i}),define("DS/CfgXRules/Commons/Utils/SolverServices",["DS/WAFData/WAFData","UWA/Utils","DS/CfgXRules/Commons/Utils/ServicesUrlsCatalog"],function(e,t,n){"use strict";var a=n.solverUrlEndPoint,s=(n.solverUrlEndPoint_newLib,{release:function(t,n){var s,i=!1;return null!=n&&(i=!0),null==t&&(t=""),e.handleRequest(a+"release",{method:"POST",async:i,type:null,timeout:3e5,data:{solverKey:t},onComplete:function(e){s=e,null!=n&&n(e)},onFailure:function(e){console.log("failed while releasing the solver: "+e)}}),s},computeAnswer:function(t,n,s,i,o,r){var l,c=a+"computeAnswer",p=null!==s,d=null;t.constructor==Object?l=JSON.stringify(t):t.constructor==String&&(l=t),n=null==n?"":n;if(o&&o,r){var u={_from:t._from?t._from:"apps",_to:"solver",_request:"abortRequest",_data:""};e.handleRequest(c,{method:"POST",type:"application/ds-json",async:!1,timeout:3e5,onComplete:function(e){console.debug("Aborting solver")},data:{solverId:n,selectedCriteria:JSON.stringify(u)},onFailure:function(e){console.error("failed while trying to abort the solver")}})}return e.handleRequest(c,{method:"POST",async:p,type:"application/ds-json",timeout:3e5,data:{solverId:n,selectedCriteria:l},onComplete:function(e){d=e,null!=s&&(d="string"==typeof d?JSON.parse(d):d,s(d,i))},onFailure:function(e){console.log("failed while computing the answer: "+e),null!=s&&s(void 0,i),d=void 0}}),d}});return s}),define("DS/CfgXRules/Commons/Utils/dictionaryCfgUtils",["DS/UIKIT/Mask","DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/CfgUtils"],function(e,t,n){"use strict";var a={mergeRulesInMap:function(e){var t={},n=0,a=0;for(a=0;a<e.length;a+=1)if(e[a].rules)for(n=0;n<e[a].rules.length;n+=1)t[e[a].rules[n].id]={},t[e[a].rules[n].id]={name:e[a].rules[n].name};return t},mergeDicosInMap:function(e){var n={},a=0,s=0,i=0;for(i=0;i<e.length;i+=1){var o=e[i];if(o.variantClasses)for(a=0;a<o.variantClasses.length;a+=1)for(n[o.variantClasses[a].id]||(n[o.variantClasses[a].id]={},n[o.variantClasses[a].id]={name:o.variantClasses[a].name,parent:null,type:t.VARIANTCLASS_NAME,isInherited:null,variants:[]}),s=0;s<o.variantClasses[a].variants.length;s+=1)n[o.variantClasses[a].variants[s].id]={},n[o.variantClasses[a].variants[s].id]={name:o.variantClasses[a].variants[s].name,parent:o.variantClasses[a].id,type:t.VARIANT_NAME,isInherited:o.variantClasses[a].variants[s].isInherited},n[o.variantClasses[a].id].variants.push(o.variantClasses[a].variants[s].id);if(o.packs)for(a=0;a<o.packs.length;a+=1)n[o.packs[a].id]={},n[o.packs[a].id]={name:o.packs[a].name,parent:null,type:t.PACK_NAME,isInherited:o.packs[a].isInherited};if(o.options)for(a=0;a<o.options.length;a+=1)n[o.options[a].id]={},n[o.options[a].id]={name:o.options[a].name,parent:null,type:t.OPTION_NAME,isInherited:o.options[a].isInherited}}return n},mergeDictionaryMaps:function(e,n){var a=null;for(a in e)if(n[a]){if(n[a].type===t.VARIANTCLASS_NAME){var s=e[a].variants,i=n[a].variants,o=0;if(i)for(o=0;o<i.length;o+=1)s.indexOf(i[o])<0&&s.push(i[o]);n[a].variants=s}}else n[a]=e[a];return n},mergeDicosInMap2:function(e){var n={},s=0,i=0,o=0,r=0,l=0;for(s=0;s<e.length;s+=1){var c=e[s];if(c.portfolioClasses){var p=c.portfolioClasses;for(i=0,i=0;i<p.length;i+=1){var d=p[i];if(d.portfolioComponents)for(o=0,o=0;o<d.portfolioComponents.length;o+=1){var u=d.portfolioComponents[o];if(n[u.id]={},n[u.id]={name:u.name,parent:d.id,type:t.PORTFOLIO_COMPONENT_NAME},u.variantClasses)for(r=0;r<u.variantClasses.length;r+=1)if(n[u.variantClasses[r].id]||(n[u.variantClasses[r].id]={},n[u.variantClasses[r].id]={name:u.variantClasses[r].name,parent:u.id,type:t.VARIANTCLASS_NAME,isInherited:null,variants:[]}),u.variantClasses[r].variants)for(l=0;l<u.variantClasses[r].variants.length;l+=1)n[u.variantClasses[r].variants[l].id]={},n[u.variantClasses[r].variants[l].id]={name:u.variantClasses[r].variants[l].name,parent:u.variantClasses[r].id,type:t.VARIANT_NAME,isInherited:u.variantClasses[r].variants[l].isInherited},n[u.variantClasses[r].id].variants.push(u.variantClasses[r].variants[l].id);if(u.options)for(r=0;r<u.options.length;r+=1)n[u.options[r].id]={},n[u.options[r].id]={name:u.options[r].name,parent:null,type:t.OPTION_NAME,isInherited:u.options[r].isInherited};if(u.packs)for(r=0;r<u.packs.length;r+=1)n[u.packs[r].id]={},n[u.packs[r].id]={name:u.packs[r].name,parent:null,type:t.PACK_NAME,isInherited:u.packs[r].isInherited};if(u.portfolioClasses&&u.portfolioClasses.length>0&&(n=a.mergeDictionaryMaps(n,a.mergeDicosInMap2([{portfolioClasses:u.portfolioClasses}]))),u.rules)for(r=0;r<u.rules.length;r+=1)n[u.rules[r].id]={},n[u.rules[r].id]={name:u.rules[r].name,parent:u.id,type:t.RULE_NAME,isInherited:null}}}}else{if(c.variantClasses)for(i=0;i<c.variantClasses.length;i+=1)if(n[c.variantClasses[i].id]||(n[c.variantClasses[i].id]={},n[c.variantClasses[i].id]={name:c.variantClasses[i].name,parent:null,type:t.VARIANTCLASS_NAME,isInherited:null,variants:[]}),c.variantClasses[i].variants)for(l=0;l<c.variantClasses[i].variants.length;l+=1)n[c.variantClasses[i].variants[l].id]={},n[c.variantClasses[i].variants[l].id]={name:c.variantClasses[i].variants[l].name,parent:c.variantClasses[i].id,type:t.VARIANT_NAME,isInherited:c.variantClasses[i].variants[l].isInherited},n[c.variantClasses[i].id].variants.push(c.variantClasses[i].variants[l].id);if(c.options)for(i=0;i<c.options.length;i+=1)n[c.options[i].id]={},n[c.options[i].id]={name:c.options[i].name,parent:null,type:t.OPTION_NAME,isInherited:c.options[i].isInherited};if(c.rules)for(i=0;i<c.rules.length;i+=1)n[c.rules[i].id]={},n[c.rules[i].id]={name:c.rules[i].name,parent:null,type:t.RULE_NAME,isInherited:null};if(c.packs)for(i=0;i<c.packs.length;i+=1)n[c.packs[i].id]={},n[c.packs[i].id]={name:c.packs[i].name,parent:null,type:t.PACK_NAME,isInherited:c.packs[i].isInherited}}}return n},createDicoVersion1InMap:function(e){var n={},a=0,s=0;if(e.features)for(a=0;a<e.features.length;a+=1)if(n[e.features[a].id]||(n[e.features[a].id]={},n[e.features[a].id]={name:e.features[a].displayValue,parent:null,type:t.VARIANTCLASS_NAME,isInherited:null,variants:[]}),e.features[a].options)for(s=0;s<e.features[a].options.length;s+=1)n[e.features[a].options[s].id]={},n[e.features[a].options[s].id]={name:e.features[a].options[s].displayValue,parent:e.features[a].id,type:t.VARIANT_NAME,isInherited:null},n[e.features[a].id].variants.push(e.features[a].options[s].id);return n},mergeDicosVersion1InMap:function(e){var t=0,s={};for(t=0;t<e.length;t+=1)s=n.mergeJSON(s,a.createDicoVersion1InMap(e[t]));return s},mergeDicosAnyVersionInMap:function(e){var t=a.mergeDicosInMap2(e),s=a.mergeDicosVersion1InMap(e);return n.mergeJSON(s,t)}};return a}),define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationModel",["UWA/Class/Collection","DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationItemModel"],function(e,t){"use strict";return UWA.Class.Collection.extend({model:t})}),define("DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRuleUtils",["DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum"],function(e,t){"use strict";var n={getDatasetItemFromId:function(e,t){var n=0,a=0;for(n=0;n<e.datasets.length;n+=1)for(a=0;a<e.datasets[n].items.length;a+=1)if(e.datasets[n].items[a].id_===t)return e.datasets[n].items[a];return null},getDatasetItemFrom:function(e,t){var n=0,a=0;for(n=0;n<e.datasets.length;n+=1)for(a=0;a<e.datasets[n].items.length;a+=1)if(e.datasets[n].items[a].id_===t||e.datasets[n].items[a].value&&e.datasets[n].items[a].value.toUpperCase()===t.toUpperCase()||e.datasets[n].items[a].name&&e.datasets[n].items[a].name.toUpperCase()===t.toUpperCase())return e.datasets[n].items[a];return null},getFlatListOfIds:function(e){var t,n=[];if(-1!==navigator.userAgent.indexOf("Trident")&&navigator.userAgent.indexOf("MSIE"),t=e.dataTransfer.getData("text"),!(t=JSON.parse(t)))return[];var a=0,s=0;if("2.0"===t._version||2===t._version){if(t.variantClasses&&t.variantClasses!==[])for(a=0;a<t.variantClasses.length;a+=1)if(t.variantClasses[a].variants&&t.variantClasses[a].variants.length>0)for(s=0;s<t.variantClasses[a].variants.length;s+=1)n.push(t.variantClasses[a].variants[s].id);else n.push(t.variantClasses[a].id);if(t.options&&t.options!==[])for(a=0;a<t.options.length;a+=1)n.push(t.options[a].id);if(t.packs)for(a=0;a<t.packs.length;a+=1)n.push(t.packs[a].id)}else if(t.features&&t.features!==[])for(a=0;a<t.features.length;a+=1)if(t.features[a].options&&t.features[a].options.length>0)for(s=0;s<t.features[a].options.length;s+=1)n.push(t.features[a].options[s].id);else n.push(t.features[a].id);return n}};return n}),define("DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRuleChecks",["DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum","i18n!DS/CfgXRules/assets/nls/RuleExpressionComponent/RuleExpressionComponent"],function(e,t,n){"use strict";var a="ERROR",s={dicoCheck:function(e,t,s){var i,o={};o._rc="S_OK",o.discrepancyElements=[];var r=[];for(i in e)e.hasOwnProperty(i)&&r.push(i);for(i in t)t.hasOwnProperty(i)&&r.push(i);if(s&&s.selectedItems){var l=0;for(l=0;l<s.selectedItems.length;l+=1){var c=s.selectedItems[l].id_;if(-1===r.indexOf(c)){o._rc=a;var p=s.selectedItems[l].value+" "+n.isUnknown;o.discrepancyElements.push({id:c,idx:l,description:p})}}}return o},grammarCheck:function(s,o,l){var c={_rc:"S_OK",discrepancyElements:[]},p=!1,d=null,u=!1,h=[];if(l&&l.selectedItems){var m=0;for(m=0;m<l.selectedItems.length;m+=1){p=!1,d=null,u=!1;var g=null,f=l.selectedItems[m],v=null;if(m>0&&(v=l.selectedItems[m-1]),v)switch(f.type){case e.VARIANT_NAME:switch(v.type){case e.VARIANT_NAME:v.parent_!==f.parent_&&(p=!0);break;case e.VARIANTCLASS_NAME:v.id_!==f.parent_&&(p=!0);break;default:p=!0}break;case e.VARIANTCLASS_NAME:case e.OPTION_NAME:case e.PACK_NAME:v.type!==t.opening_separator&&v.type!==t.unary_operator&&v.type!==t.binary_operator&&(p=!0);break;case t.binary_operator:v.type!==e.PACK_NAME&&v.type!==e.OPTION_NAME&&v.type!==e.VARIANTCLASS_NAME&&v.type!==e.VARIANT_NAME&&v.type!==t.closing_separator&&(p=!0),g=null,g=l.selectedItems[m+1],p||(g&&g.id_?g.type!==e.PACK_NAME&&g.type!==e.OPTION_NAME&&g.type!==e.VARIANTCLASS_NAME&&g.type!==t.opening_separator&&g.type!==t.unary_operator&&(p=!0,d=g.type):(p=!0,d="unknown"));break;case t.unary_operator:case t.opening_separator:v.type!==t.binary_operator&&v.type!==t.opening_separator&&v.type!==t.unary_operator&&(p=!0),g=null,g=l.selectedItems[m+1],p||(g&&g.id_?g.type!==e.PACK_NAME&&g.type!==e.OPTION_NAME&&g.type!==e.VARIANTCLASS_NAME&&g.type!==t.opening_separator&&g.type!==t.unary_operator&&(p=!0,d=g.type):(p=!0,d="unknown"));break;case t.closing_separator:v.type!==e.PACK_NAME&&v.type!==e.OPTION_NAME&&v.type!==e.VARIANTCLASS_NAME&&v.type!==e.VARIANT_NAME&&v.type!==t.closing_separator&&(p=!0);break;default:p=!0,u=!0}else switch(f.type){case e.VARIANTCLASS_NAME:case e.OPTION_NAME:case e.PACK_NAME:case t.opening_separator:break;case t.unary_operator:p=1===l.selectedItems.length;break;default:p=!0}if(p){h.push(m),c._rc=a;var C=f.id_,b=v&&v.value?n.errorInContextOf+" : "+v.value:n.genericError;d&&(b=f.value+" "+n.isNotExpectingToBeFollowedBy+" "+d),n[d]&&(b=f.value+" "+n.isNotExpectingToBeFollowedBy+" "+n[d]),u&&(b=n.badge+" "+f.value+" "+n.isNotInPossibleCriteria),c.discrepancyElements.push({id:C,idx:m,description:b})}}var _=i(l);if(_._rc===a)for(c._rc=a,m=0,m=0;m<_.discrepancyElements.length;m+=1){var S=r(c,_.discrepancyElements[m].idx);S?S.description+="; "+_.discrepancyElements[m].description:c.discrepancyElements.push(_.discrepancyElements[m])}}return c},dicoAndGrammarCheckAndUpdateUI:function(e,t,n){var i=s.dicoCheck(e,t,n),r=s.grammarCheck(e,t,n),l={_rc:"S_OK"};return l._rc=i._rc===a?a:l._rc,l._rc=r._rc===a?a:l._rc,l.discrepancyElements=i.discrepancyElements.concat(r.discrepancyElements),o(l,n,"badge-error"),l},getGlobalErrorCounts:function(e,t,n){var i=s.dicoCheck(e,t,n),o=s.grammarCheck(e,t,n),r={_rc:"S_OK"};r._rc=i._rc===a?a:r._rc,r._rc=i._rc===a?a:r._rc;var l=[],c=0;for(c=0;c<i.discrepancyElements.length;c+=1)l.push(i.discrepancyElements[c].idx);var p=[];for(c=0;c<o.discrepancyElements.length;c+=1)p.push(o.discrepancyElements[c].idx);var d=l.concat(p);return(d=d.filter(function(e,t){return d.indexOf(e)===t})).length}},i=function(e){var s={_rc:"S_OK",discrepancyElements:[]},i=e.selectedItems.length,o=[],r=[],l=0,c=0,p=0;for(c=0;c<i;c+=1)if(e.selectedItems[c].type===t.opening_separator){for(l=1,p=c+1;p<i;p+=1)if(e.selectedItems[p].type===t.opening_separator?l+=1:e.selectedItems[p].type===t.closing_separator&&(l-=1),0===l){o.push(c),r.push(p);break}0!==l&&(s._rc=a,s.discrepancyElements.push({id:e.selectedItems[c].id_,idx:c,description:n.correspondingClosingOperatorNotFound}))}for(c=0;c<i;c+=1)e.selectedItems[c].type===t.closing_separator&&-1===r.indexOf(c)&&(s._rc=a,s.discrepancyElements.push({id:e.selectedItems[c].id_,idx:c,description:n.correspondingOpeningOperatorNotFound}));return s},o=function(e,t,n){var a=0;for(a=0;a<t.badges.length;a+=1)t.badges[a].getContent().title="",t.badges[a].getContent().classList.remove(n),t.badges[a].getContent().classList.remove("badge-default"),t.badges[a].getContent().classList.remove("badge-closable"),t.badges[a].getContent().classList.remove("badge-selected"),null!=r(e,a)?(t.badges[r(e,a).idx].getContent().classList.add(n),t.badges[a].getContent().title=r(e,a).description):t.badges[a].getContent().classList.add("badge-default");return e.discrepancyElements},r=function(e,t){var n=0;for(n=0;n<e.discrepancyElements.length;n+=1)if(e.discrepancyElements[n].idx===t)return e.discrepancyElements[n];return null};return s}),define("DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Presenter/LanguageInformationPresenter",["DS/W3DXComponents/Views/Temp/TempItemView","DS/UIKIT/Accordion","DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Model/LanguageInformationModel","i18n!DS/CfgXRules/assets/nls/LanguageInformationComponent/LanguageInformationComponent","text!DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/View/LanguageInformationTemplate.html","css!DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/View/LanguageInformationComponent.css","css!DS/UIKIT/UIKIT.css"],function(e,t,n,a,s,i,o){"use strict";return e.extend({name:"language-information-view",tagName:"div",template:function(){return s},setup:function(e){var s=this,i=e._givenModel?e._givenModel:[];s._title=a.languageInformation_title,s._localModelEvent=e._localModelEvent,s.collection=new n(i),s.container.addClassName(this.getClassNames("-container"));var o={className:"styled filled",arrows:!1,items:[],events:{}};o.events.onChange=function(e,t){s._localModelEvent.publish({event:"onResize",data:null})};var r=0,l=0;for(r=0;r<s.collection.length;r+=1){var c="";for(""!==s.collection.at(r).get("description")&&(c+=a[s.collection.at(r).get("description")]+"<br>"),l=0;l<s.collection.at(r).get("elements").length;l+=1)c+=s.collection.at(r).get("elements")[l];o.items.push({title:a[s.collection.at(r).get("title")],content:c})}var p={className:"styled filled",arrows:!1,items:[]},d='<span class="fonticon fonticon-info"></span>'+s._title;p.items.push({title:d,content:" ",accordion:o}),p.events={},p.events.onChange=function(e,t){s._localModelEvent.publish({event:"onResize",data:null})},s._accordion=new t(p)},onRender:function(){this._accordion.inject(this.container.getElement(".content-section"))}})}),define("DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRulePresenter",["DS/W3DXComponents/Views/Temp/TempItemView","DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRuleChecks","DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRuleUtils","DS/UIKIT/Autocomplete","DS/CfgXRules/Commons/Utils/dictionaryCfgUtils","DS/CfgXRules/Commons/Utils/dictionaryCfgEnum","DS/CfgXRules/Commons/Utils/dictionaryCfgOperatorEnum","DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Model/AutoCompleteRuleModel","text!DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/View/AutoCompleteRuleTemplate.html","css!DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/View/AutoCompleteRuleComponent.css","css!DS/UIKIT/UIKIT.css"],function(e,t,n,a,s,i,o,r,l,c,p){"use strict";return e.extend({name:"autocomplete-rule-view",tagName:"div",template:function(){return l},setup:function(e){var s=this;s._mapDico={},s._mapOperator={},s._errorDicoOrGrammar=!0,s._editable=e.editable,s.container.addClassName(this.getClassNames("-container")),s._context=null,s._badgeOnLeft=null,s._lastPosition=-1,s.model=new r(e),s._localModelEvent=e._localModelEvent;s._localModelEvent&&s._editable&&s._localModelEvent.subscribe({event:"onPlus"},function(e){if(e.clickedId){var a=n.getDatasetItemFromId(s._autocomplete,e.clickedId);if(a){var o=s._lastPosition;if(a.type===i.VARIANT_NAME){var r=s.getRelativeContext(o);r&&r.id_===a.parent_?(s._autocomplete.onSelect(a,o),s._lastPosition>=0&&(s._lastPosition+=1)):o>=0?(s._autocomplete.onSelect(a,o),s._lastPosition>=0&&(s._lastPosition+=1),s._autocomplete.onSelect(a.parentReference,o),s._lastPosition>=0&&(s._lastPosition+=1)):(s._autocomplete.onSelect(a,o),s._lastPosition>=0&&(s._lastPosition+=1),s._autocomplete.onSelect(a.parentReference,s._autocomplete.badges.length-1),s._lastPosition>=0&&(s._lastPosition+=1))}else s._autocomplete.onSelect(a,o),s._lastPosition>=0&&(s._lastPosition+=1);var l=t.dicoAndGrammarCheckAndUpdateUI(s._mapDico,s._mapOperator,s._autocomplete);s._errorDicoOrGrammar="S_OK"!==l._rc,s.updateExpression(),s._localModelEvent&&s._localModelEvent.publish({event:"onChangeExpression",data:null})}else console.log("object with id "+e.clickedId+" not found in dictionary")}s._autocomplete.onHideSuggests()});var o=function(e){if(!UWA.is(s._autocomplete.currentPosition,"number"))return"binary_operator_id"!==e.id_autocomplete&&"closing_separator_id"!==e.id_autocomplete;var t=s.getRelativeBadgeAndIndexOnLeft(s._autocomplete.currentPosition),n=!0;if(!t)return"binary_operator_id"!==e.id_autocomplete&&"closing_separator_id"!==e.id_autocomplete;switch(t.badge.type){case i.VARIANTCLASS_NAME:n=e.id_autocomplete===t.badge.id_autocomplete||"binary_operator_id"===e.id_autocomplete||"closing_separator_id"===e.id_autocomplete;break;case i.VARIANT_NAME:s.getRelativeContext(s._autocomplete.currentPosition)&&(n=e.id_autocomplete===t.badge.parent_||"binary_operator_id"===e.id_autocomplete||"closing_separator_id"===e.id_autocomplete);break;case i.OPTION_NAME:case i.PACK_NAME:n="binary_operator_id"===e.id_autocomplete||"closing_separator_id"===e.id_autocomplete;break;case"binary_operator":case"unary_operator":case"opening_separator":n="binary_operator_id"!==e.id_autocomplete&&"closing_separator_id"!==e.id_autocomplete;break;case"closing_separator":n="binary_operator_id"===e.id_autocomplete||"closing_separator_id"===e.id_autocomplete}return n};s._autocomplete=new a({showSuggestsOnFocus:!0,floatingSuggestions:!0,multiSelect:!0,itemMultiSelect:!0,placeholder:"",noResultsMessage:!1,closableItems:!1,allowFreeInput:!0,filterEngine:function(e){return e=e.filter(o)},events:{onSelectBadge:function(e,t){s._autocomplete.onHideSuggests()},onUnSelectBadge:function(e){},onFocus:function(){},onClick:function(){},onClickOutside:function(){},onSelect:function(e){var n=document.activeElement;if(e.type===i.VARIANT_NAME){if(null===s.getRelativeContext(s._autocomplete.currentPosition)||s.getRelativeContext(s._autocomplete.currentPosition).type!==i.VARIANTCLASS_NAME||s.getRelativeContext(s._autocomplete.currentPosition).id_!==e.parent_)if(-1!==s._autocomplete.currentPosition){var a=s._autocomplete.currentPosition;s._autocomplete.onSelect(e.parentReference,a),s._autocomplete.currentPosition+=1}else s._autocomplete.onSelect(e.parentReference,s._autocomplete.badges.length-1),s._autocomplete.currentPosition=-1;s._autocomplete.onHideSuggests()}var o=t.dicoAndGrammarCheckAndUpdateUI(s._mapDico,s._mapOperator,s._autocomplete);s._errorDicoOrGrammar="S_OK"!==o._rc,s.updateExpression(),s._localModelEvent&&s._localModelEvent.publish({event:"onChangeExpression",data:null}),s._autocomplete.onShowSuggests(),n.focus()},onUnselect:function(e){var n=t.dicoAndGrammarCheckAndUpdateUI(s._mapDico,s._mapOperator,s._autocomplete);s._errorDicoOrGrammar="S_OK"!==n._rc,s.updateExpression(),s._localModelEvent&&s._localModelEvent.publish({event:"onChangeExpression",data:null})},onUpdateInputPosition:function(e){},onBlur:function(e){s._lastPosition=s._autocomplete.currentPosition}}}),s.createMapDico(),s.createDataSet(),!1===s._editable&&s._autocomplete.disable(),s.createInitialExpression(),s._autocomplete.onHideSuggests()},getRelativeContext:function(e){var t=this.getRelativeBadgeAndIndexOnLeft(e);if(!t)return null;var n=t.badge,a=t.index;if(n.type!==i.VARIANT_NAME)return n;for(var s=n.parent_,o=a-1,r=o>=0;r;){switch(this._autocomplete.selectedItems[o].type){case i.VARIANT_NAME:if(s!==this._autocomplete.selectedItems[o].parent_)return null;break;case i.VARIANTCLASS_NAME:return s===this._autocomplete.selectedItems[o].id_?this._autocomplete.selectedItems[o]:null;default:return null}--o<0&&(r=!1)}return null},getRelativeBadgeAndIndexOnLeft:function(e){return 0===e?null:-1===e?this._autocomplete.selectedItems.length>0?{badge:this._autocomplete.selectedItems[this._autocomplete.selectedItems.length-1],index:this._autocomplete.selectedItems.length-1}:null:{badge:this._autocomplete.selectedItems[e-1],index:e-1}},onRender:function(){var e=this;e._autocomplete.inject(e.container.getElement(".autocomplete-rule-content-section")),e.container.getElement(".autocomplete-rule-content-section").ondrop=function(a){console.log("drop"),a.preventDefault();var s;s=n.getFlatListOfIds(a),console.log(s);var o=null,r=0,l=a.target,c=-1;r=0;for(r=0;r<e._autocomplete.innerInputs.length;r+=1)if(l===e._autocomplete.innerInputs[r]){c=r;break}var p=c>=0?c:e._autocomplete.badges.length;for(r=0;r<s.length;r+=1)if(o=s[r]){var d=n.getDatasetItemFromId(e._autocomplete,o);if(d){if(d.type===i.VARIANT_NAME){var u=e.getRelativeContext(p);u&&u.id_===d.parent_?(e._autocomplete.onSelect(d,p),p+=1):(e._autocomplete.onSelect(d,p),e._autocomplete.onSelect(d.parentReference,p),p+=2)}else e._autocomplete.onSelect(d,p),p+=1;var h=t.dicoAndGrammarCheckAndUpdateUI(e._mapDico,e._mapOperator,e._autocomplete);e._errorDicoOrGrammar="S_OK"!==h._rc,e.updateExpression(),e._localModelEvent&&e._localModelEvent.publish({event:"onChangeExpression",data:null})}else console.log("object with id "+o+" not found in dictionary")}else console.log("object dropped not supported");e._autocomplete.onHideSuggests()},e.container.getElement(".autocomplete-rule-content-section").onpaste=function(a){console.log("paste");var s="";a.clipboardData?s=a.clipboardData.getData("text/plain").split("|"):window.clipboardData&&(s=window.clipboardData.getData("Text").split("|"));var i=a.target,o=-1,r=0;for(r=0;r<e._autocomplete.innerInputs.length;r+=1)if(i===e._autocomplete.innerInputs[r]){o=r;break}var l=o>=0?o:e._autocomplete.badges.length,c=0;for(c=0;c<s.length;c+=1){var p=n.getDatasetItemFrom(e._autocomplete,s[c]);p?e._autocomplete.onSelect(p,l):e._autocomplete.onSelect({label:s[c],value:s[c],id_:null},l),l>=0&&(l+=1)}var d=t.dicoAndGrammarCheckAndUpdateUI(e._mapDico,e._mapOperator,e._autocomplete);e._errorDicoOrGrammar="S_OK"!==d._rc,e.updateExpression(),e._localModelEvent&&s.length>0&&e._localModelEvent.publish({event:"onChangeExpression",data:null}),a.preventDefault();var u=document.createEvent("Events");u.initEvent("keydown",!0,!0),u.which=39,u.keyCode=39,e._autocomplete.currentBadge.elements.container.focus(),e._autocomplete.currentBadge.elements.container.dispatchEvent(u)}},createMapDico:function(){this._mapDico=s.mergeDicosAnyVersionInMap([this.model.get("dictionary")])},createDataSet:function(){var e=0,t=this._mapDico,n=null,a=[];for(n in t){var s=null;if(t.hasOwnProperty(n)){switch(t[n].type){case i.VARIANT_NAME:break;case i.VARIANTCLASS_NAME:for((s={}).name="datasetname"+t[n].name,s.id_autocomplete=n,s.id_=n,s.displayName=!1,s.items=[],s.items.push({value:t[n].name,id_autocomplete:n,id_:n,type:i.VARIANTCLASS_NAME}),s.items[0].items=[],e=0;e<t[n].variants.length;e+=1){var r=t[n].variants[e];s.items[0].items.push({parent_:n,value:t[r].name,id_:r,type:i.VARIANT_NAME})}break;case i.OPTION_NAME:case i.PACK_NAME:(s={}).name="datasetname"+t[n].name,s.displayName=!1,s.items=[],s.id_autocomplete=n,s.items.push({value:t[n].name,id_:n,type:t[n].type})}null!==s&&a.push(s)}}for(e=0;e<a.length;e+=1)this._autocomplete.addDataset(a[e]);var l={name:"datasetoperator",displayName:!1,id_autocomplete:o.binary_operator_id,items:[{id_:o.and_id,value:"AND",type:o.binary_operator},{id_:o.or_id,value:"OR",type:o.binary_operator}]};this._mapOperator.and_id={value:"AND",type:o.binary_operator},this._mapOperator.or_id={value:"OR",type:o.binary_operator},!0===this.model.get("withAdvancedOperator")&&(l.items.push({id_:o.imply_id,value:"IMPLY",type:o.binary_operator}),l.items.push({id_:o.eqvlt_id,value:"EQUIVALENT",type:o.binary_operator}),this._mapOperator.imply_id={value:"IMPLY",type:o.binary_operator},this._mapOperator.eqvlt_id={value:"EQUIVALENT",type:o.binary_operator}),this._autocomplete.addDataset(l);var c={name:"datasetnot",id_autocomplete:o.unary_operator_id,displayName:!1,items:[{id_:o.not_id,value:"NOT",type:o.unary_operator}]};this._mapOperator.not_id={value:"NOT",type:o.unary_operator},this._autocomplete.addDataset(c);var p={name:"OpeningSeparators",id_autocomplete:o.opening_separator_id,displayName:!1,items:[{id_:o.open_id,value:"(",type:o.opening_separator}]};this._mapOperator.open_id={value:"(",type:o.opening_separator};var d={name:"ClosingSeparators",id_autocomplete:o.closing_separator_id,displayName:!1,items:[{id_:o.close_id,value:")",type:o.closing_separator}]};this._mapOperator.close_id={value:")",type:o.closing_separator},this._autocomplete.addDataset(p),this._autocomplete.addDataset(d)},updateExpression:function(){var e=this._autocomplete.selectedItems,t=0,n=[];for(t=0;t<e.length;t+=1){var a={};a.id=e[t].id_?e[t].id_:"undefined",a.label=e[t].label?e[t].label:"undefined",a.type=e[t].type?e[t].type:"dummy",a.value=e[t].value?e[t].value:"undefined",n.push(a)}var s=this.model.get("currentExpression");s.items=n,this.model.set("currentExpression",s)},getExpression:function(){return this.model.get("currentExpression")},setExpression:function(e){this.model.set("currentExpression",e)},createInitialExpression:function(){this._autocomplete.unselectAll();var e=this.model.get("currentExpression"),a=JSON.parse(JSON.stringify(e));if(e&&e.items&&0!==e.items.length){var s=0;for(s=0;s<a.items.length;s+=1){var i=n.getDatasetItemFromId(this._autocomplete,a.items[s].id);i?this._autocomplete.onSelect(i,this._autocomplete.badges.length):(this._autocomplete.onSelect({label:e.items[s].value,value:e.items[s].value,id_:null},this._autocomplete.badges.length),console.info(a.items[s].id))}}var o=t.dicoAndGrammarCheckAndUpdateUI(this._mapDico,this._mapOperator,this._autocomplete);this._errorDicoOrGrammar="S_OK"!==o._rc},getErrorsCount:function(){return t.getGlobalErrorCounts(this._mapDico,this._mapOperator,this._autocomplete)},isThereError:function(){return this._errorDicoOrGrammar}})}),define("DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionPresenter",["DS/W3DXComponents/Views/Temp/TempItemView","DS/CfgXRules/RuleExpressionComponent/AutoCompleteRuleComponent/Presenter/AutoCompleteRulePresenter","DS/CfgXRules/RuleExpressionComponent/LanguageInformationComponent/Presenter/LanguageInformationPresenter","DS/CfgXRules/RuleExpressionComponent/Presenter/RuleExpressionComponentExpressionGenerator","DS/CfgXRules/Commons/Utils/SolverServices","DS/CfgXRules/Commons/Utils/dictionaryCfgUtils","DS/CoreEvents/ModelEvents","DS/UIKIT/Input/Button","DS/UIKIT/Input/ButtonGroup","DS/UIKIT/Spinner","DS/UIKIT/Popover","DS/W3DXComponents/Views/Layout/ActionsView","DS/W3DXComponents/Collections/ActionsCollection","DS/CfgXRules/RuleExpressionComponent/Model/RuleExpressionModel","i18n!DS/CfgXRules/assets/nls/RuleExpressionComponent/RuleExpressionComponent","text!DS/CfgXRules/RuleExpressionComponent/View/RuleExpressionTemplate.html","css!DS/CfgXRules/RuleExpressionComponent/View/RuleExpressionComponent.css"],function(e,t,n,a,s,i,o,r,l,c,p,d,u,h,m,g,f){"use strict";return e.extend({name:"rule-expression-view",tagName:"div",template:function(){return g},setup:function(e){var r=this;r._editable=void 0===e.editable||null===e.editable||e.editable,r.model=new h(e),r._autoCompleteRulePresenter=null,r._languageInformationPresenter=null,r._actions=[],r._solverKey=e.solverKey,r._mapDico=i.mergeDicosInMap2([e.fullDictionary]),r._isInConflict=!1;var l={text:"Solver computing",title:"Solver computing",icon:"progress-0",selected:!1,handler:function(e){console.log("button should be not clickable")}},d=null,u={text:m.conflict_with_existing_rules,title:m.conflict_with_existing_rules,icon:"attention",selected:!1,handler:function(e){null==d&&(UWA.extendElement(r._internalActionConflictContainer),(d=new p({target:r._internalActionConflictContainer,position:"left",body:m.under_computation+"...",title:m.conflicting_additional_information})).elements.container.setAttribute("tabindex","-1"),d.elements.container.onblur=function(){d.hide()}),console.log("calculating conflict reason on "+r._solverKey+" "+a.generateExpression(r._autoCompleteRulePresenter.getExpression()));var t=r._getSolverObject(!0);console.log(t);var n=function(e,t){if(r._internalActionConflictContainer.setStyle("pointerEvents","auto"),r._internalActionLoaderContainer.classList.add("displaynone"),d.show(),d.elements.container.focus(),null==e||""!==e&&"OK"!==e._rc&&"S_FALSE"!==e._rc&&"CONFLICTING_RULE"!==e._rc)e&&(e._rc?console.log(e._rc):console.log("error"));else if(""===e)r._isInConflict=!1,r._internalActionConflictContainer.classList.add("displaynone");else{var n="",a=0;for(a=0;a<e._data.conflictingRules.length;a+=1){a>0&&(n+=", ");var s=e._data.conflictingRules[a].substring(0,32);n+=r._mapDico[s]?r._mapDico[s].name:e._data.conflictingRules[a]}""!==n?d.setBody(m.invalid_expression_due_to+" : "+n):d.setBody(m.get("invalid_expression_without_reason"))}};r._internalActionConflictContainer.setStyle("pointerEvents","none"),r._internalActionLoaderContainer.classList.remove("displaynone"),d.setBody(m.under_computation+"..."),d.show(),d.elements.container.focus(),r._solverKey&&t?s.computeAnswer(t,r._solverKey,n,[],null,!0):n("")}};r._actions.push(l),r._actions.push(u),r._localModelEvent=new o,r._initialExpression={},e.autoCompleteRuleModel&&(r._initialExpression=JSON.parse(JSON.stringify(e.autoCompleteRuleModel)));var g={};if(g._givenModel=e.languageInformation?e.languageInformation:null,g._localModelEvent=r._localModelEvent,r._languageInformationPresenter=new n(g),e&&e.autoCompleteRuleModel&&e.fullDictionary){var f=e.autoCompleteRuleModel;f.dictionary=e.fullDictionary,f.withAdvancedOperator=!0,f._localModelEvent=r._localModelEvent,f.solverKey=r._solverKey,f.editable=r._editable,r._autoCompleteRulePresenter=new t(f)}r.container.addClassName(this.getClassNames("-container")),r.createOKCancelActions(e);r._localModelEvent.subscribe({event:"onChangeExpression"},function(){r.container.getElement(".ruleexpression-footer-content").classList.remove("displaynone"),r._localModelEvent.publish({event:"onResize",data:null})});var v=function(){if(r._internalActionConflictContainer||(r._internalActionConflictContainer=r._actionView.container.getChildren()[1]),!r._internalActionLoaderContainer){r._internalActionLoaderContainer=r._actionView.container.getChildren()[0],r._internalActionLoaderContainer.setStyle("pointerEvents","none"),r._internalActionLoaderContainer.setStyle("color","white");var e=(new c).inject(r._internalActionLoaderContainer).show();r._internalActionLoaderContainer.classList.add("displaynone"),e.elements.container.style.position="absolute"}if(!r._autoCompleteRulePresenter.isThereError()){var t=r._getSolverObject(!1),n=function(e,t){if(r._internalActionConflictContainer.setStyle("pointerEvents","auto"),r._internalActionLoaderContainer.classList.add("displaynone"),null==e||""!==e&&"OK"!==e._rc&&"S_FALSE"!==e._rc&&"CONFLICTING_RULE"!==e._rc)return e&&(e._rc?console.log(e._rc):console.log("error")),r._internalActionConflictContainer.classList.add("displaynone"),void(r._isInConflict=!0);""===e?(r._isInConflict=!1,r._internalActionConflictContainer.classList.add("displaynone")):"OK"===e._rc||"S_FALSE"===e._rc?(r._isInConflict=!1,r._internalActionConflictContainer.classList.add("displaynone")):(r._isInConflict=!0,r._internalActionConflictContainer.classList.remove("displaynone"))};r._solverKey&&t?(r._internalActionConflictContainer.setStyle("pointerEvents","none"),r._internalActionLoaderContainer.classList.remove("displaynone"),s.computeAnswer(t,r._solverKey,n,[],null,!0)):n("")}else r._internalActionConflictContainer.classList.add("displaynone")};r._localModelEvent.subscribe({event:"onChangeExpression"},v),r._localModelEvent.subscribe({event:"onCheckExpression"},v);r._localModelEvent.subscribe({event:"onResize"},function(){var e=r.container.getElement(".ruleexpression-frame"),t=r.container.getElement(".ruleexpression-language-information").clientHeight+r.container.getElement(".ruleexpression-header-content").clientHeight+r.container.getElement(".ruleexpression-footer-content").clientHeight+5;e.style.height="calc(100% - "+t+"px)"})},onRender:function(){var e=this;e._autoCompleteRulePresenter&&(e._autoCompleteRulePresenter.inject(e.container.getElement(".ruleexpression-frame")),e._autoCompleteRulePresenter.render()),e._languageInformationPresenter&&(e._languageInformationPresenter.inject(e.container.getElement(".ruleexpression-language-information")),e._languageInformationPresenter.render());var t={collection:new u(e._actions),events:{onActionClick:function(t,n){var a=t.model.get("handler");UWA.is(a,"function")&&a.call(t,e)}}};e._actionView=new d(t),e._actionView.inject(e.container.getElement(".ruleexpression-header-content")),e._actionView.render(),e._localModelEvent.publish({event:"onResize",data:null}),e._OkCancel.inject(e.container.getElement(".ruleexpression-footer-content")),e._localModelEvent.publish({event:"onCheckExpression",data:null})},addAction:function(e){this._actions.push(e)},createOKCancelActions:function(e){var t=this;t._localModelEvent.subscribe({event:"onDone"},function(){t.container.getElement(".ruleexpression-footer-content").classList.add("displaynone"),t._localModelEvent.publish({event:"onResize",data:null})});var n=new r({value:m.OK,className:"primary"});n.addEvent("onClick",function(){var e=JSON.parse(JSON.stringify(t.getExpression())),n={currentExpression:{}};n.currentExpression.items=e.items,t._initialExpression=JSON.parse(JSON.stringify(n)),t._localModelEvent.publish({event:"onSave",data:t.getExpression()})});var a=new r({value:m.cancel,className:"default"});a.addEvent("onClick",function(){t._localModelEvent.publish({event:"onDone",data:null}),t._autoCompleteRulePresenter.setExpression(JSON.parse(JSON.stringify(t._initialExpression.currentExpression))),t._autoCompleteRulePresenter.createInitialExpression(),t._localModelEvent.publish({event:"onCheckExpression",data:null})});var s=new l({buttons:[n,a]});t._OkCancel=s},getExpression:function(){return this._autoCompleteRulePresenter.getExpression()},subscribe:function(e,t){this._localModelEvent.subscribe({event:e},t)},publish:function(e,t){this._localModelEvent.publish({event:e,data:t})},getErrorsCount:function(){return this._autoCompleteRulePresenter.getErrorsCount()},_getSolverObject:function(e){var t=a.generateRawExpression(this._autoCompleteRulePresenter.getExpression()),n=e?"true":"false",s={},i={};if(i.expression=t,i.computeCause=n,""===t)return null;return s._data=i,s._from="RuleExpressionPresenter",s._to="solverRule",s._request="checkExpressionValidity",s},isInConflict:function(){return this._isInConflict}})}),define("DS/CfgXRules/Commons/Presenters/VCSMainContainer",["UWA/Class/View","DS/DataDragAndDrop/DataDragAndDrop","DS/W3DXComponents/Views/Layout/ActionsView","DS/W3DXComponents/Views/Item/ActionView","DS/UIKIT/Tooltip","DS/W3DXComponents/Collections/ActionsCollection","DS/UIKIT/DropdownMenu","DS/UIKIT/IconDropdown","DS/UIKIT/Input/Text","DS/UIKIT/Input/Button","DS/Controls/Toggle","DS/CoreEvents/ModelEvents","DS/CfgXRules/Commons/Presenters/VCSTablePresenter","DS/Utilities/Debug","DS/UIKIT/Dropdown","DS/CfgXRules/Commons/Presenters/ViewSearch","DS/CfgXRules/Commons/Presenters/VCSTilePresenter","text!DS/CfgXRules/assets/DataGridColumnAttributeMapping.json","i18n!DS/CfgXRules/assets/nls/Commons/VariabilityCriteriaSelector","css!DS/UIKIT/UIKIT.css","css!DS/CfgXRules/Commons/Presenters/VCSMainContainer"],function(e,t,n,a,s,i,o,r,l,c,p,d,u,h,m,g,f,v,C){"use strict";var b=JSON.parse(v);return e.extend({className:"criteria-selector-container",init:function(e){e=e||{},this._currSearchText="",this.searchOptions={},this.showCloseAction=!1,this.showSwitchViewAction=!1,this.showKpiAction=!1,this.actions=null,!0===e.showCloseAction&&(this.showCloseAction=!0),!0===e.showSwitchViewAction&&(this.showSwitchViewAction=!0),!0===e.showKpiAction&&(this.showKpiAction=!0),e.actions&&e.actions.length>0&&(this.actions=e.actions),e.dictionaryJSON&&!e.dictionaryJSON._version&&(e.dictionaryJSON._version="1.0"),this.criteriaTypes=[];var t=[];b&&b[e.dictionaryJSON._version].forEach(function(n){t.push({text:C[n.text]?C[n.text]:n.text,dataIndex:b[e.dictionaryJSON._version][0]===n?"tree":n.attribute,valueAttribute:n.attribute,width:n.width?n.width:"auto",isEditable:!!n.isEditable&&n.isEditable,isSortable:void 0===n.isSortable||n.isSortable,isHidden:!!n.isHidden&&n.isHidden})}),"1.0"===e.dictionaryJSON._version?(this.criteriaTypes.push({criteriaName:"Features"}),this.criteriaTypes.push({criteriaName:"Options"})):(this.criteriaTypes.push({criteriaName:"Variants"}),this.criteriaTypes.push({criteriaName:"Options"}),this.criteriaTypes.push({criteriaName:"Packs"}));var n={contentTreeOptions:{viewIdentifier:"table",isEditable:!0,columns:t.length>0?t:[{text:"Title",dataIndex:"tree",width:200},{text:"Type",dataIndex:"critType",width:"auto",isSortable:!0}],resize:{rows:!1,columns:!0},selectionData:{totalCount:0,displayCount:0,selectionCount:0},countParentSelection:!1}},a={dictionaryJSON:e.dictionaryJSON?e.dictionaryJSON:"",getAllChildrenOnParentSelection:!0,getParentOnChildSelection:!0,countParentSelection:!1,actions:[{title:C.Add,icon:"plus",event:"onAddAction"}]};this.contentViews=[{id:"table",view:u,options:UWA.merge(n,a)},{id:"tile",view:f,options:UWA.merge({viewIdentifier:"tile"},a)}],this._parent(e)},render:function(){var e=this;return this.buildHeaderSection().inject(this.container),this.buildSearchSection().inject(this.container),this.contentSection=this.buildContentView(),this.contentSection.inject(this.container),this.initializeContentViews(),this.subscribe("onDisplayAndSelCountUpdate",function(t){console.log("onDisplayAndSelCountUpdate callback: "+arguments.toString());var n=(t.selectionCount>0?" "+t.selectionCount+" "+C.Of+" ":"")+t.displayCount+" "+C.items;e.container.getElement(".selection-count")&&e.container.getElement(".selection-count").setContent(n)}),this.switchView("table"),this},buildHeaderSection:function(){var e=UWA.createElement("div",{id:"headerCtrlSection",class:"header-ctrl-section"}),t=UWA.createElement("div",{id:"dispAndSelectionCountLabel",class:"selection-count",html:""}),o=this;e.addContent(t);var r=UWA.createElement("div",{id:"actions-section",class:"actions-section",styles:{display:"flex"}}),l=[{text:"Search",icon:"search",title:C.Search,handler:function(e){if(e.container.getElement(".search-section-div")){var t=e.container.getElement(".search-section-div").getStyle("display");"table"===t?e.container.getElement(".search-section-div").setStyle("display","none"):"none"===t&&e.container.getElement(".search-section-div").setStyle("display","table")}this.toggleSelection()}}],c={text:"kpi",icon:"chart-bar",title:"KPI",handler:function(e){if(console.log("kpi action.."+o),this.toggleSelection(),!this.kpiSelectPanel){this.kpiSelectPanelElements={},this.kpiSelectPanelElements.selectAllCheck=new p({label:"(select all)",value:"all",mixedState:!0,allowUnsafeHTMLLabel:!1}),this.kpiSelectPanelElements.kpis=[new p({label:"Take Rate",value:"takeRate",checkFlag:!0,allowUnsafeHTMLLabel:!1}),new p({label:"Total Cost",value:"totalCost",checkFlag:!0,allowUnsafeHTMLLabel:!1}),new p({label:"Complexity",value:"complexity",checkFlag:!0,allowUnsafeHTMLLabel:!1})];var t=UWA.createElement("div",{html:this.kpiSelectPanelElements.kpis});this.kpiSelectPanel=new m({body:t,target:this.container,closeOnClick:!1})}!0===this.model.get("selected")?this.kpiSelectPanel.show():this.kpiSelectPanel.hide()}},d={text:"switch",icon:"list",title:C.SwitchView,selectedView:"tableView",selected:!0,handler:function(e){console.log("view action.."+o);var t=this.model.get("selectedView");"tableView"===t?(this.model.set("selectedView","tileView"),this.model.set("icon","layout"),this.render(),e.switchView("tile")):"tileView"===t&&(this.model.set("selectedView","tableView"),this.model.set("icon","list"),this.render(),e.switchView("table"))}};!0===this.showKpiAction&&l.push(c),!0===this.showSwitchViewAction&&l.push(d);var u=a.extend({onRender:function(){UWA.is(this.model.get("title"))&&this.model.get("title").trim().length>0&&(this.tooltip=new s({position:"bottom",target:this.container,body:this.model.get("title")})),this.container.setStyles({width:"auto"}),!0===this.model.get("selected")&&(this.container.addClassName("item"),this.container.addClassName("selected"))},hideTooltip:function(){this.tooltip&&this.tooltip.hide()},toggleSelection:function(){this.model.get("selected")||!1===this.model.set("selected")?(this.model.set("selected",!1),this.container.removeClassName("item"),this.container.removeClassName("selected")):(this.model.set("selected",!0),this.container.addClassName("item"),this.container.addClassName("selected"))}}),h=new n({collection:new i(l),itemView:u,events:{onActionClick:function(e){var t=e.model.get("handler");UWA.is(t,"function")&&t.call(e,o)}}}),g=new n({collection:new i([{text:"close",icon:"cancel",title:C.Close}]),itemView:u,events:{onActionClick:function(e){e.hideTooltip(),o.dispatchEvent("onCloseAction")}}});return r.addContent(h.render()),this.showCloseAction&&(r.addContent({tag:"div",html:"|",styles:{width:"auto"},class:"fonticon fonticon-2x"}),r.addContent(g.render())),e.addContent(r),e},buildSearchSection:function(){return this.getSearchComponent_new()},getSearchComponent_new:function(){var e=this,t=[],n=this.options.dictionaryJSON._version;n&&"2.0"===n&&(t=[{id:"Variants",text:"Variants",selected:!0},{id:"Options",text:"Options",selected:!0},{id:"Packs",text:"Packs",selected:!0}]);var a=UWA.createElement("div",{id:"searchDiv",class:"search-section-div"}),s={enableCache:!1,typeFilter:t,onSearch:function(t){e.publishViewEvent("onContentFilterCriteriaChange",{filterData:t})}},i=new g(s);return s=this.searchOptions,i.render().inject(a),a},buildContentView:function(){return UWA.createElement("div",{id:"contentSection",class:"content-section"})},initializeContentViews:function(){if(this.contentViews&&this.contentViews.length>0){this._contentViews={};var e=this;this.contentViews.forEach(function(t,n){var a=t.options?t.options:{},s=new t.view(a);s.render(),0===n&&(e._contentViews.currentView=t.id,e._contentViews.view={}),e._contentViews.view[t.id]=s})}},switchView:function(e){this._contentViews&&(this.contentSection.setContent(this._contentViews.view[e]),this._contentViews.currentView=this._contentViews.view[e])},publishViewEvent:function(e,t){if(this._contentViews)for(var n in this._contentViews.view)if(!t.eventOrigin||n!==t.eventOrigin){var a=this._contentViews.view[n];UWA.is(a.publish,"function")&&a.publish(e,t,a)}},subscribeViewEvent:function(e,t){if(this._contentViews)for(var n in this._contentViews.view){var a=this._contentViews.view[n];UWA.is(a.subscribe,"function")&&UWA.is(t,"function")&&a.subscribe(e,t)}},subscribe:function(e,t){this.subscribeViewEvent(e,t)},changeView:function(e){this.switchView(e)},addCriteria:function(e){this.publishViewEvent("addCriteria",{item:e})},removeCriteria:function(e){this.publishViewEvent("removeCriteria",{item:e})},showAttribute:function(e){this.publishViewEvent("showAttribute",{attribute:e})},hideAttribute:function(e){this.publishViewEvent("hideAttribute",{attribute:e})},sortBy:function(e,t){this.publishViewEvent("sortBy",{attribute:e,isAccending:t})},hideCriteria:function(){},showCriteria:function(){},applyAction:function(){},setActions:function(){}})}),define("DS/CfgXRules/Commons/Presenters/VariabilityCriteriaSelector",["UWA/Class","DS/CfgXRules/Commons/Presenters/SlideInPanel","DS/CfgXRules/Commons/Presenters/VCSMainContainer"],function(e,t,n){"use strict";return e.extend({init:function(e){this.parentContainer=e.parentContainer;var a={dictionaryJSON:e.dictionaryJSON,showCloseAction:!0,showSwitchViewAction:!0,showKpiAction:!1,actions:[]};this.viewContent=new n(a),this.viewContent.render();var s=e.actionView;this.slideinPanel=new t({isModal:e.isModal?e.isModal:void 0,parentContainer:this.parentContainer,viewContent:this.viewContent,onShowPanel:function(){console.log("slide-in show action"),s&&s.container.addClassName("font-icon-selected")},onHidePanel:function(){console.log("slide-in hide action"),s&&s.container.removeClassName("font-icon-selected")},onOkAction:function(){console.log("slide-in ok action")},onCancelAction:function(){console.log("slide-in cancel action")}}),this._parent.apply(this,arguments)},toggle:function(){this.slideinPanel.toggle()},subscribe:function(e,t){this.viewContent.subscribe(e,t)},changeView:function(e){this.viewContent.changeView(e)},addCriteria:function(e){this.viewContent.addCriteria(e)},removeCriteria:function(e){this.viewContent.removeCriteria(e)},showAttribute:function(e){this.viewContent.showAttribute(e)},hideAttribute:function(e){this.viewContent.hideAttribute(e)},sortBy:function(e,t){this.viewContent.sortBy(e,t)},hideCriteria:function(e){},showCriteria:function(e){},applyAction:function(e,t){},setActions:function(e){}})});