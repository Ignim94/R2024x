define("DS/DELWKOTreeListAuthoringModule/DELWKOUpperViewsModule",["UWA/Core","DS/DELPPWTreeListAuthoringModule_FD02/TreeListAuthoringBaseModule"],function(e,n){"use strict";return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","SelectionBehavior","TaggerBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","UXFactoryBehavior","ImplementBehavior","CapableResourceLinkBehaviour","ViewBehavior","ExpandFilterBehavior","LoadObjectBehavior","LinkBehavior","RootsBehavior","MfgProcessBehavior","MfgProcessCrossHighlightBehavior"],creator:function(t,o,i,r,a,c,d,s,u,f,l,h,g,p,v,B,R,y,T,b,D,E,I,A){var C,M,P,S,O,L,w,m,N,k,F,U,V,x,W,j,K,X=new(0,n.creator)(t,o,i,r,a,d,s,u,f,l,h,g,p,v,B,T),G=[],H=[];return C=function(n){var t,o=!1;return e.is(n)&&(t=a.getPPRType(n),o=G.indexOf(t)>-1),o},M=function(n){var t=!1;return e.is(n)&&e.is(n.get)&&(t=H.indexOf(n.get("type"))>-1),t},P=function(){var e=[];i.getSelectedNodes().forEach(function(n){e.push({nodeId:n.getInstancePID()||n.getReferencePID(),isSelected:n.isSelected(),absPath:n.getAbsolutePath()})}),e.length>0&&t.notify("reComputeCrossHighlight",[e])},S=function(e,n,t){C(e)&&X.onAddReference(e,n,t)},O=function(n){var t=!1,o=[];n=e.is(n,"array")?n:[n],i.withTransactionUpdate(function(){n.forEach(function(n){!function(n,o){var r,a;M(n)&&(r=n.get("from"),a=n.get("to"),e.is(o,"array")&&o.length>0&&o.indexOf(a)>-1||(o.push(a),h.isDocConnection(n)?i.updateDocAttributes(r):i.isNodeAdded(a)&&(i.updateAttributes(n),t=!0)))}(n,o)}),t&&P()})},L=function(n){var t=[],o=function(n,t){var o,r;if(M(n)&&(o=n.get("to"),!(e.is(t,"array")&&t.length>0&&t.indexOf(o)>-1||(t.push(o),i.isNodeAdded(o))))){if(r=a.getReference(o),e.is(r)){var c={loadChildren:!1};i.addNode(r,c)}P()}};e.is(n,"array")?i.withTransactionUpdate(function(){n.forEach(function(e){o(e,t)})}):o(n,t)},N=function(n){var t=function(e){(C(e)||M(e))&&X.onChangeIRPC(e)};e.is(n,"array")?i.withTransactionUpdate(function(){n.forEach(function(e){t(e)})}):t(n)},w=function(n){var t=function(e){C(e)&&X.onRemoveRefOrInst(e)};e.is(n,"array")?i.withTransactionUpdate(function(){n.forEach(function(e){t(e)})}):t(n)},m=function(n){var o,r=!1;n=e.is(n,"array")?n:[n],o=function(n){var o,a;e.is(n)?M(n)&&(o=n.get("from"),a=n.get("to"),h.isDocConnection(n)?i.updateDocAttributes(o):i.isNodeAdded(a)&&(i.updateAttributes(n),r=!0)):t.debug("ERROR: No model defined")},i.withTransactionUpdate(function(){n.forEach(function(e){o(e)}),r&&P()})},k=function(e){var n=a.getReferenceModel(e.newInstPIDArray[0]);C(n)&&X.onReparentInstances(e)},F=function(e){var n=a.getReferenceModel(e);C(n)&&X.onReparentBegin(e)},U=function(e){var n=a.getReferenceModel(e);C(n)&&X.onReparentEnd(e)},V=function(n){var t,o;if(e.is(n)&&(e.is(n.selectedNodeIds)&&e.is(n.selectedNodeIds.length>0)&&n.selectedNodeIds.forEach(function(e){i.unSelectNode(e)}),e.is(n.changed)))if(e.is(n.changed.childOccurencePath)){if(t=i.getNodeModel(n.changed.childOccurencePath),e.is(t)&&t.length>0)for(o=0;o<t.length;o++)if(t[o].getAbsolutePath().join()===n.changed.childOccurencePath.join()){t[o].select();break}}else if(t=i.getNodeModel(n.changed.nodeId),e.is(t)&&t.length>0)for(o=0;o<t.length;o++)t[o].isRoot(!0)&&t[o].select()},x=function(e){var n=[];(e=Array.isArray(e)?e:[e]).forEach(function(e){var t=a.getReferenceModel(e[0]);C(t)&&n.push(e)}),n.length>0&&X.onAddOccurrence(n)},W=function(e,n,o){var i={};t.notify("startProgress",i),K(e,n),t.notify("stopProgress",i),t.notify("ExpandFilterApplied")},K=function(n,i){if(t.getBehavior("WUXNodeModelBehavior"),e.is(o)){var r=o.getTreeDocument(),a=(o.getDataGridView(),[]),c=[];o.getTreeDocument().getRoots().forEach(e=>{a.push(e.getReferenceLabel()),c.push(e.getReferencePID())});let t={},i=[" "];if(n.forEach(function(e){c.includes(e)&&i.push(a[c.indexOf(e)])}),t.label={filterId:"set",filterModel:i,filterOptions:{keepChildren:!0,ensureVisible:!0}},r.setFilterModel(t),e.is(r)){var d=r.getFilterManager();if(e.is(d)){var s=d.getFilters().label;e.is(s)&&s._applyFilterModel()}}}},j=function(){var n=o.getDataGridView();e.is(n.getTreeDocument().getFilterManager().getFilters())&&e.is(n.getTreeDocument().getFilterManager().getFilters().label)&&(n.getTreeDocument().getFilterManager().getFilters().label.filterModel=[])},{listenTo:function(){return e.extend(X.listenTo(),{addReference:S,addConnection:O,addLinkedObject:L,removeReference:w,removeInstance:w,removeConnection:m,changeReference:N,changeInstance:N,changeConnection:N,reparentInstances:k,reparentBegin:F,reparentEnd:U,EGraphNodeSelect:V,addOccurrece:x,UpperViewsFilter:W,resetUpperViewsFilter:j})},onStart:function(e){if(X.onStart(e),!e.pprTypes||!e.linkTypes)throw new Error(t.getId()+": DELWKOUpperViewsModule initialization failed");G=e.pprTypes,H=e.linkTypes},onStop:function(){X.onStop()}}}}}),define("DS/DELWKOTreeListAuthoringModule/DELWKORoutingsModule",["UWA/Core","DS/DELPPWTreeListAuthoringModule_FD02/TreeListAuthoringBaseModule","DS/DELWKOModelServices/DELWKOCollectionUtilsCloud"],function(e,n,t){"use strict";return{behaviors:["TreeListViewBehavior","WUXNodeModelBehavior","DropZoneViewBehavior","ModelBehavior","SelectionBehavior","TaggerBehavior","BIBehavior","SearchBehavior","ResourceBehavior","EditAttributeBehavior","DocumentBehavior","ExportToCSVBehaviour","RefreshBehavior","UXFactoryBehavior","ImplementBehavior","CapableResourceLinkBehaviour","DuplicateAdvBehavior","ViewBehavior","ExpandFilterBehavior","SetSequencingModeBehavior","LoadObjectBehavior","RootsBehavior","LinkBehavior","ProductFlowLinkBehavior","CfgColumnsBehavior","MfgProcessBehavior","MfgProcessCrossHighlightBehavior"],creator:function(t,o,i,r,a,c,d,s,u,f,l,h,g,p,v,B,R,y,T,b,D,E,I,A,C,M,P,S){var O,L,w,m,N,k,F,U,V,x,W,j,K,X,G,H,_,z=new(0,n.creator)(t,o,i,r,a,d,s,u,f,l,h,g,p,v,B,b),Z=[],q=[],J=[];return w=function(n){var t,o=!1;return e.is(n)&&(t=a.getPPRType(n),o=Z.indexOf(t)>-1),o},m=function(n){var t=!1;return e.is(n)&&e.is(n.get)&&(t=q.indexOf(n.get("type"))>-1),t},N=function(e){return J.indexOf(e)>-1},k=function(){var e=[];i.getSelectedNodes().forEach(function(n){e.push({nodeId:n.getInstancePID()||n.getReferencePID(),isSelected:n.isSelected(),absPath:n.getAbsolutePath()})}),e.length>0&&t.notify("reComputeCrossHighlight",[e])},F=function(e,n,t){w(e)&&z.onAddReference(e,n,t)},j=function(n,o){var r;e.is(n)&&i.isNodeAdded(n)&&(r=a.getImpactedConnections([n]),t.notify("addConnection",[r,o]))},U=function(n,o){var r=!1,a=[];o=o||{},n=e.is(n,"array")?n:[n],i.withTransactionUpdate(function(){n.forEach(function(n){!function(n,a){var c,d,s,u,f=!e.is(o.loadRelatedobjectsToView)||o.loadRelatedobjectsToView;m(n)&&("SecondaryCandidateResourceLink"===n.get("type")&&(n=A.cloneSecondaryCapableRscLinkWithFromAttr(n)),c=n.get("from"),d=n.get("to"),s=n.get("type"),u=c,e.is(a,"array")&&a.length>0&&a.indexOf(d)>-1||(a.push(d),h.isDocConnection(n)?i.updateDocAttributes(c):i.isNodeAdded(c)&&(e.is(O)&&O.linkType===s?i.updateBadge(u,O.badgeIcon):e.is(L)&&L.linkType===s&&i.updateBadge(u,L.badgeIcon),i.updateAttributes(n),r=!0,N(s)&&f&&t.notify("addLinkedObject",[n]))))}(n,a)}),r&&k()})},x=function(n){var o,r=!1,a=[];n=e.is(n,"array")?n:[n],o=function(n){var o,c;e.is(n)?m(n)&&("SecondaryCandidateResourceLink"===n.get("type")&&(n=A.cloneSecondaryCapableRscLinkWithFromAttr(n)),c=n.get("from"),h.isDocConnection(n)?i.updateDocAttributes(c):(o=n.get("type"),e.is(o,"string")?i.isNodeAdded(c)&&((e.is(O)&&O.linkType===o||e.is(L)&&L.linkType===o)&&a.push(c),i.updateAttributes(n),r=!0):t.debug("Could not get connection type"))):t.debug("ERROR: No model defined")},i.withTransactionUpdate(function(){n.forEach(function(e){o(e)}),r&&k(),a.length>0&&i.updateBadge(a,null)})},W=function(n){var t=function(e){(w(e)||m(e))&&z.onChangeIRPC(e)};e.is(n,"array")?i.withTransactionUpdate(function(){n.forEach(function(e){t(e)})}):t(n)},V=function(n){var t=function(e){w(e)&&z.onRemoveRefOrInst(e)};e.is(n,"array")?i.withTransactionUpdate(function(){n.forEach(function(e){t(e)})}):t(n)},K=function(e){var n=a.getReferenceModel(e.newInstPIDArray[0]);w(n)&&z.onReparentInstances(e)},X=function(e){var n=a.getReferenceModel(e);w(n)&&z.onReparentBegin(e)},G=function(e){var n=a.getReferenceModel(e);w(n)&&z.onReparentEnd(e)},H=function(n){var t,o;if(e.is(n)&&(e.is(n.selectedNodeIds)&&e.is(n.selectedNodeIds.length>0)&&n.selectedNodeIds.forEach(function(e){i.unSelectNode(e)}),e.is(n.changed)))if(e.is(n.changed.childOccurencePath)){if(t=i.getNodeModel(n.changed.childOccurencePath),e.is(t)&&t.length>0)for(o=0;o<t.length;o++)if(t[o].getAbsolutePath().join()===n.changed.childOccurencePath.join()){t[o].select();break}}else if(t=i.getNodeModel(n.changed.nodeId),e.is(t)&&t.length>0)for(o=0;o<t.length;o++)t[o].isRoot(!0)&&t[o].select()},_=function(e){var n=[];(e=Array.isArray(e)?e:[e]).forEach(function(e){var t=a.getReferenceModel(e[0]);w(t)&&n.push(e)}),n.length>0&&z.onAddOccurrence(n)},{listenTo:function(){return e.extend(z.listenTo(),{addReference:F,addConnection:U,addOccurrece:_,removeReference:V,removeInstance:V,removeConnection:x,changeReference:W,changeInstance:W,changeConnection:W,addRootNode:j,reparentInstances:K,reparentBegin:X,reparentEnd:G,EGraphNodeSelect:H})},onStart:function(n){if(z.onStart(n),!n.pprTypes||!n.linkTypes)throw new Error(t.getId()+": RoutingsModule initialization failed");Z=n.pprTypes,q=n.linkTypes,J=e.is(n.loadConectedObjLinkTypes)?n.loadConectedObjLinkTypes:[],O=e.is(n.displayBadge)?n.displayBadge:null,L=e.is(n.displayBadgePS)?n.displayBadgePS:null},onStop:function(){z.onStop()}}}}});