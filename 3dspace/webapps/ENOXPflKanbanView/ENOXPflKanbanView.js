define("DS/ENOXPflKanbanView/Performance",["UWA/Class","DS/Logger/Logger"],function(e,n){"use strict";return e.singleton({name:"DS/ENOXPflKanbanView/Performance",_logger:null,_dumpRoutineInterval:null,init:function(){this._logger=n.getLogger("DS/IssueServices/Utils"),this._dumpRoutineInterval=null,window.performances={},window.performances.dump=this.dump,window.performances.clear=this.clear},start:function(e){window.performance.mark(e+"_start")},end:function(e){try{window.performance.mark(e+"_end"),window.performance.measure(e,e+"_start",e+"_end")}catch(n){this._logger.warn("The mark %s cannot be ended",e)}}})}),define("DS/ENOXPflKanbanView/Column",["UWA/Class/View","UWA/Core","DS/Logger/Logger","DS/TreeModel/TreeDocument","DS/WebappsUtils/WebappsUtils","DS/ENOXPflKanbanView/Performance","i18n!DS/ENOXPflKanbanView/assets/nls/Kanban","css!DS/ENOXPflKanbanView/assets/css/Column"],function(e,n,t,i,s,o,a,r){"use strict";var l=1,c=function(){return n.createElement("div",{class:"column-content",html:""})},h=function(){return n.createElement("div",{class:"column-overlay",html:[{tag:"div",class:"column-overlay-label",html:a.kanban.dnd.placeholder},{tag:"span",class:"column-overlay-icon fonticon fonticon-drag-drop"}]})};return e.extend({name:"DS/ENOXPflKanbanView/Column",tagName:"div",className:"kanban-container-column",_logger:null,defaultOptions:{title:{},defaultImage:s.getWebappsAssetUrl("IssueManagement","icons/camera.png")},kanban:null,document:null,models:[],grid:null,_dnd:{dragged:!1},_cellsAwaitingPostRendering:[],setup:function(e){o.start(this.name+" setup"),this._parent(e),this._logger=t.getLogger("DS/IssueManagement/View"),this.kanban=e.kanban,this.document=new i,this.document._id=this.id,this.models=[],this._dnd={dragged:!1},this._cellsAwaitingPostRendering=[],this._subscribers(),o.end(this.name+" setup")},render:function(){o.start(this.name+" render");var e=c();return e.inject(this.container),this.options.columnContent.inject(e),h().inject(this.container),o.end(this.name+" render"),this},destroy:function(){this._logger=null,this.document=null,this.models=[],this.attributeKeyValue={key:null,value:null},this._dnd={dragged:!1},this._cellsAwaitingPostRendering=[]},_subscribers:function(){var e=this,n=e.kanban.utils.debounce(function(n){e.dispatchEvent("onSelect",{column:e,node:n,event:"select"})}.bind(e),l);e.document.getModelEvents().subscribe({event:"select"},n);var t=e.kanban.utils.debounce(function(n){e.dispatchEvent("onSelect",{column:e,node:n,event:"unselect"})}.bind(e),l);e.document.getModelEvents().subscribe({event:"unselect"},t)},utils:{whereToAddModal:null}})}),define("DS/ENOXPflKanbanView/Kanban",["UWA/Class/View","UWA/Core","DS/UIKIT/Tooltip","DS/Logger/Logger","DS/ENOXPflKanbanView/Column","DS/ENOXPflKanbanView/Performance","i18n!DS/ENOXPflKanbanView/assets/nls/Kanban","css!DS/ENOXPflKanbanView/assets/css/Kanban"],function(e,n,t,i,s,o,a,r){"use strict";var l={MINIMUM_WIDTH_COLUMN:260,ALL_STATE:"All",LAYOUTS:{RIGHT:"right",BOTTOM:"bottom",CLOSED:"closed"},SELECT_DEBOUNCE_TIMEOUT:1,FIRST_ELEMENT:0};return e.extend({name:"DS/ENOXPflKanbanView/Kanban",tagName:"div",className:"kanban-container",_logger:null,component:null,document:null,settings:{},columns:[],chizu:{container:null,tooltips:[],position:0},currentView:null,columnsListeners:[],siblings:{right:null,left:null},verticalLevelSelector:-1,_issuesNodesMapping:{},preventUnselectColumns:!1,_ctrlKey:!1,_subscribed:!1,setup:function(e){o.start(this.name+" setup"),this.cleanupChizu(),this._parent(e),this._logger=i.getLogger("DS/ENOXPflKanbanView/Kanban"),this.settings=e&&e.settings?e.settings:{},l.MINIMUM_WIDTH_COLUMN=e&&e.columnMinWidth?e.columnMinWidth:l.MINIMUM_WIDTH_COLUMN,this.columns=[],this.currentView=null,this.columnsListeners=[],this.siblings={right:null,left:null},this.verticalLevelSelector=-1,this._issuesNodesMapping={},this.preventUnselectColumns=!1,this._ctrlKey=!1,this._subscribed=!1,o.end(this.name+" setup")},render:function(){var e=this;return o.start(e.name+" render"),e.columns.forEach(function(n){n.render().inject(e.container)}),e.prepareNavigationButtons(),e.switchView(),o.end(e.name+" render"),e},prepareNavigationButtons:function(){this.navigationControllsAdded||(this.arrow=n.createElement("div",{class:"arrow-fonticon"}).inject(this.container),this.arrow.left=n.createElement("span",{class:"slidingViewsScrollButtons fonticon fonticon-2x fonticon-left-open"}).inject(this.arrow),this.arrow.leftTooltip=new t({position:"bottom",target:this.arrow.left,body:a.kanban.tooltips.leftArrow}),this.arrow.right=n.createElement("span",{class:"slidingViewsScrollButtons fonticon fonticon-2x fonticon-right-open"}).inject(this.arrow),this.arrow.rightTooltip=new t({position:"bottom",target:this.arrow.right,body:a.kanban.tooltips.rightArrow}))},prepareColumns:function(e){var n=this;return o.start(n.name+" load"),e.forEach(e=>{let t=!(!e||e.isActive)||void 0;if(e&&t){var i=new s({id:e.id,kanban:n,title:e.displayName+" "+e.revision,columnContent:e&&e.contentContainer?e.contentContainer:void 0});n.columns.push(i)}}),o.end(n.name+" load"),n},cleanupChizu:function(){this.chizu&&(this.chizu.tooltips&&this.chizu.tooltips.forEach(function(e){e.destroy(),e=null}),this.chizu.container&&this.chizu.container.destroy(),this.chizu={container:null,tooltips:[],position:0})},refresh:function(e){o.start(this.name+" refresh"),this.preventUnselectColumns=!0,this.container.empty(),this.columns.forEach(function(e){e.destroy()}),this.columns=[],this.cleanupChizu(),this.prepareColumns(n.is(e,"array")&&e.length>0?e:this.options.columnList),this.render(),o.end(this.name+" refresh")},resize:function(){if(!this.container||!this.container.getParent())return;let e=this.container.getParent();var n=e.offsetWidth,t=e.offsetHeight,i=n,s=this.container.getElements(".kanban-container-column.visible");if(0!==s.length){var o=s[l.FIRST_ELEMENT].offsetWidth,a=i/(o=(o=o>l.MINIMUM_WIDTH_COLUMN?l.MINIMUM_WIDTH_COLUMN:o)<l.MINIMUM_WIDTH_COLUMN?l.MINIMUM_WIDTH_COLUMN:o);a=Math.floor(a);var r=this.chizu.position,c=r;a<s.length&&(a===s.length-r||a>s.length-r&&(c=r-(a-(s.length-r))));var h=c,u=c+a;s.forEach(function(e,n){e.setStyle("max-height",t),h<=n&&n<u?(e.show(),e.setStyle("width",o)):e.hide()}),this._setChizu(s,a,c)}},switchView:function(){this.columns.forEach(function(e){e.hide(),e.container.removeClassName("visible")}),this.columns.forEach(function(e,n){e.show(),0===n&&e.container.addClassName("visible first"),e.container.addClassName("visible")}),this.resize()},hideColumns:function(e){o.start(this.name+" render"),this.columns.forEach(function(n){e.includes(n.id)&&(n.hide(),n.container.removeClassName("visible"))}),this.cleanupChizu(),o.end(this.name+" render")},showColumns:function(e){o.start(this.name+" render"),this.columns.forEach(function(n){e.includes(n.id)&&(n.show(),n.container.addClassName("visible"))}),this.resize(),o.end(this.name+" render")},_setChizu:function(e,i,s){var o=this;o.chizu.position=s;var r=[],l=[],c=0;e.forEach(function(e,h){var u="";h<s||c<i&&(u="displayed",c+=1);var d=n.createElement("div",{class:"chizu-placeholder-column "+u,events:{click:function(){var e=o.container.getElements(".kanban-container-column.visible"),n=0,t=e.length-h;t<i&&(h-=i-t);for(var s=0;s<e.length;s++)s<h?e[s].hide():n<i?(e[s].show(),e[s].setStyle("width",100/i+"%"),n+=1):e[s].hide();o._setChizu(e,i,h)}}});l.push(new t({position:"top",target:d,body:a.replace(a.kanban.tooltips.chizu,{title:o.columns[h].getOption("title")})})),r.push(d)}),null===o.chizu.container?(o.chizu.container=n.createElement("div",{class:"chizu",html:[{tag:"div",class:"chizu-placeholder-columns",html:r}]}),o.chizu.tooltips=l,o.chizu.container.inject(o.container)):(o.chizu.tooltips.forEach(function(e){e.destroy(),e=null}),o.chizu.tooltips=l,o.chizu.container.getElement(".chizu-placeholder-columns").setContent(r)),1===e.length?o.chizu.container&&!o.chizu.container.hasClassName("chizu-hidden")&&o.chizu.container.addClassName("chizu-hidden"):o.chizu.container&&o.chizu.container.hasClassName("chizu-hidden")&&o.chizu.container.removeClassName("chizu-hidden"),0===s?o.arrow.left&&!o.arrow.left.hasClassName("disable")&&o.arrow.left.addClassName("disable"):o.arrow.left&&o.arrow.left.hasClassName("disable")&&o.arrow.left.removeClassName("disable"),e.length<=c+s?o.arrow.right&&!o.arrow.right.hasClassName("disable")&&o.arrow.right.addClassName("disable"):o.arrow.right&&o.arrow.right.hasClassName("disable")&&o.arrow.right.removeClassName("disable"),o.clickLeftArrowEventListener&&o.arrow.left.removeEventListener("click",o.clickLeftArrowEventListener),o.clickLeftArrowEventListener=function(){e.forEach(function(e,n){n>=s-1&&n<=s+c-2?(e.show(),e.setStyle("width",100/c+"%")):e.hide()}),o._setChizu(e,i,s-1)},o.arrow.left.addEventListener("click",o.clickLeftArrowEventListener),o.clickRightArrowEventListener&&o.arrow.right.removeEventListener("click",o.clickRightArrowEventListener),o.clickRightArrowEventListener=function(){e.forEach(function(e,n){n>=s+1&&n<=s+c?(e.show(),e.setStyle("width",100/c+"%")):e.hide()}),o._setChizu(e,i,s+1)},o.arrow.right.addEventListener("click",o.clickRightArrowEventListener)},utils:{_debounceTimeouts:[],debounce:function(e,n,t){var i,s=this;return function(){var o=this,a=arguments,r=t&&!i;clearTimeout(i);var l=s._debounceTimeouts.indexOf(i);-1!==l&&s._debounceTimeouts.splice(l,1),i=setTimeout(function(){i=null,t||e.apply(o,a)},n),s._debounceTimeouts.push(i),r&&e.apply(o,a)}}}})});