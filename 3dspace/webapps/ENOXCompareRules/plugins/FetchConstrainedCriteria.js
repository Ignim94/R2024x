define("DS/ENOXCompareRules/plugins/FetchConstrainedCriteria",["DS/CompareWidget2/plugins/plugin","DS/CompareWidget2/plugins/STRUCTURE/expansionAdapters/nodeOccRel2RefInstTree","DS/xPortfolioQueryServices/js/xPortfolioModel","DS/UIKIT/Mask","DS/CompareWidget2/plugins/STRUCTURE/refInstTree/refInstTreeAug"],function(e,t,n,i,r){"use strict";return e.extend({init:function(e,t,n,i){this._parent(e,t,n,i)},onLoad:function(){return this._parent()},onDestroy:function(){return this._parent()},execute:async function(e,i){var o,s,u=e.leftRuleId,c=e.rightRuleId,a=e.lMvId,l=e.rMvId,p=e.lRuleDefinition,f=e.rRuleDefinition,_=p.configurationRule.attributes.ExpressionType,S=f.configurationRule.attributes.ExpressionType,g=e.rules;if("Matrix"==_&&"Matrix"==S)if(await n.getCompareRuleCriteria({identifier:u,modelVersion:a,typeCriteria:"constrainedCriteria"}).then(function(e){o=e},function(e){console.log("Failed to fetch MV ID for rule")}),await n.getCompareRuleCriteria({identifier:c,modelVersion:l,typeCriteria:"constrainedCriteria"}).then(function(e){s=e},function(e){console.log("Failed to fetch MV ID for rule")}),o.hasOwnProperty("nodes")&&s.hasOwnProperty("nodes")){let e=t.convert(g[0],o,this._plugSvcs,i),n=t.convert(g[1],s,this._plugSvcs,i);var I={securityContext:e._objIDSpec._securityContext,tenant:e._objIDSpec._tenant,serviceName:e._objIDSpec._serviceName},R={securityContext:n._objIDSpec._securityContext,tenant:n._objIDSpec._tenant,serviceName:n._objIDSpec._serviceName},d=this._plugSvcs;r.augment(e,I,this._plugSvcs).then(function(e){},function(e){d.errout("FAILURE AUGMENTING TREE")}),r.augment(n,R,this._plugSvcs).then(function(e){},function(e){d.errout("FAILURE AUGMENTING TREE")});let u=[e,n];this.reportOK(u)}else this._plugSvcs.postEvent("CONSTRAINED_STRUCTURE_NOT_AVAILABLE");else this._plugSvcs.postEvent("CONSTRAINED_STRUCTURE_NOT_AVAILABLE")}})});