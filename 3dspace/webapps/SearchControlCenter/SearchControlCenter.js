/*!  COPYRIGHT DASSAULT SYSTEMES 2014   */
define("DS/SearchControlCenter/control/SCCColorPicker",["UWA/Core","UWA/Class","UWA/Class/Events","UWA/Element","UWA/Controls/Abstract","DS/Controls/Tab","DS/Controls/ColorPalette","DS/Controls/ColorChooser","DS/Controls/Popup","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNInfraUX/SearchPreferences"],function(e,t,a,r,n,i,s,o,c,l,d){"use strict";return n.extend(a,{name:"scc-colorPicker",_colorPickerPopup:null,_tab:null,_defaultColorPalette:null,_recentColorPalette:null,_colorChooser:null,_currentColor:"#ffffff",divCustomColorChooser:null,_swatches_default:[{value:"#FEE000"},{value:"#009DDB"},{value:"#FF8A2E"},{value:"#9B2C98"},{value:"#00AA86"},{value:"#F564A3"},{value:"#8DDEE4"},{value:"#CC092F"},{value:"#E2D5CC"},{value:"#6FBC4B"},{value:"#70036B"},{value:"#002596"},{value:"#C6C68B"},{value:"#7F7F7F"},{value:"#4EA8B7"},{value:"#007A4C"},{value:"#ADADAD"},{value:"#127277"},{value:"#6D2815"},{value:"#000000"},{value:"#4D62BA"}],_swatches_recent:null,init:function(e){this._parent(e),this._buildUI(e)},_buildUI:function(t){e.is(t)&&e.is(t.initialValue)&&(this._currentColor=t.initialValue),this.elements.container=r.create("div",{class:"div-scc-color-picker"}),this.elements.content=r.create("div",{class:"scc_color_picker_"+t.colorPickerLabel.replace(/[/\s]/g,"_"),styles:{"border-radius":"5px",border:"1px solid #000000",background:this._currentColor,width:"39px",height:"39px"},events:{click:this._buildColorPickerUI.bind(this)}}).inject(this.elements.container)},_buildColorPickerUI:function(t){var a=this;e.is(a.divCustomColorChooser)&&e.is(a._colorPickerPopup)||(a.divCustomColorChooser=r.create("div",{class:"container-custom-color-picker",id:"container_custom_color_picker"}),a._tab=new i({displayStyle:"strip"}).inject(a.divCustomColorChooser),a._tab.add({label:l.get("SCCColorPicker.tab.ColorPalette.title"),isSelected:!0,content:a._buildColorPalette()}),a._tab.add({label:l.get("SCCColorPicker.tab.ColorChooser.title"),content:a._buildColorChooser()}),a._colorPickerPopup=new c({target:t.target,trigger:"click",toggleFlag:!1,position:"top",alignment:"near",offset:{x:5,y:-255},touchMode:!0}),a._colorPickerPopup.show(),a._colorPickerPopup.setBody(a.divCustomColorChooser),a._colorPickerPopup.addEventListener("hide",function(e){e.stopPropagation(),a._cleanup()}))},_buildColorPalette:function(){var e=r.create("div",{class:"scc-custom-color-picker",id:"scc_custom_color_picker_palette_tab_container"}),t=r.create("div",{class:"div-scc-custom-color-picker",id:"div_scc_custom_color_picker_default"}).inject(e);r.create("p",{class:"scc-custom-color-picker-title",id:"scc_custom_color_picker_title_default",text:l.get("SCCColorPicker.ColorPalette.default.title")}).inject(t);if(this._defaultColorPalette=new s({swatches:this._swatches_default,domId:"color_palette_default",touchMode:!0}).inject(t),this._getRecentSwatches().length>0){var a=r.create("div",{class:"div-scc-custom-color-picker",id:"div_scc_custom_color_picker_recent"}).inject(e);r.create("p",{class:"scc-custom-color-picker-title",id:"scc_custom_color_picker_title_recent",text:l.get("SCCColorPicker.ColorPalette.recent.title")}).inject(a);this._recentColorPalette=new s({swatches:this._getRecentSwatches(),domId:"color_palette_recent",touchMode:!0}).inject(a),this._recentColorPalette.addEventListener("change",this._onColorChange.bind(this),!1)}return this._defaultColorPalette.addEventListener("change",this._onColorChange.bind(this),!1),e},_buildColorChooser:function(){var e=r.create("div",{class:"scc-custom-color-chooser .scc-chooser-tab-container",id:"scc_custom_color_chooser_palette_tab_container"});return this._colorChooser=new o({domId:"color_chooser",value:this._currentColor,referenceValue:this._currentColor,touchMode:!0}).inject(e),this._colorChooser.addEventListener("change",this._onColorChange.bind(this),!1),e},_onColorChange:function(t){t.stopPropagation();var a=this._getNewColor(t.dsModel.domId);if(e.is(a,"string")&&a.indexOf("#")<0&&(a="#"+a),this._currentColor!==a)this._currentColor=a,this.elements.content.setStyle("background",a),"color_chooser"===t.dsModel.domId&&this._storeRecentSwatches(a),this._cleanup(),this.dispatchEvent("onColorChange",{color:this._currentColor,target:this.elements.container});else{if(!this._colorChooser.pointerdownCanvasP&&"color_chooser"===t.dsModel.domId)return;this._cleanup()}},_getNewColor:function(e){switch(e){case"color_chooser":return this._colorChooser.pointerdownCanvasP?this._colorChooser.value:this._currentColor;case"color_palette_default":return this._defaultColorPalette.value;case"color_palette_recent":return this._recentColorPalette.value;default:return this._currentColor}},_getCurrentColor:function(){return this._currentColor},_getRecentSwatches:function(){var t=d.getLocalStorageItem("_swatches_recent");return e.is(t)?JSON.parse(t):[]},_storeRecentSwatches:function(t){var a=JSON.parse(d.getLocalStorageItem("_swatches_recent"));e.is(a,"array")||(a=[]);var r=a.findIndex(e=>e.value.trim()===t.trim());r>=0&&a.splice(r,1),a.length>=10&&a.shift(),a.push({value:t}),d.setLocalStorageItem("_swatches_recent",JSON.stringify(a))},_cleanup:function(){e.is(this._defaultColorPalette)&&(this._defaultColorPalette.destroy(),this._defaultColorPalette=null),e.is(this._recentColorPalette)&&(this._recentColorPalette.destroy(),this._recentColorPalette=null),e.is(this._colorChooser)&&(this._colorChooser.destroy(),this._colorChooser=null),e.is(this._tab)&&(this._tab.destroy(),this._tab=null),e.is(this._colorPickerPopup)&&(this._colorPickerPopup.destroy(),this._colorPickerPopup=null),e.is(this.divCustomColorChooser)&&(this.divCustomColorChooser.destroy(),this.divCustomColorChooser=null)}})}),define("DS/SearchControlCenter/Model/SearchControlCenterFacetListModel",["UWA/Core","UWA/Class/Model"],function(e,t){"use strict";return t.extend({defaults:function(){return{id:"",title:"",subtitle:"",tooltip:"",domainid:"",facetJS:"",image:""}}})}),define("DS/SearchControlCenter/scripts/SearchcontrolCenterModel",["UWA/Element","UWA/Core","UWA/Class","UWA/Class/Debug"],function(e,t,a,r){"use strict";var n=a.singleton(r,{_searchControlCenterSettingsJSON:{},_datasource_InternalName_Mapping:{},_types_InternalName_Mapping:{},_attributes_InternalName_Mapping:{},_local_AttributeDisplay_Cache_For_Types:[],_local_AttributeDisplay_Cache_For_6WTags:[],gate_Local_Attribute_Cache:function(){return this._local_AttributeDisplay_Cache_For_Types},clear_Local_Attribute_Cache:function(){this._local_AttributeDisplay_Cache_For_Types.length>0&&(this._local_AttributeDisplay_Cache_For_Types=[])},clear_Local_6WTags_Cache:function(){this._local_AttributeDisplay_Cache_For_6WTags.length>0&&(this._local_AttributeDisplay_Cache_For_6WTags=[])},initiate_Local_Attribute_Cache:function(e){this._local_AttributeDisplay_Cache_For_Types.length>0&&(this._local_AttributeDisplay_Cache_For_Types=[]),e.length>0&&(this._local_AttributeDisplay_Cache_For_Types=e)},update_Local_Attributes_Cache:function(e){var a=this._local_AttributeDisplay_Cache_For_Types,r=e.datasource,n=e.type,i=e.preferredAttributeList,s=e.excludeAttributeList,o=!1;if(a.length>0){e.attributes;if(t.is(a,"array")&&t.is(n,"string")&&t.is(r,"string"))for(var c=0;c<a.length;c++){var l=a[c];t.is(l)&&n===l.uri&&r===l.source&&(t.is(i,"array")&&i.length>0&&(l.predicates=i,o=!0),t.is(s,"array")&&s.length>0&&(l.excluded_predicates=s,o=!0))}}if(!1===o){var d=[],u={};u.source=r,u.uri=n,t.is(i,"array")&&i.length>0&&(u.predicates=i),t.is(s,"array")&&s.length>0&&(u.excluded_predicates=s),a.length>0?a.push(u):(d.push(u),this._local_AttributeDisplay_Cache_For_Types=d)}},setSettingsJSON:function(e){t.is(e)&&(this._searchControlCenterSettingsJSON=e)},gateSettingsJSON:function(){return this._searchControlCenterSettingsJSON},gateTabSettingJSON:function(e){let a={};if(t.is(e)&&t.is(e.facetID,"string")){let s,o=e.facetID,c=n._searchControlCenterSettingsJSON;if(t.is(e.settingsJSON)&&(c=e.settingsJSON),s=t.is(c,"string")?JSON.parse(c):c,t.is(s)){let e=Object.keys(s),n=null;for(let c=0;c<e.length;c++){let l=e[c];if(t.is(l)&&s.hasOwnProperty(l))if("search_settings"===l&&"SearchControl_General"===o){if(n=s.search_settings,t.is(n)){a=n,s.result_categories&&(a.result_categories=s.result_categories),s.search_synonyms&&(a.search_synonyms=s.search_synonyms);break}}else if("type_custo"===l&&"SearchControl_SearchTypes"===o)n=s.type_custo,t.is(n)&&(a.type_custo=n);else if("tagRelationships"===l&&"SearchControl_6WTags"===o)a.tagRelationships=s.tagRelationships;else if("savedTags"===l&&"SearchControl_6WTags"===o)a.savedTags=s.savedTags;else if("tagColorization"===l&&"SearchControl_6WTags"===o)a.tagColorization=s.tagColorization;else if("hierarchical_predicates"===l&&"SearchControl_6WTags"===o)a.hierarchical_predicates=s.hierarchical_predicates;else if("controlledVocabulary"===l&&"SearchControl_6WTags"===o)a.controlledVocabulary=s.controlledVocabulary;else if("enterprise_ontology"===l&&"SearchControl_6WTags"===o)a.enterprise_ontology=s.enterprise_ontology;else if("current_enterprise_ontology_title"===l&&"SearchControl_6WTags"===o)a.current_enterprise_ontology_title=s.current_enterprise_ontology_title;else if("enterprise_ontology_history"===l&&"SearchControl_6WTags"===o)a.enterprise_ontology_history=s.enterprise_ontology_history;else if("companyTagsSearchSuggest"===l&&"SearchControl_6WTags"===o)a.companyTagsSearchSuggest=s.companyTagsSearchSuggest;else if("controlledVocabMode"===l&&"SearchControl_6WTags"===o)a.controlledVocabMode=s.controlledVocabMode;else if("attribute_custo"===l&&"SearchControl_6WTags"===o){if(n=s.attribute_custo,t.is(n)){if(n.hasOwnProperty("ds6w:type")){var r=n["ds6w:type"];if(t.is(r,"array"))for(var i=0;i<r.length;i++)if(UWA.is("AllDataSourcesandTypes"===r[i].source)){a=r[i];break}}n.hasOwnProperty("attributes_display")&&(a.attributes_display=n.attributes_display),n.hasOwnProperty("context_apps_predicates")&&(a.context_apps_predicates=n.context_apps_predicates)}}else"attribute_custo"===l&&"SearchControl_SearchTypes"===o?(n=s.attribute_custo,t.is(n)&&(a.attribute_custo=n)):"results_attributes_display_customization"===l&&"SearchControl_ResultsAttributesDisplay"===o?(n=s.results_attributes_display_customization,t.is(n)&&(a.results_attributes_display_customization=n)):"pqs"===l&&"SearchControl_PQ"===o&&(n=s.pqs,t.is(n)&&(a.pqs=n))}}}return a},updateSettingsJSON:function(e){var a,r,i,s=!1;if(a=t.is(e,"string")?JSON.parse(e):e,t.is(n._searchControlCenterSettingsJSON)?(r=t.is(n._searchControlCenterSettingsJSON,"string")?JSON.parse(n._searchControlCenterSettingsJSON):n._searchControlCenterSettingsJSON,t.is(r)&&(i=Object.keys(r))):s=!0,t.is(a))for(var o=Object.keys(a),c=0;c<o.length;c++){var l=o[c];if(t.is(l)&&a.hasOwnProperty(l))if("SearchControl_General"===l){var d=a.SearchControl_General,u=null,h=null;d&&d.result_categories&&(u=d.result_categories,delete d.result_categories),d&&d.search_synonyms&&(h=d.search_synonyms,delete d.search_synonyms),!0===s||0===i.length?(n._searchControlCenterSettingsJSON.search_settings=d,u&&(n._searchControlCenterSettingsJSON.result_categories=u),h&&(n._searchControlCenterSettingsJSON.search_synonyms=h)):(r.search_settings=d,u&&(r.result_categories=u),h&&(r.search_synonyms=h))}else if("SearchControl_SearchTypes"===l){var _=a.SearchControl_SearchTypes;if(!0===s||0===i.length)n._searchControlCenterSettingsJSON.type_custo=_;else if(i.length>0){let e=!1;for(let a=0;a<i.length;a++){let n=i[a];if(t.is(n)&&r.hasOwnProperty(n)&&"type_custo"===n){var p=r[n];p.type_display=_.type_display,p.SEARCH_INSTANCES=_.SEARCH_INSTANCES,p.easyTypeAccess=_.easyTypeAccess,p.excluded_types=_.excluded_types,p.default_datasourceandtype=_.default_datasourceandtype,e=!0}}!1===e&&(r.type_custo=_)}}else if("SearchControl_SearchAttributes"===l||"SearchControl_6WTags"===l){var g=!1,m=a.SearchControl_SearchAttributes;if(t.is(m)||(m=a.SearchControl_6WTags,g=!0),m.tagRelationships&&(n._searchControlCenterSettingsJSON.tagRelationships=m.tagRelationships),m.savedTags&&(n._searchControlCenterSettingsJSON.savedTags=m.savedTags),m.tagColorization&&(n._searchControlCenterSettingsJSON.tagColorization=m.tagColorization),m.hierarchical_predicates&&(n._searchControlCenterSettingsJSON.hierarchical_predicates=m.hierarchical_predicates),m.enterprise_ontology&&(n._searchControlCenterSettingsJSON.enterprise_ontology=m.enterprise_ontology),m.current_enterprise_ontology_title&&(n._searchControlCenterSettingsJSON.current_enterprise_ontology_title=m.current_enterprise_ontology_title),m.enterprise_ontology_history&&(n._searchControlCenterSettingsJSON.enterprise_ontology_history=m.enterprise_ontology_history),m.hasOwnProperty("companyTagsSearchSuggest")&&(n._searchControlCenterSettingsJSON.companyTagsSearchSuggest=m.companyTagsSearchSuggest),m.hasOwnProperty("controlledVocabMode")&&(n._searchControlCenterSettingsJSON.controlledVocabMode=m.controlledVocabMode),!0!==s&&0!==i.length||(n._searchControlCenterSettingsJSON.attribute_custo=m),m.controlledVocabulary)n._searchControlCenterSettingsJSON.controlledVocabulary=m.controlledVocabulary;else if(i.length>0){let e=!1;for(let a=0;a<i.length;a++){let n=i[a];if(t.is(n)&&r.hasOwnProperty(n)&&"attribute_custo"===n){var f=r[n];g&&(f.attributes_display=m.attributes_display);var C=f["ds6w:type"],v=m["ds6w:type"];if(t.is(v)&&v.length>0&&!g)f["ds6w:type"]=v;else{var y,b=!1;if(t.is(v,"array")&&v.length>0)for(var S=0;S<v.length;S++)if(v[S].hasOwnProperty("source")&&"AllDataSourcesandTypes"===v[S].source){y=v[S];break}if(t.is(C,"array")&&C.length>0&&t.is(y)){for(var x=0;x<C.length;x++){var D=C[x];t.is(D)&&D.source===y.source&&(C[x]=y,b=!0)}!1===b&&C.push(v[0])}else t.is(v)&&(f["ds6w:type"]=v)}if(m.hasOwnProperty("context_apps_predicates"))if(f.hasOwnProperty("context_apps_predicates")){var T=f.context_apps_predicates,A=m.context_apps_predicates,w=(b=!1,Object.keys(A[0]));if(w.length>0){for(var I=0;I<T.length;I++)if(T[I].hasOwnProperty(w[0])){T[I]=A[0],b=!0;break}!1===b&&T.push(A[0])}}else f.context_apps_predicates=m.context_apps_predicates;e=!0}}!1===e&&(r.attribute_custo=m)}}else if("SearchControl_ColumnCusto"===l)r.column_custo=a.SearchControl_ColumnCusto;else if("SearchControl_ResultsAttributesDisplay"===l)r.results_attributes_display_customization=a.SearchControl_ResultsAttributesDisplay;else if("SearchControl_PQ"===l){(_=a.SearchControl_PQ)&&(n._searchControlCenterSettingsJSON.pqs=_)}}},setDatasourceInternalMapping:function(e){t.is(e)&&(this._datasource_InternalName_Mapping=e)},getDatasourceInternalMappingValue:function(e){var a=this._datasource_InternalName_Mapping;if(t.is(a)&&t.is(e,"string"))for(var r=Object.keys(a),n=0;n<r.length;n++)if(a[r[n]]===e)return r[n]},getDatasourceDisplayMappingValue:function(e){var a=this._datasource_InternalName_Mapping;if(t.is(a)&&t.is(e,"string"))for(var r=Object.keys(a),n=0;n<r.length;n++)if(r[n]===e)return a[r[n]]},setAttributesInternalMappingForAllDataSourcesAndTypes:function(e,a){t.is(a)&&(this._types_InternalName_Mapping[e]=a)},getAttributesInternalMappingValueForAllDataSourcesAndTypes:function(e,a){if(t.is(a,"string")&&t.is(e,"string")){var r=this._types_InternalName_Mapping[e];if(t.is(r))for(var n=Object.keys(r),i=0;i<n.length;i++)if(r[n[i]]===a)return n[i]}},getAttributesDisplayMappingValueForAllDataSourcesAndTypes:function(e,a){if(t.is(a,"string")&&t.is(e,"string"))for(var r=Object.keys(this._types_InternalName_Mapping),n=0;n<r.length;n++){if(e===r[n])return this._types_InternalName_Mapping[e][a]}},setTypeInternalMapping:function(e,a){t.is(a)&&(this._types_InternalName_Mapping[e]=a)},getTypeInternalMappingValue:function(e,a){if(t.is(a,"string")&&t.is(e,"string")){var r=this._types_InternalName_Mapping[e];if(t.is(r))for(var n=Object.keys(r),i=0;i<n.length;i++)if(r[n[i]]===a)return n[i]}},getTypeDisplayMappingValue:function(e,a){if(t.is(a,"string")&&t.is(e,"string"))for(var r=Object.keys(this._types_InternalName_Mapping),n=0;n<r.length;n++){if(e===r[n])return this._types_InternalName_Mapping[e][a]}},setAttributeInternalMapping:function(e,a,r){if(t.is(r)&&t.is(a,"string")&&t.is(e,"string")){var n={};n[a]=r;var i=Object.keys(this._attributes_InternalName_Mapping);if(i.length<=0)this._attributes_InternalName_Mapping[e]=n;else{for(var s=!1,o=0;o<i.length;o++)if(this._attributes_InternalName_Mapping[i[o]]===e){var c=this._attributes_InternalName_Mapping[i[o]];if(t.is(c)){c[a]=r,s=!0;break}}if(!1===s){var l=this._attributes_InternalName_Mapping[e];t.is(l)&&(l[a]=r)}}}},getAttributeInternalMapping:function(e,a,r){if(t.is(e,"string")&&t.is(a,"string")&&t.is(r,"string")){var n=this._attributes_InternalName_Mapping[e];if(t.is(n))for(var i=Object.keys(n),s=0;s<i.length;s++)if(i[s]===a)for(var o=n[i[s]],c=Object.keys(o),l=0;l<c.length;l++)if(o[c[l]]===r)return c[l]}}});return n}),define("DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept",["UWA/Core","UWA/Class/Debug","UWA/Class/Model","UWA/Class/Collection"],function(e,t,a,r){"use strict";var n=a.extend(t,{setup:function(e){this.set("narrower",new r([],{model:n})),this.set("broader",new r([],{model:n}));let t=e.id.split(":");t.length>0&&this.set("ontology",t[0]+":")},getLabel:function(){return this.get("label")},getURI:function(){return this.get("uri")},getShortURI:function(){return this.id},getOntology:function(){return this.get("ontology")},setAsRootWConcept:function(){this.set("isRootWConcept",!0)},setAsRootConcept:function(){this.set("isRootConcept",!0)},IsARootConcept:function(){return this.get("isRootConcept")},getURIPath:function(){let e=[],t=this;for(;t;)e.push(t.getURI()),t=t.getBroaderConcept();return e.reverse()},getRootConcept:function(){let e,t;for(;Array.isArray(e=this.getBroaderConcept())&&e.length>0;)t=e,e[0].getRootConcept();if(t)return t[0].getURI()},getRootW:function(){return this.get("rootW")},getBroaderConcept:function(){return this.get("broader")},_addBroaderConcept:function(e){this.get("broader").add(e)},addNarrowerConcept:function(e){this.get("narrower").add(e),e._addBroaderConcept(this)},getNarrowerConcept:function(){return this.get("narrower").toArray()},setAsTaggable:function(){this.set("taggable",!0)},setAsDeprecated:function(){this.set("deprecated",!0)},canBeTagged:function(){return this.get("taggable")},isDeprecated:function(){return this.get("deprecated")}});return n}),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCInContextSearchManager",["UWA/Core","UWA/Class","DS/SNInfraUX/SearchCom","UWA/Utils/InterCom"],function(e,t,a,r){"use strict";return t.singleton({_socket:null,_selectedId:null,_selectedLabel:null,init:function(){this._socket=new r.Socket("socket_id_#scc_incontext_search#",{dispacthRetryInterval:0}),this._socket.subscribeServer("SearchComServer")},search:function(e){let t=this;return new Promise(function(a,r){let n=t._getInContextOptions(e);t._socket.dispatchEvent("RegisterContext",n),t._socket.addListener("RegisterContext_Response",function(){t._socket.dispatchEvent("InContextSearch",n),t._socket.addListener("InContextSearch_Response",function(e){t._searchSelecteObj(t,e).then(function(){let e={label:t._selectedLabel,id:t._selectedId};a(e),t._socket.addListener("onCloseTransient",t._cleanUpContext.bind(t))},function(){r()})},function(){r("no object selected, cancel clicked")})},function(){r("Company Tags For Search Suggest is not activated"),t._socket.addListener("onCloseTransient",t._cleanUpContext.bind(t))})})},_searchSelecteObj:function(e,t){console.log("In _searchSelecteObj");let a=this;return new Promise(function(e,r){"in_app_ok"===t.selected_command?(a._selectedLabel=t.selected_objects[0]["ds6w:label"],a._selectedId=t.selected_objects[0].resourceid,e(a._selectedId)):r()})},getSelectedOject:function(){return this._selectedId},_getInContextOptions:function(e){return{widget_id:"widget_id_#scc_incontext_search#",app_socket_id:"socket_id_#scc_incontext_search#",title:e.title,default_search_criteria:"",search_criteria_to_display:"",precond:e.precond,default_with_precond:!0,mode:"furtive",search_criteria_to_display:"",source:[e.source]}},_cleanUpContext:function(){this._socket.dispatchEvent("UnregisterContext",{widget_id:"widget_id_#scc_incontext_search#"}),this._socket.removeListener("RegisterContext_Response"),this._socket.removeListener("onCloseTransient")},destroy:function(){this._socket.unsubscribeServer("SearchComServer"),this._socket=null}})}),define("DS/SearchControlCenter/control/SCCCard",["UWA/Core","UWA/Element","UWA/Controls/Abstract","DS/Controls/TooltipModel"],function(e,t,a,r){"use strict";return a.extend({name:"scc-card",_title:null,_body:null,_value:null,init:function(e){this._parent(e),this._buildUI(e)},_buildUI:function(a){this._title=a.header.label,this._value=e.is(a.header.value)?a.header.value:a.header.label,this.elements.container=t.create("div",{class:"scc-card-container"}),this.elements.header=t.create("div",{class:"scc-card-header scc-card-flex"}).inject(this.elements.container),e.is(a.className)&&this.elements.header.addClassName(a.className);var n=t.create("p",{class:"scc-card-header-text",text:this._truncateString(a.header.label,25)}).inject(this.elements.header);e.is(a.className)&&n.addClassName(a.className),n.tooltipInfos=new r({shortHelp:a.header.label,position:"top",touchMode:!0}),!0===a.closable&&t.create("div",{class:"fonticon fonticon-clear fonticon-x search_center_delete_button_margin scc-card-close-button",styles:{color:"#b4b6ba"},events:{click:this._onClick.bind(this),mouseover:this._onMouseOver.bind(this),mouseout:this._onMouseOut.bind(this)}}).inject(this.elements.header),!0===a.isBodyRequired&&(this.elements.header.setStyle("border-bottom","1px solid #b2adad"),this.elements.body=t.create("div",{class:"scc-card-body"}).inject(this.elements.container))},_onClick:function(t){let a=e.clone(this.options);a.target=this.elements.container,this.dispatchEvent("onClose",a)},_onMouseOver:function(e){e.currentTarget.setStyle("color","#3d3d3d")},_onMouseOut:function(e){e.currentTarget.setStyle("color","#b4b6ba")},getTitle:function(){return this._title},getValue:function(){return this._value},getHeaderElement:function(){return this.elements.header},getBodyElement:function(){return this.elements.body},appendChildToBody:function(e){e.inject(this.elements.body)},_truncateString:function(t,a){return!e.is(t)||t.length<=a?t:t.slice(0,a)+" ..."}})}),define("DS/SearchControlCenter/Collection/SearchControlCenterFacetListCollection",["UWA/Core","UWA/Utils","UWA/Class/Collection","DS/SNInfraUX/SearchSettings","DS/SNSearchResultsCusto/utils/SearchResultsCustomizationPreferences","DS/SearchControlCenter/Model/SearchControlCenterFacetListModel","WebappsUtils/WebappsUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,a,r,n,i,s,o,c){"use strict";return a.extend({model:i,setup:function(){e.log("SearchControlCenterFacetListCollection::setup"),this.url=s.getWebappsAssetUrl("SearchControlCenter","SearchControlCenter_Entries.json")},sync:function(t,a,r){e.log("SearchControlCenterFacetListCollection::sync"),r.proxy="passport",r.headers={"Accept-Language":widget.lang},this._parent.apply(this,[t,a,r])},parse:function(t){e.log("SearchControlCenterFacetListCollection::parse");var a=!1,n=!0,i=null;e.is(window)&&e.is(window.location)&&e.is(window.location.search,"string")&&(i=window.location.search.substring(1)),e.is(i,"string")&&i.length>0&&(i.indexOf("AdminColumnsSearch")>=0||i.indexOf("SearchDisplayName")>=0)&&(a=!1),r.getOption("AdminJsonColumnCusto")&&(a=!0),-1===t.facets.findIndex(e=>"SearchControl_ResultsAttributesDisplay"===e.facetID)&&(n=!0,t.facets.splice(1,0,{facetID:"SearchControl_ResultsAttributesDisplay",srcJS:"DS/SearchControlCenter/scripts/SearchcontrolResultsAttributesDisplay",iconName:"search_attributesCustomization_fontIcon.png"}));var s,l,d=[];return Array.isArray(t.facets)&&t.facets.forEach(function(e){var t=!0;s=c[e.facetID],l=c[e.facetID+".subTitle"];var r=o.getURL()+"/webapps/SearchControlCenter/assets/img/"+e.iconName;"SearchControl_ColumnCusto"===e.facetID&&!1===a&&(t=!1),"SearchControl_ResultsAttributesDisplay"===e.facetID&&!1===n&&(t=!1),!0===t&&d.push({title:s,subtitle:l,introduction:"",image:r,facetJS:e.srcJS,domainid:e.facetID,id:e.facetID})}),d}})}),define("DS/SearchControlCenter/scripts/SearchControlCenterServices",["UWA/Element","UWA/Core","UWA/Promise","DS/UIKIT/Alert","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SNVocabAccess","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/SNResultUX/utils/SearchServices","DS/SNResultUX/utils/SearchViewOptions","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","css!DS/SearchControlCenter/SearchControlCenter","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_){"use strict";var p={parentCardDiv:null,draggedCardBlock:null,platformID:null,platformDisplayName:null,_datasourceList:[],_datSourceToVocabID:{},_Service_Nls_promise:a.deferred(),_applyButton:null,_restoreButton:null,_buttonStatus:!1,_URL:null,createWdgAlert:function(){return new r({closable:!0,visible:!0,autoHide:!0,hideDelay:2500})},updateButtons:function(e,a){t.is(e)&&t.is(a)&&(this._applyButton=e,this._restoreButton=a)},isButtonDisabled:function(){return this._buttonStatus=!1,t.is(this._applyButton)&&t.is(this._restoreButton)&&!0===this._applyButton.isDisabled()&&!0===this._restoreButton.isDisabled()&&(this._buttonStatus=!0),this._buttonStatus},disableButtons:function(){t.is(this._applyButton)&&t.is(this._restoreButton)&&(!1===this._applyButton.isDisabled()&&this._applyButton.setDisabled(!0),!1===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!0))},enableButtons:function(){t.is(this._applyButton)&&t.is(this._restoreButton)&&(!0===this._applyButton.isDisabled()&&this._applyButton.setDisabled(!1),!0===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!1))},enableRestoreButton:function(){t.is(this._restoreButton)&&!0===this._restoreButton.isDisabled()&&this._restoreButton.setDisabled(!1)},getButtonStatus:function(){return this._buttonStatus},reSetButtonStatus:function(){this._buttonStatus=!1},putMask:function(e){_.mask(e)},removeMask:function(e){_.unmask(e)},setPlatformID:function(e){t.is(e)&&(p.platformID=e)},getPlatformID:function(){if(t.is(p.platformID))return p.platformID},setPlatformDisplayName:function(e){t.is(e)&&(p.platformDisplayName=e)},getDataSourceList:function(e){var a=[],r=[];if(this._datasourceList.length>0)return this._datasourceList;if(t.is(p.platformID)){var n=i.getAvailableSources(p.platformID);if(t.is(n)){(e=e||{}).dataSources=n;var c=s.getValidDatasources(e);if(t.is(c)){if(t.is(c.dataSourceNames,"array")){r=c.dataSourceNames,r=l.filterSourceList(r);for(var d=0;d<r.length;d++)p._datSourceToVocabID[r[d]]=o.getVocabularyName(r[d])}t.is(c.dataSourceServices,"array")&&(a=c.dataSourceServices)}}return a.length>0&&this.getNLSValues(r,a,"ds6w:dataSource"),p._Service_Nls_promise.promise}},getVocabID:function(e){let a;return t.is(e)&&t.is(p._datSourceToVocabID)&&(a=p._datSourceToVocabID[e]),a},getNLSValues:function(e){var a={};a.dataSourceLists=e;var r=d.getNlsOfDataSources(a);if(t.is(r,"array")){var i={};i.AllDataSourcesandTypes=u.get("searchAttributes.DataSource.AllDataSourcesandTypes");for(var s=0;s<r.length;s++)i[e[s]]=r[s],p._datasourceList.push(r[s]);n.setDatasourceInternalMapping(i)}p._Service_Nls_promise.resolve(p._datasourceList)},getDatasourceInternalName:function(e){if(t.is(e))return n.getDatasourceInternalMappingValue(e)},getDatasourceDisplayName:function(e){if(t.is(e))return n.getDatasourceDisplayMappingValue(e)},updateAttributesMappingForAllDataSourcesAndTypes:function(e,a){t.is(e,"string")&&n.setAttributesInternalMappingForAllDataSourcesAndTypes(e,a)},getAttributesInternalNameForAllDataSourcesAndTypes:function(e,a){if(t.is(e))return n.getAttributesInternalMappingValueForAllDataSourcesAndTypes(e,a)},getAttributesDisplayNameForAllDataSourcesAndTypes:function(e,a){if(t.is(e))return n.getAttributesDisplayMappingValueForAllDataSourcesAndTypes(e,a)},updateTypesMapping:function(e,a){t.is(e,"string")&&n.setTypeInternalMapping(e,a)},getTypesInternalName:function(e,a){if(t.is(e))return n.getTypeInternalMappingValue(e,a)},getTypesDisplayName:function(e,a){if(t.is(e))return n.getTypeDisplayMappingValue(e,a)},updateAttributesMapping:function(e,a,r){t.is(e,"string")&&n.setAttributeInternalMapping(e,a,r)},getAttributesInternalName:function(e,a,r){if(t.is(e))return n.getAttributeInternalMapping(e,a,r)},getSettingsJSONFromTabName:function(e){if(t.is(e))return n.gateTabSettingJSON(e)},setLocalCacheForAttribute:function(e){if(t.is(e))return n.initiate_Local_Attribute_Cache(e)},updateLocalCacheForAttribute:function(e){if(t.is(e))return n.update_Local_Attributes_Cache(e)},getLocalCacheForAttribute:function(){return n.gate_Local_Attribute_Cache()},clearLocalCacheForAttribute:function(){return n.clear_Local_Attribute_Cache()},clearLocalCacheFor6WTags:function(){return n.clear_Local_6WTags_Cache()},encryptData:function(e,t){const a=e=>e.split("").map(e=>e.charCodeAt(0));return t.split("").map(a).map(t=>a(e).reduce((e,t)=>e^t,t)).map(e=>("0"+Number(e).toString(16)).substr(-2)).join("")},decryptData:function(e,t){return t.match(/.{1,2}/g).map(e=>parseInt(e,16)).map(t=>(e=>e.split("").map(e=>e.charCodeAt(0)))(e).reduce((e,t)=>e^t,t)).map(e=>String.fromCharCode(e)).join("")},setURL:function(e){this.url=e},getURL:function(){return this.url},updateMemoryModel:function(e){t.is(e)&&n.setSettingsJSON(e)},getPredicatesList:function(){return new a(function(e,t){let a={onComplete:function(t){UWA.log("Got a predicates result!"+t),e(t)},onFailure:function(e){UWA.log("predicates service request Fail!"+e),t(e)},tenantId:p.platformID,lang:widget.lang,apiVersion:"R2021x"};c.getFedProperties(a)})},isThisNotARootPredicate:function(e){return""!==e.subPropertyOf},filterPredicatesList:function(e){let t,a,r={},n=[];for(a in e)if(e[a].properties.length>0){let r=(t=e[a].properties).length;if(void 0!==t&&r>0){e[a].properties=t.filter(this.isThisNotARootPredicate),t.sort(function(e,t){let a=e.label;a=a.toUpperCase();let r=t.label;return a<(r=r.toUpperCase())?-1:a>r?1:0});for(let e=0;e<r;e++)n.push(t[e].curi)}}return n.push("computedCountryInfo"),r.predicates=n,r},getSettingsFromDB:function(){return n.gateSettingsJSON()},loadDataSourcesandClasses:function(){var e=this;return new a(function(t,r){e.getAvailableSources().then(function(r){r=r.filter(function(e){return e.status}),a.all(e.loadVocabClassesForSources(r)).then(function(e){t(e)})})})},getAvailableSources:function(){let e=this;return new a(function(t,a){let r=e.getPlatformID();t(i.getAvailableSources(r))})},loadVocabClassesForSources:function(e){let t=[],r=this.getPlatformID(),n=s.getLanguage();return e.forEach(e=>{e.status&&t.push(new a((t,a)=>{o.loadVocabularyClasses({vocabId:e.service,tenantId:r,lang:n},t)}))}),t}};return p}),define("DS/SearchControlCenter/scripts/SearchcontrolResultsAttributesDisplay",["UWA/Element","UWA/Core","DS/Controls/ComboBox","DS/Controls/Toggle","DS/SNInfraUX/SearchUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SNSearchResultsCusto/views/SearchResultsCustomizationPanel","DS/SNSearchResultsCusto/utils/SearchResultsCustomizationPreferences","DS/MessageBus/MessageBus"],function(e,t,a,r,n,i,s,o,c,l,d,u){"use strict";return{activeCustoComboBox:null,customizationTool:null,deletingFromTenantSettings:!1,BETAcustomizationEnabled:!1,_activeCustoObject:{},onRenderFacet:function(t){this.tenant=i.platformID,d.loadCustomizationTenantSettings(this.tenant),this.BETAcustomizationEnabled=d.isBETAEnabled(),this._setActiveCustomization();var s=e.create("div",{class:"scc_main_div",id:"search-center-general0"}).inject(t),h=e.create("div").inject(s);h.setStyle("margin-bottom","30px");let _=e.create("div",{class:"search_center_general_tab_div search_center_margin "}).inject(h),p=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"Enable_option_customization_for_all_views"}).inject(_);this.divBETACustomizationToggle=new r({type:"switch",label:o.get("AttributesCustomization.enable_BETA_customization"),touchMode:!0,checkFlag:this.isBETAEnabled}).inject(p),this.divBETACustomizationToggle.addEventListener("change",function(){i.enableButtons(),!1===this.divBETACustomizationToggle.checkFlag?(this.BETAcustomizationEnabled=!1,g.addClassName("search_center_disable"),"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()&&(D.addClassName("search_center_disable"),this.custoManagementToolContainer.addClassName("search_center_disable"))):(this.BETAcustomizationEnabled=!0,g.removeClassName("search_center_disable"),"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()&&(D.removeClassName("search_center_disable"),this.custoManagementToolContainer.removeClassName("search_center_disable")))}.bind(this));var g=e.create("div").inject(s);g.setStyle("margin-bottom","50px"),this.BETAcustomizationEnabled||g.addClassName("search_center_disable");var m=e.create("div",{class:"search_center_div_left search_center_general_display_flex"}).inject(g);e.create("p",{class:"search_center_text_heading",text:o.get("AttributesCustomization.active_customization")}).inject(m);var f=e.create("div",{class:"search_center_top_margin search_center_general_tab_div"}).inject(g),C=e.create("div",{class:"search_center_general_display_flex search_center_div_left"}).inject(f);e.create("p",{class:"search_center_text",text:o.get("AttributesCustomization.active_customization_label")}).inject(C);var v=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(f);c.tooltip(v,{position:"top",shortHelp:o.get("AttributesCustomization.active_customization_info")});var y=e.create("div",{class:"search_center_general_display_flex search_center_general_tab_div"}).inject(g),b=e.create("div",{class:"search_center_div_left"}).inject(y);b.setStyle("display","grid");var S=d.buildUserCustomizationList("admin"),x=S.findIndex(e=>e===this.activeCustoId);if(this.activeCustoComboBox=new a({elementsList:S,currentValue:S[x]||"Default",touchMode:!0,enableSearchFlag:!0}).inject(b),this.activeCustoComboBox.elements.container.setStyle("max-width","unset"),this.activeCustoComboBox.addEventListener("change",function(e){e.preventDefault(),d.switchActiveCustomization(e.dsModel.currentValue),this.activeCustoId=e.dsModel.currentValue,"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()&&(this.custoManagementToolContainer.empty(),this.disableTenantSetting=!0,this.customizationTool.setup(this,this.custoManagementToolContainer),this.deletingFromTenantSettings=!1),i.enableButtons()}.bind(this)),"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()){var D=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(s);e.create("p",{class:"search_center_text_heading",text:o.get("AttributesCustomization.Results_Attributes_management_tool")}).inject(D),this.custoManagementToolContainer=e.create("div",{class:"scc_main_div"}).inject(s),this.BETAcustomizationEnabled||(D.addClassName("search_center_disable"),this.custoManagementToolContainer.addClassName("search_center_disable")),this.customizationTool=new l,this.isSCC=!0,this.customizationTool.setup(this,this.custoManagementToolContainer)}u.subscribe({channel:"3dSearch_results_customization",topic:"3dSearch_new_customization_in_localStorage",callback:()=>{this._updateCustomizationSelector()}}),u.subscribe({channel:"3dSearch_results_customization",topic:"3dSearch_results_customization_edited",callback:e=>{this._updateCustomizationSelector(),i.enableButtons();let t=i.createWdgAlert();t.inject(widget.body,"top");let a=o.get("AttributesCustomization.apply_settings_edit_customization");t.add({className:"warning applyChangesAlert",message:a})}}),u.subscribe({channel:"3dSearch_results_customization",topic:"3dSearch_customization_deleted_from_localStorage",callback:()=>{this.deletingFromTenantSettings=!0,this._updateCustomizationSelector();let e=i.createWdgAlert();e.inject(widget.body,"top");let t=o.get("AttributesCustomization.apply_settings_delete_customization");e.add({className:"warning applyChangesAlert",message:t})}}),i.removeMask(widget.body)},getTabInputsToStore:function(){var e={SearchAttributesDisplayAdminDefinition:[]},a=d.getCustomizationById(this.activeCustoId);return t.is(a)&&(e=a.exportCustomizationToJSON("SearchAttributesDisplayAdminDefinition")),e.BETAcustomizationEnabled=this.BETAcustomizationEnabled,e},onResetTab:function(e){if(t.is(e)){var a=e.results_attributes_display_customization;if(t.is(a)&&(!0===a.BETAcustomizationEnabled?this.divBETACustomizationToggle.checkFlag=!0:this.divBETACustomizationToggle.checkFlag=!1),t.is(a)&&"Default"===a.active_customization){d.switchActiveCustomization("Default");var r=d.buildUserCustomizationList("admin"),i=r.findIndex(e=>"Default"===e);-1===i&&(i=0),this.activeCustoComboBox.currentValue=r[i],"mobile"!==n.getDeviceType()&&"tablet"!==n.getDeviceType()&&(this.custoManagementToolContainer.empty(),this.customizationTool.setup(this,this.custoManagementToolContainer))}}},_setActiveCustomization:function(){var e=d.getActiveCustomization();t.is(e)?t.is(e.customizationId)?this.activeCustoId=e.customizationId:this.activeCustoId=e.getCustomizationId():this.activeCustoId="Default"},_updateCustomizationSelector:function(){var e=d.buildUserCustomizationList("admin"),t=e.findIndex(e=>e===this.activeCustoId);this.activeCustoComboBox.elementsList=e,this.activeCustoComboBox.currentValue=t}}}),define("DS/SearchControlCenter/scripts/SearchcontrolSearchTypes",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/Controls/ComboBox","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SNVocabAccess","DS/SNResultUX/utils/ExternalComponentHelpers","DS/WUXAutoComplete/AutoComplete"],function(e,t,a,r,n,i,s,o,c,l){"use strict";let d={datasourceComboBox:null,defaultDatasourceComboBox:null,_defaultDatasource:null,_vocabClassPromises:{},_vocabPropertiesPromises:{},_attributesMap:{},_uriNamesOfPreferredTypes:[],_preferredDatasourceNames:[],_excludeDatasourceNames:[],_uriNamesOfExcludeType:[],onRenderFacet:function(n){let o=e.create("div",{class:"scc_main_div",id:"search-center-Types"}).inject(n),u=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"confofDisplayTypeSpan"}).inject(o),h=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"confofDisplayTypeText"}).inject(u);d.EditConfDisplayTypeON=new a({type:"switch",label:i.get("Advanced.EditConfDisplayType.title"),touchMode:!0,value:0}).inject(h),d.EditConfDisplayTypeON.addEventListener("change",function(){s.enableButtons(),!1===d.EditConfDisplayTypeON.checkFlag?(p.addClassName("search_center_disable"),f.addClassName("search_center_disable"),v.addClassName("search_center_disable"),b.addClassName("search_center_disable"),x.addClassName("search_center_disable"),d.divAvailableTypesSpan.addClassName("search_center_disable"),d.divAvailableTypesSpan2.addClassName("search_center_disable"),d.divExcludedTypesSpan.addClassName("search_center_disable"),d.divExcludedTypesSpan2.addClassName("search_center_disable"),T.addClassName("search_center_disable"),w.addClassName("search_center_disable"),N.addClassName("search_center_disable"),j.addClassName("search_center_disable"),E.addClassName("search_center_disable"),B.addClassName("search_center_disable"),R.addClassName("search_center_disable"),U.addClassName("search_center_disable")):(p.removeClassName("search_center_disable"),f.removeClassName("search_center_disable"),v.removeClassName("search_center_disable"),b.removeClassName("search_center_disable"),x.removeClassName("search_center_disable"),d.divAvailableTypesSpan.removeClassName("search_center_disable"),d.divAvailableTypesSpan2.removeClassName("search_center_disable"),d.divExcludedTypesSpan.removeClassName("search_center_disable"),d.divExcludedTypesSpan2.removeClassName("search_center_disable"),T.removeClassName("search_center_disable"),w.removeClassName("search_center_disable"),N.removeClassName("search_center_disable"),j.removeClassName("search_center_disable"),E.removeClassName("search_center_disable"),B.removeClassName("search_center_disable"),R.removeClassName("search_center_disable"),U.removeClassName("search_center_disable"))}.bind(this));let _=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(h);c.popin(_,{trigger:"hover",position:"right",body:i.get("searchType.ConfigDisplayType.popover")});let p=e.create("div",{class:"search_center_general_tab_div search_center_disable search_center_margin ",id:"SearchonInstances"}).inject(o),g=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"SearchonInstancesText"}).inject(p);d.SearchonInstancesON=new a({type:"switch",label:i.get("searchType.instanceSearch"),touchMode:!0,value:0}).inject(g),d.SearchonInstancesON.addEventListener("change",function(){s.enableButtons(),!0===d.SearchonInstancesON.checkFlag?this._searchonInstances=!0:this._searchonInstances=!1}.bind(this));let m=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(g);c.popin(m,{trigger:"hover",position:"right",body:i.get("searchType.SerchOnInstances.popover")});let f=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"default_dataSource_display_span"}).inject(o),C=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_disable search_center_top_margin",id:"default_dataSource_display_text"}).inject(f),v=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"default_datasource_display_span"}).inject(o),y=e.create("div",{class:"search_center_div_left_6w",id:"Default_Data_Source_Display_Combo"}).inject(v);e.create("p",{class:"search_center_text",text:i.get("SearchType.DefaultDataSource")}).inject(C),d.defaultDatasourceComboBox=new r({placeholder:i.get("Choose_default_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(y),y.setStyle("display","grid"),d.defaultDatasourceComboBox.elements.container.setStyle("max-width","unset"),d.defaultDatasourceComboBox.addEventListener("change",function(){let e=i.get("General.None");d.defaultDatasourceComboBox.currentValue===e&&(d.defaultDatasourceComboBox.selectedIndex=-1),s.enableButtons()});let b=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"datasource_display_span"}).inject(o),S=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"datasource_display_type_text"}).inject(b),x=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"Data_Source_Display_Span"}).inject(o),D=e.create("div",{class:"search_center_div_left_6w",id:"Data_Source_Display_Combo"}).inject(x);e.create("p",{class:"search_center_text",text:i.get("searchAttributes.DataSource")}).inject(S),d.DatasourceComboBox=new r({placeholder:i.get("Choose_data_source"),touchMode:!0,enableSearchFlag:!0}).inject(D),D.setStyle("display","grid"),d.DatasourceComboBox.elements.container.setStyle("max-width","unset"),d.divAvailableTypesSpan=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"availabale_types_div"}).inject(o),d.divAvailableTypesText=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"available_types_text_div"}).inject(d.divAvailableTypesSpan),d.divAvailableTypesSpan2=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"avaialable_types_span"}).inject(o),d.divAvailableTypesAutoComp=e.create("div",{class:"search_center_div_left_6w",id:"avaialble_types_autocomp"}).inject(d.divAvailableTypesSpan2),e.create("p",{class:"search_center_text",text:i.get("SearchType.AvailableTypes")}).inject(d.divAvailableTypesText),d.availableTypesAutocomp=new l({allowFreeInputFlag:!1,placeholder:i.get("Search")}).inject(d.divAvailableTypesAutoComp),d.availableTypesAutocomp.elements.container.children[0].setStyles({"min-height":"38px",height:"auto"}),d.availableTypesAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.availableTypesAutocomp.addEventListener("change",function(){s.enableButtons();let e=d.excludedTypesAutocomp.value,a=d.availableTypesAutocomp.value;if(a.length>0){let n=a[a.length-1];if(t.is(e)&&e.length>0){if(e.indexOf(n)>-1){let e=d.availableTypesAutocomp.selectedItems.length;d.availableTypesAutocomp._selectionChips.removeChip(e-1);a.splice(-1,1);d.availableTypesAutocomp.selectedItems.splice(-1,1);let t=i.get("SearchType.preferredTypeWarning");var r=s.createWdgAlert();r.inject(widget.body,"top"),r.add({className:"warning applyChangesAlert",message:t})}}}}),d.divExcludedTypesSpan=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"excluded_types_div"}).inject(o),d.divExcludedTypesText=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"excluded_types_text_div"}).inject(d.divExcludedTypesSpan),d.divExcludedTypesSpan2=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"excluded_types_text_div2"}).inject(o),d.divExcludedTypesAutoComp=e.create("div",{class:"search_center_div_left_6w",id:"excluded_types_autocomp_div"}).inject(d.divExcludedTypesSpan2),e.create("p",{class:"search_center_text",text:i.get("SearchType.ExcludedTypes")}).inject(d.divExcludedTypesText),d.excludedTypesAutocomp=new l({allowFreeInputFlag:!1,placeholder:i.get("Search")}).inject(d.divExcludedTypesAutoComp),d.excludedTypesAutocomp.elements.container.children[0].setStyles({"min-height":"38px",height:"auto"}),d.excludedTypesAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.excludedTypesAutocomp.addEventListener("change",function(){s.enableButtons();let e=d.excludedTypesAutocomp.value,a=d.availableTypesAutocomp.value;if(e.length>0){let n=e[e.length-1];if(t.is(a)&&a.length>0){if(a.indexOf(n)>-1){let t=d.excludedTypesAutocomp.selectedItems.length;d.excludedTypesAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.excludedTypesAutocomp.selectedItems.splice(-1,1);let a=i.get("SearchType.excludeTypeWarning");var r=s.createWdgAlert();r.inject(widget.body,"top"),r.add({className:"warning applyChangesAlert",message:a})}}}}),d.DatasourceComboBox.addEventListener("change",function(){s.enableButtons();let e=i.get("General.None");d.DatasourceComboBox.currentValue===e&&(d.DatasourceComboBox.selectedIndex=-1);let a=[];if(d.excludedTypesAutocomp.elementsTree=a,d.availableTypesAutocomp.elementsTree=a,t.is(d.DatasourceComboBox.currentValue)){c.mask(d.divAvailableTypesAutoComp),c.mask(d.divExcludedTypesAutoComp);let e=s.getDatasourceInternalName(d.DatasourceComboBox.currentValue);d._loadClasses({datasourceURI:e}).then(function(a){d.availableTypesAutocomp.elementsTree=a,d.excludedTypesAutocomp.elementsTree=a;let r=[];for(let a=0;a<d._uriNamesOfPreferredTypes.length;a++){let n=d._uriNamesOfPreferredTypes[a];if(t.is(n)&&e===d._preferredDatasourceNames[a]){let e=s.getTypesDisplayName(d._preferredDatasourceNames[a],n);r.push(e)}}d.availableTypesAutocomp.value=r;let n=[];for(let a=0;a<d._uriNamesOfExcludeType.length;a++){let r=d._uriNamesOfExcludeType[a];if(t.is(r)&&e===d._excludeDatasourceNames[a]){let e=s.getTypesDisplayName(d._excludeDatasourceNames[a],r);n.push(e)}}d.excludedTypesAutocomp.value=n,c.unmask(d.divAvailableTypesAutoComp),c.unmask(d.divExcludedTypesAutoComp),s.disableButtons()})}s.disableButtons()});e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-empty-div"}).inject(o),e.create("div",{class:"search_center_general_display_flex search_center_add_bottom_border",id:"general-tab-border"}).inject(o);let T=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable",id:"avail-properties_display_span"}).inject(o),A=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"available_properties_text"}).inject(T),w=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"available_properties_display_span"}).inject(o),I=e.create("div",{class:"search_center_div_left_6w",id:"Avail_PropertiesDisplay_Combo_datasource"}).inject(w);e.create("p",{class:"search_center_text",text:i.get("SearchType.AvailableProperties")}).inject(A),d.availPropDatasourceComboBox=new r({placeholder:i.get("Select_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(I),I.setStyle("display","grid"),d.availPropDatasourceComboBox.elements.container.setStyle("max-width","unset");let N=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"properties_type_display_span"}).inject(o),P=e.create("div",{class:"search_center_div_left_6w",id:"Avail_Properties_Typeselection"}).inject(N);d.availPropTypeComboBox=new r({placeholder:i.get("Select_type"),touchMode:!0,enableSearchFlag:!0}).inject(P),P.setStyle("display","grid"),d.availPropTypeComboBox.elements.container.setStyle("max-width","unset"),d.availPropDatasourceComboBox.addEventListener("change",function(){s.enableButtons();let e=i.get("General.None");d.availPropDatasourceComboBox.currentValue===e&&(d.availPropDatasourceComboBox.selectedIndex=-1);let a=s.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue);t.is(a)&&(d.availPropTypeComboBox.elementsList=[],d._loadClasses({datasourceURI:a}).then(function(e){d.availPropTypeComboBox.elementsList=e}))});let j=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"available_properties_span"}).inject(o),W=e.create("div",{class:"search_center_div_left_6w",id:"Available_Property_Comp"}).inject(j);d.AvailablePropertyAutocomp=new l({multiSearchMode:!0,placeholder:i.get("Search")}).inject(W),d.AvailablePropertyAutocomp.elements.container.children[0].setStyles({"min-height":"38px",height:"auto"}),d.AvailablePropertyAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.AvailablePropertyAutocomp.addEventListener("change",function(){s.enableButtons();let e=d.AvailablePropertyAutocomp.value;if(e.length>0){let r=e[e.length-1],n=!1,o=s.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),c=s.getTypesInternalName(o,d.availPropTypeComboBox.currentValue);if(t.is(d.availPropDatasourceComboBox.currentValue)&&t.is(d.availPropTypeComboBox.currentValue)){let e=s.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),a=s.getTypesInternalName(e,d.excludePropTypeComboBox.currentValue);if(o===e&&c===a){let e=d.ExcludedPropertyAutocomp.value;if(t.is(e)&&e.length>0){e.indexOf(r)>-1&&(n=!0)}}}if(!1===n){let e=s.getLocalCacheForAttribute();if(t.is(e)&&e.length>0)for(let a=0;a<e.length;a++){let i=e[a];if(c===i.uri&&o===i.source){let e=i.excluded_predicates;if(t.is(e)&&e.length>0){for(let t=0;t<e.length;t++){let e=i.excluded_predicates[t].uri;if(d._attributesMap[e]===r){n=!0;break}}}}if(!0===n)break}}if(!0===n){let t=d.AvailablePropertyAutocomp.selectedItems.length;d.AvailablePropertyAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.AvailablePropertyAutocomp.selectedItems.splice(-1,1);let r=i.get("searchAttributes.preferredAttrWarning");var a=s.createWdgAlert();a.inject(widget.body,"top"),a.add({className:"warning applyChangesAlert",message:r})}}}),d.availPropTypeComboBox.addEventListener("change",function(){d.AvailablePropertyAutocomp.elementsTree=[];let e=d.availPropTypeComboBox.currentValue;if(e){let a=d.availPropDatasourceComboBox.currentValue+"+"+e;c.unmask(W),c.mask(W),d._fetchProperties({uniqueKey:a}).then(function(e){d.AvailablePropertyAutocomp.elementsTree=e;let a=s.getLocalCacheForAttribute();if(t.is(a)&&a.length>0){let e=s.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),r=s.getTypesInternalName(e,d.availPropTypeComboBox.currentValue);for(let n=0;n<a.length;n++){let i=a[n];if(r===i.uri&&e===i.source){let e=i.predicates;if(t.is(e)&&e.length>0){let t=[];for(let a=0;a<e.length;a++){let e=i.predicates[a].uri,r=d._attributesMap[e];t.push(r)}d.AvailablePropertyAutocomp.value=t;break}d.AvailablePropertyAutocomp.value=[]}}}s.disableButtons(),c.unmask(W)})}s.disableButtons()});let E=e.create("div",{class:"search_center_general_tab_div search_center_disable search_center_top_margin",id:"exclude_properties_display_span"}).inject(o),O=e.create("div",{class:"search_center_text_heading search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"exculded_properties_text"}).inject(E),B=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"exclude_properties_display"}).inject(o),F=e.create("div",{class:"search_center_div_left_6w",id:"ExcludePropertiesDisplay_datasource"}).inject(B);e.create("p",{class:"search_center_text",text:i.get("SearchType.ExcludedProperties")}).inject(O),d.excludePropDatasourceComboBox=new r({placeholder:i.get("Select_datasource"),touchMode:!0,enableSearchFlag:!0}).inject(F),F.setStyle("display","grid"),d.excludePropDatasourceComboBox.elements.container.setStyle("max-width","unset");let R=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"exclude_propertiestype_span"}).inject(o),M=e.create("div",{class:"search_center_div_left_6w",id:"Exclude_PropertiesType_DisplayCombo"}).inject(R);d.excludePropTypeComboBox=new r({placeholder:i.get("Select_type"),touchMode:!0,enableSearchFlag:!0}).inject(M),M.setStyle("display","grid"),d.excludePropTypeComboBox.elements.container.setStyle("max-width","unset"),d.excludePropDatasourceComboBox.addEventListener("change",function(){s.enableButtons();let e=i.get("General.None");d.excludePropTypeComboBox.currentValue===e&&(d.excludePropTypeComboBox.selectedIndex=-1);let a=s.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue);t.is(a)&&(d.excludePropTypeComboBox.elementsList=[],d._loadClasses({datasourceURI:a}).then(function(e){d.excludePropTypeComboBox.elementsList=e}))});let U=e.create("div",{class:"search_center_general_tab_div search_center_top_margin search_center_disable search_center_general_display_flex",id:"excluded_properties_span"}).inject(o),k=e.create("div",{class:"search_center_div_left_6w",id:"Excluded_Property_Comp"}).inject(U);d.ExcludedPropertyAutocomp=new l({multiSearchMode:!0,placeholder:i.get("Search")}).inject(k),d.ExcludedPropertyAutocomp.elements.container.children[0].setStyles({"min-height":"38px",height:"auto"}),d.ExcludedPropertyAutocomp.elements.container.children[0].children[1].children[0].children[0].setStyles({"font-size":"14px","margin-left":"5px"}),d.ExcludedPropertyAutocomp.addEventListener("change",function(){s.enableButtons();let e=d.ExcludedPropertyAutocomp.value;if(e.length>0){let r=e[e.length-1],n=!1,o=s.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),c=s.getTypesInternalName(o,d.excludePropTypeComboBox.currentValue);if(t.is(d.availPropDatasourceComboBox.currentValue)&&t.is(d.availPropTypeComboBox.currentValue)){let e=s.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),t=s.getTypesInternalName(e,d.availPropTypeComboBox.currentValue);if(e===o&&t===c){let e=d.AvailablePropertyAutocomp.value;if(e.length>0){e.indexOf(r)>-1&&(n=!0)}}}if(!1===n){let e=s.getLocalCacheForAttribute();if(t.is(e)&&e.length>0)for(let a=0;a<e.length;a++){let i=e[a];if(c===i.uri&&o===i.source){let e=i.predicates;if(t.is(e)&&e.length>0){for(let t=0;t<e.length;t++){let e=i.predicates[t].uri;if(d._attributesMap[e]===r){n=!0;break}}}}if(!0===n)break}}if(!0===n){let t=d.ExcludedPropertyAutocomp.selectedItems.length;d.ExcludedPropertyAutocomp._selectionChips.removeChip(t-1);e.splice(-1,1);d.ExcludedPropertyAutocomp.selectedItems.splice(-1,1);let r=i.get("searchAttributes.excludeAttrWarning");var a=s.createWdgAlert();a.inject(widget.body,"top"),a.add({className:"warning applyChangesAlert",message:r})}}}),d.excludePropTypeComboBox.addEventListener("change",function(){d.ExcludedPropertyAutocomp.elementsTree=[];let e=d.excludePropTypeComboBox.currentValue;if(e){let a=d.excludePropDatasourceComboBox.currentValue+"+"+e;c.unmask(k),c.mask(k),d._fetchProperties({uniqueKey:a}).then(function(e){d.ExcludedPropertyAutocomp.elementsTree=e;let a=s.getLocalCacheForAttribute();if(t.is(a)&&a.length>0){let e=s.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),r=s.getTypesInternalName(e,d.excludePropTypeComboBox.currentValue);for(let n=0;n<a.length;n++){let i=a[n];if(r===i.uri&&e===i.source){let e=i.excluded_predicates;if(t.is(e)&&e.length>0){let t=[];for(let a=0;a<e.length;a++){let e=i.excluded_predicates[a].uri,r=d._attributesMap[e];t.push(r)}d.ExcludedPropertyAutocomp.value=t}else d.ExcludedPropertyAutocomp.value=[]}}}s.disableButtons(),c.unmask(k)})}s.disableButtons()});let V=[];if(V.push(i.get("General.None")),s._datasourceList.length>0){let e=s._datasourceList;if(t.is(e,"array")){let t=V.concat(e);d.DatasourceComboBox.elementsList=t,d.defaultDatasourceComboBox.elementsList=t,d.availPropDatasourceComboBox.elementsList=e,d.excludePropDatasourceComboBox.elementsList=e}}else s.getDataSourceList().then(function(e){if(t.is(e,"array")){let t=V.concat(e);d.DatasourceComboBox.elementsList=t,d.defaultDatasourceComboBox.elementsList=t,d.availPropDatasourceComboBox.elementsList=e,d.excludePropDatasourceComboBox.elementsList=e}})},_loadClasses:function(e){if(!e||!e.datasourceURI)return null;let a=e.datasourceURI;if(!this._vocabClassPromises[e.datasourceURI]){this._vocabClassPromises[e.datasourceURI]=new Promise(function(e,r){let n={};n.vocabId=s._datSourceToVocabID[a],n.tenantId=s.platformID,n.lang=s._language,o.loadVocabularyClasses(n,function(n){if(n.classInfos.length>0){let r=[],i={};for(let e=0;e<n.classInfos.length;e++)t.is(n.classInfos[e].nlsName,"string")&&t.is(n.classInfos[e].uri)&&(r.push(n.classInfos[e].nlsName),i[n.classInfos[e].uri]=n.classInfos[e].nlsName);s.updateTypesMapping(a,i),e(r)}else{let e=s.createWdgAlert(),t=i.get("SearchType.NoTypesWarning");e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:t}),r()}})})}return this._vocabClassPromises[e.datasourceURI]},_fetchProperties:function(e){if(!e||!e.uniqueKey)return null;if(!this._vocabPropertiesPromises[e.uniqueKey]){let a=e.uniqueKey;this._vocabPropertiesPromises[e.uniqueKey]=new Promise(function(e,r){let n=a.indexOf("+"),i=a.substring(0,n),c=a.substring(n+1),l=s.getDatasourceInternalName(i),u=s.getTypesInternalName(l,c);if(t.is(u)){let a={};a.className=u,a.tenantId=s.platformID,o.loadRelevantPredicates(a,function(a){if(a.vocabularyPredicateInfo.length>0){a.vocabularyPredicateInfo.sort(function(e,a){let r=e.nlsName;t.is(r)||(r=e.uri),r=r.toUpperCase();let n=a.nlsName;return t.is(n)||(n=a.uri),r<(n=n.toUpperCase())?-1:r>n?1:0});let r=[];for(let e=0;e<a.vocabularyPredicateInfo.length;e++)if(t.is(a.vocabularyPredicateInfo[e].nlsName,"string")&&t.is(a.vocabularyPredicateInfo[e].uri)){if("ds6w:label"===a.vocabularyPredicateInfo[e].uri||"ds6w:identifier"===a.vocabularyPredicateInfo[e].uri||"ds6w:modified"===a.vocabularyPredicateInfo[e].uri||"ds6w:description"===a.vocabularyPredicateInfo[e].uri||"ds6w:responsible"===a.vocabularyPredicateInfo[e].uri||"ds6w:created"===a.vocabularyPredicateInfo[e].uri)continue;r.push(a.vocabularyPredicateInfo[e].nlsName),d._attributesMap[a.vocabularyPredicateInfo[e].uri]=a.vocabularyPredicateInfo[e].nlsName}s.updateAttributesMapping(l,u,d._attributesMap),e(r)}else r()})}})}return this._vocabPropertiesPromises[e.uniqueKey]},getTabInputsToStore:function(){let e={type_display:d.EditConfDisplayTypeON.checkFlag,SEARCH_INSTANCES:d.SearchonInstancesON.checkFlag},a=[],r={},n=s.getDatasourceInternalName(d.defaultDatasourceComboBox.currentValue);t.is(n)&&(r.source=n,a.push(r)),e.default_datasourceandtype=a;let i=s.getDatasourceInternalName(d.DatasourceComboBox.currentValue),o=[],c=[],l=[];if(t.is(d.availableTypesAutocomp.selectedItems)){let e=d.availableTypesAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=s.getTypesInternalName(i,d.availableTypesAutocomp.selectedItems[a]._options.label),e.source=i,t.is(e.uri)&&t.is(e.source)&&(l.push(e),c.push(i),o.push(e.uri))}}let u=[],h=[],_=[];if(t.is(d.excludedTypesAutocomp.selectedItems)){let e=d.excludedTypesAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=s.getTypesInternalName(i,d.excludedTypesAutocomp.selectedItems[a]._options.label),e.source=i,t.is(e.uri)&&t.is(e.source)&&(_.push(e),u.push(e.uri),h.push(i))}}if(t.is(d._uriNamesOfPreferredTypes)){let t=[],a=[];for(let e=0;e<d._preferredDatasourceNames.length;e++)if(i!==d._preferredDatasourceNames[e]){t.push(d._uriNamesOfPreferredTypes[e]),a.push(d._preferredDatasourceNames[e]);let r={};r.uri=d._uriNamesOfPreferredTypes[e],r.source=d._preferredDatasourceNames[e],l.push(r)}d._uriNamesOfPreferredTypes=t,d._preferredDatasourceNames=a,o.length>1&&(d._uriNamesOfPreferredTypes=d._uriNamesOfPreferredTypes.concat(o),d._preferredDatasourceNames=d._preferredDatasourceNames.concat(c)),e.easyTypeAccess=l}if(t.is(d._uriNamesOfExcludeType)){let t=[],a=[];for(let e=0;e<d._excludeDatasourceNames.length;e++)if(i!==d._excludeDatasourceNames[e]){t.push(d._uriNamesOfExcludeType[e]),a.push(d._excludeDatasourceNames[e]);let r={};r.uri=d._uriNamesOfExcludeType[e],r.source=d._excludeDatasourceNames[e],_.push(r)}d._uriNamesOfExcludeType=t,d._excludeDatasourceNames=a,o.length>1&&(d._uriNamesOfExcludeType=d._uriNamesOfExcludeType.concat(u),d._excludeDatasourceNames=d._excludeDatasourceNames.concat(h)),e.excluded_types=_}let p={},g=[],m=s.getLocalCacheForAttribute();t.is(m,"array")&&m.length>0&&(g=m);let f={},C=s.getDatasourceInternalName(d.availPropDatasourceComboBox.currentValue),v=s.getTypesInternalName(C,d.availPropTypeComboBox.currentValue),y=[];if(t.is(d.AvailablePropertyAutocomp.selectedItems)){let e=d.AvailablePropertyAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=s.getAttributesInternalName(C,v,d.AvailablePropertyAutocomp.selectedItems[a]._options.label),t.is(e.uri)&&y.push(e)}}y.length>0&&(f.datasource=C,f.type=v,f.preferredAttributeList=y,s.updateLocalCacheForAttribute(f));let b={},S=s.getDatasourceInternalName(d.excludePropDatasourceComboBox.currentValue),x=s.getTypesInternalName(S,d.excludePropTypeComboBox.currentValue),D=[];if(t.is(d.ExcludedPropertyAutocomp.selectedItems)){let e=d.ExcludedPropertyAutocomp.selectedItems.length;for(let a=0;a<e;a++){let e={};e.uri=s.getAttributesInternalName(S,x,d.ExcludedPropertyAutocomp.selectedItems[a]._options.label),t.is(e.uri)&&D.push(e)}}D.length>0&&(b.datasource=S,b.type=x,b.excludeAttributeList=D,s.updateLocalCacheForAttribute(b)),p["ds6w:type"]=s.getLocalCacheForAttribute();let T={};return T.SearchControl_SearchTypes=e,T.SearchControl_SearchAttributes=p,T},onResetTab:function(e){let a,r,n;if((a=t.is(e,"string")?JSON.parse(e):e).hasOwnProperty("type_custo")&&(r=a.type_custo),a.hasOwnProperty("attribute_custo")&&(n=a.attribute_custo),t.is(r)){if(r.hasOwnProperty("type_display")){let e=r.type_display;t.is(e)&&(d.EditConfDisplayTypeON.checkFlag=e)}if(r.hasOwnProperty("SEARCH_INSTANCES")){let e=r.SEARCH_INSTANCES;t.is(e)&&(d.SearchonInstancesON.checkFlag=e)}else d.SearchonInstancesON.checkFlag=!1;if(r.hasOwnProperty("default_datasourceandtype")){let e=r.default_datasourceandtype;if(t.is(e)&&e.length>0){let t=e[e.length-1],a=s.getDatasourceDisplayName(t.source);d.defaultDatasourceComboBox.elementsList.length>0?d.defaultDatasourceComboBox.currentValue=a:d._defaultDatasource=a}else d.defaultDatasourceComboBox.selectedIndex=-1}else d.defaultDatasourceComboBox.selectedIndex=-1;let e=[],a=[],n=[],i=[];if(r.hasOwnProperty("easyTypeAccess")){let n=r.easyTypeAccess;if(t.is(n,"array"))for(let r=0;r<n.length;r++){let i=n[r].uri,s=n[r].source;t.is(s)&&a.push(s),t.is(i)&&e.push(i)}}if(d._uriNamesOfPreferredTypes=e,d._preferredDatasourceNames=a,r.hasOwnProperty("excluded_types")){let e=r.excluded_types;if(t.is(e,"array"))for(let a=0;a<e.length;a++){let r=e[a].uri,s=e[a].source;t.is(s)&&n.push(s),t.is(r)&&i.push(r)}}d._uriNamesOfExcludeType=i,d._excludeDatasourceNames=n;let o=null;a.length>0?o=a[0]:n.length>0&&(o=n[0]),t.is(o)&&(d.DatasourceComboBox.selectedIndex=-1,s.loadDataSourcesandClasses().then(function(e){if(t.is(e)){let e=s.getDatasourceDisplayName(o);d.DatasourceComboBox.currentValue=e}}))}if(t.is(n)&&(s.clearLocalCacheForAttribute(),n.hasOwnProperty("ds6w:type"))){let e=n["ds6w:type"];if(t.is(e,"array")&&e.length>0){let a=t.clone(e,!0);s.setLocalCacheForAttribute(a);let r=e.length,n=e[r-1],i=n.source;"AllDataSourcesandTypes"===i&&r>1&&(n=e[r-2]);let o=n.uri;if(t.is(o)){n.predicates,n.excluded_predicates;s.loadDataSourcesandClasses().then(function(e){if(t.is(e)){let e=s.getDatasourceDisplayName(i);d.availPropDatasourceComboBox.currentValue=e,d.excludePropDatasourceComboBox.currentValue=e,d._loadClasses({datasourceURI:i}).then(function(e){d.availPropTypeComboBox.elementsList=e,d.excludePropTypeComboBox.elementsList=e,d.availPropTypeComboBox.selectedIndex=-1,d.excludePropTypeComboBox.selectedIndex=-1;let t=s.getTypesDisplayName(i,o);d.availPropTypeComboBox.currentValue=t,d.excludePropTypeComboBox.currentValue=t})}})}else d.availPropDatasourceComboBox.selectedIndex=-1,d.excludePropDatasourceComboBox.selectedIndex=-1,d.availPropTypeComboBox.selectedIndex=-1,d.excludePropTypeComboBox.selectedIndex=-1,d.AvailablePropertyAutocomp.value=[],d.ExcludedPropertyAutocomp.value=[]}}s.removeMask(widget.body)}};return d}),define("DS/SearchControlCenter/scripts/SearchcontrolColumnCusto",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/MessageBus/MessageBus","DS/SNInfraUX/Logger","css!DS/SearchControlCenter/SearchControlCenter","DS/SNInfraUX/SearchControlCenterFetchService","DS/SNInfraUX/SearchSettings","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_){"use strict";var p={importButton:null,fileChooser:null,jsonReader:null,_uploadeJsonFileName:null,displayCustoImportButton:null,displayCustoFileChooser:null,displayCustoJsonReader:null,_displayCustoUploadeJsonFileName:null,_columnCustoMemoryObject:null,_displayNameMemoryObject:null,_showColumnCusto:!1,_showDisplayNameCusto:!1,onRenderFacet:function(t){var a=null;UWA.is(window)&&UWA.is(window.location)&&UWA.is(window.location.search,"string")&&(a=window.location.search.substring(1)),UWA.is(a,"string")&&a.length>0&&a.indexOf("AdminColumnsSearch")>=0&&(this._showColumnCusto=!0),d.getOption("AdminJsonColumnCusto")&&(this._showColumnCusto=!0),UWA.is(a,"string")&&a.length>0&&a.indexOf("SearchDisplayName")>=0&&(this._showDisplayNameCusto=!0);var r=e.create("div",{class:"search_center_columncusto_main_div",id:"search-type-tab-view-mode"}).inject(t);if(!0===this._showColumnCusto){var s=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r),c=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex",id:"search-type-display-text"}).inject(s);e.create("p",{class:"search_center_right_text",text:u.get("SearchColumnCusto.ImportColumnCusto")}).inject(c);var l=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r);e.create("div",{class:"search_center_div_left_columncusto_chooser search_center_general_display_flex",id:"search-type-display-text"}).inject(l);var h=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"90%",position:"relative"}}).inject(l),g=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{width:"50%",position:"center","margin-left":"5px"}}).inject(l);p.fileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:"Upload Search Column Customization",buttonText:"Browse",events:{onChange:this._onFileInputChange.bind(this)}}).inject(h);var m=this;p.importButton=new i({id:"import_button_id",value:u.get("importButton.title"),className:"default",disabled:!0,events:{onClick:function(){m._OnImportClick(),o.log("inside _OnImportClick() ")}}}).inject(g);var f=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-column-custo-display"}).inject(r),C=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex"}).inject(f);e.create("p",{class:"search_center_right_text",id:"search-column-custo-display-text"}).inject(C)}if(!0===this._showDisplayNameCusto){var v=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r),y=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex",id:"search-type-display-text"}).inject(v);e.create("p",{class:"search_center_right_text",text:u.get("SearchColumnCusto.ImportDisplayNameCusto")}).inject(y);var b=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-type-display"}).inject(r);e.create("div",{class:"search_center_div_left_columncusto_chooser search_center_general_display_flex",id:"search-type-display-text"}).inject(b);var S=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"90%",position:"relative"}}).inject(b),x=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{width:"50%",position:"center","margin-left":"5px"}}).inject(b);p.displayCustoFileChooser=new n({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:u.get("SearchColumnCusto.UploadDisplayNameCusto"),buttonText:"Browse",events:{onChange:this._onDisplayNameFileInputChange.bind(this)}}).inject(S);m=this;p.displayCustoImportButton=new i({id:"import_button_id",value:u.get("importButton.title"),className:"default",disabled:!0,events:{onClick:function(){m._OnDisplayNameImportClick(),o.log("inside _OnDisplayNameImportClick() ")}}}).inject(x);var D=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"search-column-custo-display"}).inject(r),T=e.create("div",{class:"search_center_div_left_columncusto search_center_general_display_flex"}).inject(D);e.create("p",{class:"search_center_right_text",id:"search-displayname-custo-display-text"}).inject(T)}_.unmask(widget.body)},_onFileInputChange:function(e){var a=e.target.files[0].name;(this._uploadeJsonFileName=a,t.is(a,"string"))&&("json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(p.jsonReader=new FileReader,p.jsonReader.readAsText(e.target.files[0]),p.importButton.enable()):(p.importButton.disable(),p.fileChooser.clear(),alert(u.get("wrongJsonFileTypeSelectionWarning"))))},_OnImportClick:function(){document.getElementById("search-column-custo-display-text").innerHTML="The column custo file to upload: "+this._uploadeJsonFileName,p.importButton.disable(),h.enableButtons()},_onDisplayNameFileInputChange:function(e){var a=e.target.files[0].name;(this._displayCustoUploadeJsonFileName=a,t.is(a,"string"))&&("json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(p.displayCustoJsonReader=new FileReader,p.displayCustoJsonReader.readAsText(e.target.files[0]),p.displayCustoImportButton.enable()):(p.displayCustoImportButton.disable(),p.fileChooser.clear(),alert(u.get("wrongJsonFileTypeSelectionWarning"))))},_OnDisplayNameImportClick:function(){document.getElementById("search-displayname-custo-display-text").innerHTML="The display name custo file to upload: "+this._displayCustoUploadeJsonFileName,p.displayCustoImportButton.disable(),h.enableButtons()},getTabInputsToStore:function(){t.is(this._uploadeJsonFileName)&&(document.getElementById("search-column-custo-display-text").innerHTML="The column custo file applied: "+this._uploadeJsonFileName,p.importButton.disable()),t.is(this._displayCustoUploadeJsonFileName)&&(document.getElementById("search-displayname-custo-display-text").innerHTML="The display name custo file applied: "+this._displayCustoUploadeJsonFileName,p.displayCustoImportButton.disable()),h.enableRestoreButton();var e={},a={};if(t.is(this._uploadeJsonFileName)?(t.is(p.jsonReader.result)&&t.is(p.jsonReader.result)&&((e=JSON.parse(p.jsonReader.result)).uploadedColumnCustoFileName=this._uploadeJsonFileName),a.searchColumnCustoInputs=e):a.searchColumnCustoInputs=this._columnCustoMemoryObject,t.is(this._displayCustoUploadeJsonFileName)){var r={};t.is(p.displayCustoJsonReader.result)&&t.is(p.displayCustoJsonReader.result)&&((r=JSON.parse(p.displayCustoJsonReader.result)).uploadedDisplayCustoFileName=this._displayCustoUploadeJsonFileName),a.searchDisplayCustoInputs=r}else a.searchDisplayCustoInputs=this._displayNameMemoryObject;return a},onResetTab:function(e){l.getSearchSettings({tenantID:h.platformID}).then(function(e){var a;let r="",n="";if((a=t.is(e,"string")?JSON.parse(e):e).hasOwnProperty("column_custo")){var i=a.column_custo;t.is(i)&&i.hasOwnProperty("searchColumnCustoInputs")&&(p._columnCustoMemoryObject=i.searchColumnCustoInputs,t.is(p._columnCustoMemoryObject)&&t.is(p._columnCustoMemoryObject.uploadedColumnCustoFileName,"string")&&(r=p._columnCustoMemoryObject.uploadedColumnCustoFileName)),t.is(i)&&i.hasOwnProperty("searchDisplayCustoInputs")&&(p._displayNameMemoryObject=i.searchDisplayCustoInputs,t.is(p._displayNameMemoryObject)&&t.is(p._displayNameMemoryObject.uploadedDisplayCustoFileName,"string")&&(n=p._displayNameMemoryObject.uploadedDisplayCustoFileName))}!0===p._showColumnCusto&&(document.getElementById("search-column-custo-display-text").innerHTML=r.trim().length>0?"Current applied custo file: "+r:"There is no custom file applied yet."),!0===p._showDisplayNameCusto&&(document.getElementById("search-displayname-custo-display-text").innerHTML=n.trim().length>0?"Current applied display custo file: "+n:"There is no custom file applied yet.")},function(){}),this._uploadeJsonFileName=null,!0===p._showColumnCusto&&(p.fileChooser.clear(),p.importButton.disable())}};return p}),define("DS/SearchControlCenter/scripts/SearchcontrolExportImport",["UWA/Element","UWA/Core","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/SNInfraUX/Logger","DS/SNInfraUX/SNVocabAccess","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNResultUX/utils/SearchServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SNInfraUX/SearchControlCenterFetchService"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_){"use strict";let p={_importButton:null,_exportButton:null,_fileChooser:null,_jsonReader:null,_postURL:null,_uploadeJsonFileName:null,onRenderFacet:function(t){let i=e.create("div",{class:"scc_main_div",id:"scc_main_div"}).inject(t),s=e.create("div",{id:"search_center_main_div"}).inject(i),o=e.create("div",{class:"search_center_add_bottom_border search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(s);e.create("p",{class:"search_center_text_heading",text:d.get("ImportExport.Import_Search_Configuration")}).inject(o);let c=e.create("div",{class:"search_center_margin",id:"search-type-display"}).inject(s),l=e.create("div",{id:"search-type-display-text"}).inject(c);e.create("p",{text:d.get("ImportExport.Import_Configuration_File")}).inject(l);let h=e.create("div",{class:"search_center_general_display_flex",id:"search-type-display-text"}).inject(c),_=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-tab-file-chooser",styles:{width:"30%",position:"relative"}}).inject(h),g=e.create("div",{class:"enterprise-dictionary-tab",id:"columncusto-file-import",styles:{position:"center","margin-left":"5px"}}).inject(h);p._fileChooser=new a({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:"Select a file ...",buttonText:"Browse",events:{onChange:this._onFileInputChange.bind(this)}}).inject(_);let m=this;p._importButton=new r({id:"import_button_id",value:d.get("ImportExport.Import_Button.title"),className:"default",disabled:!0,icon:"fonticon fonticon-upload",events:{onClick:function(){m._OnImportClick(),n.log("inside _OnImportClick() ")}}}).inject(g);let f=e.create("div",{id:"search-column-custo-display"}).inject(c),C=e.create("div",{}).inject(f);e.create("p",{text:d.get("ImportExport.Import_Valid_with_Json"),id:"search-column-custo-display-text"}).inject(C);let v=e.create("div",{class:"search_center_import_export_margin",id:"search_center_main_div"}).inject(i),y=e.create("div",{class:"search_center_add_bottom_border search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(v);e.create("p",{class:"search_center_text_heading",text:d.get("ImportExport.Export_Search_Configuration")}).inject(y);let b=e.create("div",{class:"search_center_margin",id:"search-type-display"}).inject(v),S=e.create("div",{class:"search_center_import_export_border",id:"search-type-display-text"}).inject(b);e.create("p",{class:"search_center_export_msgbox_margin",text:d.get("ImportExport.Export_Details_Text")}).inject(S);let x=e.create("div",{class:"search_center_general_tab_div",id:"search-type-display-text"}).inject(b);p._exportButton=new r({id:"Export_button_id",value:d.get("ImportExport.Export_Button.title"),className:"default",icon:"fonticon fonticon-export",events:{onClick:function(){m._OnExportClick(),n.log("inside _OnExportClick() ")}}}).inject(x),u.removeMask(widget.body)},_onFileInputChange:function(e){let a=e.target.files[0].name;if(this._uploadeJsonFileName=a,t.is(a,"string")){"json"===a.slice(2+(a.lastIndexOf(".")-1>>>0))?"undefined"!=typeof FileReader&&(p._jsonReader=new FileReader,p._jsonReader.readAsText(e.target.files[0]),p._importButton.enable()):(p._importButton.disable(),p._fileChooser.clear(),alert(d.get("wrongJsonFileTypeSelectionWarning")))}u.removeMask(widget.body)},_OnImportClick:function(){if(t.is(this._uploadeJsonFileName)&&t.is(p._jsonReader.result)){let e,a=u.decryptData("SCCConfiguration",p._jsonReader.result);try{e=JSON.parse(a)}catch(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("ImportExport.jsonmodified");t.add({className:"error applyChangesAlert",message:a})}t.is(e)&&this._validateImportedFile(e)}p._importButton.disable()},_OnExportClick:function(){let e=u.getSettingsFromDB(),t=JSON.stringify(e),a=u.encryptData("SCCConfiguration",t);this.downloadFile(a,"","application/json")},downloadFile:function(e,a,r){if(!t.is(e))return;if(!t.is(r))return;let n,i=document,s=i.createElement("a"),o=r;if(r=r||"application/octet-stream",r+=";charset=UTF-8,",!a){let e=new Date;a="SCC Export - "+e.getFullYear()+(e.getMonth()+1)+e.getDate()+e.getHours()+e.getMinutes()+e.getSeconds()+".json"}let l;if(navigator.msSaveBlob&&!c.odtMode)return navigator.msSaveBlob(new Blob(["\ufeff"+e],{type:r}),a);"download"in s?(l=new Blob(["\ufeff"+e],{type:r}),n=URL.createObjectURL(l),s.setAttribute("download",a)):(UWAClient.Engine.safari&&UWAClient.Platform.ios?(l=new Blob(["\ufeff"+e],{type:o}),n=(window.URL?URL:window.webkitURL).createObjectURL(l)):n="data:"+r+"\ufeff"+encodeURIComponent(e),s.setAttribute("target","_blank"),s.setAttribute("download",a)),s.href=n,s.setAttribute("style","display:none;"),i.body.appendChild(s),setTimeout(function(){if(s.click)s.click();else if(document.createEvent){let e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),s.dispatchEvent(e)}i.body.removeChild(s)},100)},_validateImportedFile:function(e){let a=this,r=e;t.is(r)&&u.loadDataSourcesandClasses().then(function(n){u.getAvailableSources();let i=[],s=[],o=!1;if(t.is(n,"array")&&n.forEach(function(e){i.push(e.classInfos)}),t.is(r)){let n={facetID:"SearchControl_General"};n.settingsJSON=r;u.getSettingsJSONFromTabName(n);n.facetID="SearchControl_6WTags";u.getSettingsJSONFromTabName(n);n.facetID="SearchControl_SearchTypes";let c=u.getSettingsJSONFromTabName(n);if(c.hasOwnProperty("type_custo")){let e=c.type_custo;if(!0===e.type_display){if(t.is(e.default_datasourceandtype)&&e.default_datasourceandtype.length>0){let a=e.default_datasourceandtype[0].source;if(t.is(a)){let e=u.getVocabID(a);t.is(e)||s.push(a)}}if(e.hasOwnProperty("easyTypeAccess")){e.easyTypeAccess.forEach(function(e){let t=e.uri,a=e.source;for(let e=0;e<i.size;e++)if(u.getVocabID(a)===i[e][0].service){i[e].findIndex(function(e){if(e.uri===t&&u.getVocabID(a)===e.service)return!0})<0&&s.push(t);break}})}if(e.hasOwnProperty("excluded_types")){e.excluded_types.forEach(function(e){let t=e.uri,a=e.source;for(let e=0;e<i.size;e++)if(u.getVocabID(a)===i[e][0].service){i[e].findIndex(function(e){if(e.uri===t&&u.getVocabID(a)===e.service)return!0})<0&&s.push(t);break}})}}}if(c.hasOwnProperty("attribute_custo")){let r=c.attribute_custo;if(r.hasOwnProperty("ds6w:type")){let n=r["ds6w:type"];if(t.is(n,"array")&&n.length>1){let r=n.length,c=[];for(let e=1;e<r;e++){let a=n[e];if(t.is(a)){let e=a.uri,t=a.source;for(let r=0;r<i.size;r++)if(u.getVocabID(t)===i[r][0].service){i[0].findIndex(function(r){if(r.uri===e&&u.getVocabID(t)===r.service)return c.push(a),!0})<0&&s.push(e);break}}}c.length&&(o=!0,Promise.all(a._loadPredicatesOfTypes(c)).then(function(t){let r=c,n=t.length;for(let e=0;e<n;e++)r[e].uri===t[e].type&&r[e].predicates.forEach(function(a){let r=a.uri;t[e].vocabularyPredicateInfo.findIndex(function(e){if(e.uri===r)return!0})<0&&s.push(r)});a._manageImport(s,e)}))}}}!1===o&&a._manageImport(s,e)}})},_loadPredicatesOfTypes:function(e){let t=[],a=u.getPlatformID();return e.forEach(e=>{e.uri&&t.push(new Promise((t,r)=>{i.loadRelevantPredicates({className:e.uri,tenantId:a},t)}))}),t},_manageImport:function(e,a){let r=this;if(t.is(e,"array")&&e.length>0){let t="";t+="<br>"+d.get("ImportExport.Import_Failed_Message")+"<br><br>",e.forEach(function(e){t+="&nbsp;&nbsp;&nbsp;&nbsp;"+e+"<br>"}),h.modal({title:d.get("ImportExport.Import_Error"),content:t,visibleFlag:!0,CB:[{buttonKind:"YES",label:d.get("ImportExport.yesButton"),function:()=>{h.destroyModal()}}]})}else r._importIntoDB(a)},_importIntoDB:function(e){o.getServiceUrl({serviceName:"3DSpace",platformId:u.platformID,onComplete:function(t){if(UWA.is(t,"string")){p._postURL=t+"/resources/SNAPI/infra_services/searchsettings?tenant="+u.platformID;let a=e,r={timeout:5e4,method:"POST",data:JSON.stringify(a),type:"json",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(){u.updateMemoryModel(e),_._searchControlCenterSettingsJSONFromDB=a;let t=u.createWdgAlert();t.inject(widget.body,"top");let r=d.replace(d.get("ImportExport.successmsg"),{tenant_name:u.platformDisplayName});t.add({className:"success applyChangesAlert",message:r})},onFailure:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("ImportExport.failuremsg");a+=e,t.add({className:"error applyChangesAlert",message:a})},onTimeout:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("SearchInfra.timeoutmsg");a+=e,t.add({className:"error applyChangesAlert",message:a})}};s.authenticatedRequest(p._postURL,r)}},onFailure:function(e){let t=u.createWdgAlert();t.inject(widget.body,"top");let a=d.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})},getTabInputsToStore:function(){},onResetTab:function(e){}};return p}),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils",["UWA/Core","UWA/Class","UWA/Promise","UWA/Class/Collection","DS/WAFData/WAFData","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNInfraUX/TaggerConfigAccess","DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_){"use strict";return t.singleton({init:function(){let t=o.getOption("rootWConcepts"),i=o.getOption("concepts_rootW_Mapping"),s=new r([],{model:h}),l=new r([],{model:h}),u=new Map,p=new Map,g=[],m=[],f=[],C=[],v=[],y=[],b=[],S=[],x=[],D={},T=[],A=null,w=null,I={};this.hasConcepts=function(){return s.length>0},this.getConcept=function(e){return s.get(e)},this.getCurrentConceptCollection=function(){return s},this.getOldConceptCollection=function(){return l},this.getConceptsInfo=function(){return D},this.getRenamedConcepts=function(){if(g.length>0)return g},this.getMovedConcepts=function(){if(m.length>0)return m},this.getDuplicateConcepts=function(){if(f.length>0)return f},this.getNewConcepts=function(){if(C.length>0)return C},this.getDeletedConcepts=function(){if(v.length>0)return v},this.getUnDeprecatedConcepts=function(){if(S.length>0)return S},this.getDeprecatedConcepts=function(){x=[],S=[];let e=b.length,t=y.length;if(e>0?b.forEach(function(e){y.forEach(function(t){e.getLabel()!=t.getLabel()&&x.push(t)})}):x=y,e>t&&b.forEach(function(e){t>0?y.forEach(function(t){e.includes(t)||S.push(e)}):S=b}),x.length>0)return x},this.isConceptAvailable=function(e){if("string"==typeof e&&e)return p.has(e.toLowerCase())};let N=function(e){let t=new h({id:e.shortURI,uri:e.uri,label:e.label}),a=e.types;return Array.isArray(a)||(a=[]),t.set("types",a),-1!==a.indexOf("ds6wclassifier:Tag")&&t.setAsTaggable(),-1!==a.indexOf("owl:DeprecatedClass")&&t.setAsDeprecated(),u.set(e.label,!0),p.set(e.label.toLowerCase(),!0),t};this.SetDeprecatedConcepts=function(){b=y,y=[],s.forEach(function(e){!0===e.isDeprecated()&&y.push(e)})},this._parseConceptsInfo=function(e,a,n){try{a=UWA.is(a,"string")?JSON.parse(a):a,D=a,l=s,s=function(e){let a=new r([],{model:h});return e.forEach(function(e){let r=a.get(e.shortURI);if(r)throw new Error(e.shortURI+" is already available from "+r.get("uri"));if(r=N(e),a.add(r),UWA.is(e.broader,"array")){let n=e.broader[0].shortURI;1==e.broader.length&&"ds6wclassifier:Root"===n?(r.setAsRootWConcept(),r.set("rootW",i[r.id.toLowerCase()])):e.broader.forEach(function(e){n=e.shortURI;let i=a.get(n);i||(i=N(e),a.add(i)),i.addNarrowerConcept(r),i.canBeTagged()&&r.setAsTaggable(),-1!=t.indexOf(i.id.toLowerCase())&&r.setAsRootConcept()})}}),a}(a),n(a)}catch(e){console.log("FAILED to parse /3drdfpersist/resources/v1/ontologies/ response"),n([])}};let P=!0;this.CompareDataSets=function(t,a){if(g=[],C=[],v=[],m=[],f=[],0===t.length)return console.log("No previous Dataset To compare"),!0;if(t.length===a.length)t.forEach(function(t){a.forEach(function(a){if(t.get("label")!=a.get("label")&&t.get("uri")===a.get("uri")){let e={original_concept:t,renamed_concept:a};g.push(e)}if(t.getBroaderConcept().length>0&&t.get("uri")===a.get("uri")){if(!e.is(a.getBroaderConcept())&&a.getBroaderConcept().length>0)console.log("Father movement");else if(e.is(t.getBroaderConcept())&&t.getBroaderConcept().length>0&&t.getBroaderConcept().at(0).getURI()!=a.getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t,previous_father:t.getBroaderConcept().at(0),current_father:a.getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}}else if(e.is(t)&&t.get("label")===a.get("label")&&t.getURI()!=a.getURI()&&e.is(t.getBroaderConcept())&&a.getBroaderConcept().length>0&&e.is(t.getBroaderConcept())&&a.getBroaderConcept().length>0&&t.getBroaderConcept().at(0).getLabel()===a.getBroaderConcept().at(0).getLabel()){let e={org_concept:t,duplicate:a};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}})});else if(a.length>t.length)for(let r=0;r<a._models.length;r++){let n=!1;for(let i=0;i<t._models.length;i++){if(t._models[i].get("label")!=a._models[r].get("label")&&t._models[i].get("uri")===a._models[r].get("uri")){let e={original_concept:t._models[i],renamed_concept:a._models[r]};g.push(e)}if(e.is(t._models[i])&&t._models[i].get("label")===a._models[r].get("label")&&t._models[i].getURI()!=a._models[r].getURI()&&e.is(t._models[i].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&e.is(a._models[r].getBroaderConcept())&&a._models[r].getBroaderConcept().length>0&&t._models[i].getBroaderConcept().at(0).getLabel()===a._models[r].getBroaderConcept().at(0).getLabel()){let e={org_concept:t._models[i],duplicate:a._models[r]};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}if(t._models[i].get("uri")===a._models[r].get("uri")){if(n=!0,e.is(t._models[i])&&t._models[i].get("uri")===a._models[r].get("uri"))if(!e.is(a._models[r].getBroaderConcept())&&a._models[r].getBroaderConcept().length>0)console.log("Father Removed");else if(e.is(t._models[i].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&t._models[i].getBroaderConcept().at(0).getURI()!=a._models[r].getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t._models[i],previous_father:t._models[i].getBroaderConcept().at(0),current_father:a._models[r].getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}break}}n||C.push(a._models[r])}else if(a.length<t.length)for(let r=0;r<t._models.length;r++){let n=!1;for(let i=0;i<a._models.length;i++){if(t._models[r].get("label")!=a._models[i].get("label")&&t._models[r].get("uri")===a._models[i].get("uri")){let e={original_concept:t._models[r],renamed_concept:a._models[i]};g.push(e)}if(e.is(t._models[r])&&t._models[r].get("label")===a._models[i].get("label")&&t._models[r].getURI()!=a._models[i].getURI()&&e.is(t._models[r].getBroaderConcept())&&t._models[i].getBroaderConcept().length>0&&e.is(a._models[i].getBroaderConcept())&&a._models[i].getBroaderConcept().length>0&&t._models[r].getBroaderConcept().at(0).getLabel()===a._models[i].getBroaderConcept().at(0).getLabel()){let e={org_concept:t._models[r],duplicate:a._models[i]};console.log("Duplicate Concept: '"+e.duplicate+" of original concept "+e.org_concept+" under same father '"),f.push(e)}if(t._models[r].get("uri")===a._models[i].get("uri")){if(n=!0,t._models[r].getBroaderConcept().length>0&&t._models[r].get("uri")===a._models[i].get("uri"))if(e.is(a._models[i].getBroaderConcept())){if(e.is(t._models[r].getBroaderConcept())&&t._models[r].getBroaderConcept().length>0&&t._models[r].getBroaderConcept().at(0).getURI()!=a._models[i].getBroaderConcept().at(0).getURI()){console.log("Broader Not Same");let e={concept:t._models[r],previous_father:t._models[r].getBroaderConcept().at(0),current_father:a._models[i].getBroaderConcept().at(0)};console.log("Concept: '"+e.concept+"'  father changed from '"+e.previous_father+"' to '"+e.current_father+"'"),m.push(e)}}else console.log("Father movement");break}}n||(v.push(t._models[r]),P=!1)}return P};let j=function(t){let a=t;return I[a]||(I[a]=new Promise(function(a,r){let n=e.is(_.platformID)?_.platformID:c.getActiveTenant();d.getServiceUrl({serviceName:t,platformId:n,onComplete:function(e){e?a(e):r()},onFailure:function(e){r(e)}})})),I[a]};function W(t){let r=e.is(_.platformID)?_.platformID:c.getActiveTenant(),i=[],s=[],o=[];return new a(function(c,l){t.forEach(function(t){let i={massive:!0,predicate:t.predicate,literalValue:t.literal,tenant:r};o.push(function(t){return new a(function(a,r){let i={method:"DELETE",type:"text",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(e){let r={tag:t.literalValue,status:"deleted"};a(r)},onFailure:function(){let e={tag:t.literalValue,status:"rejected"};r(e)},onTimeout:function(){r("TIMEOUT during delete company tag for "+t.literalValue)}};console.log("Sending delete manual tag request"),n.authenticatedRequest(A+"/resources/6w/tags?"+e.Utils.toQueryString(t),i)})}(i))}),a.allSettled(o).then(function(e){let t=e.length;e.forEach(function(e){"rejected"===e.value.status&&s.push(e.value.tag),"deleted"===e.value.status&&i.push(e.value.tag)}),s.length>0&&console.log("Deletetion of tags failed for "+s.length+" tags"),i.length>0&&console.log("Succewssfull deletetion of "+i.length+" tags"),t===s.length&&console.log("All tags failed to delete"),t===i.length&&console.log("All tags deleted successfully"),c(i,s)})})}this.getOntologyConceptsFromSessionId=function(e){let t=this;return console.log("Creating a new promise to retrive concepts for applicativeId="+e[0].applicativeId+", and datasetTitle="+e[0].datasetTitle),new a(function(a){j("ontology").then(function(r){if(r.length>0){var i={method:"GET",headers:{Accept:"application/json"},url:r+"/3drdfklet/resources/v2/ontologies/concepts?recurse=all&applicativeId="+e[0].applicativeId,onComplete:function(r){t._parseConceptsInfo(e[0].applicativeId,r,a),t.SetDeprecatedConcepts(),t.CompareDataSets(l,s),a()},onFailure:function(){console.log(`FAILED to retrieve concents in applicativeId=${e[0].applicativeId}`),a([])}};n.authenticatedRequest(i.url,i)}else console.log("_getSericeURL did not provide data in expected format"),a([])},function(){console.log("_getSericeURL FAILED"),a([])})})},this.deleteTags=function(t){var r=[];return new a(function(a,n){let i=20;var s=[];t.forEach(function(t){e.is(t)&&"fullfilled"===t.state&&UWA.is(t.value.tags,"array")&&t.value.tags.length>0&&(s=s.concat(t.value.tags))}),function e(){let t=s.splice(0,i);t.length>0?W(t).then(function(t,a){e();let n={successdelete:t,failuredelete:a};r.push(n)}):a(r)}()})},this.deleteExistingManualCompanyTags=function(){let e=this,t=["ds6w:whatCompanyTag","ds6w:whereCompanyTag","ds6w:whoCompanyTag","ds6w:whenCompanyTag","ds6w:whyCompanyTag","ds6w:howCompanyTag"];return new a(function(r,n){j("6WTags").then(function(i){A=i,console.log("Tags url = "+A),j("3DSpace").then(function(n){w=n,console.log("Space url = "+w);let i=[];t.forEach(function(t){i.push(e.getTagsForWPromise(t,A)),i.push(e.getTagsForWPromise(t,w))}),a.allSettled(i).then(function(t){console.log("Need to call delete tags now"),e.deleteTags(t).then(function(e){r(e)})})},function(){console.log("_getSericeURL for 3DSpace FAILED"),n("_getSericeURL for 3DSpace FAILED")})},function(){console.log("_getSericeURL for 6WTags FAILED"),n("_getSericeURL for 6WTags FAILED")})})},this.getTagsForWPromise=function(t,r){return new a(function(a,i){let s={method:"GET",type:"text",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(r){T=[];let n=JSON.parse(r);e.is(n)&&UWA.is(n.data,"array")&&n.data.forEach(function(e){UWA.is(n.data[0].tag,"array")&&e.tag.forEach(function(e){let t={predicate:e.predicate,literal:e.object.literal};T.push(t)})}),console.log("Fetched Company tags for : "+t),a({tags:T,fetchStatus:"success"})},onFailure:function(e){console.log("FAILED to retrieve company tags for:  "+t),i({tags:e,fetchStatus:"failure"})},onTimeout:function(){console.log("TIMEOUT during get comopany tags for: "+t),i("TIMEOUT during get comopany tags")}},o=e.is(_.platformID)?_.platformID:c.getActiveTenant(),l={predicate:t,literalValue:"*",tenant:o};n.authenticatedRequest(r+"/resources/6w/tags?"+e.Utils.toQueryString(l),s)})}}}).init()}),define("DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCPQManager",["UWA/Core","UWA/Class","UWA/Promise","UWA/Class/Collection","DS/WAFData/WAFData","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNInfraUX/TaggerConfigAccess","DS/SearchControlCenter/scripts/ControlledOntology/model/SCCOntologyConcept","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_){"use strict";return t.singleton({init:function(){let t=null,r={},i=null,s=null,o=null,l=null,u=null,h=null,p={},g=null,m={},f=function(t,a){for(var r in a)a.hasOwnProperty(r)&&(e.is(t[r],"array")?t[r]=t[r].concat(a[r]):e.is(t[r],"object")&&e.is(a[r],"object")?f(t[r],a[r]):t[r]||(t[r]=a[r]))};this.fetchPQs=function(){let C=e.is(_.platformID)?_.platformID:c.getActiveTenant();return m[C]||(m[C]=a.deferred(),function(t){let a=t;return r[a]||(r[a]=new Promise(function(a,r){let n=e.is(_.platformID)?_.platformID:c.getActiveTenant();d.getServiceUrl({serviceName:t,platformId:n,onComplete:function(e){e?a(e):r()},onFailure:function(e){r(e)}})})),r[a]}("3DSpace").then(function(a){t=a,console.log("Space url = "+t);let r={method:"GET",type:"text",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(t){let a=JSON.parse(t);if(i=a.pqlist,s=a.nls,u=[],h=[],g=[],e.is(a.custom))for(var r=0,n=(o=a.custom).PQ.length;r<n;r++){o.PQ[r].custom=!0}e.is(a.customnls)&&(l=a.customnls),e.is(i)&&i.PQ.forEach(function(e){u.push({id:e.pqid,value:e.value,abbreviations:e.abbreviations,title:s[e.pqid+".Title"]}),h.push({id:e.pqid,value:e.value,abbreviations:e.abbreviations,title:s[e.pqid+".Title"]})}),e.is(o)&&o.PQ.forEach(function(e){g.push({id:e.pqid,value:e.value,abbreviations:e.abbreviations,title:l[e.pqid+".Title"]})}),f(i,o),u.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),g.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0}),function(t){var a=void 0;if(e.is(t))for(var r=0;r<t.length;r++){var n=t[r].abbreviations;if(e.is(n))for(var i=n.split(","),s=0;s<i.length;s++){var o=i[s],c=o.toLowerCase();e.is(t[r].sort_order)&&1===(a=t[r].sort_order).length&&(a=a[0]);var l={pqPrefix:o,value:t[r].value,pqName:i[i.length-1],pqid:t[r].pqid,appData:t[r].appData,sort_order:a};p[c]=l}}}(u),m[C].resolve(a)},onFailure:function(e){console.log("FAILED to retrieve pqs"),m[C].reject(e)},onTimeout:function(){console.log("FAILED to retrieve pqs"),m[C].reject("TIMEOUT during pq retrival")}},d=c.getLanguage(),_={tenant:C,lang:d};n.authenticatedRequest(t+"/resources/SNAPI/pq_services/pqs?lang="+e.Utils.toQueryString(_),r)},function(){console.log("_getServiceURL for 3DSpace FAILED"),reject("_getServiceURL for 3DSpace FAILED")})),m[C].promise},this.getStdPQs=function(){return u},this.getAllPQs=function(){return i.nbPQ=i.PQ.length,i},this.getAllCustomPQs=function(){return g},this.isAPQAbbrevation=function(e){var t=e.toString().toLowerCase();return"type"!==t&&t in p}}}).init()}),define("DS/SearchControlCenter/scripts/SearchcontrolPQ",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/UIKIT/Popover","DS/Controls/ComboBox","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/SNInfraUX/Logger","DS/SNInfraUX/SNVocabAccess","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SNResultUX/utils/SearchServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SNInfraUX/SearchControlCenterFetchService","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/TreeModel/DataModelSet","DS/DataGridView/DataGridView","DS/Windows/ImmersiveFrame","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCPQManager","DS/UIKIT/Mask","DS/Controls/LineEditor"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_,p,g,m,f,C,v,y,b,S,x,D,T){"use strict";let A={_pq:null,_pqnls:null,_CustomPQs:null,_CustomNls:null,_allPQ:null,_stdPQ:null,_selectedPQs:[],_selectedCustomPQs:[],_savedSelectedPQs:[],_savedSelectedCustomPQs:[],prefixInput:"",onRenderFacet:function(t){let i=e.create("div",{class:"scc_tagsDisplay_div",id:"search-center-pq-toggle"}).inject(t),s=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"select_pq_span"}).inject(i),o=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"Select_availabale_PQ"}).inject(s);A.SelectAvailPqON=new a({type:"switch",label:_.get("SearchcontrolPQ.EditPQtoggle.label"),touchMode:!0,value:1}).inject(o);let c=e.create("span",{class:"fonticon fonticon-info search_center_general_display_flex",styles:{"margin-left":"5px","margin-top":"6px"}}).inject(o);new r({target:c,className:".inverted",trigger:"hover",animate:"true",position:"right",body:_.get("SearchcontrolPQ.EditPQtoggle.popover"),title:""});let l=e.create("div",{class:"search_center_div_right_new search_center_general_display_flex",id:"Search_availabale_PQ",styles:{"margin-left":"210px",position:"relative"}}).inject(s),d=e.create("div",{class:"search_center_div_right_new search_center_general_display_flex",id:"divSearchEditor",styles:{"margin-left":"210px"}}).inject(l);A.searchInput=new T({placeholder:_.get("Search"),value:""}).inject(d);document.getElementById("divSearchEditor");A.searchInput.addEventListener("keydown",function(e){"Enter"===e.key&&(console.log("Enter Press"),h.click())}),A.searchInput.addEventListener("uncommittedChange",function(e){0===A.searchInput.valueToCommit.length&&(A.searchPQComboBox.selectedIndex=1,A.searchPQComboBox.currentValue=_.get("Show_all"))});let u=e.create("div",{class:"search_center_div_right_new search_center_general_display_flex",id:"search_lense_div",styles:{position:"relative","margin-left":"-22px","margin-top":"3px"}}).inject(l),h=e.create("div",{class:"fonticon fonticon-search",id:"search_lense",styles:{"z-index":"10",position:"relative"}}).inject(u);h.addEventListener("click",function(){console.log("Lense clicked");let e=[],t=A.searchInput.value.toLowerCase(),a=(x.isAPQAbbrevation(t),A.dataGridView.getTreeDocument());a.search({match:function(a){if(a.nodeModel.getAttributeValue("PQ").toLowerCase().includes(t)||a.nodeModel.getAttributeValue("Abbreviations").toLowerCase().includes(t)){let t={id:a.nodeModel.getAttributeValue("id"),Abbreviations:a.nodeModel.getAttributeValue("Abbreviations"),PQ:a.nodeModel.getAttributeValue("PQ"),value:a.nodeModel.getAttributeValue("value")};e.push(t)}}});let r=[];if(A._selectedPQs)for(let e=0;e<A._selectedPQs.length;e++)r.push(A._selectedPQs[e]);a._getTrueRoot().removeChildren(),a.prepareUpdate();let n=e.length;for(let t=0;t<n;t++){let r={id:(d=e[t]).id,Abbreviations:d.Abbreviations,PQ:d.PQ,value:d.value};var i=v.createTreeNodeDataModel(P,{label:r.PQ,grid:r});a.addChild(i)}a.expandAll(),a.pushUpdate(),a.search({match:function(e){r&&r.length>0&&r.forEach(function(t){e.nodeModel.getAttributeValue("id")===t.id&&e.nodeModel.select()})}});let s=[],o=[];if(A._selectedCustomPQs)for(let e=0;e<A._selectedCustomPQs.length;e++)o.push(A._selectedCustomPQs[e]);let c=A.customdataGridView.getTreeDocument();c.search({match:function(e){if(e.nodeModel.getAttributeValue("PQ").toLowerCase().includes(t)||e.nodeModel.getAttributeValue("Abbreviations").toLowerCase().includes(t)){let t={id:e.nodeModel.getAttributeValue("id"),Abbreviations:e.nodeModel.getAttributeValue("Abbreviations"),PQ:e.nodeModel.getAttributeValue("PQ"),value:e.nodeModel.getAttributeValue("value")};s.push(t)}}}),c._getTrueRoot().removeChildren(),c.prepareUpdate();let l=s.length;for(let e=0;e<l;e++){var d;let t={id:(d=s[e]).id,Abbreviations:d.Abbreviations,PQ:d.PQ,value:d.value};i=v.createTreeNodeDataModel(P,{label:t.PQ,grid:t});c.addChild(i)}if(c.expandAll(),c.pushUpdate(),c.search({match:function(e){o&&o.length>0&&o.forEach(function(t){e.nodeModel.getAttributeValue("id")===t.id&&e.nodeModel.select()})}}),r)for(let e=0;e<r.length;e++){let t=!1;A._selectedPQs.forEach(function(a){a.id===r[e].id&&(t=!0)}),!1===t&&A._selectedPQs.push(r[e])}if(o)for(let e=0;e<o.length;e++){let t=!1;A._selectedCustomPQs.forEach(function(a){a.id===o[e].id&&(t=!0)}),!1===t&&A._selectedCustomPQs.push(o[e])}});let g=e.create("div",{class:"search_center_div_right_new search_center_general_display_flex",id:"Select_PQ_combo"}).inject(l);var m=[{label:_.get("Show_all")},{label:_.get("Show_Selected")},{label:_.get("Show_unselected")}];A.searchPQComboBox=new n({elementsList:m,nbDisplayedElements:m.length,selectedIndex:-1,enableSearchFlag:!1}).inject(g),g.setStyle("display","grid"),g.setStyles({display:"grid","margin-left":"10px",width:"150px"}),A.searchPQComboBox.addEventListener("change",function(){if(A.searchPQComboBox.currentValue===m[0].label){let a=[];if(A._selectedPQs.length>0)for(let e=0;e<A._selectedPQs.length;e++)a.push(A._selectedPQs[e]);let r=A.dataGridView.getTreeDocument();r._getTrueRoot().removeChildren(),r.prepareUpdate();let n=A._stdPQ.length;for(let a=0;a<n;a++){let n={id:(t=A._stdPQ[a]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};var e=v.createTreeNodeDataModel(P,{label:n.title,grid:n});r.addChild(e)}if(r.expandAll(),r.pushUpdate(),r.search({match:function(e){a&&a.length>0&&a.forEach(function(t){e.nodeModel.getAttributeValue("id")===t.id&&e.nodeModel.select()})}}),a)for(let e=0;e<a.length;e++){let t=!1;A._selectedPQs.forEach(function(r){r.id===a[e].id&&(t=!0)}),!1===t&&A._selectedPQs.push(a[e])}let i=[];if(A._selectedCustomPQs.length>0)for(let e=0;e<A._selectedCustomPQs.length;e++)i.push(A._selectedCustomPQs[e]);let s=A.customdataGridView.getTreeDocument();s._getTrueRoot().removeChildren(),s.prepareUpdate();let o=A._CustomPQs.length;for(let a=0;a<o;a++){let r={id:(t=A._CustomPQs[a]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=v.createTreeNodeDataModel(P,{label:r.title,grid:r});s.addChild(e)}if(s.expandAll(),s.pushUpdate(),s.search({match:function(e){i&&i.length>0&&i.forEach(function(t){e.nodeModel.getAttributeValue("id")===t.id&&e.nodeModel.select()})}}),i)for(let e=0;e<i.length;e++){let t=!1;A._selectedCustomPQs.forEach(function(a){a.id===i[e].id&&(t=!0)}),!1===t&&A._selectedCustomPQs.push(i[e])}}if(A.searchPQComboBox.currentValue===m[1].label){let a=[];if(A._selectedPQs.length>0)for(let e=0;e<A._selectedPQs.length;e++)a.push(A._selectedPQs[e]);let r=A.dataGridView.getTreeDocument();r._getTrueRoot().removeChildren(),r.prepareUpdate();let n=a.length;for(let i=0;i<n;i++){let n={id:(t=a[i]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=v.createTreeNodeDataModel(P,{label:n.title,grid:n});r.addChild(e),e.select()}if(r.expandAll(),r.pushUpdate(),a)for(let e=0;e<a.length;e++){let t=!1;A._selectedPQs.forEach(function(r){r.id===a[e].id&&(t=!0)}),!1===t&&A._selectedPQs.push(a[e])}let i=[];if(A._selectedCustomPQs.length>0)for(let e=0;e<A._selectedCustomPQs.length;e++)i.push(A._selectedCustomPQs[e]);let s=A.customdataGridView.getTreeDocument();s._getTrueRoot().removeChildren(),s.prepareUpdate();let o=i.length;for(let a=0;a<o;a++){let r={id:(t=i[a]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=v.createTreeNodeDataModel(P,{label:r.title,grid:r});s.addChild(e),e.select()}if(s.expandAll(),s.pushUpdate(),i)for(let e=0;e<i.length;e++){let t=!1;A._selectedCustomPQs.forEach(function(a){a.id===i[e].id&&(t=!0)}),!1===t&&A._selectedCustomPQs.push(i[e])}}if(A.searchPQComboBox.currentValue===m[2].label){let a=[];if(A._selectedPQs.length>0)for(let e=0;e<A._selectedPQs.length;e++)a.push(A._selectedPQs[e]);let r=[];for(let e=0;e<A._stdPQ.length;e++)if(a.length>0){let t=!1;a.forEach(function(a){a.id===A._stdPQ[e].id&&(t=!0)}),!1===t&&r.push(A._stdPQ[e])}let n=A.dataGridView.getTreeDocument();if(n._getTrueRoot().removeChildren(),n.prepareUpdate(),r.length>0){let a=r.length;for(let i=0;i<a;i++){let a={id:(t=r[i]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=v.createTreeNodeDataModel(P,{label:a.PQ,grid:a});n.addChild(e)}}else if(0==a.length){let a=A._stdPQ.length;for(let r=0;r<a;r++){let a={id:(t=A._stdPQ[r]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=v.createTreeNodeDataModel(P,{label:a.PQ,grid:a});n.addChild(e)}}if(n.expandAll(),n.pushUpdate(),a)for(let e=0;e<a.length;e++){let t=!1;A._selectedPQs.forEach(function(r){r.id===a[e].id&&(t=!0)}),!1===t&&A._selectedPQs.push(a[e])}let i=[];if(A._selectedCustomPQs.length>0)for(let e=0;e<A._selectedCustomPQs.length;e++)i.push(A._selectedCustomPQs[e]);let s=[];for(let e=0;e<A._CustomPQs.length;e++){let t=!1;i.forEach(function(a){a.id===A._CustomPQs[e].id&&(t=!0)}),!1===t&&s.push(A._CustomPQs[e])}let o=A.customdataGridView.getTreeDocument();if(o._getTrueRoot().removeChildren(),o.prepareUpdate(),s.length>0){let a=s.length;for(let r=0;r<a;r++){let a={id:(t=s[r]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=v.createTreeNodeDataModel(P,{label:a.PQ,grid:a});o.addChild(e)}}else{let a=A._CustomPQs.length;for(let r=0;r<a;r++){var t;let a={id:(t=A._CustomPQs[r]).id,Abbreviations:t.abbreviations,PQ:t.title,value:t.value};e=v.createTreeNodeDataModel(P,{label:a.PQ,grid:a});n.addChild(e)}}if(o.expandAll(),o.pushUpdate(),i)for(let e=0;e<i.length;e++){let t=!1;A._selectedCustomPQs.forEach(function(a){a.id===i[e].id&&(t=!0)}),!1===t&&A._selectedCustomPQs.push(i[e])}}});let f=e.create("div",{class:"search_center_div_left_new search_center_general_display_flex search_center_add_category_bottom",id:"div_custom_pq_text"}).inject(i);e.create("p",{class:"search_center_text_heading",text:_.get("Custom Predefined Queries")}).inject(f),A.divCustomPQ=e.create("div",{class:"scc_tagsDisplay_div",id:"search-center-custom-pq"}).inject(t);var S=new y,w=new C({dataModelSet:S}),I=[{text:"Select All",customHeader:{updateContent(){A.customdataGridView.layout.columns[0].text="Select All ("+A._selectedCustomPQs.length+")"}},children:[{text:"PQ",dataIndex:"PQ"},{text:"Abbreviations",dataIndex:"Abbreviations"}]}];A.customdataGridView=new b({treeDocument:w,columns:I,showRowIndexFlag:!1,showSelectionCheckBoxesFlag:!0,maxVisibleRowCount:10,showOutlineFlag:!0,defaultColumnDef:{typeRepresentation:"string",sortableFlag:!1,height:"auto"}}).inject(A.divCustomPQ),A.customdataGridView.elements.container.addClassName("pq-grid-container"),A.customdataGridView.layout.setColumnWidth("PQ",200),D.mask(A.divCustomPQ),x.fetchPQs().then(function(e){A._CustomPQs=x.getAllCustomPQs();let t=[];A._CustomPQs.forEach(function(e){let a={id:e.id,Abbreviations:e.abbreviations,PQ:e.title,value:e.value};t.push(a)}),w.prepareUpdate();for(var a=0,r=t.length;a<r;a++){var n=t[a],i=v.createTreeNodeDataModel(S,{label:n.title,grid:n});w.addChild(i)}w.expandAll(),w.pushUpdate(),D.unmask(A.divCustomPQ)},function(){D.unmask(A.divCustomPQ),console.log("_getServiceURL for 3DSpace FAILED"),reject("_getServiceURL for 3DSpace FAILED")}),A._selectedCustomPQs=[],A.customdataGridView.getNodesXSO().onPostAdd(function(e){e.forEach(function(e){let t={title:e.getAttributeValue("PQ"),abbreviations:e.getAttributeValue("Abbreviations"),id:e.getAttributeValue("id"),value:e.getAttributeValue("value")};A.onItemSelected(t,!0),p.enableButtons()})}),A.customdataGridView.getNodesXSO().onPostRemove(function(e){e.forEach(function(e){let t={title:e.getAttributeValue("PQ"),abbreviations:e.getAttributeValue("Abbreviations"),id:e.getAttributeValue("id"),value:e.getAttributeValue("value")};A.onItemUnselected(t,!0),p.enableButtons()})});let N=e.create("div",{class:"search_center_div_left_new search_center_general_display_flex search_center_add_category_bottom",id:"div_custom_pq_text"}).inject(A.divCustomPQ);N.setStyle("margin-top","20px"),e.create("p",{class:"search_center_text_heading",text:_.get("Standard Predefined Queries")}).inject(N),A.divStandardPQ=e.create("div",{class:"scc_tagsDisplay_div",id:"search-center-standard-pq"}).inject(t);var P=new y,j=new C({dataModelSet:P}),W=[{text:"Select All",customHeader:{updateContent(){A.customdataGridView.layout.columns[0].text="Select All ("+A._selectedPQs.length+")"}},children:[{text:"PQ",dataIndex:"PQ"},{text:"Abbreviations",dataIndex:"Abbreviations"}]}];A.dataGridView=new b({treeDocument:j,columns:W,showRowIndexFlag:!1,showSelectionCheckBoxesFlag:!0,maxVisibleRowCount:10,showOutlineFlag:!0,defaultColumnDef:{typeRepresentation:"string",height:"auto"}}).inject(A.divStandardPQ),A.dataGridView.elements.container.addClassName("pq-grid-container"),A.dataGridView.layout.setColumnWidth("PQ",200),D.mask(A.divStandardPQ),x.fetchPQs().then(function(e){A._stdPQ=x.getStdPQs(),A._allPQ=x.getAllPQs();let t=[];A._stdPQ.forEach(function(e){let a={id:e.id,Abbreviations:e.abbreviations,PQ:e.title,value:e.value};t.push(a)}),j.prepareUpdate();for(var a=0,r=t.length;a<r;a++){var n=t[a],i=v.createTreeNodeDataModel(P,{label:n.title,grid:n});j.addChild(i)}j.expandAll(),j.pushUpdate(),D.unmask(A.divStandardPQ)},function(){D.unmask(A.divStandardPQ),console.log("_getServiceURL for 3DSpace FAILED"),reject("_getServiceURL for 3DSpace FAILED")}),A._selectedPQs=[],A.dataGridView.getNodesXSO().onPostAdd(function(e){e.forEach(function(e){let t={title:e.getAttributeValue("PQ"),abbreviations:e.getAttributeValue("Abbreviations"),id:e.getAttributeValue("id"),value:e.getAttributeValue("value")};A.onItemSelected(t,!1),p.enableButtons()})}),A.dataGridView.getNodesXSO().get(function(e){e.length}),A.dataGridView.getNodesXSO().onPostRemove(function(e){e.forEach(function(e){let t={title:e.getAttributeValue("PQ"),abbreviations:e.getAttributeValue("Abbreviations"),id:e.getAttributeValue("id"),value:e.getAttributeValue("value")};A.onItemUnselected(t,!1),p.enableButtons()})}),!1===A.SelectAvailPqON.checkFlag?(A.divStandardPQ.addClassName("search_center_disable"),A.divCustomPQ.addClassName("search_center_disable"),l.addClassName("search_center_disable")):(A.divStandardPQ.removeClassName("search_center_disable"),A.divCustomPQ.removeClassName("search_center_disable"),l.removeClassName("search_center_disable")),A.SelectAvailPqON.addEventListener("change",function(){p.enableButtons(),!1===A.SelectAvailPqON.checkFlag?(A.divStandardPQ.addClassName("search_center_disable"),A.divCustomPQ.addClassName("search_center_disable"),l.addClassName("search_center_disable")):(A.divStandardPQ.removeClassName("search_center_disable"),A.divCustomPQ.removeClassName("search_center_disable"),l.removeClassName("search_center_disable"))}.bind(this))},onItemSelected:function(e,t){if(!1===t){let t=!1;A._selectedPQs.forEach(function(a){a.id===e.id&&(t=!0)}),!1===t&&A._selectedPQs.push(e)}if(!0===t){let t=!1;A._selectedCustomPQs.forEach(function(a){a.id===e.id&&(t=!0)}),!1===t&&A._selectedCustomPQs.push(e)}},onItemUnselected:function(e,t){if(A._selectedPQs.length>0&&!1===t)for(var a=0;a<A._selectedPQs.length;a++)A._selectedPQs[a].id===e.id&&A._selectedPQs.splice(a,1);if(A._selectedCustomPQs.length>0&&!0===t)for(a=0;a<A._selectedCustomPQs.length;a++)A._selectedCustomPQs[a].id===e.id&&A._selectedCustomPQs.splice(a,1)},getTabInputsToStore:function(){return{all_pqs:A._allPQ,selected_pqs:A._selectedPQs,pq_filter_display:A.SelectAvailPqON.checkFlag,selected_custom_pqs:A._selectedCustomPQs}},onResetTab:function(e){let a;if(a=t.is(e,"string")?JSON.parse(e):e,A.searchPQComboBox.currentValue=_.get("Show_all"),t.is(a)){let e;if(a.hasOwnProperty("pqs")){let r=(e=a.pqs).pq_filter_display;if(t.is(r)&&(A.SelectAvailPqON.checkFlag=r),e.selected_pqs){if(A._savedSelectedPQs=[],A._selectedPQs=[],e.selected_pqs)for(let t=0;t<e.selected_pqs.length;t++)A._savedSelectedPQs.includes(e.selected_pqs[t])||A._savedSelectedPQs.push(e.selected_pqs[t]),A._selectedPQs.includes(e.selected_pqs[t])||A._selectedPQs.push(e.selected_pqs[t])}else x.fetchPQs().then(function(e){A._stdPQ=x.getStdPQs(),A._allPQ=x.getAllPQs(),A._savedSelectedPQs=[],A._selectedPQs=[];for(let e=0;e<A._stdPQ.length;e++){let t=!1;A._savedSelectedPQs.forEach(function(a){a.id===A._stdPQ[e].id&&(t=!0)}),!1===t&&A._savedSelectedPQs.push(A._stdPQ[e])}});if(e.selected_custom_pqs){if(A._savedSelectedCustomPQs=[],A._selectedCustomPQs=[],e.selected_custom_pqs)for(let t=0;t<e.selected_custom_pqs.length;t++)A._savedSelectedCustomPQs.includes(e.selected_custom_pqs[t])||A._savedSelectedCustomPQs.push(e.selected_custom_pqs[t]),A._selectedCustomPQs.includes(e.selected_custom_pqs[t])||A._selectedCustomPQs.push(e.selected_custom_pqs[t])}else x.fetchPQs().then(function(e){A._CustomPQs=x.getAllCustomPQs(),A._savedSelectedCustomPQs=[],A._selectedCustomPQs=[];for(let e=0;e<A._CustomPQs.length;e++){let t=!1;A._savedSelectedCustomPQs.forEach(function(a){a.id===A._CustomPQs[e].id&&(t=!0)}),!1===t&&A._savedSelectedCustomPQs.push(A._CustomPQs[e])}});x.fetchPQs().then(function(t){A.dataGridView.getTreeDocument().search({match:function(t){t.nodeModel.unselect(),e.selected_pqs?e.selected_pqs.length>0&&e.selected_pqs.forEach(function(e){t.nodeModel.getAttributeValue("id")===e.id&&t.nodeModel.select()}):t.nodeModel.select()}}),A.customdataGridView.getTreeDocument().search({match:function(t){t.nodeModel.unselect(),e.selected_custom_pqs?e.selected_custom_pqs.length>0&&e.selected_custom_pqs.forEach(function(e){t.nodeModel.getAttributeValue("id")===e.id&&t.nodeModel.select()}):t.nodeModel.select()}}),p.disableButtons()})}else x.fetchPQs().then(function(e){A.SelectAvailPqON.checkFlag=!1,A.dataGridView.getTreeDocument().search({match:function(e){e.nodeModel.select()}}),A.customdataGridView.getTreeDocument().search({match:function(e){e.nodeModel.select()}}),p.disableButtons()})}else{A.SelectAvailPqON.checkFlag=!1,A.dataGridView.getTreeDocument().search({match:function(e){e.nodeModel.select()}}),A.customdataGridView.getTreeDocument().search({match:function(e){e.nodeModel.select()}})}p.removeMask(widget.body)}};return A}),define("DS/SearchControlCenter/scripts/SearchControlCenterInfra",["UWA/Element","UWA/Core","UWA/Promise","DS/UIKIT/Input/Button","DS/UIKIT/Accordion","DS/WAFData/WAFData","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/3DSearchControl_UIsettings.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchControlCenterFetchService","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/UIKIT/Alert","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchPreferences","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_,p,g,m,f,C,v){"use strict";return{url3DSpacepromise:a.deferred(),CSVpromise:a.deferred(),initInfraPromise:a.deferred(),_postURL:null,_listOfFacets:[],_listOfFacetNames:[],uiRefresh:function(){this._listOfFacetNames.length>0?this._OnResetClick():this.init()},initInfra:function(){var e=this,a={onComplete:function(){var a={tenantID:_.platformID,key:"SCC_UI"};h.getSearchSettings(a).then(function(a){var r;r=t.is(a,"string")?JSON.parse(a):a,p.setSettingsJSON(r),e.initInfraPromise.resolve()},function(t){v.unmask(widget.body),e.initInfraPromise.reject();var a=_.createWdgAlert();a.inject(widget.body,"top");var r=o.get("SearchInfra.failuremsg");r+=t,a.add({className:"error",message:r})})},onFailure:function(){e.initInfraPromise.reject(),v.unmask(widget.body),l.log("Login fails !!")}};return a.tenantID=widget.getValue("x3dPlatformId"),t.is(a.tenantID)&&""!==a.tenantID||(a.tenantID="OnPremise"),g.getServiceUrl({serviceName:"3DSearch",platformId:a.tenantID,onComplete:function(e){var r;t.is(e,"array")?r=e[0].url:t.is(e,"string")&&(r=e),t.is(r)&&(a.fedSearchURL=r),t.is(a.tenantID,"string")&&(d.login(a),_.setPlatformID(a.tenantID))},onFailure:function(e){var t=_.createWdgAlert();t.inject(widget.body,"top");var a=o.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error",message:a})}}),g.getPlatformConfig({serviceName:"3DSpace",onComplete:function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.platformId===a.tenantID){_.setPlatformDisplayName(r.displayName);break}}}}),this.initInfraPromise.promise},getDefaultPredicates:function(){var e=[],a=!1,r=C.getLocalStorageItem("TagNavigator-simplifiedTagger");return t.is(r)&&"true"===r&&(a=!0),a&&e.push({uri:"computedCountryInfo"}),e.push({uri:"ds6w:dataSource"}),e.push({uri:"ds6w:type"}),a||e.push({uri:"ds6w:category"}),e.push({uri:"ds6w:modified"}),a&&e.push({uri:"ds6w:created"}),e.push({uri:"ds6w:lastModifiedBy"}),e.push({uri:"ds6w:responsible"}),e},check3DSpaceAvailablity:function(){var e=widget.getValue("x3dPlatformId");t.is(e)&&""!==e||(e="OnPremise");var a=this;return g.getServiceUrl({serviceName:"3DSpace",platformId:e,onComplete:function(e){if(t.is(e))a.url3DSpacepromise.resolve(e);else{var r=new Error("no platform");a.url3DSpacepromise.reject(r)}},onFailure:function(){var e=new Error("no platform");a.url3DSpacepromise.reject(e)}}),this.url3DSpacepromise.promise},checkCSVAvailability:function(){var e=this;return f.getGrantedRoles(function(t){for(var a=!1,r=0;r<t.length;r++)if("CSV"===t[r].id){a=!0;break}if(a)e.CSVpromise.resolve(t);else{var n=new Error("no access");e.CSVpromise.reject(n)}}),this.CSVpromise.promise}}}),define("DS/SearchControlCenter/Views/SearchControlCenterLayoutView",["UWA/Core","UWA/Class/View","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Alert","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchControlCenterFetchService","DS/SearchControlCenter/scripts/SearchControlCenterInfra","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SearchControlCenter/scripts/SearchcontrolCenterModel","text!DS/SearchControlCenter/assets/SearchControlCenter_defaults.json","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/WAFData/WAFData","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNResultUX/utils/ExternalComponentHelpers","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCPQManager"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_,p,g,m,f,C){"use strict";var v=t.extend({tagName:"div",className:"generic-detail",_postURL:null,_sccDefaultSettings:null,_containerSpan:null,init:function(e){e&&(this.model=e.model),this._parent.call(this,e),i.getPredicatesList(),i.loadDataSourcesandClasses(),C.fetchPQs()},setup:function(t){e.log("SCCLayoutView::setup!"),e.log(t)},render:function(){e.log("SCCLayoutView::render");var t=this;t._containerSpan=new e.Element("div",{class:"search_center_scroll",id:"search-control-center-general"}),t._containerSpan.inject(t.container),t._containerSpan.classList.add("search_center_container"),f.mask(widget.body),require([t.model._attributes.facetJS],function(e){e.onRenderFacet(t._containerSpan);let a={facetID:t.model._attributes.id};var r=i.getSettingsJSONFromTabName(a);e.onResetTab(r),i.disableButtons()});var a=new e.Element("div",{class:"search-control-buttonContainer"});a.inject(t.container);var n=new r({id:"id_in_app_apply",value:h.get("ApplyButton.title"),className:"default  primary in_app_search_center_btn",events:{onClick:function(){t._OnApplyClick(!1),p.log("inside _OnApplyClick() ")}}}).inject(a,"bottom"),s=new r({id:"id_in_app_cancel",value:h.get("CancelButton.title"),className:"default in_app_search_center_btn",events:{onClick:function(){t._OnCancelClick(),p.log("inside _OnCancelClick() ")}}}).inject(a);new r({id:"id_in_app_restore",value:h.get("RestoreButton.title"),className:"default in_app_search_center_btn search_center_button_right_margin",events:{onClick:function(){t._OnResetClick(),p.log("inside _OnResetClick() ")}}}).inject(a);return i.updateButtons(n,s),i.disableButtons(),this},_OnCancelClick:function(){i.reSetButtonStatus();var e=this;require([e.model._attributes.facetJS],function(t){var a={facetID:e.model._attributes.id},r=i.getSettingsJSONFromTabName(a);t.onResetTab(r),i.disableButtons()})},_OnApplyClick:function(t){i.reSetButtonStatus();var a=this,r=t;require([a.model._attributes.facetJS],function(t){var n=t.getTabInputsToStore();if(e.is(n)){var o=a.model._attributes.id,d={};"SearchControl_SearchTypes"===o?d=n:d[o]=n,l.updateSettingsJSON(d)}i.disableButtons(),c.getServiceUrl({serviceName:"3DSpace",platformId:i.platformID,onComplete:function(t){if(e.is(t,"string")){v._postURL=t+"/resources/SNAPI/infra_services/searchsettings?tenant="+i.platformID;var n=null;r?(n=a._sccDefaultSettings,!0!==g.getOption("allowEnterpriseDictionaryModification")&&(n.enterprise_ontology=l.gateSettingsJSON().enterprise_ontology)):n=l.gateSettingsJSON();var o={timeout:5e4,method:"POST",data:JSON.stringify(n),type:"json",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(){if(r){a._updateMemoryModel(),(t=i.createWdgAlert()).inject(widget.body,"top");var e=h.replace(h.get("SearchInfra.restoreToDefaultsuccessmsg"),{tenant_name:i.platformDisplayName});t.add({className:"success applyChangesAlert",message:e})}else{var t;s._searchControlCenterSettingsJSONFromDB=l._searchControlCenterSettingsJSON,(t=i.createWdgAlert()).inject(widget.body,"top");e=h.replace(h.get("SearchInfra.successmsg"),{tenant_name:i.platformDisplayName});t.add({className:"success applyChangesAlert",message:e})}a._updateUI()},onFailure:function(e){if(r){(a=i.createWdgAlert()).inject(widget.body,"top");var t=h.get("SearchInfra.restoreToDefaultfailuremsg");t+=e,a.add({className:"error applyChangesAlert",message:t})}else{var a;(a=i.createWdgAlert()).inject(widget.body,"top");t=h.get("SearchInfra.failuremsg");t+=e,a.add({className:"error applyChangesAlert",message:t})}},onTimeout:function(e){var t=i.createWdgAlert();t.inject(widget.body,"top");var a=h.get("SearchInfra.timeoutmsg");a+=e,t.add({className:"error applyChangesAlert",message:a})}};require(["DS/SNInfraUX/SearchSettings"],function(e){(e.getOption("ODTLogs")||e.getOption("ODTLogs-SCCSettings"))&&p.warn("ODTLogs-SCCSettings:"+JSON.stringify(o))}),_.authenticatedRequest(v._postURL,o)}},onFailure:function(e){var t=i.createWdgAlert();t.inject(widget.body,"top");var a=h.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})})},_OnResetClick:function(){var t=this;f.modal({title:h.get("SearchInfra.restoreToDefaultHeader"),content:h.replace(h.get("SearchInfra.restoreToDefaultConfirmationmsg"),{tenant_name:i.platformDisplayName}),visibleFlag:!0,CB:[{buttonKind:"YES",label:h.get("SearchInfra.yesButton"),function:()=>{t._sccDefaultSettings=JSON.parse(d);let a=t._sccDefaultSettings.attribute_custo;a["ds6w:type"]=[];var r=a["ds6w:type"];let n=t._getdefault3DSearchPredicate();r.push(n),e.is(t._sccDefaultSettings)&&t._OnApplyClick(!0),f.destroyModal()}},{buttonKind:"cancel",label:h.get("SearchInfra.noButton")}]})},_updateMemoryModel:function(){var e=this;e._sccDefaultSettings&&(l.setSettingsJSON(e._sccDefaultSettings),s._searchControlCenterSettingsJSONFromDB=e._sccDefaultSettings,require([e.model._attributes.facetJS],function(t){var a={facetID:e.model._attributes.id},r=i.getSettingsJSONFromTabName(a);t.onResetTab(r),i.disableButtons()}))},_updateUI:function(){let t=this;require([t.model._attributes.facetJS],function(a){if(e.is(a)&&e.is(a.onUpdateUI,"function")){let e=t.model._attributes.id;a.onUpdateUI(e)}})},_getdefault3DSearchPredicate:function(){let e={};return e.source="AllDataSourcesandTypes",s.getAppWisePredicates(m.getSearchAppId(),!0).then(t=>{let a=[];t.hasOwnProperty("preferred_predicates")&&t.preferred_predicates.length>0&&(a=t.preferred_predicates),null!=a&&(e.predicates=a)}),e},destroy:function(){this.stopListening(),this._parent.apply(this,arguments)}});return v}),define("DS/SearchControlCenter/scripts/SearchControlCenterWidget",["UWA/Core","UWA/Class/Model","UWA/Class/Collection","UWA/Class/View","WebappsUtils/WebappsUtils","DS/W3DXComponents/Skeleton","DS/W3DXComponents/ContentSet","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/SearchControlCenter/Views/SearchControlCenterLayoutView","DS/SearchControlCenter/scripts/SearchControlCenterInfra","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,a,r,n,i,s,o,c,l,d,u){"use strict";var h={bones:null,height:"auto",licenceAlert:null,unMaximizedHeight:null,generalViewOpts:{contents:{useInfiniteScroll:!1,usePullToRefresh:!1}},setBodyHeight:function(e){e&&("auto"!==e&&(e+="px"),widget.body.setStyle("height",e))},buildSkeleton:function(){var t=c;return new i({domains:{collection:"DS/SearchControlCenter/Collection/SearchControlCenterFacetListCollection",view:null,swipe:!1,viewOptions:h.generalViewOpts,idCardOptions:{actions:function(){return null},facets:function(){return[{text:"Edit",icon:"tools",handler:i.getRendererHandler(t)}]}}}},{root:"domains",startRoute:"/domains/SearchControl_General/?facet=0",useRootChannelView:!1,responsiveTrigger:function(){var e=widget.getView().type;return"channel"===widget.getValue("view")&&("maximized"===e||"fullscreen"===e)},events:{onItemClick:function(t){e.log(t)},onSlide:function(t,a){e.log(t),e.log(a)}}})},onLoad:function(){function t(e){var t=d.createWdgAlert();t.options.autoHide=!1,t.inject(widget.body,"top"),t.add({className:"warning",message:e})}h.bones&&h.bones.destroy(),d.putMask(widget.body),l.check3DSpaceAvailablity(),l.checkCSVAvailability(),l.initInfra().then(function(a){l.check3DSpaceAvailablity().then(function(a){l.checkCSVAvailability().then(function(t){var a="";a=d.getPlatformID(),e.is(a)&&""!==a||(a=e.is(widget.getValue("x3dPlatformId"))?widget.getValue("x3dPlatformId"):"OnPremise",d.setPlatformID(a)),widget.setTitle(a),o.getServiceUrl({serviceName:"3DSpace",platformId:a,onComplete:function(e){d.setURL(e),h.bones=h.buildSkeleton(),widget.body.setContent(h.bones.render())},onFailure:function(e){var t=d.createWdgAlert();t.inject(widget.body,"top");var a=u.get("SearchInfra.URLBuildError");a+=e,t.add({className:"error applyChangesAlert",message:a})}})},function(e){t(u.get("html.license"))})},function(e){t(u.get("html.platform"))}),d.removeMask(widget.body)},function(e){t(u.get("html.InitInfra")),d.removeMask(widget.body)})},onRefresh:function(e){this.onLoad()},onViewChange:function(e){}};return h}),define("DS/SearchControlCenter/scripts/SCCSynonymsDictonary",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/UIKIT/Input/File","DS/UIKIT/Input/Button","DS/SNResultUX/utils/ExternalComponentHelpers","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SearchControlCenter/scripts/SearchControlCenterServices"],function(e,t,a,r,n,i,s,o){"use strict";return{importButton:null,fileChooser:null,checkboxActivateSynonyms:null,jsonReader:null,newSynonymsToStore:null,storedSynonyms:null,onRender:function(c){var l=this,d=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-search_synonyms-text"}).inject(c);e.create("p",{class:"search_center_text_heading",text:s.get("GeneralTab.SearchSynonyms.title")}).inject(d);var u=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-abbreviated-count"}).inject(c),h=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-synonyms-toggle"}).inject(u);this.checkboxActivateSynonyms=new a({type:"switch",label:s.get("GeneralTab.SearchSynonyms.checkbox.label"),className:"primary",touchMode:!0}).inject(h),this.checkboxActivateSynonyms.addEventListener("change",function(){!t.is(l.storedSynonyms)&&l.checkboxActivateSynonyms.checkFlag||o.enableButtons(),l._setBrowseFileState(l.checkboxActivateSynonyms.checkFlag)},!1);var _=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(u);i.tooltip(_,{position:"top",shortHelp:s.get("GeneralTab.SearchSynonyms.checkbox.info")}),this.divFileChooserSpan=e.create("div",{class:"search_center_margin search_center_disable",id:"div-file-chooser-span"}).inject(c);var p=e.create("div",{class:"",id:"div-file-chooser-lable"}).inject(this.divFileChooserSpan),g=(e.create("p",{class:"search_center_text",text:s.get("GeneralTab.SearchSynonyms.FileChooser.label"),styles:{}}).inject(p),e.create("div",{class:"search_center_div_left search_center_div_uidisplay search_center_general_display_flex",id:"search-type-display"}).inject(this.divFileChooserSpan)),m=e.create("div",{class:" ",id:"search-synonyms-file-chooser",styles:{width:"85%",position:"relative"}}).inject(g);this.fileChooser=new r({multiple:!1,buttonBefore:!1,name:"file-input",buttonClassName:"default",placeholder:s.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.new"),buttonText:s.get("GeneralTab.SearchSynonyms.FileChooser.buttonText"),events:{onChange:this._onFileInputChange.bind(this)}}).inject(m);var f=e.create("div",{class:"",id:"search-synonyms-file-import",styles:{"margin-left":"5px","margin-right":"5px",width:"15%",position:"center"}}).inject(g),C=this;this.importButton=new n({id:"import_button_id",value:s.get("GeneralTab.SearchSynonyms.FileChooser.validate"),className:"default",disabled:!0,events:{onClick:function(){C._onImportClick()}}}).inject(f)},_onFileInputChange:function(e){var a=e.target.files[0],r=a.name;t.is(r,"string")&&("json"===r.slice(2+(r.lastIndexOf(".")-1>>>0))?t.is(this.storedSynonyms)?this._confirmAndReadFileAsText(a):this._readFileAsText(a):(this.importButton.disable(),this.fileChooser.clear(),this._showAlert(s.get("GeneralTab.SearchSynonyms.errors.JsonOnly"),"error")))},_onImportClick:function(){try{this._isValidJson(this.jsonReader)&&(o.enableButtons(),this._showAlert(s.get("GeneralTab.SearchSynonyms.success.ValidJson"),"success"))}catch(e){this.fileChooser.clear(),this._showAlert(e.message,"error")}this.importButton.disable()},_isValidJson:function(e){var a=null;if(!t.is(e.result))throw new Error(s.get("GeneralTab.SearchSynonyms.errors.InvalidJson"));try{a=JSON.parse(e.result)}catch(e){throw new Error(s.get("GeneralTab.SearchSynonyms.errors.ParsingError"))}if(!t.is(a,"object"))throw new Error(s.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"));return Object.keys(a).forEach(function(e){if(!t.is(a[e],"array"))throw new Error(s.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"));a[e].forEach(e=>{if(!t.is(e,"string"))throw new Error(s.get("GeneralTab.SearchSynonyms.errors.UnsupportedFormat"))})}),this.newSynonymsToStore=a,!0},updateTabInputsToStore:function(e){let a={};a.activateSnonyms=this.checkboxActivateSynonyms.checkFlag,a.synonyms=t.is(this.newSynonymsToStore)?this.newSynonymsToStore:this.storedSynonyms,e.search_synonyms=a},onResetTab:function(e){if(t.is(e)){var a=e.activateSnonyms;this.storedSynonyms=e.synonyms,this.checkboxActivateSynonyms.checkFlag=a,t.is(this.storedSynonyms)&&(this.fileChooser.elements.textfield.placeholder=s.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.override"))}else this.fileChooser.elements.textfield.placeholder=s.get("GeneralTab.SearchSynonyms.FileChooser.placeholder.new"),this.checkboxActivateSynonyms.checkFlag=!1,this.storedSynonyms=null;this.fileChooser.clear(),this.importButton.disable()},_showAlert:function(e,t){var a=o.createWdgAlert();a.inject(widget.body,"top"),a.add({className:t,message:e})},_readFileAsText:function(e){"undefined"!=typeof FileReader&&(this.jsonReader=new FileReader,this.jsonReader.readAsText(e),this.importButton.enable())},_confirmAndReadFileAsText:function(e){var t=this;i.modal({title:s.get("GeneralTab.SearchSynonyms.warning.header"),content:s.get("GeneralTab.SearchSynonyms.warning.body"),CB:[{buttonKind:"YES",label:s.get("GeneralTab.SearchSynonyms.warning.button.Yes"),function:()=>{t._readFileAsText(e),i.destroyModal()}},{buttonKind:"no",label:s.get("GeneralTab.SearchSynonyms.warning.button.No"),function:()=>{t.fileChooser.clear(),t.importButton.disable(),i.destroyModal()}}]})},_setBrowseFileState:function(e){!0===e?this.divFileChooserSpan.removeClassName("search_center_disable"):this.divFileChooserSpan.addClassName("search_center_disable")}}}),define("DS/SearchControlCenter/scripts/ControlledVocabulary/ControlledVocabularyServices",["UWA/Core","UWA/Promise","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/WAFData/WAFData","DS/SNInfraUX/SearchUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices"],function(e,t,a,r,n,i,s){"use strict";return{_tenantOntologies:{},_tenantCommunities:{},_fetchSwymCommunities:function(e,t){var a=this;let r=i.getPlatformID(),n=this._tenantCommunities[r];return n||(n=new Promise(function(e){a._apiCalltoFetchSwymCommunities(function(t){e(t)},function(t){e([])})}),this._tenantCommunities[r]=n),n},_apiCalltoFetchSwymCommunities:function(t,a){let o=i.getPlatformID();s.getServiceUrl({serviceName:"3DSearch",platformId:o,onComplete:function(i){!function(i){var s={label:"3DSearch-"+n.getUserId()+"-"+(new Date).getTime(),query:'[ds6w:type]:"swym:Community"',with_nls:!1,with_synthesis:!1,with_synthesis_hierarchical:!1,with_indexing_date:!1,select_file:[],source:["swym"],select_predicate:["ds6w:label"],tenant:o,nresults:1e3,refine:{},specific_source_parameter:{}},c={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:e.Json.encode(s),url:i+"/search",onComplete:function(e){try{e=JSON.parse(e)}catch(t){e=t}return t(e.results)},onFailure:function(e){try{e=JSON.parse(e)}catch(t){e=t}return a(e)}};r.authenticatedRequest(c.url,c)}(i)},onFailure:function(){a("FAILED to retrieve 3DSearch url for tenant")}})},_fetchOntologies:function(){let e=this,t=i.getPlatformID();var a=this._tenantOntologies[t];return a||(a=new Promise(function(t){e._apiCalltoFetchOntologies(function(e){t(e)},function(e){t([])})}),this._tenantOntologies[t]=a),a},_apiCalltoFetchOntologies:function(e,t){var a=i.getPlatformID();s.getServiceUrl({serviceName:"ontology",platformId:a,onComplete:function(a){!function(a){var n={method:"GET",headers:{Accept:"application/json"},url:a+"/3drdfpersist/resources/v1/ontologies",onComplete:function(t){try{t=JSON.parse(t)}catch(e){t=e}return e(t)},onFailure:function(e){try{e=JSON.parse(e)}catch(t){e=t}return t(e)}};r.authenticatedRequest(n.url,n)}(a)},onFailure:function(){resolve([])}})}}}),define("DS/SearchControlCenter/scripts/ControlledOntology/OntologyDatasetsHelpers",["UWA/Core","UWA/Class","UWA/Class/Debug","UWA/Promise","DS/WAFData/WAFData","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/Api/SearchApi","DS/SNInfraUX/SearchRessources","DS/SNInfraUX/SearchLogin","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/Logger","DS/i3DXCompassPlatformServices/i3DXCompassRegistryClient","DS/SNInfraUX/SearchSettings","DS/SearchControlCenter/scripts/SearchControlCenterServices","text!DS/SearchControlCenter/assets/Ontology_Datasets.json","text!DS/SearchControlCenter/assets/Ontology_Datasets_user.json"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_,p,g,m,f){"use strict";let C=t.singleton(a,{_treeDocument:null,_distributionServiceURLPromise:null,_ontologyServiceURLPromise:null,_urldistribution:"/3drdfpersist/governance/v3/datasets/",_distribution:"/distributions?mask=standard",_urlontology:"/3drdfklet/resources/v2/ontologies/concepts?recurse=all&relation=broaderOf&offset=0&applicativeId=",_testQA:p.getOption("allowEnterpriseDictionaryModification"),init:function(){this._distributionServiceURLPromise=C._getSericeURLPromise("lakegovernance"),this._ontologyServiceURLPromise=C._getSericeURLPromise("ontology"),this._treeDocument=new s({useAsyncPreExpand:!0,shouldAcceptDrag:function(){return!1},shouldAcceptDrop:function(){return!1}})},buildSearchResults:function(t){let a=this;e.is(t)&&e.is(t.onComplete,"function")&&(e.is(a._treeDocument)&&e.is(a._treeDocument.destroy,"function")&&(a._treeDocument.destroy(),a._treeDocument=null),a._treeDocument=new s({useAsyncPreExpand:!0,shouldAcceptDrag:function(){return!1},shouldAcceptDrop:function(){return!1}}),h.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_buildSearchResults"),a._getResultPromise().then(function(r){if(h.log("response OK"),a._treeDocument.prepareUpdate(),r.length>0){let t=JSON.parse(r);e.is(t.datasets)&&t.datasets.forEach(function(t){if("dataset"===t["@type"]){let r={},n=!1,i="",s=t.publisher.substring(t.publisher.indexOf(":")+1),c=new Date(t.modificationDate).toDateString();a._getPublisherInfo(s).then(function(s){if(e.is(s.results)&&s.results.forEach(function(e){e.attributes.forEach(function(e){"ds6w:label"===e.name&&(i=e.value)})}),r.id=t["@id"],r.label=t.title+" | "+c+" | "+i,r.title=t.title,r.description=t.description,r.tooltip=t.description,r.publisher=i,r.modificationdate=t.modificationDate,!0===(n=!0)){let e=new o(r);a._treeDocument.addRoot(e)}})}})}a._treeDocument.pushUpdate(),t.onComplete.call(void 0,a._treeDocument),h.groupEnd()},function(){if(h.log("response KO"),!0===a._testQA){require(["text!DS/SearchControlCenterPO/assets/DataSetOntology_tst.json"],function(r){let n=JSON.parse(r);if(e.is(n,"array")){let r=n.length;a._treeDocument.prepareUpdate();for(let e=0;e<r;e++){let t=new o({id:n[e].dataset,label:n[e].datasetTitle});a._treeDocument.addRoot(t)}a._treeDocument.pushUpdate(),e.is(t.onFailure,"function")&&t.onFailure.call(void 0,a._treeDocument)}})}h.groupEnd()}))},setselected:function(t){if(!e.is(t,"array")||!e.is(this._treeDocument))return;let a=!1;this._treeDocument.prepareUpdate();let r=t.length,n=this._treeDocument.getRoots(),i=n.length;for(let s=0;s<r;s++){let r=t[s],o=r&&r.datasetTitle;if(e.is(o)&&o.length)for(let e=0;e<i;e++){let t=n[e];t&&t._options.label===o&&(t.select(),e=i,a=!0)}}return this._treeDocument.pushUpdate(),a},getConceptsOfConcept:function(t){if(e.is(t)&&e.is(t.onComplete,"function")&&e.is(t.applicativeId)){let a=this;C._getontologySericeURLPromise().then(function(r){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(a,r){let n=JSON.parse(a);e.is(n)&&t.onComplete.call(void 0,n)},onFailure:function(e){h.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::getConceptsOfConcept onFailure: ",e)}},s=r+a._urlontology+t.applicativeId;n.authenticatedRequest(s,i)},function(){reject("Failed to retireve distribution service url")})}},getDataSetStructure:function(t){let a=this;if(h.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::getDataSetStructure"),!e.is(a._treeDocument)||!e.is(t)||!e.is(t.onComplete,"function"))return void h.groupEnd();let r=a._treeDocument.getXSO().get(),n=r.length;if(n){let i,s,o,c=r[n-1];null!=(i=e.is(c._options.id)?c._options.id:void 0)&&(s=i.replace("<",""),o=s.replace(">",""));let l={id:c._options.id,object:c._options,onComplete:function(a){if(e.is(a,"object")){let e={dataset:c._options.id,applicativeId:o,datasetTitle:c._options.title,"session@id":a["@id"],sessionTitle:a.title,publisher:c._options.publisher,modificationdate:c._options.modificationdate,label:c._options.label};t.onComplete.call(void 0,e),h.log("onComplete: ",e),h.groupEnd()}},onFailure:function(){if(!0===a._testQA){require(["text!DS/SearchControlCenterPO/assets/DataSetOntology_tst.json"],function(a){let r=JSON.parse(a);for(let a=0;a<r.length;a++){let n=r[a];if(n.datasetTitle===c._options.label){e.is(t.onFailure,"function")&&t.onFailure.call(void 0,n),h.log("onFailure: ",n);break}}})}h.groupEnd()}};a._querydistributions(l)}else t.onComplete.call(void 0,void 0),h.groupEnd()},clean:function(){e.is(this._treeDocument)&&e.is(this._treeDocument.removeRoots,"function")&&this._treeDocument.removeRoots(),e.is(this._treeDocument)&&e.is(this._treeDocument.destroy,"function")&&(this._treeDocument.destroy(),this._treeDocument=null)},destroy:function(){this._parent(),e.is(this._treeDocument)&&e.is(this._treeDocument.destroy,"function")&&(this._treeDocument.destroy(),this._treeDocument=null)},_getResultPromise:function(){let t=this;return new r(function(a,r){h.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_getResultPromise");let i=t._getTenant();require(["DS/UWPClientCode/PublicAPI","DS/PlatformAPI/PlatformAPI"],function(t,s){var o;if(t.getApplicationConfiguration("app.urls.registry")||s.getApplicationConfiguration("app.urls.registry"))o=t.getApplicationConfiguration("app.urls.registry")||s.getApplicationConfiguration("app.urls.registry");else{o=`${t.getApplicationConfiguration("app.urls.myapps")||s.getApplicationConfiguration("app.urls.myapps")}/resources/AppsMngtRegistry/`}o?(h.log("registryUrl found, registryUrl="+o),_.getServicesByPlatform({platforms:[i],services:["lakegovernance"],config:{url:o}}).then(function(t){if(h.log("i3DXCompassRegistryClient.getServicesByPlatform returns: "+JSON.stringify(t)),Array.isArray(t)&&t.length>0&&Array.isArray(t[0].services)&&t[0].services.length>0&&t[0].services[0].url){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(t){a(e.extend(t))},onFailure:function(e){r(e)}},s=t[0].services[0].url+"/3drdfpersist/governance/v3/datasets";n.authenticatedRequest(s,i)}else h.error("i3DXCompassRegistryClient.getServicesByPlatform did not provide data in expected format"),a([])},function(){h.error("i3DXCompassRegistryClient.getServicesByPlatform FAILED"),a([])})):(h.error("FAILED to retrieve registryUrl"),a([]))})})},_getPublisherInfo:function(t){let a=this;return new r(function(r,n){h.groupCollapsed("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_getPublisherInfo");let i=e.extend(a._buildSearchQuery(t),{onComplete:function(t){r(e.extend(t))},onFailure:function(e){n(e)}});h.log("searchOptions:�",i),c.search(i),h.groupEnd()})},_buildSearchQuery:function(t){let a=this,r={usersgroup:{additional_query:' AND ([ds6w:identifier]:"'+t+'" OR [ds6w:resourceUid]:"'+t+'")'},swym:{additional_query:' AND ( resourceid:"iam:'+t+'" OR [ds6w:resourceUid]:"'+t+'")'}},n=JSON.parse(f);if(e.is(n,"object")){let e=a._getTenant(),i=n.nresults?n.nresults:p.getOption("max_selection_for_selectall",{tenant:e});n.label="3DSearch-"+t+"-"+(new Date).getTime(),n.tenant=e,n.nresults=i,n.specific_source_parameter=r}return n},_querydistributions:function(t){if(h.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_querydistributions"),!e.is(t)||!e.is(t.id))return;let a=this;C._getdistributionSericeURLPromise().then(function(r){let i={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},onComplete:function(a,r){let n=JSON.parse(a);if(e.is(n,"object")){let a=n.distributions;if(e.is(a,"array")){let r=a.length,n=0;for(;n<r;n++){let r=a[n];e.is(r,"object")&&t.onComplete.call(void 0,r)}}}},onFailure:function(e){h.log("DS/SearchControlCenter/scripts/OntologyDatasetsHelpers::_querydistributions onFailure: ",e),t.onFailure.call(void 0,e)}},s=r+a._urldistribution+t.id+a._distribution;n.authenticatedRequest(s,i)},function(){reject("Failed to retireve distribution service url")})},_getSericeURLPromise:function(e){let t=this;return new r(function(a,r){let n=t._getTenant();i.getServiceUrl({serviceName:e,platformId:n,onComplete:function(e){e?a(e):!0===t._testQA?a(e):r()},onFailure:function(e){r(e)}})})},_getdistributionSericeURLPromise:function(){return this._distributionServiceURLPromise},_getontologySericeURLPromise:function(){return this._ontologyServiceURLPromise},_getTenant:function(){return e.is(g.platformID)?g.platformID:u.getActiveTenant()}});return C}),define("DS/SearchControlCenter/scripts/ControlledVocabulary/SCCControlledVocabulary",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SearchControlCenter/scripts/ControlledVocabulary/ControlledVocabularyServices","DS/SearchControlCenter/scripts/SearchControlCenterServices","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,s,o,c,l,d,u,h){"use strict";return{communityOntologyMapping:[],render:function(e){this._parentDiv=e,this.renderControlledSection(this._parentDiv)},getTabInputsToStore:function(){return this.communityOntologyMapping},getInputFromStore:function(e){let t=this;e&&(this.communityOntologyMapping=e.slice(0)),this.ontologies&&0===Object.keys(this.ontologies).length&&empty.constructor===Object||t.divCreatedCategoriesSection&&(t.divCreatedCategoriesSection.empty(),t.communityOntologyMapping.forEach((e,a)=>{t.renderMappingsRow(t.divCreatedCategoriesSection,e)}))},renderControlledSection:function(t){this.mainControlDivSection=e.create("div",{class:"search_center_main_div ",id:"control-vocab-main"}).inject(t);var a=e.create("div",{class:"",id:"control-vocab-title"}).inject(this.mainControlDivSection);e.create("p",{class:"control_vocab_text_heading",text:u.get("6WTagsFilter.ControlledVocab.title")}).inject(a),this.renderActivateControlVocab(this.mainControlDivSection),this.renderCommunitySection(this.mainControlDivSection)},renderActivateControlVocab:function(t){var a=this,r=e.create("div",{class:"search_center_general_display_flex search_center_margin",id:"activate-control-vocab"}).inject(t),i=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"activate-control_vocab-toggle"}).inject(r);this.checkboxActivateControlVocab=new n({type:"checkbox",label:u.get("6WTagsFilter.ControlledVocab.CheckBox.label"),className:"primary",touchMode:"true"}).inject(i);var s=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(r);s.setStyle("color","#b4b6ba"),s.addEventListener("mouseover",this._manageMouseOver,!1),s.addEventListener("mouseout",this._manageMouseOut,!1),h.popin(s,{trigger:"hover",position:"top",body:u.get("InstantSearch.Activate_Instant_Search.popover")}),this.checkboxActivateControlVocab.addEventListener("change",function(e){a.toggleDisableStateOfInputFields()})},toggleDisableStateOfInputFields:function(){1==this.checkboxActivateControlVocab.checkFlag?this.divCategoriesSection.removeClassName("search_center_disable"):this.divCategoriesSection.addClassName("search_center_disable")},renderCommunitySection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"control_vocab_category_section search_center_disable"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection),this.renderMappings(this.divCategoriesSection)},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("control_vocab_add_category_row_span"),a},_createCommunityControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new o;this.communityAutocomplete=new s({placeholder:u.get("6WTagsFilter.ControlledVocab.Community.title"),touchMode:!0,enableSearchFlag:!0,elementsTree:n,multiSearchMode:!1}).inject(r),this.communityAutocomplete.elements.container.setStyle("max-width","unset"),this.communityAutocomplete.addEventListener("change",this._onChangeCommunity.bind(this)),l._fetchSwymCommunities().then(function(e){t.is(e,"array")&&e.length?e.forEach((e,t)=>{if(e.hasOwnProperty("attributes")){let t,a;e.attributes.filter(function(e){if("internal"==e.format&&"resourceid"==e.name){let a=e.value.split(":");t=a[a.length-1]}"attribute"==e.format&&"ds6w:label"==e.name&&(a=e.value)}),n.addRoot(new c({label:a,value:t}))}}):console.log("The fed search failed")});var i=this;return this.selectedCommunity,this.communityAutocomplete.addEventListener("change",function(){i.enableAddCategoryButton()}),this.communityAutocomplete},_onChangeCommunity:function(e){if(this.communityAutocomplete.value){let e=this.communityAutocomplete.value,t=this.communityOntologyMapping.filter(function(t){return t.id==e});t&&t.length&&(this._updateCommunity=t[0].id,this.updateCategoryButton.elements.container.setStyle("display","inline-flex"),this.updateCategoryButton._disabledState=!1,this.updateCategoryButton.disabled=!1,this.addCategoryButton.elements.container.setStyle("display","none"))}else this.updateCategoryButton.elements.container.setStyle("display","none"),this.addCategoryButton.elements.container.setStyle("display","inline-flex")},_createOntologyControl:function(a){let r=this;var n=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),i=new o;return this.ontologyAutocomplete=new s({placeholder:u.get("6WTagsFilter.ControlledVocab.Ontology.title"),touchMode:!0,enableSearchFlag:!0,elementsTree:i}).inject(n),this.ontologyAutocomplete.elements.container.setStyle("max-width","unset"),this.ontologiesObj={},l._fetchOntologies().then(function(e){t.is(e,"array")&&e.length?(e.forEach((e,t)=>{"ds6wclassifier:"!==e.shortURI&&e.hasOwnProperty("label")&&(r.ontologiesObj[e.shortURI]=e.label,i.addRoot(new c({label:e.label,value:e.shortURI})))}),r.getInputFromStore()):console.log("The failure is because:"+e)}),this.ontologyAutocomplete.addEventListener("change",function(){r.enableAddCategoryButton()}),this.ontologyAutocomplete},renderDisableFreeTagging:function(t){var a=e.create("div",{class:"search_center_general_display_flex search_center_margin",id:"disable-free-tagging"}).inject(t),r=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"disable-free-tagging-toggle"}).inject(a);this.checkboxDisableFreeTagging=new n({type:"checkbox",label:u.get("6WTagsFilter.ControlledVocab.DisableFreeTagging.label"),className:"primary",touchMode:"true"}).inject(r);var i=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(a);i.setStyle("color","#b4b6ba"),i.addEventListener("mouseover",this._manageMouseOver,!1),i.addEventListener("mouseout",this._manageMouseOut,!1),h.popin(i,{trigger:"hover",position:"top",body:u.get("InstantSearch.Activate_Instant_Search.popover")})},enableAddCategoryButton:function(){this.communityAutoCompleteDiv.value&&this.ontologyAutoCompleteDiv.value&&this.ontologyAutoCompleteDiv.value.length?(this.addCategoryButton.disabled=!1,d.enableButtons()):this.addCategoryButton.disabled=!0},renderAddButtonCategoryRow:function(t){var a=e.create("div",{class:"search_center_div_uidisplay search_center_margin search_center_category_add_add",id:"add-btn-control_vocab"}).inject(t);this.addCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:u.get("InstantSearch.Category.Action.AddNewCategory")}).inject(a),this.updateCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:u.get("6WTagsFilter.ControlledVocab.UpdateButton.label")}).inject(a),this.updateCategoryButton.elements.container.setStyle("display","none"),this.addCategoryButton.getContent().addEventListener("buttonclick",this._onAddClick.bind(this)),this.updateCategoryButton.getContent().addEventListener("buttonclick",this._onAddClick.bind(this,!0))},_onAddClick:function(e){let t=this,a={type:"swym:Community"};if(this._updateCommunity){this.communityOntologyMapping.forEach(e=>{if(e.id==t._updateCommunity){if(t.ontologyAutoCompleteDiv.selectedItems.length){t.ontologyAutoCompleteDiv.value.forEach((a,r)=>{-1==e.ontologies.indexOf(a)&&e.ontologies.push(t.ontologyAutoCompleteDiv.value[r])})}e.freeInput=t.checkboxDisableFreeTagging.checkFlag}})}else a.id=t.communityAutoCompleteDiv.value,a.name=t.communityAutoCompleteDiv.selectedItems.getAttributeValue("label"),a.ontologies=t.ontologyAutoCompleteDiv.value,a.freeInput=t.checkboxDisableFreeTagging.checkFlag,t.communityOntologyMapping.push(a);console.log("The community mappings:"+JSON.stringify(t.communityOntologyMapping)),t.communityAutoCompleteDiv.value="",t.ontologyAutoCompleteDiv.value=[],t.checkboxDisableFreeTagging.checkFlag=!1,t.updateCategoryButton.elements.container.setStyle("display","none"),t.addCategoryButton.elements.container.setStyle("display","inline-flex"),this._updateCommunity=null,t.divCreatedCategoriesSection.empty(),t.communityOntologyMapping.forEach((e,a)=>{t.renderMappingsRow(t.divCreatedCategoriesSection,e)})},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{class:"search_center_add_category_section"}).inject(t);var a=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),r=this._createCommunityControl({class:"control_vocab_community_title",divRow:a}),n=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection}),i=this._createOntologyControl({class:"control_vocab_ontology_title",divRow:n}),s=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection});this.renderDisableFreeTagging(s);this.communityAutoCompleteDiv=r,this.ontologyAutoCompleteDiv=i,this.renderAddButtonCategoryRow(this.divAddCategoriesSection)},_createCategoryRowSpan:function(t){var a=e.create("div",{class:t.class}).inject(t.parentDiv);return a.addClassName("search_center_category_row_span"),a},_createCategoryRowHtmlDiv:function(t){var a=e.create("div",{class:t.class,html:this._getCategoryRowHtml(t)}).inject(t.parentDiv);return a.addClassName("search_center_category_row_html"),a},_getCategoryRowHtml:function(e){var t=this;let a=e.mappingInfo.ontologies.map(e=>t.ontologiesObj[e]);return e.mappingInfo.name+" - "+a},renderMappings:function(t){let a=this;this.divCreatedCategoriesSection=e.create("div",{class:"search_center_created_categories_section"}).inject(t),this.communityOntologyMapping&&this.communityOntologyMapping.length&&(this.divCreatedCategoriesSection.empty(),this.communityOntologyMapping.forEach((e,t)=>{a.renderMappingsRow(a.divCreatedCategoriesSection,e)}))},renderMappingsRow:function(e,t){var a=this._createCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",parentDiv:e});this._createCategoryRowHtmlDiv({class:"search_center_general_tab_div search_center_margin",parentDiv:a,mappingInfo:t})}}}),define("DS/SearchControlCenter/scripts/SearchcontrolGeneralTabCategories",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Button","DS/Controls/Toggle","DS/Controls/ComboBox","DS/WUXAutoComplete/AutoComplete","DS/Controls/LineEditor","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/SNInfraUX/SNVocabAccess","DS/SNInfraUX/SearchResultCategories","DS/SearchControlCenter/scripts/SearchControlCenterServices","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/SearchControlCenter_defaults.json","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchPreferences","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_,p,g,m,f,C,v){"use strict";var y="fake:dashboard",b={_categories:null,_parentDiv:null,_vocabPromise:{},render:function(e){this._parentDiv=e},loadCategories:function(){if(b._categories.suggestion=b._categories.suggestion||{},!t.is(b._categories.suggestion.list,"array")){var e=JSON.parse(g);b._categories.suggestion.list=e.result_categories.suggestion.list.concat([])}b._categories.suggestion.list=b._categories.suggestion.list||[];for(var a=b._categories.suggestion.list.length-1;a>=0;a--)!1===b._categories.suggestion.list[a].active&&b._categories.suggestion.list.splice(a,1);return b._categories},getTabInputsToStore:function(e){return-1!==["iphone","ipad","android"].indexOf(f.getDeviceCategory())?(C.setItem("InstantSearchSCC",!1),void C.commit()):m.getOption("deactivate_FUN108944")?void 0:(e.result_categories=b._categories,e.activate_instant_search=b.checkboxActivateInstantSearch.checkFlag,e.activate_instant_search_apps=b.checkboxActivateApplicationCategory.checkFlag,e)},onResetTab:function(e){if(-1!==["iphone","ipad","android"].indexOf(f.getDeviceCategory()))return C.setItem("InstantSearchSCC",!1),void C.commit();m.getOption("deactivate_FUN108944")||(this._categories=t.is(e.result_categories)?t.clone(e.result_categories):{},this.loadCategories(),this.renderInstantSearchSection(this._parentDiv),t.is(e.activate_instant_search)&&(this.checkboxActivateInstantSearch.checkFlag=e.activate_instant_search),t.is(e.activate_instant_search_apps)?this.checkboxActivateApplicationCategory.checkFlag=e.activate_instant_search_apps:this.checkboxActivateApplicationCategory.checkFlag=!0,this.setCategoriesSectionEnableState())},_checkActivateInstantSearch:function(){0==this._categories.suggestion.list.length?(this.checkboxActivateInstantSearch.checkFlag=!1,this.checkboxActivateInstantSearch.disabled=!0):this.checkboxActivateInstantSearch.disabled=!1},renderInstantSearchSection:function(t){this.divInstantSearchSection&&this.divInstantSearchSection.destroy(),this.divInstantSearchSection=e.create("div",{class:"",id:"general-tab-instantsearch-section"}).inject(t);var a=e.create("div",{class:"",id:"general-tab-instantsearch-title"}).inject(this.divInstantSearchSection);e.create("p",{class:"search_center_text_heading",text:p.get("General.Instant_search.Title")}).inject(a),this.renderActivateInstantSearch(this.divInstantSearchSection),this.renderActivateApplicationCategory(this.divInstantSearchSection),this.renderCategoriesSection(this.divInstantSearchSection)},renderActivateInstantSearch:function(t){var a=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-activate-instant-search"}).inject(t),r=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-instant-search-toggle"}).inject(a);this.checkboxActivateInstantSearch=new n({type:"switch",label:p.get("InstantSearch.Activate_Instant_Search"),className:"primary",touchMode:!0}).inject(r);var i=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(a);v.popin(i,{trigger:"hover",position:"top",body:p.get("InstantSearch.Activate_Instant_Search.popover")}),this.checkboxActivateInstantSearch.addEventListener("change",function(){b.setCategoriesSectionEnableState(),h.enableButtons()})},renderActivateApplicationCategory:function(t){this.divActivateApplicationCategorySpan&&this.divActivateApplicationCategorySpan.destroy(),this.divActivateApplicationCategorySpan=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-activate-application-category"}).inject(t);var a=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-activate-application-category-toggle"}).inject(this.divActivateApplicationCategorySpan);this.checkboxActivateApplicationCategory=new n({type:"switch",label:p.get("InstantSearch.Activate_Application_Category"),className:"primary",touchMode:!0}).inject(a);var r=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(this.divActivateApplicationCategorySpan);v.popin(r,{trigger:"hover",position:"top",body:p.get("InstantSearch.Activate_Application_Category.popover")}),this.checkboxActivateApplicationCategory.addEventListener("change",function(){h.enableButtons()})},renderCategoriesSection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"search_center_category_section"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection),this.renderCategories(this.divCategoriesSection),this._checkActivateInstantSearch()},renderCategories:function(t){var r=this;return this._renderedCategories=[],this.divCreatedCategoriesSection=e.create("div",{class:"search_center_div_left  search_center_created_categories_section"}).inject(t),this.divCreatedCategoriesSectionHeader=e.create("div",{class:"search_center_div_left  search_center_created_categories_section_header ",html:p.get("InstantSearch.Categories.section.header")}).inject(this.divCreatedCategoriesSection),new a(function(e,t){var n=r.loadCategories(),i=[];n.suggestion.list.forEach(function(e,t){i.push(r.ensureVocabLoaded(e.source))});var s=[];a.all(i).then(function(t){n.suggestion.list.forEach(function(e,a){s.push(r.renderCategoryRow(e,r.divCreatedCategoriesSection,t[a]))}),a.all(s).then(e)})})},setCategoriesSectionEnableState:function(){1==this.checkboxActivateInstantSearch.checkFlag?(this.divCategoriesSection.removeClassName("search_center_disable"),this.divActivateApplicationCategorySpan.removeClassName("search_center_disable")):(this.divCategoriesSection.addClassName("search_center_disable"),this.divActivateApplicationCategorySpan.addClassName("search_center_disable"))},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("search_center_add_category_row_span"),a},_createCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("search_center_category_row_span"),a},_createCategoryTitleControl:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.divRow),r=new o({placeholder:p.get("InstantSearch.Title_Instant_Search"),touchMode:!0}).inject(a);r.elements.container.setStyle("display","grid"),r.elements.container.setStyle("max-width","unset");var n=this;return r.addEventListener("change",function(){var e=r.value.trim(),a=n._validateCategoryTitle(e,t.category_id);if(e&&a){if(!r.elements.container.hasClassName("result_category_input_error")){r.elements.container.addClassName("result_category_input_error");var i=h.createWdgAlert();i.inject(r.elements.container,"top");var s=p.get("InstantSearch.Category.DuplicateTitle",{title:a});i.add({className:"warning applyChangesAlert",message:s})}}else r.elements.container.removeClassName("result_category_input_error");n.enableAddCategoryButton()}),r},_createCategoryDatasourceControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new i({placeholder:p.get("Choose_data_source"),touchMode:!0,enableSearchFlag:!0,elementsList:[]}).inject(r);n.elements.container.setStyle("width","100%"),this.getDataSourceList().then(function(e){if(n.elementsList=e,t.is(a.selectedSource)){var r=e.indexOf(h.getDatasourceDisplayName(a.selectedSource));r>=0&&(n.selectedIndex=r)}});var s=this;return n.addEventListener("change",function(){s.enableAddCategoryButton()}),n},_createCategoryTypeControl:function(a){var r=e.create("div",{class:a.class,id:a.id}).inject(a.divRow),n=new s({placeholder:p.get("Choose_type"),touchMode:!0,disabled:!0,enableSearchFlag:!0}).inject(r);function i(e,t){var a=[];return e.getChildren().forEach(function(e,r){t.indexOf(e.getAttributeValue("uri"))>=0&&a.push(e)}),a}function o(e){if(e.getChildren().length>0)n.elementsTree=e,n.disabled=!1,1==e.getChildren().length&&(n.selectedItems=i(e,e.getChildren()[0].getAttributeValue("uri")?[e.getChildren()[0].getAttributeValue("uri")]:[]),n.disabled=!0);else{n.disabled=!0;var t=h.createWdgAlert(),a=p.get("SearchType.NoTypesWarning");t.add({className:"warning applyChangesAlert",message:a})}c._promiseTypeListLoaded&&c._promiseTypeListLoaded.resolve(e)}n.elements.container.setStyle("max-width","unset");var c=this,l=a.datasourceComboBox;return l&&l.addEventListener("change",function(){var e=h.getDatasourceInternalName(l.currentValue);c.ensureVocabLoaded(e).then(o)}),a.vocabTypesTreeDocument&&(o(a.vocabTypesTreeDocument),t.is(a.selectedTypes,"array")&&(n.selectedItems=i(a.vocabTypesTreeDocument,a.selectedTypes))),n.addEventListener("change",function(){var e=n.selectedItems.length,t=m.getOption("instant_search_category_max_types");if(e>t){if(!n.elements.container.hasClassName("result_category_input_error")){n.elements.container.addClassName("result_category_input_error");var a=h.createWdgAlert();a.inject(n.elements.container,"top");var r=p.get("InstantSearch.Category.TypeCountMax",{max_count:t});a.add({className:"warning applyChangesAlert",message:r})}}else n.elements.container.removeClassName("result_category_input_error");c.enableAddCategoryButton()}),n},_getCategoryRowTitleHtml:function(e){return u.getCategoryTitleNls(e)},_getCategoryRowTitleAndSourceSeparatorHtml:function(){return" - "},_getCategoryRowSourceAndTypesSeparatorHtml:function(){return" - "},_getCategoryRowTypesSeparatorHtml:function(){return", "},_getCategoryRowSourceHtml:function(e){return h.getDatasourceDisplayName(e.source)||"Source Not Found"},_getCategoryRowTypesHtml:function(e,a){var r=this,n="";return t.is(e.types,"array")&&a.getChildren().forEach(function(t,a){var i=t.getAttributeValue("uri");e.types.indexOf(i)>=0?(n&&(n+=r._getCategoryRowTypesSeparatorHtml()),n+=h.getTypesDisplayName(e.source,i)):i==y&&(n+=t.getAttributeValue("nls"))}),n},_getCategoryRowHtml:function(e){var t=this._getCategoryRowTitleHtml(e.category);return t+=this._getCategoryRowTitleAndSourceSeparatorHtml(e),t+=this._getCategoryRowSourceHtml(e.category),t+=this._getCategoryRowSourceAndTypesSeparatorHtml(e),t+=this._getCategoryRowTypesHtml(e.category,e.model)},_createCategoryRowHtmlDiv:function(t){var a=e.create("div",{class:t.class,id:t.id,html:this._getCategoryRowHtml(t)}).inject(t.parentDiv);return a.addClassName("search_center_category_row_html"),a},_setSelectedDatasource:function(e){var a=this;this.getDataSourceList().then(function(r){if(a.datasourceComboBox.elementsList=r,t.is(e)){var n=r.indexOf(h.getDatasourceDisplayName(e));n>=0&&(a.datasourceComboBox.selectedIndex=n)}})},_setSelectedTypes:function(e,t){var a=[];e.getChildren().forEach(function(e,r){t.indexOf(e.getAttributeValue("uri"))>=0&&a.push(e)}),this.typeAutocomplete.selectedItems=a},_setCategoryInEditMode:function(e){var t=this;e.parentDiv.addClassName("search_category_row_in_edit"),t._categoryInMod=e.category.id,t._disableDeleteModifyAllCategories(),t.categoryTitleLine.value=u.getCategoryTitleNls(e.category),t._promiseTypeListLoaded=a.deferred(),t._promiseTypeListLoaded.promise.then(function(a){t._setSelectedTypes(a,e.category.types),t.divAddCategoriesSection.removeClassName("search_center_disable")}),t._setSelectedDatasource(e.category.source),t.cancelAddCategoryButton.show(),t.addCategoryButton.disabled=!0,t.addCategoryButton.label=p.get("InstantSearch.Category.Action.SaveCategory")},_createCategoryRowActionsDiv:function(t){var a=this,r=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);r.addClassName("search_result_category_row_actions");var n=e.create("div",{class:"fonticon fonticon-1x fonticon-pencil search_result_category_row_action"}).inject(r);n.addEventListener("click",function(){a._setCategoryInEditMode(t)},!1),n.addEventListener("mouseover",function(){n.addClassName("search_category_action_mouse_hover")},!1),n.addEventListener("mouseout",function(){n.removeClassName("search_category_action_mouse_hover")},!1);var i=e.create("div",{class:"fonticon fonticon-trash search_result_category_row_action"}).inject(r);return i.addEventListener("click",function(){a._removeCategoryModel(t.category.id),h.enableButtons(),a.renderCategoriesSection()},!1),i.addEventListener("mouseover",a._manageMouseOver,!1),i.addEventListener("mouseout",a._manageMouseOut,!1),r},renderCategoryRow:function(e,t,r){var n=this;return new a(function(a,i){var s=n._createCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"search-result-category-"+e.id,parentDiv:t});n._createCategoryRowHtmlDiv({class:"search_center_general_tab_div search_center_margin",id:"search-result-category-html-"+e.id,parentDiv:s,category:e,model:r}),n._createCategoryRowActionsDiv({class:"search_center_margin",model:r,category:e,parentDiv:s}),n._renderedCategories.push({id:e.id,div:s}),a()})},enableAddCategoryButton:function(){this.categoryTitleLine.value.trim()&&!this.categoryTitleLine.elements.container.hasClassName("result_category_input_error")&&this.datasourceComboBox.currentValue&&!this.typeAutocomplete.elements.container.hasClassName("result_category_input_error")?this.addCategoryButton.disabled=!1:this.addCategoryButton.disabled=!0},renderAddButtonCategoryRow:function(t){var a=this,n=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_category_add",id:"add-search-result-category"}).inject(t),i=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex search_center_category_add_cancel",id:"add-search-result-category-cancel-button"}).inject(n);this.cancelAddCategoryButton=new r({touchMode:!0,disabled:!1,label:p.get("InstantSearch.Category.Action.CancelAddCategory")}).inject(i),this.cancelAddCategoryButton.getContent().addEventListener("buttonclick",function(){a.renderCategoriesSection()}),this.cancelAddCategoryButton.hide();var s=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex search_center_category_add_add",id:"add-search-result-category-add-button"}).inject(n);this.addCategoryButton=new r({emphasize:"primary",touchMode:!0,disabled:!0,label:p.get("InstantSearch.Category.Action.AddNewCategory")}).inject(s);var o=m.getOption("instant_search_category_max_categories");this._categories.suggestion.list.length>=o&&t.addClassName("search_center_disable"),this.addCategoryButton.getContent().addEventListener("buttonclick",function(){function e(e){a.typeAutocomplete.selectedItems&&a.typeAutocomplete.selectedItems.forEach(function(t,a){var r=t.getAttributeValue("uri");r&&(r==y&&(r="Dashboard",e.match_on="context_name"),e.types.push(r))})}if(a._categoryInMod){var t={id:a._categoryInMod,custom:!0,name:a.categoryTitleLine.value,source:h.getDatasourceInternalName(a.datasourceComboBox.currentValue),types:[]};e(t),a._replaceCategoryModel(t)}else{var r={id:(new Date).getTime(),custom:!0,name:a.categoryTitleLine.value,source:h.getDatasourceInternalName(a.datasourceComboBox.currentValue),types:[]};e(r),a._addCategoryModel(r)}h.enableButtons(),a.renderCategoriesSection()})},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{class:" search_center_div_left search_center_add_category_section"}).inject(t);var a=this._createAddCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),r=this._createCategoryTitleControl({class:"search_center_category_title",id:"search-result-category-title",divRow:a}),n=this._createCategoryDatasourceControl({class:"search_center_category_source",id:"add-search-result-category-source-combo",divRow:a});n.disabled=!1;var i=this._createAddCategoryRowSpan({class:"search_center_general_tab_div search_center_margin",id:"add-search-result-category-row2",parentDiv:this.divAddCategoriesSection}),s=this._createCategoryTypeControl({class:"search_center_category_types",id:"add-search-result-category-type-combo",divRow:i,datasourceComboBox:n});this.categoryTitleLine=r,this.datasourceComboBox=n,this.typeAutocomplete=s,this._categoryInMod=null,this.renderAddButtonCategoryRow(this.divAddCategoriesSection)},_removeCategoryModel:function(e){for(var t=0;t<this._categories.suggestion.list.length;t++)if(this._categories.suggestion.list[t].id==e){this._categories.suggestion.list.splice(t,1);break}},_replaceCategoryModel:function(e){for(var t=0;t<this._categories.suggestion.list.length;t++)if(this._categories.suggestion.list[t].id==e.id){this._categories.suggestion.list.splice(t,1,e);break}},_validateCategoryTitle:function(e,t){for(var a=0;a<this._categories.suggestion.list.length;a++){var r=u.getCategoryTitleNls(this._categories.suggestion.list[a]);if(r.toLowerCase()==e.toLowerCase()&&(!this._categoryInMod||this._categoryInMod&&this._categories.suggestion.list[a].id!=this._categoryInMod))return r}return!1},_addCategoryModel:function(e){this._categories.suggestion.list.push(e)},_disableDeleteModifyAllCategories:function(){b._renderedCategories.forEach(function(e,t){e.div.addClassName("search_center_disable")})},ensureVocabLoaded:function(e){var r=this;return this._vocabPromise[e]||(this._vocabPromise[e]=new a(function(a,n){r.getDataSourceList().then(function(){var r={};r.vocabId=h._datSourceToVocabID[e],r.tenantId=h.platformID,d.loadVocabularyClasses(r,function(r){var n=[],i={},s=new c;if(s.prepareUpdate(),"dashboard"==e&&0==r.classInfos.length&&(r.classInfos=[{nlsName:p.get("Type.dashboard"),uri:y}]),"drive"==e){var o=new l({label:""});s.addRoot(o)}else for(let e=0;e<r.classInfos.length;e++)if(t.is(r.classInfos[e].nlsName,"string")&&t.is(r.classInfos[e].uri)){n.push(r.classInfos[e].nlsName),i[r.classInfos[e].uri]=r.classInfos[e].nlsName;o=new l({label:r.classInfos[e].nlsName,grid:{nls:r.classInfos[e].nlsName,uri:r.classInfos[e].uri}});s.addRoot(o)}s.pushUpdate(),h.updateTypesMapping(e,i),a(s)})})})),this._vocabPromise[e]},getDataSourceList:function(){function e(e){for(var t=-1,a=e.concat(),r=0;r<a.length;r++)if("other"===h.getDatasourceInternalName(a[r])){t=r;break}return t>-1&&a.splice(t,1),a}return this._datasourceListPromise||(this._datasourceListPromise=new a(function(a,r){var n=m.getOption("dataSourcesToFilterFromAdvancedSearch");delete n.dashboard;var i=h.getDataSourceList({dataSourcesToFilterFromAdvancedSearch:n});t.is(i,"array")?a(e(i)):i.then(function(t){a(e(t))})})),this._datasourceListPromise}};return b}),define("DS/SearchControlCenter/scripts/SearchcontrolGeneralTab",["UWA/Element","UWA/Core","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/Editor","DS/MessageBus/MessageBus","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SearchcontrolGeneralTabCategories","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","i18n!DS/SNResultUX/assets/nls/SNResultUX.json","DS/SNInfraUX/Logger","DS/SNInfraUX/SearchSettings","DS/SNResultUX/utils/SearchViewOptions","DS/SearchControlCenter/scripts/SCCSynonymsDictonary","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_,p,g){"use strict";var m={viewModeComboBox:null,deltaTimeComboBox:null,dateModeComboBox:null,csvSeparatorComboBox:null,revisionComboBox:null,numberResultComboBox:null,checkboxAbbreviatedcount:null,checkboxAccessPLMParameters:null,checkboxSuggestions:null,checkboxSnippets:null,checkboxForceAdvSearch:null,checkboxForceGuidedMode:null,_viewModeObject:{},_dateModeObject:{},_csvSeparatorObject:{},_revisionObject:{},onRenderFacet:function(n){var i=h.getOption("OneSearch"),c=e.create("div",{class:"scc_main_div",id:"search-center-general0"}).inject(n),f=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(c);e.create("p",{class:"search_center_text_heading",text:l.get("General.Results_display")}).inject(f);var C=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-view-mode"}).inject(c),v=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-view-mode-text"}).inject(C),y=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-tab-view-mode"}).inject(c),b=e.create("div",{class:"search_center_div_left",id:"general-tab-view-mode-combo"}).inject(y);e.create("p",{class:"search_center_text",text:l.get("Default_View_Mode_After_CacheCleaning")}).inject(v);var S=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(C);g.tooltip(S,{position:"top",shortHelp:l.get("Default_View_Mode_After_CacheCleaning.popover")});var x=[],D=i;if(m._viewModeObject=_.getAvailableViews({simple_search_experience:D,getAllViews:!0}),t.is(m._viewModeObject)&&m._viewModeObject.length>0)for(let e=0;e<m._viewModeObject.length;e++){var T={},A=m._viewModeObject[e];T.labelItem=A.title,T.iconItem=A.icon,x.push(T)}m.viewModeComboBox=new r({elementsList:x,nbDisplayedElements:x.length,currentValue:x[0],touchMode:!0,enableSearchFlag:!0}).inject(b),b.setStyle("display","grid"),m.viewModeComboBox.elements.container.setStyle("max-width","unset");var w=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-recent-time"}).inject(c),I=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-recent-time-text"}).inject(w),N=(y=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-tab-recent_content"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-recent-time-combo"}).inject(y));e.create("p",{class:"search_center_text",text:l.get("Recent_Content_Delta_Time")}).inject(I);var P=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(w);g.tooltip(P,{position:"top",shortHelp:l.get("Recent_Content_Delta_Time.popover")});var j=["5"+l.get("Minutes"),"10"+l.get("Minutes"),"15"+l.get("Minutes"),"20"+l.get("Minutes"),"25"+l.get("Minutes"),"30"+l.get("Minutes")];if(m.deltaTimeComboBox=new r({elementsList:j,nbDisplayedElements:j.length,currentValue:j[0],touchMode:!0,enableSearchFlag:!0}).inject(N),N.setStyle("display","grid"),m.deltaTimeComboBox.elements.container.setStyle("max-width","unset"),m._dateModeObject=h.getOption("date_display_mode_array"),t.is(m._dateModeObject,"array")&&m._dateModeObject.length>0){var W=[];for(let e=1;e<m._dateModeObject.length;e++){var E=m._dateModeObject[e];t.is(E,"object")&&t.is(E.id,"string")?W.push(d.get(E.id+".title")):u.error("Bad definition of date_display_mode_array !!!",m._dateModeObject)}if(W.length>0){var O=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-date-mode"}).inject(c),B=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-date-mode-text"}).inject(O),F=(y=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-tab-date_mode"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-date-mode-combo"}).inject(y));e.create("p",{class:"search_center_text",text:d.get("Default_Date_Mode")}).inject(B),m.dateModeComboBox=new r({elementsList:W,nbDisplayedElements:W.length,currentValue:W[0],touchMode:!0,enableSearchFlag:!0}).inject(F),F.setStyle("display","grid"),m.dateModeComboBox.elements.container.setStyle("max-width","unset")}}if(m._csvSeparatorObject=h.getOption("csvSeparatorArray"),t.is(m._csvSeparatorObject,"array")&&m._csvSeparatorObject.length>0){var R=[];for(let e=1;e<m._csvSeparatorObject.length;e++){var M=m._csvSeparatorObject[e];t.is(M,"object")&&t.is(M.id,"string")?R.push(d.get(M.id+".title")):u.error("Bad definition of csvSeparatorArray !!!",m._csvSeparatorObject)}if(R.length>0){var U=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-csv-mode"}).inject(c),k=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-csv-mode-text"}).inject(U),V=(y=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-csv"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-csv-mode-combo"}).inject(y));e.create("p",{class:"search_center_text",text:d.get("Default_Csv_Separator")}).inject(k),m.csvSeparatorComboBox=new r({elementsList:R,nbDisplayedElements:R.length,domId:"combo-csv-mode",currentValue:R[0],touchMode:!0,enableSearchFlag:!0}).inject(V),V.setStyle("display","grid"),m.csvSeparatorComboBox.elements.container.setStyle("max-width","unset")}}if(m._revisionObject=h.getOption("show_search_results_revision_array"),t.is(m._revisionObject)&&m._revisionObject.length>0){var L=[];for(let e=0;e<m._revisionObject.length;e++){var Q=m._revisionObject[e];t.is(Q,"object")&&t.is(Q.id,"string")?L.push(d.get(Q.id+".title")):u.error("Bad definition of show_search_results_revision_array !!!",m._revisionObject)}if(L.length>0){var H=e.create("div",{class:"search_center_general_tab_div search_center_top_margin",id:"general-tab-revision"}).inject(c),z=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-revision-type-text"}).inject(H),X=(y=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-revision"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-revision-type-combo"}).inject(y));e.create("p",{class:"search_center_text",text:d.get("Show_Search_Results")}).inject(z),m.revisionComboBox=new r({elementsList:L,nbDisplayedElements:L.length,currentValue:L[0],touchMode:!0,enableSearchFlag:!0}).inject(X),X.setStyle("display","grid"),m.revisionComboBox.elements.container.setStyle("max-width","unset")}}var J=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-number-result"}).inject(c),G=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-number-result-text"}).inject(J),q=(y=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-no_of_results"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-number-result-combo"}).inject(y));e.create("p",{class:"search_center_text",text:l.get("max_selection_for_selectall")}).inject(G);var K=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(J);g.tooltip(K,{position:"top",shortHelp:l.get("max_selection_for_selectall.popover")});var Y=["200"+l.get("Items"),"400"+l.get("Items"),"600"+l.get("Items"),"800"+l.get("Items"),"1000"+l.get("Items")];m.numberResultComboBox=new r({elementsList:Y,nbDisplayedElements:Y.length,currentValue:Y[0],touchMode:!0,enableSearchFlag:!0}).inject(q),q.setStyle("display","grid"),m.numberResultComboBox.elements.container.setStyle("max-width","unset");var $=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-default-sort-option"}).inject(c),Z=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-default-sort-option-text"}).inject($),ee=(y=e.create("div",{class:"search_center_general_tab_div  search_center_general_display_flex",id:"general-sort_option"}).inject(c),e.create("div",{class:"search_center_div_left",id:"general-tab-default-sort-option-combo"}).inject(y)),te=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject($);g.tooltip(te,{position:"top",shortHelp:d.get("default_sort.popover")}),ee.setStyle("display","grid"),e.create("p",{class:"search_center_text",text:l.get("GeneralTab.DefaultSort.title")}).inject(Z);var ae=[{label:d.get("sort_by")+" "+d.get("relevancySort"),trueLabel:d.get("relevancySort"),icon:"sorting"},{label:d.get("sort_by")+" "+d.get("ds6w:modified_SortDesc"),trueLabel:d.get("ds6w:modified_SortDesc"),icon:"date-sorting-1-31"},{label:d.get("sort_by")+" "+d.get("ds6w:modified_SortAsc"),trueLabel:d.get("ds6w:modified_SortAsc"),icon:"date-sorting-31-1"},{label:d.get("sort_by")+" "+d.get("ds6w:label_SortAsc"),trueLabel:d.get("ds6w:label_SortAsc"),icon:"alpha-sorting-a-z"},{label:d.get("sort_by")+" "+d.get("ds6w:label_SortDesc"),trueLabel:d.get("ds6w:label_SortDesc"),icon:"alpha-sorting-z-a"},{label:d.get("sort_by")+" "+d.get("ds6w:type"),trueLabel:d.get("ds6w:type"),icon:"tag-sorting"}];m.defaultSortOptionComboBox=new r({elementsList:ae,nbDisplayedElements:ae.length,selectedIndex:0,touchMode:!0,enableSearchFlag:!1,getMainElementCustomization:this.updateSortLabelCallback}).inject(ee),m.defaultSortOptionComboBox.addEventListener("change",function(){s.enableButtons()});var re=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"general-tab-resultsdisplay-text"}).inject(c);e.create("p",{class:"search_center_text_heading",text:l.get("General.UI_display")}).inject(re);var ne=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-abbreviated-count"}).inject(c),ie=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-abbreviated-count-toggle"}).inject(ne);m.checkboxAbbreviatedcount=new a({type:"switch",label:l.get("QuantityDisplay.Abbreviated_count_display"),className:"primary",touchMode:!0}).inject(ie);var se=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ne);g.tooltip(se,{position:"top",shortHelp:l.get("QuantityDisplay.Abbreviated_count_display.popover")});var oe=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-access-PLMParameters"}).inject(c),ce=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-PLMParameters-toggle"}).inject(oe);m.checkboxAccessPLMParameters=new a({type:"switch",label:l.get("Advancedsearch.Access_to_plmparameters.title"),className:"primary",touchMode:!0}).inject(ce);var le=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(oe);g.tooltip(le,{position:"top",shortHelp:l.get("Advancedsearch.Access_to_plmparameters.popover")});var de=h.getOption("OneSearchOFF");if(t.is(i)&&!0===i&&!0!==de){var ue=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-suggestions"}).inject(c),he=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-Suggestions-toggle"}).inject(ue);m.checkboxSuggestions=new a({type:"switch",label:l.get("suggestion.title"),className:"primary",touchMode:!0}).inject(he);var _e=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ue);g.tooltip(_e,{position:"top",shortHelp:l.get("suggestion.popover")});var pe=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-snippets"}).inject(c),ge=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-access-Snippets-toggle"}).inject(pe);m.checkboxSnippets=new a({type:"switch",label:l.get("search_snippets.title"),className:"primary",touchMode:!0}).inject(ge);var me=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(pe);g.tooltip(me,{position:"top",shortHelp:l.get("search_snippets.popover")}),m.checkboxSuggestions.addEventListener("change",function(){s.enableButtons()}),m.checkboxSnippets.addEventListener("change",function(){s.enableButtons()})}var fe=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-force-AdvancedSearch"}).inject(c),Ce=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-force-AdvancedSearch-toggle"}).inject(fe);m.checkboxForceAdvSearch=new a({type:"switch",label:l.get("General.InContextSearch.forceAdvancedSearch.label"),className:"primary",touchMode:!0}).inject(Ce);var ve=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(fe);g.tooltip(ve,{position:"top",shortHelp:l.get("General.InContextSearch.forceAdvancedSearch.popover")}),m.checkboxForceAdvSearch.addEventListener("change",function(){s.enableButtons()});if(t.is(!0)){var ye=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"general-tab-force-GuidedMode"}).inject(c),be=e.create("div",{class:"search_center_div_uidisplay search_center_general_display_flex",id:"general-tab-force-GuidedMode-toggle"}).inject(ye);m.checkboxForceGuidedMode=new a({type:"switch",label:l.get("General.forceGuidedMode.label"),className:"primary",touchMode:!0}).inject(be);var Se=e.create("span",{class:"fonticon fonticon-info search_center_margin_icon"}).inject(ye);g.tooltip(Se,{position:"top",shortHelp:l.get("General.forceGuidedMode.popover")}),m.checkboxForceGuidedMode.addEventListener("change",function(){s.enableButtons()})}p.onRender(c),o.render(c),m.viewModeComboBox.addEventListener("change",function(){s.enableButtons()}),m.deltaTimeComboBox.addEventListener("change",function(){s.enableButtons()}),m.numberResultComboBox.addEventListener("change",function(){s.enableButtons()}),m.checkboxAbbreviatedcount.addEventListener("change",function(){s.enableButtons()}),m.checkboxAccessPLMParameters.addEventListener("change",function(){s.enableButtons()}),m.dateModeComboBox.addEventListener("change",function(){s.enableButtons()}),t.is(m.csvSeparatorComboBox)&&m.csvSeparatorComboBox.addEventListener("change",function(){s.enableButtons()}),m.revisionComboBox.addEventListener("change",function(){s.enableButtons()}),s.removeMask(widget.body)},getTabInputsToStore:function(){var e=m.deltaTimeComboBox.currentValue;t.is(e)&&(e=e.replace(l.get("Minutes"),""));var a=m.viewModeComboBox.currentValue;if(t.is(a))for(let e=0;e<m._viewModeObject.length;e++){var r=m._viewModeObject[e];if(a===r.title){a=r.id;break}}var n=m.numberResultComboBox.currentValue;t.is(n)&&(n=n.replace(l.get("Items"),""));var i=m.dateModeComboBox.currentValue;if(t.is(i))for(let e=0;e<m._dateModeObject.length;e++){var s=m._dateModeObject[e];if(i===d.get(s.id+".title")){i=s;break}}var c=t.is(m.csvSeparatorComboBox)?m.csvSeparatorComboBox.currentValue:d.get("COMMA.title");if(t.is(c))for(let e=0;e<m._csvSeparatorObject.length;e++){var u=m._csvSeparatorObject[e];if(c===d.get(u.id+".title")){c=u;break}}var _=m.revisionComboBox.currentValue;if(t.is(_))for(let e=0;e<m._revisionObject.length;e++){var g=m._revisionObject[e];if(_===d.get(g.id+".title")){_=g;break}}var f={},C=m.defaultSortOptionComboBox.selectedIndex;switch(C){case 0:f={label:"relevancySort",value:"relevance",type:"group"};break;case 1:f={label:"ds6w:modified_SortAsc",value:"ds6w:modified",order:"asc",type:"num"};break;case 2:f={label:"ds6w:modified_SortDesc",value:"ds6w:modified",order:"desc",type:"num"};break;case 3:f={label:"ds6w:label_SortAsc",value:"ds6w:label",order:"asc",type:"alpha"};break;case 4:f={label:"ds6w:label_SortDesc",value:"ds6w:label",order:"desc",type:"alpha"};break;case 5:f={label:"ds6w:type",value:"ds6w:type",type:"type"}}var v={defaultViewModeAfterCacheCleaning:a,defaultDateMode:i,defaultCsvSeparator:c,defaultRevision:_,Recent_Content_Delta_Time:e,max_selection_for_selectall:n,preciseCount:!0!==m.checkboxAbbreviatedcount.checkFlag,enablePLM:m.checkboxAccessPLMParameters.checkFlag,forceAdvancedSearch:m.checkboxForceAdvSearch.checkFlag,GuidedMode:m.checkboxForceGuidedMode?m.checkboxForceGuidedMode.checkFlag:void 0,searchDefaultSort:f,searchDefaultSortIndex:C},y=h.getOption("OneSearch"),b=h.getOption("OneSearchOFF");return t.is(y)&&!0===y&&!0!==b&&(v.suggest_admin=m.checkboxSuggestions.checkFlag,v.search_snippet_admin=m.checkboxSnippets.checkFlag),o.getTabInputsToStore(v),p.updateTabInputsToStore(v),v},onResetTab:function(e){var a;if(a=t.is(e,"string")?JSON.parse(e):e,t.is(a)){if(a.hasOwnProperty("defaultViewModeAfterCacheCleaning")){var r=a.defaultViewModeAfterCacheCleaning;if(t.is(r)){for(let e=0;e<m._viewModeObject.length;e++){var n=m._viewModeObject[e];if(r===n.id){r=n.title;break}}m.viewModeComboBox.currentValue=r}}if(a.hasOwnProperty("searchDefaultSortIndex")){var i=a.searchDefaultSortIndex;t.is(i)&&(m.defaultSortOptionComboBox.selectedIndex=i)}if(a.hasOwnProperty("Recent_Content_Delta_Time")){var s=a.Recent_Content_Delta_Time;t.is(s)&&(s+=l.get("Minutes"),m.deltaTimeComboBox.currentValue=s)}if(a.hasOwnProperty("max_selection_for_selectall")){var c=a.max_selection_for_selectall;t.is(c)&&(c+=l.get("Items"),m.numberResultComboBox.currentValue=c)}if(a.hasOwnProperty("defaultDateMode")){var u=a.defaultDateMode;if(t.is(u)){for(let e=0;e<m._dateModeObject.length;e++){var _=m._dateModeObject[e];if(u.id===_.id){u=d.get(_.id+".title");break}}m.dateModeComboBox.currentValue=u}}else t.is(m._dateModeObject)&&t.is(m._dateModeObject[0])&&(m.dateModeComboBox.currentValue=d.get(m._dateModeObject[0].id+".title"));if(m.csvSeparatorComboBox)if(a.hasOwnProperty("defaultCsvSeparator")){var g=a.defaultCsvSeparator;if(t.is(g)){for(let e=0;e<m._csvSeparatorObject.length;e++){var f=m._csvSeparatorObject[e];if(g.id===f.id){g=d.get(f.id+".title");break}}m.csvSeparatorComboBox.currentValue=g}}else t.is(m._csvSeparatorObject)&&t.is(m._csvSeparatorObject[0])&&(m.csvSeparatorComboBox.currentValue=d.get(m._csvSeparatorObject[0].id+".title"));if(a.hasOwnProperty("defaultRevision")){var C=a.defaultRevision;if(t.is(C)){for(let e=0;e<m._revisionObject.length;e++){var v=m._revisionObject[e];if(C.id===v.id){C=d.get(v.id+".title");break}}m.revisionComboBox.currentValue=C}}else m.revisionComboBox.currentValue=d.get(m._revisionObject[0].id+".title");if(a.hasOwnProperty("preciseCount")){var y=a.preciseCount;t.is(y)&&(m.checkboxAbbreviatedcount.checkFlag=!0!==y)}if(a.hasOwnProperty("enablePLM")){var b=a.enablePLM;t.is(b)&&(m.checkboxAccessPLMParameters.checkFlag=b)}if(a.hasOwnProperty("forceAdvancedSearch")){var S=a.forceAdvancedSearch;t.is(S)&&(m.checkboxForceAdvSearch.checkFlag=S)}if(a.hasOwnProperty("GuidedMode")){var x=a.GuidedMode;t.is(x)&&t.is(m.checkboxForceGuidedMode)&&(m.checkboxForceGuidedMode.checkFlag=x)}var D=h.getOption("OneSearch"),T=h.getOption("OneSearchOFF");if(t.is(D)&&!0===D&&!0!==T){if(a.hasOwnProperty("suggest_admin")){var A=a.suggest_admin;t.is(A)&&(m.checkboxSuggestions.checkFlag=A)}else m.checkboxSuggestions.checkFlag=!0;if(a.hasOwnProperty("search_snippet_admin")){var w=a.search_snippet_admin;t.is(w)&&(m.checkboxSnippets.checkFlag=w)}else m.checkboxSnippets.checkFlag=!0}o.onResetTab(a),p.onResetTab(a.search_synonyms)}},updateSortLabelCallback:function(){const e=this.elementsList[this.selectedIndex];return e&&e.trueLabel?{label:e.trueLabel}:{label:this.label}}};return m}),define("DS/SearchControlCenter/scripts/ControlledOntology/SCCControlledOntology",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/Toggle","DS/WUXAutoComplete/AutoComplete","DS/Controls/ComboBox","DS/SNInfraUX/SearchSettings","DS/SearchControlCenter/scripts/ControlledOntology/OntologyDatasetsHelpers","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchControlCenterFetchService","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json"],function(e,t,a,r,n,i,s,o,c,l,d,u){"use strict";return{_structureToStore:[],_structureStored:null,_mainControlDivSection:null,_warningReport:"",_deletedConcepts:!1,_hierarchicalFatherMovement:!1,_duplicateConcepts:!1,render:function(e){this._parentDiv=e,this.renderControlledSection(this._parentDiv)},destroy:function(){this._parent(),t.is(o)&&t.is(o.destroy,"function")&&(o.destroy(),o=null)},getTabInputsToStore:function(){let e=[];if(0===this._structureToStore.length){let a={facetID:"SearchControl_6WTags"},r=l.getSettingsJSONFromTabName(a);r.hasOwnProperty("enterprise_ontology")&&t.is(r.enterprise_ontology.dataset,"array")&&r.enterprise_ontology.dataset.length>0&&(e=[{dataset:r.enterprise_ontology.dataset[0].dataset,applicativeId:r.enterprise_ontology.dataset[0].applicativeId,datasetTitle:r.enterprise_ontology.dataset[0].datasetTitle,"session@id":r.enterprise_ontology.dataset[0]["session@id"],sessionTitle:r.enterprise_ontology.dataset[0].sessionTitle,publisher:r.enterprise_ontology.dataset[0].publisher,modificationdate:r.enterprise_ontology.dataset[0].modificationdate,label:r.enterprise_ontology.dataset[0].label}]),this._structureToStore=e}return this._structureToStore},getInputFromStore:function(e){!0===s.getOption("allowEnterpriseDictionaryModification")?(this._structureToStore=[],this._structureStored=e):t.is(e,"array")&&0!==e.length&&(this._structureStored=e,this._structureToStore=e)},getSelectedDatasetTitle:function(){return this.datasetAutocomplete.value},onUpdateUI:function(){let e=!1;this._structureStored&&this._structureStored.length?e=!0:this._structureToStore&&this._structureToStore.length&&(e=!0),!0===e||(this.datasetAutocomplete.value="",this.datasetAutocomplete.elementsTree=void 0,o.clean(),this.buildSearchResults())},renderControlledSection:function(t){this._mainControlDivSection=e.create("div",{class:"search_center_main_div",id:"control-Ontology-main"}).inject(t);e.create("div",{class:"",id:"control-Ontology-title"}).inject(this._mainControlDivSection);this.renderDataSetSection(this._mainControlDivSection)},renderDataSetSection:function(t){this.divCategoriesSection&&this.divCategoriesSection.remove(),t||(t=this._parentDiv),this.divCategoriesSection=e.create("div",{class:"control_vocab_category_section"}).inject(t),this.renderAddCategorySection(this.divCategoriesSection)},renderAddCategorySection:function(t){this.divAddCategoriesSection=e.create("div",{}).inject(t);var a=this._createAddCategoryRowSpan({class:"control_vocab search_center_margin",id:"add-search-result-category-row1",parentDiv:this.divAddCategoriesSection}),r=this._createDatasetControl({class:"control_vocab_community_title",divRow:a});this.datasetAutoCompleteDiv=r},_createAddCategoryRowSpan:function(t){var a=e.create("div",{class:t.class,id:t.id}).inject(t.parentDiv);return a.addClassName("control_vocab_add_category_row_span"),a},_createDatasetControl:function(t){var a=e.create("div",{class:t.class,id:"Ontology_DataSet_Combo"}).inject(t.divRow);return this.datasetAutocomplete=new i({placeholder:u.get("6WTagsFilter.ControlledOntology.Dataset.title"),touchMode:!0,enableSearchFlag:!0,allowFreeInputFlag:!1,multiSearchMode:!0===s.getOption("allowEnterpriseDictionaryModification")}).inject(a),this.datasetAutocomplete.elements.container.setStyle("width","100%"),this.datasetAutocomplete.addEventListener("change",this._onChangeDataset.bind(this)),this.buildSearchResults(),this.datasetAutocomplete},buildSearchResults:function(){let e=this,a={onComplete:function(a){t.is(a)&&(e.datasetAutocomplete.elementsTree=a)},onFailure:function(a){t.is(a)&&(e.datasetAutocomplete.elementsTree=a)}};o.buildSearchResults(a)},_onChangeDataset:function(e){let a=this,r=!0,n=a.datasetAutocomplete.value;if(t.is(n,"array")){r=!1;let e=n.length;if(0===e)return void(a._structureToStore=[]);let t=!1,i=a._structureToStore.length;if(e<i)for(let r=i-1;r>=0;r--){let i=a._structureToStore[r];t=!0;for(let a=0;a<e;a++){if(n[a]===i.datasetTitle){t=!1;break}}!0===t&&(a._structureToStore.splice(r,1),r=-1)}if(!0===t)return}let i={onComplete:function(e){a._warningReport="",a._deletedConcepts=!1,a._hierarchicalFatherMovement=!1,a._duplicateConcepts=!1,a._addOrnotInDataSetStructure(e,r),c.getOntologyConceptsFromSessionId(a._structureToStore).then(function(){let e=c.getRenamedConcepts();e&&(a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig10")+"<br><br>",e.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.original_concept.get("id")+" is renamed from "+e.original_concept.get("label")+" to "+e.renamed_concept.get("label")+"<br>"}));let r=c.getDeprecatedConcepts();r&&(a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig9")+"<br><br>",r.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let n=c.getUnDeprecatedConcepts();n&&(a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig8")+"<br><br>",n.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let i=c.getNewConcepts();t.is(i)&&(a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig7")+"<br><br>",i.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let s=c.getDeletedConcepts();t.is(s)&&(a._deletedConcepts=!0,a.areConceptsMoved()||a.areConceptsDuplicated()?a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig6")+"<br><br>":a._warningReport="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig6")+"<br>",s.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;"+e.get("id")+"<br>"}));let o=c.getMovedConcepts();t.is(o)&&(a._hierarchicalFatherMovement=!0,a.areConceptsDeleted()||a.areConceptsDuplicated()?a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig5")+"<br><br>":a._warningReport="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig5")+"<br><br>",o.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;<b>"+e.concept.get("id")+"</b> is moved from father <b>"+e.previous_father.get("id")+"</b> to father <b>"+e.current_father.get("id")+"</b><br>"}));let l=c.getDuplicateConcepts();t.is(l)&&(a._duplicateConcepts=!0,a.areConceptsDeleted()||a.areConceptsMoved()?a._warningReport+="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig4")+"<br><br>":a._warningReport="<br>"+u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig4")+"<br><br>",l.forEach(function(e){a._warningReport+="&nbsp;&nbsp;&nbsp;&nbsp;<b>"+e.org_concept.get("id")+"</b> is duplicated as <b>"+e.duplicate.get("id")+"</b> with label <b>"+e.duplicate.get("label")+"</b><br>"}))},function(){reject("Failed to compare datasets"),a._warningReport=u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig1")+"<br><br>"})},onFailure:function(e){a._addOrnotInDataSetStructure(e,r)}};o.getDataSetStructure(i)},getWarningReport:function(){let e=this._warningReport;return""===e&&(e=u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig2")),this.getSelectedDatasetTitle()||(e=u.get("6WTagsFilter.CompanyTags.CompanyTags.Warninig1")),e},areConceptsDeleted:function(){return this._deletedConcepts},areConceptsMoved:function(){return this._hierarchicalFatherMovement},areConceptsDuplicated:function(){return this._duplicateConcepts},_addOrnotInDataSetStructure:function(e,a){let r=this,n=t.is(e)&&e.datasetTitle,i=!0,s=r._structureToStore.length-1;if(t.is(a)&&!0===a)r._structureToStore=[],i=!0;else for(let e=s;e>=0;e--){if(r._structureToStore[e].datasetTitle===n){r._structureToStore.splice(e,1),i=!1;break}}!0===i&&r._structureToStore.push(e)}}}),define("DS/SearchControlCenter/scripts/SCCTagColorizationHelper",["UWA/Core","UWA/Promise","DS/FedDictionaryAccess/FedDictionaryAccessAPI","DS/WAFData/WAFData","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/SearchLogin","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SNInfraUX/SearchPreferences"],function(e,t,a,r,n,i,s,o,c){"use strict";return{getAllPredicates:function(e){var r=this;return new t(function(t,n){var i={};r.getAllTags().then(function(n){var s=r._getPredicateValuesWithSource(n);r._mergeTags(s,e),i.sourceInfo=s,r.getPredicateValuesNls(s).then(function(e){var r=Object.keys(e).map(function(e){return e.split("/").pop()});a.getResourcesInfo(r.join(","),{tenantId:o.getPlatformID(),onComplete:function(a){var r={};a.vocabularyElementNLSInfo.forEach(function(e){r[e.uri]=e.nlsName}),Object.keys(e).forEach(function(t){e[t].nls=r[t.split("/").pop()]}),i.colorization=e,t(i)},onFailure:function(){i.colorization={},t(i)}})})})})},getAllTags:function(){var a=this;return new t(function(t,s){var l=e.is(n.getOption("tagColorQuery"))?n.getOption("tagColorQuery"):e.is(c.getItem("tagColorQuery"))?c.getItem("tagColorQuery"):"[ds6w:modified]>1970/01/01";c.setItem("tagColorQuery",l);var d={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify({with_indexing_date:!0,with_nls:!1,label:"3DSearch-SCC-TagColorization"+i.getUserId()+"-"+(new Date).getTime(),locale:i.getLanguage(),query:l,refine:{},specific_source_parameter:{},select_predicate:["ds6w:label"],source:[],tenant:o.getPlatformID(),nresults:1,order_by:"desc",order_field:"relevance",start:0,with_synthesis:!0})};a.get3DSearchSericeURLPromise().then(function(e){d.onComplete=function(e){var r=JSON.parse(e),n=a._removeUnsupportedTagValues(r.facets);t(n)},d.onFailure=function(e){s(e)},r.authenticatedRequest(e+"/search",d)})})},_removeUnsupportedTagValues:function(t){var a=[];if(e.is(t,"array")){var r=n.getOption("tagColorization");a=t.filter(function(e){return r.supported_value_types.indexOf(e.type)>=0&&r.unsupported_predicates.indexOf(e.sixw)<0})}return a},getPredicateValuesNls:function(a){var r=this;return new t(function(t,n){var i={},o={},c={};e.is(a)&&(Object.keys(a).forEach(function(e){i[e]||(i[e]=[]),Object.keys(a[e]).forEach(t=>{i[e].push({value:t,source:[s.getServiceFromSource(a[e][t])]})})}),Object.keys(i).forEach(function(e){var t=e.split("/").pop();o[t]=i[e]}),r.getTagValuesNls(o).then(function(e){Object.keys(i).forEach(function(t){var a=t.split("/").pop();c[t]||(c[t]={values:e[a]})}),t(c)}))})},getTagValuesNls:function(e){return new t(function(t,r){a.getNlsOfPropertiesValuesBySource(e,{tenantId:o.getPlatformID(),lang:i.getLanguage(),onComplete:function(e){t(e)},onFailure:function(){t({})}})})},get3DSearchSericeURLPromise:function(){return i.getSericeURLPromise(o.getPlatformID(),"3DSearch")},_getPredicateValuesWithSource:function(t){var a={};return e.is(t,"array")&&t.forEach(t=>{if(e.is(t.object,"string")){var r=t.sixw;a[r]||(a[r]={}),a[r][t.object]=t.sources[0]}}),a},_mergeTags:function(t,a){e.is(t)&&e.is(a)&&Object.keys(a).forEach(r=>{e.is(t[r])?t[r]=e.merge(t[r],a[r]):t[r]=e.clone(a[r],!0)})}}}),define("DS/SearchControlCenter/scripts/SCCTagColorization",["UWA/Element","UWA/Core","UWA/Promise","DS/Controls/ComboBox","DS/SearchControlCenter/control/SCCCard","DS/SearchControlCenter/control/SCCColorPicker","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SCCTagColorizationHelper","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","DS/Controls/Toggle","DS/Controls/LineEditor","DS/SNInfraUX/SearchPreferences","DS/SNInfraUX/SearchSettings","DS/SNResultUX/utils/ExternalComponentHelpers"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_){"use strict";return{_tagColorizeMap:null,_parentDiv:null,_predicateToCBMap:null,render:function(e){this._parentDiv=e,this._tagColorizeMap={},this._predicateToCBMap=new Map},onRender:function(a){var n=this;n.tabSettings=a,n._cleanupUI();var i=t.is(n.tabSettings)&&t.is(n.tabSettings.sourceInfo)?n.tabSettings.sourceInfo:void 0;o.getAllPredicates(i).then(function(a){n.tagsToShowInCB=t.clone(a.colorization,!0),n.tagsSource=t.clone(a.sourceInfo,!0),n.div6WtagsColorizeSpan=e.create("div",{class:"scc_taghierarchical_div",id:"search-center-tag-colorize"}).inject(n._parentDiv);var i=e.create("div",{class:"search_center_general_tab_div search_center_margin"}).inject(n.div6WtagsColorizeSpan),s=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"div_tag_olorize_text"}).inject(i);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:c.get("6WTagsFilter.ColorizeTagTitle")}).inject(s);var o=e.create("div",{class:"search_center_div_left",id:"div_tag_colorize_card_combo_span"}).inject(n.div6WtagsColorizeSpan);h.getOption("updateQuery")&&n._changeSearchQueryUI().inject(o);var l=e.create("div",{class:"search_center_div_datasource search_center_only_grid search_center_top_margin",id:"div_tag_colorize_combo_span"}).inject(o);n.tagColorizePredicatesComboBox=new r({elementsList:n._predicateToShowCB(),placeholder:c.get("6WTagsFilter.ColorizeTag.PredicateComboBox.placeholder"),touchMode:!0,mainElementVisibleFlag:!0}).inject(l),n.divTagColorizeCardSpan=e.create("div",{class:"div-tag-colorize-card-span",id:"div_tag_colorize_card_span"}).inject(o);var d=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(s);_.tooltip(d,{position:"top",shortHelp:c.get("6WTagsFilter.ColorizeTag.PredicateComboBox.info")}),n.tagColorizePredicatesComboBox.addEventListener("hide",n._onChangePredicates.bind(n),!1),t.is(n.tabSettings)&&n._createCardsWithStoredPredicates(n.tabSettings.colorization)})},_createCardsWithStoredPredicates:function(e){var a=this;t.is(e)&&Object.keys(e).length>0&&Object.keys(e).forEach(function(t){var r=e[t],n=a._createPredicateCard(t);Object.keys(a._storedValueToShow(t,r)).forEach(function(e){a._createPredicateValueCard(n.getBodyElement(),t,e,r[e])})})},_onChangePredicates:function(e){if(-1!==e.dsModel.selectedIndex){e.stopPropagation();var t=e.dsModel.value;e.dsModel.currentLabel;this._createPredicateCard(t),e.currentTarget.dsModel.selectedIndex=-1}},_createPredicateCard:function(a){var i=this,s=i.tagsToShowInCB[a].nls;if(i._isPredicateCardAlreadyPresent(a)){var o=c.get("6WTagsFilter.ColorizeTag.warning.predicateExist");this._showWarningAlert(o)}else{if(!(t.is(i._tagColorizeMap,"object")&&Object.keys(i._tagColorizeMap).length>=100)){var l=e.create("div",{class:"div-scc-card-container"}).inject(this.divTagColorizeCardSpan),d=new n({header:{label:s,value:a},closable:!0,isBodyRequired:!0,className:"scc-predicate-card"}).inject(l),u=e.create("div",{class:"div-tag-colorize-combo-box search_center_only_grid"}),h=new r({elementsList:i._valueToShowInCB(a),placeholder:c.get("6WTagsFilter.ColorizeTag.ValueComboBox.placeholder"),touchMode:!0,domId:"colorize_tag_"+s.replace(/[/\s]/g,"_"),mainElementVisibleFlag:!0}).inject(u);return d.appendChildToBody(u),i._storePredicateInMemory(a),i._predicateToCBMap.set(a,h),h.addEventListener("hide",function(e){i._onChangeValues(e,a)},!1),d.addEvent("onClose",function(e){i._removePredicate(e,a)}),i._removeFromCBModel(this.tagColorizePredicatesComboBox,a),d}o=c.get("6WTagsFilter.ColorizeTag.warning.predicateExeedsLimit");this._showWarningAlert(o)}},_onChangeValues:function(e,t){if(e.stopPropagation(),s.enableButtons(),-1!==e.dsModel.selectedIndex){e.dsModel.currentLabel;var a=e.dsModel.currentValue,r=e.currentTarget.getParent().getParent();this._createPredicateValueCard(r,t,a),e.dsModel.selectedIndex=-1}},_createPredicateValueCard:function(a,r,s,o){var l=this;if(l._isValueCardAlreadyPresent(r,s)){var d=c.get("6WTagsFilter.ColorizeTag.warning.predicateValueExist");this._showWarningAlert(d)}else{var u=l._tagColorizeMap[r];if(t.is(u,"object")&&Object.keys(u).length>=21){d=c.get("6WTagsFilter.ColorizeTag.warning.valueExeedsLimit");this._showWarningAlert(d)}else{var h=l.tagsToShowInCB[r].values[s],_=e.create("div",{class:"div-tag-colorize-predicate-value scc-card-flex"}),p=new i({initialValue:o,colorPickerLabel:h}).inject(_),g=new n({header:{label:h,value:s},closable:!0,isBodyRequired:!1,className:"scc-predicate-value-card"}).inject(_);_.inject(a),this._storePredicateValuesInMemory(r,s,p._getCurrentColor()),p.addEvent("onColorChange",function(e){l._onColorChange(e,r,s)}),g.addEvent("onClose",function(e){l._removePredicateValue(e,r,s)}),l._removeFromCBModel(l._predicateToCBMap.get(r),s)}}},_onColorChange:function(e,t,a){s.enableButtons(),this._storePredicateValuesInMemory(t,a,e.color)},_removePredicateValue:function(e,t,a){var r=e.target;s.enableButtons(),this._addToCBModel(this._predicateToCBMap.get(t),a,this.tagsToShowInCB[t].values[a]),this._removePredicateValueFromMemory(t,a),r.getParent().destroy()},_removePredicate:function(e,t){var a=e.target;s.enableButtons(),this._removePredicateFromMemory(t),this._addToCBModel(this.tagColorizePredicatesComboBox,t,this.tagsToShowInCB[t].nls),this._predicateToCBMap.delete(t),a.getParent().destroy()},getInputsToStore:function(){var e=this,a={};a.colorization=t.clone(this._tagColorizeMap,!0);var r={};return Object.keys(e._tagColorizeMap).forEach(t=>{Object.keys(e._tagColorizeMap[t]).forEach(a=>{r[t]||(r[t]={}),r[t][a]=e.tagsSource[t][a]})}),a.sourceInfo=r,e.tabSettings=a,a},_storePredicateInMemory:function(e){t.is(e)&&(t.is(this._tagColorizeMap[e])||(this._tagColorizeMap[e]={}))},_storePredicateValuesInMemory:function(e,a,r){if(t.is(e)&&t.is(a)&&t.is(r)){t.is(this._tagColorizeMap[e])||(this._tagColorizeMap[e]={});var n=this.tagsToShowInCB[e].values[a],i=this;Object.keys(this.tagsToShowInCB[e].values).forEach(function(t){i.tagsToShowInCB[e].values[t]==n&&(i._tagColorizeMap[e][t]=r)})}},_removePredicateValueFromMemory:function(e,a){if(t.is(e)&&t.is(a)){var r=this.tagsToShowInCB[e].values[a],n=this;Object.keys(this._tagColorizeMap[e]).forEach(function(t){n.tagsToShowInCB[e].values[t]==r&&delete n._tagColorizeMap[e][t]})}},_removePredicateFromMemory:function(e){t.is(e)&&delete this._tagColorizeMap[e]},_predicateToShowCB:function(){var e=this,t=[];return Object.keys(e.tagsToShowInCB).forEach(function(a){t.push({label:e.tagsToShowInCB[a].nls,value:a})}),t},_removeFromCBModel:function(e,a){var r=e.elementsList;if(t.is(r,"array")&&r.length>0){var n=t.clone(r,!0);n.forEach((t,r)=>{if(t.value===a)return n.splice(r,1),void(e.elementsList=n)})}},_addToCBModel:function(e,a,r){var n=e.elementsList;if(t.is(n,"array")){var i=t.clone(n,!0);i.push({label:r,value:a}),e.elementsList=i}},_valueToShowInCB:function(e){var t=this,a=[],r={};return Object.keys(t.tagsToShowInCB[e].values).forEach(function(n){var i=t.tagsToShowInCB[e].values[n];r[i]||(a.push({label:i,value:n}),r[i]=!0)}),a},_storedValueToShow:function(e,t){var a={},r={},n=this;return Object.keys(t).forEach(function(i){var s=n.tagsToShowInCB[e].values[i];a[s]||(r[i]=t[i],a[s]=!0)}),r},_isPredicateCardAlreadyPresent:function(e){return t.is(this._tagColorizeMap[e])},_isValueCardAlreadyPresent:function(e,a){return t.is(this._tagColorizeMap[e][a])},_showWarningAlert:function(e){var t=s.createWdgAlert();t.inject(widget.body,"top"),t.add({className:"warning applyChangesAlert",message:e})},_cleanupUI:function(){t.is(this.div6WtagsColorizeSpan)&&(this.div6WtagsColorizeSpan.destroy(),this.div6WtagsColorizeSpan=null),this._tagColorizeMap={},this._predicateToCBMap.clear()},_changeSearchQueryUI:function(){var t=this,a=e.create("div",{class:"div-change-search-query"}),r=e.create("div",{class:"div-change-search-query-toggle"}).inject(a),n=new l({type:"checkbox",label:c.get("6WTagsFilter.ColorizeTag.ChnageQuery.label"),checkFlag:!1,value:0}).inject(r),i=e.create("div",{class:"div-change-search-query-editor scc-card-flex search_center_disable",disabled:!0,styles:{height:"36px",border:"solid 1px #c9baba","border-radius":"4px"}}).inject(a),s=e.create("input",{placeholder:c.get("6WTagsFilter.ColorizeTag.ChnageQuery.placeholder"),type:"search",value:u.getItem("tagColorQuery"),styles:{width:"100%",border:"none","margin-left":"5px"}}).inject(i);e.create("div",{class:"fonticon fonticon-update",styles:{right:"12px",cursor:"pointer","margin-top":"6px","margin-right":"6px"},events:{click:function(){u.setItem("tagColorQuery",s.value),t.onRender(t.tabSettings)}}}).inject(i);return n.addEventListener("buttonclick",function(e){e.stopPropagation(),e.dsModel.checkFlag?i.removeClassName("search_center_disable"):i.addClassName("search_center_disable")}),a}}}),define("DS/SearchControlCenter/scripts/Searchcontrol6WTagsFilter",["UWA/Element","UWA/Core","UWA/Promise","DS/Handlebars/Handlebars","DS/Controls/Toggle","DS/Controls/ComboBox","DS/Controls/LineEditor","DS/Controls/Editor","DS/UIKIT/Popover","DS/UIKIT/Mask","DS/FedDictionaryAccess/FedDictionaryAccessAPI","css!DS/SearchControlCenter/SearchControlCenter","i18n!DS/SearchControlCenter/assets/nls/SearchControlCenter.json","text!DS/SearchControlCenter/assets/templates/SavedTags.html","text!DS/SearchControlCenter/assets/SearchControlCenter_AllowedApps.json","DS/SearchControlCenter/scripts/SearchControlCenterServices","DS/SearchControlCenter/scripts/SCCTagColorization","DS/SearchControlCenter/scripts/ControlledVocabulary/SCCControlledVocabulary","DS/SearchControlCenter/scripts/ControlledOntology/SCCControlledOntology","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCOntologyUtils","DS/SearchControlCenter/scripts/ControlledOntology/utils/SCCInContextSearchManager","text!DS/SNInfraUX/assets/SearchcontrolCenter_TagRelationship.json","DS/SNInfraUX/SearchSettings","DS/SNInfraUX/SearchUtils","DS/SNInfraUX/TaggerConfigAccess","DS/UIKIT/Modal","DS/UIKIT/Input/Button","DS/UIKIT/Input/Text","DS/SNInfraUX/SearchControlCenterFetchService","DS/UIKIT/Scroller","DS/SearchControlCenter/Views/SearchControlCenterLayoutView","DS/Controls/Button","DS/Controls/ButtonGroup","DS/SNInfraUX/SearchPreferences","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/Windows/ImmersiveFrame","DS/TagNavigator/simplified/views/WrapperView","DS/Controls/Label","DS/Utilities/WebUXColorEnums"],function(e,t,a,r,n,i,s,o,c,l,d,u,h,_,p,g,m,f,C,v,y,b,S,x,D,T,A,w,I,N,P,j,W,E,O,B,F,R,M,U){"use strict";let k={preferredPredicatesComboBox:null,preferredWhatCards:null,preferredWhereCards:null,preferredWhoCards:null,preferredWhenCards:null,preferredHowCards:null,preferredWhyCards:null,excludedPredicatesComboBox:null,excludedWhatCards:null,excludedWhereCards:null,excludedWhoCards:null,excludedWhenCards:null,excludedHowCards:null,excludedWhyCards:null,checkboxAttributeDisplay:null,toggleActivateTagOperator:null,applicationCntxtComboBox:null,companyTagsSearchSuggest:null,_attributesMap:{},_6WSubProperties:[],_6WPredicatesMap:[],_listOfDefaultAndTags:[],_listOfIrrelevantAndTags:[],_appsMap:{},_filter6WRootPredicatesPromise:a.deferred(),_rootWOfPredicatesPromise:a.deferred(),_datasetInput:null,iconurlInput:"",prefixInput:"",scrollerText:"",_expertGrp:"",_advocacyGrp:"",scrollerBody:{},_controlledVocabMode:!1,_includeTagVal:"",_includeTagUri:"",_excludeTagVal:"",_includeWVal:"",_includeDHierarchyTagVal:"",_operatorOR:"",_operatorAND:"",_operatorXOR:"",_operatortag:"",_textOnCard:"",onRenderFacet:function(a){let s=e.create("div",{class:"scc_tagsDisplay_div",id:"search-center-6w1"}).inject(a),o=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"general-tab-resultsdisplay-text"}).inject(s);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:h.get("6WTagsFilter.tagsDisplay.title")}).inject(o);let l=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"controlledVocabModeSpan"}).inject(s),d=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"Enable_option_to_edit_tags_categories"}).inject(l);k.EditTagCategoryON=new n({type:"switch",label:h.get("6WTagsFilter.TagDisplay.Toggle.label"),touchMode:!0,value:1}).inject(d),k.EditTagCategoryON.addEventListener("change",function(){g.enableButtons(),!1===k.EditTagCategoryON.checkFlag?(x.addClassName("search_center_disable"),D.addClassName("search_center_disable"),k.divWtreeWrapperview.addClassName("search_center_disable"),O.addClassName("search_center_disable")):(x.removeClassName("search_center_disable"),D.removeClassName("search_center_disable"),k.divWtreeWrapperview.removeClassName("search_center_disable"),O.removeClassName("search_center_disable"))}.bind(this));let u=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(d);new c({target:u,className:".inverted",trigger:"hover",animate:"true",position:"right",body:h.get("6WTagsFilter.EditTagCategory.popover"),title:""});let x=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"general-tab-resultsdisplay-text"}).inject(s);e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex",text:h.get("6WTagsFilter.SelectAppConfiguration.display")}).inject(x);let D=e.create("div",{class:"search_center_div_left_6w search_center_only_grid",id:"context-Application-6WTags-combo"}).inject(s),w=[],P=JSON.parse(p);if(t.is(P)&&P.hasOwnProperty("applications")&&t.is(P.applications,"array"))for(let e=0;e<P.applications.length;e++){let t=P.applications[e];k._appsMap[t.nlsName]=t.appID,w.push(t.nlsName)}k.applicationConfigComboBox=new i({elementsList:w,currentValue:w[0],selectedIndex:0,touchMode:!0,mainElementVisibleFlag:!0}).inject(D),k.applicationConfigComboBox.addEventListener("change",function(){g.enableButtons(),g.clearLocalCacheFor6WTags(),k.cleanUpAttributeTags();let e=k._getWtreeContents(k.divWhatContent);if(0===e.predicates.length&&0===e.excluded_predicates.length){let e=document.getElementById("content-what");k.collapseRootWArea(e)}let a=k._getWtreeContents(k.divWhoContent);if(0===a.predicates.length&&0===a.excluded_predicates.length){let e=document.getElementById("content-who");k.collapseRootWArea(e)}let r=k._getWtreeContents(k.divWhenContent);if(0===r.predicates.length&&0===r.excluded_predicates.length){let e=document.getElementById("content-when");k.collapseRootWArea(e)}let n=k._getWtreeContents(k.divWhereContent);if(0===n.predicates.length&&0===n.excluded_predicates.length){let e=document.getElementById("content-where");k.collapseRootWArea(e)}let i=k._getWtreeContents(k.divWhyContent);if(0===i.predicates.length&&0===i.excluded_predicates.length){let e=document.getElementById("content-why");k.collapseRootWArea(e)}let s=k._getWtreeContents(k.divHowContent);if(0===s.predicates.length&&0===s.excluded_predicates.length){let e=document.getElementById("content-how");k.collapseRootWArea(e)}I.getAppWisePredicates(k._appsMap[k.applicationConfigComboBox.currentValue],!1).then(function(e){let a=null,r=null;if(e.hasOwnProperty("preferred_predicates")&&(a=e.preferred_predicates),e.hasOwnProperty("excluded_predicates")&&(r=e.excluded_predicates),t.is(a)&&a.length>0)for(let e=0;e<a.length;e++){let t=a[e].uri,r=k._get6WVal(t),n={label:k._attributesMap[t],uri:t,wVal:r};k._includeTagValue(n)}if(t.is(r)&&r.length>0)for(let e=0;e<r.length;e++){let t=r[e].uri,a=k._get6WVal(t),n={label:k._attributesMap[t],uri:t,wVal:a};k._excludeTagValue(n)}},function(){console.log("Error: Default json for preferred predicates has not been defined yet for this APP")})}.bind(this));let E=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"general-tab-resultsdisplay-text"}).inject(s);e.create("p",{class:"button_tags search_center_general_display_flex",text:h.get("6WTagsFilter.SelectAppConfigurationtagline.display")}).inject(E);let O=e.create("div",{class:"search_center_div_right_6w search_center_only_grid search_center_top_margin",id:"6WtagsButtonspan"}).inject(s),B=new W({type:"checkbox"}).inject(O),F=new j({label:h.get("SearchCenter6WTagsFilter.includetagin6WtreeButton.value"),emphasize:"primary",displayStyle:"normal",domId:"includeTag",class:"button_tags"});B.addChild(F);let U=new j({label:h.get("SearchCenter6WTagsFilterexcludetagin6WtreeButton.value"),emphasize:"secondary",displayStyle:"normal",domId:"ExcludeTag",class:"button_tags"});B.addChild(U);let V=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"controlledVocabToggleSpan"}).inject(s),L=this,Q=new T({className:"site-reset",closable:!0,header:h.get("SearchCenter6WTagsFilter.includetagin6WtreeButton.value"),body:"",footer:[new A({value:"Include",className:"primary",id:"Include_button",events:{onClick:function(){L._includeTagValue(),Q.hide()}}}),new A({value:"Cancel",className:"default",id:"Include_cancel_button",events:{onClick:function(){Q.hide()}}})]}).inject(V);Q.setBody(this._createAppAttrControl("includeModal")),F.addEventListener("buttonclick",function(){Q.show()});let H=new T({className:"site-reset",closable:!0,header:h.get("SearchCenter6WTagsFilterexcludetagin6WtreeButton.value"),body:"",footer:[new A({value:"Exclude",id:"Exclude_button",className:"primary",events:{onClick:function(){L._excludeTagValue(),H.hide()}}}),new A({value:"Cancel",className:"default",id:"Exclude_cancel_button",events:{onClick:function(){H.hide()}}})]}).inject(V);U.addEventListener("buttonclick",function(){H.show()}),H.setBody(this._createAppAttrControl("excludeModal")),k.divWtreeWrapperview=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6Wtree_wrapper",styles:{"overflow- y":"auto","overflow- x":"auto"}}).inject(s),k.divWtreeWrapperview.addClassName("root-wrapper-view-scc"),k.divWhatContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_What_Content_div"}),k.divWhoContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_Who_Content_div"}),k.divWhenContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_When_Content_div"}),k.divWhereContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_Where_Content_div"}),k.divWhyContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_Why_Content_div"}),k.divHowContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6W_How_Content_div"});const z=[{rootW:"ds6w:what",wExpandStatus:!0,expandDirection:"vertical",content:k.divWhatContent,noResize:!0},{rootW:"ds6w:who",wExpandStatus:!0,expandDirection:"vertical",content:k.divWhoContent,noResize:!1},{rootW:"ds6w:when",wExpandStatus:!0,expandDirection:"vertical",content:k.divWhenContent,noResize:!1},{rootW:"ds6w:where",wExpandStatus:!0,expandDirection:"vertical",content:k.divWhereContent,noResize:!1},{rootW:"ds6w:why",wExpandStatus:!0,expandDirection:"vertical",content:k.divWhyContent,noResize:!1},{rootW:"ds6w:how",wExpandStatus:!0,expandDirection:"vertical",content:k.divHowContent,noResize:!1}];for(let e of z){new R(e).render().inject(k.divWtreeWrapperview)}!1===k.EditTagCategoryON.checkFlag?(x.addClassName("search_center_disable"),D.addClassName("search_center_disable"),k.divWtreeWrapperview.addClassName("search_center_disable"),O.addClassName("search_center_disable")):(x.removeClassName("search_center_disable"),D.removeClassName("search_center_disable"),k.divWtreeWrapperview.removeClassName("search_center_disable"),O.removeClassName("search_center_disable"));let X=e.create("div",{class:"scc_tagsOperator_div",id:"search-center-6w2"}).inject(a),J=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"tagoperatortext"}).inject(X);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:h.get("6WTagsFilter.tagOperator.title")}).inject(J);let G=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"tagoperatorSpan"}).inject(X),q=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"toggleenabletagoperatortext"}).inject(G);k.toggleActivateTagOperator=new n({type:"switch",label:h.get("6WTagsFilter.TagOperator.Toggle.label"),value:0,touchMode:!0}).inject(q),k.toggleActivateTagOperator.addEventListener("change",function(){g.enableButtons(),!1===k.toggleActivateTagOperator.checkFlag?(k.tagRelationshipCards.addClassName("search_center_disable"),$.addClassName("search_center_disable")):(k.tagRelationshipCards.removeClassName("search_center_disable"),$.removeClassName("search_center_disable"))}.bind(this));let K=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(q);new c({target:K,className:".inverted",trigger:"hover",animate:"true",position:"right",body:h.get("6WTagsFilter.tagOperator.popover"),title:""});let Y=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_top_margin",id:"general-tab-resultsdisplay-text"}).inject(X);e.create("p",{class:"button_tags search_center_general_display_flex",text:h.get("6WTagsFilter.Tagoperatortagline.display")}).inject(Y);let $=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex search_center_disable",id:"general-tab-resultsdisplay-text"}).inject(X),Z=new j({label:h.get("AddTagOperatorButton.value"),emphasize:"primary",displayStyle:"normal",domId:"add_tag_operator",class:"button_tags"}).inject($),ee=new T({className:"site-reset",closable:!0,header:h.get("AddTagOperatorButton.value"),body:"",footer:[new A({value:"Add",className:"primary",id:"Add_button",events:{onClick:function(){L._addtagOperator(),ee.hide()}}}),new A({value:"Cancel",className:"default",id:"Cancel_Add_button",events:{onClick:function(){ee.hide()}}})]}).inject(V);ee.setBody(this._createTagOperatorModal("tagOperatorModal")),Z.addEventListener("buttonclick",function(){ee.show()}),k.divDatagrid=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"Datagrid-div",styles:{"overflow- y":"auto","overflow- x":"auto",height:"auto"}}).inject(X),k.tagRelationshipCards=e.create("div",{class:"search_center_created_categories_section_header scc-tag-relationship-row search_center_disable",id:"tag_operator_tagRelationshipCards"}).inject(k.divDatagrid);let te=e.create("div",{class:"search_center_created_categories_section_header search_center_font_and_color search_center_general_display_flex",id:"Tag_operator_table_span"}).inject(k.tagRelationshipCards),ae=(e.create("div",{class:"search_center_font_and_color",text:h.get("Tag.display"),Styles:{width:"400px"}}).inject(te),e.create("div",{class:"search_center_font_and_color margin_left_right",id:"OperatorText",text:h.get("Operator.display"),Styles:{"margin-right":"1px"}}).inject(te),e.create("div",{class:"search_center_font_and_color  margin_left_right",text:h.get("Action.display"),Styles:{"margin-right":"1px"}}).inject(te),k.tagRelationshipCards);if(ae.childElementCount>1?ae.show():ae.hide(),this._listOfDefaultAndTags.length<=0&&this._listOfIrrelevantAndTags.length<=0){let e=JSON.parse(b);if(t.is(e)&&e.hasOwnProperty("Predicates_Default_AND")&&t.is(e.Predicates_Default_AND,"array"))for(let t=0;t<e.Predicates_Default_AND.length;t++){let a=e.Predicates_Default_AND[t];this._listOfDefaultAndTags.push(a)}if(t.is(e)&&e.hasOwnProperty("Predicates_Irrelevant_AND")&&t.is(e.Predicates_Irrelevant_AND,"array"))for(let t=0;t<e.Predicates_Irrelevant_AND.length;t++){let a=e.Predicates_Irrelevant_AND[t];this._listOfIrrelevantAndTags.push(a)}}let re=e.create("div",{class:"scc-6w-saved-tags",id:"scc-6w-saved-tags"}).inject(a),ne=r.compile(_);re.setContent(ne()),re.getElement(".scc-saved-tags-title-text").setText(h.get("savedTagsSection")),new M({value:"BETA",emphasize:"warning"}).inject(re.getElement(".scc-saved-tags-beta"));let ie=re.getElement(".saved-tags-info");new c({target:ie,className:".inverted",trigger:"hover",animate:"true",position:"right",body:h.get("savedTagsTooltip"),title:""}),k.savedTagsToggle=new n({type:"switch",label:h.get("savedTagsTitle"),touchMode:!0,value:0}).inject(re.getElement(".scc-saved-tags-wux-toggle")),k.savedTagsToggle.addEventListener("change",function(){g.enableButtons()});let se=e.create("div",{class:"scc_taghierarchical_div",id:"search-center-6w3"}).inject(a),oe=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex ",id:"taghierarchicaltext"}).inject(se);e.create("p",{class:"scc_text_heading search_center_general_display_flex",text:h.get("6WTagsFilter.taghierarchical.title")}).inject(oe);let ce=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"taghierarchicalSpan"}).inject(se),le=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:"toggleenabletaghierarchicaltext"}).inject(ce);k.EnableTagHierarchicalON=new n({type:"switch",label:h.get("6WTagsFilter.taghierarchicaltoggle.label"),touchMode:!0,value:0}).inject(le),k.EnableTagHierarchicalON.addEventListener("change",function(){g.enableButtons(),!1===k.EnableTagHierarchicalON.checkFlag?(k.divDHierarchyWtree.addClassName("search_center_disable"),ue.addClassName("search_center_disable")):(k.divDHierarchyWtree.removeClassName("search_center_disable"),ue.removeClassName("search_center_disable"))}.bind(this));let de=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(le);new c({target:de,className:".inverted",trigger:"hover",animate:"true",position:"right",body:h.get("6WTagsFilter.EditTagHierarchical.popover"),title:""});let ue=e.create("div",{class:"search_center_div_right_6w search_center_general_display_flex",id:"divAddDeepHierarchyTag"}).inject(se),he=new j({label:h.get("AddDeepHierarchyTagButton.value"),emphasize:"primary",displayStyle:"normal",domId:"adddeepHierarchytag",class:"button_tags search_center_div_right"}).inject(ue),_e=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"divAddDeepHierarchyTag"}).inject(s),pe=new T({className:"site-reset",closable:!0,header:h.get("AddDeepHierarchyTagButton.value"),body:"",footer:[new A({id:"addDeepHierarchy_addButton",value:"Add",className:"primary",events:{onClick:function(){L._includeDHierarchyTagValue(),pe.hide()}}}),new A({id:"addDeepHierarchy_cancelButton",value:"Cancel",className:"default",events:{onClick:function(){pe.hide()}}})]}).inject(_e);he.addEventListener("buttonclick",function(){pe.show()}),pe.setBody(this._createAppAttrControl("hierarchyModal")),k.divDHierarchyWtree=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"6Wtree_hierarchy_wrapper",styles:{"overflow- y":"auto","overflow- x":"auto"}}).inject(se),k.divDHierarchyWtree.addClassName("root-wrapper-view-scc"),k.divDHierarchyWhatContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhat_Content_div"}),k.divDHierarchyWhoContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWho_Content_div"}),k.divDHierarchyWhenContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhen_Content_div"}),k.divDHierarchyWhereContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhere_Content_div"}),k.divDHierarchyWhyContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyWhy_Content_div"}),k.divDHierarchyHowContent=e.create("div",{class:"search_center_div_left_6w search_center_only_grid search_center_top_margin",id:"DeepHierarchyHow_Content_div"});const ge=[{rootW:"ds6w:what",wExpandStatus:!1,expandDirection:"vertical",content:k.divDHierarchyWhatContent,noResize:!0},{rootW:"ds6w:who",wExpandStatus:!1,expandDirection:"vertical",content:k.divDHierarchyWhoContent,noResize:!1},{rootW:"ds6w:when",wExpandStatus:!1,expandDirection:"vertical",content:k.divDHierarchyWhenContent,noResize:!1},{rootW:"ds6w:where",wExpandStatus:!1,expandDirection:"vertical",content:k.divDHierarchyWhereContent,noResize:!1},{rootW:"ds6w:why",wExpandStatus:!1,expandDirection:"vertical",content:k.divDHierarchyWhyContent,noResize:!1},{rootW:"ds6w:how",wExpandStatus:!1,expandDirection:"vertical",content:k.divDHierarchyHowContent,noResize:!1}];for(let e of ge){new R(e).render().inject(k.divDHierarchyWtree)}!1===k.EnableTagHierarchicalON.checkFlag?(k.divDHierarchyWtree.addClassName("search_center_disable"),ue.addClassName("search_center_disable")):(k.divDHierarchyWtree.removeClassName("search_center_disable"),ue.removeClassName("search_center_disable"));let me=e.create("div",{class:"scc_taghierarchical_div",id:"tagCororize_div"}).inject(a),fe=e.create("div",{class:"scc_taghierarchical_div",id:"company_tag_div"}).inject(a);if(!0===this._isCompanyTagsActivated()){let a=e.create("div",{class:"search_center_category_section1 "}).inject(fe),r=(e.create("div",{class:"search_center_main_div"}).inject(fe),e.create("div",{class:"search_center_main_div"}).inject(fe),e.create("div",{id:"Company_Tag_Main_Div"}).inject(fe)),i=e.create("div",{class:"companyTagsLevelDiv"}).inject(r),s=(e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagsHeader",text:h.get("6WTagsFilter.CompanyTags.companyTagslevel1i.text")}).inject(i),e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"currentDatasetSpan"}).inject(r)),o=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"currentDatasetText"}).inject(s);e.create("p",{class:"search_center_text",text:h.get("6WTagsFilter.CompanyTags.companyTagslevel2i.text")}).inject(o);let l=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"datasetSelectSpan"}).inject(s);var Ce=e.create("input",{type:"text",class:"form-control",id:"datasetInput",placeholder:h.get("6WTagsFilter.ControlledOntology.Dataset.title"),disabled:"true"}).inject(l);this._datasetInput=Ce,this.getCurrentDatasetTitle(Ce);var ve=new T({id:"datasetSelectormodal",className:"site-reset",closable:!0,header:"<h4>"+h.get("6WTagsFilter.CompanyTags.datasetSelectormodal.header")+"</h4>",body:"",footer:[new A({id:"datasetSelectormodalUpdateBtn",value:h.get("6WTagsFilter.CompanyTags.datasetSelectormodal.updateBtn"),className:"primary",events:{onClick:function(){ve.hide(),be.hide(),_.show(),we.hide();var e=C.getSelectedDatasetTitle();e&&Ce.setAttribute("placeholder",e)}}}),new A({id:"datasetSelectormodalCancelBtn",value:h.get("6WTagsFilter.CompanyTags.datasetSelectormodal.cancelBtn"),className:"default",events:{onClick:function(){ve.hide()}}})]}).inject(l);let d=e.create("div",{id:"comboBoxDiv"});ve.setBody(d);var ye=e.create("span",{}).inject(l),be=new A({id:"updateDatasetBtn",value:h.get("6WTagsFilter.CompanyTags.updateDatasetBtn.value"),events:{onClick:function(){I.getSearchSettings({tenantID:g.platformID}).then(function(e){if(e.hasOwnProperty("enterprise_ontology")&&t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0){let t=[{dataset:e.enterprise_ontology.dataset[0].dataset,datasetTitle:e.enterprise_ontology.dataset[0].datasetTitle,sessionId:e.enterprise_ontology.dataset[0].sessionId,"session@id":e.enterprise_ontology.dataset[0]["session@id"],sessionTitle:e.enterprise_ontology.dataset[0].sessionTitle}];v.getOntologyConceptsFromSessionId(t).then(function(){console.log("First time test")},function(){reject("Fail: First in session")})}e.hasOwnProperty("enterprise_ontology")&&t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0&&Ce.setAttribute("placeholder",e.enterprise_ontology.dataset[0].datasetTitle)}),ve.show()}}}).inject(ye);let u=e.create("div",{id:"companyTagslevel2iii ",class:"companyTagsLevelSubDiv"}).inject(l),_=e.create("div",{class:"companyTagsLevelSubDiv"}).inject(u);new A({value:h.get("6WTagsFilter.CompanyTags.testNDeployBtn.value"),id:"testNDeployBtn",class:"companyTagslevel2iiiaBtn",className:"primary",events:{onClick:function(){Se.show(),Se.setBody(C.getWarningReport()),De.enable(),(C.areConceptsDuplicated()||C.areConceptsMoved()||C.areConceptsDeleted()||!C.getSelectedDatasetTitle())&&De.disable()}}}).inject(_);_.hide();new A({value:h.get("6WTagsFilter.CompanyTags.testBtn.value"),id:"testBtn",class:"companyTagslevel2iiiaBtn",className:"default",events:{onClick:function(){Te.show(),Te.setBody(C.getWarningReport())}}}).inject(_),new A({value:h.get("6WTagsFilter.CompanyTags.cancelUpdateBtn.value"),id:"cancelUpdateBtn",class:"companyTagslevel2iiiaBtn",className:"default",events:{onClick:function(){_.hide(),be.show(),we.show(),L.getCurrentDatasetTitle(Ce)}}}).inject(_);let p=e.create("div",{class:"search_center_text companyTagsLevelSubDiv"}).inject(u);var Se=new T({className:"site-reset",closable:!0,header:"<h4>"+h.get("6WTagsFilter.CompanyTags.statusModal.header")+"</h4>",footer:[]}).inject(p),xe=e.create("div",{}),De=new A({id:"statusModalFooterDeployBtn",value:h.get("6WTagsFilter.CompanyTags.deployBtn.value"),className:"primary",events:{onClick:function(){_.hide(),we.show(),be.show(),Se.hide(),C.onUpdateUI(),L.clickOnApply(),L.scrollerText=C.getSelectedDatasetTitle()+"\n"+L.scrollerText,L.scrollerBody.setText(L.scrollerText)}}}).inject(xe);new A({id:"statusModalFooterCancelDeployBtn",value:h.get("6WTagsFilter.CompanyTags.cancelDeployBtn.value"),className:"default",events:{onClick:function(){_.hide(),we.show(),be.show(),Se.hide(),L.getCurrentDatasetTitle(Ce)}}}).inject(xe);Se.setFooter(xe);var Te=new T({className:"site-reset",closable:!0,header:"<h4>"+h.get("6WTagsFilter.CompanyTags.statusModal2.header")+"</h4>",footer:[]}).inject(p),Ae=e.create("div",{});new A({id:"statusModal2FooterCancelTestBtn",value:h.get("6WTagsFilter.CompanyTags.cancelDeployBtn.value"),className:"default",events:{onClick:function(){Te.hide()}}}).inject(Ae);Te.setFooter(Ae);var we=new A({value:h.get("6WTagsFilter.CompanyTags.statusBtn.value"),className:" success btn-sm active companyTagStatus",events:{onClick:function(){we.setFocus(!1)}}}).inject(p);let m=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"previousDeploymentSpan"}).inject(r),f=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"previousDeploymentText"}).inject(m);e.create("p",{class:"search_center_text",text:h.get("6WTagsFilter.CompanyTags.companyTagslevel3i.text")}).inject(f);let b=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"previousDeploymentScroller"}).inject(m);this.scrollerBody=e.create("div",{id:"DataSetScroller",text:this.scrollerText?this.scrollerText:""}).inject(b),new N({element:this.scrollerBody}).inject(b);let S=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"CompanyTagsIconUrl"}).inject(r),x=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"iconInputText"}).inject(S);e.create("p",{class:"search_center_text",text:h.get("6WTagsFilter.CompanyTags.companyTagslevel4i.text")}).inject(x);let D=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"companytagsicon"}).inject(S);const w=h.get("6WTagsFilter.CompanyTags.companyTagsplaceholder1.text");k.iconurlInput=e.create("input",{type:"text",class:"form-control",id:"iconurlInput",placeholder:w,value:""}).inject(D),k.iconurlInput.addEventListener("change",function(){g.enableButtons(),this._iconurlInput=k.iconurlInput.value}.bind(this));let P=e.create("div",{id:"iconUrlClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(D);k.iconUrlClear=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"iconUrlClear"}).inject(P),k.iconUrlClear.setStyle("color","#b4b6ba"),k.iconUrlClear.addEventListener("click",function(){k.iconurlInput.value="",this._iconurlInput=""},!1);let W=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"companyTagPrefix"}).inject(r),E=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"prefixInputText"}).inject(W);e.create("p",{class:"search_center_text",text:h.get("6WTagsFilter.CompanyTags.companyTagslevel5i.text")}).inject(E);let O=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"companytagprefixdiv"}).inject(W);const B=h.get("6WTagsFilter.CompanyTags.companyTagsplaceholder2.text");k.prefixInput=e.create("input",{type:"text",class:"form-control",id:"prefixInput",placeholder:B,value:""}).inject(O),k.prefixInput.addEventListener("change",function(){g.enableButtons(),this._prefixInput=k.prefixInput.value}.bind(this));let F=e.create("div",{id:"prefixClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(O);k.prefixClear=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"prefixClear"}).inject(F),k.prefixClear.setStyle("color","#b4b6ba"),k.prefixClear.addEventListener("click",function(){k.prefixInput.value="",this._prefixInput=""},!1);let R=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"companyTagSuggest"}).inject(r),M=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"suggestText"}).inject(R);e.create("p",{class:"search_center_text",text:h.get("6WTagsFilter.CompanyTags.companyTagsSearchSuggests.specify.label")}).inject(M);let U=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"search-center-TagSuggest-chkbox"}).inject(R);if(k.companyTagsSearchSuggest=new n({type:"checkbox",label:h.get("6WTagsFilter.CompanyTags.companyTagsSearchSuggests.specify.label"),className:"primary",checkFlag:!1,touchMode:!0}).inject(U),k.companyTagsSearchSuggest.addEventListener("change",function(){g.enableButtons()}.bind(this)),!0===this._isExpertIdeationActivated()){let t=e.create("div",{class:"search_center_add_category_section "}).inject(r),a=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"companyTagexpertideation"}).inject(t),n=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"companyTagexpertideationText"}).inject(a);e.create("p",{class:"search_center_text",text:h.get("6WTagsFilter.CompanyTags.companyTagslevel7i.text")}).inject(n);let i=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"companyTagexpertideationChoose"}).inject(a);k.choose=new j({label:h.get("6WTagsFilter.CompanyTags.chooseBtn.value"),id:"chooseBtn",class:"search_center_text companyTagschooseBtn",className:"primary",domId:"Expertideation_chooseBtn"}).inject(i),k.expertGroupDisplay=e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagslevel4i",text:""}).inject(i);let s=e.create("div",{id:"companyTagexpertideationClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(a);k.fontIconTrash=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"expertIdeationFontIconTrash"}).inject(s),k.fontIconTrash.addEventListener("click",function(){console.log("In expertGroupRemove"),k.expertGroupDisplay.setText(""),k.expertGroupDisplay.hide(),k.choose.show(),k.fontIconTrash.hide()},!1),k.fontIconTrash.hide(),k.expertGroupDisplay.hide(),k.expertGroupDisplay.getText().length>0&&(k.choose.hide(),k.fontIconTrash.show(),k.expertGroupDisplay.setText(k.expertGroupDisplay.getText()),k.expertGroupDisplay.show()),k.choose.addEventListener("buttonclick",function(){y.search({title:"User group Results",precond:'[ds6w:type]:"foaf:Group"',source:["usersgroup"]}).then(function(e){e.label&&(k.choose.hide(),k.fontIconTrash.show(),k.expertGroupDisplay.setText(e.label),k.expertGroupDisplay.show())})}.bind(this))}if(!0===this._isDeleteCompanyTagActivated()){let t=e.create("div",{class:"search_center_general_tab_div search_center_margin search_center_add_category_bottom",id:"deleteManualCompanyTagSpan"}).inject(r),a=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"deleteManualCompanyTagText"}).inject(t);e.create("p",{class:"search_center_text",text:h.get("6WTagsFilter.CompanyTags.companyTagslevel8ii.text")}).inject(a);let n=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"deleteManualCompanyTagInput"}).inject(t);new j({label:"lite-borders displayStyle",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(n)}if(!0===this._isAdvocacyActivated()){let t=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:"companyTagadvocacyspan"}).inject(r),a=e.create("div",{class:"search_center_div_left search_center_general_display_flex",id:"companyTagAdvocacyText"}).inject(t);e.create("p",{class:"search_center_text",text:h.get("6WTagsFilter.CompanyTags.companyTagslevel9i.text")}).inject(a);let n=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"companyTagAdvocacyChoose"}).inject(t);k.chooseAdvocacy=new j({label:h.get("6WTagsFilter.CompanyTags.chooseBtn.value"),id:"chooseAdvocacy",class:"search_center_text companyTagschooseBtn",className:"primary",domId:"Advocacy_chooseBtn"}).inject(n),k.advocacyGroupDisplay=e.create("div",{class:"search_center_text companyTagsLevelSubDiv",id:"companyTagslevel4i",text:""}).inject(n);let i=e.create("div",{id:"companyTagexpertideationClose",class:"search_center_text companyTagsLevelSubDiv"}).inject(t);k.fontIconTrashA=e.create("div",{class:"search_center_text fonticon fonticon-clear fonticon-x search_center_delete_button_margin",id:"advocacyFontIconTrash"}).inject(i),k.fontIconTrashA.addEventListener("click",function(){console.log("In advocacyGroupRemove"),k.advocacyGroupDisplay.setText(""),k.advocacyGroupDisplay.value="",k.advocacyGroupDisplay.hide(),k.chooseAdvocacy.show(),k.fontIconTrashA.hide()},!1),k.fontIconTrashA.hide(),k.advocacyGroupDisplay.hide(),k.chooseAdvocacy.addEventListener("buttonclick",function(){y.search({title:"Community Results",precond:'[ds6w:type]:"swym:Community"',source:["swym"]}).then(function(e){e.label&&(k.chooseAdvocacy.hide(),k.fontIconTrashA.show(),k.advocacyGroupDisplay.setText(e.label),k.advocacyGroupDisplay.value=e.id,k.advocacyGroupDisplay.show())})}.bind(this))}let V=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"controlledVocabModeSpan"}).inject(a),Q=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"controlledVocabModeText"}).inject(V),H=e.create("div",{class:"search_center_div_right search_center_general_display_flex",id:"controlledVocabToggleSpan"}).inject(V);k.ControlledVocabModeON=new n({type:"switch",label:h.get("6WTagsFilter.CompanyTags.controlledVocabMode.text"),touchMode:!0,value:0}).inject(Q),k.ControlledVocabModeON.getContent().style.fontSize="14px",k.ControlledVocabModeON.addEventListener("change",function(){g.enableButtons(),!0===k.ControlledVocabModeON.checkFlag?this._controlledVocabMode=!0:this._controlledVocabMode=!1}.bind(this));let z=e.create("span",{class:"fonticon fonticon-info search_center_delete_button_margin"}).inject(H);if(new c({target:z,trigger:"hover",animate:"true",position:"top",body:h.get("6WTagsFilter.CompanyTags.ControlledVocab.popover"),title:""}),!0===this._isDeleteAllExistingCompanyTagActivated()){let t=e.create("div",{class:"search_center_add_category_section "}).inject(r),a=e.create("div",{class:"search_center_general_tab_div search_center_margin ",id:"deleteTagsSpan"}).inject(t),n=e.create("div",{class:"search_center_div_left_vocab search_center_general_display_flex",id:"controlledVocabToggleSpan"}).inject(a);k.deletExistingCompanyTags=new j({label:h.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.value"),id:"deletExistingCompanyTags",class:"search_center_text",className:"error",emphasize:"high-attention"}).inject(n);var Ie=new T({className:"site-reset",closable:!0,header:h.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.value"),body:h.get("6WTagsFilter.CompanyTags.deletExistingCompanyTags.message"),footer:[new A({value:"Delete",className:"error",events:{onClick:function(){Ie.hide(),v.deleteExistingManualCompanyTags().then(function(e){console.log("Deletetion of Company Manual Tags Completed")},function(){console.log("Fail: Delete Manual tags failed")})}}}),new A({id:"datasetSelectormodalCancelBtn_delete",value:"Cancel",className:"default",events:{onClick:function(){Ie.hide()}}})]}).inject(n);k.deletExistingCompanyTags.addEventListener("buttonclick",function(){Ie.show()})}}S.getOption("tagsColorCustomize")&&m.render(me),S.getOption("controlledVocabulary")&&(S.getOption("tagsColorCustomize")?f.render(fe):f.render(me)),!0===this._isCompanyTagsActivated()&&C.render(comboBoxDiv),this.unMasking()},unMasking(){g.removeMask(widget.body)},getPredicatesObject:function(){return new a(function(e,t){let a={onComplete:function(t){UWA.log("Got a predicates result!"+t),e(t)},onFailure:function(e){UWA.log("predicates service request Fail!"+e),t(e)},tenantId:g.platformID,lang:widget.lang,apiVersion:"R2021x"};d.getFedProperties(a)})},getRootWOfPredicates:function(){let e=this;if(k._6WSubProperties.length>0){let a=null;k._6WSubProperties.forEach(e=>{a=t.is(a)?a+","+e:e});let r={onComplete:function(a){UWA.log("Got a Root W of predicates result!"),t.is(a,"array")&&(k._6WPredicatesMap=a),e._rootWOfPredicatesPromise.resolve(a)},onFailure:function(t){UWA.log("getPropertiesRoots service request Fail!"+t),e._rootWOfPredicatesPromise.reject(t)},tenantId:g.platformID,lang:widget.lang};d.getPropertiesRoots(a,r)}return this._rootWOfPredicatesPromise.promise},isThisNotARootPredicates:function(e){return""!==e.subPropertyOf},filter6WRootPredicates:function(e){let a,r,n={},i={},s=[],o=[],c=[],l=[],d=[],u=[],_=[],p=k.applicationConfigComboBox.currentValue,g=k._appsMap[p];for(r in e)if(e[r].properties.length>0){let n=(a=e[r].properties).length;if(void 0!==a&&n>0){e[r].properties=a.filter(this.isThisNotARootPredicates),a.sort(function(e,t){let a=e.label;a=a.toUpperCase();let r=t.label;return a<(r=r.toUpperCase())?-1:a>r?1:0});for(let h=0;h<n;h++){if(x.checkSearchAppId(g)&&("ds6w:project"===a[h].curi||"ds6w:community"===a[h].curi))continue;let n=a[h].label,p=a[h].curi;if(t.is(n)&&""!==n){"ds6w"!==r&&(n=n+" ("+e[r].label+")");let t={value:p,label:n,Wval:a[h].subPropertyOf};switch(a[h].subPropertyOf){case"ds6w:what":o.push(t);break;case"ds6w:where":d.push(t);break;case"ds6w:who":u.push(t);break;case"ds6w:when":c.push(t);break;case"ds6w:how":_.push(t);break;case"ds6w:why":l.push(t)}s.push(n),i[a[h].curi]=n,k._attributesMap[a[h].curi]=n,k._6WPredicatesMap[a[h].curi]=a[h].subPropertyOf,k._6WSubProperties.push(a[h].curi)}}}}let m=E.getLocalStorageItem("TagNavigator-simplifiedTagger");if(t.is(m)&&"true"===m){let e=h.get("SearchCenter6WTagsFilter.Predicates.OwnerCountry"),t="computedCountryInfo",a={value:t,label:e,Wval:"ds6w:where"};s.push(e),d.push(a),i[t]=e,k._attributesMap[t]=e}return n.predicates=s,n.typeMap=i,n.whatpredicates=o,n.whopredicates=u,n.whenpredicates=c,n.wherepredicates=d,n.whypredicates=l,n.howpredicates=_,this._filter6WRootPredicatesPromise.resolve(),n},_createAppAttrControl:function(t){let a=this,r=[],n=e.create("div",{class:"search_center_div_left_6w",id:t+"-div",styles:{"min-height":"100px",width:"auto"}}),s=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:t+"-combodiv",styles:{float:"left",clear:"both",width:"fit-content"}}).inject(n),o=new i({elementsList:[{label:"What",icon:"fonticon fonticon-3ds-what"},{label:"Who",icon:"fonticon fonticon-3ds-who"},{label:"When",icon:"fonticon fonticon-3ds-when"},{label:"Where",icon:"fonticon fonticon-3ds-where"},{label:"Why",icon:"fonticon fonticon-3ds-why"},{label:"How",icon:"fonticon fonticon-3ds-how"}],class:"search_center_div_left_6w search_center_general_display_flex",placeholder:"Select a W category",touchMode:!0,enableSearchFlag:!1,actionOnClickFlag:!1,reachablePlaceholderFlag:!0}).inject(s);o.elements.container.setStyle("width","100%"),o.addEventListener("change",function(){a._includeWVal=o.currentValue,a._includeDHierarchyTagVal=o.currentValue,a.getPredicatesObject().then(function(e){let t=a.filter6WRootPredicates(e);a.getRootWOfPredicates().then(function(e){switch(a._includeWVal){case"What":r=t.whatpredicates;break;case"Who":r=t.whopredicates;break;case"When":r=t.whenpredicates;break;case"Where":r=t.wherepredicates;break;case"Why":r=t.whypredicates;break;case"How":r=t.howpredicates}l.elementsList=r,g.disableButtons()})},function(){})});e.create("p",{class:"control_Ontology_text_heading search_center_top_margin search_center_bottom_margin_minimal",text:h.get("Tag.display"),id:t+"-tag-text-div",styles:{float:"left",clear:"both"}}).inject(n);let c=e.create("div",{class:"search_center_div_left_6w search_center_general_display_flex",id:t+"-attr-combo",styles:{float:"left",clear:"both",width:"-webkit-fill-available"}}).inject(n),l=new i({elementsList:r,styles:{width:"100%"},placeholder:"Find & select a tag",touchMode:!0,enableSearchFlag:!1,actionOnClickFlag:!1}).inject(c);return l.elements.container.setStyle("width","100%"),l.addEventListener("change",function(){a._includeTagVal=l.currentLabel,a._includeTagUri=l.currentValue}),n},ifExistinPredicates:function(e,t){return e.predicates.some(function(e){return e.label===t})},ifExistinExclPredicates:function(e,t){return e.excluded_predicates.some(function(e){return e.label===t})},_includeTagValue:function(a){let r,n=this;r=t.is(a)?a.label.replace(/\s+/g,"_"):n._includeTagVal.replace(/\s+/g,"_");let i,s=e.create("div",{class:"search_center_general_display_flex",id:"include-tag-div-treecontent",styles:{height:"28px"}}),o=e.create("div",{class:"search_center_general_display_flex",id:"include-tag-div-contenttag"}).inject(s),c=e.create("div",{class:"search_center_general_display_flex",id:"divtrashbutton_"+r}).inject(o),l=new j({displayStyle:"lite",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(c);if(t.is(a)){e.create("p",{text:a.label,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(o).setAttribute("uri",a.uri)}else{e.create("p",{text:n._includeTagVal,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(o).setAttribute("uri",n._includeTagUri)}l.addEventListener("buttonclick",function(e){let t="divtrashbutton_"+r,a=document.getElementById(t).getParent().getParent().getParent();if(a.childElementCount-1==0){let e=a.id;if(e.includes("What")){let e=document.getElementById("content-what");k.collapseRootWArea(e)}if(e.includes("Who")){let e=document.getElementById("content-who");k.collapseRootWArea(e)}if(e.includes("When")){let e=document.getElementById("content-when");k.collapseRootWArea(e)}if(e.includes("Where")){let e=document.getElementById("content-where");k.collapseRootWArea(e)}if(e.includes("How")){let e=document.getElementById("content-how");k.collapseRootWArea(e)}}s.destroy(),g.enableButtons()}),i=t.is(a)?a.wVal:n._includeWVal;let d=null,u=!1,_=!1,p=k._getWtreeContents(k.divWhatContent);if(0===p.predicates.length&&0===p.excluded_predicates.length){let e=document.getElementById("content-what");k.collapseRootWArea(e)}let m=k._getWtreeContents(k.divWhoContent);if(0===m.predicates.length&&0===m.excluded_predicates.length){let e=document.getElementById("content-who");k.collapseRootWArea(e)}let f=k._getWtreeContents(k.divWhenContent);if(0===f.predicates.length&&0===f.excluded_predicates.length){let e=document.getElementById("content-when");k.collapseRootWArea(e)}let C=k._getWtreeContents(k.divWhereContent);if(0===C.predicates.length&&0===C.excluded_predicates.length){let e=document.getElementById("content-where");k.collapseRootWArea(e)}let v=k._getWtreeContents(k.divWhyContent);if(0===v.predicates.length&&0===v.excluded_predicates.length){let e=document.getElementById("content-why");k.collapseRootWArea(e)}let y=k._getWtreeContents(k.divHowContent);if(0===y.predicates.length&&0===y.excluded_predicates.length){let e=document.getElementById("content-how");k.collapseRootWArea(e)}switch(i){case"What":if(t.is(a)?(u=k.ifExistinPredicates(p,a.label),_=k.ifExistinExclPredicates(p,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(p,n._includeTagVal),_=k.ifExistinExclPredicates(p,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhatContent);let e=document.getElementById("ds6w:what");k.toggleRootWArea(e)}break;case"Who":if(t.is(a)?(u=k.ifExistinPredicates(m,a.label),_=k.ifExistinExclPredicates(m,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(m,n._includeTagVal),_=k.ifExistinExclPredicates(m,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhoContent);let e=document.getElementById("ds6w:who");k.toggleRootWArea(e)}break;case"When":if(t.is(a)?(u=k.ifExistinPredicates(f,a.label),_=k.ifExistinExclPredicates(f,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(f,n._includeTagVal),_=k.ifExistinExclPredicates(f,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhenContent);let e=document.getElementById("ds6w:when");k.toggleRootWArea(e)}break;case"Where":if(t.is(a)?(u=k.ifExistinPredicates(C,a.label),_=k.ifExistinExclPredicates(C,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(C,n._includeTagVal),_=k.ifExistinExclPredicates(C,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhereContent);let e=document.getElementById("ds6w:where");k.toggleRootWArea(e)}break;case"Why":if(t.is(a)?(u=k.ifExistinPredicates(v,a.label),_=k.ifExistinExclPredicates(v,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(v,n._includeTagVal),_=k.ifExistinExclPredicates(v,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhyContent);let e=document.getElementById("ds6w:why");k.toggleRootWArea(e)}break;case"How":if(t.is(a)?(u=k.ifExistinPredicates(y,a.label),_=k.ifExistinExclPredicates(y,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(y,n._includeTagVal),_=k.ifExistinExclPredicates(y,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divHowContent);let e=document.getElementById("ds6w:how");k.toggleRootWArea(e)}}g.enableButtons()},_excludeTagValue:function(a){let r,n=this;r=t.is(a)?a.label.replace(/\s+/g,"_"):n._includeTagVal.replace(/\s+/g,"_");let i,s=e.create("div",{class:"search_center_general_display_flex",id:"exclude-tag-div-treecontent",styles:{height:"28px"}}),o=e.create("div",{class:"search_center_general_display_flex",id:"exclude-tag-div-treecontent2"}).inject(s),c=e.create("div",{class:"search_center_general_display_flex semi_circle",id:"divtrashbutton_"+r}).inject(o),l=new j({displayStyle:"lite",emphasize:"high-attention",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(c);if(t.is(a)){e.create("p",{class:"strike_through",text:a.label,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(o).setAttribute("uri",a.uri)}else{e.create("p",{class:"strike_through",text:n._includeTagVal,id:"include-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(o).setAttribute("uri",n._includeTagUri)}l.addEventListener("buttonclick",function(){let e="divtrashbutton_"+r,t=document.getElementById(e).getParent().getParent().getParent();if(t.childElementCount-1==0){let e=t.id;if(e.includes("What")){let e=document.getElementById("content-what");k.collapseRootWArea(e)}if(e.includes("Who")){let e=document.getElementById("content-who");k.collapseRootWArea(e)}if(e.includes("When")){let e=document.getElementById("content-when");k.collapseRootWArea(e)}if(e.includes("Where")){let e=document.getElementById("content-where");k.collapseRootWArea(e)}if(e.includes("How")){let e=document.getElementById("content-how");k.collapseRootWArea(e)}}s.destroy(),g.enableButtons()}),i=t.is(a)?a.wVal:n._includeWVal;let d=null,u=!1,_=!1,p=k._getWtreeContents(k.divWhatContent);if(0===p.predicates.length&&0===p.excluded_predicates.length){let e=document.getElementById("content-what");k.collapseRootWArea(e)}let m=k._getWtreeContents(k.divWhoContent);if(0===m.predicates.length&&0===m.excluded_predicates.length){let e=document.getElementById("content-who");k.collapseRootWArea(e)}let f=k._getWtreeContents(k.divWhenContent);if(0===f.predicates.length&&0===f.excluded_predicates.length){let e=document.getElementById("content-when");k.collapseRootWArea(e)}let C=k._getWtreeContents(k.divWhereContent);if(0===C.predicates.length&&0===C.excluded_predicates.length){let e=document.getElementById("content-where");k.collapseRootWArea(e)}let v=k._getWtreeContents(k.divWhyContent);if(0===v.predicates.length&&0===v.excluded_predicates.length){let e=document.getElementById("content-why");k.collapseRootWArea(e)}let y=k._getWtreeContents(k.divHowContent);if(0===y.predicates.length&&0===y.excluded_predicates.length){let e=document.getElementById("content-how");k.collapseRootWArea(e)}switch(i){case"What":if(t.is(a)?(u=k.ifExistinPredicates(p,a.label),_=k.ifExistinExclPredicates(p,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(p,n._includeTagVal),_=k.ifExistinExclPredicates(p,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhatContent);let e=document.getElementById("ds6w:what");k.toggleRootWArea(e)}break;case"Who":if(t.is(a)?(u=k.ifExistinPredicates(m,a.label),_=k.ifExistinExclPredicates(m,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(m,n._includeTagVal),_=k.ifExistinExclPredicates(m,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhoContent);let e=document.getElementById("ds6w:who");k.toggleRootWArea(e)}break;case"When":if(t.is(a)?(u=k.ifExistinPredicates(f,a.label),_=k.ifExistinExclPredicates(f,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(f,n._includeTagVal),_=k.ifExistinExclPredicates(f,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhenContent);let e=document.getElementById("ds6w:when");k.toggleRootWArea(e)}break;case"Where":if(t.is(a)?(u=k.ifExistinPredicates(C,a.label),_=k.ifExistinExclPredicates(C,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(C,n._includeTagVal),_=k.ifExistinExclPredicates(C,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhereContent);let e=document.getElementById("ds6w:where");k.toggleRootWArea(e)}break;case"Why":if(t.is(a)?(u=k.ifExistinPredicates(v,a.label),_=k.ifExistinExclPredicates(v,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(v,n._includeTagVal),_=k.ifExistinExclPredicates(v,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divWhyContent);let e=document.getElementById("ds6w:why");k.toggleRootWArea(e)}break;case"How":if(t.is(a)?(u=k.ifExistinPredicates(y,a.label),_=k.ifExistinExclPredicates(y,a.label)):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(y,n._includeTagVal),_=k.ifExistinExclPredicates(y,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.excludeAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else if(_){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("6WTagsFilter.preferredAttrWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divHowContent);let e=document.getElementById("ds6w:how");k.toggleRootWArea(e)}}g.enableButtons()},_includeDHierarchyTagValue:function(a){let r,n=this;r=t.is(a)?a.label.replace(/\s+/g,"_"):n._includeTagVal.replace(/\s+/g,"_");let i,s=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-div-treecontent",styles:{height:"28px"}}),o=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-div-contenttag"}).inject(s),c=e.create("div",{class:"search_center_general_display_flex",id:"includeDHierarchy-tag-divtrashbutton_"+r}).inject(o),l=new j({displayStyle:"lite",icon:{iconName:"trash wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS}}).inject(c);if(t.is(a)){e.create("p",{text:a.label,id:"includeDHierarchy-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(o).setAttribute("uri",a.uri)}else{e.create("p",{text:n._includeTagVal,id:"includeDHierarchy-tag-div-text",styles:{"margin-top":"6px","margin-left":"5px"}}).inject(o).setAttribute("uri",n._includeTagUri)}l.addEventListener("buttonclick",function(){s.destroy();let e=document.getElementById("6Wtree_hierarchy_wrapper");if(0===k._getWtreeContents(k.divDHierarchyWhatContent).predicates.length){let t=e.childNodes[0].getChildren()[0];k.collapseRootWArea(t)}if(0===k._getWtreeContents(k.divDHierarchyWhoContent).predicates.length){let t=e.childNodes[1].getChildren()[0];k.collapseRootWArea(t)}if(0===k._getWtreeContents(k.divDHierarchyWhenContent).predicates.length){let t=e.childNodes[2].getChildren()[0];k.collapseRootWArea(t)}if(0===k._getWtreeContents(k.divDHierarchyWhereContent).predicates.length){let t=e.childNodes[3].getChildren()[0];k.collapseRootWArea(t)}if(0===k._getWtreeContents(k.divDHierarchyWhyContent).predicates.length){let t=e.childNodes[4].getChildren()[0];k.collapseRootWArea(t)}if(0===k._getWtreeContents(k.divDHierarchyHowContent).predicates.length){let t=e.childNodes[5].getChildren()[0];k.collapseRootWArea(t)}g.enableButtons()}),i=t.is(a)?a.wVal:n._includeWVal;let d=null,u=!1,_=document.getElementById("6Wtree_hierarchy_wrapper"),p=k._getWtreeContents(k.divDHierarchyWhatContent);if(0===p.predicates.length){let e=_.childNodes[0].getChildren()[0];k.collapseRootWArea(e)}let m=k._getWtreeContents(k.divDHierarchyWhoContent);if(0===m.predicates.length){let e=_.childNodes[1].getChildren()[0];k.collapseRootWArea(e)}let f=k._getWtreeContents(k.divDHierarchyWhenContent);if(0===f.predicates.length){let e=_.childNodes[2].getChildren()[0];k.collapseRootWArea(e)}let C=k._getWtreeContents(k.divDHierarchyWhereContent);if(0===C.predicates.length){let e=_.childNodes[3].getChildren()[0];k.collapseRootWArea(e)}let v=k._getWtreeContents(k.divDHierarchyWhyContent);if(0===v.predicates.length){let e=_.childNodes[4].getChildren()[0];k.collapseRootWArea(e)}let y=k._getWtreeContents(k.divDHierarchyHowContent);if(0===y.predicates.length){let e=_.childNodes[5].getChildren()[0];k.collapseRootWArea(e)}let b=p.predicates.length+m.predicates.length+f.predicates.length+C.predicates.length+v.predicates.length+y.predicates.length,x=S.getOption("max_deep_hierarchy_tags");if(b>=x){d=h.get("SearchCenter6WTagsFilter.hierarchicalPredicates.Message.MaxReached"),d=h.replace(d,{max:x});let e=g.createWdgAlert();return e.inject(widget.body,"top"),void e.add({className:"error applyChangesAlert",message:d})}switch(i){case"What":if(t.is(a)?u=k.ifExistinPredicates(p,a.label):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(p,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divDHierarchyWhatContent);let e=_.childNodes[0].getChildren()[0].getChildren()[1];k.toggleRootWArea(e)}break;case"Who":if(t.is(a)?u=k.ifExistinPredicates(m,a.label):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(m,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divDHierarchyWhoContent);let e=_.childNodes[1].getChildren()[0].getChildren()[1];k.toggleRootWArea(e)}break;case"When":if(t.is(a)?u=k.ifExistinPredicates(f,a.label):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(f,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divDHierarchyWhenContent);let e=_.childNodes[2].getChildren()[0].getChildren()[1];k.toggleRootWArea(e)}break;case"Where":if(t.is(a)?u=k.ifExistinPredicates(C,a.label):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(C,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divDHierarchyWhereContent);let e=_.childNodes[3].getChildren()[0].getChildren()[1];k.toggleRootWArea(e)}break;case"Why":if(t.is(a)?u=k.ifExistinPredicates(v,a.label):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(v,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divDHierarchyWhyContent);let e=_.childNodes[4].getChildren()[0].getChildren()[1];k.toggleRootWArea(e)}break;case"How":if(t.is(a)?u=k.ifExistinPredicates(y,a.label):t.is(n._includeTagVal)&&(u=k.ifExistinPredicates(y,n._includeTagVal)),u){let e=g.createWdgAlert();e.inject(widget.body,"top"),d=h.get("searchAttributes.AttributeWarning"),e.add({className:"warning applyChangesAlert",message:d})}else{s.inject(k.divDHierarchyHowContent);let e=_.childNodes[5].getChildren()[0].getChildren()[1];k.toggleRootWArea(e)}}g.enableButtons()},_addtagOperator:function(){let e=this;k.tagRelationshipCards.show();let a=e._getTagRelationshipCards(),r=a.length,n=[];for(let e=0;e<r;e++)n.push(a[e].uri);let i=e._textOnCard;if(t.is(i,"string")){let a="AllDataSourcesandTypes",r=g.getAttributesInternalNameForAllDataSourcesAndTypes(a,i),s=!1,o=null;if(t.is(r)){let t;if(n.length>0&&!1===s&&(t=n.indexOf(r))>-1&&(o=h.get("searchAttributes.AttributeWarning"),s=!0),!1===s){let t="OR";e._operatorOR?t="OR":e._operatorAND?t="AND":e._operatorXOR&&(t="XOR");let a={cardDiv:k.tagRelationshipCards,textOnCard:i,uri:r,tabName:"SearchControl_6WTags",operator:t};e.renderTagRelationshipRow(a),k.tagRelationshipCards.childNodes[0].hidden=!1,g.enableButtons()}else{let e=g.createWdgAlert();e.inject(widget.body,"top"),e.add({className:"warning applyChangesAlert",message:o})}}}},_createTagOperatorModal:function(a){let r=this,s=e.create("div",{class:"search_center_div_left_6w",id:a+"-div",styles:{"min-height":"125px",width:"auto"}}),o=(e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex",id:a+"-text-div",text:h.get("Tag.display")}).inject(s),e.create("p",{class:"search_center_general_display_flex",id:a+"-combo-div"}).inject(s)),c=new i({elementsList:[],placeholder:h.get("SearchCenter6WTagsFilter.TagRelationship.AddPreferred_tags"),touchMode:!0,mainElementVisibleFlag:!0}).inject(o);r.getPredicatesObject().then(function(e){let t=r.filter6WRootPredicates(e);r.getRootWOfPredicates().then(function(e){c.elementsList=t.predicates,g.updateAttributesMappingForAllDataSourcesAndTypes("AllDataSourcesandTypes",t.typeMap),g.disableButtons()})},function(){});e.create("p",{class:"control_Ontology_text_heading search_center_general_display_flex search_center_top_margin",id:a+"-text-operator-display-div",text:h.get("Operator.display")}).inject(s);let l=e.create("p",{class:"search_center_general_display_flex search_center_top_margin",id:a+"-text-operator-radio-div"}).inject(s);l.addClassName("search_center_disable");let d=new n({type:"radio",label:"OR",value:0,id:a+"-OR",domId:"OR_Radio_toggle"}).inject(l),u=new n({type:"radio",label:"AND",value:0,domId:"AND_Radio_toggle"}).inject(l),_=new n({type:"radio",label:"XOR",value:1,domId:"XOR_Radio_toggle"}).inject(l);return d.elements.container.addClassName("some-class"),u.elements.container.addClassName("some-class"),_.elements.container.addClassName("some-class"),d.addEventListener("change",function(){r._operatorOR=d.checkFlag}.bind(this)),u.addEventListener("change",function(){r._operatorAND=u.checkFlag}.bind(this)),_.addEventListener("change",function(){r._operatorXOR=_.checkFlag}.bind(this)),c.addEventListener("change",function(){if(r._textOnCard=c.currentValue,t.is(r._textOnCard,"string")){let e="AllDataSourcesandTypes",t=g.getAttributesInternalNameForAllDataSourcesAndTypes(e,r._textOnCard);l.removeClassName("search_center_disable"),r._listOfIrrelevantAndTags.indexOf(t)>-1&&u.elements.container.addClassName("search_center_disable")}else l.addClassName("search_center_disable")}),s},_getTagRelationshipCards:function(){let e=[],a=k.tagRelationshipCards,r=a.childElementCount;for(let n=1;n<r;n++){let r=a.childNodes[n];if(t.is(r)){if(r.childElementCount>=3){let a={};a.uri=r.childNodes[0].getAttribute("sccURI"),a.operator=r.childNodes[1].childNodes[0].dsModel.currentValue,t.is(a.uri)&&e.push(a)}}}return e},renderTagRelationshipRow:function(a){let r=a.textOnCard;r=r.replace(/\s+/g,"_");let n=e.create("div",{class:"search_center_general_tab_div search_center_margin combo_height",id:r}).inject(a.cardDiv);n.addClassName("search_center_category_row_span");let s=e.create("div",{class:"search_center_general_tab_div search_center_margin",id:r+"_Text_part",html:a.textOnCard,styles:{width:"400px"}}).inject(n);s.addClassName("search_center_category_row_html"),t.is(a.uri)&&s.setAttribute("sccuri",a.uri);let o=e.create("div",{class:"search_center_margin margin_left_right strike_through",id:r+"_Combo"}).inject(n),c=["OR","AND","XOR"];if(this._listOfIrrelevantAndTags.length>0&&t.is(a.uri)){this._listOfIrrelevantAndTags.indexOf(a.uri)>-1&&(c=["OR","XOR"])}k.operatorComboBox=new i({elementsList:c,touchMode:!0,mainElementVisibleFlag:!0}).inject(o),"OR"==a.operator?k.operatorComboBox.value="OR":"AND"==a.operator?k.operatorComboBox.value="AND":"XOR"==a.operator&&(k.operatorComboBox.value="XOR"),k.operatorComboBox.elements.container.setStyles({height:"26px","margin-top":"-3px",width:"100px"}),k.operatorComboBox.addEventListener("change",function(){g.enableButtons()});let l=e.create("div",{class:"fonticon fonticon-clear fonticon-trash scc_6wtags_tag_relationship_delete"}).inject(n);l.setStyle("color","#b4b6ba"),l.addClassName("margin_left_right"),l.addEventListener("click",function(e){if(t.is(e.currentTarget.parentElement)){let t=e.currentTarget.parentElement.parentElement;e.currentTarget.parentElement.destroy(),1===t.childNodes.length&&(t.childNodes[0].hidden=!0),g.enableButtons()}},!1),l.addEventListener("mouseover",function(e){e.currentTarget.setStyle("color","#3d3d3d")},!1),l.addEventListener("mouseout",function(e){e.currentTarget.setStyle("color","#b4b6ba")},!1)},clickOnApply:function(){g.enableButtons(),document.getElementById("id_in_app_apply").click(),g.disableButtons()},getTabInputsToStore:function(){let e={attributes_display:k.EditTagCategoryON.checkFlag,savedTags:{allowSavedTags:k.savedTagsToggle.checkFlag}},a=[],r={},n={},i=[];if(t.is(i,"array")&&1===i.length)t.is(i[0].source)&&(r.source=i[0].source),t.is(i[0].predicates)&&(r.predicates=i[0].predicates),t.is(i[0].excluded_predicates)&&(r.excluded_predicates=i[0].excluded_predicates),a.push(r);else{var s=[],o=[];r.source="AllDataSourcesandTypes";let e=k._getWtreeContents(k.divWhatContent),t=k._getWtreeContents(k.divWhoContent),n=k._getWtreeContents(k.divWhenContent),i=k._getWtreeContents(k.divWhereContent),d=k._getWtreeContents(k.divWhyContent),u=k._getWtreeContents(k.divHowContent),h=e.predicates.length,_=e.excluded_predicates.length;for(let t=0;t<h;t++){(c={}).uri=e.predicates[t].uri,s.push(c)}for(let t=0;t<_;t++){(l={}).uri=e.excluded_predicates[t].uri,o.push(l)}h=t.predicates.length,_=t.excluded_predicates.length;for(let e=0;e<h;e++){(c={}).uri=t.predicates[e].uri,s.push(c)}for(let e=0;e<_;e++){(l={}).uri=t.excluded_predicates[e].uri,o.push(l)}h=n.predicates.length,_=n.excluded_predicates.length;for(let e=0;e<h;e++){(c={}).uri=n.predicates[e].uri,s.push(c)}for(let e=0;e<_;e++){(l={}).uri=n.excluded_predicates[e].uri,o.push(l)}h=i.predicates.length,_=i.excluded_predicates.length;for(let e=0;e<h;e++){(c={}).uri=i.predicates[e].uri,s.push(c)}for(let e=0;e<_;e++){(l={}).uri=i.excluded_predicates[e].uri,o.push(l)}h=d.predicates.length,_=d.excluded_predicates.length;for(let e=0;e<h;e++){(c={}).uri=d.predicates[e].uri,s.push(c)}for(let e=0;e<_;e++){(l={}).uri=d.excluded_predicates[e].uri,o.push(l)}h=u.predicates.length,_=u.excluded_predicates.length;for(let e=0;e<h;e++){var c;(c={}).uri=u.predicates[e].uri,s.push(c)}for(let e=0;e<_;e++){var l;(l={}).uri=u.excluded_predicates[e].uri,o.push(l)}r.excluded_predicates=o,r.predicates=s,a.push(r)}let d=[],u={},h={},_=k.applicationConfigComboBox.currentValue,p=k._appsMap[_];t.is(r.predicates)&&(h.preferred_predicates=r.predicates),t.is(r.excluded_predicates)&&(h.excluded_predicates=r.excluded_predicates),u[p]=h,d.push(u),e.context_apps_predicates=d,"X3DSEAR_AP"===p&&(e["ds6w:type"]=a);let g=k._getWtreeContents(k.divDHierarchyWhatContent),v=k._getWtreeContents(k.divDHierarchyWhoContent),y=k._getWtreeContents(k.divDHierarchyWhenContent),b=k._getWtreeContents(k.divDHierarchyWhereContent),x=k._getWtreeContents(k.divDHierarchyWhyContent),D=k._getWtreeContents(k.divDHierarchyHowContent),T=[],A=g.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=g.predicates[e].uri,T.push(t)}A=v.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=v.predicates[e].uri,T.push(t)}A=y.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=y.predicates[e].uri,T.push(t)}A=b.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=b.predicates[e].uri,T.push(t)}A=x.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=x.predicates[e].uri,T.push(t)}A=D.predicates.length;for(let e=0;e<A;e++){let t={};t.uri=D.predicates[e].uri,T.push(t)}return n.predicates=T,!0===S.getOption("activate_hierarchical_tag_depth")&&(e.hierarchical_predicates={specify_hierarchical_predicates:k.EnableTagHierarchicalON.checkFlag,hierarchical_predicates:n.predicates},this._checkHierarchicalTagUpdate(e.hierarchical_predicates),this._prev_hierarchical_predicates=e.hierarchical_predicates),S.getOption("tagsColorCustomize")&&(e.tagColorization=m.getInputsToStore()),S.getOption("controlledVocabulary")&&(e.controlledVocabulary=f.getTabInputsToStore()),!0===this._isCompanyTagsActivated()&&(e.enterprise_ontology={dataset:C.getTabInputsToStore(),iconURL:k.iconurlInput.value,tagPrefix:k.prefixInput.value,expertUserGrp:this._isExpertIdeationActivated()?k.expertGroupDisplay.getText():"",advocacyCommunityId:this._isAdvocacyActivated()?k.advocacyGroupDisplay.value:"",advocacyCommunityLabel:this._isAdvocacyActivated()?k.advocacyGroupDisplay.getText():""},t.is(e.enterprise_ontology.dataset,"array")&&e.enterprise_ontology.dataset.length>0&&(e.current_enterprise_ontology_title=e.enterprise_ontology.dataset[0].datasetTitle),e.enterprise_ontology_history=k.scrollerText,e.companyTagsSearchSuggest=!!this._isCompanyTagsActivated()&&k.companyTagsSearchSuggest.checkFlag,e.controlledVocabMode=this._controlledVocabMode),e.tagRelationships={activate_tag_relationship:k.toggleActivateTagOperator.checkFlag,tagRelationship_predicates:k._getTagRelationshipCards(),tagRelationship_IrrelevantOpert:k._getTagIrrelevantOperator()},e},_getTagIrrelevantOperator:function(){let e={};return e.irrelevantANDPredicates=this._listOfIrrelevantAndTags,e},onResetTab:function(e){let a,r=this,n=null,i=null;if(g.clearLocalCacheFor6WTags(),a=t.is(e,"string")?JSON.parse(e):e,t.is(a)){if(l.mask(widget.body),k.getPredicatesObject().then(function(e){let s=k.filter6WRootPredicates(e);k.getRootWOfPredicates().then(function(e){k.cleanUpAttributeTags(),g.updateAttributesMappingForAllDataSourcesAndTypes("AllDataSourcesandTypes",s.typeMap);let o=k._getKeyByValue(k._appsMap,"X3DSEAR_AP");if(t.is(o)&&(k.applicationConfigComboBox.currentValue=o),I.getAppWisePredicates(k._appsMap[k.applicationConfigComboBox.currentValue],!1).then(function(e){if(k.cleanUpAttributeTags(),e.hasOwnProperty("preferred_predicates")&&(n=e.preferred_predicates),e.hasOwnProperty("excluded_predicates")&&(i=e.excluded_predicates),t.is(n)&&n.length>0)for(let e=0;e<n.length;e++){let t=n[e].uri,a=k._get6WVal(t),r={label:k._attributesMap[t],uri:t,wVal:a};k._includeTagValue(r),g.disableButtons()}if(t.is(i)&&i.length>0)for(let e=0;e<i.length;e++){let t=i[e].uri,a=k._get6WVal(t),r={label:k._attributesMap[t],uri:t,wVal:a};k._excludeTagValue(r),g.disableButtons()}},function(){console.log("Error: Default json for preferred predicates has not been defined yet for this APP")}),a.hasOwnProperty("tagRelationships")){let e=a.tagRelationships;t.is(e)&&(t.is(k.tagRelationshipCards)&&r.cleanUpTagRelationCards(),k.toggleActivateTagOperator.checkFlag=e.activate_tag_relationship,t.is(e.tagRelationship_predicates)&&e.tagRelationship_predicates.length>0&&(k.tagRelationshipCards.show(),r.getPredicatesObject().then(function(t){r.getRootWOfPredicates().then(function(t){for(let t=0;t<e.tagRelationship_predicates.length;t++){let a=e.tagRelationship_predicates[t].uri,n=k._attributesMap[a],i={cardDiv:k.tagRelationshipCards,textOnCard:n,uri:a,tabName:"SearchControl_6WTags",operator:e.tagRelationship_predicates[t].operator};r.renderTagRelationshipRow(i)}k.tagRelationshipCards.childNodes[0].hidden=!1,g.disableButtons()})})))}else t.is(k.toggleActivateTagOperator)&&(k.toggleActivateTagOperator.checkFlag=!1),t.is(k.tagRelationshipCards)&&(r.cleanUpTagRelationCards(),r.getRootWOfPredicates().then(function(e){if(k.tagRelationshipCards.show(),t.is(r._listOfDefaultAndTags)&&r._listOfDefaultAndTags.length>0){for(let e=0;e<r._listOfDefaultAndTags.length;e++){let t=r._listOfDefaultAndTags[e],a=k._attributesMap[t],n={cardDiv:k.tagRelationshipCards,textOnCard:a,uri:t,tabName:"SearchControl_6WTags",operator:"AND"};r.renderTagRelationshipRow(n)}k.tagRelationshipCards.childNodes[0].hidden=!1,g.disableButtons()}if(t.is(r._listOfIrrelevantAndTags)&&r._listOfIrrelevantAndTags.length>0){for(let e=0;e<r._listOfIrrelevantAndTags.length;e++){let t=r._listOfIrrelevantAndTags[e],a=k._attributesMap[t],n={cardDiv:k.tagRelationshipCards,textOnCard:a,uri:t,tabName:"SearchControl_6WTags",operator:"OR"};r.renderTagRelationshipRow(n)}k.tagRelationshipCards.childNodes[0].hidden=!1,g.disableButtons()}}));if(k._includeDHierarchyTagValue(),!0===S.getOption("activate_hierarchical_tag_depth")){let e=a.hierarchical_predicates,r=[];if(t.is(e)?(k.EnableTagHierarchicalON.checkFlag=e.specify_hierarchical_predicates,k._prev_hierarchical_predicates=e,r=e.hierarchical_predicates):t.is(k.EnableTagHierarchicalON)&&(k.EnableTagHierarchicalON.checkFlag=!1),k._cleanUpHierarchyTags(),t.is(r)&&r.length>0)for(let e=0;e<r.length;e++){let t=r[e].uri,a=k._get6WVal(t),n={label:k._attributesMap[t],uri:t,wVal:a};k._includeDHierarchyTagValue(n)}}g.disableButtons(),l.unmask(widget.body)})},function(){l.unmask(widget.body)}),a.hasOwnProperty("attributes_display")){let e=a.attributes_display;t.is(e)&&(k.EditTagCategoryON.checkFlag=e)}let s=a.savedTags;if(UWA.is(s,"object")){let e=s.allowSavedTags;UWA.is(e,"boolean")&&(k.savedTagsToggle.checkFlag=e)}if(!0===S.getOption("activate_hierarchical_tag_depth")){let e=a.hierarchical_predicates;t.is(e)?(k.EnableTagHierarchicalON.checkFlag=e.specify_hierarchical_predicates,k._prev_hierarchical_predicates=e):t.is(k.EnableTagHierarchicalON)&&(k.EnableTagHierarchicalON.checkFlag=!1),k._cleanUpHierarchyTags()}if(S.getOption("tagsColorCustomize")&&m.onRender(e.tagColorization),S.getOption("controlledVocabulary")&&f.getInputFromStore(e.controlledVocabulary),!0===this._isCompanyTagsActivated()&&C.getInputFromStore(e.enterprise_ontology),a.hasOwnProperty("enterprise_ontology")){let e=a.enterprise_ontology;t.is(e)&&!0===this._isCompanyTagsActivated()&&(k.iconurlInput.value=e.iconURL,k.prefixInput.value=e.tagPrefix,!0===this._isExpertIdeationActivated()&&(k.expertGroupDisplay.setText(e.expertUserGrp),k.expertGroupDisplay.getText().length>0&&(k.choose.hide(),k.fontIconTrash.show(),k.expertGroupDisplay.show())),!0===this._isAdvocacyActivated()&&(k.advocacyGroupDisplay.setText(e.advocacyCommunityLabel),k.advocacyGroupDisplay.getText().length>0&&(k.chooseAdvocacy.hide(),k.fontIconTrashA.show(),k.advocacyGroupDisplay.show())))}!0===this._isCompanyTagsActivated()&&(k.companyTagsSearchSuggest.checkFlag=e.companyTagsSearchSuggest,k.scrollerText=e.enterprise_ontology_history,k.scrollerText=k.scrollerText?k.scrollerText:"",k.scrollerBody.setText(k.scrollerText),k.ControlledVocabModeON.checkFlag=e.controlledVocabMode)}},cleanUpTagRelationCards:function(){for(let e=k.tagRelationshipCards.childElementCount-1;e>0;e--){let a=k.tagRelationshipCards.childNodes[e];t.is(a)&&a.destroy()}k.tagRelationshipCards.childNodes[0].hidden=!0},_cleanUpHierarchyTags:function(){let e=k.divDHierarchyWhatContent.childElementCount;for(let t=e-1;t>=0;t--)k.divDHierarchyWhatContent.childNodes[t].destroy();for(let t=(e=k.divDHierarchyWhoContent.childElementCount)-1;t>=0;t--)k.divDHierarchyWhoContent.childNodes[t].destroy();for(let t=(e=k.divDHierarchyWhenContent.childElementCount)-1;t>=0;t--)k.divDHierarchyWhenContent.childNodes[t].destroy();for(let t=(e=k.divDHierarchyWhereContent.childElementCount)-1;t>=0;t--)k.divDHierarchyWhereContent.childNodes[t].destroy();for(let t=(e=k.divDHierarchyWhyContent.childElementCount)-1;t>=0;t--)k.divDHierarchyWhyContent.childNodes[t].destroy();for(let t=(e=k.divDHierarchyHowContent.childElementCount)-1;t>=0;t--)k.divDHierarchyHowContent.childNodes[t].destroy()},cleanUpAttributeTags:function(){let e=k.divWhatContent.childElementCount;for(let t=e-1;t>=0;t--)k.divWhatContent.childNodes[t].destroy();for(let t=(e=k.divWhoContent.childElementCount)-1;t>=0;t--)k.divWhoContent.childNodes[t].destroy();for(let t=(e=k.divWhenContent.childElementCount)-1;t>=0;t--)k.divWhenContent.childNodes[t].destroy();for(let t=(e=k.divWhereContent.childElementCount)-1;t>=0;t--)k.divWhereContent.childNodes[t].destroy();for(let t=(e=k.divWhyContent.childElementCount)-1;t>=0;t--)k.divWhyContent.childNodes[t].destroy();for(let t=(e=k.divHowContent.childElementCount)-1;t>=0;t--)k.divHowContent.childNodes[t].destroy()},_checkHierarchicalTagUpdate:function(e){let a=!1;if(t.is(this._prev_hierarchical_predicates))if(this._prev_hierarchical_predicates.specify_hierarchical_predicates!==e.specify_hierarchical_predicates)a=!0;else if(this._prev_hierarchical_predicates.hierarchical_predicates.length!==e.hierarchical_predicates.length)a=!0;else{let t=[];this._prev_hierarchical_predicates.hierarchical_predicates.forEach(e=>{t.push(e.uri)});for(let r=0;r<e.hierarchical_predicates.length;r++)if(t.indexOf(e.hierarchical_predicates[r].uri)<0){a=!0;break}}else a=!0;e.version=a?""+ +new Date:this._prev_hierarchical_predicates.version},_isOntologyActivated:()=>!0===x.isInternalProduction()||!0===S.getOption("allowEnterpriseDictionaryModification"),_isCompanyTagsActivated:()=>"OnPremise"!==g.platformID,_isDeleteCompanyTagActivated:()=>!0===S.getOption("DeleteManualCompanyTag"),_isDeleteAllExistingCompanyTagActivated:()=>!0===S.getOption("DeleteAllExistingCompanyTag"),_isExpertIdeationActivated:()=>!0===S.getOption("ExpertIdeation"),_isAdvocacyActivated:()=>!0===S.getOption("AdvocacyAnnotation"),_get6WVal:function(e){let a=null,r=k._6WPredicatesMap.find(function(t){return t.curi===e});return t.is(r)?("ds6w:what"===r.lineage&&(a="What"),"ds6w:where"===r.lineage&&(a="Where"),"ds6w:who"===r.lineage&&(a="Who"),"ds6w:when"===r.lineage&&(a="When"),"ds6w:how"===r.lineage&&(a="How"),"ds6w:why"===r.lineage&&(a="Why")):"computedCountryInfo"===e&&(a="Where"),a},_getWtreeContents:function(e){let a={},r=[],n=[],i=e.childElementCount;for(let a=0;a<i;a++){let i=e.childNodes[a];if(t.is(i)){let e=i.childElementCount;for(let a=0;a<e;a++){let e=i.childNodes[a];if(t.is(e)){let a=e.childElementCount;for(let i=0;i<a;i++){let a={},s={},o=e.childNodes[i].getAttribute("uri");t.is(o)&&("strike_through"===e.childNodes[i].className?(s.uri=e.childNodes[i].getAttribute("uri"),s.label=e.childNodes[i].textContent,n.push(s)):(a.uri=e.childNodes[i].getAttribute("uri"),a.label=e.childNodes[i].textContent,r.push(a)))}}}}}return a.predicates=r,a.excluded_predicates=n,a},_getKeyByValue:function(e,t){return Object.keys(e).find(a=>e[a]===t)},getCurrentDatasetTitle:function(e){I.getSearchSettings({tenantID:g.platformID}).then(function(a){if(a.hasOwnProperty("enterprise_ontology")&&t.is(a.enterprise_ontology.dataset,"array")&&a.enterprise_ontology.dataset.length>0){let t=a.enterprise_ontology.dataset[0].datasetTitle+" | "+a.enterprise_ontology.dataset[0].modificationdate+" | "+a.enterprise_ontology.dataset[0].publisher;e.setAttribute("placeholder",t)}})},collapseRootWArea:function(e){e.getChildren()[0].getChildren()[1].setStyles({"min-height":"0px"})},toggleRootWArea:function(e){var a,r,n,i,s=e.getElement(".rootw-arrow-container");e.getElement(".rootw-expander");if(e.getParent().getChildren()[0].getChildren()[1].setStyles({"min-height":"100px"}),e.hasClassName("hiddenW"),e.removeClassName("hiddenW"),s.addClassName("expanded"),s)for(n=0,i=(a=s.getParent().getChildren()).length;n<i;++n)(r=t.extendElement(a[n])).match(".root-container-inner")&&(t.extendElement(r.getChildren()[0]),r.setStyles({position:"relative",overflow:"hidden",opacity:1,height:"100%",visibility:"visible"})),r.match(".arrow")&&t.extendElement(r.getChildren()[0])},onUpdateUI:function(e){!0===this._isCompanyTagsActivated()&&C.onUpdateUI()}};return k});