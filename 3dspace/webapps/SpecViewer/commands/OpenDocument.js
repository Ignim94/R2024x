define("DS/SpecViewer/commands/OpenDocument",["DS/SpecViewer/commands/CommandBase","DS/SpecViewer/Documents/DocumentsManager","DS/SpecViewer/Documents/VersionFileManagement","DS/XSRCommonComponents/components/PageTopBar/XSpecPageTopBar","DS/XSRCommonComponents/utils/Constants","DS/XSRCommonComponents/utils/XSRMask","DS/XSRCommonComponents/utils/Utils","DS/XSRCommonComponents/utils/RequestUtil","DS/XSRCommonComponents/components/Navigation/NavigationView","i18n!DS/SpecViewer/assets/nls/SpecViewer","css!DS/XSRCommonComponents/InformationPanel.css"],function(e,n,t,o,s,a,i,c,d,r){"use strict";return e.extend({init:function(e){e=UWA.extend(e,{isAsynchronous:!1}),this._parent(e),this.cmdId=e.ID},execute:function(){var e=this;i.deactivateInfoIcon();var a=arguments[0]._selectedItems[0];this.appCore=a.appCore;var m=arguments[0]._selectedItems[0].appCore.triptychManager,l=a.getID(),p=a.getTitle(),I=a.appCore.specViewerModelEvents;e._basicModelEvents=a.appCore.basicModelEvents;var u=a.appCore.specRightContainer;u.empty();var E,C=[];e.eventList=[],e.eventList.push(e._basicModelEvents.subscribe({event:s.EVENT_SPEC_GRID_NODES_SELECTION_ACTION},function(n){if(m.isRightPanelOpen()&&n.commandId==s.MANAGE_FILES)if(0===n.count){u.empty();let e=c.getTouchMode(),n=UWA.createElement("div",{class:"xsr-message-container"});n.addContent(r.Message_NoItemSelected),e&&n.addClassName("xsr-mobile-font"),n.inject(u)}else if(n.count>1){u.empty();let e=c.getTouchMode(),n=UWA.createElement("div",{class:"xsr-message-container"});n.addContent(r.Message_TooManyItems),e&&n.addClassName("xsr-mobile-font"),n.inject(u)}else if(1===n.count){let t=n.currentModel;t&&(e.cmdId=s.MANAGE_FILES,S(),e._basicModelEvents.publish({event:s.EVENT_LAUNCH_COMMAND,data:{commandId:e.cmdId,context:{item:{data:t}}}}))}}));var S=function(){e.docInst&&e.docInst.destroy(),e.pageToolbar&&e.pageToolbar.destroy(),e.fileInstance&&e.fileInstance.destroy(),u&&u.empty(),I&&I.unsubscribeList(C),e._basicModelEvents.unsubscribeList(e.eventList)},_=function(){let i={modelEvents:I,basicModelEvents:e._basicModelEvents,container:u,model:a,cmdId:e.commandID,appCore:e.appCore},c=new d(i);i={callBackFunc:S.bind(e)};var C=c.displayPrevNextIcons(i);e.currentFilesDiv=C.mainDiv;var _=C.dataContainerWrapper,v={withInformationButton:!1,withWelcomePanelButton:!1,container:_};e.pageToolbar=new o,e.pageToolbar.initialize(v),E=UWA.createElement("div",{class:"xsr-slidein-data-container",styles:{height:"calc(100% - 40px)"}}).inject(_),m.setCommandId(s.MANAGE_FILES),m.isRightPanelOpen()?m.resizePanel(700):m.showRightPanel(700);!function(o,a,i){var c={itemId:o,itemTitle:a,container:E,appCore:e.appCore,preferredView:s.BIG_TILE,specModel:i};e.cmdId===s.OPEN_DOCUMENTS_CMD?(c.currentTabKey="docs",e.commandID=s.OPEN_RELATED_SPEC_DOC_CMD,e.pageToolbar.setTitle("Documents",a),e.docInst=new n(c),e.docInst.render()):e.cmdId!==s.MANAGE_FILES_CMD&&e.cmdId!==s.MANAGE_FILES||(c.currentTabKey=s.MANAGE_FILES,e.commandID=s.MANAGE_FILES,e.pageToolbar.setTitle(r.label_Manage,a),e.docInst=new t(c),e.docInst.render())}(l,p,a)};this.cmdId&&(e.commandID=s.MANAGE_FILES,_(),e.eventList.push(e._basicModelEvents.subscribe({event:"xsr-right-panel-closed"},function(){u.empty(),S(),e.commandID=void 0})),e.eventList.push(e._basicModelEvents.subscribe({event:s.EVENT_SPEC_OTHER_ACTION_CLICK_SLIDEIN_OPEN},function(n){var t=function(){n.callBackFunc&&"function"==typeof n.callBackFunc&&n.callBackFunc.call()};"OpenDocuments"===n.cmdId||"ManageFiles"===n.cmdId?"ManageFiles"===n.cmdId?(S(),t()):(e._basicModelEvents.publish({event:"xsr-right-panel-closed"}),t()):"Information"===n.cmdId?(S(),t()):n.selNodes&&n.selNodes[0]&&n.selNodes[0].onContainer!==E&&(m.hideRightPanel(),S(),t())})))}})});