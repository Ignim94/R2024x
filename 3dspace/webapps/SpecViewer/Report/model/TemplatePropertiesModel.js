define("DS/SpecViewer/Report/model/TemplatePropertiesModel",["UWA/Class/Model","DS/XSRCommonComponents/utils/XInfraRequestUtil"],function(e,t){"use strict";return e.extend({error:{fields:[],messages:{}},defaults:{id:null,cestamp:null,reportTemplateRev:null,reportTemplateName:null,newReportTemplateId:null,specReportId:null,canApplyTemplate:!1,applicableTemplateList:null,prevReportTemplateId:null,ItemType:null,ItemTitle:null,ItemTypeActualName:null,ItemRevision:null},setup:function(e){this.specTreeModel=e;var t,s,p=this;this.id=this.specTreeModel.getID(),this.canChangeTemplate=(t=p.specTreeModel.hasAccess("modify"),(s=p.specTreeModel.getSpecReportPid())?p.specTreeModel.hasAccessOnSpecReport(["fromconnect","fromdisconnect","checkin"])&&t:!(s||!t)),this.set("canApplyTemplate",this.canChangeTemplate),this.canChangeTemplate&&this.loadTemplateList({data:{specType:p.specTreeModel.getTypeActualName()}}).then(function(e){p.set("applicableTemplateList",e.response)}).catch(function(e){console.log(e)}),this.set("ItemType",this.specTreeModel.getType()),this.set("ItemTypeActualName",this.specTreeModel.getTypeActualName()),this.set("ItemRevision",this.specTreeModel.getRevision()),this.set("ItemTitle",this.specTreeModel.getTitle()),this.set("specReportId",this.specTreeModel.getSpecReportPid()),this.set("reportTemplateTitle",this.specTreeModel.getTemplateTitle()),this.set("reportTemplateDescription",this.specTreeModel.getTemplateDescription()),this.set("prevReportTemplateId",this.specTreeModel.getTemplatePid()),this.set("reportTemplateheader"," "),this.set("reportTemplateName",this.specTreeModel.getTemplateName()),this.set("reportTemplateRev",this.specTreeModel.getTemplateRev())},loadTemplateList:function(e){return this.options=e,new t({id:"getSpecTemplates"}).invoke(this.options)},applyTemplate:function(e){return this.options=e,new t({id:"changeTemplate"}).invoke(this.options)},createSpecReport:function(e){var s={data:{itemPid:this.id,template:e}};return new t({id:"SpecificationReport"}).create(s)}})});