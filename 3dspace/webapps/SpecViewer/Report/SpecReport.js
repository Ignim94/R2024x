define("DS/SpecViewer/Report/SpecReport",["UWA/Core","UWA/Class/View","DS/SpecViewer/Report/ReportPreview","DS/XSRCommonComponents/utils/Constants","DS/XSRCommonComponents/utils/Notification","i18n!DS/SpecViewer/assets/nls/SpecViewer"],function(e,t,i,s,n,o){"use strict";return t.extend({setup:function(t){this.specModel=t.specModel;var i=t.target.querySelector("#report-preview-container");null!==i&&i.destroy(),this.container=e.createElement("div",{id:"report-preview-container"}).inject(t.target),this.mode=t.mode,this.appCore=t.appCore,this.modelEvents=this.appCore.specViewerModelEvents,this.itemPid=t.specModel.getID(),this.itemTitle=t.specModel.getTitle(),this.itemMaturity=t.specModel.getMaturityActualName(),this.templateId=t.specModel.getTemplatePid(),this.specPid=t.specModel.getSpecReportPid(),this.itemType=t.specModel.getTypeActualName(),this.basicModelEvents=this.appCore.basicModelEvents,this._initializeEvents()},_initializeEvents:function(){var e=this;this._events=[],this._events.push(this.modelEvents.subscribe({event:s.EVENT_REGENERATE_REPORT},function(t){if(e.checkReportStatus())e.modelEvents.publish({event:s.EVENT_REPORT_GEN_IN_PROGRESS});else{e.mode="RegeneratePDF";e._loadSpecReport.call(e)}})),this._events.push(this.modelEvents.subscribe({event:s.EVENT_REPORT_GEN_IN_PROGRESS},function(){n.displayNotification({eventID:"warning",msg:o.message_ReportGenerationInProgress})})),this._events.push(this.modelEvents.subscribe({event:s.EVENT_RELOAD_REPORT_PREVIEW},function(){e.mode="";e._loadSpecReport()}))},render:function(){this._instantiate()},_loadSpecReport:function(){this.container&&(this.container.empty(),this.reportPreviews&&this.reportPreviews.destroy(),this._instantiate())},_instantiate:function(){var t=new e.Element("div",{class:"speccontainer",id:"speccontainer"}).inject(this.container),s=new e.Element("div",{id:"spec_page"});s.inject(t);var n={mode:this.mode,modelEvents:this.modelEvents,specModel:this.specModel,target:s,appCore:this.appCore},o=new i(n);this.reportPreviews=o},refreshTab:function(){this.mode="",this._loadSpecReport.call(this)},destroy:function(){this._events&&this.modelEvents.unsubscribeList(this._events),this.reportPreviews&&this.reportPreviews.destroy(),this.container.destroy()},checkReportStatus:function(){return this.reportPreviews.checkReportStatus()}})});