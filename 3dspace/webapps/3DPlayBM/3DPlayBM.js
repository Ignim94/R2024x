define("DS/3DPlayBM/3DPlayBM",["UWA/Element","DS/Controls/ComboBox","DS/WebUtils/Logger","DS/Utilities/TouchUtils"],function(e,t,n,i){i.setTouchMode(!0);let o,s,a=!1,u=n("3DPlayBM"),r={beId:0,bmId:0,input:void 0};const p={"swym:Picture":"picture","swym:Document":"doc","swym:3dModel":"3d-object","swym:Drawing":"picture","swym:SimulationMedia":"picture","swym:Sketch":"app-3dsketch","swym:Whiteboard":"app-whiteboard","swym:Story":"app-3dstory"};function d(e){let t={type:e,version:"2"};t.data="valuesToSave"===e?{parametrization:JSON.stringify({version:"1.0.0",outputs:[{transientId:r.input.transientId,input:r.input}]}),outputs:[r.input],inputs:{businessMethods:[{bmId:r.input.bmId,outputs:[r.input]}]}}:{protocol:"2"},window.parent.postMessage(t,"*"),u.log(t)}return window.addEventListener("message",function(e){var n,i=e.data,l=i.type;switch(i=i.data,l){case"context":n=i.businessMethods,a||o.then(function(){let e=-1,i=[];n.forEach(t=>{"X3DMCTY_AP"!==t.appId&&"3DSwym"!==t.service||t.outputs.forEach(n=>{n.bmId=t.bmId,p[n.objectType]&&(i.push({icon:p[n.objectType],label:n.title,value:n}),-1==e&&r.input&&r.input.outputs&&r.input.outputs[0]&&r.input.outputs[0].transientId===n.transientId&&(e=i.length-1))})});let o=new UWA.Element("div",{styles:{display:"flex","align-items":"center","flex-direction":"column"}});o.inject(document.body),new UWA.Element("h3",{text:s.DefaultContent,styles:{font:"normal normal normal 16px/24px Arial","letter-spacing":"0px",color:"#3D3D3D",opacity:"1"}}).inject(o),a=new t({selectedIndex:e,elementsList:i,enableSearchFlag:!0,placeholder:s.ContentFromSwym}),window.parent&&window.parent.__karma__&&(window.parent.myCombo=a),a.inject(o),a.elements.container.style.width="300px",a.addEventListener("change",function(){a.value.properties=a.value.properties||{},r.input=a.value,d("notifyChanges")})});break;case"setup":window.require("i18n").locale=i.lang,o=new Promise(function(e){require(["i18n!DS/3DPlayBM/assets/nls/3DPlayBM"],function(t){s=t,e()})});break;case"edit":r.input=i.inputs.businessMethods[0];case"create":r.beId=i.beId,r.bmId=i.bmId,d("getContext");break;case"saveRequested":d("valuesToSave")}u.log(l,e)}),d("onCodeLoaded"),{}});