define("DS/DELWebOERTableViewComp/actions/StandardActions",["DS/DELWebOERCommonUtils/utils/TrackUtils","DS/Logger/Logger"],function(e,t){"use strict";const n=1,i=2,o="Requirement",r={hideShow:async function(o,r){var a=r.args.hideIn3DHandlerId,s=r.args.showIn3DHandlerId,l=r.args.node,d=r.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(d.hasHandler(a)&&d.hasHandler(s)){let t=l.getAttributeValue("hideShow3D"),o={path:l.getRirPath()},u=t===n||t===i?a:s;await d.executeHandler({id:u,args:o});let c=t===n||t===i?"ShowNode":"HideNode";e.trackChanges({category:"HideShow",action:c,label:c,dims:{pd1:r.args.origin},executionContext:r.executionContext})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");o()},expandAll:async function(e,n){n.args.node?n.args.node.expandAll():t.error("Invalid input, require node in argurement"),e()},collapseAll:async function(e,n){n.args.node?n.args.node.collapseAll():t.error("Invalid input, require node in argurement"),e()},reframe:async function(e,n){let i=n.executionContext;if(n.args.node){let e=i.getComponent("DELWebViewer"),t=e&&e.getViewerBehavior?e.getViewerBehavior():null;t&&await t.setReframe({path:n.args.node.getRirPath()})}else t.error("Invalid input, require node in arguement");e()},_collectHiddenChildrenNodesToShow:function(e,t){var n=e.getAll3DHiddenChildren();t=UWA.is(t,"array")?t:[],e.getAttributeValue("hideShow3D")!==e.ENUM_3DVISIBILITY.ON&&t.push(e),n.hidden.forEach(e=>{t.push(e)}),n.partialHidden.forEach(e=>{t.push(e)})},showOnly:async function(e,n){var i=n.args.node,o=n.args.hideIn3DHandlerId,a=n.args.showIn3DHandlerId,s=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent),l=n.executionContext.getComponent(WAfrStandardComponentKey.ModelEvents);if(s.hasHandler(o)&&s.hasHandler(a)){let e=[],t=[];(function e(t,n,i){t&&UWA.is(t.getBrothers(),"array")&&t.getBrothers().length>0&&t.getBrothers().forEach(e=>{i.push(e)}),t.isRoot()||(n.push(t.getParent()),e(t.getParent(),n,i))})(i,t,e),r._collectHiddenChildrenNodesToShow(i,t),await s.executeHandler({id:a,args:{path:t.map(e=>e.getRirPath())}}),await s.executeHandler({id:o,args:{path:e.map(e=>e.getRirPath())}}),l.publish({event:"onShowOnly",data:{data:{path:i.getRirPath()}}})}else t.error("Handlers are not valid, please make sure right handlers are provided in config");e()},showAll:async function(e,n){let i=n.args.node,o=n.args.showIn3DHandlerId,a=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);if(a.hasHandler(o))if(i){let e=[];r._collectHiddenChildrenNodesToShow(i,e),await a.executeHandler({id:o,args:{path:e.map(e=>e.getRirPath())}}),modelEvents.publish({event:"onShowAll",data:{data:{path:i.getRirPath()}}})}else t.error("Invalid input, require node in handler arguement");else t.error("Handlers are not valid, please make sure right handlers are provided in config");e()},removeRoot:async function(e,n){let i=n.args.node,o=n.executionContext.getComponent(WAfrStandardComponentKey.HandlerComponent);o.hasHandler("DELWebOERRemoveRoots")?o.executeHandler({id:"DELWebOERRemoveRoots",args:{items:[{id:i.getReferenceId()}]}}):t.error("Invalid input, require treedocument and node in handler arguement"),e()},toggleFTA:async function(e,n){if(n.args.node&&n.args.treeDocument){let e=n.args.node,t=e.getAttributeValue(o),i=n.executionContext.getComponent("DELWebViewer"),r=i&&i.getViewerBehavior?i.getViewerBehavior():null;r&&(e.setAttribute(o,t===e.ENUM_REQUIREMENT.LOAD?e.ENUM_REQUIREMENT.REMOVE:e.ENUM_REQUIREMENT.LOAD),t===e.ENUM_REQUIREMENT.LOAD?await r.loadFTA({path:e.getRirPath()}):await r.removeFTA({path:e.getRirPath()}))}else t.error("Invalid input, require treedocument and node in handler arguement");e()},loadFTA:async function(e,n){if(n.args.node){let e=n.args.node;e.setAttribute(o,e.ENUM_REQUIREMENT.REMOVE);let t=n.executionContext.getComponent("DELWebViewer"),i=t&&t.getViewerBehavior?t.getViewerBehavior():null;i&&await i.loadFTA({path:e.getRirPath()})}else t.error("Invalid input, require treedocument and node in handler arguement");e()},removeFTA:async function(e,n){if(n.args.node){let e=n.args.node;e.setAttribute(o,e.ENUM_REQUIREMENT.LOAD);let t=n.executionContext.getComponent("DELWebViewer"),i=t&&t.getViewerBehavior?t.getViewerBehavior():null;i&&await i.removeFTA({path:e.getRirPath()})}else t.error("Invalid input, require treedocument and node in handler arguement");e()},loadAllFTA:async function(e,n){if(n.args.node&&n.args.treeDocument){let e=[],t=n.args.treeDocument,i=function(e){return e.getAttributeValue(o)},r=function t(n){UWA.is(i(n))&&(e.push(n.getRirPath()),n.setAttribute(o,n.ENUM_REQUIREMENT.REMOVE)),n.hasChildren()&&n.getChildren().forEach(t)};t.prepareUpdate(),r(n.args.node),t.pushUpdate();let a=n.executionContext.getComponent("DELWebViewer"),s=a&&a.getViewerBehavior?a.getViewerBehavior():null;s&&await s.loadFTA({path:e})}else t.error("Invalid input, require treedocument and node in handler arguement");e()},removeAllFTA:async function(e,n){if(n.args.node&&n.args.treeDocument){let e=[],t=n.args.treeDocument,i=function(e){return e.getAttributeValue(o)},r=function t(n){UWA.is(i(n))&&(e.push(n.getRirPath()),n.setAttribute(o,n.ENUM_REQUIREMENT.LOAD)),n.hasChildren()&&n.getChildren().forEach(t)};t.prepareUpdate(),r(n.args.node),t.pushUpdate();let a=n.executionContext.getComponent("DELWebViewer"),s=a&&a.getViewerBehavior?a.getViewerBehavior():null;s&&await s.removeFTA({path:e})}else t.error("Invalid input, require treedocument and node in handler arguement");e()},biColorize:async function(e,n){let i=n.executionContext,o=n.args.treeDocument,r=n.args.data;if(o&&r&&UWA.is(r.tagColors,"array")&&r.tagColors.length>0){let e=r.tagColors[0].predicate,t=o.getAllDescendants()||[],n=[];if(t.length>0){t.forEach(e=>{-1===n.indexOf(e.getReferenceId())&&n.push(e.getReferenceId())});let a,s=await i.getComponent("DELCommonUtilsServices").getAttributeForIds(n,[e]),l=function(e,t,n){var i,o,r,a,s,l="#00000000",d=[];if("date"===e&&UWA.is(n,"string"))for(s=new Date(n),d.push([s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2),("0"+s.getDate()).slice(-2)].join("/")),d.push([s.getFullYear(),("0"+(s.getMonth()+1)).slice(-2)].join("/")),d.push(s.getFullYear().toString()),o=!0,i=0,r=d.length;i<r&&o;i++)void 0!==t.map[d[i]]&&(o=!1,l=t.map[d[i]]);else"boolean"===e&&"boolean"==typeof n?(a=n?"TRUE":"FALSE",l=t.map[a]):void 0!==t.map[n]&&(l=t.map[n]);return l};a=function(e){var t={predicateKind:"",colorMap:{map:{},predicate:void 0}};return UWA.is(e.tagColors,"array")&&e.tagColors.length>0&&(t.predicateKind=e.tagColors[0].type,e.tagColors.forEach(function(e){var n,i;void 0===t.colorMap.predicate&&(i=(n=e.predicate.split("/"))[n.length-1],t.colorMap.predicate=i),t.colorMap.map[e.object]=e.color})),t}(r),o.withTransactionUpdate(function(){t.forEach(e=>{var t=s[e.getReferenceId()],n=t&&t[a.colorMap.predicate]?t[a.colorMap.predicate]:null,i=l(a.predicateKind,a.colorMap,n);e.updateOptions({isBeingCut:"#00000000"===i,grid:{biColor:i}})})})}}else t.error("Invalid input, require treedocument and data in handler arguement");e()},biUnColorize:async function(e,n){let i=n.args.treeDocument;UWA.is(i)?i.withTransactionUpdate(function(){i.getAllDescendants().forEach(function(e){e.updateOptions({isBeingCut:!1,grid:{biColor:"#00000000"}})})}):t.error("Invalid input, require treedocument handler arguement"),e()}};return r}),define("DS/DELWebOERTableViewComp/column/views/BuildUp",["DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json","css!DS/DELWebOERTableViewComp/assets/css/PPR2DStructure.css"],function(e,t){"use strict";return{dataIndex:"buildUp",sortableFlag:!1,editableFlag:!0,isDraggable:!1,isExportable:!1,groupableFlag:!1,displayType:"BuildUp",editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",alignment:"center",visibleFlag:!0,disabled:!0,width:30,height:"40px",pinned:"right",icon:e.getAssetsUrl("DELWebOERTableViewComp","icons/32/I_3DColumn.png"),getCellTooltip:function(e,n){var i=n.nodeModel;return-1===n.rowID?{shortHelp:t.get("BuildUp.description"),updateModel:!1}:i.getAttributeValue("buildUp")===i.ENUM_BUILDUP.LOADING?{shortHelp:t.get("BuildUp.Loading.description"),updateModel:!1}:{shortHelp:"",updateModel:!1}},getCellClassName:function(e,t){var n="";return 0===t.rowID&&(n="del-buildup"),n},getCellSemantics:function(t,n){var i=n.nodeModel,o={};switch(i.getAttributeValue("buildUp")){case i.ENUM_BUILDUP.ACTIVATE:o.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELProductBuildUp_ON.png");break;case i.ENUM_BUILDUP.DEACTIVATE:o.icon=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELProductBuildUp_OFF.png");break;case i.ENUM_BUILDUP.LOADING:o.icon={iconName:"reload wux-ui-3ds-spin",fontIconFamily:1}}return o}}}),define("DS/DELWebOERTableViewComp/column/views/Responsible",["i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json"],function(e){"use strict";return{kind:"user",minWidth:200,height:"40px",editableFlag:!1,typeRepresentation:"user",customisation:{exportable:{lock:!1,value:!0}},getCellTooltip:function(t,n){let i;return-1===n.rowID?i={shortHelp:e.get("Owner.description"),updateModel:!1}:n&&n.nodeModel&&n.nodeModel.options&&n.nodeModel.options.grid&&n.nodeModel.options.grid[t]&&(i={shortHelp:n.nodeModel.getReferenceValue(t)}),i},getCellValue:function(e,t){if(t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]){return{icon:{iconName:"topbar-user",fontIconFamily:1},label:t.nodeModel?t.nodeModel.options.grid[e]:""}}return""},getCellValueForExport:function(e,t){return t&&t.nodeModel?t.nodeModel.options.grid[e]:""}}}),define("DS/DELWebOERTableViewComp/utils/Utils",["UWA/Promise","DS/i3DXCompassPlatformServices/OpenWith","DS/PADUtils/PADTypesMgt","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR"],function(e,t,n,i){"use strict";var o={openWithApps:function(r){return new e(function(e){let a=new t,s=o.get3DXContent(r);n.retrieveHierarchy([r.node.getReferenceType()],function(t){s.data.items[0].objectTaxonomies=t[r.node.getReferenceType()],a.set3DXContent(s,!0),a.retrieveCompatibleApps(function(t){var n=[],o=[];t.forEach(function(e){o.push({type:"PushItem",title:e.text,fonticon:e.fonticon&&e.fonticon.length>0?{content:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-"+e.fonticon,family:WUXManagedFontIcons.Font3DS}:void 0,icon:e.icon?e.icon:"",action:{callback:e.handler}})}),n={type:"PushItem",icon:{iconName:"open-menu-dot",fontIconFamily:1},title:i.get("ContextualMenu.OpenWith")},o.length>0&&(n.submenu=o.length>0?o:[]),e(n)})})})},get3DXContent:function(e){let t=e.executionContext.getComponent("DELCommonUtilsServices");return{protocol:"3DXContent",version:"1.1",source:t.getAppId(),widgetId:t.getWidgetId(),data:{items:[{envId:t.getPlatformId(),serviceId:"3DSpace",contextId:t.getCurrentSecurityContext(),objectId:e.node?e.node.getReferenceId():"",objectType:e.node?e.node.getReferenceType():"",displayName:e.node?e.node.getLabel():""}]}}}};return o}),define("DS/DELWebOERTableViewComp/model/DELWebDictionaryModel",["DS/Logger/Logger"],function(e){"use strict";return function(t){let n={attributes:[],dimenstions:[]},i=t.executionContext;return{fetchAttributesAndDimension:function(t){var o=i.getComponent("DELCommonUtilsServices");return new UWA.Promise((e,n)=>{t&&t.length>0?o.executeRequestPromise(`${o.get3DSpaceUrl()}/resources/dictionary/properties`,{method:"POST",payload:t}).then(e).catch(n):n("No attributes found")}).then(function(e){return n.attributes=e,e}).then(function(e){var t=[];return e&&e.length>0&&e.forEach(e=>{e&&e.info&&e.info.forEach(e=>{let n=e?e.Magnitude:null;n&&function(e){t.includes(e)||t.push(e)}(n)})}),t}).then(function(e){let t=UWA.Promise.resolve();return e&&e.length>0&&(t=o.executeRequestPromise(`${o.get3DSpaceUrl()}/resources/dictionary/dimensions?${function(e){return`$filter=dimensionName+eq+${e.join(",")}`}(e)}`,{method:"GET"})),t}).then(function(e){n.dimensions=e?e.results:[]}).fail(t=>{e.debug(t),e.error("Failed to fetch dictionary attributes/dimension due to ",t.toString())})},getAttributes:function(){var t=n&&n.attributes?n.attributes:[];return 0===t.length&&e.warn("Initialize dictionary service before user/attributes not found"),t},getAttributeInfo:function(e,t){let n,i=this.getAttributes().find(t=>t.type===e);return i&&i.info&&(n=i.info.find(e=>e.Name===t)),n},getAuthorizedValues:function(e){let t=[];return e&&"Yes"===e.HasRangeDefined&&(t=e.AuthorizedValues),t},getDimension:function(e){var t;return n&&n.dimensions&&(t=n.dimensions.find(t=>t.Name===e)),t},getUnit:function(e,t){let n,i=this.getDimension(e);return i&&(t=t||i.MKSUnit,n=i.Units?i.Units.find(e=>e.Name===t):null),n},empty:function(){n={attributes:[],dimensions:[]}}}}}),define("DS/DELWebOERTableViewComp/column/views/ConfigurationColumns",[],function(){"use strict";const e="string",t="configLoading";return{Effectivity:{dataIndex:"Effectivity",width:"auto",minWidth:"100",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},VariantEffectivity:{dataIndex:"VariantEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},EvolutionEffectivity:{dataIndex:"EvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},CurrentEvolutionEffectivity:{dataIndex:"CurrentEvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},ProjectedEvolutionEffectivity:{dataIndex:"ProjectedEvolutionEffectivity",width:"auto",minWidth:"200",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},ConfigurationContext:{dataIndex:"ConfigurationContext",width:"auto",minWidth:"150",visibleFlag:!1,sortableFlag:!1,groupableFlag:!1,editionPolicy:"EditionOnClick",editableFlag:!1},getCellTypeRepresentation:function(n){var i,o=t;return UWA.owns(n,"nodeModel")&&(i=n.nodeModel,UWA.is(i)&&(o=UWA.is(n.cellModel,"string")&&0===n.cellModel.length?!!UWA.is(i.options.areCfgColumnsFilled,"boolean")&&i.options.areCfgColumnsFilled?e:t:e)),o},hasCellValue:function(){return!0},getCellValue:function(e,t){var n,i=null;return UWA.owns(t,"nodeModel")&&(n=t.nodeModel.options.grid[e],i=UWA.is(n,"string")?n.trim():n),UWA.is(i)?i:""}}}),define("DS/DELWebOERTableViewComp/column/views/PositionMatrix",["DS/Handlebars/Handlebars","text!DS/DELWebOERTableViewComp/assets/templates/positionMatrixTooltip.html","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json","css!DS/DELWebOERTableViewComp/assets/css/positionmatrix.css"],function(e,t,n){"use strict";var i=e.compile(t);return{editableFlag:!0,typeRepresentation:"functionIcon",alignment:"center",getCellSemantics:function(e,t){return{icon:t.nodeModel.options.grid[e]?{iconName:"part-position wux-ui-3ds",fontIconFamily:WUXManagedFontIcons.Font3DS,fontIconSize:"1x"}:""}},getCellTooltip:function(e,t){var o,r,a,s,l,d,u;return-1===t.rowID?o={shortHelp:n.get("PositionMatrix.description"),updateModel:!1}:t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]&&(r=(a=t.nodeModel.options.grid[e])?(s=6,d=a.split(","),u={className:l,x1:Number(d[0]).toFixed(s).toString(10).substring(0,s+3),x2:Number(d[1]).toFixed(s).toString(10).substring(0,s+3),x3:Number(d[2]).toFixed(s).toString(10).substring(0,s+3),y1:Number(d[3]).toFixed(s).toString(10).substring(0,s+3),y2:Number(d[4]).toFixed(s).toString(10).substring(0,s+3),y3:Number(d[5]).toFixed(s).toString(10).substring(0,s+3),z1:Number(d[6]).toFixed(s).toString(10).substring(0,s+3),z2:Number(d[7]).toFixed(s).toString(10).substring(0,s+3),z3:Number(d[8]).toFixed(s).toString(10).substring(0,s+3),t1:Number(d[9]).toFixed(s).toString(10).substring(0,s+3),t2:Number(d[10]).toFixed(s).toString(10).substring(0,s+3),t3:Number(d[11]).toFixed(s).toString(10).substring(0,s+3)},i(u)):"<span>"+a+"</span>",o={title:n.get("PositionMatrix.Title"),shortHelp:r,allowUnsafeHTMLShortHelp:!0,wrapThreshold:315,updateModel:!1}),o},width:"100px",height:"40px"}}),define("DS/DELWebOERTableViewComp/column/views/Requirement",["DS/DELWebOERCommonUtils/utils/CommonUtils","i18n!DS/DELWebOERTableViewComp/assets/nls/DELWebPPR.json"],function(e,t){"use strict";return{height:"40px",editionPolicy:"EditionInPlace",editableFlag:!0,alignment:"center",typeRepresentation:"functionIcon",getCellSemantics:function(t,n){var i,o=n.nodeModel;switch(o.getAttributeValue(t)){case o.ENUM_REQUIREMENT.LOAD:i=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELLoadFTA.png");break;case o.ENUM_REQUIREMENT.REMOVE:i=e.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELRemoveFTA.png")}return{icon:i}},getCellTooltip:function(e,n){var i,o=n&&n.nodeModel&&UWA.is(n.nodeModel.getAttributeValue(e))?n.nodeModel.getAttributeValue(e):null;return-1===n.rowID?i={shortHelp:t.get("Requirement.description"),updateModel:!1}:UWA.is(o)&&(i={shortHelp:o===n.nodeModel.ENUM_REQUIREMENT.LOAD?t.get("LoadRequirement.tooltip"):t.get("RemoveRequirement.tooltip"),updateModel:!1}),i}}}),define("DS/DELWebOERTableViewComp/model/SelectionManager",["UWA/Core","UWA/Class","DS/PlatformAPI/PlatformAPI","DS/Selection/XSO","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/utils/XSOManager"],function(e,t,n,i,o,r){"use strict";return t.extend({init:function(e){let t=this;this.enableCrossPreHighlight=e.enableCrossPreHighlight,this._hso=new i({eventChannel:"DELOER/",useUniqueID:!0,getElementID:function(e={}){return e.getId()}}),this.getTreeDocument().addModelEventListener("highlight",function(e={}){var n=e.target;n&&t._hso.add(n)}),this.getTreeDocument().addModelEventListener("unhighlight",function(e={}){var n=e.target;n&&(n.removeAttribute("isHighlighted"),t._hso.remove(n))});let n=function(e){let t=this,n=e.data.nodeModel;n&&(t.enableCrossPreHighlight&&t._computePreSelect(t._getNodes(n,"isPreSelected"),!0),t._computeHighlight(t._getNodes(n,"isHighlighted"),!0))};this.getTreeDocument().onPostExpand(n.bind(this)),this.getTreeDocument().onPostCollapse(n.bind(this)),this.getTreeDocument().getXSO().onPostAdd(function(e){t._notifySelectionToPlatform(),r.getCSO().add(e)}),this.getTreeDocument().getXSO().onPostRemove(function(e){t._notifySelectionToPlatform(),r.getCSO().remove(e)})},_notifySelectionToPlatform(){let e=this.executionContext.getComponent("DELCommonUtilsServices");n.publish("DS/PADUtils/PADCommandProxy/select",{metadata:{timestamp:Date.now(),appid:e.getAppId(),xappid:e.getAppId(),originWidgetId:e.getWidgetId(),ignoreFromSameWidgetId:!0},data:{paths:this.getSelectedPaths()}})},_computePreSelect:function(e,t){e.forEach(function(e){for(var n=e,i=t;n;)n.isVisible()?(i!==n.isPreSelected()&&(i?n.preSelect():n.unPreSelect()),n.isRoot()?n=null:(n=n.getParent(),i&&(i=!i))):(!i&&n.isPreSelected()&&n.unPreSelect(),n=n.getParent())})},_computeHighlight:function(e,t){e.forEach(function(e){for(var n=e,i=t;n;)n.isVisible()?(i!==n.isHighlighted()&&(i?n.highlight():n.unhighlight()),n.isRoot()?n=null:(n=n.getParent(),i&&(i=!i))):(!i&&n.isHighlighted()&&n.unhighlight(),n=n.getParent())})},_changeHighlight:function({path:e,highlight:t}){let n=this.getNodeFromPath(e);n&&(t?n.setAttribute("isHighlighted",!0):n.removeAttribute("isHighlighted"),this._computeHighlight([n],t))},_getNodes:function(e,t){return e.search({match:function(e){if(e.nodeModel.getAttributeValue(t))return!0}})},_getInputPaths:function(e={}){let t=e.path,n=[];return t&&(n=o.isArrayOfArray(t)?t:[t]),n},highlight:function(e={}){let t=this._getInputPaths(e)||[];e.clear&&this.clearHighlight(),t.forEach(e=>{this._changeHighlight({path:e,highlight:!0})})},unhighlight:function(e={}){(this._getInputPaths(e)||[]).forEach(e=>{this._changeHighlight({path:e,highlight:!1})})},getPSOManager:function(){return this.getTreeDocument().getPXSO()},_changePreSelect:function(e={}){let{path:t,preSelect:n}=e,i=this.getNodeFromPath(t);i&&(!1!==n&&i.isPreSelected()===n||(n?i.setAttribute("isPreSelected",!0):i.removeAttribute("isPreSelected"),this._computePreSelect([i],n)))},preHighlight:function(e={}){(this._getInputPaths(e)||[]).forEach(e=>{this._changePreSelect({path:e,preSelect:!0})})},unPreHighlight:function(e={}){(this._getInputPaths(e)||[]).forEach(e=>{this._changePreSelect({path:e,preSelect:!1})})},getSelectionManager:function(){return this.getTreeDocument().getXSO()},getSelectedPaths:function(){return this.getTreeDocument().getSelectedNodes().map(function(e){return e.getRirPath()})},clearHighlight:function(){let e=this;this._hso.get().forEach(t=>{t.unhighlight(),(e._getNodes(t,"isHighlighted")||[]).forEach(e=>{e.unhighlight()})})},clearSelection:function(){this.getTreeDocument().unselectAll()}})}),define("DS/DELWebOERTableViewComp/model/DELWebPPRNode",["DS/TreeModel/TreeNodeModel"],function(e){"use strict";let t=0;var n=function(n){n=n||{},this._referenceId=null,this._instanceId=null,this._type=null,this._instanceType=null,this.counterId=t++,this.setReferenceId(n.referenceId),this.setReferenceType(n.type),this.setInstanceType(n.instanceType),this.options=n,n.instanceId&&this.setInstanceId(n.instanceId),e.apply(this,arguments)};return(n.prototype=Object.create(e.prototype)).constructor=n,n.prototype.getId=function(){return this.counterId},n.prototype.setReferenceId=function(e){return UWA.is(e,"string")?(this._referenceId=e,this.getReferenceId()):null},n.prototype.setInstanceId=function(e){return UWA.is(e,"string")?(this._instanceId=e,this.getInstanceId()):null},n.prototype.setReferenceType=function(e){return UWA.is(e,"string")?(this._type=e,this.getReferenceType()):null},n.prototype.setInstanceType=function(e){return UWA.is(e,"string")?(this._instanceType=e,this.getInstanceType()):null},n.prototype.getReferenceId=function(){return this._referenceId},n.prototype.getInstanceId=function(){return this._instanceId},n.prototype.getReferenceType=function(){return this._type},n.prototype.getInstanceType=function(){return this._instanceType},n.prototype.get3DHiddenChildren=function(){var e={hidden:[],partialHidden:[]},t=this.getChildren();return t&&t.forEach(function(t){var n=t.getAttributeValue("hideShow3D");n===t.ENUM_3DVISIBILITY.OFF?e.hidden.push(t):n===t.ENUM_3DVISIBILITY.PARTIAL&&e.partialHidden.push(t)}),e},n.prototype.getAll3DHiddenChildren=function(){var e=[],t=[];return function e(t,n,i){var o=t.get3DHiddenChildren();o.hidden.forEach(t=>{n.push(t),e(t,n,i)}),o.partialHidden.forEach(t=>{i.push(t),e(t,n,i)})}(this,e,t),{hidden:e,partialHidden:t}},n.prototype.get3DVisibility=function(){var e=this.getChildren()||[],t=this.get3DHiddenChildren();this.ENUM_3DVISIBILITY.ON;return t.hidden.length===e.length?this.ENUM_3DVISIBILITY.OFF:0===t.hidden.length&&0===t.partialHidden.length?this.ENUM_3DVISIBILITY.ON:this.ENUM_3DVISIBILITY.PARTIAL},n.prototype.changeParent3DVisibility=function(){var e;if(!this.isRoot())for(e=this.getParent();e;)e.getUserHiddenState()?e=null:(e.setAttribute("hideShow3D",e.get3DVisibility()),e=e.isRoot()?null:e.getParent())},n.prototype.update3DVisibility=function(e){switch(e){case this.ENUM_3DVISIBILITY.ON:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.ON),this.setUserHiddenState(!1);break;case this.ENUM_3DVISIBILITY.OFF:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.OFF),this.setUserHiddenState(!0);break;case this.ENUM_3DVISIBILITY.PARTIAL:this.setAttribute("hideShow3D",this.ENUM_3DVISIBILITY.PARTIAL),this.setUserHiddenState(!1)}},n.prototype.getRirPath=function(){for(var e=this,t=[];e;){if(e.isRoot()){t=[e.options.referenceId].concat(t);break}t=[e.options.instanceId,e.options.referenceId].concat(t),e=e.getParent()}return t},n.prototype.getRelations=function(){return{to:UWA.is(this.options.to,"array")?this.options.to:[],from:UWA.is(this.options.from,"array")?this.options.from:[]}},n.prototype.setUserHiddenState=function(e){this.options.hiddenStateSet=e},n.prototype.getUserHiddenState=function(){return!0===this.options.hiddenStateSet},n.prototype.isLeaf=function(){var e=this.getChildren();return!e||0===e.length},n.prototype.getConsumedItems=function(){var e={MfgItems:[],Resources:[]};return this.options.consumedMfgItems&&(e.MfgItems=UWA.clone(this.options.consumedMfgItems)),this.options.consumedCapableResource&&(e.Resources=UWA.clone(this.options.consumedCapableResource)),e},Object.defineProperty(n.prototype,"ENUM_3DVISIBILITY",{value:Object.freeze({ON:1,OFF:0,PARTIAL:2}),writable:!1,configurable:!1}),Object.defineProperty(n.prototype,"ENUM_BUILDUP",{value:Object.freeze({ACTIVATE:1,DEACTIVATE:0,LOADING:-1}),writable:!1,configurable:!1}),Object.defineProperty(n.prototype,"ENUM_REQUIREMENT",{value:Object.freeze({LOAD:1,REMOVE:0}),writable:!1,configurable:!1}),n}),define("DS/DELWebOERTableViewComp/column/views/Relation",["UWA/Core"],function(e){"use strict";return e.clone({width:"150px",height:"40px",typeRepresentation:"url",getCellValue:function(t,n){let i=t.split("."),o=i[0]?i[0]:null,r=i[1]?i[1]:null,a=[],s=n&&n.nodeModel&&n.nodeModel.getRelations?n.nodeModel.getRelations():{};return s&&e.is(s[o],"array")&&s[o].forEach(e=>{if(e.link===r){let t=e.data.label+" "+e.data.revision;a.push({icon:{iconPath:e.data.icon,iconSize:{width:"22px",height:"22px"}},label:t})}}),a}})}),define("DS/DELWebOERTableViewComp/view/DELWebOERDataGridView",["DS/DELWebCommonControls/DELWebDataGridView","DS/DELWebOERTableViewComp/utils/Utils","text!DS/DELWebOERTableViewComp/assets/json/DataGridViewOptions.json","css!DS/DELWebOERTableViewComp/assets/css/datagridview.css"],function(e,t,n){"use strict";return function(i){let o,r=JSON.parse(n);return i=i||{},Object.assign(i,r.dataGridViewOptions),i.onContextualMenu&&(i.onContextualEvent=async function(e){var t=[];return e&&e.collectionView&&(t=(t=e.collectionView.buildDefaultContextualMenu(e)).concat(await i.onContextualMenu(e))),t}),o=new e(i),i.container&&o.getContent().inject(i.container),o.onDragStartCell=function(e,n){var o=n.nodeModel;let r=t.get3DXContent({node:o,executionContext:i.executionContext});return e.dataTransfer.setData("Text",JSON.stringify(r)),!1},i.onSelect&&o.getNodesXSO().onChange(function(e){i.onSelect(e)}),i.onHover&&o.addEventListener("mouseover",i.onHover),i.onClick&&o.addEventListener("click",function(e,t){i.onClick(e,t)}),{displayProgressBar:function(e){o.displayProgressBar(e)},ensureNodeModelVisible:function(){o.ensureNodeModelVisible.apply(o,arguments)},setToolbar:function(e){var t,n;return e="object"==typeof e?e:JSON.parse(e),(n=UWA.createElement("div")).className="divToolbar",n.setAttribute("id","divToolbar"),(t=o.setToolbar(e)).inject(n),t.show(),o.getContent().style.top="50px",n},getToolbar:function(){return o.getToolbar()},destroy:function(){o.destroy()},updateColumn:function(e,t){o&&e&&t&&o.layout.setColumnOrGroupProperties(e,t)},isColumnDisabled:function(e){return o.layout.getColumnDisabled(e)},getColumnIndex:function(e){return o.layout.getColumnIndex(e)},registerTypeRepresentations:function(e){o.getTypeRepresentationFactory().registerTypeRepresentations(e)}}}}),define("DS/DELWebOERTableViewComp/model/DELWebOERItemDocument",["UWA/Core","UWA/Class","DS/TreeModel/TreeDocument","DS/DELWebOERTableViewComp/model/DELWebPPRNode","DS/DELWebOERCommonUtils/utils/CommonUtils"],function(e,t,n,i,o){"use strict";return t.extend({init:function(){var e=this;this._model=new n,this._model.onPostExpand(function(t){var n=t.data.nodeModel;n&&(e._computePreSelect(e._getNodes(n,"isPreSelected"),!0),e._computeHighlight(e._getNodes(n,"isHighlighted"),!0))}),this._model.onPostCollapse(function(t){var n=t.data.nodeModel;n&&(e._computePreSelect(e._getNodes(n,"isPreSelected"),!0),e._computeHighlight(e._getNodes(n,"isHighlighted"),!0))})},getBadgeOptions:function(e){let t;switch(e){case"filter":t={bottomRight:{iconName:"filter",fontIconSize:"1x",className:"dgv-badge"}};break;case"hasFTA":t={bottomRight:{iconPath:o.getAssetsUrl("DELWebOERTableViewComp","icons/22/I_DELLoadFTA.png"),iconSize:{height:"12px",width:"12px"}}}}return t},_getNodes:function(e,t){return e.search({match:function(e){if(e.nodeModel.getAttributeValue(t))return!0}})},_createRoot:function(e,t,n){var o;return e&&t&&(o=new i(t[e])).updateOptions({badges:n?this.getBadgeOptions("filter"):null,filter:n}),o},_getNode:function(t,n,i){var o,r,a=[],s=null;if(t)for(a.push(t);a.length>0;){if(!(n!==(o=a.pop()).getReferenceId()||i&&i!==o.getInstanceId())){s=o;break}if(!(e.is(n)||i&&i!==o.getInstanceId())){s=o;break}r=o.getChildren(!0),Array.isArray(r)&&a.push(...r)}return s},_getChildNode:function(e,t,n){let i,o;return e&&(o=e.getChildren())&&(i=o.find(function(e){return t===e.getReferenceId()&&(!n||n===e.getInstanceId())})),i},_createTree:function(t,n,r){var a=this,s=function(o){var r,s=t;for(let t=2,l=o.length;t<l;t+=2){let l=o[t],d=o[t-1],u=a._getChildNode(s,l,d);if(u)s=u;else{if(n.treeOptions&&e.is(n.treeOptions.connectionTypes,"array")&&(-1!==n.treeOptions.connectionTypes.indexOf(n.references[l].type)||-1!==n.treeOptions.connectionTypes.indexOf(n.instances[d].instanceType)))break;r=new i(e.clone(e.extend(n.references[l],n.instances[d],!0))),s.addChild(r),s=r}}};n&&Array.isArray(n.paths)&&n.references&&n.instances&&o.processInChunk(n.paths,200,200,function(e,t){e.forEach(s),t&&r()})},getNodeFromPath:function(t){var n,i,o=this._model.getRoots();return e.is(t,"array")&&t.length>0&&o.length>0&&(n=o.find(function(e){return e&&e.options.referenceId===t[0]}),t.forEach((e,o)=>{if(o>0&&o%2==0){if(!(i=this._getNode(n,e,t[o-1])))return;n=i}})),n},getNodeFromPathV2:function(t,n=!1){let i,o,r=this._model.getRoots();if(e.is(t,"array")&&t.length>0&&r.length>0){o=i=r.find(function(e){return e&&e.getReferenceId()===t[0]});for(let e=2;e<t.length;e+=2){if(!o||!o.hasChildren()){!1===n&&(o=null);break}o=o.getChildren().find(n=>n.getReferenceId()===t[e]&&n.getInstanceId()===t[e-1])}}return o},_computePreSelect:function(e,t){e.forEach(function(e){for(var n=e,i=t;n;)n.isVisible()?(i!==n.isPreSelected()&&(i?n.preSelect():n.unPreSelect()),n.isRoot()?n=null:(n=n.getParent(),i&&(i=!i))):(!i&&n.isPreSelected()&&n.unPreSelect(),n=n.getParent())})},_computeHighlight:function(e,t){e.forEach(function(e){for(var n=e,i=t;n;)n.isVisible()?(i!==n.isHighlighted()&&(i?n.highlight():n.unhighlight()),n.isRoot()?n=null:(n=n.getParent(),i&&(i=!i))):(!i&&n.isHighlighted()&&n.unhighlight(),n=n.getParent())})},_getParentNodes:function(e){var t,n=[];if(e)for(t=e;t;)n.unshift(t),t=t.isRoot()?null:t.getParent();return n},loadData:function(t){var n,i=this;t&&e.is(t.paths,"array")&&t.paths.length>0&&(n=this._createRoot(t.id,t.references,t.filter),this._model.prepareUpdate(),this._model.addRoot(n),this._createTree(n,t,function(){i._model.pushUpdate(),t.onComplete()}))},getTreeDocument:function(){return this._model},getRoots:function(){return this._model&&e.is(this._model.getRoots(),"array")?this._model.getRoots():[]},getSelectedPaths:function(){return this._model.getSelectedNodes().map(function(e){return e.getRirPath()})},preSelect:function(e,t){var n=this.getNodeFromPath(e);n&&(t?n.setAttribute("isPreSelected",!0):n.removeAttribute("isPreSelected"),this._computePreSelect([n],t))},getPathFromId:function(e,t){var n=this._getNode(this._model.getRoots()?this._model.getRoots()[0]:{},e,t);return n?n.getRirPath():[]},getNodeFromID:function(e,t){return this._getNode(this._model.getRoots()?this._model.getRoots()[0]:{},e,t)},highlight:function(e,t){var n=this.getNodeFromPath(e);n&&(t?n.setAttribute("isHighlighted",!0):n.removeAttribute("isHighlighted"),this._computeHighlight([n],t))},removeRoot:function(e){let t=this.getNodeFromPath([e]);if(t)return this.getTreeDocument().removeRoot(t)},empty:function(){this._model.empty()},updateOptions:function(e,t){this._model.prepareUpdate(),e.forEach(e=>{let n=this.getNodeFromPathV2(e);n&&n.updateOptions(t)}),this._model.pushUpdate()}})}),define("DS/DELWebOERTableViewComp/column/DELWebCfgColumnManager",["UWA/Core","UWA/Class","UWA/Class/Promise","DS/DELWebOERTableViewComp/column/views/ConfigurationColumns"],function(e,t,n,i){"use strict";return{checkCfgColumnsAvailability:function(){const e=["DS/CfgWebAppEffectivityUX/scripts/CfgEffectivityColumns","DS/CfgWebAppEffectivityUX/scripts/CfgConfigurationContextColumn"];var t=this;return t._additionalColumnsAMD=[],new n(function(i,o){require(e,function(){var e=[];Array.prototype.slice.call(arguments).forEach(i=>{e.push(new n(function(e){i.isAdditionalColumnsAvailable(function(n){!0===n&&t._additionalColumnsAMD.push(i),e()})}))}),n.all(e).then(i).fail(o)})})},updateAttributes:function(t){var i=this,o=[],r=t.collectionView,a=[],s={pids:[],relids:[],pairs:{}},l=[];this._treeDocument=r.getTreeDocument(),e.is(this._additionalColumnsAMD,"array")&&this._additionalColumnsAMD.length>0&&this._areCfgColumnsVisible(r)&&t.startNodeIndex>=0&&t.endNodeIndex>=0&&e.is(r.model,"array")&&(o=r.model.slice(t.startNodeIndex,t.endNodeIndex+1)).length>0&&(a=o.filter(t=>!(e.is(t.options.areCfgColumnsFilled,"boolean")&&t.options.areCfgColumnsFilled))).length>0&&(this._updateCfgColumnsFilledFlag(a,!1),a.forEach(e=>{e.getReferenceId()&&-1===s.pids.indexOf(e.getReferenceId())&&s.pids.push(e.getReferenceId()),e.getInstanceId()&&s.relids.push(e.getInstanceId())}),this._additionalColumnsAMD.forEach(t=>{l.push(new n(function(n){t.updateAttributes(s,function(t){var i=e.is(t,"string")?JSON.parse(t):t;n(i)})}))}),n.all(l).then(function(t){var n=t.reduce((t,n)=>e.extend(t,n,!0),{});i._updateCfgColAttributes(n,a),i._updateCfgColumnsFilledFlag(a,!0)}).fail(function(e){i.logger.error("Failed to get configuration columns info : ",e)}))},getCfgColumnsConfig:function(){var e=[],t={};return this._additionalColumnsAMD.forEach(t=>{e.push(...t.getManagedColumnNames())}),e.forEach(e=>{i[e]&&(t[e]=i[e],t[e].getCellTypeRepresentation=i.getCellTypeRepresentation,t[e].hasCellValue=i.hasCellValue,t[e].getCellValue=i.getCellValue)}),t},_areCfgColumnsVisible:function(e){var t=[];return this._additionalColumnsAMD.forEach(e=>{t.push(...e.getManagedColumnNames())}),t.some(function(t){return e.getColumnOrGroup(t)&&!0===e.getColumnOrGroup(t).visibleFlag})},_updateCfgColumnsFilledFlag:function(e,t){if(this._treeDocument){this._treeDocument.prepareUpdate();for(let n of e)n.updateOptions({areCfgColumnsFilled:t});this._treeDocument.pushUpdate()}},_updateCfgColAttributes:function(t,n){var i=this,o=function(e){i._treeDocument&&(i._treeDocument.prepareUpdate(),Object.keys(e).forEach(t=>{(function(e){return n.filter(t=>((e,t)=>e===t.getReferenceId())(e,t)||((e,t)=>!t.isRoot()&&e===t.getInstanceId())(e,t))})(t).forEach(n=>{n.updateOptions({grid:e[t]})})}),i._treeDocument.pushUpdate())};e.is(t.pids,"object")&&o(t.pids),e.is(t.relids,"object")&&o(t.relids)}}}),define("DS/DELWebOERTableViewComp/model/DELWebOERTableViewModel",["UWA/Core","UWA/Class","DS/DELWebOERTableViewComp/model/DELWebOERItemDocument","DS/DELWebOERTableViewComp/model/SelectionManager","text!DS/DELWebOERTableViewComp/assets/json/ServicePayloads.json"],function(e,t,n,i,o){"use strict";const r="resourceid",a="ds6w:label",s="ds6w:status",l="ds6w:type",d="ds6wg:revision",u="icon",c="Path",h="ds6w:globalType",g="ds6w:Instance",p="VPMRepInstance",m="IPML.IconName",f="from",b="to",C="Requirement",E=1;return t.extend(i,{init:function(e){if(this.executionContext=e.executionContext,this.PPRTYPES=this.executionContext.getComponent("DELCommonUtilsServices").PPRTYPES,!e.webservices)throw new Error("webservices not found");this.webservices=e.webservices,this.createDocument(),this._parent(e)},createDocument:function(){this._document=new n},getContextId:function(e){return e?e.occurrence&&e.occurrence.length>0?e.occurrence[0]:e.id:null},getData:async function(t){let n,i=this,D=JSON.parse(o),I=D.expandV2,y=function(e,t,n){if(n){let i=n.split(".");"reference"===i[1]?e.push(i[0]):"instance"===i[1]&&t.push(i[0])}};!function(n){n.batch.expands[0].root.physical_id=t.id,n.batch.expands[0].filter=function(){let n=[],i=[],o=function(t){let n;t&&t.length>0&&(n=e.is(t[0],"string")?[t]:t,i=i.concat(n.map(e=>({physical_id_path:e}))))},r=t||{};return r.filter&&n.push(r.filter),o(r.occurrence),o(r.predecessors),i.length>0&&n.push({prefix_filter:{prefix_path:i}}),0===n.length&&n.push({all:1}),{and:{filters:n}}}(),e.is(t.Columns,"array")&&t.Columns.forEach(function(e){y(n.outputs.select_object,n.outputs.select_relation,e.dataIndex)}),t.model&&Object.keys(t.model).forEach(function(e){t.model[e]&&(n.batch.expands[0][e]=t.model[e])})}(I),n=await i.webservices.getProgressiveExpand(I);let _=[];if(e.is(t.Columns)){if(t.Columns.find(e=>e.dataIndex===C)){let e=D.getItemPathsHavingRequirement,n={};e.batch.expands[0].root.physical_id=t.id,(await i.executionContext.getComponent("DELCommonUtilsServices").getProgressiveExpand(e)).results.forEach(e=>{if(e.Path){let t=e.Path.slice(0,-2);n[t]||(n[t]=!0,_.push(t))}})}}let R=function(n){var o={references:{},instances:{},paths:[]},C=[],E=[],D=!(!t.pprType||t.pprType!==i.PPRTYPES.RESOURCE),I=function(e){return{label:e.label,icon:e.icons[0],revision:e.grid[d+".reference"]}};return e.is(t.Columns,"array")&&t.Columns.forEach(function(e){y(E,C,e.dataIndex)}),e.is(n,"array")&&n.forEach(n=>{if(n[c])o.paths.push(n[c]);else if(n[h]===g||n[l]===p){if(o.instances[n[r]]={instanceId:n[r],instanceType:n[l],grid:{}},function(n){let i=!1;return t&&t.treeOptions&&e.is(t.treeOptions.connectionTypes,"array")&&(i=t.treeOptions.connectionTypes.includes(n)),i}(n[l])&&n[f]&&n[b]&&o.references[n[f]]&&o.references[n[b]]){let t=o.references[n[f]],i=o.references[n[b]];e.is(t[b],"array")?t[b].push({link:n[l],data:I(i)}):(t[b]=[],t[b].push({link:n[l],data:I(i)})),e.is(i[f],"array")?i[f].push({link:n[l],data:I(t)}):(i[f]=[],i[f].push({link:n[l],data:I(t)}))}C.forEach(e=>{o.instances[n[r]].grid[e+".instance"]=n[e]?n[e]:""})}else o.references[n[r]]={referenceId:n[r],label:n[a],grid:{hideShow3D:1},type:n[l],icons:D?[function(e){let t=i.executionContext.getComponent("DELCommonUtilsServices").get3DSpaceUrl()+"/snresources/images/icons/small/";return e?t+e+".png":""}(n[m])]:[n[u]]},E.forEach(function(e){o.references[n[r]].grid[e+".reference"]=e===s?n[e]?n[e].split(".")[1]:"":n[e]})}),o}(n.results);return _.length>0&&R&&R.references&&_.forEach(e=>{let t=e[e.length-1];R.references[t]&&R.references[t].grid?R.references[t].grid[C]=E:(R.references[t]={},R.references[t].grid={},R.references[t].grid[C]=E)}),R},loadModel:async function(t){let n=this,i=this.getContextId(t);t.id=i;let o=await this.getData(t);return await new e.Promise(function(e){o.onComplete=function(){e()},n._document.removeRoot(t.id),n._document.loadData(Object.assign(o,t))}),t},getTreeDocument:function(){return this._document.getTreeDocument()},removeRoot:function(e){this._document.removeRoot(e)},empty:function(){this.webservices.abortAllRequests(),this._document.empty()},update3DVisibility:function(e,t){let n=e.path,i=function(t,n){return((e.attributes||{})[t]||{})[n]},o=this._document.getTreeDocument();n&&(o.prepareUpdate(),n.forEach(e=>{if(!0===i(e[e.length-1],"isCustom"))return;let n=this._document.getNodeFromPathV2(e,!0);n&&(!0===i(n.getReferenceId(),"isPartial")?n.update3DVisibility(n.ENUM_3DVISIBILITY.PARTIAL):t===n.ENUM_3DVISIBILITY.ON&&n.get3DVisibility()===n.ENUM_3DVISIBILITY.PARTIAL?n.update3DVisibility(n.ENUM_3DVISIBILITY.PARTIAL):n.update3DVisibility(t),n.changeParent3DVisibility())}),o.pushUpdate())},getNodeFromPath:function(e){return this._document.getNodeFromPathV2(e,!0)},getNodeFromPathV2:function(e,t){return this._document.getNodeFromPathV2(e,t)},getPathFromId:function(e,t){return this._document.getPathFromId(e,t)},reset3DVisibility(){var t,n=[],i=this.getTreeDocument();i&&(t=i.getRoots(),e.is(t,"array")&&(i.prepareUpdate(),t.forEach(e=>{let t=e.getAll3DHiddenChildren();n.push(e),(n=(n=n.concat(t.hidden)).concat(t.partialHidden)).forEach(e=>{e.update3DVisibility(e.ENUM_3DVISIBILITY.ON)}),n=[]}),i.pushUpdate()))}})}),define("DS/DELWebOERTableViewComp/column/DELWebColumnManager",["UWA/Core","UWA/Class","UWA/Class/Promise","DS/DELWebOERTableViewComp/column/DELWebCfgColumnManager","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERTableViewComp/column/views/PositionMatrix","DS/DELWebOERTableViewComp/column/views/Responsible","DS/DELWebOERTableViewComp/column/views/BuildUp","DS/DELWebOERTableViewComp/column/views/Requirement","DS/DELWebOERTableViewComp/column/views/Relation","text!DS/DELWebOERTableViewComp/assets/json/AttributeColumnMapping.json","css!DS/DELWebOERTableViewComp/assets/css/maturity.css"],function(e,t,n,i,o,r,a,s,l,d,u){"use strict";const c="dicoType",h={Title:{dataIndex:"tree",pinned:"left",editionPolicy:"EditionOnOver",width:"250px",height:"40px",getCellKPIColor:function(e){if(!e.isHeader&&e.nodeModel&&e.nodeModel.options.grid.biColor)return e.nodeModel.options.grid.biColor}},Requirement:l,InstanceLabel:{icon:"flow-cascade",typeRepresentation:"string",width:"150px",height:"40px"},PositionMatrix:r,Revision:{typeRepresentation:"string",width:"60px",height:"40px",alignment:"center"},Description:{typeRepresentation:"string",width:"100px",height:"40px",alignment:"center"},Owner:a,Maturity:{kind:"string",width:80,height:"40px",editableFlag:!1,typeRepresentation:"tag",className:"lc-maturity-state",alignment:"center",customisation:{exportable:{lock:!1,value:!0}},ds6w:"ds6w:status",visibleFlag:!0,getCellClassName:function(e,t){return t&&t.nodeModel&&t.nodeModel.options&&t.nodeModel.options.grid&&t.nodeModel.options.grid[e]}},HideShow3D:{dataIndex:"hideShow3D",sortableFlag:!1,alignment:"center",width:30,height:"40px",pinned:"right",icon:o.getAssetsUrl("DELWebOERTableViewComp","icons/32/I_3DColumn.png"),editableFlag:!0,groupableFlag:!1,editionPolicy:"EditionInPlace",typeRepresentation:"functionIcon",getCellSemantics:function(e,t){var n,i=t&&t.nodeModel?t.nodeModel:null;if(i)switch(i.getAttributeValue("hideShow3D")){case i.ENUM_3DVISIBILITY.OFF:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-off pad_eye_off wux-ui-3ds-lg";break;case i.ENUM_3DVISIBILITY.ON:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye pad_eye wux-ui-3ds-lg";break;case i.ENUM_3DVISIBILITY.PARTIAL:n="wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-eye-partial pad_eye_partial wux-ui-3ds-lg"}return{icon:{iconClasses:n}}}},BuildUp:s,Menu:{width:"45px",completed:!0,dataIndex:"ContextualMenuColumn",typeRepresentation:"chevronMenuIcon",pinned:"right",editableFlag:!1,sortableFlag:!1,groupableFlag:!1,resizableFlag:!1,selectableFlag:!1,printableFlag:!1,alignment:"center",getCellValue:function(){return{}}},Scope:d,ResultingProduct:d};var g={typeRepresentation:"string",alignment:"left"},p={attributeConfig:JSON.parse(u),destroy:function(){this.attributeConfig=null},createColumnConfiguration:function(t){var i,o,r=this,a=r._getNls();return t=t||{},n.all([this.checkCfgColumnsAvailability(),this._dictionaryModel.fetchAttributesAndDimension((i=t.Columns,o={},i.forEach(e=>{let t=e.dataIndex||"",n=r.getAttributeName(t);e[c]&&(o[e[c]]?o[e[c]].push(n):o[e[c]]=[n])}),Object.keys(o).map(e=>({type:e,attributes:o[e]}))))]).then(function(){Object.assign(h,r.getCfgColumnsConfig());let i=[];return e.is(t.Columns,"array")&&t.Columns.forEach(function(t){i.push(e.clone(t))}),n.resolve((o=[],i.forEach(function(e){var t;(t=r.getColumnConfiguration(e))&&(t.text=t.text?a.get(t.text):"",t.description=t.description?a.get(t.description):"",t.dataIndex||(t.dataIndex=e.dataIndex),e.dicoType&&(t.dicoType=e.dicoType),e.icon&&(t.icon=e.icon),t.getCellClassName?t.getCellClassName=t.getCellClassName.bind(null,e.dataIndex):t.getCellClassName=function(e,t){var n="";return t.nodeModel&&!0===t.nodeModel.options.isBeingCut&&(n="del-ppr-component-dgv-cutNode"),n}.bind(null,e.dataIndex),t.getCellSemantics&&(t.getCellSemantics=t.getCellSemantics.bind(null,e.dataIndex)),t.getCellTooltip&&(t.getCellTooltip=t.getCellTooltip.bind(null,e.dataIndex)),t.getCellValue&&(t.getCellValue=t.getCellValue.bind(null,e.dataIndex)),t.getCellValueForExport&&(t.getCellValueForExport=t.getCellValueForExport.bind(null,e.dataIndex)),e.callbacks&&(t.callbacks=e.callbacks),o.push(t))}),o));var o})},getColumnConfiguration:function(e){return e&&h[e.name]?Object.assign({},h[e.name],e.columnProperties?e.columnProperties:{}):this.getColumnConfig(e)},getAttributeName:function(e){return e?e.split(".").slice(0,-1).join("."):null},getColumnConfig:function(e){let t,n=this,i=e?this._dictionaryModel.getAttributeInfo(e.dicoType,this.getAttributeName(e.dataIndex)):null,o=e&&e.columnProperties?e.columnProperties:{};return i&&i.Type&&(t=g,(t=Object.assign({},t,this.attributeConfig[i.Type],{text:i.NLS},o)).semantics=Object.assign({},function(e){let t,i,o={},r=function(e){Object.assign(o,e)};return e&&(t=n._dictionaryModel.getUnit(e.Magnitude),i=n._dictionaryModel.getAuthorizedValues(e),t&&r({units:t.NLSName}),i&&i.length>0&&r({possibleValues:i.map((e,t)=>({value:t+1,label:e.NLS}))})),o}(i),t.semantics)),t}};return Object.assign(p,i),p}),define("DS/DELWebOERTableViewComp/TableViewComp",["DS/DELWebOERCommonUtils/DELWebBaseComponent","DS/DELWebOERTableViewComp/column/DELWebColumnManager","DS/DELWebOERCommonUtils/mixins/RootActionHandlerExtMixin","DS/DELWebOERCommonUtils/utils/CommonUtils","DS/DELWebOERCommonUtils/mixins/IndexServicesMixin","DS/DELWebOERTableViewComp/model/DELWebOERTableViewModel","DS/DELWebOERTableViewComp/model/DELWebDictionaryModel","DS/DELWebOERTableViewComp/view/DELWebOERDataGridView","DS/DELWebOERCommonUtils/utils/TrackUtils","DS/DELWebOERTableViewComp/utils/Utils"],function(e,t,n,i,o,r,a,s,l,d){"use strict";const u={root:"root",intermediate:"intermediate",leaf:"leaf",all:"all"},c={ON:1,OFF:0,PARTIAL:2};class h extends e{constructor(e){if(super(e),!e.appConfigPath||!e.nlsAMDPath)throw new Error("Invalid input, appConfigPath and nlsAMDPath is mandatory");this.configModulePath=e.appConfigPath,this.nlsAMDPath=e.nlsAMDPath,this._columns=[],this._contextuMenuOptions=[],this.rootsLoaded=[],this._container=null}async initialize(){await super.initialize(),this._subscribeEvents(),this._compConfig=await this.loadJson(this.configModulePath),this._nls=await this.loadNLS(this.nlsAMDPath),this._contextualMenu=UWA.is(this._compConfig.contextualMenu,"array")?this._compConfig.contextualMenu:[],this._dictionaryModel=new a({executionContext:this.getExecutionContext()}),this._columns=await this.createColumnConfiguration(this._compConfig),this.createModel(this._compConfig)}createModel(e={}){this._model=new r({executionContext:this.getExecutionContext(),enableCrossPreHighlight:e.enableCrossPreHighlight,webservices:i.bindComponentToMixin(this,o)})}_subscribeEvents(){[{eventName:{event:"onModelChange:roots"},callback:this.onRootsChange},{eventName:{event:"onRefresh"},callback:this.refresh},{eventName:{event:"DS/DELWebViewer/onHideNode"},callback:this._onHide},{eventName:{event:"DS/DELWebViewer/onShowNode"},callback:this._onShow},{eventName:{event:"onFocus"},callback:this._onFocus},{eventName:{event:"onBIColorize"},callback:this._onBIColorize},{eventName:{event:"onBIUnColorize"},callback:this._onBIUnColorize},{eventName:{event:"onApplyNGFilter"},callback:this._onApplyFilter},{eventName:{event:"onShowOnly"},callback:this._onShowOnly}].forEach(e=>{this.subscribe(e.eventName,e.callback.bind(this))})}_onShow(e){this._tableView&&!this._tableView.isColumnDisabled("hideShow3D")&&this._model.update3DVisibility(e.data,c.ON)}_onHide(e){this._tableView&&!this._tableView.isColumnDisabled("hideShow3D")&&this._model.update3DVisibility(e.data,c.OFF)}_onFocus(e){if(this._tableView&&e.data.path){let t=this._model.getNodeFromPath(e.data.path);t&&this._tableView.ensureNodeModelVisible(t,!1,!0,.5)}}async _onShowOnly(e={}){if(this._tableView&&e.data&&e.data.path){let t=this.getModel();if(!t.getNodeFromPath(e.data.path)){let e,n=this._getColumnConfiguration("hideShow3D");n&&n.callbacks&&n.callbacks.onClick&&n.callbacks.onClick.args&&n.callbacks.onClick.args.hideIn3DHandlerId&&(e=n.callbacks.onClick.args.hideIn3DHandlerId,await this.executeCommand({handlerId:e,args:{path:t.getTreeDocument().getRoots().map(e=>e.getRirPath())}}))}}}_getColumnConfiguration(e){return this._columns.find(t=>t.dataIndex===e)}_onBIColorize(e){if(e&&e.data){let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);t.hasHandler("DELWebOERTableViewCompBIColorize")&&t.executeHandler({id:"DELWebOERTableViewCompBIColorize",args:{data:e.data,treeDocument:this._model.getTreeDocument()}})}}_onBIUnColorize(e){let t=this.getComponentFromIdentifier(WAfrStandardComponentKey.HandlerComponent);t.hasHandler("DELWebOERTableViewCompBIUnColorize")&&t.executeHandler({id:"DELWebOERTableViewCompBIUnColorize",args:{data:e.data,treeDocument:this._model.getTreeDocument()}})}async _onApplyFilter(e){let t,n,i,o=this,r=this.getRoots();r&&e&&e.data&&e.data.filterRootIds&&1===e.data.filterRootIds.length&&(t=!0!==e.data.empty?e.data.CVQueryV2.filter:null,n=e.data.filterRootIds[0],(i=r.find(e=>e.id===n))&&(i.filter=t,await o.removeRoots({items:[i]}),await o.addRoots({items:[i]})))}async refresh(){this._model.empty(),await this.addRoots({items:this.getRoots()})}getRoots(){return this.rootsLoaded}async addRoots(e){var t=this;if(e&&UWA.is(e.items,"array"))if(this._tableView){this._tableView.displayProgressBar(!0),i.markStart("load2DStructure");let n=[];e.items.forEach(e=>{this._compConfig.authorizedPPRTypes.includes(e.pprType)&&(n.push(t._model.loadModel(Object.assign({},e,this._compConfig))),this.rootsLoaded.find(t=>t.id===e.id)||this.rootsLoaded.push(e))}),await Promise.allSettled(n).then(function(n){n.length>0&&n.forEach(n=>{if("fulfilled"===n.status){let i=e.items.find(e=>e.id===n.value.id);t.publish({event:"on2DRootAdded",data:{data:i}})}else if("rejected"===n.status){t.logger.error(n.reason),t.publish({event:"on2DRootAddFailed",data:{}}),t.getNotificationManager().addNotif({level:"error",message:t._nls.get("Error.AddRoots.Message")})}})}),t._tableView.displayProgressBar(!1),i.markEnd("load2DStructure",t.getRegisteredIdentifier()+" Tree structure created in : ")}else this.logger.warn("Container not available to render Table view, use setContainer api to create Table View");else this.logger.error("Invalid input , please check the API documentation and pass all the required information")}async removeRoots(e){var t=this;e&&UWA.is(e.items,"array")&&e.items.forEach(e=>{t._model.removeRoot(e.id),t.rootsLoaded=t.rootsLoaded.filter(t=>!(e.id===t.id))})}setContainer(e){this._container=e,this._createTableView(this._container)}empty(){this._model.empty(),this._tableView&&(this._tableView.destroy(),this._tableView=null),this._container&&(this._container.destroy(),this._container=null),this.rootsLoaded=[]}async clean(){await super.clean(),this.empty(),this._dictionaryModel.empty()}async destroy(){await super.destroy(),this.empty(),t.destroy()}getExposedComponent(){return this.publicAPI=super.getExposedComponent(),this.publicAPI.addRoots=this.addRoots.bind(this),this.publicAPI.removeRoots=this.removeRoots.bind(this),this.publicAPI.getRoots=this.getRoots.bind(this),this.publicAPI.empty=this.empty.bind(this),this.publicAPI.setContainer=this.setContainer.bind(this),this.publicAPI.setOptions=this.setOptions.bind(this),this.publicAPI.getPathFromId=this._model.getPathFromId.bind(this._model),this.publicAPI.getSelectionManager=this._model.getSelectionManager.bind(this._model),this.publicAPI.getSelectedPaths=this._model.getSelectedPaths.bind(this._model),this.publicAPI.clearSelection=this._model.clearSelection.bind(this._model),this.publicAPI.highlight=this._model.highlight.bind(this._model),this.publicAPI.unhighlight=this._model.unhighlight.bind(this._model),this.publicAPI.clearHighlight=this._model.clearHighlight.bind(this._model),this.publicAPI.getPSOManager=this._model.getPSOManager.bind(this._model),this.publicAPI.preHighlight=this._model.preHighlight.bind(this._model),this.publicAPI.unPreHighlight=this._model.unPreHighlight.bind(this._model),this.publicAPI}_createTableView(e){var t=this;this._tableView||(this._tableView=new s({identifier:t.getRegisteredIdentifier(),treeDocument:this._model.getTreeDocument(),columns:this._columns,container:e,executionContext:t.getExecutionContext(),onContextualMenu:t._onContextualMenu.bind(t),onDelayedModelDataRequest:function(e){t.updateAttributes(e)},onClick:function(e,n){let i=t.getRegisteredIdentifier();if(n||t.publish({event:"onClickOnEmptyArea"}),UWA.is(n)&&-1!==n.rowID&&e.dsModel.layout&&!0!==e.dsModel.layout.getColumnDisabled(n.columnID)){let o=e.dsModel.layout.getDataIndexFromColumnIndex(n.columnID),r=(t._columns.find(e=>e.dataIndex===o)||{}).callbacks;r&&r.onClick&&r.onClick.handlerId&&t.executeCommand({handlerId:r.onClick.handlerId,args:{cell:n,node:n.nodeModel,treeDocument:t._model.getTreeDocument(),origin:i,...r.onClick.args}})}}}),this._compConfig&&this._compConfig.tableView&&this._compConfig.tableView.registerTypeRepresentations&&this._tableView.registerTypeRepresentations(this._compConfig.tableView.registerTypeRepresentations))}updateContextualMenu(e){this._contextuMenuOptions=UWA.is(e,"array")?e:[]}async _onContextualMenu(e){let t=this.getExecutionContext().getComponent(WAfrStandardComponentKey.UIComponent).getContextualUIComponentManager(),n=[],i=this;if(e&&e.cellInfos&&-1!==e.cellInfos.rowID){if(this._contextualMenu.forEach(e=>{let i;switch(e.type){case"WAfrDefaultHandlerItem":i=t.buildDefaultHandlerContextMenuItem(e.handlerId),Object.assign(i,e);break;case"WAfrCheckHandlerItem":i=t.buildCheckHandlerContextMenuItem(e.handlerId),Object.assign(i,e);break;default:i=e}i.type="PushItem",n=n.concat(UWA.is(i,"array")?i:[i])}),(n=n.filter(function(t){var n=e.cellInfos.nodeModel;return(!t.availableOn||!t.availableOn.position||(!!t.availableOn.position.includes(u.all)||(n.isRoot()?t.availableOn.position.includes(u.root):n.isLeaf()?t.availableOn.position.includes(u.leaf):t.availableOn.position.includes(u.intermediate))))&&(!t.availableOn||!t.availableOn.column||-1!==t.availableOn.column.values.indexOf(n.getAttributeValue(t.availableOn.column.name)))}).map(function(t){return UWA.is(i._contextuMenuOptions,"array")&&i._contextuMenuOptions.length>0&&i._contextuMenuOptions.forEach(e=>{t.handlerId===e.handlerId&&Object.assign(t,e)}),Object.assign(t,{action:{callback:function(){l.trackChanges({category:"ContextualMenu2DStructure",action:t.handlerId,label:t.handlerId,dims:{pd1:i.getRegisteredIdentifier()},executionContext:i.getExecutionContext()}),i.executeCommand({handlerId:t.handlerId,args:{node:e.cellInfos.nodeModel,treeDocument:i._model.getTreeDocument(),origin:i.getRegisteredIdentifier(),...t.args}})}}})})).find(e=>"OpenWith"===e.identifier)){let t=await d.openWithApps({node:e.cellInfos.nodeModel,executionContext:i.getExecutionContext()});n=n.map(e=>("OpenWith"===e.identifier&&(e=t),e))}}return n}_getNls(){return this._nls}getTableView(){return this._tableView}getModel(){return this._model}setOptions(e={}){let t=this;Object.keys(e).forEach(n=>{t._compConfig||(t._compConfig={}),t._compConfig[n]=e[n]})}getComponentConfig(){return this._compConfig}}return h.prototype.mixinProperties(h,t),h.prototype.mixinProperties(h,n),h.prototype.mixinProperties(h,o),h});