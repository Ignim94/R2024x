define("DS/DELPPWOperations3DViewerModule/ScopeMfgItemSelectionUI",["UWA/Core"],function(e){"use strict";return function(t,n,i){var s,o,r,a,c=1,l=2,d=n.getComponent("Element"),u=n.getComponent("Accordeon"),f=n.getComponent("Button"),g=n.getComponent("ComboBox"),p=n.getComponent("TooltipModel"),I=null,m=null,h=null;return s=function(s){var o,r,a;o=function(n){switch(n){case c:return function(){m.close()};case l:return function(){var t=h.rootField,n=h.occField,i=h.scopedMfgItemField;e.is(s,"function")&&e.is(t)&&e.is(n)&&e.is(i)&&s(t.value,n.value,i.value),m.close()};default:t.log("wrong option")}},r={No:new f({label:i.getNLSValue("ScopeMfgItemSelectionUI.Close.Title"),onClick:o(c)}),Yes:new f({disabled:!1,label:i.getNLSValue("ScopeMfgItemSelectionUI.Load.Title"),onClick:o(l)})},e.is(n)?(a={title:i.getNLSValue("ScopeMfgItemSelectionUI.Dialog.Title"),domId:"ScopeMfgItemSelectionUI-dialog",content:I,resizableFlag:!0,modalFlag:!1,minWidth:290,width:400,buttons:r,visibleFlag:!1},(m=n.create("Dialog",a)).close=function(){e.is(I)&&I.destroy(),this.destroy(),m=null,h=null}):t.debug("uxFactoryBehavior is not available.")},o=function(t){var n,i;return n=new e.Element("div",{class:"accordeon-section-container"}),i=new d("div",{class:"section-container"}),n.inject(I),new u({items:[{header:t,content:i,expandedFlag:!0}],style:"filled-separate"}).inject(n),i.addEvent("resize",function(){var t,n,s;s=i.getElements(".wux-field-container"),i.clientWidth<290?(t="inline-container",n="block-container"):(t="block-container",n="inline-container"),e.is(s)&&s.forEach(function(e){e.removeClassName(t),e.addClassName(n)})}),i},r=function(t,n){t.forEach(function(t){var i,s;i=new e.Element("div",{class:"wux-field-container inline-container"}),new e.Element("h6",{class:"wux-textElement",text:t.label}).inject(i).tooltipInfos=new p({shortHelp:t.label}),s=new g({elementsList:t.elementsList,actionOnClickFlag:!1,enableSearchFlag:!1,value:t.value,disabled:t.disabled}),e.is(t.onChange,"function")&&s.addEventListener("change",t.onChange.bind(null,h)),h[t.name]=s,s.inject(i),i.inject(n)})},a=function(t){var n,s,a,c,l,d={},u={};Array.isArray(t)&&t.length>0&&(a={name:"rootField",label:i.getNLSValue("ScopeMfgItemSelectionUI.Field.Root.Title"),elementsList:[],disabled:!0,onChange:function(t){var n,i,s,o,r,a,c;n=t.rootField,s=t.occField,a=t.scopedMfgItemField,e.is(n)&&e.is(s)&&e.is(a)&&(i=n.value,e.is(d[i])&&(r=(o=d[i])[0].valueItem,s.setProperties({elementsList:o,value:r}),e.is(u[r])&&(c=u[r],a.setProperties({elementsList:c,value:c[0].valueItem}))))}},c={name:"occField",label:i.getNLSValue("ScopeMfgItemSelectionUI.Field.Occurence.Title"),elementsList:[],disabled:!0,onChange:function(t){var n,i,s,o;n=t.occField,s=t.scopedMfgItemField,e.is(n)&&e.is(s)&&(i=n.value,e.is(u[i])&&(o=u[i],s.setProperties({elementsList:o,value:o[0].valueItem})))}},l={name:"scopedMfgItemField",label:i.getNLSValue("ScopeMfgItemSelectionUI.Field.ScopedMfgItem.Title"),elementsList:[],disabled:!0},t.forEach(function(e){var t=[];e.occurences.forEach(function(e){var n=[];t.push({labelItem:e.label,valueItem:e.pid}),e.scopedMfgItems.forEach(function(e){n.push({labelItem:e.label,valueItem:e.pid})}),u[e.pid]=n}),d[e.pid]=t}),s=t[0],a.disabled=!1,a.value=s.pid,a.elementsList=t.map(function(e){return{labelItem:e.label,valueItem:e.pid}}),e.is(d[a.value])&&(c.disabled=!1,c.elementsList=d[a.value],c.value=c.elementsList[0].valueItem,e.is(u[c.value])&&(l.disabled=!1,l.elementsList=u[c.value],l.value=l.elementsList[0].valueItem)),h=[],n=o(i.getNLSValue("ScopeMfgItemSelectionUI.Section.Process.Title")),r([a,c],n),n=o(i.getNLSValue("ScopeMfgItemSelectionUI.Section.MfgItems.Title")),r([l],n))},{createDialog:function(t){!e.is(m)&&e.is(t)&&e.is(t.data)&&e.is(t.onSelectCallback)&&(I=new d("div",{class:"ScopeMfgItemSelectionUI-Container"}),s(t.onSelectCallback),a(t.data),m.show())},isActive:function(){return!!e.is(m)&&m.visibleFlag},destroyUI:function(){e.is(m)&&m.close()}}}}),define("DS/DELPPWOperations3DViewerModule/Viewer3DModule",["UWA/Core"],function(){"use strict";return{behaviors:["RoutingsViewer3DBehavior","SelectionBehavior","LinkBehavior","ProcessImplementBehavior","ProductAbsPathHelperBehavior"],creator:function(){return{name:"Viewer3DModule",onStart:function(e,t){t()},onStop:function(){}}}}}),define("DS/DELPPWOperations3DViewerModule/Operations3DViewerModule",["UWA/Core","DS/TransientWidget/TransientWidget","DS/DELPPWOperations3DViewerModule/ScopeMfgItemSelectionUI"],function(e,t,n){"use strict";return{behaviors:["InterWidgetComBehavior","UXFactoryBehavior","ResourceBehavior","ModelBehavior","RootsBehavior","LinkBehavior","ProcessImplementBehavior","CapableResourceLinkBehaviour","SelectionBehavior","Operations3DViewerBehavior","BuildUpBehavior"],creator:function(i,s,o,r,a,c,l,d,u,f,g,p){const I={commands:[{identifier:"DELWebOERToggleDataGridViewCmd",disable:!0}]};var m,h,P,v,S,D,b,E,R,O,y,L,M,C,V,w,T,A,x,F,U,k,B,W,j,N,Y,H,_,G,q,z,X,J,K,Q,Z,$,ee,te,ne,ie,se,oe,re,ae,ce,le,de=s.isCloud()?"DELOERC_AP":"DELOER_AP",ue=null,fe=null,ge=[],pe=[],Ie={},me={};return P=function(){return g.getPreferences()},v=function(e,t,n){var s={loadedObjInfos:{sysPID:e,scopedMfgItemPID:t,resourceItemPID:n}};g.updatePreferences(s),i.notify("set3DVisibilityState",[{isVisible:!0,parentPID:t}])},S=function(t){var n,s=!!e.is(t)&&t;h=P(),g.updatePreferences(),fe=null,ue=null,s?p.resetAllSessions.call(p):p.resetActiveSession.call(p),e.is(h)&&(n=h.loadedObjInfos,e.is(n)&&i.notify("set3DVisibilityState",[{isVisible:!1,parentPID:n.scopedMfgItemPID}]))},D=function(e){var t,n=[];if(1===e.length)n=e;else for(t=0;t<e.length;t++)t%2==1&&n.push(e[t]);return n},b=function(t){var n,i,s=t.absPath,o=[],r=s[s.length-1],c=e.is(r)?r:t.nodeId,d=null,u=a.getReference(c);if(e.is(u)||(i=a.getInstance(r),e.is(i)&&(u=a.getReferenceModelFromInstance(i),d=i.id,c=u.id)),e.is(c))switch(a.getPPRType(u)){case"OPERATION":case"SYSTEM":l.getConnectedObjects(e.is(d)?d:c,s,{relationTypes:["ProcessImplementLink","ProcessImplementLinkOcc"]}).forEach(function(e){var t=a.transformToRIROccurrencePath(e);o.push(t)});break;case"PROCESS":case"RESOURCE":case"SERVICE":n=a.transformToRIROccurrencePath(s.length>0?s:c),o.push(n)}return o},E=function(t){var n,i,o,r=!1;return s.isOpsViewerWidgetLinked()&&(i=P(),e.is(i)&&(o=i.loadedObjInfos,e.is(o.sysPID)&&(t===o.sysPID?r=!0:(n=a.getReference(t),"SYSTEM"===a.getPPRType(n)&&a.getInstancesFromCollection(t).forEach(function(e){a.getReferenceModelFromInstance(e).get("PID")===o.sysPID&&(r=!0)}))))),r},R=function(t){var n,i,o,r=!1;return s.isOpsViewerWidgetLinked()&&(i=P(),!e.is(i)&&e.is(h)&&(o=h.loadedObjInfos,e.is(o.sysPID)&&(t===o.sysPID?r=!0:(n=a.getReference(t),"SYSTEM"===a.getPPRType(n)&&a.getInstancesFromCollection(t).forEach(function(e){a.getReferenceModelFromInstance(e).get("PID")===o.sysPID&&(r=!0)}))))),r},O=function(t,n){var i=[];return Array.isArray(t)&&t.length>0&&t.forEach(function(t){var s,o,r,c,d=[],u=[];o=a.getReference(t),e.is(o)&&o.isSystem()&&(l.getConnectedObjects(t,null,{relationTypes:["ProcessImplementLink","CapableResourcesStructureLink"]}).forEach(function(e){var t=a.getReference(e);"PROCESS"===t.get("PPRTYPE")||"SERVICE"===t.get("PPRTYPE")?d.push(e):"RESOURCE"===t.get("PPRTYPE")&&(r=e)}),d.length>0?(c=[],d.forEach(function(e){var t=a.getReference(e);c.push({pid:e,label:t.get("PLMEntity.V_Name")})}),e.is(r)||(e.is(n)?n:a.getInstancesFromCollection(t,{sort:!0})).some(function(e){var t,n;return t=a.getReferenceModelFromInstance(e).get("PID"),(n=l.getConnectedObjects(t,null,{relationTypes:["CapableResourcesStructureLink"]})).length>0&&(r=n[0],!0)}),s={pid:t,label:o.get("PLMEntity.V_Name"),occurences:[{pid:t,label:o.get("PLMEntity.V_Name"),scopedMfgItems:c,resource:r}]}):(e.is(n)?n:a.getInstancesFromCollection(t,{sort:!0})).forEach(function(e){var t,n,i=[];n=(t=a.getReferenceModelFromInstance(e)).get("PID"),l.getConnectedObjects(n,null,{relationTypes:["ProcessImplementLink","CapableResourcesStructureLink"]}).forEach(function(e){var t=a.getReference(e);"PROCESS"===t.get("PPRTYPE")||"SERVICE"===t.get("PPRTYPE")?d.push(e):"RESOURCE"===t.get("PPRTYPE")&&(r=e)}),d.length>0&&(d.forEach(function(e){var t=a.getReference(e);i.push({pid:e,label:t.get("PLMEntity.V_Name")})}),u.push({pid:n,label:t.get("PLMEntity.V_Name"),scopedMfgItems:i,resource:r})),d=[]}),u.length>0&&(s={pid:t,label:o.get("PLMEntity.V_Name"),occurences:u})),e.is(s)&&i.push(s)}),i},y=function(t){var s,a,c,l,d;if(d=function(){var t,n;t=P(),e.is(t)&&(n=t.loadedObjInfos,e.is(n.scopedMfgItemPID)&&C(n.scopedMfgItemPID,n.resourceItemPID))},t.length>0){if(1===t.length&&(c=t[0],e.is(c.occurences)&&1===c.occurences.length&&(l=c.occurences[0],e.is(l.scopedMfgItems)&&1===l.scopedMfgItems.length)))return a=l.scopedMfgItems[0].pid,s=l.resource,d(),void M(l.pid,a,s);(m=new n(i,o,r)).createDialog({data:t,onSelectCallback:function(n,i,o){var r=!1;e.is(n)&&e.is(i)&&e.is(o)&&(d(),t.some(function(e){return e.pid===n&&e.occurences.some(function(e){return e.pid===i&&(s=e.resource,r=!0),r}),r}),M(i,o,s))}})}},L=function(t,n){e.is(t)&&s.publishEvent("DS/DELExternalWidgetCom/"+t,n)},M=function(t,n,i){var s,o=[];s=a.getReferenceModel(t),e.is(s)&&"SYSTEM"===a.getPPRType(s)&&(v(t,n,i),o.push({id:n}),i&&o.push({id:i}),L("LoadData",{items:o}))},C=function(t,n){var i=[],s=a.getReferenceModel(t),o=a.getReferenceModel(n);!e.is(s)||"PROCESS"!==a.getPPRType(s)&&"SERVICE"!==a.getPPRType(s)||(S(),i.push({id:t}),e.is(o)&&"RESOURCE"===a.getPPRType(o)&&i.push({id:n}),L("RemoveRoots",{items:i}))},V=function(){L("RemoveAll"),S()},w=function(e){var t,n=P().loadedObjInfos;(t=e.indexOf(fe))>-1&&(e.splice(0,t),pe=p.getContextItemRIRPaths(),L("ActivateBuildUp",{id:fe,scopedMfg:{id:n.scopedMfgItemPID},path:e,session:{id:ue},context:pe}))},T=function(e){var t;(t=e.indexOf(fe))>-1&&(e.splice(0,t),L("DeactivateBuildUp",{path:e,session:{id:ue}}))},A=function(t){var n,i,s,o,r,a;i=P(),e.is(i)&&e.is(i.loadedObjInfos)&&(s=i.loadedObjInfos,o=s.sysPID,r=s.scopedMfgItemPID,a=s.resourceItemPID,t.path=t.path.map(function(t){let n=0;return e.is(o)&&t.indexOf(o)>-1?n=t.indexOf(o):e.is(r)&&t.indexOf(r)>-1?n=t.indexOf(r):e.is(a)&&t.indexOf(a)>-1&&(n=t.indexOf(a)),t=t.slice(n)})),t.path.length>0&&L(t.event,{path:t.path}),e.is(t.sysOrOperRIRPath)&&(n=p.getBuildUpCmd(),e.is(n)&&n.getState()&&(e.Array.equals(ge,t.sysOrOperRIRPath)||w(t.sysOrOperRIRPath)))},x=function(){V()},F=function(e){var t,n,i;(e=Array.isArray(e)?e:e.impactedChildren).some(function(e){return R(e)})&&(t=h.loadedObjInfos,n=l.getConnectedObjects(t.sysPID,null,{relationTypes:["ProcessImplementLink"]}),i=l.getConnectedObjects(t.sysPID,null,{relationTypes:["CapableResourcesStructureLink"]}),n.indexOf(t.scopedMfgItemPID)>-1&&(i.indexOf(t.resourceItemPID)>-1&&M(t.sysPID,t.scopedMfgItemPID,t.resourceItemPID),M(t.sysPID,t.scopedMfgItemPID)))},U=function(){setTimeout(function(){L("GetAppStatus")},100)},k=function(){var t={},n=[],s=p.getBuildUpCmd();e.is(m)&&m.isActive()&&m.destroyUI(),S(!0),e.is(s)&&s.getState()&&s.setState(!1),e.is(ge)&&ge.length>0&&(t={absPath:a.transformRIRToAbsolutePath(ge),state:!1},n.push(t),i.notify("update3DBuildUpState",[n])),i.notify("widgetUnlinked")},B=function(){var e,t;t=c.getRoots()[0],e=O(t),L("SetAppConfig",I),e.length>0&&y(e),i.notify("widgetLinked")},W=function(){s.isOpsViewerWidgetLinked()?i.warn(r.getNLSValue("Operations3DViewerModule.OpViewerIsAlreadyAvilable")):t.showWidget(de,{})},j=function(e){var t=!1,n=["PROCESS","SYSTEM","OPERATION","SERVICE"];s.isOpsViewerWidgetLinked()&&((e=Array.isArray(e)?e:[e]).forEach(function(e){var i;i=a.getReferenceModelFromInstance(e),n.indexOf(a.getPPRType(i))>-1&&(t=!0)}),t&&L("Highlight",{path:[],clear:!0}))},N=function(t){var n,i,o,r,a=[];s.isOpsViewerWidgetLinked()&&(n=P(),e.is(n)&&(i=n.loadedObjInfos,o=i.sysPID,r=i.scopedMfgItemPID,e.is(o)&&e.is(r)&&(t=Array.isArray(t)?t:[t]).forEach(function(t){"ProcessImplementLink"===t.get("type")?t.get("from")===o&&t.get("to")===r&&V():"ProcessImplementLinkOcc"===t.get("type")&&f.getSelectionsWithPaths()[0].forEach(function(n){e.Array.equals(t.get("from"),n.path)&&(a=b({absPath:t.get("to")})).length>0&&L("UnHighlight",{path:a})})})))},Y=function(t){var n,i;s.isOpsViewerWidgetLinked()&&(i=P(),e.is(i)||(n=O([t]),y(n)))},H=function(t){var n,i;s.isOpsViewerWidgetLinked()&&(n=P(),e.is(n)&&(i=n.loadedObjInfos,t.some(function(e){let t=!1;return e.isSystem()?t=E(e.get("PID")):e.isProcess()&&(t=e.get("PID")===i.scopedMfgItemPID),t})&&C(i.scopedMfgItemPID,i.resourceItemPID)))},_=function(){var t,n,i;s.isOpsViewerWidgetLinked()&&(c.getRoots()[0].some(function(e){return E(e)})?(t=P().loadedObjInfos,n=l.getConnectedObjects(t.sysPID,null,{relationTypes:["ProcessImplementLink"]}),i=l.getConnectedObjects(t.sysPID,null,{relationTypes:["CapableResourcesStructureLink"]}),n.indexOf(t.scopedMfgItemPID)>-1&&(!e.is(t.resourceItemPID)||i.indexOf(t.resourceItemPID)>-1)?M(t.sysPID,t.scopedMfgItemPID,t.resourceItemPID):S()):S())},G=function(){S()},X=function(t){var n,s,o;e.is(t)&&e.is(t.items)&&e.is(t.items.length>0)&&t.items.forEach(function(t){s=function(){(n=a.getReferenceModel(t.id))&&(i.notify("referenceAdded",[n]),i.notify("HideLandingPage"))},o=function(){},n=a.getReferenceModel(t.id),e.is(n)?s():a.getDescendantsFromServer([t.id],s,{onFailure:o,silentMode:!0})})},z=function(t){var n,s,o,r,c,l,d,u,f=!1,g=!0;e.is(t)&&e.is(t.items)&&e.is(t.items.length>0)&&t.items.forEach(function(e){switch(e.pprType){case"MBOM":d=e.id,f=e.ViewerContentLoaded;break;case"RESOURCE":u=e.id,f=e.ViewerContentLoaded;break;case"SYSTEM":l=e.id,f=e.ViewerContentLoaded}}),f&&(n=P(),e.is(n)&&(n=n.loadedObjInfos).scopedMfgItemPID===d&&(e.is(u)&&n.resourceItemPID!==u&&(g=!0),g=!1),g&&(r=function(){s=a.getReferenceModel(l),o=a.getReferenceModel(d),s?i.notify("referenceAdded",[s]):o&&i.notify("referenceAdded",[o]),v(l,d,u),i.notify("HideLandingPage")},c=function(){},s=a.getReferenceModel(l),e.is(l)&&!e.is(s)?a.getDescendantsFromServer([l],r,{onFailure:c,silentMode:!0}):e.is(d)&&!e.is(o)?a.getDescendantsFromServer([d],r,{onFailure:c,silentMode:!0}):r()))},q=function(){S()},le=function(t){var n=[];return Array.isArray(t)&&t.forEach(function(t){var i=t.join(","),s=Ie[i];e.is(s)&&n.push(s)}),n},J=function(t){var n,s,o,r,c,l,d={};if(n=this.isSelected,s=n?"selectNodes":"unSelectNodes",e.is(t.path))if(o=t.path,r=[],c=[],l=[],o.forEach(function(i){var s=!1,o=i.join(","),d=i.filter(function(o,r){var l,d,u,f=!1,g=!1;return d=a.getPPRType(o),e.is(d)||(u=r%2!=0?i[r+1]:o,e.is(t.attributes)&&e.is(t.attributes[u])&&(d=a.getPPRTypeFromType(t.attributes[u].type))),"PROCESS"!==d&&"SERVICE"!==d&&"RESOURCE"!==d||(g=!0,r%2!=0&&(f=!0)),g&&n&&(l=r%2!=0?a.getInstance(o):a.getReferenceModel(o),e.is(l)||(c.push(o),s=!0)),f});s&&l.push(i),0===d.length&&(d=i),n?Ie[o]=d:e.is(Ie[o])&&delete Ie[o],r.push(d)}),l.length>0){let e=function(){let e=le(l);e.length>0&&(i.notify("addOccurrece",[l]),i.notify(s,[e])),i.notify("stopProgress",d)},t=function(){i.debug("Fetching getDescendantsFromServer for missing occurence failed."),i.notify("stopProgress",d)};i.notify("startProgress",d),a.getDescendantsFromServer(c,e,{onFailure:t,silentMode:!0,expandLevel:0,forceDBMode:!0})}else i.notify(s,[r])},K=function(t){var n,i,o,r,a,c=[],l=[];s.isOpsViewerWidgetLinked()&&(n=P(),e.is(n)&&e.is(n.loadedObjInfos)&&(i=n.loadedObjInfos,o=i.sysPID,r=i.scopedMfgItemPID,a=i.resourceItemPID),(t=Array.isArray(t)?t:[t]).forEach(function(t){let n,i=0;e.is(o)&&t.rirPath.indexOf(o)>-1?i=t.rirPath.indexOf(o):e.is(r)&&t.rirPath.indexOf(r)>-1?i=t.rirPath.indexOf(r):e.is(a)&&t.rirPath.indexOf(a)>-1&&(i=t.rirPath.indexOf(a)),n=t.rirPath.slice(i),t.isVisible?l.push(n):c.push(n)}),c.length>0&&L("Hide",{path:c}),l.length>0&&L("Show",{path:l}))},Q=function(t){var n,s=this.isDisplayed,o={},r=[];e.is(t.attributes)&&(t.path.forEach(function(e){n=D(e),o={absPath:n,isVisible:s},r.push(o)}),i.notify("update3DVisibilityState",[r]))},Z=function(t){var n,i,o,r,c,l,d;s.isOpsViewerWidgetLinked()&&((r=t.absPath).length>0?(c=r[0],l=a.getInstance(c),d=a.getReferenceModelFromInstance(l)):d=a.getReference(t.nodeId),"SYSTEM"===a.getPPRType(d)&&(i=[d.get("PID")],e.is(l)&&(o=[l]),n=O(i,o),y(n)))},$=function(e){var t,n,i=[];s.isOpsViewerWidgetLinked()&&(t=P(),n=t.loadedObjInfos,e.forEach(function(e){let t=0;(t=e.indexOf(n.scopedMfgItemPID))>-1&&(e=e.slice(t),i.push(e))}),i.length>0&&L("Reframe",{path:i}))},ee=function(t,n){var s,o;s=P(),e.is(s)&&(o=s.loadedObjInfos,p.initBuildUpSession(t,o,ne).then(function(s){ue=s,fe=t,i.info(r.getNLSValue("Operations3DViewerModule.BuildUpSessionCreationSuccess")),e.is(n)&&n.length>1&&-1!==n.indexOf(fe)&&w(n)},function(){ue=null,fe=null,i.warn(r.getNLSValue("Operations3DViewerModule.BuildUpSessionCreationFailed"))}))},te=function(t){var n,s,o=[],c=f.getSelectionsWithPaths()[0];if(n=P(),e.is(n)&&(s=n.loadedObjInfos),1===c.length&&(o=a.transformToRIROccurrencePath(c[0].path)),t.state){let e=s.sysPID;null===fe?ee(e,o):o.length>0&&-1!==o.indexOf(fe)&&w(o),i.info(r.getNLSValue("Operations3DViewerModule.BuildUpReviewModeIsEnabled"))}else e.is(ge)&&ge.length>0&&(T(ge),i.info(r.getNLSValue("Operations3DViewerModule.BuildUpReviewModeIsDisabled")))},ne=function(){e.is(ge)&&ge.length>0&&(w(ge),i.info(r.getNLSValue("Operations3DViewerModule.BuildUpResultRefresh")))},ie=function(t){var n,o,c;s.isOpsViewerWidgetLinked()&&(n=P(),e.is(n)&&(o=n.loadedObjInfos),c=a.transformToRIROccurrencePath(t),null===fe&&-1!==c.indexOf(o.sysPID)?ee(o.sysPID,c):-1!==c.indexOf(fe)?w(c):i.warn(r.getNLSValue("Operations3DViewerModule.BuildUpActivateFailed")))},se=function(t){var n,i,o;s.isOpsViewerWidgetLinked()&&(n=P(),e.is(n)&&(i=n.loadedObjInfos),-1!==(o=a.transformToRIROccurrencePath(t)).indexOf(i.sysPID)&&T(o))},oe=function(t){var n=P().loadedObjInfos,s=this.isActivated,o=D(t.path),r={},a=[];r={absPath:o,isActivated:s},a.push(r),e.is(ge)&&ge.length>0&&!e.Array.equals(t.path,ge)&&(r={absPath:o=D(ge),isActivated:!s},a.push(r)),i.notify("update3DBuildUpState",[a]),i.notify("set3DVisibilityState",[{isVisible:!0,parentPID:n.scopedMfgItemPID}]),ge=s?t.path:{},ce(s)},re=function(){i.warn(r.getNLSValue("Operations3DViewerModule.BuildUpActivateFailed"))},ae=function(e){e.isActivated?ie(e.absPath):se(e.absPath)},ce=function(t){var n=P().loadedObjInfos,i=!0===t?"Hide":"Show";e.is(n.resourceItemPID)&&(L(i,{path:[n.resourceItemPID]}),t||L("Reframe",{path:[n.resourceItemPID]}))},{listenTo:function(){return{addRootNode:Y,hideRootNode:H,onRecentContentLoaded:_,LoadNewSession:G,refreshAll:x,onRefreshedAll:F,refreshImpacted:F,HideAll:x,instanceRemoved:j,connectionRemoved:N,toggle3DHighlight:A,toggle3DVisibility:K,Show3DViewerCmd:W,LoadItemsIn3DViewer:Z,ReframeItemsIn3DViewer:$,BuildUpReviewModeCmd:te,toggle3DBuildUpColumnButton:ae}},onStart:function(t,n){var o;me=e.extend(me,t),s.isOpsViewerWidgetLinked()?(i.notify("widgetLinked"),setTimeout(function(){L("GetAppStatus")},100)):(o=p.getBuildUpCmd(),e.is(o)&&o.disable()),s.addEventListener("link",U),s.addEventListener("unlink",k),s.subscribeEvent("DS/DELExternalWidgetCom/onGetAppStatus",function(e){!0===e.status?B():s.subscribeEvent("DS/DELExternalWidgetCom/onAppReady",B)}),s.subscribeEvent("DS/DELExternalWidgetCom/onDropData",X),s.subscribeEvent("DS/DELExternalWidgetCom/onLoadDataComplete",z),s.subscribeEvent("DS/DELExternalWidgetCom/onHome",q),s.subscribeEvent("DS/DELExternalWidgetCom/onSelect",J.bind({isSelected:!0})),s.subscribeEvent("DS/DELExternalWidgetCom/onUnSelect",J.bind({isSelected:!1})),s.subscribeEvent("DS/DELExternalWidgetCom/onShow",Q.bind({isDisplayed:!0})),s.subscribeEvent("DS/DELExternalWidgetCom/onHide",Q.bind({isDisplayed:!1})),s.subscribeEvent("DS/DELExternalWidgetCom/onBuildUpActivated",oe.bind({isActivated:!0})),s.subscribeEvent("DS/DELExternalWidgetCom/onBuildUpDeactivated",oe.bind({isActivated:!1})),s.subscribeEvent("DS/DELExternalWidgetCom/onBuildUpActivateFailed",re),n()},onStop:function(){}}}}});