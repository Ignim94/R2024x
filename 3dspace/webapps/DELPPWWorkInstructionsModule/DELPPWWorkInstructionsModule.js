define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanEditUI",["UWA/Core"],function(e){"use strict";return function(t,a,n,o,r,i,l){const u={V_RPPValue:{minAttr:"V_RPPMinControlValue",maxAttr:"V_RPPMaxControlValue"},V_RPPMinControlValue:{minAttr:"V_RPPMinValue",maxAttr:"V_RPPMaxValue"},V_RPPMaxControlValue:{minAttr:"V_RPPMinValue",maxAttr:"V_RPPMaxValue"},V_RPPMinValue:{minAttr:"V_RPPRscMinValue",maxAttr:"V_RPPRscMaxValue"},V_RPPMaxValue:{minAttr:"V_RPPRscMinValue",maxAttr:"V_RPPRscMaxValue"}},s={V_RPPMinControlValue:{attr:"V_RPPMinValue"},V_RPPMaxControlValue:{attr:"V_RPPMaxValue"}},c={V_RPPMinValue:{attr:"V_RPPMaxValue"},V_RPPMaxValue:{attr:"V_RPPMinValue"},V_RPPMinControlValue:{attr:"V_RPPMaxControlValue"},V_RPPMaxControlValue:{attr:"V_RPPMinControlValue"}};var d,g,f,P,m,V,p,h,v,R,C,D,I,b,M,y,A,E,N,w,L,S,_,x=a.getComponent("Button"),T="PLMSpecifyHowToResourcePlanCnx_Custo",U=["V_RPPMinValue","V_RPPMaxValue","V_RPPRscMinValue","V_RPPRscMaxValue","V_RPPMinControlValue","V_RPPMaxControlValue"],O="DELResourcePrmPlanSET",k=T+".RemoveCustoExtn",W=[],F="";return M=function(t,a){var n,o,l,u,s,c,g,f=[],P=a,m=[],h={};n=r.getObjectAndAttributeInfos(t),C&&(P=V.get("V_RPPMagnitude"),l=V.get("V_RPPUnit"),u=r.getNLSForUnit(P,l),s=r.getLabelForUnit(P,l)),n.forEach(function(a,n){var r,i=e.clone(a);switch(C&&(i.objectToBeModified=V),e.is(t[n].displayType)&&(i.displayType=t[n].displayType),i.dataIndex){case"V_RPPMagnitude":C?i.readOnly=!0:i.value=P;break;case"V_PossibleValues":if(C){c=V.get("V_RPPMagnitude"),D=V.get("V_RPPMode"),o="DELExtTargetValues"+c+".V_PossibleValues",("SET"===D?V.get("V_PossibleValues"):V.get(o)).forEach(t=>{h.Name=t.toString(),h.NLS=t.toString(),m.push(e.clone(h))});let t=V.get(o);e.is(t)&&Array.isArray(t)?i.value=t:i.value=null,i.attributeInfo.AuthorizedValues=m}i.attributeInfo.HasRangeDefined="Yes",i.attributeInfo.Protection=2,i.attributeInfo.Type=P,i.attributeInfo.MultiValuated="Yes",i.attributeInfo.MaxLength=0,"SET"===D&&(i.attributeInfo.MultiValuated="No");break;case"V_RPPValue":i.attributeInfo.Magnitude=P,i.attributeInfo.ManipulationUnit=e.is(l)?l:"",i.attributeInfo.Type="Double",i.attributeInfo.MultiValuated="No",i.value=parseFloat(V.get(i.dataIndex));break;case"V_RPPMinValue":case"V_RPPMaxValue":case"V_RPPRscMinValue":case"V_RPPRscMaxValue":case"V_RPPMinControlValue":case"V_RPPMaxControlValue":i.attributeInfo.unit=e.is(u)?u:"",i.attributeInfo.Type="Double",i.attributeInfo.MultiValuated="No",C&&(g="DELExtTargetValues"+P+"."+i.dataIndex,i.value={value:e.is(V.get(g))?V.get(g):V.get(i.dataIndex),inclusive:V.get(i.dataIndex+"_Inclusive")},"string"==typeof(r=i.value.value)&&e.is(r)&&null!==r&&""!==r&&r.includes(s)&&(i.value.value=r.split(" ")[0]));break;case"V_RPPRichText":i.attributeInfo.MultiValuated="No",i.value=V.get(i.dataIndex)}f.push(i)}),p=f.slice();let v=[],R=!1,I=V.get("type"),b=r.getDeploymentExtnInfo(I),M=I===O?"RPPSETAccordionCollapsedList":"RPPGETAccordionCollapsedList",y=r.getWidgetPreferenceValue(M);if(Array.isArray(b)&&b.length>0){R=!0;let e=[];b.forEach(function(t){let a=[];t.Attributes.forEach(function(e){a.push({name:e,dicoType:t.Name})}),e.push({Attribute:r.getObjectAndAttributeInfos(a),name:t.Nls,expandedFlag:-1===y.indexOf(t.Nls)})}),v=v.concat(e),C&&e.forEach(function(e){e.Attribute.forEach(function(e){e.objectToBeModified=V})})}let A=r.getCustoExtnInfo(I);if(Array.isArray(A)&&A.length>0){R=!0;let e=[],t=[];t.push({name:I===O?"SETCustoExten":"GETCustoExten",dicoType:T}),e.push({Attribute:r.getObjectAndAttributeInfos(t),name:"Section.AddCustoExtn"}),e[0].Attribute[0].attributeInfo.onChange=_.bind(null,e[0].Attribute[0].attributeInfo);let a=[];if(C){let t=T+"."+(I===O?"SETCustoExten":"GETCustoExten"),n=V.get(t);if(Array.isArray(n)){let t=e[0].Attribute[0].attributeInfo;n.forEach(function(e){let n=r.getAuthorizedValueIndex(t,null,e);if(n>-1){let e=r.getAuthorizedValueDB(t,n);a.push(e)}})}}A.forEach(function(t){var n=!0;C&&a.indexOf(t.Name)>=0&&(n=!1);let o=[];t.Attributes.forEach(function(e){o.push({name:e,dicoType:t.Name})}),e.push({Attribute:r.getObjectAndAttributeInfos(o),name:t.Nls,hide:n,expandedFlag:-1===y.indexOf(t.Nls)})}),v=v.concat(e),C&&e.forEach(function(e){e.Attribute.forEach(function(e){e.objectToBeModified=V})})}let E=f.findIndex(function(e){return"V_RPPRichText"===e.dataIndex}),N=[];-1!==E&&(N=f.splice(E,1),v.unshift({name:"Section.InstructionText",Attribute:N,expandedFlag:-1===y.indexOf(i.getNLSValue("Section.InstructionText"))})),v.unshift({Attribute:f,headerAccordean:!1}),d={Section:v}},_=function(t,a,n){var o=n.dsModel.value;(function(t){for(var a=[];e.is(t.nextSibling);)a.push(t.nextSibling),t=t.nextSibling;return a})(function(e,t){var a;for(a=1;a<=t;a++)e=e.parentElement;return e}(n.dsModel.elements.container,7)).forEach(function(e){let t=e.querySelector(".wux-controls-expander-header").innerText;o.indexOf(t)>=0?e.show():e.hide()})},b=function(){P=a.createElement("div",{class:"section-container"}),m=a.create("FormUI",{sections:d,renderTo:P,headerAccordean:!0})},N=function(){var a,n,o=A(),u=o.result,s=o.message,c={},d=V.get("V_RPPUnit"),f=e.is(d)?d:"",P=V.get("V_RPPMagnitude"),m=i.getLabelForUnit(P,f);e.is(u)&&u?((a=E()).unit=m,a.V_RPPUnit=f,c.resourceParameterPlanPID=h,c.resourceParameterRowPID=v,c.resourcePID=w,c.resourceParameterListPID=L,c.resourceParameterPID=S,c.rppPath=e.is(l.getSelectionsWithPaths()[0][0])?l.getSelectionsWithPaths()[0][0].path:"",g.close(),n={onComplete:function(e){Array.isArray(W)&&W.forEach(function(t){e.unset(t)}),W=[]}},r.updateResourceParameterRow(c,a,n),e.is(s)&&""!==s&&null!==s&&t.warn(s)):g.buttons.Ok.disabled=!1},I=function(t,n){t=t||{},f=a.createElement("div",{class:"ResourceParameterRow-Dialog"}),(g=a.create("Dialog",{title:t.title,domId:"ResourceParameterRow-Dialog",content:f,resizableFlag:!0,modalFlag:!0,width:560,minWidth:290,height:500,position:{my:"center",at:"center"},buttons:{Cancel:new x({onClick:function(){g.close()}}),Ok:new x({disabled:!1,emphasize:"primary",onClick:n})}})).close=function(){var t,a=document.querySelectorAll(".wux-controls-expander-header"),n=V.get("type"),o=n===O?"RPPSETAccordionCollapsedList":"RPPGETAccordionCollapsedList",l=r.getDeploymentExtn(n),u=r.getCustoExtn(n),s=l.concat(u),c=[];(t=s.map(function(e){return e.Nls})).push(i.getNLSValue("Section.InstructionText")),a.forEach(function(a){var n=a.getText(),o=a.getAttribute("expanded");-1===t.indexOf(n)||e.is(o)||c.push(n)}),r.setWidgetPreferenceValue(o,c),this.destroy(),V=null,p=null,h=null,v=null,e.is(m)&&m.destroy(),e.is(f)&&f.destroy(),g=null}},A=function(){var t,a,n,o=m.validate(),r=function(t,a,n,o){var r=[],l={valid:!0,values:null,message:""};if(0===a.value.length)return l;if(Number.isNaN(Number(a.value)))return l.valid=!1,l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:o}),l;if(e.is(t.inclusive)&&e.is(t.value)){if("NotSet"!==t.inclusive&&String(t.value).length>0){if(r=Number(t.value),Number.isNaN(r))return l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),l.valid=!1,l;r=[r]}}else e.is(t)&&""!==t&&(r=Array.isArray(t)?t:[t]);return r.length>0&&(l.values=[],l.valid=r.every(function(e,t){return(e=String(e).trim()).length>0&&isNaN(e)?(l.values=null,l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),!1):(l.values.push(Number(e)),!0)})),l},l=function(a,n){var o,l=i.getNLSValue(T+"."+a),u=i.getNLSValue(T+"."+n),s=e.clone(t[T+"."+a]),c=e.clone(t[T+"."+n]),d={valid:!0,message:""},g=V.get("V_RPPMode");if(s=e.is(s)?s:"","NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=r(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var f=0;f<d.values.length;f++)if(o=d.values[f],"Included"===c.inclusive&&o>c.value||"Included"!==c.inclusive&&o>=c.value){"GET"===g?(d.valid="V_RPPRscMaxValue"===n,d.message=i.getNLSValue("RPPRow.GetOutofBound.Error")):(d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u}));break}return d},d=function(a,n){var o,l=i.getNLSValue(T+"."+a),u=i.getNLSValue(T+"."+n),s=e.clone(t[T+"."+a]),c=e.clone(t[T+"."+n]),d={valid:!0,message:""};if(s=e.is(s)?s:"","NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=r(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var g=0;g<d.values.length;g++){o=d.values[g];const e=(e,t,a,n)=>"Included"===e?"greater"===n?t>a:t<a:"greater"===n?t>=a:t<=a;if("V_RPPMinValue"===a||"V_RPPMinControlValue"===a){if(e(c.inclusive,o,c.value,"greater")){d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}}else if(e(c.inclusive,o,c.value,"lesser")){d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}}return d},f=function(a,n,o){var u={valid:!0};return(u=function(a,n){var o,l=i.getNLSValue(T+"."+a),u=i.getNLSValue(T+"."+n),s=e.clone(t[T+"."+a]),c=e.clone(t[T+"."+n]),d={valid:!0,message:""},g=V.get("V_RPPMode");if(s=e.is(s)?s:"","NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),d=r(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var f=0;f<d.values.length;f++)if(o=d.values[f],"Included"===c.inclusive&&o<c.value||"Included"!==c.inclusive&&o<=c.value){"GET"===g?(d.valid="V_RPPRscMinValue"===n,d.message=i.getNLSValue("RPPRow.GetOutofBound.Error")):(d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u}));break}return d}(a,n)).valid&&""===u.message?u=l(a,o):u.valid&&""!==u.message&&(""===F&&(F=u.message),(u=l(a,o)).message=F),u};return o.result&&(t=m.getValues(),o.result=p.every(function(r){var l,g,P=r.attributeInfo.Name,m={valid:!0};switch(P){case"V_RPPValue":l=u[P].minAttr,g=u[P].maxAttr,""===t[T+"."+l].value&&""===t[T+"."+(l="V_RPPMinValue")].value&&(l="V_RPPRscMinValue"),""===t[T+"."+g].value&&""===t[T+"."+(g="V_RPPMaxValue")].value&&(g="V_RPPRscMaxValue"),m=f(P,l,g);break;case"V_RPPMinValue":case"V_RPPMaxValue":""===t[T+"."+P].value&&"NotSet"!==t[T+"."+P].inclusive?(m.valid=!1,a=i.getNLSValue(T+"."+P),m.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:a})):(m=d(P,c[P].attr)).valid&&(m=f(P,u[P].minAttr,u[P].maxAttr));break;case"V_RPPMinControlValue":case"V_RPPMaxControlValue":""===t[T+"."+P].value&&"NotSet"!==t[T+"."+P].inclusive?(m.valid=!1,a=i.getNLSValue(T+"."+P),m.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:a})):""===t[T+"."+s[P].attr].value&&"NotSet"!==t[T+"."+P].inclusive?(m.valid=!1,n=i.getNLSValue(T+"."+P),a=i.getNLSValue(T+"."+s[P].attr),m.message=i.getNLSValue("RPPRow.MissingValueForControl.Error",{attr:a,ctrlAttr:n})):(m=d(P,c[P].attr)).valid&&(m=f(P,u[P].minAttr,u[P].maxAttr))}return e.is(m.message)&&""!==m.message&&(o.message=m.message),m.valid})),e.is(o.message)&&""!==o.message&&(o.result||g.errorMsg(o.message)),o},E=function(){var t,a={};t=m.getValues(),p.forEach(function(n){var o,r=n.attributeInfo.Name,i=n.attributeInfo.FullName;e.is(t[i])&&(o=t[i],U.includes(r)?(a[r]=""===o.value?"":String(o.value),a[r+"_Inclusive"]=o.inclusive):"V_PossibleValues"===r?o&&(a[r="SET"===D?"V_RPPValue":r]=Array.isArray(o)?o:o.split(widget.getValue("separator")),a[r]=a[r].map(function(e){return String(e)})):"V_RPPValue"===r&&e.is(o)?e.is(parseFloat(o))?a[r]=parseFloat(o):a[r]=null:a[r]=Array.isArray(o)?o:String(o))});let n=V.get("type"),o=r.getDeploymentExtnAttr(n);Array.isArray(o)&&o.length>0&&o.forEach(function(e){t.hasOwnProperty(e)&&(a[e]=t[e])});let i=T+"."+(n===O?"SETCustoExten":"GETCustoExten");if(t.hasOwnProperty(i)){let e=r.getAttributeInfo(i);a[i]=t[i].map(function(t){return r.getAuthorizedValue(e,null,t)});let o=r.getCustoExtnAttr(n);if(Array.isArray(o)&&o.length>0&&o.forEach(function(e){let n=e.split(".")[0];a[i].indexOf(n)>=0&&t.hasOwnProperty(e)&&(a[e]=t[e])}),C){let t=V.get(i).map(function(t){return r.getAuthorizedValue(e,null,t)}),n=a[i];Array.isArray(t)&&Array.isArray(n)&&(a[k]=[],t.forEach(function(e){-1===n.indexOf(e)&&a[k].push(e)}),W=[],a[k].forEach(function(e){o.forEach(function(t){t.split(".")[0]===e&&W.push(t)})}))}}return a},y=function(t){var a,r,l,u,s,c,d,g;e.is(t)&&(C=!0,V=t,a=o.getNodeModel(V.get("PID"),!0),h=a.options.resourceParameterPID,v=V.get("PID"),w=V.get("resourceID"),L=V.get("V_ParamListPIDOnResource"),S=V.get("V_ParamPIDOnParamList"),l=n.getReferenceModel(h),u="SET"===t.get("V_RPPMode")?"ResourceParametersMgmtDialog.EditDialogSET":"ResourceParametersMgmtDialog.EditDialogGET",s={title:i.getNLSValue(u)},c="DELExtTargetValues"+t.get("V_RPPMagnitude")+".V_PossibleValues",d=e.is(t.get(c))?t.get(c):t.get("V_PossibleValues"),g=e.is(d)?"Arr":"",r=l.get("type")+t.get("V_RPPMode")+g,M(R[r].Attribute),b(),I(s,N),P.inject(f))},{init:function(t){var a=e.is(t)?t:{};e.is(a.editFormConfig)&&(R=a.editFormConfig)},editResourceParameterRow:function(e){y(e)},closeDialog:function(){e.is(g)&&g.close()}}}}),define("DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectImportRowUI",["UWA/Core","text!DS/DELPPWWorkInstructionsModule/assets/json/DataCollectImportRowTLVOptions.json"],function(e,t){"use strict";return function(a,n,o,r,i,l,u,s){var c,d,g,f,P,m,V,p,h,v,R=n.getComponent("Element"),C=n.getComponent("Button"),D=null,I=null,b=null,M=null,y=[],A=new Map,E=null,N=null,w=null;return t=e.Json.decode(t),c=function(){var t;e.is(E)&&E.visibleFlag&&E.close(),t=l.getNLSValue("DataCollectImportRowUI.Panel.Title"),f(t,h),P(),E.show()},d=function(){i.emptyNodeModel(),y=[]},g=function(){E=null,N=null,w=null,E=null,i.removeEventListener(b),i.removeEventListener(M)},f=function(t,a){N=new R("div",{class:"DataCollectImportRowUI-Dialog-Container"}),(E=n.create("Dialog",{domId:"DataCollectImportRowUI-Dialog-Identifier",title:e.is(t)?t:l.getNLSValue("DataCollectImportRowUI.DefaultTitle"),identifier:"DataCollectImportRowUI-Dialog-Identifier",content:N,width:600,minWidth:300,resizableFlag:!0,modalFlag:!0,buttons:{Cancel:new C({onClick:function(){E.close()}}),Ok:new C({disabled:!0,emphasize:"primary",onClick:a})}})).close=function(){E.hide(),d(),g()}},P=function(){var a=t;a=a||{},(w=new R("div",{class:"DataCollectPlanImportRow-TLV-Container",id:"DataCollectImportRowDGView"})).inject(N),a=e.extend(a,{treeDocument:i.getWUXNodeModel(),treeListViewContainer:w},!0),r.createTreeListView(a)},v=function(e){e.characteristics.forEach(e=>{let t=i.addNodeModel({referencePID:e.physicalid,label:e.title,grid:{DCImport_Title:e.title,DCImport_Type:l.getNLSValue("DataCollectImportRowUI.Type."+e.type),V_description:e.description,current:e.current,revision:e.revision}});A.set(t,e)})},m=function(){i.emptyNodeModel(),i.prepareUpdate(),y.forEach(function(e){v(e)}),V(),i.pushUpdate(),b=i.addEventListener("select",p),M=i.addEventListener("unselect",p)},V=function(){var e=i.getTreeDocument(),t=i.getRootNodes();i.prepareUpdate(),t.sort(function(e,t){return e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")}).forEach(function(t,a){e.addRoot(t,a)}),i.pushUpdate()},p=function(){var e=i.getSelectedNodes();E.buttons.Ok.disabled=!(e.length>0)},h=function(){var t,n=[],r=[],s=i.getSelectedNodes();s.forEach(t=>{let a=A.get(t);"DescriptiveCharacteristic"===a.type?n.push(a):"MeasurementCharacteristic"===a.type&&e.is(a.dimension)&&""!==a.dimension["3DSpaceDimensionName"].trim()?n.push(a):r.push(a.title)}),t=o.getAggregatingReferenceModelFromInstance(o.getInstance(I[I.length-1])).get("PID"),E.close(),n.length>0&&n.length>0?(u.generateDataCollectRows(n,D,I,t),r.length>0&&r.forEach(e=>{a.warn(l.getNLSValue("DataCollectImportRowUI.UnableToCreateCharac",{title:e}))})):a.warn(l.getNLSValue("DataCollectImportRowUI.NoRowsToCreate"))},{init:function(t){var n,o,r=[];o=s.findUpperScopeLinks(t.absolutePath),e.is(o)?(D=t.dataCollectPID,I=t.absolutePath,n=o.scopeLinks.map(e=>e.get("to")),c(),n.forEach(e=>{r.push(new Promise((t,n)=>{u.getDataImportCollectRows(e,{onComplete:function(e){y.push(...e),t()},onFailure:function(){a.warn(l.getNLSValue("DataCollectImportRowUI.CouldntFetchRows")),n()}})}))}),Promise.allSettled(r).then(()=>{m()})):a.warn(l.getNLSValue("DataCollectImportRowUI.NoUpperScopeLink"))},isActive:function(){return e.is(E)&&E.visibleFlag},getDataCollectPID:function(){return D}}}}),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanDialogUI",["UWA/Core","DS/DELWebInfrastructureControls/DELWebResourceParameter/DELWebResourceParameterModel","text!DS/DELPPWWorkInstructionsModule/assets/json/ResourceParamRowTLVOptions.json"],function(e,t,a){"use strict";return function(n,o,r,i,l){var u,s,c,d,g,f,P,m,V,p=o.getComponent("Button"),h=o.getComponent("DataGridView"),v=o.getComponent("Element"),R=o.getComponent("WUXFrameWindowsManager"),C=o.getComponent("TreeDocument"),D=o.getComponent("TreeNodeModel"),I="SET",b=!1,M=[],y=new C,A=null,E=null,N=e.Json.decode(a);return s=function(e){var t,a=R.getFrameWindow(n.getAppContext()).getImmersiveFrame();A=new v("div",{class:"ResourceParameterRow-Panel-Container"}),(E=o.create("Dialog",{domId:"ResourceParameterDialogUI-Dialog-Identifier",title:e.title,identifier:"ResourceParameterDialogUI-Dialog-Identifier",immersiveFrame:a,content:A,width:500,height:315,modalFlag:!0,position:{my:"center",at:"center"},resizableFlag:!0,buttons:{Cancel:new p({onClick:function(){V(),E.close()}}),Ok:new p({disabled:!1,emphasize:"primary",onClick:function(){(t=y.getSelectedNodes()).length>0&&d(t),V(),E.close()}})}})).close=function(){E.hide(),V()}},P=function(){var t=[];b=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,t="SET"===I?M.filter(e=>"DELResourcePrmINPUT"===e.plmObjectType):"GET"===I&&b?M.filter(e=>"DELResourcePrmOUTPUT"===e.plmObjectType):M,y.prepareUpdate(),y.empty(),t.forEach(function(e){m(e)}),y.pushUpdate()},V=function(){y.empty(),I="SET",b=!1},g=function(t){var a,n,o,r,l,u,s,c=N.DELResourceParameterRow,d=c.columnConfig.Columns.Column,g=c.toolbarOptions,m=null,V=null,p={semantics:{}},R={};t.forEach(t=>{R=e.extend(R,{[t.get("PID")]:t.get("PLMEntity.V_Name")})}),p.semantics.possibleValues=R,d.forEach((e,t,a)=>{a[t].text=i.getNLSValue(e.dicoType+"."+e.dataIndex)}),(m=new v("div",{class:"ResourceParameterRow-Toolbar-Container"})).inject(A),(V=new v("div",{class:"ResourceParameterRow-TLV-Container",id:"ResourceParameterRowDGView"})).inject(A),a=new h({rowSelection:"multiple",treeDocument:y,cellSelection:"none",enableActiveUI:!0,enableKeyboardNavigation:!0,cellActivationFeedback:"row",selectionBehavior:{unselectAllOnEmptyArea:!0,toggle:!1,selectNodeModelOnCellSelection:!0},columns:d}),g.entries.forEach(e=>{switch(e.id){case"resource":e.dataElements.label=i.getNLSValue("ResourceParameterCreateUI.Resources");break;case"RPPPreference":e.dataElements.label=i.getNLSValue("ResourceParameterCreateUI.Preference")}}),s=a.setToolbar(JSON.stringify(g)),m.appendChild(s.getContent()),a.getContent().inject(V),o=s.getNodeModelByID("set"),r=s.getNodeModelByID("get"),n=s.getNodeModelByID("resource"),l=s.getNodeModelByID("RPPPreference"),o.setLabel(i.getNLSValue("ResourceParameterCreateUI.Set")),r.setLabel(i.getNLSValue("ResourceParameterCreateUI.Get")),n.updateOptions({grid:p}),(u=function(t){var a=e.is(t)?t:Object.keys(R)[0];new Promise((e,t)=>{f(a,e,t)}).then(function(e){var t,n={};for(let o in e){t=e[o];for(let e in t)t[e].resourceListID=o,t[e].resourceID=a;n={...n,...e[o]}}(M=Object.keys(n).map(e=>n[e])).length>0&&P()},function(){M=[],y.empty()})})(),r.onAttributeChange(function(t){!0===t.data.changedAttributeValue?(I="GET",b=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,l.options.grid.data=b,l.updateOptions({disabled:!1}),o.options.grid.data=!1):(l.updateOptions({disabled:!0}),o.options.grid.data=!1),o.updateOptions(),M.length>0&&P()}),o.onAttributeChange(function(t){!0===t.data.changedAttributeValue?(I="SET",b=!!e.is(widget.getPreference("toolBarGETPref"))&&widget.getPreference("toolBarGETPref").defaultValue,l.options.grid.data=b,l.updateOptions({disabled:!0}),r.options.grid.data=!1):(l.updateOptions({disabled:!0}),r.options.grid.data=!1),r.updateOptions(),M.length>0&&P()}),n.onAttributeChange(function(e){u(e.data.changedAttributeValue)}),l.onAttributeChange(function(e){widget.addPreference({name:"toolBarGETPref",type:"hidden",defaultValue:e.data.changedAttributeValue}),P()})},c=function(e){var t={title:i.getNLSValue("ResourceParameters.AddDialog")};s(t),g(e),E.show()},d=function(t){var a=[],n={};n.rppPath=e.is(l.getSelectionsWithPaths()[0][0])?l.getSelectionsWithPaths()[0][0].path:"",t.forEach(e=>{a.push(e._options.grid)}),E.close(),r.createResourceParameterRow(u,a,n)},m=function(t){var a,n=t.parameter_type,o=e.is(t.units)?t.units:"",r=i.getNLSForUnit(n,o),l=t.minLimit,u=t.maxLimit,s=e.is(l)?"Included"===l?"≤":"<":"",c=e.is(u)?"Included"===u?"≤":"<":"";a=new D({label:"PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle",grid:{V_RPPTitle:t.V_Name,V_RPPMode:I,V_RPPMagnitude:e.is(t.parameter_type)?{labelValue:e.is(t.parameter_type)?t.parameter_type:"",label:i.getNLSValue(n),getLabel:function(){return this.label},icon:{iconPath:i.getIconURLFromKey("DCMagnitude."+n),iconSize:{width:"22px",height:"22px"}}}:"",V_RPPValue:e.is(t.V_Values)?Array.isArray(t.V_Values)?null:t.V_Values:null,V_PossibleValues:Array.isArray(t.V_Values)?t.V_Values.map(String):"",V_RPPMinValue:"",V_RPPMaxValue:"",V_RPPMinControlValue:"",V_RPPRscMinValue:e.is(t.minValue)?String(t.minValue):"",V_RPPRscMaxValue:e.is(t.minValue)?String(t.minValue):"",V_RPPMaxControlValue:"",V_MinValue_disp:e.is(t.minValue)?t.minValue+" "+r+" "+s:"",V_MaxValue_disp:e.is(t.maxValue)?c+" "+t.maxValue+" "+r:"",unit:r,V_RPPUnit:o,V_RPPMinValue_Inclusive:"NotSet",V_RPPMaxValue_Inclusive:"NotSet",V_RPPMinControlValue_Inclusive:"NotSet",V_RPPMaxControlValue_Inclusive:"NotSet",V_ParamListPIDOnResource:t.resourceListID,V_ParamPIDOnParamList:t.physicalid,V_RPPRichText:"",resourceID:t.resourceID}}),y.addRoot(a)},f=function(a,o,r){var i={blnForceRefresh:!0,physicalid:a},l=[];t.getResourceParameterLists(i).then(function(t){if(e.is(t))for(let e in t)l.push({physicalid:t[e].resourceParameterList.physicalid})}).finally(()=>{t.getResourceParametersForList({QueryList:l,blnForceRefresh:!0}).then(function(e){o(e)},e=>{n.debug(e),r()})})},{createResourceParameterPlanRow:function(t,a){e.is(t)&&(u=t.id,c(a))},close:function(){e.is(E)&&E.close()}}}}),define("DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectMgmtUI",["UWA/Core","text!DS/DELPPWWorkInstructionsModule/assets/json/DataCollectTLVOptions.json"],function(e,t){"use strict";return function(a,n,o,r,i,l,u){var s,c,d,g,f,P,m,V,p,h,v,R=n.getComponent("Element"),C=n.getComponent("WUXFrameWindowsManager"),D=null,I=null,b=null,M=[],y=null,A=null,E=null,N=null,w=null,L=null,S=!1;return t=e.Json.decode(t),s=function(t,a){var n,o,r=a.WKIModel,i=r.get("PLMEntity.V_Name"),u=r.get("PID"),s=!0;e.is(E)&&E.visibleFlag&&(D===t?(c(),s=!1):E.close()),D=t,I=u,b=a.absolutePath,n="DataCollectMgmtUI."+D+".Panel.Title",o=l.getNLSValue(n,{dcTitle:i}),s?(g(o),f(),E.show()):E.title=o},c=function(){i.emptyNodeModel(),M.forEach(function(e){o.removeReference(e.get("PID"),{silent:!0})}),D=null,I=null,M=[]},d=function(){E=null,N=null,w=null,L=null,i.removeEventListener(y),i.removeEventListener(A)},g=function(t){var o=C.getFrameWindow(a.getAppContext()).getImmersiveFrame();N=new R("div",{class:"DataCollectPlan-Panel-Container"}),(E=n.create("Panel",{domId:"DataCollectMgmtUI-Dialog-Identifier",title:e.is(t)?t:l.getNLSValue("DataCollectMgmtUI.Panel.DefaultTitle"),identifier:"DataCollectMgmtUI-Dialog-Identifier",immersiveFrame:o,content:N,width:600,height:315,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){E.hide(),c(),d()}},f=function(){var a=t[D];a=a||{},(w=new R("div",{class:"DataCollectPlan-Toolbar-Container"})).inject(N),(L=new R("div",{class:"DataCollectPlan-TLV-Container",id:"DataCollectDGView"})).inject(N),"DELRME_AP"!==widget.data.appId&&"DELRMEC_AP"!==widget.data.appId&&(a.dataGridViewOptions.toolbarOptions.items=a.dataGridViewOptions.toolbarOptions.items.filter(e=>"DCPShowPerfC"!==e.id)),a=e.extend(a,{treeDocument:i.getWUXNodeModel(),treeListViewContainer:L,toolbarContainer:w,dataGridViewOptions:{toolbarOptions:{actionHandler:V}}},!0),r.createTreeListView(a)},v=function(e){var t=u.getNodeOptions(e);t.dataCollectPID=I,i.addNodeModel(t)},P=function(){i.emptyNodeModel(),i.prepareUpdate(),M.forEach(function(e){v(e)}),m(),i.pushUpdate(),y=i.addEventListener("select",p),A=i.addEventListener("unselect",p)},m=function(){var e=i.getTreeDocument(),t=i.getRootNodes();i.prepareUpdate(),t.sort(function(e,t){return e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")}).forEach(function(t,a){e.addRoot(t,a)}),i.pushUpdate()},V=function(e){var t;switch(e){case"DCPShowPerfC":a.notify("showPerformanceCharacteristics",{absolutePath:b,dataCollectPID:I});break;case"DCPAddRow":a.notify("createDataCollectRow",I);break;case"DCPEditRow":t=i.getSelectedNodes()[0].getReferencePID(),a.notify("editDataCollectRow",o.getReferenceModel(t));break;case"DCPDeleteRow":h()}},p=function(){var e=i.getSelectedNodes(),t=["DCPAddRow","DCPShowPerfC"];1===e.length?t=t.concat(["DCPEditRow","DCPDeleteRow"]):e.length>1&&t.push("DCPDeleteRow"),r.enableToolBarItems(t)},h=function(){var t=i.getSelectedNodes();e.is(t)&&t.forEach(function(t){u.deleteDataCollectRow(I,t.getReferencePID(),{onComplete:function(n){e.is(n)&&n===t.getReferencePID()?(i.removeNode(t),a.info(l.getNLSValue("DataCollectMgmtUI.DCRowDelete.Success"))):a.warn(l.getNLSValue("DataCollectMgmtUI.DCRowDelete.Failure"))},onFailure:function(){a.warn(l.getNLSValue("DataCollectMgmtUI.DCRowDelete.Failure"))}})})},{init:function(n){var o,r=n.WKIModel,i=r.get("type"),c=r.get("PID");e.is(i)&&e.is(i)?(u.isDataCollectCheckList(i)?o="DELWkiDataCollectChecklistReference":u.isDataCollectPlan(i)&&(o="DELWkiDataCollectPlanReference"),e.is(o)?u.fetchDataCollectAttrInfos(function(){if(!S){S=!0;let e=u.getDeploymentExtnInfo("PLMSpecifyHowToCollectDataCnx"),a=u.getCustoExtnInfo("PLMSpecifyHowToCollectDataCnx"),n=[];n=Array.isArray(e)?n.concat(e):n,n=Array.isArray(a)?n.concat(a):n,Object.keys(t).forEach(function(e){n.forEach(function(a){a.Attributes.forEach(function(n){t[e].columnConfig.Columns.Column.push({dataIndex:n,dicoType:a.Name,displayType:"DynamicAttr_NonEditable",isFilterable:!1,isGroupable:!1,minWidth:"100"})})})})}s(o,n),u.getDataCollectRows(c,{onComplete:function(e){M=e,P()},onFailure:function(){a.warn(l.getNLSValue("DataCollectMgmtUI.CouldntFetchRows"))}})}):a.warn(l.getNLSValue("DataCollectMgmtUI.NotDataCollectType"))):a.warn(l.getNLSValue("DataCollectMgmtUI.InvalidModel"))},isActive:function(){return e.is(E)&&E.visibleFlag},addDataCollectRow:function(e){v(e)},deleteDataCollectRow:function(){h()},onUpdateDataCollectRow:function(e){var t,a=e.get("type"),n=e.get("PID");"PLMSpecifyHowToCollectDataCnx"===a&&e.hasChanged()&&(t=u.getNodeOptions(e),i.updateNodeOptions(n,t),e.hasChanged("V_TreeOrder")&&m())},onUpdateDataCollect:function(e){var t,a;e.get("PID")===I&&e.hasChanged("PLMEntity.V_Name")&&(t="DataCollectMgmtUI."+D+".Panel.Title",a=l.getNLSValue(t,{dcTitle:e.get("PLMEntity.V_Name")}),E.title=a)},getDataCollectPID:function(){return I},destroy:function(t){e.is(E)&&E.close()}}}}),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanMgmtUI",["UWA/Core","DS/DELWebInfrastructureControls/DELWebResourceParameter/DELWebResourceParameterModel","text!DS/DELPPWWorkInstructionsModule/assets/json/ResourceParamPlanTLVOptions.json"],function(e,t,a){"use strict";return function(n,o,r,i,l,u,s,c,d){var g,f,P,m,V,p,h,v,R,C,D,I,b,M=o.getComponent("Element"),y=o.getComponent("WUXFrameWindowsManager"),A=["DELResourcePrmPlanSET","DELResourcePrmPlanGET"],E=null,N=null,w=[],L=null,S=null,_=null,x=null,T=null,U=null,O=!1,k=e.Json.decode(a);return g=function(t,a){var n,o,r=a.get("PLMEntity.V_Name"),i=a.get("PID"),s=!0;e.is(_)&&_.visibleFlag&&(E===t?(f(),s=!1):_.close()),N=i,n="ResourceParamaterPlanMgmtUI."+(E=t)+".Panel.Title",o=u.getNLSValue(n),s?(m(o),V(r),_.show()):_.title=o,L=l.addEventListener("select",R),S=l.addEventListener("unselect",R)},f=function(){l.emptyNodeModel(),r.getReferenceModel(N).state=!1,E=null,N=null,w=[]},P=function(){_=null,x=null,T=null,U=null,l.removeEventListener(L),l.removeEventListener(S)},m=function(t){var a=y.getFrameWindow(n.getAppContext()).getImmersiveFrame();x=new M("div",{class:"ResourceParameterPlan-Panel-Container"}),(_=o.create("Dialog",{domId:"ResourceParameterMgmtUI-Dialog-Identifier",title:e.is(t)?t:u.getNLSValue("ResourceParametersMgmtUI.Panel.DefaultTitle"),identifier:"ResourceParameterMgmtUI-Dialog-Identifier",immersiveFrame:a,content:x,width:500,height:315,modalFlag:!0,position:{my:"center",at:"center"},resizableFlag:!0,closeButtonFlag:!0,useBordersFlag:!0,visibleFlag:!1,collapsibleFlag:!0,verticallyStretchableFlag:!0})).close=function(){_.hide(),f(),P(),n.notify("editResourceParameterPlan",{state:!1})}},V=function(t){var a=k[E];a.dataGridViewOptions.toolbarOptions.items[0].value=t,a=a||{},(T=new M("div",{class:"ResourceParameterPlan-Toolbar-Container"})).inject(x),(U=new M("div",{class:"ResourceParameterPlan-TLV-Container",id:"ResourceParameterDGView"})).inject(x),a=e.extend(a,{treeDocument:l.getWUXNodeModel(),treeListViewContainer:U,toolbarContainer:T,dataGridViewOptions:{toolbarOptions:{actionHandler:v}}},!0),i.createTreeListView(a),C=i.getToolBarOption(),(D=C.getNodeModelByID("RPPTitle")).onAttributeChange(function(t){var a,n;a=t.data.changedAttributeValue,(n=s.getObjectAndAttributeInfos({name:"PLMEntity.V_Name"})[0]).objectToBeModified=r.getReferenceModel(N),n.instOrRef=e.is(n.objectToBeModified)?"reference":"instance",r.updateModelAttribute(N,n,a)})},b=function(e){var t;(t=s.getNodeOptions(e)).resourceParameterPID=N,l.addNodeModel(t)},p=function(){l.emptyNodeModel(),l.prepareUpdate(),w.forEach(function(e){b(e.toJSON())}),h(),l.pushUpdate()},h=function(){var e=l.getTreeDocument(),t=l.getRootNodes();l.prepareUpdate(),t.sort(function(e,t){return e.getAttributeValue("V_TreeOrder")-t.getAttributeValue("V_TreeOrder")}).forEach(function(t,a){e.addRoot(t,a)}),l.pushUpdate()},v=function(e){var t;switch(e){case"RPPAddRow":n.notify("createResourceParameterRow",r.getReferenceModel(N));break;case"RPPEditRow":t=l.getSelectedNodes()[0].getReferencePID(),n.notify("editResourceParameteRow",r.getReferenceModel(t));break;case"RPPDeleteRow":I()}},R=function(){var e=l.getSelectedNodes(),t=[];0===e.length?t=["RPPAddRow","RPPTitle"]:1===e.length?(t=["RPPEditRow","RPPDeleteRow","RPPTitle"],""!==e[0].getAttributeValue("PLMSpecifyHowToResourcePlanCnx_Custo.V_RPPTitle").iconPath&&(t=["RPPDeleteRow","RPPTitle"])):e.length>1&&(t=["RPPDeleteRow","RPPTitle"]),i.enableToolBarItems(t)},I=function(){var t=l.getSelectedNodes();e.is(t)&&t.forEach(function(t){s.deleteResourceParameterRows(N,t.getReferencePID(),{onComplete:function(a){e.is(a)&&a===t.getReferencePID()?(l.removeNode(t),n.info(u.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Success"))):n.warn(u.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Failure"))},onFailure:function(){n.warn(u.getNLSValue("ResourceParametertMgmtUI.RPRowDelete.Failure"))}})})},{init:function(a){var o=a.get("type"),i=a.get("PID");e.is(o)?s.fetchRPPAttrInfos(function(){var l,f,P,m,V,h=[],v=["CapableResourcesStructureLink","DELAsmProcessCanUseCnx","SecondaryCandidateResourceLink"],R={resourceRefs:[],resourceParameterListIds:[],resourceParameterListObj:{}},C=[];if(!O){O=!0;let e=[],t={};A.forEach(function(t){let a=s.getDeploymentExtnInfo(t),n=s.getCustoExtnInfo(t);e=Array.isArray(a)?e.concat(a):e,e=Array.isArray(n)?e.concat(n):e}),e.forEach(function(e){t[e.Name]=e}),e=[],Object.keys(t).forEach(function(a){e.push(t[a])}),Object.keys(k).forEach(function(t){e.forEach(function(e){e.Attributes.forEach(function(a){k[t].columnConfig.Columns.Column.push({dataIndex:a,dicoType:e.Name,displayType:"DynamicAttr_NonEditable",isFilterable:!1,isGroupable:!1,minWidth:"100"})})})})}if(g(o,a),(l=c.getSelectionsWithPaths()[0][0].path).length>1)for(let e=l.length-1;e>=0;e--)f=r.getInstance(l[e]),h.push(f.get("isInstanceOf")),0===e&&(m=r.getReferenceModel(f.get("isAggregatedBy")),h.push(m.id));else 1===l.length&&(P=r.getInstance(l[0]),m=r.getReferenceModel(P.get("isAggregatedBy")),h.push(m.id));h.forEach(e=>{d.getConnectedObjects(e,l,{relationTypes:v}).forEach(e=>{R.resourceRefs.push(e)})}),R.rppPath=e.is(c.getSelectionsWithPaths()[0][0])?c.getSelectionsWithPaths()[0][0].path:"",R.resourceRefs.forEach(a=>{V=new Promise((n,o)=>{var r=a;t.getResourceParameterLists({blnForceRefresh:!0,physicalid:r}).then(function(t){e.is(t)&&(R.resourceParameterListIds=R.resourceParameterListIds.concat(Object.keys(t)),R.resourceParameterListObj[r]=Object.keys(t)),n()})}),C.push(V)}),Promise.all(C).then(function(){s.getResourceParameterRows(i,R,{onComplete:function(e){w=e,p()},onFailure:function(){n.warn(u.getNLSValue("ResourceParametersMgmtUI.CouldntFetchRows"))}})},function(){R.resourceParameterListIds=[]})}):n.warn(u.getNLSValue("ResourceParametersMgmtUI.NotResourceParameterType"))},isActive:function(){return e.is(_)&&_.visibleFlag},addResourceParameterRow:function(e){b(e)},deleteResourceParameterRow:function(){I()},onUpdateResourceParameterRow:function(e){var t,a=e.get("PID");e.hasChanged()&&(t=s.getNodeOptions(e.toJSON(),e),l.updateNodeOptions(a,t),e.hasChanged("V_TreeOrder")&&h())},onUpdateResourceParameter:function(e){var t,a,n={};e.get("PID")===N&&e.hasChanged("PLMEntity.V_Name")&&(t="ResourceParamaterPlanMgmtUI."+E+".Panel.Title",a=u.getNLSValue(t,{rppTitle:e.get("PLMEntity.V_Name")}),_.title=a,n.data=e.get("PLMEntity.V_Name"),D.updateOptions({grid:n}))},getResourceParameterPID:function(){return N},destroy:function(){e.is(_)&&_.close()}}}}),define("DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectDialogUI",["UWA/Core"],function(e,t){"use strict";return function(t,a,n,o,r,i){var l,u,s,c,d,g,f,P,m,V,p,h,v,R,C,D,I,b,M,y,A,E,N,w,L,S,_=a.getComponent("Button"),x="PLMSpecifyHowToCollectDataCnx_Custo",T="PLMSpecifyHowToCollectDataCnx",U=["V_MinValue","V_MinControlValue","V_MaxValue","V_MaxControlValue"],O="PLMSpecifyHowToCollectDataCnx_Custo.CustoExtn",k="PLMSpecifyHowToCollectDataCnx_Custo.RemoveCustoExtn",W=[];return v=function(a){var n=e.clone(a.Units),o=t.getPreferenceValue(a.Name);if(e.is(o))for(let e=0;e<n.length;e++)if(n[e].Name===o){let t=n[0];n[0]=n[e],n[e]=t;break}return n},D=function(t,a){var n,o,l,u,s=[],c=[],m=r.getAttributeInfo(x+".V_DCType"),V=r.getAuthorizedValue(m,a),p=function(t,a){var o,r="";return"Real"===V?o=t+n.Name:e.is(V)&&(o=t+V),e.is(o)&&h&&(r=d.get(o+"."+a)),r};l=r.getObjectAndAttributeInfos(t),h&&(m=r.getAttributeInfo(x+".V_DCType"),V=r.getAuthorizedValue(m,d.get("V_DCType"))),l.forEach(function(a,i){var l,f,P,R=e.clone(a),C=!0;switch(h&&(R.objectToBeModified=d),e.is(t[i].displayType)&&(R.displayType=t[i].displayType),R.dataIndex){case"V_DCType":if(h)R.readOnly=!0;else{const e=(m=r.getAttributeInfo(x+".V_DCType")).AuthorizedValues.findIndex(e=>e.Name===V);u=r.getAuthorizedValueNLS(m,e),R.value=u}R.attributeInfo.onChange=M.bind(null,R.attributeInfo);break;case"V_DCMagnitude":R.attributeInfo.AuthorizedValues=r.getDimensions(),R.attributeInfo.HasRangeDefined="Yes",f=R.attributeInfo.AuthorizedValues,P=h?d.get("V_DCMagnitude"):"LENGTH","Real"===V?(n=f.find(function(e){return e.Name===P}),e.is(n)&&(s=v(n),o=h?s.find(function(e){return e.Name===d.get("V_DCUnit")}):s[0])):o="",n&&(R.value=n.NLS),h&&(R.readOnly=!0),R.attributeInfo.onChange=y;break;case"V_PossibleValues":h&&(R.value=d.get("DELExtTargetValues"+V+"."+R.dataIndex)),"Boolean"===V?(R.attributeInfo.HasRangeDefined="Yes",h&&(R.value=d.get("DELExtTargetValuesText."+R.dataIndex),R.value=Array.isArray(R.value)?R.value.join(","):R.value)):R.value=e.is(R.value)&&"NULL"!==R.value?R.value:[];break;case"V_DCUnit":e.is(o)&&(R.value=o.NLSName,g=o.Name),R.attributeInfo.onChange=I,R.attributeInfo.AuthorizedValues=s.map(function(t){var a=e.clone(t);return a.NLS=a.NLSName,a});break;case"V_Value":"Real"===V&&e.is(o)&&(R.attributeInfo.Magnitude=n.Name,R.attributeInfo.ManipulationUnit=o.Name,R.attributeInfo.pattern="^[-+]?([1-9][0-9]*)|(0)$"),R.value=p("DELExtTargetValues",R.dataIndex);break;case"V_MinValue":case"V_MaxValue":R.attributeInfo.unit=e.is(o)?o.NLSName:"",R.attributeInfo.Type="Real"===V?"Double":"Integer",h&&(R.value={value:p("DELExtTargetValues",R.dataIndex),inclusive:d.get(R.dataIndex+"_Inclusive")});break;case"V_MinControlValue":case"V_MaxControlValue":R.attributeInfo.unit=e.is(o)?o.NLSName:"",R.attributeInfo.Type="Real"===V?"Double":"Integer",h&&(R.value={value:p("DELExtControlLimits",R.dataIndex),inclusive:d.get(R.dataIndex+"_Inclusive")});break;case"V_DCFormula":h?"Computed"===d.get("PLMSpecifyHowToCollectDataCnx.V_DCMode")&&(l=r.getNodeOptions(R.objectToBeModified),R.value=l.grid[R.dataIndex]):C=!1}C&&c.push(R)}),f=c.slice();let R=[],C=!1,D=r.getDeploymentExtnInfo(T),b=r.getWidgetPreferenceValue("DataCollectPlanAccordionCollapsedList");if(Array.isArray(D)&&D.length>0){C=!0;let e=[];D.forEach(function(t){let a=[];t.Attributes.forEach(function(e){a.push({name:e,dicoType:t.Name})}),e.push({Attribute:r.getObjectAndAttributeInfos(a),name:t.Nls,expandedFlag:-1===b.indexOf(t.Nls)})}),R=R.concat(e),h&&e.forEach(function(e){e.Attribute.forEach(function(e){e.objectToBeModified=d})})}let E=r.getCustoExtnInfo(T);if(Array.isArray(E)&&E.length>0){C=!0;let e=[],t=[];t.push({name:"CustoExtn",dicoType:x}),e.push({Attribute:r.getObjectAndAttributeInfos(t),name:"Section.AddCustoExtn"}),e[0].Attribute[0].attributeInfo.onChange=A.bind(null,e[0].Attribute[0].attributeInfo);let a=[];if(h){let t=d.get(O);if(Array.isArray(t)){let n=e[0].Attribute[0].attributeInfo;t.forEach(function(e){let t=r.getAuthorizedValueIndex(n,null,e);if(t>-1){let e=r.getAuthorizedValueDB(n,t);a.push(e)}})}}E.forEach(function(t){var n=!0;h&&a.indexOf(t.Name)>=0&&(n=!1);let o=[];t.Attributes.forEach(function(e){o.push({name:e,dicoType:t.Name})}),e.push({Attribute:r.getObjectAndAttributeInfos(o),name:t.Nls,hide:n,expandedFlag:-1===b.indexOf(t.Nls)})}),R=R.concat(e),h&&e.forEach(function(e){e.Attribute.forEach(function(e){e.objectToBeModified=d})})}let N=c.findIndex(function(e){return"V_DCRichText"===e.dataIndex}),w=[];-1!==N&&(w=c.splice(N,1),R.unshift({name:"Section.InstructionText",Attribute:w,expandedFlag:-1===b.indexOf(i.getNLSValue("Section.InstructionText"))})),R.unshift({Attribute:c,headerAccordean:!1}),P={Section:R}},I=function(t,a){var n,o,i,l,u,s,c=[],d={};f.forEach(function(a){var r,s=a.dataIndex,d=a.attributeInfo.FullName;i=t[d],"V_DCMagnitude"===s&&(l=a.attributeInfo.AuthorizedValues[i.selectedIndex].Name,u=a.attributeInfo.AuthorizedValues[i.selectedIndex].Units),"V_DCUnit"===s&&(n=g,g=a.attributeInfo.AuthorizedValues[i.selectedIndex].Name,o=a.attributeInfo.AuthorizedValues[i.selectedIndex].label),"V_MinValue"!==s&&"V_MaxValue"!==s&&"V_MinControlValue"!==s&&"V_MaxControlValue"!==s&&"V_Value"!==s||(r="inclusiveLineEditor"===i.fieldType?i.getInputValue():i.getValue(),e.is(r)&&""!==r&&c.push({fullName:d,value:r}),i.setUnit(o))}),s=-1,Array.isArray(u)&&e.is(n)&&(s=u.findIndex(function(e){return e.Name===n})),s>-1&&g!==n&&c.length>0&&(d={dimension:l,fromUnit:n,toUnit:g,valuesToConvert:c.map(function(e){return e.value})},r.convertValuesBetweenUnits(d).then(function(a){var n=a.ConvertValue.split(";");c.forEach(function(a,o){var r=t[a.fullName],i=n[o];e.is(r.setValue)?r.setValue(i):r.value=i})}))},y=function(t,a){var n,o,r,i,l,u,s=t["PLMSpecifyHowToCollectDataCnx_Custo.V_DCMagnitude"];for(o=0;o<f.length;o++)if("V_DCUnit"===(n=f[o]).dataIndex?(r=e.clone(n),u=o):"V_DCMagnitude"===n.dataIndex&&(i=n.attributeInfo.AuthorizedValues[s.selectedIndex],l=v(i)),e.is(r)&&e.is(l)){r.attributeInfo.AuthorizedValues=l.map(function(t){var a=e.clone(t);return a.NLS=a.NLSName,a}),c.updateAuthorizedList(r.attributeInfo,"PLMSpecifyHowToCollectDataCnx_Custo.V_DCUnit"),f[u]=r;break}I(t,a)},C=function(){s=a.createElement("div",{class:"section-container"}),c=a.create("FormUI",{sections:P,renderTo:s,headerAccordean:!0})},w=function(){var e,t,a,n;E()?(t=N(),e=m,a=V,l.close(),n={onComplete:function(e){Array.isArray(W)&&W.forEach(function(t){e.unset(t)}),W=[]}},r.updateDataCollectRow(e,a,t,n)):l.buttons.Ok.disabled=!1},R=function(t,n){t=t||{},u=a.createElement("div",{class:"DataCollectRow-Dialog"}),(l=a.create("Dialog",{title:t.title,domId:"DataCollectRow-Dialog",content:u,resizableFlag:!0,modalFlag:!0,width:560,minWidth:290,height:500,buttons:{Cancel:new _({onClick:function(){l.close()}}),Ok:new _({disabled:!1,emphasize:"primary",onClick:n})}})).close=function(){var t=document.querySelectorAll(".wux-controls-expander-header"),a=r.getDeploymentExtn(T),n=r.getCustoExtn(T),o=a.concat(n),s=[],P=[];(s=o.map(function(e){return e.Nls})).push(i.getNLSValue("Section.InstructionText")),t.forEach(function(t){var a=t.getText(),n=t.getAttribute("expanded");-1===s.indexOf(a)||e.is(n)||P.push(a)}),r.setWidgetPreferenceValue("DataCollectPlanAccordionCollapsedList",P),this.destroy(),g=null,d=null,f=null,m=null,V=null,e.is(c)&&c.destroy(),e.is(u)&&u.destroy(),l=null}},E=function(){var t,a,n=c.validate(),o=function(t,a,n,o){var r=[],l={valid:!0,values:null,message:""};if(0===a.value.length)return l;if(Number.isNaN(Number(a.value)))return l.valid=!1,l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:o}),l;if(e.is(t.inclusive)&&"NotSet"!==t.inclusive&&String(t.value).length>0){if(r=Number(t.value),Number.isNaN(r))return l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),l.valid=!1,l;r=[r]}else!e.is(t,"object")&&t.length>0&&(r=Array.isArray(t)?t:[t]);return r.length>0&&(l.values=[],l.valid=r.every(function(e){return(e=String(e).trim()).length>0&&isNaN(e)?(l.values=null,l.message=i.getNLSValue("DCRow.InvalidValue.Error",{attr:n}),!1):(l.values.push(Number(e)),!0)})),l},r=function(a,n){var r,l=i.getNLSValue(x+"."+a),u=i.getNLSValue(x+"."+n),s=e.clone(t[x+"."+a]),c=e.clone(t[x+"."+n]),d={valid:!0};if("NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),s=e.is(s,"number")?String(s):s,d=o(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var g=0;g<d.values.length;g++)if(r=d.values[g],"Included"===c.inclusive&&r<c.value||"Included"!==c.inclusive&&r<=c.value){d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}return d},u=function(a,n){var r,l=i.getNLSValue(x+"."+a),u=i.getNLSValue(x+"."+n),s=e.clone(t[x+"."+a]),c=e.clone(t[x+"."+n]),d={valid:!0};if("NotSet"!==c.inclusive&&e.is(c.value)&&(c.value=String(c.value).trim(),s=e.is(s,"number")?String(s):s,d=o(s,c,l,u),c.value=Number(c.value),d.valid&&Array.isArray(d.values)))for(var g=0;g<d.values.length;g++)if(r=d.values[g],"Included"===c.inclusive&&r>c.value||"Included"!==c.inclusive&&r>=c.value){d.valid=!1,d.message=i.getNLSValue("DCRow.OutOfBound.Error",{toCompare:l,camparingWith:u});break}return d},s=function(e){var t={valid:!0};return(t=r(e,"V_MinControlValue")).valid&&(t=r(e,"V_MinValue")),t.valid&&(t=u(e,"V_MaxControlValue")),t.valid&&(t=u(e,"V_MaxValue")),t};return n.result&&(t=c.getValues(),a=t[x+".V_DCType"],n.result=f.every(function(o){var l=o.attributeInfo.Name,c={valid:!0};switch(l){case"V_MinValue":c=u(l,"V_MaxValue");break;case"V_MaxValue":c=r(l,"V_MinValue");break;case"V_MinControlValue":(c=u(l,"V_MaxControlValue")).valid&&(c=r(l,"V_MinValue"));break;case"V_Value":c=s(l);break;case"V_PossibleValues":"Integer"===a&&(c=s(l)).valid&&(c=function(a){var n=i.getNLSValue(x+"."+a),o=e.clone(t[x+"."+a]),r={valid:!0};for(let e=0;e<o.length;e++){let t=o[e],a=Number(t);if(!Number.isInteger(a)){r.valid=!1,r.message=i.getNLSValue("DCRow.InvalidValue.Integer",{attr:n});break}}return r}(l));break;case"V_MaxControlValue":(c=r(l,"V_MinControlValue")).valid&&(c=u(l,"V_MaxValue"))}return c.valid||(n.message=c.message),c.valid})),!n.result&&n.message&&l.errorMsg(n.message),n.result},N=function(){var t,a={};t=c.getValues(),f.forEach(function(n){var o,r,i,l=n.attributeInfo.Name,u=n.attributeInfo.FullName;e.is(t[u])&&(r=t[u],U.includes(l)?(""!==r.value&&(a[l]=String(r.value)),a[l+"_Inclusive"]=r.inclusive):"V_DCUnit"!==l&&"V_DCMagnitude"!==l||!e.is(r)?"V_PossibleValues"===l?r?(a[l]=Array.isArray(r)?r:r.split(","),a[l]=a[l].map(function(e){return String(e)})):a[l]=[]:a[l]="V_Value"===l&&r?String(r):Array.isArray(r)?r:String(r):(i=f.find(function(e){return e.dataIndex===l}))&&(o=i.attributeInfo.AuthorizedValues.find(function(e){return e.NLSName===r||e.NLS===r}),e.is(o)&&(a[l]=o.Name)))});let n=r.getDeploymentExtnAttr(T);if(Array.isArray(n)&&n.length>0&&n.forEach(function(e){t.hasOwnProperty(e)&&(a[e]=t[e])}),t.hasOwnProperty(O)){let e=r.getAttributeInfo(O);a[O]=t[O].map(function(t){return r.getAuthorizedValue(e,t)});let n=r.getCustoExtnAttr(T);if(Array.isArray(n)&&n.length>0&&n.forEach(function(e){let n=e.split(".")[0];a[O].indexOf(n)>=0&&t.hasOwnProperty(e)&&(a[e]=t[e])}),h){let t=d.get(O).map(function(t){return r.getAuthorizedValue(e,t)}),o=a[O];Array.isArray(t)&&Array.isArray(o)&&(a[k]=[],t.forEach(function(e){-1===o.indexOf(e)&&a[k].push(e)}),W=[],a[k].forEach(function(e){n.forEach(function(t){t.split(".")[0]===e&&W.push(t)})}))}}return a},b=function(t){var a,l={};e.is(t)&&(h=!0,d=t,a=o.getNodeModel(d.get("PID"),!0),m=a.options.dataCollectPID,V=d.get("PID"),l.onComplete=function(){var e,a,o,l=n.getReferenceModel(m),c={title:i.getNLSValue("DataCollectMgmtDialog.EditDialog")};o=r.getAttributeInfo(x+".V_DCType"),a=r.getAuthorizedValue(o,t.get("V_DCType")),e=l.get("type")+a,D(p[e].Attribute),C(),R(c,w),s.inject(u)},r.fetchDataCollectRow(m,V,l))},L=function(t){var a,o,l={title:i.getNLSValue("DataCollectMgmtDialog.AddDialog")};o=n.getReferenceModel(m),r.isDataCollectPlan(o)?a="DELWkiDataCollectPlanReferenceReal":r.isDataCollectCheckList(o)&&(a="DELWkiDataCollectChecklistReferenceBoolean"),e.is(a)&&(D(p[a].Attribute,t),C(),R(l,S),s.inject(u))},M=function(t,a,n){var o,i=n.dsModel.value,l="DELWkiDataCollectPlanReference";e.is(s)&&(s.remove(),s=null),e.is(t)&&(o=r.getAuthorizedValueIndex(t,null,i))>-1&&(i=r.getAuthorizedValueDB(t,o)),D(p[l+=i].Attribute,i),C(),s.inject(u)},A=function(t,a,n){var o=n.dsModel.value;(function(t){for(var a=[];e.is(t.nextSibling);)a.push(t.nextSibling),t=t.nextSibling;return a})(function(e,t){var a;for(a=1;a<=t;a++)e=e.parentElement;return e}(n.dsModel.elements.container,7)).forEach(function(e){let t=e.querySelector(".wux-controls-expander-header").innerText;o.indexOf(t)>=0?e.show():e.hide()})},S=function(){var e,t;E()?(t=N(),e=m,l.close(),r.createDataCollectRow(e,t)):l.buttons.Ok.disabled=!1},{init:function(t){var a=e.is(t)?t:{};e.is(a.editFormConfig)&&(p=a.editFormConfig)},editDataCollectRow:function(e){b(e)},createDataCollectRow:function(t,a){e.is(t)&&(h=!1,m=t,L(a))},closeDialog:function(){e.is(l)&&l.close()}}}}),define("DS/DELPPWWorkInstructionsModule/ResourceParameterPlanModule",["UWA/Core","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanDialogUI","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanMgmtUI","DS/DELPPWWorkInstructionsModule/ResourceParameterPlan/ResourceParameterPlanEditUI"],function(e,t,a,n){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","TreeListViewBehavior","WUXNodeModelBehavior","ResourceBehavior","ResourceParameterPlanBehavior","LinkBehavior","SelectionBehavior","CapableResourceLinkBehaviour"],creator:function(o,r,i,l,u,s,c,d,g,f){var P,m,V,p,h,v,R,C,D,I,b,M=[],y=["CapableResourcesStructureLink","DELAsmProcessCanUseCnx","SecondaryCandidateResourceLink"];return I=function(t){(t=e.is(t,"array")?t:[t]).forEach(function(e){P.isActive()&&(c.isResourceParameterRow(e)?P.onUpdateResourceParameterRow(e):c.isResourceParameterPlan(e)&&P.onUpdateResourceParameter(e))})},R=function(t){var a,n,o,r,l=[],u=[];if(e.is(t)){if((r=g.getSelectionsWithPaths()[0][0].path).length>1)for(let e=r.length-1;e>=0;e--)o=i.getInstance(r[e]),l.push(o.get("isInstanceOf")),0===e&&(a=i.getReferenceModel(o.get("isAggregatedBy")),l.push(a.id));else 1===r.length&&(n=i.getInstance(r[0]),a=i.getReferenceModel(n.get("isAggregatedBy")),l.push(a.id));l.forEach(e=>{d.getConnectedObjects(e,r,{relationTypes:y}).forEach(e=>{u=M(e,u)})}),m.createResourceParameterPlanRow(t,u)}},v=function(t){e.is(t)&&V.editResourceParameterRow(t)},h=function(e){var t,a,n,r,l={},u=[],c=[];if((t=g.getSelectionsWithPaths()[0][0].path).length>1)for(let e=t.length-1;e>=0;e--)a=i.getInstance(t[e]),u.push(a.get("isInstanceOf")),0===e&&(r=i.getReferenceModel(a.get("isAggregatedBy")),u.push(r.id));else 1===t.length&&(n=i.getInstance(t[0]),r=i.getReferenceModel(n.get("isAggregatedBy")),u.push(r.id));u.forEach(e=>{c.push(d.getImpactedConnections(e,null,{relationTypes:y}))}),t.length>0?c.length>0?(P.init(e),l.editFormConfig=p,V.init(l)):(o.warn(s.getNLSValue("ResourceParametertMgmtUI.InvalidLink")),o.notify("editResourceParameterPlan",{state:!1})):(o.warn(s.getNLSValue("ResourceParametertMgmtUI.InvalidStructure")),o.notify("editResourceParameterPlan",{state:!1}))},C=function(t){t=e.is(t,"array")?t:[t],u.withTransactionUpdate(function(){t.forEach(function(t){var a;a=t.toJSON(),e.is(a)&&P.isActive()&&P.addResourceParameterRow(a)}),1===t.length&&V.editResourceParameterRow(t[0])})},D=function(){P.deleteResourceParameterRow()},b=function(t,a){let n=d.getConnection(t),o=d.getSecondaryResourceLinksInfo(n);e.is(o,"array")&&o.forEach(e=>{let t=i.getReferenceModel(e.toPID);a.push(t)})},M=function(t,a){let n=d.getImpactedConnections(t,null,{relationTypes:y});return e.is(n,"array")&&n.forEach(n=>{let o=f.getIsPreferred(n);e.is(o)&&"TRUE"===o&&(a.push(i.getReferenceModel(t)),b(n,a))}),a},{listenTo:function(){return{createResourceParameterRow:R,editResourceParameteRow:v,addResourceParamRef:C,deleteResourceParameterRow:D,referenceChanged:I,computeResourceParamPlan:h,refreshAll:this.closeAll}},onStart:function(f,v){var R;P=new a(o,r,i,l,u,s,c,g,d),m=new t(o,r,c,s,g),V=new n(o,r,i,u,c,s,g),e.is(f.editFormAttributesXML)&&(R=d.getXMLValues(f.editFormAttributesXML),p=R.convert("AttributesDescriptionList.Type","name")),h(f),v()},onStop:function(){P=void 0,m=void 0,V=void 0},closeAll:function(){e.is(V)&&V.closeDialog(),e.is(m)&&m.close(),e.is(P)&&P.destroy()}}}}}),define("DS/DELPPWWorkInstructionsModule/WorkInstructionsModule",["UWA/Core","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectMgmtUI","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectDialogUI","DS/DELPPWWorkInstructionsModule/DataCollect/DataCollectImportRowUI"],function(e,t,a,n){"use strict";return{behaviors:["UXFactoryBehavior","ModelBehavior","TreeListViewBehavior","TreeListViewBehavior","WUXNodeModelBehavior","WUXNodeModelBehavior","ResourceBehavior","DataCollectWKIBehavior","EditAttributeBehavior","LinkBehavior","ProcessImplementBehavior"],creator:function(o,r,i,l,u,s,c,d,g,f,P,m){var V,p,h,v,R,C,D,I,b,M,y=new t(o,r,i,l,s,d,g,m),A=new a(o,r,i,s,g,d),E=new n(o,r,i,u,c,d,g,m);return p=function(t){(t=e.is(t,"array")?t:[t]).forEach(function(e){y.isActive()&&(g.isDataCollectRow(e)?y.onUpdateDataCollectRow(e):(g.isDataCollectPlan(e)||g.isDataCollectCheckList(e))&&y.onUpdateDataCollect(e))})},h=function(t){var a={},n=t.WKIModel;e.is(n)&&(g.isDataCollectPlan(n)||g.isDataCollectCheckList(n)?(y.init(t),a.editFormConfig=V,A.init(a)):n.isWorkInstruction()&&f.editConfiguredAttributes(n))},v=function(t){e.is(t)&&A.editDataCollectRow(t)},R=function(){y.deleteDataCollectRow()},C=function(){y.isActive()&&y.destroy()},D=function(e){var t;e=Array.isArray(e)?e:[e],y.isActive()&&(t=y.getDataCollectPID(),e.some(function(e){return t===e.get("PID")})&&y.destroy())},I=function(t){var a,n;e.is(t)&&(n=i.getReferenceModel(t),a=g.isDataCollectPlan(n)?"Real":"Boolean",A.createDataCollectRow(t,a))},M=function(t){t=e.is(t,"array")?t:[t],s.withTransactionUpdate(function(){t.forEach(function(t){var a;a=t,e.is(a)&&g.isDataCollectRow(a)&&y.isActive()&&y.addDataCollectRow(a)})})},b=function(t){e.is(t.absolutePath)&&e.is(t.dataCollectPID)&&E.init(t)},{listenTo:function(){return{editWorkInstruction:h,showPerformanceCharacteristics:b,createDataCollectRow:I,editDataCollectRow:v,deleteDataCollectRow:R,referenceChanged:p,HideAll:C,referenceRemoved:D,referenceAdded:M,refreshAll:this.closeDialog}},onStart:function(t,a){var n;e.is(t.editFormAttributesXML)&&(n=P.getXMLValues(t.editFormAttributesXML),V=n.convert("AttributesDescriptionList.Type","name")),a()},onStop:function(){},closeDialog:function(){e.is(A)&&A.closeDialog(),e.is(y)&&y.destroy()}}}}});