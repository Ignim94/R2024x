define("DS/CfgBaseUX/scripts/CfgSliderView",["DS/UIKIT/Spinner","UWA/Class/View","DS/Handlebars/Handlebars4","DS/Controls/Button","text!DS/CfgBaseUX/scripts/CfgSliderViewTemplate.html","css!DS/CfgBaseUX/styles/CfgSliderView.css"],function(e,t,i,n,o){"use strict";var s=i.compile(o);return t.extend({_rightPanel:null,_leftPanel:null,init:function(e){this._parent(e)},render:function(){return this.container.setHTML(s(this.options)),this.dynamicClasses=document.createElement("style"),this.dynamicClasses.type="text/css",this.dynamicClasses.id="massvariantMediaQuery",this.dynamicClasses.innerHTML="@media (min-width:1025px){.leftPanelExpand{width:calc(100% - 450px)}.rightPanelExpand{width:450px}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:768px) and (max-width:1024px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:481px) and (max-width:767px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:320px) and (max-width:480px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}",null==document.getElementById("massvariantMediaQuery")&&null==document.getElementById("massvariantMediaQuery")||document.getElementById("massvariantMediaQuery").remove(),document.getElementsByTagName("head")[0].appendChild(this.dynamicClasses),this._rightPanel=this.container.getElement(".lPanel"),this._leftPanel=this.container.getElement(".rPanel"),this._rightResizer=this.container.getElement(".layout-resizer"),this._currentRight="0",this._resizeEventRegister(),this.initialiseButtons(),this.disableRightLayout(),this.disableLeftLayout(),this.adjustFooter(),1==this.options.isReadOnlyMode&&(this.adjustReadOnlyMode(),this._rightResizer.hide()),this.options.parent?this.container.inject(this.options.parent):this.container.inject(widget.body),this.addEventListeners(),this.addHeaderControl(),this.addHeaderText(),""==this.options.leftHeader&&this._leftPanel.getElement(".modal-header").setStyle("display","none"),this._expandCollapseDockedPanel(),this},_resizeEventRegister:function(){var e=this,t=!1,i=null,n=null,o=function(o){i=e._currentRight,n=o.clientX?o.clientX:o.touches&&o.touches[0]?o.touches[0].clientX:0,t=!0,"touchstart"===o.type?(document.addEventListener("touchmove",s),document.addEventListener("touchend",a)):"mousedown"===o.type&&(document.addEventListener("mousemove",s),document.addEventListener("mouseup",a))},s=function(o){var s=o.clientX?o.clientX:o.touches&&o.touches[0]?o.touches[0].clientX:0;t&&(e._currentRight=+i+ +(n-s),e._resizePanels())},a=function(n){t=!1,i=e._currentRight,"touchend"===n.type?(document.removeEventListener("touchmove",s),document.removeEventListener("touchend",a)):"mouseup"===n.type&&(document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",a))};e._rightResizer.addEventListener("mousedown",o),e._rightResizer.addEventListener("touchstart",o)},_resizePanels:function(){if(!(this._currentRight>1e3||this._currentRight<100)){this._rightResizer.setStyle("right",this._currentRight);var e="calc( 100% - "+this._currentRight+"px )";this.dynamicClasses.innerHTML="@media (min-width:1025px){.leftPanelExpand{width:"+e+"}.rightPanelExpand{width:"+this._currentRight+"px}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:768px) and (max-width:1024px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:481px) and (max-width:767px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:320px) and (max-width:480px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}"}},addHeaderText:function(){null!=this.options.headerText&&this._leftPanel.getElement(".headerControl").appendText(this.options.headerText)},addHeaderControl:function(){this.options.headerControl&&this.options.headerControl.inject(this._leftPanel.getElement(".headerControl"))},disableRightLayout:function(){this._rightSpinner=new e({className:"Spinner-large rightSpinner"}).inject(this._rightPanel.getElement(".gridViewContainer")),this._rightSpinner.spin(),this._rightSpinner.show()},disableLeftLayout:function(){this._leftSpinner=new e({className:"Spinner-large leftSpinner"}).inject(this._leftPanel.getElement(".gridViewContainer")),this._leftSpinner.spin(),this._leftSpinner.show()},initialiseButtons:function(){let e=this._leftPanel.getElement(".buttons-container");this._leftPanel._crossButton=this._leftPanel.getElement(".fonticon-cancel"),this._leftPanel._plusButton=this._leftPanel.getElement(".Cfgbtn-Book"),this._leftPanel._plusButton.isSelected=!1,this._leftPanel._editButton=this._leftPanel.getElement(".Cfgbtn-Edit"),this._leftPanel._touchButton=this._leftPanel.getElement(".Cfgbtn-Touch"),this._leftPanel._verifyButton=new n({domId:"cfgLeftviewVerifyBtn",label:this.options.Verify,emphasize:"secondary"}).inject(e),this._leftPanel._applyButton=new n({domId:"cfgLeftviewFooterApplyBtn",label:this.options.Apply,emphasize:"primary"}).inject(e),this._leftPanel._cancelButton=new n({domId:"cfgLeftviewFooterCancelBtn",label:this.options.Cancel,emphasize:"secondary"}).inject(e),null==this.options.Verify&&this._leftPanel._verifyButton.getContent().setStyle("display","none"),this._rightPanel._crossButton=this._rightPanel.getElement(".fonticon-cancel"),this._rightPanel._applyButton=this._rightPanel.getElement(".Cfgbtn-Apply"),this._rightPanel._cancelButton=this._rightPanel.getElement(".Cfgbtn-Cancel")},adjustReadOnlyMode:function(){this._rightPanel.setStyle("width","0px"),this._leftPanel.setStyle("width","100%"),this._leftPanel._plusButton.hide()},clearRightLayout:function(){null!=this._rightPanel&&null!=this._rightPanel.getElement(".gridViewContainer")&&this._rightPanel.getElement(".gridViewContainer").setHTML("")},clearLeftLayout:function(){this._leftPanel.getElement(".gridViewContainer").setHTML("")},setRightView:function(e,t){null!=this._rightPanel&&null!=this._rightPanel.getElement(".gridViewContainer")&&(null!=t&&(t.elements.container.addClassName("toolbarPadding"),t.inject(this._rightPanel.getElement(".gridViewContainer"))),e.inject(this._rightPanel.getElement(".gridViewContainer")))},setLeftView:function(e,t){null!=t&&(t.elements.container.addClassName("toolbarPadding"),t.inject(this._leftPanel.getElement(".gridViewContainer"))),e.inject(this._leftPanel.getElement(".gridViewContainer"))},addEventListeners:function(){var e=this;this._leftPanel._crossButton.addEvent("click",function(t){t.buttonId="leftCross",e.options.onButtonClickCB(t),e.destroyLayout()}),this._leftPanel._plusButton.addEvent("click",function(t){e._expandCollapseDockedPanel(t),0==e._leftPanel._plusButton.isSelected?(e._leftPanel._plusButton.isSelected=!0,t.target.addClassName("buttonSelection")):(e._leftPanel._plusButton.isSelected=!1,t.target.removeClassName("buttonSelection"))}),this._leftPanel._applyButton&&this._leftPanel._applyButton.addEventListener("click",function(t){t.buttonId="leftApply",e.disableButtons(),e.options.onButtonClickCB(t)}),this._leftPanel._verifyButton&&this._leftPanel._verifyButton.addEventListener("click",function(t){t.buttonId="leftVerify",e.disableButtons(),e.options.onButtonClickCB(t)}),this._leftPanel._cancelButton&&this._leftPanel._cancelButton.addEventListener("click",function(t){t.buttonId="leftCancel",e.options.onButtonClickCB(t),e.destroyLayout()}),this._rightPanel._crossButton.addEvent("click",function(t){e._expandCollapseDockedPanel(t),e._leftPanel._plusButton.isSelected=!1,e._leftPanel._plusButton.removeClassName("buttonSelection")}),this._rightPanel._applyButton&&this._rightPanel._applyButton.addEvent("click",function(t){t.buttonId="rightApply",e.options.onButtonClickCB(t),e._expandCollapseDockedPanel(t)}),this._rightPanel._cancelButton&&this._rightPanel._cancelButton.addEvent("click",function(t){t.buttonId="rightCancel",e.options.onButtonClickCB(t),e._expandCollapseDockedPanel(t)}),this._leftPanel._touchButton&&this._leftPanel._touchButton.addEvent("click",function(t){t.buttonId="touch",e.options.onButtonClickCB(t),0==e._leftPanel._touchButton.isSelected?(e._leftPanel._touchButton.isSelected=!0,t.target.addClassName("buttonSelection")):(e._leftPanel._touchButton.isSelected=!1,t.target.removeClassName("buttonSelection"))})},disableButtons:function(){this._leftPanel._applyButton.disabled=!0,this._leftPanel._verifyButton&&(this._leftPanel._verifyButton.disabled=!0),this._leftPanel._cancelButton.disabled=!0,this._leftPanel._crossButton.setStyles({"pointer-events":"none"})},disablePrimaryButtons:function(){this._leftPanel._applyButton.setAttribute("disabled",""),this._leftPanel._verifyButton&&this._leftPanel._verifyButton.setAttribute("disabled","")},enableButtons:function(){this._leftPanel._applyButton.disabled=!1,this._leftPanel._verifyButton&&null!=this.options.Verify&&(this._leftPanel._verifyButton.disabled=!1),this._leftPanel._cancelButton.disabled=!1,this._leftPanel._crossButton.setStyles({"pointer-events":"All"}),null!=this._rightSpinner&&this._rightSpinner.hide(),null!=this._leftSpinner&&this._leftSpinner.hide()},adjustFooter:function(){0==this.options.isRightFooter&&(this._rightPanel.getElement(".modalBody").addClassName("modalBodyWithoutFooter"),this._rightPanel.getElement(".modalBody").removeClassName("modalBody"),this._rightPanel.getElement(".modal-footer").remove(),this._rightPanel._applyButton=null,this._rightPanel._cancelButton=null),0==this.options.isLeftFooter&&(this._leftPanel.getElement(".modalBody").addClassName("modalBodyWithoutFooter"),this._leftPanel.getElement(".modalBody").removeClassName("modalBody"),this._leftPanel.getElement(".cfgSliderViewFooter").remove(),this._leftPanel._applyButton=null,this._leftPanel._cancelButton=null)},destroyLayout:function(){this.destroy(),this.options.cfgVarDialog.closeDialog()},_expandCollapseDockedPanel:function(){null==document.getElementById("massvariantMediaQuery")&&null==document.getElementById("massvariantMediaQuery")||document.getElementById("massvariantMediaQuery").remove(),this.dynamicClasses.innerHTML="@media (min-width:1025px){.leftPanelExpand{width:calc(100% - 450px)}.rightPanelExpand{width:450px}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:768px) and (max-width:1024px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:481px) and (max-width:767px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}@media (min-width:320px) and (max-width:480px){.leftPanelExpand{width:0%}.rightPanelExpand{width:100%}.rightPanelReset{width:0}.leftPanelReset{width:100%}}",document.getElementsByTagName("head")[0].appendChild(this.dynamicClasses),1==this._rightPanel.isHidden()?(this._leftPanel.removeClassName("leftPanelReset"),this._rightPanel.removeClassName("rightPanelReset"),this._leftPanel.addClassName("leftPanelExpand"),this._rightPanel.addClassName("rightPanelExpand"),this._rightResizer.setStyle("right","450px"),this._currentRight="450",this._rightPanel.setStyle("width",""),this._rightResizer.show(),this._rightPanel.show()):(this._rightPanel.hide(),this._leftPanel.removeClassName("leftPanelExpand"),this._rightPanel.removeClassName("rightPanelExpand"),this._rightPanel.addClassName("rightPanelReset"),this._leftPanel.addClassName("leftPanelReset"),this._leftPanel.setStyle("width",""),this._rightResizer.hide())}})}),define("DS/CfgBaseUX/scripts/CfgModelEvents",["DS/CoreEvents/ModelEvents"],function(e){var t=null;function i(){return this.ModelEvents=new e,this.ModelEvents}return null==t&&(t=new i),t}),define("DS/CfgBaseUX/scripts/CfgConfigurationRevisionFactory",["UWA/Core","DS/Handlebars/Handlebars4","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","DS/EffectivityWebExternalJS/scripts/CfgConfigurationRevisionFactoryLoader"],function(e,t,i){"use strict";return UWA.Class.extend({vEObject:{},create:function(e,t,i,n,o,s,a){CfgConfigurationRevisionFactory(e,t,i,n,o,s,a,this.vEObject)},getVEObject(){return this.vEObject.value}})}),define("DS/CfgBaseUX/scripts/CfgToggleIconTypeRepresentation",["DS/Tweakers/TypeRepresentationFactory","css!DS/CfgBaseUX/styles/CfgToggleIconTypeRepresentation.css"],function(e){"use strict";return{toggleIconInToolbar:function(t){var{icon:i,iconFamily:n,iconSize:o,customTypeRep:s,cssClasses:a=[]}=t,r={iconName:i,fontIconFamily:n,fontIconSize:o},l={};l[s]={stdTemplate:"toggleIcon",semantics:{possibleValues:[{value:"true",icon:{...r,className:`toggle-icon-active ${a.join(" ")}`}},{value:"false",icon:{...r,className:`toggle-icon-inactive ${a.join(" ")}`}}]}},(new e).registerTypeRepresentations(l)}}}),define("DS/CfgBaseUX/scripts/CfgFeatureOptionViewsToolbar",["i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","i18n!DS/CfgAnalysisEffectivity/assets/nls/CfgSelectByConfigurationCriteriaDialog"],function(e,t){var i=Object.create(null);return i.toolbar=null,i.writetoolbarDefination=function(i){var n={entries:[{id:"ID_1",dataElements:{typeRepresentation:"string",value:"",label:"",tooltip:e.CFG_Search_Features,placeholder:e.CFG_Search_Features,overflowPriority:"none",displayLabel:!0},children:[]},{id:"ID_andCondition",dataElements:{typeRepresentation:"boolean",dataIndex:"AndCondition",value:"",visibleFlag:!1,label:t.CFG_AndCondition,tooltip:t.Information,overflowPriority:"none",displayLabel:!0},position:"far",children:[]},{id:"ID_ColumnManager",dataElements:{typeRepresentation:"functionIcon",visibleFlag:!1,tooltip:e.ColumnPropertiesManagerHeader,disabled:!1,icon:{iconName:"cog",fontIconFamily:1},category:"TouchNext",action:{module:"DS/CfgBaseUX/scripts/CfgFeatureOptionViewsToolbar",func:"onUserSettingsClick"}},position:"far",children:[]}]};return JSON.stringify(n)},i.onUserSettingsClick=function(e){e._event="ID_USERSETTINGS",e.viewId="dictionaryView",i.toolbar.onToolbarClickCallback(e)},i.onCancelClick=function(e){e._event="CLOSE",i.toolbar.onToolbarClickCallback(e)},i}),define("DS/CfgBaseUX/scripts/CfgUserSettings",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/UWPClientCode/I18n"],function(e,t,i,n){"use strict";return t.singleton({_globalStorageName:"CfgUserSettings",UserSettings:{effectivityView_VariantsAndOptionGroups:{description:!0},dictionaryView_VariantsAndOptionGroups:{type:!0,description:!0}},saveUserSettings:function(e){this.UserSettings=Object.assign(this.UserSettings,e);var t="/resources/AppsMngt/user/preference",o=enoviaServerFilterWidget.computeUrl(t),s=enoviaServerFilterWidget.getSecurityContext(),a={method:"PUT",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","DS-API-Version":"1.0"}};window.widget?widget.lang&&(a.headers["Accept-Language"]=widget.lang):n.getCurrentLanguage()&&(a.headers["Accept-Language"]=n.getCurrentLanguage()),"OnPremise"==enoviaServerFilterWidget.tenant?a.headers.SecurityContext=s:enoviaServerFilterWidget.storageUrl&&(o=enoviaServerFilterWidget.storageUrl+t),a.data={name:this._globalStorageName,value:JSON.stringify(this.UserSettings)},a.mustEmbedInBody=!0,a.onComplete=function(e){},a.onFailure=function(e){console.log("Error = "+e)},a.timeout=6e5,i.authenticatedRequest(o,a)},retrieveUserSettings:function(){var e=this,t="/resources/AppsMngt/user/getPreferences",o=enoviaServerFilterWidget.computeUrl(t),s=enoviaServerFilterWidget.getSecurityContext(),a={method:"GET",headers:{Accept:"application/json","DS-API-Version":"1.0"}};window.widget?widget.lang&&(a.headers["Accept-Language"]=widget.lang):n.getCurrentLanguage()&&(a.headers["Accept-Language"]=n.getCurrentLanguage()),"OnPremise"==enoviaServerFilterWidget.tenant?a.headers.SecurityContext=s:enoviaServerFilterWidget.storageUrl&&(o=enoviaServerFilterWidget.storageUrl+t),a.data={name:this._globalStorageName},a.mustEmbedInBody=!0,a.onComplete=function(t){null!=t&&t.length>0&&(e.UserSettings=JSON.parse(t))},a.onFailure=function(e){console.log("Error = "+e)},a.timeout=6e5,i.authenticatedRequest(o,a)}})}),define("DS/CfgBaseUX/scripts/CfgContainerView",["UWA/Class/View","DS/Handlebars/Handlebars4","text!DS/CfgBaseUX/scripts/CfgContainerViewTemplate.html","DS/Controls/Toggle","DS/Controls/TooltipModel","DS/Controls/Button","DS/Utilities/TouchUtils","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX"],function(e,t,i,n,o,s,a,r){"use strict";var l=t.compile(i);return e.extend({className:"CfgContainerView",init:function(e){this._parent(e)},render:function(){this.container.setHTML(l(this.options)),this._header=this.container.getElement(".cfgContainerHeader"),this._body=this.container.getElement(".cfgContainerBody"),this._toggleSession=this.container.getElement(".toggleSessionEffectivity");var e=this.container.getElement(".CfgButtonsContainer");(this._firstButton=new s({domId:"CfgPrimaryBtn",label:this.options.firstButtonText,emphasize:"primary",disabled:!1}).inject(e),this._firstButton.getContent().setStyles({margin:"5px"}),this._secoundButton=new s({domId:"CfgSecondaryBtn",label:this.options.secondButtonText,emphasize:"secondary",disabled:!1}).inject(e),this._secoundButton.getContent().setStyles({margin:"5px"}),0==this.options.isHeader&&this._header.hide(),null==this.options.firstButtonText&&this._firstButton.hide(),null==this.options.secondButtonText&&this._secoundButton.remove(),"Native"==window.enoviaServerFilterWidget.mode)&&(this.container.getElementsByClassName("wux-windows-dialog-resize-zone")[0].hidden=!0);if(null!=this.options.toggleSessionEffectivity&&this.options.toggleSessionEffectivity&&"false"!=this.options.toggleSessionEffectivity){var t="checked"==this.options.toggleSessionEffectivity;this.propagateSessionEffectivity=new n({type:"checkbox",value:"propagateSessionEffectivity",className:"primary",checkFlag:t,label:r.toggleSessionEffectivity}),this.propagateSessionEffectivity.tooltipInfos=new o({shortHelp:r.toggleSessionEffectivity}),this.propagateSessionEffectivity.inject(this._toggleSession)}else{this._toggleSession.hide(),this.container.getElementsByClassName("wux-windows-dialog-footer resize-padding")[0].style.justifyContent=""}return"Native"!=window.enoviaServerFilterWidget.mode&&this.container.setStyles({height:"100%",width:"100%"}),this.options.displayCompactMode=!(null!=a.getTouchMode()&&0!=a.getTouchMode()),this.options.displayCompactMode?this._header.setStyle("font-size","12px"):this._header.setStyle("font-size","14px"),this._toggleSession.getElement(".wux-label")&&this._toggleSession.getElement(".wux-label").setStyles({whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"calc(100% - 10px)"}),this.registerCallbackEvents(),this},hideScrollBarInContainerBody:function(){this._body.setStyles({"overflow-y":"hidden"})},enableDisableFirstorSecondButton:function(e,t){let i="firstButton"===e?this._firstButton:this._secoundButton;i&&(i.disabled=!!t)},registerCallbackEvents:function(){var e=this;this.propagateSessionEffectivity&&this.propagateSessionEffectivity.addEventListener("click",function(t){t.propagateSessionEffectivity=!!e.propagateSessionEffectivity&&e.propagateSessionEffectivity.checkFlag,e.options.onCheckBoxClick&&e.options.onCheckBoxClick(t)}),this._firstButton&&this._firstButton.addEventListener("click",function(t){t.propagateSessionEffectivity=!!e.propagateSessionEffectivity&&e.propagateSessionEffectivity.checkFlag,t.buttonId="firstButton",e.options.onButtonClickCB(t)}),this._secoundButton&&this._secoundButton.addEventListener("click",function(t){t.propagateSessionEffectivity=!!e.propagateSessionEffectivity&&e.propagateSessionEffectivity.checkFlag,t.buttonId="secondButton",e.options.onButtonClickCB(t)})}})}),define("DS/CfgBaseUX/scripts/CfgToggle",["UWA/Class/View","DS/Controls/Toggle","DS/Controls/TooltipModel"],function(e,t,i){"use strict";return e.extend({cfgToggle:null,toggleComponentHolder:null,toggleClickCount:0,init:function(e){this._parent(e)},setup:function(e){},render:function(){var e=this;return e.toggleClickCount=0,this.toggleComponentHolder=UWA.createElement("div",{class:"cfgToggleComponentHolder",id:"cfgToggleInfinityMode",styles:{width:e.options.width?e.options.width+"px":"200px"}}),this.cfgToggle=new t({type:"switch",id:e.options.toggleID?e.options.toggleID:"cfgToggleID",checkFlag:!1,value:"0",label:e.options.toggleLabel}),this.cfgToggle.tooltipInfos=new i({shortHelp:e.options.toggleTooltip}),this.cfgToggle.inject(this.toggleComponentHolder),this.cfgToggle.addEventListener("change",function(){e.toggleClickCount++}),this.toggleComponentHolder},setToggleState:function(e){this.cfgToggle.checkFlag=!(!e||1!=e)},getToggleState:function(){return this.cfgToggle?this.cfgToggle.checkFlag:null},hideToggleLabel:function(e){"UNIT"===e&&document.querySelector(".unitToolbarContainer .cfgToggleComponentHolder .wux-label")&&(document.querySelector(".unitToolbarContainer .cfgToggleComponentHolder .wux-label").style.display="none")},showToggleLabel:function(e){"UNIT"===e&&document.querySelector(".unitToolbarContainer .cfgToggleComponentHolder .wux-label")&&(document.querySelector(".unitToolbarContainer .cfgToggleComponentHolder .wux-label").style.display="inline-block")}})}),define("DS/CfgBaseUX/scripts/CfgModelSelector",[],function(){"use strict";return""}),define("DS/CfgBaseUX/scripts/CfgModelTileView",["UWA/Core","UWA/Utils","DS/W3DXComponents/Views/Item/TileView"],function(e,t,i){"use strict";return i.extend({name:"CfgCustomModelTile",template:function(){return'                                        <div class="'+this.getClassNames("-check")+' {{#unless withMultisel}}hidden{{/unless}}">                                            <div class="toggle toggle-primary">                                                <input type="checkbox" name="radios" value="" id="checkbox-{{cid}}">                                                <label class="control-label" for="checkbox-{{cid}}"></label>                                            </div>                                        </div>                                        <div class="'+this.getClassNames("-sub-container")+'" draggable="true">                                            <div class="'+this.getClassNames("-header")+'">                                                {{#if image}}<img src="{{#unless lazyLoading}}{{image}}{{/unless}}" {{getImgAttrs imgAttrs}} class="'+this.getClassNames("-image")+'" draggable="false"/>{{/if}}                                            </div>                                            <div class="'+this.getClassNames("-body")+'">                                                {{#if icon}}<img src="{{icon}}" class="'+this.getClassNames("-icon")+'" draggable="false"/>{{/if}}\t                                                <div class="'+this.getClassNames("-title")+'" title="{{marketingName}}" style="white-space: nowrap;">{{{title}}}</div>                                                <div class="'+this.getClassNames("-subtitle")+'">{{{subtitle}}}</div>                                                <div class="'+this.getClassNames("-content")+'" title="{{owner}}">{{{content}}}</div>                                            <progress max="100" value="10" class="'+this.getClassNames("-progress")+'"></progress>                                            </div><div class="'+this.getClassNames("-expression-container")+'">                                                                <div class="'+this.getClassNames("-expression")+'" title="{{displayexpression}}">{{{expression}}}</div>\t\t\t\t\t\t\t\t\t\t\t</div>                                            <div class="'+this.getClassNames("-actions")+'">                                                <div class="actions-inline-container">                                                    <div class="action-container single-action hidden">                                                        <div class="action-icon-wrapper"><span class="fonticon fonticon-2x"></span></div>                                                    </div>                                                    <div class="action-container actions-inline-dotted hidden">                                                        <div class="action-icon-wrapper"><span class="fonticon fonticon-2x fonticon-down-open"></span></div>                                                    </div>                                                </div>                                            </div>                                        </div>                                    '}})}),define("DS/CfgBaseUX/scripts/CfgEffectivityExpressionContainer",["UWA/Class/View","DS/UIKIT/Iconbar","DS/Tweakers/GeneratedToolbar","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS","css!DS/CfgBaseUX/styles/CfgExpressionContainer.css"],function(e,t,i,n){return e.extend({init:function(e){this._parent(e)},setup:function(e){},render:function(){this.cfgExpressionContainer=UWA.createElement("div",{id:"cfgExpressionContainer"}).inject(this.options.viewContainer);var e=UWA.createElement("div",{id:"cfgExpressionContainer-Header"}).inject(this.cfgExpressionContainer);this.cfgExpressionContainerHeaderTitle=UWA.createElement("div",{id:"cfgExpressionContainer-HeaderTitle",text:this.options.effExpHeaderTitle}).inject(e);var t={entries:[{id:"minimize_icon",dataElements:{typeRepresentation:"functionIcon",value:e=>this.minimizeIconCB(e)},icon:{iconName:"minus wux-ui-3ds",fontIconFamily:1},tooltip:this.options.minimizeTooltip,position:"far",domId:"CfgIconMinus"},{id:"maximize_icon",dataElements:{typeRepresentation:"functionIcon",value:e=>this.MaximizeIconCB(e)},icon:{iconName:"resize-full wux-ui-3ds",fontIconFamily:1},tooltip:this.options.maximizeTooltip,position:"far",domId:"CfgIconMaximize"}]},n=i.prototype.createTreeDocument(t);this.toolbarMenu=new i({direction:"horizontal",items:n});var o=UWA.createElement("div",{id:"cfgExpressionContainer-HeaderIconBar"}).inject(e);this.toolbarMenu.inject(o);var s="";this.options.inputData&&(s=this.options.inputData),this.cfgExpressionContainerBody=UWA.createElement("div",{id:"cfgExpressionContainer-body",styles:{height:this.options.defaultExpressionContainerHeight+"px","min-height":this.options.defaultExpressionContainerHeight+"px"},text:s}).inject(this.cfgExpressionContainer),this.options.expressionContainer&&(this.options.expressionContainer.inject(this.cfgExpressionContainerBody),this.cfgExpressionContainerBody.setStyles({border:"none",padding:"0px"})),this.options.viewContainer.children[0].setStyle("height","calc(100% - "+(this.options.defaultExpressionContainerHeight+45)+"px)"),this.applyCompactComfortableMode()},updateExpression:function(e){this.cfgExpressionContainerBody.innerText=e},appendExpression:function(e){this.cfgExpressionContainerBody.append=e},hideShowExpressionContainer:function(){this.cfgExpressionContainer.isHidden()?(this.cfgExpressionContainer.show(),this.options.viewContainer.children[0].setStyle("height","calc(100% - "+(this.options.defaultExpressionContainerHeight+45)+"px)"),this.cfgExpressionContainerBody.show()):(this.cfgExpressionContainer.hide(),this.options.viewContainer.children[0].setStyle("height","100%"))},applyCompactComfortableMode:function(){null==this.options.displayCompactMode||!1===this.options.displayCompactMode?(this.cfgExpressionContainerHeaderTitle.setAttributeNode(document.createAttribute("touch-mode")),this.cfgExpressionContainerBody.setAttributeNode(document.createAttribute("touch-mode"))):(this.cfgExpressionContainerHeaderTitle.removeAttribute("touch-mode"),this.cfgExpressionContainerBody.removeAttribute("touch-mode"))},minimizeIconCB:function(e){this.toolbarMenu._toolbar._elementsArray[0].element.toggleClassName("cfgExpressionContainer-minimized"),this.cfgExpressionContainer.setStyle("height","auto"),"resize-small wux-ui-3ds"==this.toolbarMenu.getNodeModelByID("maximize_icon")._options.icon.iconName&&this.toolbarMenu.updateNodeModel("maximize_icon",{icon:{iconName:"resize-full wux-ui-3ds",fontIconFamily:1,className:""},tooltip:this.options.maximizeTooltip}),this.options.viewContainer.children[0].show(),this.toolbarMenu._toolbar._elementsArray[0].element.hasClassName("cfgExpressionContainer-minimized")?(this.toolbarMenu.updateNodeModel("minimize_icon",{icon:{className:"cfg-active fonticon fonticon-resize-small"},tooltip:n.CfgLabelRestore}),this.cfgExpressionContainerBody.hide(),this.options.viewContainer.children[0].setStyle("height","calc(100% - 45px)")):(this.toolbarMenu.updateNodeModel("minimize_icon",{icon:{className:""},tooltip:this.options.minimizeTooltip}),this.options.viewContainer.children[0].setStyle("height","calc(100% - "+(this.options.defaultExpressionContainerHeight+45)+"px)"),this.cfgExpressionContainerBody.setStyle("height",this.options.defaultExpressionContainerHeight),this.cfgExpressionContainerBody.show())},MaximizeIconCB:function(e){this.cfgExpressionContainerBody.show(),this.toolbarMenu._toolbar._elementsArray[0].element.hasClassName("cfgExpressionContainer-minimized")&&this.toolbarMenu._toolbar._elementsArray[0].element.removeClassName("cfgExpressionContainer-minimized"),"resize-full wux-ui-3ds"==e.dsModel.getModel().icon.iconName?(this.toolbarMenu.updateNodeModel("maximize_icon",{icon:{iconName:"resize-small wux-ui-3ds",fontIconFamily:1,className:"cfg-active fonticon fonticon-resize-small"},tooltip:n.CfgLabelRestore}),this.toolbarMenu.updateNodeModel("minimize_icon",{icon:{className:""},tooltip:this.options.minimizeTooltip}),this.options.viewContainer.children[0].hide(),this.cfgExpressionContainer.setStyle("height","100%"),this.cfgExpressionContainerBody.setStyle("height","calc(100% - 45px)")):(this.toolbarMenu.updateNodeModel("maximize_icon",{icon:{iconName:"resize-full wux-ui-3ds",fontIconFamily:1,className:""},tooltip:this.options.maximizeTooltip}),this.options.viewContainer.children[0].setStyle("height","calc(100% - "+(this.options.defaultExpressionContainerHeight+45)+"px)"),this.options.viewContainer.children[0].show(),this.cfgExpressionContainer.setStyle("height","auto"),this.cfgExpressionContainerBody.setStyle("height",this.options.defaultExpressionContainerHeight))}})}),define("DS/CfgBaseUX/scripts/ConfigurationFeatureCriteria",["UWA/Data","DS/WebappsUtils/WebappsUtils","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","DS/EffectivityWebExternalJS/scripts/CriteriaLibs","DS/EffectivityWebExternalJS/scripts/jQuery","css!DS/UIKIT/UIKIT.css","css!DS/CfgBaseUX/styles/Criteria"],function(e,t,i){return{init:function(i,n,o,s){this.showOptions=s,this.ImageBank={defaultImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/DefaultImage.png"),exclaimationmarkImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/ExclamationMark.png"),chosenbyuserImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/ChosenByUser.png"),availableImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/Available.png"),checkImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/CheckIcon.png"),rejectImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/RejectIcon.png"),radioavailableImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/RadioAvailable.png"),radioselectedImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/RadioSelected.png"),radiodismissedImgUrl:t.getWebappsAssetUrl("CfgBaseUX","icons/RadioDismissed.png")},this.ColorBank={selectedColor:"aliceblue",unselectedcolor:"white"},this.iModelName=n.replace(" ",""),this.parentDiv=$("[id = '"+i+"']"),this.tooltipTimeout=null,this.tags={},this.component={},this.data=o;var a=location.pathname.substring(0,location.pathname.indexOf("/",1)),r=(window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")).concat(a)+"/resources/dictionary/class/Configuration Feature/getAttributes?inherited=true ",l=this;l.nlsAttributesList={},l.nlsAttributesList.Attributes=[],e.request(r,{method:"GET",type:"application/ds-json",async:!0,timeout:6e4,processData:!1,onComplete:function(e){var t=JSON.parse(e);l.nlsAttributesList=t},onFailure:function(e){}}),this.initialiseComponent()},showHideFeatureOptionImages:function(e){1==e?$(".FeatureImg").each(function(){$(this).parent().show()}):0==e&&$(".FeatureImg").each(function(){$(this).parent().hide()})},addTooltip:function(e){var t=e.data.iModelName;if("mouseenter"==e.type){$('[elementid ~= "'+t+'_maindiv"]').scrollTop();var n=$(this).position(),o="";(p=$("#"+t+"_tooltip")).css("top",n.top+10),p.css("left",n.left+10);o="";var s=$(this).attr("elementid");if(s=s.replace("questionmark","featuretable"),0!=$('[elementid ~= "'+s+'"]').length){for(var a=0;a<e.data.data.features.length;a++)if(s==t+"_featuretable_"+e.data.data.features[a].id){for(var r in e.data.data.features[a].attributes)if("toJSONString"!=r&&"find"!=r){null==(u=e.data.data.features[a].attributes[r])&&(u="");for(var l="",c=0;c<e.data.nlsAttributesList.Attributes.length;c++){var d=e.data.nlsAttributesList.Attributes[c].Name.replace(/\s/g,"");if((d=d.replace("-",""))==r){l=e.data.nlsAttributesList.Attributes[c].NLS;break}}""==l&&(l=r),o+='<font font-family="calibri" color="lightyellow">'+l+"</font> : ","Preliminary"==u&&(u=i.CF_Preliminary),"Review"==u&&(u=i.CF_Review),"Release"==u&&(u=i.CF_Release),"Obsolete"==u&&(u=i.CF_Obsolete),"Single"==u&&(u=i.CF_Single),"Multiple"==u&&(u=i.CF_Multiple),"Blank"==u&&(u=i.CF_Blank),o+='<font style="color:white;">'+u+"</font><br>"}break}}else{s=s.replace("featuretable","optiontable");for(a=0;a<e.data.data.features.length;a++)for(c=0;c<e.data.data.features[a].options.length;c++)if(s==t+"_optiontable_"+e.data.data.features[a].options[c].id){for(var r in e.data.data.features[a].options[c].attributes){var u;if("toJSONString"!=r&&"find"!=r)null==(u=e.data.data.features[a].options[c].attributes[r])&&(u=""),o+='<font font-family="calibri" color="lightyellow">'+r+"</font> : ",o+='<font style="color:white;">'+u+"</font><br>"}break}}p.html('<font color="lightyellow">'+o+"</font>"),clearTimeout(e.data.data.tooltipTimeout),e.data.data.tooltipTimeout=setTimeout(function(){p.show()},1e3)}if("mouseleave"==e.type||"mouseover"==e.type){var p=$("#"+t+"_tooltip");clearTimeout(e.data.data.tooltipTimeout),p.hide()}},resetSelection:function(){var e=this.iModelName;$('[elementid ^= "'+e+'_featuretable_"]').css("background-color",this.ColorBank.unselectedcolor),$('[elementid ^= "'+e+'_featuretable_"]').find("td").css("background-color",this.ColorBank.unselectedcolor),$('[id *= "'+e+'_tag_"]').css("background-color",this.ColorBank.unselectedcolor),$('[id *= "'+e+'_tagsinput"]').css("background-color",this.ColorBank.unselectedcolor),$('[id *= "'+e+'_addTag"]').css("background-color",this.ColorBank.unselectedcolor)},setSelection:function(e){this.iModelName;$('[elementid ~= "'+e+'"]').css("background-color",this.ColorBank.selectedColor),$('[elementid ~= "'+e+'"]').find("td").css("background-color",this.ColorBank.selectedColor);var t=(e=e.replace("featuretable_","tag_"))+"_tagsinput";$('[id ~= "'+e+'_tag"]').css("background-color",this.ColorBank.selectedColor),e+="_addTag",$('[id *= "'+e+'"]').css("background-color",this.ColorBank.selectedColor),$('[id ~= "'+t+'"]').css("background-color",this.ColorBank.selectedColor)},collapseAllOptionPanels:function(){$('[elementid ^= "'+this.iModelName+'_optiondiv_"]').hide()},expandAllOptionPanels:function(){$('[elementid ^= "'+this.iModelName+'_optiondiv_"]').show()},featureNodeClicked:function(e){var t=$(this).attr("elementid");if(e.data.resetSelection(),"false"!=$(this).parent().attr("draggable")){e.data.setSelection(t);var i=t.replace("featuretable_","optiondiv_");$('[elementid ~= "'+i+'"]').is(":visible")?$('[elementid ~= "'+i+'"]').hide():$('[elementid ~= "'+i+'"]').show(),$('[elementid ~= "'+i+'"]').find(".optiontablenode").show()}},questionmarkHandler:function(e){e.stopPropagation()},onMaindivClicked:function(){$(".autocomplete-suggestions").hide()},onMaindivScrolled:function(){$(".autocomplete-suggestions").hide()},addEvents:function(){var e=this.iModelName;$('[elementid ^= "'+e+'_featuretable_"]').on("click",this,this.featureNodeClicked),$('[elementid ^= "'+e+'_questionmark_"]').on("click",this,this.questionmarkHandler),$('[elementid ^= "'+e+'_questionmark_"]').on("mouseenter mouseleave",this,this.addTooltip),$('[elementid ~= "'+e+'_maindiv"]').on("click",this.onMaindivClicked),$('[elementid ~= "'+e+'_maindiv"]').on("scroll",this.onMaindivScrolled)},buildAttributesNodes:function(e,t){var n="";for(var o in e.attributes)if("toJSONString"!=o&&"find"!=o&&"layoutData"!=o){var s=e.attributes[o];null==s&&(s=""),"Preliminary"==s&&(s=i.CF_Preliminary),"Review"==s&&(s=i.CF_Review),"Release"==s&&(s=i.CF_Release),"Obsolete"==s&&(s=i.CF_Obsolete),"Single"==s&&(s=i.CF_Single),"Multiple"==s&&(s=i.CF_Multiple),"Blank"==s&&(s=i.CF_Blank),n+='<div class="attribute" attributename="'+o+'">'+s+"</div>"}$(n).appendTo($(t))},buildFeatureNodes:function(e,t){var i=this.iModelName,n=document.createElement("div");n.setAttribute("elementid",i+"_featurediv_"+e.id),n.setAttribute("idFeature",e.id),n.setAttribute("featureName",e.name),n.setAttribute("container","noContainer"),n.setAttribute("draggable","true"),n.setAttribute("logicalid",e.logicalid);var o=e.attributes.Current;"undefined"===o&&(o=""),"Obsolete"==o?(n.setAttribute("draggable","false"),n.style.opacity=.4,n.className="featureName"):n.className="featureName draggableitem",t.appendChild(n);var s=document.createElement("table");s.className="FeatureNode",s.setAttribute("elementid",i+"_featuretable_"+e.id);var a=document.createElement("tr");s.appendChild(a);var r=document.createElement("td");r.style.width="16px",r.style.verticalAlign="middle",r.setAttribute("rowspan","2");var l=document.createElement("img");l.setAttribute("src",this.ImageBank.exclaimationmarkImgUrl),l.setAttribute("elementid",i+"_exclamationmark_"+e.id),l.className="ExclamationMarkImg","Must"==e.selectionCriteria?l.style.display="block":l.style.display="none",r.appendChild(l),a.appendChild(r);var c=document.createElement("td");c.style.width="52px",c.style.verticalAlign="52px",c.setAttribute("rowspan","2");var d=document.createElement("img");""==e.image||null==e.image?d.setAttribute("src",this.ImageBank.defaultImgUrl):d.setAttribute("src",e.image),d.className="FeatureImg",d.setAttribute("elementid",i+"_featureimg_"+e.id),c.appendChild(d),a.appendChild(c);var u=document.createElement("td");u.style.verticalAlign="top",u.setAttribute("colspan","4");var p=document.createElement("div");p.setAttribute("name",e.name),p.setAttribute("elementid",i+"_name_"+e.id),p.className="FeatureNames";var g=document.createElement("div");g.style.cssFloat="left",g.style.overflow="hidden",g.style.textOverflow="ellipsis",g.style.maxWidth="90%",g.innerHTML=e.displayValue;var m=document.createElement("div");m.setAttribute("elementid",i+"_questionmark_"+e.id),m.className="QuestionMarkIcon fonticon fonticon-help-circled",m.style.marginTop="-5px",m.style.fontSize="small",m.style.cursor="help",m.style.verticalAlign="middle",m.style.color="lightblue",p.appendChild(g),p.appendChild(m),u.appendChild(p),a.appendChild(u),this.buildAttributesNodes(e,u);var h=document.createElement("tr"),f=document.createElement("td");f.setAttribute("colspan","4"),h.appendChild(f),s.appendChild(h);var v=document.createElement("table"),C=document.createElement("tr"),y=document.createElement("td");y.style.verticalAlign="top",y.style.paddingLeft="10px";var b=document.createElement("input");b.className="tagsInputText",b.setAttribute("id",i+"_input_"+e.id),b.setAttribute("type","text"),b.setAttribute("selectiontype",e.selectionType),b.setAttribute("placeholder","Enter Options..");var x=document.createElement("td");x.style.width="auto";var S=document.createElement("input");S.setAttribute("id",i+"_tag_"+e.id),S.setAttribute("type","text"),S.className="tags",f.appendChild(v),v.appendChild(C),C.appendChild(y),y.appendChild(b),C.appendChild(x),x.appendChild(S);var E=document.createElement("div");E.setAttribute("elementid",i+"_optiondiv_"+e.id);var D=document.createElement("div");D.setAttribute("elementid","optiontable"),D.style.overflowY="auto",D.style.overflowX="hidden",D.style.width="100%",E.appendChild(D),n.appendChild(s),n.appendChild(E);1==this.showOptions&&this.buildOptionNodes(e,D)},buildOptionNodes:function(e,t){var i=this.ImageBank.availableImgUrl;"Single"==e.selectionType&&(i=this.ImageBank.radioavailableImgUrl);for(var n=this.iModelName,o=0;o<e.options.length;o++){var s=document.createElement("table");s.setAttribute("elementid",n+"_optiontable_"+e.options[o].id),s.className="optiontablenode",s.style.width="99%";var a=document.createElement("tr"),r=document.createElement("td");r.style.width="32px";var l=document.createElement("td");l.style.width="16px";var c=document.createElement("img");c.setAttribute("elementid",n+"_userimg_"+e.options[o].id),c.className="ExclamationMarkImg",c.style.display="none";var d=document.createElement("td");d.style.width="16px";var u=document.createElement("img");u.setAttribute("elementid",n+"_checkimg_"+e.options[o].id),u.className="ExclamationMarkImg",u.setAttribute("type",e.selectionType),u.setAttribute("parentname",e.name),u.setAttribute("parentid",e.id),u.setAttribute("src",i);var p=document.createElement("td");p.style.width="52px";var g=document.createElement("img");g.setAttribute("elementid",n+"_img_"+e.options[o].id),""==e.options[o].image||null==e.options[o].image?g.setAttribute("src",this.ImageBank.defaultImgUrl):g.setAttribute("src",e.options[o].image),g.className="FeatureImg";var m=document.createElement("td");m.style.verticalAlign="top";var h=document.createElement("div");h.setAttribute("elementid",n+"_name_"+e.options[o].id),h.setAttribute("name",e.options[o].name),h.className="FeatureNames";var f=document.createElement("div");f.style.cssFloat="left",f.innerHTML=e.options[o].displayValue;var v=document.createElement("div");v.setAttribute("elementid",n+"_questionmark_"+e.options[o].id),v.className="QuestionMarkIcon fonticon fonticon-help-circled",v.style.marginTop="-5px",v.style.fontSize="small",v.style.cursor="help",v.style.verticalAlign="middle",v.style.color="lightblue",h.appendChild(f),h.appendChild(v),m.appendChild(h),p.appendChild(g),d.appendChild(u),l.appendChild(c),a.appendChild(r),a.appendChild(l),a.appendChild(d),a.appendChild(p),a.appendChild(m),s.appendChild(a),t.appendChild(s),this.buildAttributesNodes(e.options[o],m)}},buildSearchComponent:function(e){var t=this.iModelName,n=document.createElement("div");n.style.cssFloat="right";var o=document.createElement("table"),s=document.createElement("tbody"),a=document.createElement("tr"),r=document.createElement("td");r.style.width="130px";var l=document.createElement("select");l.setAttribute("elementid",t+"_general_Attributes_List_Combo"),l.className="selectionattribute",l.style.width="0px",r.appendChild(l);var c=document.createElement("td");c.style.width="130px";var d=document.createElement("input");d.setAttribute("elementid",t+"_general_Searchinput"),d.className="searchText",d.setAttribute("placeholder",i.CF_search),d.setAttribute("type","text"),c.appendChild(d);var u=document.createElement("td");u.style.width="24px",this.clearspan=document.createElement("span"),this.clearspan.setAttribute("elementid",t+"_general_clearButton"),this.clearspan.className="fonticon fonticon-cancel-circled clearButton",u.appendChild(this.clearspan);var p=document.createElement("td"),g=document.createElement("div");g.className="fonttransition",g.style.width="32px",g.style.height="32px",g.style.borderRadius="4px",g.style.marginLeft="-5px";var m=document.createElement("span");m.setAttribute("elementid",t+"_general_Searchinput_Img"),m.className="fonticon fonticon-search searchButton",p.appendChild(g),g.appendChild(m),a.appendChild(r),a.appendChild(c),a.appendChild(u),a.appendChild(p),s.appendChild(a),o.appendChild(s),n.appendChild(o),e.appendChild(n)},getAttributesList:function(){for(var e=[],t=0;t<this.data.features.length;t++){var i=this.data.features[t];for(var n in i.attributes)"toJSONString"!=n&&"find"!=n&&"layoutData"!=n&&e.push({text:n,value:n});if(1==this.showOptions){for(var n in i.options[0].attributes)if("toJSONString"!=n&&"find"!=n&&"layoutData"!=n){var o=0;for(t=0;t<e.length;t++)if(n==e[t].text){o=1;break}0==o&&e.push({text:n,value:n})}break}}for(o=0,t=0;t<e.length;t++)"displayValue"==e[t].text&&(o=1);return 0==o&&e.push({text:"displayValue",value:"displayValue"}),e},buildComponent:function(){var e=this.iModelName,t=document.createElement("table");t.style.width="100%";var i=document.createElement("tr"),n=document.createElement("td");n.style.paddingRight="5px",n.style.paddingLeft="5px",n.style.paddingTop="5px",n.style.paddingBottom="5px",i.appendChild(n),this.buildSearchComponent(n);var o=document.createElement("tr"),s=document.createElement("td"),a=document.createElement("div");a.style.width="100%",a.style.overflowY="auto",a.style.overflowX="hidden",a.setAttribute("elementid",e+"_maindiv");var r=document.createElement("div");r.className="tooltipEC",r.setAttribute("id",e+"_tooltip"),s.appendChild(a),a.appendChild(r);for(var l=0;l<this.data.features.length;l++){var c=this.data.features[l];c.options.length>0&&this.buildFeatureNodes(c,a)}return o.appendChild(s),t.appendChild(i),t.appendChild(o),t},initialiseGenericSearchComponent:function(){var e=this.iModelName;$(this.clearspan).hide(),$('[elementid ^= "'+e+'_general_Searchinput_Img"]').on("click",function(){0==$('[elementid ~= "'+e+'_general_Searchinput"]').is(":visible")?$('[elementid ~= "'+e+'_general_Searchinput"]').show():$('[elementid ~= "'+e+'_general_Searchinput"]').hide()}),$('[elementid ~= "'+e+'_general_Attributes_List_Combo"]').hide(),$('[elementid ~= "'+e+'_general_Searchinput"]').hide(),$('[elementid ~= "'+e+'_general_clearButton"]').hide();var t=this.getAttributesList();$.each(t,function(t,i){$('[elementid ~= "'+e+'_general_Attributes_List_Combo"]').append(new Option(i.text,i.value))}),$('[elementid ~= "'+e+'_general_Attributes_List_Combo"]').val("displayValue"),$('[elementid ~= "'+e+'_general_Attributes_List_Combo"]').hide(),$('[elementid ~= "'+e+'_general_clearButton"]').on("click",function(){$(i.clearspan).hide(),$('[elementid ~= "'+e+'_general_Searchinput"]').val(""),i.collapseAllOptionPanels();var t=$('[elementid ^= "'+e+'_featurediv_"]');t.show(),t.each(function(){var t=$(this).find('[elementid ^= "'+e+'_featuretable_"]').find(".attribute");t.each(function(){$(this).removeClass("attributebold")})});var n=$('[elementid ^= "'+e+'_optiondiv_"]');n.each(function(){var e=$(this).find(".optiontablenode");e.show()}),n.each(function(){var e=$(this).find(".optiontablenode");$(this);e.each(function(){var e=$(this).find(".attribute");e.each(function(){$(this).removeClass("attributebold")})})})});var i=this;$('[elementid ~= "'+e+'_general_Searchinput"]').on("input",function(t){var n=$(this).val();""==(n=n.toUpperCase())?$(i.clearspan).hide():$(i.clearspan).show(),i.collapseAllOptionPanels();var o=$('[elementid ^= "'+e+'_featurediv_"]');o.show(),$('[elementid ^= "'+e+'_optiondiv_"]').each(function(){$(this).find(".optiontablenode").show()}),o.each(function(){var t=$(this).find('[elementid ^= "'+e+'_featuretable_"]').find(".attribute"),i=0;t.each(function(){var e=$(this).text();$(this).removeClass("attributebold"),-1!=(e=e.toUpperCase()).indexOf(n)&&(i=1,""!=n&&$(this).addClass("attributebold"))}),0==i&&-1!=$(this).find('[elementid ^= "'+e+'_featuretable_"]').find(".FeatureNames").text().toUpperCase().indexOf(n)&&(i=1),0==i&&$(this).hide()}),$('[elementid ^= "'+e+'_optiondiv_"]').each(function(){var e=$(this).find(".optiontablenode"),t=$(this);e.each(function(){var e=$(this).find(".attribute"),i=0;e.each(function(){var e=$(this).text();$(this).removeClass("attributebold"),-1!=(e=e.toUpperCase()).indexOf(n)&&(i=1,""!=n&&$(this).addClass("attributebold"))}),0==i&&-1!=$(this).find(".FeatureNames").text().toUpperCase().indexOf(n)&&(i=1),0==i?$(this).hide():($(this).parent().parent().parent().show(),""!=n&&t.show())})})})},initialiseComponent:function(){var e=this.buildComponent(),t=this.iModelName;component=$(e).appendTo(this.parentDiv);var i=$('[id ^= "'+t+'_tag_"]'),n=$('[id ^= "'+t+'_input_"]');0==this.showOptions&&(i.hide(),n.hide()),this.addEvents(),this.collapseAllOptionPanels(),$("#"+t+"_tooltip").hide(),this.initialiseGenericSearchComponent()}}}),define("DS/CfgBaseUX/scripts/CfgController",["DS/PlatformAPI/PlatformAPI"],function(e){return{init:function(t,i,n){var o="";runYourApp="",myAppsUrl=e.getApplicationConfiguration("app.urls.myapps"),proxy=window.UWA.Data.proxies.passport?"passport":"ajax",o=o.substring(0,o.indexOf("/webapps")),myAppsUrl&&!runYourApp||(myAppsUrl=o);var s=(new Date).getTimezoneOffset();window.enoviaServerFilterWidget={sRealURL:o,baseURL:"",serviceName:"3DSpace",InterCom:UWA.Utils.InterCom,compassSocket:null,prefIntercomServer:null,compassSocketName:"",prefSocketName:"",arrOid:[],storageUrl:myAppsUrl,timezone:s,wsCallTimeout:3e4,mySecurityContext:"",proxy:proxy,myRole:"",contextUser:"",isNative:!1,fromIDCard:!1,referentialsSearchType:"",contextSearchType:"",proposedSearchType:"",datamodel:"new",project_space:"",mode:n,InstanceId:"",contextID:i,_getUrl:function(){return this.baseURL},computeUrl:function(e){return this._getUrl()+e},getSecurityContext:function(){return this.mySecurityContext},getRole:function(){return this.myRole},tenant:"",collabspace:null}}}}),define("DS/CfgBaseUX/scripts/CfgCAListViewToolbar",["DS/PlatformAPI/PlatformAPI","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS"],function(e,t){var i=Object.create(null);return i.toolbar=null,i.writetoolbarDefination=function(e){var n={entries:[{id:"ID_expandLeft",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"expand-left",fontIconFamily:1},category:"other",readOnly:!1,position:"near",action:{module:"DS/CfgBaseUX/scripts/CfgCAListController",func:"expandLeft"}},position:"far",children:[]},{id:"ID_cfgCAListHeaderlabel",className:"cfgCAListHeaderlabel",dataElements:{typeRepresentation:"string",readOnly:!0,value:e.toolbarHeaderLabel},touchMode:e.touchMode||!1,position:"near"},{id:"ID_1",dataElements:{typeRepresentation:"string",value:"",label:"",disabled:!1,readOnly:!1,placeholder:t.CfgLabelSearchCA,tooltip:t.CfgLabelSearchCA,overflowPriority:"none",displayLabel:!0,visibleFlag:!1},touchMode:!0,position:"far",children:[]},{id:"ID_2",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"search",fontIconFamily:1,className:""},tooltip:t.CfgLabelSearch,category:"other",readOnly:!1,action:{module:"DS/CfgBaseUX/scripts/CfgCAListViewToolbar",func:"inlineSearch"}},position:"far",children:[]}]};if(e.isCFGRoleAvail){var o={id:"ID_4",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"list-add",fontIconFamily:1},readOnly:!1,tooltip:t.CfgLabelAddtoCASummary,action:{module:"DS/CfgBaseUX/scripts/CfgCAListController",func:"addToSummaryView"},visibleFlag:!e.isFrozenCR},disabled:!0,position:"far",children:[]};n.entries.splice(4,0,o)}return i.pubSubEvents(),JSON.stringify(n)},i.inlineSearch=function(){var e=i.toolbarActionBar.getNodeModelByID("ID_1")._options.visibleFlag;i.toolbarActionBar.updateNodeModel("ID_1",{visibleFlag:!e}),document.getElementsByClassName("cfgcalist-toolbaroontainer")[0].getElementsByClassName("wux-ui-3ds-search")[0].toggleClassName("cfgactive-search")},i.pubSubEvents=function(){e.subscribe("CfgCAListSelection",function(e){"caSelectorView"==e.mode&&i.enableDisableButton(e.flag)}),e.subscribe("CfgCAListUnselection",function(e){"caSelectorView"==e.mode&&i.enableDisableButton(e.flag)})},i.enableDisableButton=function(e){i.toolbarActionBar,i.toolbarActionBar.updateNodeModel("ID_4",{disabled:e})},i}),define("DS/CfgBaseUX/scripts/CfgData",[],function(){var e=null;function t(){return this.Data={},this.Data.Models=[],this.Data.dictionaryBank=[],this.Data.clear=function(){this.dictionaryBank=[]},this.Data.renderTo=null,this.Data.addDictionaryByCriteria=function(e,t,i){var n=this.getDictionary(e);null===n&&(n={image:null,features:null,rvds:null,name:"Test",builds:null,rules:null,id:null,manufacturingPlans:null,type:"Model",milestones:null,products:null},this.dictionaryBank.push({id:e,dictionary:n})),"features"==i?(n.features=t.features,n.name=t.name,n.displayValue=t.displayValue):"products"==i?n.products=t.products:"milestones"==i?n.milestones=t.milestones:"manufacturingPlans"==i?n.manufacturingPlans=t.manufacturingPlans:"builds"==i&&(n.builds=t.builds)},this.Data.getDictionaryByCriteria=function(e,t){for(var i={},n=0;n<this.dictionaryBank.length;n++)if(e==this.dictionaryBank[n].id)return"features"==t?(i.features=this.dictionaryBank[n].dictionary.features,i.name=this.dictionaryBank[n].dictionary.name,i.displayValue=this.dictionaryBank[n].dictionary.displayValue):"products"==t?i.products=this.dictionaryBank[n].dictionary.products:"milestones"==t?i.milestones=this.dictionaryBank[n].dictionary.milestones:"manufacturingPlans"==t?i.manufacturingPlans=this.dictionaryBank[n].dictionary.manufacturingPlans:"builds"==t&&(i.builds=this.dictionaryBank[n].dictionary.builds),i;return i[t]=null,i},this.Data.addDictionary=function(e,t){null===this.getDictionary(e)&&this.dictionaryBank.push({id:e,dictionary:t})},this.Data.getDictionary=function(e){for(var t=0;t<this.dictionaryBank.length;t++)if(e==this.dictionaryBank[t].id)return this.dictionaryBank[t].dictionary;return null},this.Data}return null==e&&(e=new t),e}),define("DS/CfgBaseUX/scripts/CfgEvolutionRange",["UWA/Drivers/Alone","DS/Core/Core"],function(e,t){"use strict";return{getRange:function(e,t,i,n,o){var s={start:{name:e,revision:t,displayname:i,isRoot:n},end:[]};return o&&(s.start.IsExcluded=o),s.addLeaves=function(e,t,i,n){this.end.push({name:e,revision:t,displayname:i,IsExcluded:n})},s.buildXML=function(e){if(1==this.start.isRoot){var t='<Tree><Root Name = "'+this.start.name+'" Revision = "'+this.start.revision+'" DescId = "'+window.DescriptionCount+'" IsExcluded="false"/>',i='<TreeSeries DescId = "'+window.DescriptionCount+'" Revision = "'+this.start.revision+'" DisplayName="'+this.start.displayname+'"></TreeSeries>';if(e.iDescriptionTag.push(i),window.DescriptionCount++,this.end.length>0)for(var n=0;n<this.end.length;n++)t=t+'<Leaf Name="'+this.end[n].name+'" Revision="'+this.end[n].revision+'" DescId = "'+window.DescriptionCount+'" IsExcluded="'+this.end[n].IsExcluded+'" />',i='<TreeSeries DescId = "'+window.DescriptionCount+'" Revision = "'+this.end[n].revision+'" DisplayName="'+this.end[n].displayname+'"></TreeSeries>',e.iDescriptionTag.push(i),window.DescriptionCount++;return t+="</Tree>"}var o='<TreeSeries DescId = "'+window.DescriptionCount+'" Revision = "'+this.start.revision+'" DisplayName="'+this.start.displayname+'"/>';e.iDescriptionTag.push(o);var s='<Single Name = "'+this.start.name+'" Revision = "'+this.start.revision+'" DescId = "'+window.DescriptionCount+'"/>';return window.DescriptionCount++,s},s.buildMilestoneXML=function(){if(1==this.start.isRoot){var e='<Tree><Root Name = "'+this.start.name+'" IsExcluded="false"/>';if(this.end.length>0)for(var t=0;t<this.end.length;t++)e=e+'<Leaf Name="'+this.end[t].name+'" IsExcluded="'+this.end[t].IsExcluded+'" />';return e+="</Tree>"}return'<Single Name = "'+this.start.name+'"/>'},s.buildxRevisionXML=function(e){if(1==this.start.isRoot){var t='<Tree><Root Revision = "'+this.start.revision+'" IsExcluded="false"/>';if(this.end.length>0)for(var i=0;i<this.end.length;i++)t=t+'<Leaf Revision="'+this.end[i].revision+'" IsExcluded="'+this.end[i].IsExcluded+'" />';return t+="</Tree>"}return'<Single Revision = "'+this.start.revision+'"/>'},s}}}),define("DS/CfgBaseUX/scripts/CfgPropertiesView",["DS/EditPropWidget/EditPropComponent","DS/EditPropWidget/constants/EditPropConstants","DS/EditPropWidget/models/EditPropModel",,],function(e,t,i){return{createPropertiesComponent(n){this.options=n,this.cfgPropertiesComponent=new e({typeOfDisplay:t.ALL,selectionType:t.ALL_SELECTION,displayType:this.options.displayType?this.options.displayType:t.STANDARD,setCloseButton:!!this.options.setCloseButton&&this.options.setCloseButton,readOnly:!!this.options.readOnly&&this.options.readOnly,extraNotif:!!this.options.extraNotif&&this.options.extraNotif,editMode:!!this.options.editMode&&this.options.editMode});let o=(Array.isArray(this.options.itemID)?[...this.options.itemID]:[this.options.itemID]).map(e=>new i({tenant:enoviaServerFilterWidget.tenant,objectId:e}));this.options.parentDiv&&this.options.displayType===t.STANDARD?(this.cfgPropertiesComponent.initData(o),this.cfgPropertiesComponent.inject(this.options.parentDiv)):this.cfgPropertiesComponent.show(o)}}}),define("DS/CfgBaseUX/scripts/CfgSearchConfiguration",["UWA/Core","UWA/Utils/InterCom","UWA/Class/Model"],function(e,t,i){"use strict";var n=function(e,i){this.multiSelectVal=e,this.socketName="search_socket_"+(new Date).getTime(),this.socket=new t.Socket(this.socketName,{dispatchRetryInterval:5}),this.socket.subscribeServer("SearchComServer"),this.listener=this.objectsSelected.bind(this),this.socket.addListener("Selected_Objects_search",this.listener);var n=this.options();n.title=i,this.socket.dispatchEvent("RegisterContext",n)};return n.prototype.destroy=function(){var e={widget_id:"1234"};this.socket.dispatchEvent("unregisterSearchContext",e),this.socket.unsubscribeServer("SearchComServer"),this.socket.removeListener("Selected_Objects_search",this.listener),this.socket.disconnect()},n.prototype.options=function(e,t,i,n,o,s,a){var r={};r.title=e,r.multiSel=this.multiSelectVal,r.mode="furtive",r.app_socket_id=this.socketName,r.widget_id="1234",r.default_with_precond=!0,r.show_precond=!1,r.idcard_activated=!1,r.role=i,r.tenant=enoviaServerFilterWidget.tenant;var l=[];if(l.push(t),r.recent_search={types:l},t){r.precond="(",r.precond+='flattenedtaxonomies:"types/'+t+'"',r.precond+=")",a&&(r.precond="("+r.precond+" OR "+a+")"),null!=s&&""!=s&&(r.precond+=" AND ",r.precond+=s);for(var c="",d=0;d<o.length;d++)c=c+"NOT (physicalid:"+o[d]+")";""!=o&&(r.precond+=c)}else if(a){r.precond=a;c="";null!=s&&""!=s&&(r.precond+=" AND ",r.precond+=s);for(d=0;d<o.length;d++)c=c+" AND ( NOT (physicalid:"+o[d]+"))";""!=o&&(r.precond+=c)}else t||o||!s||(r.precond=s);return n&&(r.default_search_criteria=n),r},n.prototype.activate=function(e,t,i,n,o,s,a,r){var l=this.options(e,t,i,o,s,a,r);this.callback=n,this.socket.dispatchEvent("InContextSearch",l)},n.prototype.isAvailable=function(){return e.is(this.socket)},n.prototype.objectsSelected=function(e){var t=[];if(this.callback){for(var n=0;n<e.length;n++){var o=new i(e[n]);t.push(o)}this.callback(t)}},n}),define("DS/CfgBaseUX/scripts/CfgColumnManagerToolbar",["DS/PlatformAPI/PlatformAPI","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS"],function(e,t){var i=Object.create(null);return i.toolbar=null,i.writetoolbarDefination=function(e){var i={entries:[{id:"ID_Save",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"check",fontIconFamily:1},category:"other",readOnly:!1,position:"far",tooltip:t.CfgLabelApply,action:{module:"DS/CfgBaseUX/scripts/CfgColumnManagerToolbar",func:"onSaveClick"}},position:"far",children:[]},{id:"ID_Close",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"close",fontIconFamily:1},category:"other",readOnly:!1,position:"far",tooltip:t.CfgLabelClose,action:{module:"DS/CfgBaseUX/scripts/CfgColumnManagerToolbar",func:"onCancelClick"}},position:"far",children:[]}]};return JSON.stringify(i)},i.onSaveClick=function(e){e._event="SAVE",i.toolbar.onToolbarClickCallback(e)},i.onCancelClick=function(e){e._event="CLOSE",i.toolbar.onToolbarClickCallback(e)},i}),define("DS/CfgBaseUX/scripts/CfgUXEnvVariables",["UWA/Class","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json"],function(e,t){"use strict";return e.singleton({init:function(){this.configUXEnvVariables=JSON.parse(t)},getCfgUXEnvVariables:function(){return this.configUXEnvVariables}})}),define("DS/CfgBaseUX/scripts/CfgDialog",["UWA/Class/View","DS/CfgBaseUX/scripts/CfgData","DS/UIKIT/Input/Button","DS/Controls/Button","DS/ENOFloatingPanel/ENOFloatingPanel","DS/Windows/Dialog","DS/Windows/ImmersiveFrame","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json","css!DS/CfgBaseUX/styles/CfgDialog.css","css!DS/CfgAnalysisEffectivity/CfgAnalysisEffectivity.css"],function(e,t,i,n,o,s,a,r,l,c){"use strict";return e.extend({buttons:[],className:"target-container",id:"target-container",setup:function(){},init:function(e){this._parent(e),this.CfgUXEnvVariables=JSON.parse(r)},setTitle:function(e){1==this.CfgUXEnvVariables.isWUXDialogEnabled&&null!=this.WUXDialogObj&&(this.WUXDialogObj.title=e)},closeDialog:function(){1==this.CfgUXEnvVariables.isWUXDialogEnabled?this.WUXDialogObj.immersiveFrame.getModel().elements.container.destroy():this.CfgFloatingPanel.destroy(),"VariantInlineEditor"===this.options.mode&&t.cfgEffInlineEditorActionEvents.publish({event:"clearIteOptionsOnVarDialogClose"})},render:function(){this.buttons=null;var e=this,t=!0,r=null;this.container.setStyles({height:"100%"}),this.footerButton={};var l=null,c=!0;if(null!=this.options.touchMode&&0==this.options.touchMode&&!1,0==this.options.isResizable&&(c=!1),1==this.CfgUXEnvVariables.isWUXDialogEnabled?null!=this.options.dialogue.buttonArray&&this.options.dialogue.buttonArray.forEach(function(t){"CANCEL"==t.label.toUpperCase()||"NO"==t.label.toUpperCase()?e.footerButton.Cancel=new n({label:t.labelValue,onClick:function(){t.handler()}}):"OK"==t.label.toUpperCase()||"YES"==t.label.toUpperCase()||"CLOSE"==t.label.toUpperCase()?e.footerButton.Ok=new n({label:t.labelValue,onClick:function(){t.handler()}}):"APPLY"==t.label.toUpperCase()&&(e.footerButton.Apply=new n({label:t.labelValue,domId:"primaryButtonStyle",onClick:function(){t.handler()}}))}):null!=this.options.dialogue.buttonArray&&(this.buttons=[],this.options.dialogue.buttonArray.forEach(function(t){var n=new i({value:t.label,className:t.className,events:{onClick:function(){t.handler()}}});e.buttons.push(n)})),0==this.options.closable&&(t=!1),l=1==this.CfgUXEnvVariables.isWUXDialogEnabled&&("DashboardConfigurationContext"==this.options.mode||"caListDialog"==this.options.mode)?this.options.body:this,/Android|iPhone|IEMobile/i.test(navigator.userAgent)||(r=this.options.persistId),1==this.CfgUXEnvVariables.isWUXDialogEnabled){var d=new a;d.inject(this.options.dialogue.target),e.WUXDialogObj=new s({title:this.options.dialogue.header,content:l,immersiveFrame:d,resizableFlag:c,closeButtonFlag:t,modalFlag:void 0===this.options.modalFlag||this.options.modalFlag,identifier:r,width:this.options.width,height:this.options.height,minHeight:this.options.minHeight||406,minWidth:this.options.minWidth||320,buttons:this.footerButton,titleBarVisibleFlag:!1!==this.options.titleBarVisibleFlag||this.options.titleBarVisibleFlag}),!0===this.options.maximizedFlag&&(e.WUXDialogObj.maximizedFlag=!0),"EditEvolution"==this.options.mode&&e.WUXDialogObj.elements.container.classList.add("CfgWUXDailogSessionEvolution"),"SelectByConfigCriteria"==this.options.mode&&e.WUXDialogObj.elements.container.classList.add("CfgWUXSelectByConfigurationCriteriaDlg"),e.WUXDialogObj.addEventListener("close",function(t){null!=e.options.dialogue.postCrossHandler&&"undefined"!=e.options.dialogue.postCrossHandler?e.options.dialogue.postCrossHandler():e.closeDialog()})}else this.CfgFloatingPanel=new o({className:"Cfg"+this.options.mode+"Dialog",title:this.options.dialogue.header,body:this,overlay:!0,closable:t,animate:!1,resizable:!0,footer:this.buttons,persistId:r,appNamePosition:0,events:{onClose:function(){null!=e.options.dialogue.postCrossHandler&&"undefined"!=e.options.dialogue.postCrossHandler?e.options.dialogue.postCrossHandler():e.closeDialog()},onHide:function(){null!=e.options.dialogue.postCloseHandler&&"undefined"!=e.options.dialogue.postCloseHandler&&e.options.dialogue.postCloseHandler()}}}),this.CfgFloatingPanel.inject(this.options.dialogue.target),this.CfgFloatingPanel.show(),/Android|iPhone|IEMobile/i.test(navigator.userAgent)&&this.CfgFloatingPanel.centerIt(),widget.addEvent("onResize",function(){})}})}),define("DS/CfgBaseUX/scripts/CfgUtility",["DS/CfgBaseUX/scripts/CfgController","DS/WAFData/WAFData","DS/i3DXCompassServices/i3DXCompassServices","DS/i3DXCompassPlatformServices/i3DXCompassPlatformServices","DS/CfgTracker/CfgTracker","DS/CfgTracker/CfgDimension","DS/CfgBaseUX/scripts/CfgData","DS/Notifications/NotificationsManagerUXMessages","DS/Notifications/NotificationsManagerViewOnScreen","DS/PlatformAPI/PlatformAPI","UWA/Date","DS/CfgBaseUX/scripts/CfgDialog","DS/Controls/Toggle","DS/UWPClientCode/I18n","DS/CfgBaseUX/scripts/CfgUXEnvVariables","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json"],function(e,t,i,n,o,s,a,r,l,c,d,u,p,g,m,h,f,v){var C={checkProperties:function(e){return new Promise(function(t,i){var n={version:"1.0",types:e},o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/definitionServices/checkProperties","POST","enovia","application/json",o,function(e){t(e)},function(e){i(e)},!0)})},sendConfgurationCommandsClickEventForMagicProbes:function(e){let t=e.AppId,i=e.AppName,n=e.CommandName,a=e.CommandOperation,r=e.ConfigMode,l=e.ApplicationMode,c=n+"\\"+a+"\\"+r+"\\"+l;o.createEventBuilder({category:o.Category.USAGE,action:o.Events.CLICK,tenant:enoviaServerFilterWidget.tenant}).setLabel(o.Labels.CONFIGURATION_COMMANDS_CLICK).setAppId(t).addDimension(s.CONFIGURATION_COMMANDS_CLICK.CONFIGURATION_COMMANDS_APPID,t).addDimension(s.CONFIGURATION_COMMANDS_CLICK.CONFIGURATION_COMMANDS_APPNAME,i).addDimension(s.CONFIGURATION_COMMANDS_CLICK.CONFIGURATION_COMMANDS_COMMANDID,n).addDimension(s.CONFIGURATION_COMMANDS_CLICK.CONFIGURATION_COMMANDS_OPERATION,a).addDimension(s.CONFIGURATION_COMMANDS_CLICK.CONFIGURATION_COMMANDS_CONFIG_MODE,r).addDimension(s.CONFIGURATION_COMMANDS_CLICK.CONFIGURATION_COMMANDS_APPLICATION_MODE,l).addDimension(s.CONFIGURATION_COMMANDS_CLICK.CONFIGURATION_COMMANDS_PATH,c).send()},sendConfgurationCommandsPageViewForMagicProbes:function(e){let t=e.AppId||"cfgAppId",i=e.CommandName||"cfgCommandName",n=window.location.href||"cfgPageViewURL",a=window.widget.lang||"en";o.createPageBuilder({url:n,tenant:enoviaServerFilterWidget.tenant}).setAppId(t).setTitle(i).setLanguage(a).addDimension(s.CONFIGURATION_COMMANDS_CLICK.CONFIGURATION_COMMANDS_APPID,t).send()},getFrozenCheck:function(e){return new Promise(async(t,i)=>{let n=[];if(0==e.length)return void t(e);e.forEach(e=>{n.push(e.instanceId)});let o=await this.instancesBelongToFrozenEvolution(n).catch(e=>{console.log("instancesBelongToFrozenEvolution webservice has failed with below error:\n "),console.error(e),i()});this.isDefined(o)&&this.isDefined(o.resources)&&0!=o.resources.length||(console.log("instancesBelongToFrozenEvolution webservice is success but there is no response as expected."),i()),o&&o.resources.forEach((t,i)=>{"Yes"===t.isFrozenEvolution?e[i].isFrozen=!0:"No"===t.isFrozenEvolution&&(e[i].isFrozen=!1)}),t(e)})},getFrozenEffectivityDetails:function(e){var t=this;return new Promise(function(i,n){var o={version:"2.0",targetFormat:"XML",withDescription:"YES",view:"All",domains:"All",pidList:e.pidList};t.getMultipleFilterableObjectInfo(o).then(async function(e){var n=[];for(var o in e.expressions)e.expressions.hasOwnProperty(o)&&("YES"==e.expressions[o].hasEffectivity&&null!=e.expressions[o].content.Evolution&&null!=e.expressions[o].content.Evolution.Current&&""!=e.expressions[o].content.Evolution.Current?null!=e.expressions[o].content.Variant&&""!=e.expressions[o].content.Variant?n.push({instanceId:o,evolutionXML:e.expressions[o].content.Evolution.Current,AvailableDomainDetails:"ALL"}):n.push({instanceId:o,evolutionXML:e.expressions[o].content.Evolution.Current,AvailableDomainDetails:"Evolution"}):"YES"==e.expressions[o].hasEffectivity?null!=e.expressions[o].content.ConfigChange&&"undefined"!=e.expressions[o].content.ConfigChange?n.push({instanceId:o,evolutionXML:null,AvailableDomainDetails:"ConfigChange"}):n.push({instanceId:o,evolutionXML:null,AvailableDomainDetails:"Variant"}):"NO"==e.expressions[o].hasEffectivity?n.push({instanceId:o,evolutionXML:null,AvailableDomainDetails:"NoEff"}):"ERROR"==e.expressions[o].hasEffectivity&&n.push({instanceId:o,evolutionXML:null,AvailableDomainDetails:"UnsupportedType"}));var s=await t.getFrozenCheck(n);i(s)},function(e){return n.reject(e)})})},getProductConfigurations:function(e){return new Promise(function(t,i){var n={version:"1.0",instanceIdList:e.instanceIdList},o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/navigationServices/getStaticMapping?cfgConf=1","POST","enovia","application/json",o,function(e){t(e)},function(e){i(e)},!0,null)})},getContextMisMatchCheck:function(e){var t=e.iResponse,i=e.iAuthoringContext,n=[];if(i&&i.AuthoringContextHeader)for(var o in i.AuthoringContextHeader)n.push({key:o,value:i.AuthoringContextHeader[o]});if(n.length>0&&"DS-Configuration-Authoring-Context"==n[0].key){var s=[],a=(new DOMParser).parseFromString(i.evolution.expression,"text/xml").getElementsByTagName("Expression");if(a.length>0){for(var r=0;r<t.contexts.content.results.length;r++)for(var l=t.contexts.content.results[r],c=l.basicData.length-1;c>0;c--)if("name"==l.basicData[c].name){s.push(l.basicData[c].value[0]);break}for(var d=0;d<a[0].getElementsByTagName("Context").length;d++){var u=a[0].getElementsByTagName("Context")[d].attributes.HolderName.value;if(-1==s.indexOf(u))return!0}}}return!1},getContextMisMatchWithAuthoringCTXCheck:function(e){let t=e.iAuthoringContext,i=[];if(t&&t.AuthoringContextHeader)for(let e in t.AuthoringContextHeader)i.push({key:e,value:t.AuthoringContextHeader[e]});if(i.length>0&&"DS-Configuration-Authoring-Context"==i[0].key){let i=[],n=(new DOMParser).parseFromString(t.evolution.expression,"text/xml").getElementsByTagName("Expression");if(n.length>0){if(e.contextData)for(let t=0;t<e.contextData.length;t++){let n=e.contextData[t];for(let e=n.basicData.length-1;e>0;e--)if("name"==n.basicData[e].name){i.push(n.basicData[e].value[0]);break}}for(let e=0;e<n[0].getElementsByTagName("Context").length;e++){let t=n[0].getElementsByTagName("Context")[e].attributes.HolderName.value;if(-1==i.indexOf(t))return!0}}}return!1},isChangeControlled:function(e){return new Promise(function(t,i){var n="pid:"+e,o=[];o.push(n);var s={ObjectsListForGetChangeControl:o},a=JSON.stringify(s);C.makeWSCall("/resources/modeler/change/changecontrol","POST","enovia","application/json",a,function(e){e&&e.objectListChangeControlled[0]&&t(e.objectListChangeControlled[0].changeControlValue)},function(e){i(e)},!0)})},isChangeControlledList:function(e){return new Promise(function(t,i){var n=[];e.forEach(function(e){n.push("pid:"+e.id)});var o={ObjectsListForGetChangeControl:n},s=JSON.stringify(o);C.makeWSCall("/resources/modeler/change/changecontrol","POST","enovia","application/json",s,function(e){t(e)},function(e){i(e)},!0)})},isChangeControlledObjectAvailable:function(e){var t=e.objectListChangeControlled,i=[];return t.forEach(function(e){e.changeControlValue&&"none"!=e.changeControlValue&&(console.log("ca controlled"),i.push(e.changeControlValue))}),i.length},sendNotificationWebInWin:function(e){var t=e.eventName,i=JSON.stringify(e);enoviaServerFilterWidget.cfgWIWTraces&&console.log("sendNotificationWebInWin -"+i),"undefined"!=typeof dscef?dscef.sendString(t+"="+i):"undefined"!=typeof CATCefSendString?CATCefSendString(t+"="+i):c.publish("webinwin:web:notification",t+"="+i)},setVariantforExternal:function(e){return new Promise(function(t,i){var n=JSON.stringify(e);C.makeWSCall("/resources/modeler/configuration/as-stream/filterable/setVariant","POST","enovia","application/json",n,function(e){t(e)},function(e){i(e)},!0)})},unsetVariantforExternal:function(e){return new Promise(function(t,i){var n=JSON.stringify(e);C.makeWSCall("/resources/modeler/configuration/as-stream/filterable/unsetVariant","POST","enovia","application/json",n,function(e){t(e)},function(e){i(e)},!0)})},getEffectivityContentforExternal:function(e){return new Promise(function(t,i){var n=JSON.stringify(e);C.makeWSCall("/resources/modeler/configuration/as-stream/filterable/getEffectivityContent","POST","enovia","application/json",n,function(e){t(e)},function(e){i(e)},!0)})},unsetVariantEffectivities:function(e){return new Promise(function(t,i){var n={version:e.version,unsetList:e.unsetList},o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/authoringServices/unsetVariantEffectivities","POST","enovia","json",o,function(e){t(e)},function(e,t){i(t)},!0,e.wsOptions)})},unsetEvolutionEffectivities:function(e){return new Promise(function(t,i){var n={version:"2.0",unsetList:[e.instanceID]},o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/authoringServices/unsetEvolutionEffectivities","POST","enovia","json",o,function(e){t(e)},function(e,t){i(t)},!0,e.wsOptions)})},pasteVariantEffectivities:function(e){return new Promise(function(t,i){var n={version:e.version,output:{targetFormat:"XML",domains:e.domain,view:e.view,targetFormat:e.targetFormat},pidList:e.instanceIdList,VariantContent:e.expressionList[0].content},o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/authoringServices/pasteVariantEffectivities?traces=0&perfo=0 HTTP/1.1","POST","enovia","application/json",o,function(e){t(e)},function(e){i(e)},!0,e.wsOptions)})},setEvolutionEffectivities:function(e){return new Promise(function(t,i){var n={version:e.version,output:{targetFormat:"XML",view:e.view,domain:e.domain},expressionList:e.expressionList},o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/authoringServices/setEvolutionEffectivities?traces=0&perfo=0 HTTP/1.1","POST","enovia","application/json",o,function(e){t(e)},function(e,t){i(t)},!0,e.wsOptions)})},setVariantEffectivities:function(e){return new Promise(function(t,i){var n={version:e.version,output:{targetFormat:"XML",domains:e.domain,view:e.view},expressionList:e.expressionList},o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/authoringServices/setVariantEffectivities?traces=0&perfo=0 HTTP/1.1","POST","enovia","application/json",o,function(e){t(e)},function(e,t){i(t)},!0,e.wsOptions)})},isEmptyEvolutionExpressionForModel:function(e){return isEmptyEvolutionExpression=!0,(this.isParamDefined(e.get("expression").xmlExpression)||this.isParamDefined(e.get("expression").impXml)||this.isParamDefined(e.get("expression").iUnitXml)||this.isParamDefined(e.get("expression").iDateXml))&&(isEmptyEvolutionExpression=!1),isEmptyEvolutionExpression},getMultipleFilterableObjectInfo:function(e){return new Promise(function(t,i){var n={version:e.version,output:{targetFormat:e.targetFormat,withDescription:e.withDescription,view:e.view,domains:e.domains},pidList:e.pidList};null!=e.configurationRev&&""!=e.configurationRev&&("string"==typeof e.configurationRev||e.configurationRev instanceof String?n.configurationRev=e.configurationRev:n.configurationRev=e.configurationRev.configRevision[0].id);var o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/navigationServices/getMultipleFilterableObjectInfo","POST","enovia","application/json",o,function(e){t(e)},function(e){console.log(e),i(e)},!0,null)})},getConfiguredObjectInfo:function(e){return new Promise(function(t,i){var n="/resources/modeler/configuration/navigationServices/getConfiguredObjectInfo/pid:"+e.parentID+"?cfgCtxt=1&enabledCriteria=1&version=1.2";C.makeWSCall(n,"GET","enovia","application/ds-json","",function(e){t(e)},function(e){console.log(e),i(e)},!0)})},checkMilestoneActivation:function(){var e=this;return new Promise(function(t,i){var n=JSON.stringify({version:"1.0",settings:["milestoneActivation"]});e.makeWSCall("/resources/modeler/configuration/settingsServices/getConfigurationSettings?traces=0&perfo=0","POST","enovia","application/json",n,function(e){var i="Enabled";e.settings.forEach(function(e){"milestoneActivation"==e.settingName&&"disabled"==e.value&&(i="Disabled")}),t(i)},function(e){i(e)},!0)})},checkDecouplingActivation:function(){var e=this;return new Promise(function(t,i){if(a.configurationSettings)t(a.configurationSettings);else{var n=JSON.stringify({version:"1.0",settings:["DecoupleVariantEvolution","unitActivation","contextualDateActivation","DisableEditVariantInWebApp","StaticMappingActivation","xRevisionActivation"]});e.makeWSCall("/resources/modeler/configuration/settingsServices/getConfigurationSettings?traces=0&perfo=0","POST","enovia","application/json",n,function(e){a.getConfigurationSettingsResponse=e;let i=m.getCfgUXEnvVariables();i.xRevisionActivation=!1;var n={decoupling:!0,unit:!0,contextualDate:!0,isEditVariantEnabled:!0,xRevisionActivation:!1};e.settings.forEach(function(e){"decoupleVariantEvolution"==e.settingName&&"disabled"==e.value&&(n.decoupling=!1),"unitActivation"==e.settingName&&"disabled"==e.value&&(n.unit=!1),"contextualDateActivation"==e.settingName&&"disabled"==e.value&&(n.contextualDate=!1),"DisableEditVariantInWebApp"==e.settingName&&e.value&&"object"==typeof widget&&widget.data&&widget.data.appId&&e.value.split(",").forEach(e=>{e===widget.data.appId&&(n.isEditVariantEnabled=!1)}),"xRevisionActivation"==e.settingName&&"enabled"===e.value&&(n.xRevisionActivation=!0,i.xRevisionActivation=!0)}),a.configurationSettings=n,t(n)},function(e){i(e)},!0)}})},getDisabledEditVariantStatus:async function(){try{await C.populate3DSpaceURL(),await C.populateSecurityContext();let e=await C.checkDecouplingActivation();e&&!1===e.isEditVariantEnabled?a.isEditVariantEnabled=!1:a.isEditVariantEnabled=!0}catch(e){a.isEditVariantEnabled=!0}},setCfgSecurityContext:function(e){var t="";if("object"==typeof widget&&null!=widget.data&&null!=widget.data&&null!=widget.data.appId&&null!=widget.data.appId&&"DELMFN_AP"==widget.data.appId&&null!=widget.getValue("Credentials")?t=widget.getValue("Credentials"):"object"==typeof widget&&null!=widget.getValue("xPref_CREDENTIAL")?t=widget.getValue("xPref_CREDENTIAL"):null!=e&&null!=e&&""!=e&&e.hasOwnProperty("SecurityContext")&&(t=e.SecurityContext),""!=t){var i="";0!=t.indexOf("ctx::")&&(i="ctx::"),t=i+t,console.log("Setting security Context: "+t),enoviaServerFilterWidget.mySecurityContext=t,t=t.replace("ctx::",""),enoviaServerFilterWidget.myRole=t.substring(0,t.indexOf(".")),enoviaServerFilterWidget.collabspace=t.substring(t.lastIndexOf(".")+1,t.length)}else C.showwarning(h.CFGSCUserPreferences,"error")},populateChangeActionAccess:function(e){var t=this;return new Promise(function(i,n){var o="/resources/modeler/change/access/pid:"+e;t.makeWSCall(o,"GET","enovia","application/json","",function(e){a.ChangeAccessDetails=e,i(e)},n,!0)})},populateChangeOrderOrChangeRequestAccess:function(e,t){return new Promise((i,n)=>{let o="Change Order"===t?`/resources/v1/chguxservices/changeorder/${e}/access`:`/resources/v1/chguxservices/changerequest/${e}/access`;this.makeWSCall(o,"GET","enovia","application/json","",e=>{let n={};"Change Order"===t&&this.isDefined(e.data[0].dataelements)?n=e.data[0].dataelements:"Change Request"===t&&this.isDefined(e.data[0])&&(n=e.data[0]),a.ChangeAccessDetails=n,i(e)},n,!0)})},populateSecurityContext:function(){var e=this;return new Promise(function(t,i){e.makeWSCall("/resources/pno/person/getsecuritycontext","GET","enovia","application/json","",function(i){e.setCfgSecurityContext(i),t(i)},i,!0)})},populateDisplayExpressionXSLT:function(){var e=this;return new Promise(function(t,i){e.makeWSCall("/resources/modeler/configuration/navigationServices/getConfiguredExpressionXSLT","GET","enovia","application/json","",function(e){a.displayExpressionXSLT=e.xslt.content,t(e)},i,!0)})},showwarning:function(e,t,i="Medium",n){window.notifs=r,l.setNotificationManager(window.notifs),l.setStackingPolicy(9),"Slow"===i?l.setFadeOutPolicy(WUXNotificationsOnScreenFadeOutPolicy.Slow):"Fast"===i?l.setFadeOutPolicy(WUXNotificationsOnScreenFadeOutPolicy.Fast):l.setFadeOutPolicy(WUXNotificationsOnScreenFadeOutPolicy.Medium),n&&l.inject(n);var o={level:t,title:"",subtitle:e,message:"",sticky:!1};window.notifs.addNotif(o)},showNotifs:function(e,t,i,n,o){window.notifs=r,l.setNotificationManager(window.notifs),l.setStackingPolicy(9),o&&l.inject(o);var s={level:e,title:t,subtitle:i,message:n};window.notifs.addNotif(s)},getDisplayExpressionUsingXSLT:function(e,t="CompactView"){var i=null;if("ActiveXObject"in window){var n=new ActiveXObject("Msxml2.DOMDocument.3.0");n.async=!1,n.resolveExternals=!1,n.loadXML(e);var o=new ActiveXObject("Msxml2.XSLTemplate"),s=new ActiveXObject("Msxml2.FreeThreadedDOMDocument");return s.async=!1,s.loadXML(a.displayExpressionXSLT),o.stylesheet=s,(i=o.createProcessor()).input=n,i.transform(),i.output}var r=new DOMParser,l=r.parseFromString(a.displayExpressionXSLT,"text/xml"),c=r.parseFromString(e,"text/xml");return(i=new XSLTProcessor).setParameter(null,t,"true"),i.importStylesheet(l),i.transformToFragment(c,document).textContent},escapeSpecialCharacters:function(e){return Array.isArray(e)?e.map(e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")):"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):e},escapeforJsonParser:function(e){return Array.isArray(e)?e.map(e=>e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')):"string"==typeof e?e.replace(/\\/g,"\\\\").replace(/"/g,'\\"'):e},getChangeUrl:function(e,t){var i={"Change Action":"/resources/modeler/change/changeaction/pid:"+e+"?applicability=1",Decision:"/resources/ecm/modeler/decision/pid:"+e+"/setapplicability","Change Order":"/resources/ecm/modeler/changeorder/pid:"+e+"/setapplicability"};return"GET"==t?{"Change Action":"/resources/modeler/change/changeaction/pid:"+e+"?applicability=1&changeOrder=1",Decision:"/resources/ecm/modeler/decision/pid:"+e+"/getapplicability","Change Order":"/resources/ecm/modeler/changeorder/pid:"+e+"/getapplicability"}[a.type]:"PUT"==t?i[a.type]:void 0},getChangeApplicability:e=>new Promise((t,i)=>{C.makeWSCall(e,"GET","enovia","application/json",JSON.stringify(""),e=>t(e),e=>i(e),!0)}),fetchApplicabilityFrom:e=>new Promise((t,i)=>{C.makeWSCall(`/resources/cfgux/changeServices/fetchApplicabilityFrom?$id=${e}`,"GET","enovia","application/json",JSON.stringify(""),e=>t(e),e=>i(e),!0)}),populate3DSpaceURL:function(){return new Promise(function(e,t){var i="";if(wMode=enoviaServerFilterWidget.mode,"3DSpace"==wMode){if(void 0===window.__karma__){for(var o=top;o&&(null==o.x3DPlatformServices||""==o.x3DPlatformServices);)o.opener&&(o=o.opener.top);o&&o.x3DPlatformServices&&(o.x3DPlatformServices,i=o.x3DPlatformServices[0]["3DCompass"])}}else i="";n.getPlatformServices({config:{myAppsBaseUrl:i,userId:"userId",lang:"lang"},onComplete:function(t){for(count=0;count<t.length;count++)enoviaServerFilterWidget.tenant==t[count].platformId&&(enoviaServerFilterWidget.baseURL=t[count]["3DSpace"],enoviaServerFilterWidget.federatedURL=t[count]["3DSearch"]);e()},onFailure:t})})},fillVariantDictionaryWithDisplayName:function(e,t){for(var i=e,n=0;n<i.Combinations.length;n++)for(var o=0;o<i.Combinations[n].Combination.length;o++){var s=i.Combinations[n].Combination[o].Feature.DescId,a=this.getDisplayNameOfFeatureOrOption(s,t);if(null!=a){i.Combinations[n].Combination[o].Feature.label=a;let e=this.getTypeOfFeature(a,t);i.Combinations[n].Combination[o].Feature.featureType=e}for(var r=0;r<i.Combinations[n].Combination[o].Options.length;r++){var l=i.Combinations[n].Combination[o].Options[r].Option.DescId,c=this.getDisplayNameOfFeatureOrOption(l,t);null!=c&&(i.Combinations[n].Combination[o].Options[r].Option.label=c)}}return i},getDisplayNameOfFeatureOrOption:function(e,t){for(var i=0;i<t.length;i++)if(t[i].DescId==e)return t[i].DisplayName;return null},getTypeOfFeature:function(e,t){for(var i=0;i<t.length;i++)if(t[i].DisplayName==e)return t[i].featureType;return""},makeWSCall:function(e,i,n,o,s,a,r,l,c,d){c=c||null;var u=o;o&&"application/x-www-form-urlencoded"==o&&(u="*/*");var p=enoviaServerFilterWidget.mode,m="";m=null!=c&&null!=c.isfederated?enoviaServerFilterWidget.federatedURL+e:enoviaServerFilterWidget.computeUrl(e);var h=(new Date).getTime();m=-1==m.indexOf("?")?m+"?tenant="+enoviaServerFilterWidget.tenant+"&timestamp="+h:m+"&tenant="+enoviaServerFilterWidget.tenant+"&timestamp="+h,l=void 0===l||l;var f=enoviaServerFilterWidget.getSecurityContext(),v="",C={};C.method=i,C.async=l,C.timeout=6e5,null==d&&null==d||(C.timeout=d),C.type="json","Native"==p||"3DSpace"==p?C.headers=f?{Accept:"application/json","Content-Type":o,SecurityContext:f}:{Accept:u,"Content-Type":o}:(n&&(C.auth={passport_target:n}),C.proxy=enoviaServerFilterWidget.proxy,C.headers=f?{Accept:u,"Content-Type":o,SecurityContext:f}:{Accept:u,"Content-Type":o},window.widget?widget.lang&&(v=widget.lang,C.headers["Accept-Language"]=v):g.getCurrentLanguage()&&(C.headers["Accept-Language"]=g.getCurrentLanguage())),C.data=s,C.onComplete=a,C.onFailure=r,C.onTimeout=function(){console.log("Timedout for url: "+m)},null!=c&&null!=c.operationheader&&(C.headers[c.operationheader.key]=c.operationheader.value),null!=c&&null!=c.isfederated&&delete C.headers.SecurityContext,t.authenticatedRequest(m,C)},onSearchOK:function(e){console.log(e)},getEventResponse:function(e){for(var t=e,i=0;i<t.results.length;i++)null!=t.results&&null!=t.results[i].existing&&null!=t.results[i].existing.content&&(null!=t.results[i].existing.content.Variant&&t.results[i].existing.content.Variant.length>0&&(t.results[i].existing.content.Variant=t.results[i].existing.content.displayExpression,delete t.results[i].existing.content.displayExpression),null!=t.results[i].existing.content.Evolution&&(t.results[i].existing.content.Evolution.Current=t.results[i].existing.content.Evolution.currentDisplayExpression,t.results[i].existing.content.Evolution.Projected=t.results[i].existing.content.Evolution.projectedDisplayExpression,delete t.results[i].existing.content.Evolution.currentDisplayExpression,delete t.results[i].existing.content.Evolution.projectedDisplayExpression)),null!=t.results&&null!=t.results[i].new&&null!=t.results[i].new.content&&null!=t.results[i].new.content.Variant&&(t.results[i].new.content.Variant=t.results[i].new.content.displayExpression,delete t.results[i].new.content.displayExpression);return t},publishPostProcessingEventForApplications:function(e){c.publish("cfgEffectivityModifications_"+e.widgetId,JSON.stringify(e))},getLegacyCfgDico:function(e,t,i){return new Promise(function(n,o){if(1==i)var s="/resources/modeler/browsing/modelversion/pid:"+e+"/configurationdictionary?";else s="/resources/modeler/browsing/browseservice/pid:"+e+"/configurationdictionary?";s+="cloudView=1&features=1&onlyAllocated=1&version=1.0",C.makeWSCall(s,"POST","enovia","application/x-www-form-urlencoded",t,function(e){n(e)},function(e){o(e)},!0)})},getAvailableFeaturesAndOptions:function(e){return new Promise((t,i)=>{let n={version:e.version,referencePID:e.referencePID,modelPIDs:e.modelPIDs};e.instances&&(n.instances=e.instances),e.workUnderCompiledForm&&(n.workUnderCompiledForm=e.workUnderCompiledForm),n=JSON.stringify(n),C.makeWSCall("/resources/modeler/configuration/navigationServices/getAvailableFeaturesAndOptions","POST","enovia","application/ds-json",n,function(e){t(e)},function(e){i(e)},!0,e.wsHeaderOptions)})},getDictionaryFromServer:function(e,t,i,n){return new Promise(function(o,s){var a="/resources/modeler/browsing/browseservice/pid:"+e+"/configurationdictionary?"+t+"=1";null==i&&null==i||(a+="&attributes="+i);var r=function(e){o(e)},l=function(e){s(e)};n&&""!=n?C.makeWSCall(a,"POST","enovia","application/x-www-form-urlencoded",n,r,l,!0):C.makeWSCall(a,"POST","enovia","application/x-www-form-urlencoded","productstates",r,l,!0)})},getAvailableDemainDetails:function(e,t){return new Promise(function(i,n){var o;o={version:"1.0",pidList:e};var s=JSON.stringify(o);C.makeWSCall("/resources/modeler/configuration/expressionServices/getAvailableDomains","POST","enovia","json",s,function(e){var n,o=t.get().getPADTreeDocument().getSelectedNodes(),s=o.length,a=[],r=[],l=[],c=[],d=[];for(n=0;n<s;n++){var u=o[n].options.relationid;null!=e[u]&&1==e[u].length&&"NoEff"==e[u].toString()&&a.push(u),null==e[u]||1!=e[u].length||"ConfigChange"!=e[u].toString()&&"UnsupportedType"!=e[u].toString()||r.push(u),null!=e[u]&&1==e[u].length&&"Variant"==e[u].toString()&&l.push(u),null!=e[u]&&1==e[u].length&&"Evolution"==e[u].toString()&&c.push(u),null!=e[u]&&2==e[u].length&&d.push(u)}var p={};p.emptyEffectivity=a,p.configChageList=r,p.availableVariantList=l,p.availableVariantAndEvolutionList=d,p.availableEvolutionList=c,i(p)},function(e){n(e)},!0)})},getpcImage:function(e){return new Promise(function(t,i){var n={physicalid:e,label:"test"},o=JSON.stringify(n);C.makeWSCall("/cvservlet/fetch/v2","POST","enovia","application/json",o,function(e){t(e)},function(e){i(e)},!0)})},rolesAvailable:function(t){var i={isCFGRoleAvail:!1,isCHGRoleAvail:!1,isCSVRoleAvail:!1};if(this.isDefined(window.enoviaServerFilterWidget)&&"Native"==window.enoviaServerFilterWidget.mode)enoviaServerFilterWidget.rolesData?(i.isCFGRoleAvail=enoviaServerFilterWidget.rolesData.isCFGRoleAvail,i.isCHGRoleAvail=enoviaServerFilterWidget.rolesData.isCHGRoleAvail,i.isCSVRoleAvail=enoviaServerFilterWidget.rolesData.isCSVRoleAvail,t(i)):(i.isCFGRoleAvail=!0,i.isCHGRoleAvail=!0,i.isCSVRoleAvail=!0,t(i));else{var o=function(e){var n=["UWE","UXG","UWR","IWR","UWD","UWG","UWU","UWT","UWS","UWA","CAP","CHG","COR","DAR","FCD","FME","FRA","FTM","GLS","PDA","PDE","PDM","PPE","QUC","SPM","TRM","UWE","UXG","ENO_ECM_TP","InternalDS"],o=["UWE","UWG","CDN","CFG","CH2","CH5","CMM","COD","COX","CTP","DPM","EEW","GLR","MBO","PDA","PDM","QUM","REM","SAZ","SDZ","SMZ","SPJ","SPM","SPV","TRM","UWE","UXG","InternalDS"],s=["CSV","InternalDS"];e.forEach(function(e){n.indexOf(e.id)>=0&&e.platforms.indexOf(enoviaServerFilterWidget.tenant)>=0&&(i.isCHGRoleAvail=!0),o.indexOf(e.id)>=0&&e.platforms.indexOf(enoviaServerFilterWidget.tenant)>=0&&(i.isCFGRoleAvail=!0),s.indexOf(e.id)>=0&&e.platforms.indexOf(enoviaServerFilterWidget.tenant)>=0&&(i.isCSVRoleAvail=!0)}),t(i)};void 0!==window.enoviaServerFilterWidget&&""!==window.enoviaServerFilterWidget.tenant?n.getGrantedRoles(o):(void 0===window.enoviaServerFilterWidget&&e.init(),widget.getValue("x3dPlatformId")?window.enoviaServerFilterWidget.tenant=widget.getValue("x3dPlatformId"):window.enoviaServerFilterWidget.tenant="OnPremise",n.getGrantedRoles(o))}},isDefined:function(e){return void 0!==e&&null!=e},isParamDefined:function(e){return void 0!==e&&null!=e&&""!=e},isAdditionalConsoleLog:function(){return!0},convertMillisectoDate:function(e){var t=parseInt(e);return isNaN(t)?null:new Date(t)},getDateObject:function(e){if(""!=e){var t=[];if(-1!=e.indexOf("-")?t=e.split("-"):-1!=e.indexOf("/")?t=e.split("/"):-1!=e.indexOf(".")&&(t=e.split(".")),3!=t.length)return 0;var i=parseInt(t[0]),n=parseInt(t[1])-1,o=parseInt(t[2]);return new Date(i,n,o)}},convertMillisectoDateOnly:function(e){var t=parseInt(e);if(isNaN(t))return null;var i=new Date(t);return d.strftime(i,"%Y-%m-%d")},getVariantModelJSON:function(e,t,i,n){Array.isArray(e)&&(e=e[0]),Array.isArray(t)&&(t=t[0]);for(var o={name:e,displayValue:t,Combinations:[]},s=0;s<i.length;s++){var a=JSON.parse(i[s]);if(a.name==e){a.Combinations.length>0&&(o=this.fillVariantDictionaryWithDisplayName(a,n));break}}return o},getCRColumnInfo:function(e){let t=[];if(null!=e.crInfo){let i=new Map,n=new Map;e.crInfo.versions.filter(e=>e.father).forEach(e=>{n.set(e.id,e.father.id),i.set(e.father.id,e)}),e.pIds.forEach((e,o)=>{t.push({pid:e,type:" ",name:" ",revision:" ",crID:" ",maturity:" ",children:[]});let s=i.get(e);s&&(t[o]={pid:e,type:s.type,name:s.name,revision:s.revision,crID:s.id,maturity:s.current,children:s.children?s.children.map(e=>({childCrID:e.id,ChildPid:n.get(e.id),parentCrID:s.id})):[]})})}return console.log("oResponse ",t),t},getCRInformation:function(e){var t=e.configurationRevisionId;return new Promise(function(e,i){var n={versions:[{id:t}],output:{basic:!0,depth:0}},o=JSON.stringify(n);C.makeWSCall("/resources/v1/dslc/getinformation","POST","enovia","application/json",o,function(t){e(t)},i,!0,null,6e5)})},addCRComposition:function(e,t){return new Promise((i,n)=>{let o={instances:[{operator:"ADD",father:t,child:e}],output:{copyfrom:!0,icons:!0,islast:!0,system:!0,basic:!0,family:!0,allIds:!0,formats:"kernel"}},s=JSON.stringify(o);C.makeWSCall("/resources/v1/dslc/editcomposition","POST","enovia","application/json",s,e=>i(e),(e,t)=>{n(t||e)},!0)})},removeCRComposition:function(e,t){return new Promise((i,n)=>{let o={instances:[{operator:"REMOVE",father:t,child:e}],output:{copyfrom:!0,icons:!0,islast:!0,system:!0,basic:!0,family:!0,allIds:!0,formats:"kernel"}},s=JSON.stringify(o);C.makeWSCall("/resources/v1/dslc/editcomposition","POST","enovia","application/json",s,e=>i(e),(e,t)=>{n(t||e)},!0)})},modifyCRComposition:function(e,t,i){return new Promise(function(n,o){let s={instances:[{operator:"REMOVE",father:i,child:e},{operator:"ADD",father:i,child:t}],output:{copyfrom:!0,icons:!0,islast:!0,system:!0,basic:!0,family:!0,allIds:!0,formats:"kernel"}},a=JSON.stringify(s);C.makeWSCall("/resources/v1/dslc/editcomposition","POST","enovia","application/json",a,e=>n(e),(e,t)=>{o(t||e)},!0)})},getMultipleConfigurationContextInfo:function(e){let t=e.referenceIds;return new Promise(function(i,n){var o={version:e.version?e.version:"1.0",pidList:t,modelMask:"Read",enabledCriteria:"YES",cfgCtxt:"YES"};e&&e.xRevisionContent&&(o.xRevisionContent="YES"),o=JSON.stringify(o),C.makeWSCall("/resources/modeler/configuration/navigationServices/getMultipleConfigurationContextInfo","POST","enovia","application/ds-json",o,function(e){i(e)},function(e,t){n(t.errorMessage)},!0)})},getSupportedTypesForXRevision:function(){return["VPMReference","RFLVPMLogicalReference"]},createxRevision:function(e,t){return new Promise((i,n)=>{let o={version:"1.0",referencePID:e};o=JSON.stringify(o),C.makeWSCall("/resources/modeler/configXRevision/authoringServices/create","POST","enovia","application/ds-json",o,e=>{i(e)},(e,t)=>{n(t)},!0,t)})},setConfiguredObjectInfo:e=>{return new Promise((t,i)=>{var n={version:"1.3",pidList:e.inputObjectIdList,xRevisionContent:{reusableGraphReferencePID:e.selectedObjectId}};n=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/authoringServices/setConfiguredObjectInfo?cfgCtxt=1","POST","enovia","application/json",n,function(e){t(e)},function(e,t){i(t||e)},!0,e.wsHeaderOptions)})},getversionGraph:function(e){let t="/resources/v1/dslc/versiongraph/"+e;return new Promise((i,n)=>{let o={version:"1.0",referencePID:e};o=JSON.stringify(o),C.makeWSCall(t,"GET","enovia","application/ds-json","",e=>{i(e)},(e,t)=>{n(t)},!0)})},fetchCustomAttributes:function(e){return new Promise(function(t,i){var n=`/resources/dictionary/interface/${e}/attributes?info=true`;C.makeWSCall(n,"GET","enovia","application/ds-json","",function(e){t(e)},function(e,t){i(t.errorMessage)},!0)})},fetchExtension:function(e){return new Promise(function(t,i){e={classes:["Variant","Variant Value","Variability Group","Variability Option"]};e=UWA.is(e,"string")?e:JSON.stringify(e),C.makeWSCall("/resources/dictionary/class/interfaces","POST","enovia","application/ds-json",e,function(e){t(e)},function(e,t){i(t.errorMessage)},!0)})},getEffectivityJSON:function(e){var t=e.InstanceID,i=(e.InstanceLength,e.Version),n=e.TargetFormat,o=e.View,s=e.Domains,a=e.withDescription;return new Promise(function(r,l){var c={version:i,output:{targetFormat:n,withDescription:a,view:o,domains:s},pidList:t};null!=e.configurationRev&&(c.configurationRev=e.configurationRev.configRevision[0].id);var d=JSON.stringify(c);C.makeWSCall("/resources/modeler/configuration/navigationServices/getMultipleFilterableObjectInfo","POST","enovia","application/json",d,function(e){r(e)},l,!0,null,6e5)})},getAttributeValue:function(e,t){for(var i="",n=0;n<e.length;n++)if(e[n].name==t){null!=(i=e[n].value)&&"undefined"!=i||(i="");break}return i},getModelDataUsingSearchService:function(e){var t;return t=e.map(function(e){return"(([ds6w:label]:("+C.escapeSpecialCharacters(e.modelLabel)+")) OR ([name]:("+e.modelName+")))"}).join(" OR "),new Promise(function(e,i){var n={with_indexing_date:!0,with_nls:!1,label:"cfgLabel",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:modified","ds6w:created","ds6w:responsible","ds6w:lastModifiedBy","ds6wg:marketing_Name"],select_file:["icon","thumbnail_2d"],query:'(flattenedtaxonomies:"types/Model") AND ('+t+")",order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:enoviaServerFilterWidget.tenant};C.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",JSON.stringify(n),function(t){e(t)},function(e){i(e)},!0,{isfederated:"true"})})},checkIfModelExist:function(e,t,i){var n=!1;return e.forEach(function(e){e.modelName==t&&e.modelLabel==i&&(n=!0)}),n},getModelData:function(e,t,i){var n={ID:"",modelIcon:""};return e.forEach(function(e){e.modelName==t&&(n.ID=e.modelID,n.modelIcon=e.modelIcon)}),n},getModelLabelFromDescriptions:function(e,t){for(var i="",n=0;n<e.length;n++){var o=e[n];o.attributes.DescId.value==t&&(i=o.attributes.DisplayName.value)}return i},getVariantData:function(e,t,i){var n={variantExpression:"",variantDisplayExpression:""};return e.forEach(function(e){e.modelName==t&&e.modelLabel==i&&(n.variantExpression=e.variantExpression,n.variantDisplayExpression=e.variantDisplayExpression)}),n},getEvolutionData:function(e,t,i){var n={evolutionExpression:"",evolutionDisplayExpression:""};return e.forEach(function(e){e.modelName==t&&e.modelLabel==i&&(n.evolutionExpression=e.evolutionExpression,n.evolutionDisplayExpression=e.evolutionDisplayExpression)}),n},getEvolutionJSON:function(e,t,i){var n=null;return e.forEach(function(e){e.expression.name==t&&e.expression.label==i&&(n=e)}),n},getObjectsBySearchService:function(e,t,i,n){var o=this;return null!=t&&null!=t||(t=!1),null!=i&&null!=i||(i="Change Action"),null!=n&&null!=n||(n=["In Work","Complete"]),new Promise(function(s,a){var r='(flattenedtaxonomies:"types/'+i+'" ';n&&Array.isArray(n)&&n.length&&(r+="AND ( ",n.forEach(function(e,t){r+='current:"'+e+'" ',t<n.length-1&&(r+="OR ")}),r+=") "),r+=") ",e&&(1==e.length?r+=t&&!0===t?'AND ( NOT physicalid:"'+e[0]+'")':'AND ( physicalid:"'+e[0]+'")':e.length>1&&(r+="AND (",t&&!0===t?e.forEach(function(t,i){r+='NOT physicalid:"'+t+'" ',i<e.length-1&&(r+="AND ")}):e.forEach(function(t,i){r+='physicalid:"'+t+'" ',i<e.length-1&&(r+="OR ")}),r+=")"));var l={with_indexing_date:!0,with_nls:!0,label:"cfgRevisionCALabel",locale:"en",select_predicate:["ds6w:identifier","ds6w:label","ds6wg:marketing_Name","ds6w:description","ds6w:type","current","ECM_CHG_ON_HOLD","owner","ds6w:responsible","ds6w:created","ds6w:lastModifiedBy"],select_file:["icon","thumbnail_2d"],query:r,nresults:1e3,start:0,source:[],tenant:enoviaServerFilterWidget.tenant};l=JSON.stringify(l);o.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",l,function(e){s(e)},function(e){a(e)},!0,{isfederated:!0})})},getInstanceObjectsByReadService:function(e,t="false",i="false"){var n=this;return new Promise(function(o,s){var a={lIds:[],relIDs:e,busIDs:[],plmparameters:"false",attributes:"true",navigateToMain:t,readonly:i,debug_properties:""};a=JSON.stringify(a);n.makeWSCall("/resources/v1/collabServices/attributes/op/read","POST","enovia","application/json",a,function(e){o(e)},function(e){s(e)},!0)})},formatDate:function(e,t){if(null==e||null==e)return"";var i=new Date(e);return null!=t&&null!=t||(t="%Y-%m-%d"),d.strftime(i,t)},isBaselineMode:function(e,t){var i=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach(function(t){Array.isArray(t.mode)&&t.mode.indexOf("baseline")>=0&&(e?e===t.id&&(i=!0):i=!0)}),i},isFirstSemantic:function(e,t){var i=!1;return t&&Array.isArray(t.allowedSemantics)&&t.allowedSemantics.forEach(function(t){t.id===e&&Array.isArray(t.semantic)&&t.semantic.indexOf("FIRST")>=0&&(i=!0)}),i},getAllowedSemantics:function(e){return new Promise(function(t,i){var n={allowedSemantics:[{id:e}],output:{infos:"version"}},o=JSON.stringify(n);C.makeWSCall("/resources/v1/dslc/getallowedsemantics","POST","enovia","application/json",o,function(e){t(e)},function(e){i(e)},!0)})},getAllowedSemanticsForMultipleProducts:e=>new Promise((t,i)=>{let n={allowedSemantics:e,output:{infos:"version"}};C.makeWSCall("/resources/v1/dslc/getallowedsemantics","POST","enovia","application/json",JSON.stringify(n),e=>t(e),e=>i(e),!0)}),setContentForConfigurationRevision:function(e,t,i){return new Promise(function(n,o){var s="",a="";"changeAction"==e?(s="/resources/modeler/configurationRevision/authoringServices/defineContentByChanges",a={version:"1.0",configRevision:t,changeActions:i,contentByLocalChange:"Yes",contentByInheritedChange:"Yes",contentBySelectedInstances:"Yes"}):"instance"==e&&(s="/resources/modeler/configurationRevision/authoringServices/defineContentByInstances",a={version:"1.0",configRevision:t,resources:i,contentByLocalInstances:"Yes",contentByInheritedInstances:"Yes"});var r=JSON.stringify(a);C.makeWSCall(s,"POST","enovia","application/json",r,function(e){n(e)},function(e,t){o(t||e)},!0)})},setInstanceContentForConfigurationRevision:function(e,t=[],i=[]){return new Promise(function(n,o){let s={version:"1.1",configRevision:e,addResources:t,removeResources:i,contentByLocalInstances:"Yes",contentByInheritedInstances:"Yes"},a=JSON.stringify(s);C.makeWSCall("/resources/modeler/configurationRevision/authoringServices/defineContentByInstances","POST","enovia","application/json",a,e=>n(e),(e,t)=>{o(t||e)},!0)})},setChangeActionContentForConfigurationRevision:function(e,t){return new Promise(function(i,n){let o={version:"1.0",configRevision:e,changeActions:t,contentByLocalChange:"Yes",contentByInheritedChange:"Yes",contentBySelectedInstances:"Yes"},s=JSON.stringify(o);C.makeWSCall("/resources/modeler/configurationRevision/authoringServices/defineContentByChanges","POST","enovia","application/json",s,e=>i(e),(e,t)=>{n(t||e)},!0)})},getContentForConfigurationRevision:function(e,t){return null!=t&&null!=t||(t=!0),new Promise(function(i,n){var o={version:"1.0",configRevision:e,contentByLocalChange:"Yes",contentByInheritedChange:t?"Yes":"No",contentByLocalInstances:"Yes",contentByInheritedInstances:"Yes"},s=JSON.stringify(o);C.makeWSCall("/resources/modeler/configurationRevision/navigationServices/getContent","POST","enovia","application/json",s,function(e){i(e)},function(e){n(e)},!0)})},getRelevantChanges:function(e,t){return null!=t&&null!=t||(t=!0),new Promise(function(i,n){var o={version:"1.0",configRevision:e,implicitChangesRequired:t?"Yes":"No"},s=JSON.stringify(o);C.makeWSCall("/resources/modeler/configurationRevision/navigationServices/getRelevantChanges","POST","enovia","application/json",s,function(e){i(e)},function(e){n(e)},!0)})},getObjectInfo:function(e){return new Promise(function(t,i){var n="",o="$ids="+e;n=JSON.stringify(n);C.makeWSCall("/resources/v2/e6w/service/ObjectInfo?","POST","enovia","application/x-www-form-urlencoded",o,function(e){t(e)},function(e){i(e)},!1)})},getVersionGraph:function(e){if(e)return new Promise(function(t,i){var n={graphRequests:[{id:e,attributes:["revision","EnterpriseExtension.V_PartNumber","owner","policy","type","project","ispublished","reserved","reservedby","organization","PLMReference.V_versionComment","vault"]}]};n=JSON.stringify(n),C.makeWSCall("/resources/v1/dslc/versiongraph?withThumbnail=1&withAttributes=1&withCopyFrom=1","POST","enovia","application/json",n,function(e){t(e)},function(e){i(e)},!1)})},getSubTypeInfo:function(e){return new Promise(function(t,i){var n=e;C.makeWSCall("/resources/dictionary/getTypeInfo","POST","enovia","application/json",n,function(e){t(e)},function(e){i(e)},!1)})},getPAndOAccess:function(e){return new Promise(function(t,i){var n="";n=e?{version:"1.0",commandList:e}:{version:"1.0",commandList:["GetAttachedModels","GetEnabledCriteria","GetConfigurations","AttachModels","DetachModels","GetEvolution","GetVariant","SetEvolution","SetVariant"]};n=JSON.stringify(n),C.makeWSCall("/resources/modeler/configuration/pandoServices/getPandOAccessInformation","POST","enovia","application/json",n,function(e){t(e)},function(e){i(e)},!1)})},showUserChoiceDialog:function(e){var t={width:300,height:180,isResizable:!1,closeButtonFlag:!1,dialogue:{header:h.Warning,buttonArray:[{label:e.primaryButton,labelValue:e.primaryButton,handler:function(){e.primaryCallback(),i.closeDialog()},className:"primary"},{label:e.secondaryButton,labelValue:e.secondaryButton,handler:function(){e.secondaryCallback(),i.closeDialog()},className:"default"}],target:e.targetBody,object:null,postCrossHandler:function(){i.closeDialog()}}},i=new u(t);if(i.render(),i.container.setStyle("overflow","auto"),i.container.setHTML(e.messageToDisplayOnDialog),1==e.dontShowAgain){var n=new p({label:""});n.addEventListener("change",function(e){}),n.inject(i.container)}},instancesBelongToFrozenEvolution:function(e){return new Promise((t,i)=>{let n={version:"1.0",resources:e},o=JSON.stringify(n);C.makeWSCall("/resources/modeler/configuration/navigationServices/instancesBelongToFrozenEvolution","POST","enovia","application/json",o,e=>t(e),(e,t)=>{i(t||e)},!0)})},getProductID:function(e){let t=this;return new Promise(function(i,n){if(e){const o="/resources/cfg/configurator/configuration/parentcontext/"+e,s=function(n){t.setDefaultConfigurations(e).then(e=>{let t={productId:n.objectDetails.id,startDate:n.objectDetails.startEffDate,configurationData:e};i(t)})},a=function(e){console.log(`Failed to get product id for PC id: ${e}`),n("Failed to get product id for PC id")};C.makeWSCall(o,"GET","enovia","json","",s,a,!0,null)}else n("PC id not defined")})},setDefaultConfigurations:function(e){return new Promise(function(t,i){if(e){const n="/resources/cfg/configurator/configuration/"+e,o=function(e){t(e)},s=function(){i()};C.makeWSCall(n,"GET","enovia","json","",o,s,!0,null)}})}};return C}),define("DS/CfgBaseUX/scripts/CfgXRevisionUtility",["DS/CfgBaseUX/scripts/CfgUtility"],function(e){return{getScopesFromXRevision:function(t){return new Promise(async function(i,n){if(t){let o={version:"1.0",xRevisionElementPID:t};o=JSON.stringify(o);const s="/resources/modeler/configXRevision/navigationServices/getScopesFromXRevision",a=e=>i(e),r=(e,t)=>{let i=t||e;n(i.errorMessage?i.errorMessage:"")};e.makeWSCall(s,"POST","enovia","application/ds-json",o,a,r,!0)}else n("CFGUX: No input xRevisionElement ID to getScopesFromXRevision")})},getAllocation:function(t){return new Promise(async function(i,n){if(t){let o={version:"1.0",xRevisionElementPIDs:[t]};o=JSON.stringify(o);const s="/resources/modeler/configXRevision/navigationServices/getAllocations",a=e=>i(e),r=(e,t)=>{let i=t||e;n(i.errorMessage?i.errorMessage:"")};e.makeWSCall(s,"POST","enovia","application/ds-json",o,a,r,!0)}else n("CFGUX: No input xRevisionElement ID to getAllocation")})},allocation:function(t){return new Promise(async function(i,n){const o={version:"1.0",allocations:[{xRevisionElementPID:t.xRevisionElementPID,allocationPIDs:t.allocationPID}]};e.makeWSCall("/resources/modeler/configXRevision/authoringServices/allocation","POST","enovia","application/ds-json",JSON.stringify(o),e=>i(e),(e,t)=>{let i=t||e;n(i.errorMessage?i.errorMessage:"")},!0)})},deallocation:function(t){return new Promise(async function(i,n){const o={version:"1.0",deallocations:[{xRevisionElementPID:t.xRevisionElementPID,deallocationPIDs:t.allocationPID}]};e.makeWSCall("/resources/modeler/configXRevision/authoringServices/deallocation","POST","enovia","application/ds-json",JSON.stringify(o),e=>i(e),(e,t)=>{let i=t||e;n(i.errorMessage?i.errorMessage:"")},!0)})},getModelsDataFromSearch:function(t){return new Promise(async function(i,n){let o={with_indexing_date:!0,with_nls:!1,label:"cfg",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:identifier","ds6wg:marketing_Name"],select_file:["icon","thumbnail_2d"],query:'(flattenedtaxonomies:"types/Model") AND ('+t.map(e=>`physicalid:${e}`).join(" OR ")+")",order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:enoviaServerFilterWidget.tenant};e.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",JSON.stringify(o),e=>i(e),(e,t)=>{let i=t||e;n(i.errorMessage?i.errorMessage:"")},!0,{isfederated:"true"})})}}}),define("DS/CfgBaseUX/scripts/CfgAutoComplete",["UWA/Class/View","UWA/Class/Model","DS/WUXAutoComplete/AutoComplete","DS/CfgBaseUX/scripts/CfgSearchConfiguration","DS/CfgBaseUX/scripts/CfgUtility","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel",,"css!DS/CfgBaseUX/styles/cfgAutocompleteControlUX.css"],function(e,t,i,n,o,s,a){"use strict";return e.extend({textBox:null,textdiv:null,searchAutocomplete:null,searchBtn:null,model:t.extend({ID:"",label:"",revision:""}),init:function(e){this._parent(e),this.model=new t,this.listenTo(this.model,"onChange:label",this.updateView)},updateView:function(){let e=this.model.get("label")||"",t=this.model.get("revision")||"";this.options.showRevision&&t?this.searchAutocomplete.value=`${e}-${t}`:this.searchAutocomplete.value=e},render:function(){let e=UWA.createElement("div",{id:"searchAutocompleteContainer",styles:{width:"100%","font-weight":"normal"}}).inject(this.options.parentElement);return this.searchAutocomplete=new i({elementsTree:()=>this.launchAsyncSearch(),multiSearchMode:!1,minLengthBeforeSearch:this.options.minLengthBeforeSearch,allowFreeInputFlag:!1,filterCB:function(e){this.filterItems(e,{property:"tags"})}}).inject(e),this.searchAutocomplete.addEventListener("uncommittedChange",e=>{e&&e.options&&e.options.uncommittedValue?this.searchBtn&&this.searchBtn.hide():this.searchBtn&&(this.searchBtn.show(),this.clearModel(),this.options.clearInfo())}),this.searchAutocomplete.addEventListener("change",e=>{if(e&&e.dsModel&&e.dsModel.selectedItems){this.searchBtn&&this.searchBtn.hide();let t=e.dsModel.selectedItems.getAttributeValue("ID");t&&(this.model.set("ID",t),this.model.set("revision",e.dsModel.selectedItems.getAttributeValue("revision")),this.model.set("label",e.dsModel.selectedItems.getAttributeValue("objlabel"))),this.options.callBackFunction(this.model)}else this.searchBtn&&(this.searchBtn.show(),this.clearModel())}),this.searchBtn=UWA.createElement("span").inject(e),this.searchBtn.set({events:{click:e=>{this.launchInContextGenericSearch()}}}),this.searchBtn.addClassName("fonticon"),this.searchBtn.addClassName("fonticon-1.5x"),this.searchBtn.addClassName("fonticon-search"),this.searchBtn.addClassName("cfgGenericSearchButton"),{autoComplete:this.searchAutocomplete,searchBtn:this.searchBtn}},clearModel:function(){this.model.set("ID",""),this.model.set("revision",""),this.model.set("label","")},getQuery:function(){let e="",t=this.options.query.length;return this.options.query.forEach(({type:i,condition:n,excludedArray:o},s)=>{let a="";if(a=i?`(flattenedtaxonomies:"types/${i}") AND ( ${n} )`:n,o&&Array.isArray(o)&&o.length>0){let e="";o.forEach((t,i)=>{e+=`NOT (physicalid:${t})`}),e&&(a+=e)}a&&(t>1&&(a=`(${a})`),e+=a,s<t-1&&(e+=" OR "))}),e},launchAsyncSearch:function(){return new Promise((e,t)=>{let i={};i={with_indexing_date:!0,with_nls:!1,label:"cfgLabel",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6w:description","ds6w:identifier","ds6w:modified","ds6w:created","ds6w:responsible","ds6w:lastModifiedBy","ds6wg:marketing_Name","ds6wg:revision"],select_file:["icon","thumbnail_2d"],query:this.getQuery(),order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:enoviaServerFilterWidget.tenant},i=JSON.stringify(i),o.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",i,t=>{if(!t.results||!Array.isArray(t.results))return void e([]);console.log(t);let i=this.prepareTreeForAutoComplete(t.results);e(i)},e=>{t(e)},!0,{isfederated:"true"})})},prepareTreeForAutoComplete:function(e){let t=new s;return t.prepareUpdate(),e.forEach(e=>{let i=this.getAttrValue(e,"ds6wg:revision"),n=this.getAttrValue(e,"ds6w:label"),o=this.getAttrValue(e,"ds6w:identifier"),s=new a({label:this.options.showRevision&&i?`${n}-${i}`:n,value:o,grid:{ID:this.getAttrValue(e,"resourceid"),objlabel:n,revision:i,tags:n+i+o}});t.addRoot(s)}),t.pushUpdate(),t},getAttrValue:function(e,t){let i="";return e.attributes.length<=0?i:(e.attributes.forEach(e=>{e.name==t&&(i=e.value)}),i)},updateAutoCompleteModel:function(){this.searchAutocomplete.elementsTree&&(this.searchAutocomplete.value="",this.searchAutocomplete.elementsTree=void 0,this.searchAutocomplete.elementsTree=(()=>this.launchAsyncSearch()))},launchInContextGenericSearch:function(){let e=enoviaServerFilterWidget.myRole;const t=e=>{e=e[0];let t=["id","ds6w:label","ds6wg:revision"],i="";Object.keys(e._attributes).forEach(n=>{-1!==t.indexOf(n)&&("ds6wg:revision"==n?this.model.set("revision",e.get(n)):"ds6w:label"==n?i=e.get(n):this.model.set("ID",e.get(n)))}),this.model.set("label",i)};if("Native"==window.enoviaServerFilterWidget.mode){const e={precondition:this.getQuery()},t={eventName:"InContextSearch",operation:"ActivateSearchGeneric",operationVersion:"1.0",content:JSON.stringify(e)};o.sendNotificationWebInWin(t)}else{let i=this.options.searchTitle||"In Context Search",o=this.options.multiselection||!1;new n(o,i).activate(i,"",e,t,"","",this.getQuery())}}})}),define("DS/CfgBaseUX/scripts/CfgCacheManager",["UWA/Core","UWA/Class","DS/WAFData/WAFData","DS/UWPClientCode/I18n","DS/CfgBaseUX/scripts/CfgUtility"],function(e,t,i,n,o){"use strict";return t.singleton({_globalStorageName:"CfgCacheData",cfgSettings:{},set:function(e,t){if(o.isDefined(enoviaServerFilterWidget)&&"Native"==enoviaServerFilterWidget.mode){if(1==t){this.setInLocalStorage(e);var i={eventName:"cfgUserSettings",operation:"Set",operationVersion:"1.0",content:JSON.stringify(this.cfgSettings)};o.sendNotificationWebInWin(i)}}else this.setInLocalStorage(e)},setInLocalStorage:function(e){this.cfgSettings=Object.assign(this.cfgSettings,e),window.localStorage.setItem("_globalStorageName",JSON.stringify(this.cfgSettings))},get:function(e){var t=JSON.parse(window.localStorage.getItem("_globalStorageName"));if(null!=t&&null!=t&&""!=t)return t[e]}})}),define("DS/CfgBaseUX/scripts/CfgXMLServices",["DS/CfgDictionary/CfgDictionaryOperatorEnum","DS/CfgDictionary/CfgDictionaryTypeEnum","DS/CfgBaseUX/scripts/CfgData","DS/CfgBaseUX/scripts/CfgUtility","UWA/Drivers/Alone","DS/Core/Core","DS/CfgBaseUX/scripts/CfgEvolutionRange","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX"],function(e,t,i,n,o,s,a,r){"use strict";var l={buildRoot:function(e,t){return'<Root Name = "'+e+'" Revision = "'+t+'"/>'},buildLeaf:function(e,t,i){return'<Leaf Name = "'+e+'" Revision = "'+t+'" IsExcluded = "'+i+'"/>'},buildSingle:function(e,t){return'<Single Name = "'+e+'" Revision = "'+t+'"/>'},buildTree:function(e){return"<Tree>"+e+"</Tree>"},buildTreeSeries:function(e,t,i){return'<TreeSeries Type = "'+e+'" Name = "'+t+'">'+i+"</TreeSeries>"},buildXRevision:function(e){let t;return t=-1==e.search("XRevision")?"<XRevision>"+e+"</XRevision>":e},startFilterXML:function(e,t,i,o,s,a,r){null!=t&&null!=t&&""!=t||(t="Strict");var l='<FilterSelection SelectionMode = "'+t+'">';null!=e&&null!=e&&""!=e&&(l='<FilterSelection SelectionMode="'+t+'" SelectionView="'+e+'">'),a&&(l=l.slice(0,l.length-1),l+=' DateMode="Contextual">'),r&&(l+=r),s&&s.name&&(s.label||(s.label=s.name),window.DescriptionCount++,l+=`<Context HolderType = "Model" HolderName = "${s.name}" DescId="${window.DescriptionCount}">`,s.desc=`<Context DescId = "${window.DescriptionCount}" DisplayName = "${n.escapeSpecialCharacters(s.label)}"></Context>`,window.DescriptionCount++);let c="";return i&&(c='<ConfigurationRevision PID="'+i+'"/>'),null!=o&&null!=o||(o=!1),o?'<CfgFilterExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgFilterExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config">'+c:'<CfgFilterExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgFilterExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config">'+c+l},endFilterXML:function(e,t){return null!=e&&null!=e||(e=!1),e?"</CfgFilterExpression>":t?"</Context></FilterSelection></CfgFilterExpression>":"</FilterSelection></CfgFilterExpression>"},startChangeXML:function(e){return e?'<CfgChangeExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgChangeExpressionV2.xsd"><Expression Domain="ConfigChange_Evolution">':'<CfgChangeExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgChangeExpression.xsd"><Expression>'},endChangeXML:function(){return"</Expression></CfgChangeExpression>"},startEvolutionXML:function(){return'<CfgEffectivityExpression  xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression>'},endEvolutionXML:function(){return"</Expression></CfgEffectivityExpression>"},startSessionXML:function(){return'<CfgEffectivityExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpression.xsd"><Expression>'},endSessionXML:function(){return"</Expression></CfgEffectivityExpression>"},startxRevisionXML:function(){return'<CfgEffectivityExpression  xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgEffectivityExpressionV2.xsd"><Expression Domain="ConfigChange_Evolution">'},endxRevisionXML:function(){return"</Expression></CfgEffectivityExpression>"},buildContext:function(e,t,i){var n="";n=""!=t.xmlExpression&&-1==t.xmlExpression.indexOf("TreeSeries")?this.buildTreeSeries("ProductState",t.name,t.xmlExpression):t.xmlExpression;var o="";o=""!=t.impXml&&-1==t.impXml.indexOf("TreeSeries")?this.buildTreeSeries("ManufPlan",t.name,t.impXml):t.impXml;var s="";s=null!=t.milestoneXml&&""!=t.milestoneXml&&-1==t.milestoneXml.indexOf("MilestonesTrack")?this.buildmilestonetrack(t.milestoneXml):t.milestoneXml;var a=0;""==n&&a++,""==t.iDateXml&&a++,""==o&&a++,""==t.iUnitXml&&a++,""==t.milestoneXml&&a++;var r="<AND>",l="</AND>";return a>=4&&(l=r=""),5==a?"":i?r+n+t.iDateXml+o+t.iUnitXml+s+l:'<Context HolderType="Model" HolderName="'+e+'" DescId="'+window.DescriptionCount+'">'+r+n+t.iDateXml+o+t.iUnitXml+s+l+"</Context>"},buildmilestonetrack:function(e){return'<MilestonesTrack Discipline = "Engineering">'+e+"</MilestonesTrack>"},buildSingleDateValue:function(e){return'<Interval><From Value = "'+e+'T00:00:00"/><To Value = "'+e+'T23:59:59"/></Interval>'},buildSingleValue:function(e){return'<SingleValue Value = "'+e+'"/>'},buildFromDate:function(e){return'<From Value = "'+e+'T00:00:00"/>'},buildFrom:function(e){return'<From Value = "'+e+'"/>'},buildToDate:function(e){return'<To Value = "'+e+'T23:59:59"/>'},buildTo:function(e){return'<To Value = "'+e+'"/>'},buildRange:function(e,t){return""==(new DOMParser).parseFromString(t,"text/xml").childNodes[0].getAttribute("Value")?"<Interval>"+e+"</Interval>":"<Interval>"+e+t+"</Interval>"},buildFeature:function(e,t,i){return i?`<Feature Type="ConfigFeature" Name="${e}" DescId="${i}">${t}</Feature>`:'<Feature Type="ConfigFeature" Name="'+e+'">'+t+"</Feature>"},buildOption:function(e,t){return t?`<Feature Type="ConfigFeature" Name="${e}" DescId="${t}"/>`:'<Feature Type="ConfigFeature" Name="'+e+'"/>'},buildNot:function(){return"<NOT>"},endNot:function(){return"</NOT>"},buildSeries:function(e,t,i){return'<Series Type = "'+e+'" Name = "'+t+'">'+i+" </Series>"},buildDate:function(e){return"<Date>"+e+"</Date>"},buildInterval:function(e){return"<Interval>"+e+"</Interval>"},getxRevisionEvolutionExpression:function(e){if(!e.ExpAndJson.xml)return"";let t='<?xml version="1.0" encoding="UTF-8"?>';return t+=l.startxRevisionXML(),t+=l.buildXRevision(e.ExpAndJson.xml),t+=l.endxRevisionXML()},getxRevisionApplicabilityExpression:function(e,t){let i='<?xml version="1.0" encoding="UTF-8"?>';i+=l.startChangeXML(!0);let n=l.buildXRevision(e.ExpAndJson.xml);return"<XRevision></XRevision>"==n&&(n="<Boolean>false</Boolean>"),i+='<XGraph HolderType="'+t.typeValue+'" HolderName="'+t.nameValue+'" HolderRevision="'+t.revisionValue+'">'+n+"</XGraph>",i+=l.endChangeXML()},isNOTCriteria:function(e){for(var t=!1,i=0;i<e.length;i++)"NOT"==e[i].nodeName&&(t=!0);return t},fillChildrenDetails:function(e,t){for(let i=0;i<e.children.length;i++){let n=e.children[i].attributes.Name.value;-1==t.indexOf(n)&&t.push(n)}},getFeatureTypeFromMassDictionary:function(e,t){let i="Exclusive";for(let n=0;n<t.length;n++){let o=t[n].currentModelFeatures;for(let t=0;t<o.length;t++)if(o[t].name==e&&"Option Group"==o[t].type)return i="NonExclusive"}return i},getProbesMassVariantCriteria:function(e,t){const i=[],n=[],o=[],s=[],a=[];let r={totalVariantLength:0,totalVariantValueLength:0,totalOptionGroupLength:0,totalOptionLength:0,totalNotOperatorLength:0,totalFeaturesLength:0,totalFeatureOptionsLength:0,variantComplexity:1},l=0,c=0;for(let r in e){let d=e[r].xml;if(void 0===d||""===d)continue;let u=0;l++;let p=(new DOMParser).parseFromString(d,"text/xml").getElementsByTagName("Expression");if(p.length>0){let e=p[0].getElementsByTagName("Context"),r=e.length;for(let l=0;l<r;l++)if(1!=e[l].childNodes.length||"Boolean"!==e[l].childNodes[0].tagName){let r=0,c=e[l].getElementsByTagName("OR");null==c||null!=c.length&&0!=c.length||((c=new Array)[0]=e[l]),u+=c[0].childNodes.length;for(let e=0;e<c[0].childNodes.length;e++){if("Feature"==c[0].childNodes[e].tagName){let a=c[0].childNodes[e],r=a.getAttribute("Name"),l=this.getFeatureTypeFromMassDictionary(r,t);"Exclusive"==l?(-1==i.indexOf(r)&&i.push(r),a.children.length>0&&this.fillChildrenDetails(a,n)):"NonExclusive"==l&&(-1==o.indexOf(r)&&o.push(r),a.children.length>0&&this.fillChildrenDetails(a,s))}else{let r=c[0].childNodes[e];for(let e=0;e<r.childNodes.length;e++)if("NOT"==r.tagName){let l=r.childNodes[e],c=l.getAttribute("Name"),d=this.getFeatureTypeFromMassDictionary(c,t);"Exclusive"==d?(-1==i.indexOf(c)&&i.push(c),l.children.length>0&&this.fillChildrenDetails(l,n)):"NonExclusive"==d&&(-1==o.indexOf(c)&&o.push(c),l.children.length>0&&this.fillChildrenDetails(l,s)),l.children.length>0&&this.fillChildrenDetails(l,a)}else if("NOT"==r.childNodes[e].tagName){let l=r.childNodes[e].childNodes[0],c=l.getAttribute("Name"),d=this.getFeatureTypeFromMassDictionary(c,t);"Exclusive"==d?(-1==i.indexOf(c)&&i.push(c),l.children.length>0&&this.fillChildrenDetails(l,n)):"NonExclusive"==d&&(-1==o.indexOf(c)&&o.push(c),l.children.length>0&&this.fillChildrenDetails(l,s)),l.children.length>0&&this.fillChildrenDetails(l,a)}else{let a=r.childNodes[e],l=a.getAttribute("Name"),c=this.getFeatureTypeFromMassDictionary(l,t);"Exclusive"==c?(-1==i.indexOf(l)&&i.push(l),a.children.length>0&&this.fillChildrenDetails(a,n)):"NonExclusive"==c&&(-1==o.indexOf(l)&&o.push(l),a.children.length>0&&this.fillChildrenDetails(a,s))}}r++}}if(r>0){let e=u/r,t=Math.round(e);t>1?c+=t:c++}}}for(let e=0;e<t.length;e++){let i=t[e].currentModelFeatures.length;r.totalFeaturesLength+=i;for(let n=0;n<i;n++){let i=t[e].currentModelFeatures[n].options.length;r.totalFeatureOptionsLength+=i}}return r.totalVariantLength=i.length,r.totalVariantValueLength=n.length,r.totalOptionGroupLength=o.length,r.totalOptionLength=s.length,r.totalNotOperatorLength=a.length,r.variantComplexity=Math.round(c/l),r},getFeatureTypeFromDictionary:function(e,t){let i="Exclusive";for(let n=0;n<t.currentModelFeatures.features.length;n++)if(t.currentModelFeatures.features[n].name==e&&"NonExclusive"==t.currentModelFeatures.features[n].featureType){i="NonExclusive";break}return i},getProbesVariantCriteria:function(e,t){const i=[],n=[],o=[],s=[],a=[];let r={totalVariantLength:0,totalVariantValueLength:0,totalOptionGroupLength:0,totalOptionLength:0,totalNotOperatorLength:0,totalFeaturesLength:0,totalFeatureOptionsLength:0,variantComplexity:1},l=0;if(void 0===e||""===e)return r;let c=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression");if(c.length>0){let e=c[0].getElementsByTagName("Context"),d=e.length;for(let r=0;r<d;r++)if((1!=e[r].childNodes.length||"Boolean"!==e[r].childNodes[0].tagName)&&e[r].attributes.HolderName){let c,d=e[r].attributes.HolderName.value;for(let e=0;e<t.length;e++)if(t[e].currentModelName==d){c=t[e];break}if(null!=c){let t=0,d=e[r].getElementsByTagName("OR");null==d||null!=d.length&&0!=d.length||((d=new Array)[0]=e[r]),l+=d[0].childNodes.length;for(let e=0;e<d[0].childNodes.length;e++){if("Feature"==d[0].childNodes[e].tagName){let t=d[0].childNodes[e],a=t.getAttribute("Name"),r=this.getFeatureTypeFromDictionary(a,c);"Exclusive"==r?(-1==i.indexOf(a)&&i.push(a),t.children.length>0&&this.fillChildrenDetails(t,n)):"NonExclusive"==r&&(-1==o.indexOf(a)&&o.push(a),t.children.length>0&&this.fillChildrenDetails(t,s))}else{let t=d[0].childNodes[e];for(let e=0;e<t.childNodes.length;e++)if("NOT"==t.tagName){let r=t.childNodes[e],l=r.getAttribute("Name"),d=this.getFeatureTypeFromDictionary(l,c);"Exclusive"==d?(-1==i.indexOf(l)&&i.push(l),r.children.length>0&&this.fillChildrenDetails(r,n)):"NonExclusive"==d&&(-1==o.indexOf(l)&&o.push(l),r.children.length>0&&this.fillChildrenDetails(r,s)),r.children.length>0&&this.fillChildrenDetails(r,a)}else if("NOT"==t.childNodes[e].tagName){let r=t.childNodes[e].childNodes[0],l=r.getAttribute("Name"),d=this.getFeatureTypeFromDictionary(l,c);"Exclusive"==d?(-1==i.indexOf(l)&&i.push(l),r.children.length>0&&this.fillChildrenDetails(r,n)):"NonExclusive"==d&&(-1==o.indexOf(l)&&o.push(l),r.children.length>0&&this.fillChildrenDetails(r,s)),r.children.length>0&&this.fillChildrenDetails(r,a)}else{let a=t.childNodes[e],r=a.getAttribute("Name"),l=this.getFeatureTypeFromDictionary(r,c);"Exclusive"==l?(-1==i.indexOf(r)&&i.push(r),a.children.length>0&&this.fillChildrenDetails(a,n)):"NonExclusive"==l&&(-1==o.indexOf(r)&&o.push(r),a.children.length>0&&this.fillChildrenDetails(a,s))}}t++}}}if(d>0){let e=l/d,t=Math.round(e);t>1&&(r.variantComplexity=t)}for(let e=0;e<t.length;e++){let i=t[e].currentModelFeatures.features.length;r.totalFeaturesLength+=i;for(let n=0;n<i;n++){let i=t[e].currentModelFeatures.features[n].options.length;r.totalFeatureOptionsLength+=i}}r.totalVariantLength=i.length,r.totalVariantValueLength=n.length,r.totalOptionGroupLength=o.length,r.totalOptionLength=s.length,r.totalNotOperatorLength=a.length}return r},getProbesEvolutionCriteria:function(e){let t=0,i=0,n=0,o=0,s=0,a=0,r=0,l=0,c=0,d=0,u=0,p=0,g=0,m=0,h=0,f=0,v=0,C=0,y=0,b=0,x={mvCriteria:"NONE",mpCriteria:"NONE",unitCriteria:"NONE",dateCriteria:"NONE",totalProductRangeLength:g,totalProductSingleLength:m,totalManuPlanRangeLength:h,totalManuPlanSingleLength:f,totalUnitRangeLength:v,totalUnitSingleLength:C,totalDateRangeLength:y,totalDateSingleLength:b};if(void 0===e||""===e)return x;let S=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression");if(S.length>0){let e=S[0].getElementsByTagName("Context");for(let x=0;x<e.length;x++)if((1!=e[x].childNodes.length||"Boolean"!==e[x].childNodes[0].tagName)&&e[x].attributes.HolderName){let S=[],E=e[x];S=0==E.getElementsByTagName("AND").length?E.childNodes[0]&&"OR"==E.childNodes[0].nodeName?E.childNodes[0].childNodes:E.childNodes:E.getElementsByTagName("AND")[0].childNodes;for(let e=0;e<S.length;e++)if("TreeSeries"==S[e].nodeName){let r=S[e].attributes.Type.value,l=S[e].getElementsByTagName("Tree"),c=S[e].getElementsByTagName("Single");"ProductState"==r?(l.length>0&&c.length>0?t++:l.length>0?i++:c.length>0&&n++,l.length>0&&(g+=l.length),c.length>0&&(m+=c.length)):(l.length>0&&c.length>0?o++:l.length>0?s++:c.length>0&&a++,l.length>0&&(h+=l.length),c.length>0&&(f+=c.length))}else if("Series"==S[e].nodeName){let t=S[e].getElementsByTagName("Interval"),i=S[e].getElementsByTagName("SingleValue");t.length>0&&i.length>0?r++:t.length>0?l++:i.length>0&&c++,t.length>0&&(v+=t.length),i.length>0&&(C+=i.length)}else if("Date"==S[e].nodeName){let t=S[e].getElementsByTagName("Interval");if(t.length>0)if(1==t.length)if(t[0].getElementsByTagName("From").length>0&&t[0].getElementsByTagName("To").length>0){let e=new Date(t[0].getElementsByTagName("From")[0].attributes.Value.value),i=new Date(t[0].getElementsByTagName("To")[0].attributes.Value.value);e.toLocaleDateString()==i.toLocaleDateString()?(p++,b++):(u++,y++)}else u++,y++;else{let e=p,i=u;for(let e=0;e<t.length;e++)if(t[e].getElementsByTagName("From").length>0&&t[e].getElementsByTagName("To").length>0){let i=new Date(t[e].getElementsByTagName("From")[0].attributes.Value.value),n=new Date(t[e].getElementsByTagName("To")[0].attributes.Value.value);i.toLocaleDateString()==n.toLocaleDateString()?(p++,b++):(u++,y++)}else u++,y++;p>e&&u>i&&d++}}}t>0?x.mvCriteria="BOTH":i>0?x.mvCriteria="RANGE":n>0&&(x.mvCriteria="SINGLE"),g>0&&(x.totalProductRangeLength=g),m>0&&(x.totalProductSingleLength=m),o>0?x.mpCriteria="BOTH":s>0?x.mpCriteria="RANGE":a>0&&(x.mpCriteria="SINGLE"),h>0&&(x.totalManuPlanRangeLength=h),f>0&&(x.totalManuPlanSingleLength=f),r>0?x.unitCriteria="BOTH":l>0?x.unitCriteria="RANGE":c>0&&(x.unitCriteria="SINGLE"),v>0&&(x.totalUnitRangeLength=v),C>0&&(x.totalUnitSingleLength=C),d>0?x.dateCriteria="BOTH":u>0?x.dateCriteria="RANGE":p>0&&(x.dateCriteria="SINGLE"),y>0&&(x.totalDateRangeLength=y),b>0&&(x.totalDateSingleLength=b)}return x},EvolutionXMLtoJSONforFilterVariant:function(e){null==e&&(e="");for(var t={contextsFilterXML:[]},i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Context"),n=0;n<i.length;n++)if(i[n].attributes.HolderName){if(1==i[n].childNodes.length&&"Boolean"===i[n].childNodes[0].tagName)continue;var o={name:i[n].attributes.HolderName.value,expression:""};o.expression='<?xml version="1.0" encoding="UTF-8"?><CfgFilterExpression xmlns="urn:com:dassault_systemes:config" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:com:dassault_systemes:config CfgFilterExpression.xsd"><FilterSelection SelectionMode="Strict">'+(i[n].outerHTML||(new XMLSerializer).serializeToString(i[n]))+"</FilterSelection></CfgFilterExpression>",t.contextsFilterXML.push(o)}return t},removeDescFromXML:function(e){var t=new DOMParser,i=this.getValidXmlWithoutDescId(e),n=t.parseFromString(i,"text/xml");n.getElementsByTagName("CfgFilterExpression").length>0&&n.getElementsByTagName("Description").length>0&&n.getElementsByTagName("CfgFilterExpression")[0].removeChild(n.getElementsByTagName("Description")[0]);var o=(new XMLSerializer).serializeToString(n);return o||""},RetrieveConfiguratorDataFromFilterXML:function(e){var t=this,o=new Promise(function(s,a){if(0==Object.keys(e).length)return s(),o;var r=(new DOMParser).parseFromString(e.filterXML,"text/xml").getElementsByTagName("FilterSelection"),l=[];if(r&&r.length>0){let e=r[0].getElementsByTagName("Context");l=e&&1==e.length&&"Context"==e[0].tagName?e[0].children:r[0].children}if(0==r.length||0==l.length)return null!=e.variants&&null!=e.variants||(e.variants={}),e.variants.displayExpression="",e.variants.xmlExpression="",e.variants.xmlDesc=[],s(),o;for(var c=[],d=[],u=1,p=1,g=[],m=[],h=0;h<l.length;h++)"TreeSeries"==l[h].tagName&&"ProductState"==l[h].attributes.Type.value&&(u=0),"Feature"!=l[h].tagName&&"NOT"!=l[h].tagName||(p=0);if(u)return s(),o;if(p||!p&&n.isDefined(e.variants.selectedOptionsforConfigurator)&&e.variants.selectedOptionsforConfigurator.length>0)return s(),o;for(h=0;h<l.length;h++)if("TreeSeries"==l[h].tagName&&"ProductState"==l[h].attributes.Type.value){if(1!=l[h].children.length)return s(),o;if("Single"!=l[h].children[0].tagName)return s(),o;var f=t.startFilterXML()+'<Context HolderType="Model" HolderName="'+l[h].attributes.Name.value+'">'+l[h].outerHTML+"</Context></FilterSelection></CfgFilterExpression>",v={evolutionExpression:JSON.stringify({filterExpression:f})};n.getLegacyCfgDico(e.modelId,v).then(function(t){for(var n=0;n<t.features.length;n++){var o=t.features[n],a={name:o.name,physicalID:o.id.replace("pid:","")};g.push(a);for(var r=0;r<o.options.length;r++){var u=o.options[r];a={name:u.name,physicalID:u.id.replace("pid:","")};m.push(a)}}for(var p=0;p<l.length;p++){if("Feature"==l[p].tagName){var h={Name:l[p].attributes.Name.value,State:"Required"};c.push(h);for(var f=0;f<l[p].children.length;f++){h={Name:l[p].children[f].attributes.Name.value,State:"Chosen"};c.push(h)}}if("NOT"==l[p].tagName)for(var v=l[p].children.length,C=l[p].children,y=0;y<v;y++){h={Name:C[y].attributes.Name.value,State:"Unselected"};c.push(h);for(f=0;f<C[y].children.length;f++){h={Name:C[y].children[f].attributes.Name.value,State:"Dismissed"};c.push(h)}}}for(p=0;p<g.length;p++){var b={Id:g[p].physicalID},x=0;f=0;for(f=0;f<c.length;f++)if(g[p].name==c[f].Name){x=1;break}b.State=1==x?c[f].State:"Required",d.push(b)}for(p=0;p<m.length;p++){b={Id:m[p].physicalID},x=0,f=0;for(f=0;f<c.length;f++)if(m[p].name==c[f].Name){x=1;break}b.State=1==x?c[f].State:"Unselected",d.push(b)}e.variants.selectedOptionsforConfigurator=d,i.selectedOptionsforConfigurator=d,s()})}});return o},RetrieveVariantXMLFromFilterXML:function(e){var t=(new DOMParser).parseFromString(e.filterXML,"text/xml"),i=t.getElementsByTagName("FilterSelection");if(i&&0==i.length)return null!=e.variants&&null!=e.variants||(e.variants={}),e.variants.displayExpression="",e.variants.xmlExpression="",e.variants.xmlDesc=[],"";let o=[],s=i[0].getElementsByTagName("Context");if(0==(o=s&&1==s.length&&"Context"==s[0].tagName?s[0].children:i[0].children).length)return null!=e.variants&&null!=e.variants||(e.variants={}),e.variants.displayExpression="",e.variants.xmlExpression="",e.variants.xmlDesc=[],"";for(var a=this.startFilterXML("",""),r="",l=0;l<o.length;l++)"Feature"!=o[l].tagName&&"NOT"!=o[l].tagName||(a+=o[l].outerHTML,r+=o[l].outerHTML);if(""==r)return null!=e.variants&&null!=e.variants||(e.variants={}),e.variants.displayExpression="",e.variants.xmlExpression="",void(e.variants.xmlDesc=[]);var c=[],d=t.getElementsByTagName("Description");if(d.length>0){for(var u=d[0].getElementsByTagName("Feature"),p=0;p<u.length;p++){var g=u[p].attributes.DescId.value,m=u[p].attributes.DisplayName.value,h='<Feature DescId = "'+g+'" DisplayName="'+(m=n.escapeSpecialCharacters(m))+'"></Feature>';c.push(h)}var f=d[0].getElementsByTagName("Option");for(p=0;p<f.length;p++){g=f[p].attributes.DescId.value,m=f[p].attributes.DisplayName.value,h='<Option DescId = "'+g+'" DisplayName="'+(m=n.escapeSpecialCharacters(m))+'" SequenceOrder="'+g+'"></Option>';c.push(h)}}a+="</FilterSelection><Description>",c.forEach(function(e){a+=e}),a+="</Description></CfgFilterExpression>";var v=n.getDisplayExpressionUsingXSLT(a);null!=e.variants&&null!=e.variants||(e.variants={}),null!=e.variants.displayExpression&&""!=e.variants.displayExpression||(e.variants.displayExpression=v),e.variants.xmlExpression=r,e.variants.xmlDesc=c},parseForXRevision:function(e){let t=e.getElementsByTagName("Tree"),i=e.getElementsByTagName("Single"),n=[];for(let e=0;e<t.length;e++){let i=t[e].getElementsByTagName("Root")[0].attributes.Revision.value,o=a.getRange("",i,"",!0),s=t[e].getElementsByTagName("Leaf");for(let e=0;e<s.length;e++){let t=s[e].attributes.Revision.value,i=!0;null!=s[e].attributes.IsExcluded&&(i=s[e].attributes.IsExcluded.value),o.addLeaves("",t,"",i)}n.push(o)}for(let e=0;e<i.length;e++){let t=i[e].attributes.Revision.value,o=!0;null!=i[e].attributes.IsExcluded&&(o=i[e].attributes.IsExcluded.value);let s=a.getRange("",t,"",!1);n.push(s)}return{xRevXml:(new XMLSerializer).serializeToString(e),xRevJson:n}},FilterXMLtoJSONConvertor:function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),i=[],o=[],s="",r=[];t.getElementsByTagName("ConfigurationRevision").length>0&&(s=t.getElementsByTagName("ConfigurationRevision")[0].attributes.PID.value);var c=t.getElementsByTagName("Description");if(null==window.DescriptionCount&&(window.DescriptionCount=1),c.length>0){for(var d=c[0].getElementsByTagName("TreeSeries"),u=0;u<d.length;u++){var p=d[u].attributes.DescId.value,g=d[u].attributes.Revision.value,m=d[u].attributes.DisplayName.value,h={descid:p,revision:g,displayName:m};i.push(h),window.DescriptionCount++}var f=c[0].getElementsByTagName("Context");for(u=0;u<f.length;u++){p=f[u].attributes.DescId.value,m=f[u].attributes.DisplayName.value,h={descid:p,displayName:m};o.push(h),window.DescriptionCount++}}var v=[],C=[],y=!1;let b=!1,x="",S=[],E=t.getElementsByTagName("FilterSelection");if(E&&E.length>0){let e=E[0].getElementsByTagName("Context");C=e&&1==e.length&&"Context"==e[0].tagName?e[0].childNodes:E[0].childNodes,"150%"==E[0].getAttribute("SelectionMode")&&(y=!0),"Contextual"==E[0].getAttribute("DateMode")&&(b=!0);const t=E[0].getElementsByTagName("XRevision");t&&1==t.length&&"XRevision"==t[0].nodeName&&({xRevXml:x,xRevJson:S}=this.parseForXRevision(t[0]))}for(var D=[],w=[],N=[],T=[],A="",I="",O="",_="",M="",R=[],B="",F=[],L=[],U=0;U<C.length;U++){if("OperationHandler"==C[U].nodeName)r.push(C[U].attributes.Name.value),O+=(ne=new XMLSerializer).serializeToString(C[U]);else if("XRevision"==C[U].nodeName);else if("TreeSeries"==C[U].nodeName){for(var P=C[U].getElementsByTagName("Tree"),X=C[U].getElementsByTagName("Single"),V=[],k=C[U].attributes.Type.value,W=0;W<P.length;W++){var j=(pe=P[W].getElementsByTagName("Root"))[0].attributes.Name.value,H=pe[0].attributes.Revision.value;p=0;if(null!=pe[0].attributes.DescId){p=pe[0].attributes.DescId.value;var G=j;null!=(ee=i.filter(function(e){return e.descid==p})[0])&&(G=ee.displayName,V.push(ee))}else"ProductState"==k?pe[0].setAttribute("DescId","products"+j+"_"+H):pe[0].setAttribute("DescId","manufacturingPlans"+j+"_"+H);for(var J=a.getRange(j,H,G,!0),z=P[W].getElementsByTagName("Leaf"),$=0;$<z.length;$++){var q=z[$].attributes.Name.value;g=z[$].attributes.Revision.value;null!=z[$].attributes.DescId?(p=z[$].attributes.DescId.value,G=q,null!=(ee=i.filter(function(e){return e.descid==p})[0])&&(G=ee.displayName,V.push(ee))):"ProductState"==k?z[$].setAttribute("DescId","products"+q+"_"+g):z[$].setAttribute("DescId","manufacturingPlans"+q+"_"+g);var Y=!0;null!=z[$].attributes.IsExcluded&&(Y=z[$].attributes.IsExcluded.value),J.addLeaves(q,g,G,Y)}"ProductState"==C[U].attributes.Type.value?N.push(J):T.push(J)}for(var Q=0;Q<X.length;Q++){var K=X[Q].attributes.Name.value,Z=X[Q].attributes.Revision.value;p=0;if(null!=X[Q].attributes.DescId){p=X[Q].attributes.DescId.value;var ee;G=K;null!=(ee=i.filter(function(e){return e.descid==p})[0])&&(G=ee.displayName,V.push(ee))}else"ProductState"==k?X[Q].setAttribute("DescId","products"+K+"_"+Z):X[Q].setAttribute("DescId","manufacturingPlans"+K+"_"+Z);null!=X[Q].attributes.IsExcluded&&X[Q].attributes.IsExcluded.value;J=a.getRange(K,Z,G,!1);"ProductState"==C[U].attributes.Type.value?N.push(J):T.push(J)}for(var te=0;te<V.length;te++){var ie='<TreeSeries DescId = "'+V[te].descid+'" Revision = "'+V[te].revision+'" DisplayName="'+n.escapeSpecialCharacters(V[te].displayName)+'"></TreeSeries>';"ProductState"==C[U].attributes.Type.value?F.push(ie):L.push(ie)}var ne=new XMLSerializer;"ProductState"==C[U].attributes.Type.value?A=ne.serializeToString(C[U]):I=ne.serializeToString(C[U])}else if("Series"==C[U].nodeName){for(var oe=C[U].childNodes,se=0;se<oe.length;se++)if("SingleValue"==oe[se].tagName){var ae={start:{buildOrder:xe=oe[se].attributes.Value.value},end:null};w.push(ae)}else if("Interval"==oe[se].tagName){var re=oe[se].getElementsByTagName("From"),le=oe[se].getElementsByTagName("To"),ce=re[0].attributes.Value.value,de="INF";le.length>0&&(de=le[0].attributes.Value.value);var ue={start:{buildOrder:ce},end:{buildOrder:de}};w.push(ue)}M=(ne=new XMLSerializer).serializeToString(C[U])}else if("MilestonesTrack"==C[U].nodeName){for(P=C[U].getElementsByTagName("Tree"),X=C[U].getElementsByTagName("Single"),W=0;W<P.length;W++){var pe;j=(pe=P[W].getElementsByTagName("Root"))[0].attributes.Name.value,H=pe[0].attributes.Name.value;if(null!=pe[0].attributes.IsExcluded)pe[0].attributes.IsExcluded.value;for(J=a.getRange(j,H,j,!0),z=P[W].getElementsByTagName("Leaf"),$=0;$<z.length;$++){q=z[$].attributes.Name.value,g=z[$].attributes.Name.value,Y=!0;null!=z[$].attributes.IsExcluded&&(Y=z[$].attributes.IsExcluded.value),J.addLeaves(q,g,q,Y)}R.push(J)}for(Q=0;Q<X.length;Q++){K=X[Q].attributes.Name.value,Z=X[Q].attributes.Name.value;null!=X[Q].attributes.IsExcluded&&X[Q].attributes.IsExcluded.value;J=a.getRange(K,Z,K,!1);R.push(J)}ne=new XMLSerializer;B=(ne=new XMLSerializer).serializeToString(C[U])}else if("Date"==C[U].nodeName){for(var ge=C[U].getElementsByTagName("Interval"),me=(X=C[U].getElementsByTagName("SingleValue"),0);me<ge.length;me++){re=ge[me].getElementsByTagName("From"),le=ge[me].getElementsByTagName("To"),ce="-INF";var he="",fe=null;null!=re[0]&&null!=re[0]&&null!=(he=re[0].attributes.Value.value)&&"undefined"!=he&&(he=he.replace("T00:00:00",""),null!=(fe=n.getDateObject(he))&&(ce=fe.toDateString()));de="INF";var ve="",Ce=null;null!=le[0]&&null!=le[0]&&null!=(ve=le[0].attributes.Value.value)&&"undefined"!=ve&&(ve=ve.replace("T23:59:59",""),null!=(Ce=n.getDateObject(ve))&&(de=Ce.toDateString()));var ye="";null!=ce&&"undefined"!=ce&&"-INF"!=ce?null!=fe&&(ye=fe.getTime()):(ce="-INF",ye="null");var be="";null!=de&&"undefined"!=de&&"INF"!=de?null!=Ce&&(be=Ce.getTime()):(de="INF",be="null");ue={Start:ce,millisecStart:ye,End:de,millisecEnd:be};D.push(ue)}for(Q=0;Q<X.length;Q++){var xe;ae={Start:xe=X[Q].attributes.Value.value,millisecStart:new Date(xe).getTime(),End:"null",millisecEnd:""};D.push(ae)}_=(ne=new XMLSerializer).serializeToString(C[U])}}w=JSON.stringify({builds:w});var Se='<?xml version="1.0" encoding="UTF-8"?>';Se+=l.startEvolutionXML();var Ee=0;""==A&&Ee++,""==_&&Ee++,""==I&&Ee++,""==M&&Ee++,""==B&&Ee++;var De="<AND>",we="</AND>";if(Ee>=4&&(we=De=""),Se+=De+A+_+I+M+B+we,0==i.length)Se+=l.endEvolutionXML();else{for(var Ne="",Te=0;Te<i.length;Te++)Ne+='<TreeSeries DescId = "'+i[Te].descid+'" Revision = "'+i[Te].revision+'" DisplayName="'+n.escapeSpecialCharacters(i[Te].displayName)+'"></TreeSeries>';for(Te=0;Te<o.length;Te++)Ne+='<Context DescId = "'+o[Te].descid+'" DisplayName="'+n.escapeSpecialCharacters(o[Te].displayName)+'"></Context>';Se+="</Expression><Description>"+Ne+"</Description></CfgEffectivityExpression>"}var Ae="";Ae=n.getDisplayExpressionUsingXSLT(Se);A+_+M+I+B==""&&(Ae="");var Ie={},Oe={refineModecheckbox:y,configurationRevision:s,label:"",modelId:"",noCritExpression:"",psJson:N,mpJson:T,viewJson:null,milestoneJson:R,milestoneXml:B,iDateJson:{DateRanges:D},iUnitJson:w,xmlExpression:A,psXmlDesc:F,iDateXml:_,iUnitXml:M,impXml:I,mpXmlDesc:L,productstatecheckbox:N.length>0,unitcheckbox:M.length>0,datestatecheckbox:D.length>0,manufacturingplanCheckbox:T.length>0,milestoneCheckbox:!1,displayexpression:Ae,caNameArray:r,caxml:O,contextualDate:b,xRevXml:x,xRevJson:S};return Ie.expression=Oe,Ie.displayexpression=Ae,Ie.noCritExpression="",v.push(Ie),v},EvolutionXMLtoJSONConvertor:function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),i=[],o=[],s=t.getElementsByTagName("Description");if(null==window.DescriptionCount&&(window.DescriptionCount=1),s.length>0){for(var r=s[0].getElementsByTagName("TreeSeries"),c=0;c<r.length;c++){var d=r[c].attributes.DescId.value,u=r[c].attributes.Revision.value,p=r[c].attributes.DisplayName.value,g={descid:d,revision:u,displayName:p};i.push(g),window.DescriptionCount++}var m=s[0].getElementsByTagName("Context");for(c=0;c<m.length;c++){d=m[c].attributes.DescId.value,p=m[c].attributes.DisplayName.value,g={descid:d,displayName:p};o.push(g),window.DescriptionCount++}}var h=[],f=t.getElementsByTagName("Expression");if(f.length>0){var v=f[0].getElementsByTagName("Context");for(c=0;c<v.length;c++)if(1==v[c].childNodes.length&&"Boolean"===v[c].childNodes[0].tagName){var C={displayexpression:"false"==v[c].childNodes[0].textContent?"FALSE":"TRUE",expression:{name:v[c].attributes.HolderName.value,label:s[0]?n.getModelLabelFromDescriptions(s[0].getElementsByTagName("Context"),v[c].attributes.DescId.value):"",xmlExpression:"",impXml:"",iUnitXml:"",iDateXml:"",milestoneXml:"",modelId:"",psJson:[],mpJson:[],iUnitJson:[],iDateJson:{DateRanges:[]},milestoneJson:[],productstatecheckbox:!0,manufacturingplanstatecheckbox:!0,unitcheckbox:!0,datestatecheckbox:!0,milestoneCheckbox:!0,psXmlDesc:[],mpXmlDesc:[],displayexpression:"false"==v[c].childNodes[0].textContent?"FALSE":"TRUE"}};h.push(C)}else if(v[c].attributes.HolderName){var y=[],b=!1,x=!1,S="",E="";"OR"==(m=v[c]).firstChild.nodeName&&(b=!0,E=this.startEvolutionXML()+m.firstChild.outerHTML+"</Expression>"+s[0].outerHTML+"</CfgEffectivityExpression>"),y=0==m.getElementsByTagName("AND").length?m.childNodes[0]&&"OR"==m.childNodes[0].nodeName?m.childNodes[0].childNodes:m.childNodes:m.getElementsByTagName("AND")[0].childNodes;for(var D=[],w=[],N=[],T=[],A="",I="",O="",_="",M=[],R="",B=[],F=[],L=[],U=[],P=[],X=0;X<y.length;X++)if("OperationHandler"==y[X].nodeName)x=!0,b=!1;else if("NOT"==y[X].nodeName){if(y[X].getElementsByTagName("OperationHandler").length>0?x=!0:(b=!0,S=this.startEvolutionXML()+m.firstChild.outerHTML+"</Expression>"+s[0].outerHTML+"</CfgEffectivityExpression>"),null!=y[X].firstElementChild.attributes.Type){let e=y[X].firstElementChild.attributes.Type.value,t=n.getDisplayExpressionUsingXSLT(this.startEvolutionXML()+y[X].outerHTML+"</Expression>"+s[0].outerHTML+"</CfgEffectivityExpression>");"ProductState"==e?L.push(t):"ManufPlan"==e?U.push(t):"Unit"==e&&P.push(t)}}else if("TreeSeries"==y[X].nodeName){for(var V=y[X].getElementsByTagName("Tree"),k=y[X].getElementsByTagName("Single"),W=[],j=y[X].attributes.Type.value,H=0;H<V.length;H++){var G=(he=V[H].getElementsByTagName("Root"))[0].attributes.Name.value,J=he[0].attributes.Revision.value;d=0;if(null!=he[0].attributes.DescId){d=he[0].attributes.DescId.value;var z=G;null!=(ne=i.filter(function(e){return e.descid==d})[0])&&(z=ne.displayName,W.push(ne))}else"ProductState"==j?he[0].setAttribute("DescId","products"+G+"_"+J):he[0].setAttribute("DescId","manufacturingPlans"+G+"_"+J);var $=!1;null!=he[0].attributes.IsExcluded&&($=he[0].attributes.IsExcluded.value),null!=$&&null!=$&&"true"==$&&(b=!0);for(var q=a.getRange(G,J,z,!0,$),Y=V[H].getElementsByTagName("Leaf"),Q=0;Q<Y.length;Q++){var K=Y[Q].attributes.Name.value;u=Y[Q].attributes.Revision.value;null!=Y[Q].attributes.DescId?(d=Y[Q].attributes.DescId.value,z=K,null!=(ne=i.filter(function(e){return e.descid==d})[0])&&(z=ne.displayName,W.push(ne))):"ProductState"==j?Y[Q].setAttribute("DescId","products"+K+"_"+u):Y[Q].setAttribute("DescId","manufacturingPlans"+K+"_"+u);var Z=!0;null!=Y[Q].attributes.IsExcluded&&(Z=Y[Q].attributes.IsExcluded.value),q.addLeaves(K,u,z,Z)}"ProductState"==y[X].attributes.Type.value?N.push(q):T.push(q)}for(var ee=0;ee<k.length;ee++){var te=k[ee].attributes.Name.value,ie=k[ee].attributes.Revision.value;d=0;if(null!=k[ee].attributes.DescId){d=k[ee].attributes.DescId.value;var ne;z=te;null!=(ne=i.filter(function(e){return e.descid==d})[0])&&(z=ne.displayName,W.push(ne))}else"ProductState"==j?k[ee].setAttribute("DescId","products"+te+"_"+ie):k[ee].setAttribute("DescId","manufacturingPlans"+te+"_"+ie);null!=k[ee].attributes.IsExcluded&&k[ee].attributes.IsExcluded.value;q=a.getRange(te,ie,z,!1);"ProductState"==y[X].attributes.Type.value?N.push(q):T.push(q)}for(var oe=0;oe<W.length;oe++){var se='<TreeSeries DescId = "'+W[oe].descid+'" Revision = "'+W[oe].revision+'" DisplayName="'+n.escapeSpecialCharacters(W[oe].displayName)+'"></TreeSeries>';"ProductState"==y[X].attributes.Type.value?B.push(se):F.push(se)}var ae=new XMLSerializer;"ProductState"==y[X].attributes.Type.value?A=ae.serializeToString(y[X]):I=ae.serializeToString(y[X])}else if("Series"==y[X].nodeName){for(var re=y[X].childNodes,le=0;le<re.length;le++)if("SingleValue"==re[le].tagName){var ce={start:{buildOrder:De=re[le].attributes.Value.value},end:null};w.push(ce)}else if("Interval"==re[le].tagName){var de=re[le].getElementsByTagName("From"),ue=re[le].getElementsByTagName("To"),pe=de[0].attributes.Value.value,ge="INF";ue.length>0&&(ge=ue[0].attributes.Value.value);var me={start:{buildOrder:pe},end:{buildOrder:ge}};w.push(me)}_=(ae=new XMLSerializer).serializeToString(y[X])}else if("MilestonesTrack"==y[X].nodeName){for(V=y[X].getElementsByTagName("Tree"),k=y[X].getElementsByTagName("Single"),H=0;H<V.length;H++){var he;G=(he=V[H].getElementsByTagName("Root"))[0].attributes.Name.value,J=he[0].attributes.Name.value,$=!1;if(null!=he[0].attributes.IsExcluded)$=he[0].attributes.IsExcluded.value;for(q=a.getRange(G,J,G,!0),Y=V[H].getElementsByTagName("Leaf"),Q=0;Q<Y.length;Q++){K=Y[Q].attributes.Name.value,u=Y[Q].attributes.Name.value,Z=!0;null!=Y[Q].attributes.IsExcluded&&(Z=Y[Q].attributes.IsExcluded.value),q.addLeaves(K,u,K,Z)}M.push(q)}for(ee=0;ee<k.length;ee++){te=k[ee].attributes.Name.value,ie=k[ee].attributes.Name.value;null!=k[ee].attributes.IsExcluded&&k[ee].attributes.IsExcluded.value;q=a.getRange(te,ie,te,!1);M.push(q)}ae=new XMLSerializer;R=(ae=new XMLSerializer).serializeToString(y[X])}else if("Date"==y[X].nodeName){for(var fe=y[X].getElementsByTagName("Interval"),ve=(k=y[X].getElementsByTagName("SingleValue"),0);ve<fe.length;ve++){de=fe[ve].getElementsByTagName("From"),ue=fe[ve].getElementsByTagName("To"),pe="-INF";var Ce="",ye=null;null!=de[0]&&null!=de[0]&&null!=(Ce=de[0].attributes.Value.value)&&"undefined"!=Ce&&(Ce=Ce.replace("T00:00:00",""),null!=(ye=n.getDateObject(Ce))&&(pe=ye.toDateString()));ge="INF";var be="",xe=null;null!=ue[0]&&null!=ue[0]&&null!=(be=ue[0].attributes.Value.value)&&"undefined"!=be&&(be=be.replace("T23:59:59",""),null!=(xe=n.getDateObject(be))&&(ge=xe.toDateString()));var Se="";null!=pe&&"undefined"!=pe&&"-INF"!=pe?null!=ye&&(Se=ye.getTime()):(pe="-INF",Se="null");var Ee="";null!=ge&&"undefined"!=ge&&"INF"!=ge?null!=xe&&(Ee=xe.getTime()):(ge="INF",Ee="null");me={Start:pe,millisecStart:Se,End:ge,millisecEnd:Ee};D.push(me)}for(ee=0;ee<k.length;ee++){var De;ce={Start:De=k[ee].attributes.Value.value,millisecStart:new Date(De).getTime(),End:"null",millisecEnd:""};D.push(ce)}O=(ae=new XMLSerializer).serializeToString(y[X])}w=JSON.stringify({builds:w});var we='<?xml version="1.0" encoding="UTF-8"?>';we+=l.startEvolutionXML();var Ne=0;""==A&&Ne++,""==O&&Ne++,""==I&&Ne++,""==_&&Ne++,""==R&&Ne++;var Te="<AND>",Ae="</AND>";if(Ne>=4&&(Ae=Te=""),m.attributes.DescId,we+=Te+A+O+I+_+R+Ae,0==i.length)we+=l.endEvolutionXML();else{for(var Ie="",Oe=0;Oe<i.length;Oe++)Ie+='<TreeSeries DescId = "'+i[Oe].descid+'" Revision = "'+i[Oe].revision+'" DisplayName="'+n.escapeSpecialCharacters(i[Oe].displayName)+'"></TreeSeries>';for(Oe=0;Oe<o.length;Oe++)Ie+='<Context DescId = "'+o[Oe].descid+'" DisplayName="'+n.escapeSpecialCharacters(o[Oe].displayName)+'"></Context>';we+="</Expression><Description>"+Ie+"</Description></CfgEffectivityExpression>"}var _e="";_e=n.getDisplayExpressionUsingXSLT(we);A+O+_+I+R==""&&(_e=""),""==_e&&""!=S&&(_e=n.getDisplayExpressionUsingXSLT(S));C={};var Me="";o.forEach(function(e){e.descid==m.attributes.DescId.value&&(Me=e.displayName)});var Re={name:m.attributes.HolderName.value,label:Me,modelId:"",isCAUnsupportedForGraph:x,isUnsupportedForGraph:b,noCritExpression:S,orExpression:E,psJson:N,mpJson:T,viewJson:null,milestoneJson:M,milestoneXml:R,iDateJson:{DateRanges:D},iUnitJson:w,xmlExpression:A,psXmlDesc:B,iDateXml:O,iUnitXml:_,impXml:I,mpXmlDesc:F,notPSDesc:L,notMPDesc:U,notUnitDesc:P,productstatecheckbox:!0,unitcheckbox:!0,datestatecheckbox:!0,manufacturingplanstatecheckbox:!0,milestoneCheckbox:!0,displayexpression:_e};C.expression=Re,C.displayexpression=_e,C.noCritExpression=S,C.orExpression=E,h.push(C)}if(0==v.length){let e=f[0].getElementsByTagName("XGraph");for(let t=0;t<e.length;t++)if(1==e[t].childNodes.length&&"Boolean"===e[t].childNodes[0].tagName){let i={displayexpression:"false"==e[t].childNodes[0].textContent?"FALSE":"TRUE",expression:{name:e[t].attributes.HolderName.value,label:e[t].attributes.HolderName.value,holderType:e[t].attributes.HolderType.value,xmlExpression:"",impXml:"",iUnitXml:"",iDateXml:"",milestoneXml:"",modelId:"",psJson:[],mpJson:[],iUnitJson:[],iDateJson:{DateRanges:[]},milestoneJson:[],productstatecheckbox:!0,manufacturingplanstatecheckbox:!0,unitcheckbox:!0,datestatecheckbox:!0,milestoneCheckbox:!0,psXmlDesc:[],mpXmlDesc:[],displayexpression:"false"==e[t].childNodes[0].textContent?"FALSE":"TRUE"}};h.push(i)}else if(e[t].attributes.HolderName){let i=e[t];if(i){let t={},o=[],s=!1;"OR"==i.firstChild.nodeName&&(s=!0),o=0==i.getElementsByTagName("AND").length?i.childNodes[0]&&"OR"==i.childNodes[0].nodeName?i.childNodes[0].childNodes:i.childNodes:i.getElementsByTagName("AND")[0].childNodes;let r="",c=[];for(let e=0;e<o.length;e++)if("OperationHandler"==o[e].nodeName)s=!1;else if("NOT"==o[e].nodeName)s=!0;else if("XRevision"==o[e].nodeName){let t=o[e].getElementsByTagName("Tree"),i=o[e].getElementsByTagName("Single");for(let e=0;e<t.length;e++){let i=t[e].getElementsByTagName("Root"),n=i[0].attributes.Revision.value,o=!1;null!=i[0].attributes.IsExcluded&&(o=i[0].attributes.IsExcluded.value),null!=o&&null!=o&&"true"==o&&(s=!0);let r=a.getRange("rootname",n,"displayname",!0,o),l=t[e].getElementsByTagName("Leaf");for(let e=0;e<l.length;e++){let t=l[e].attributes.Revision.value,i=!0;null!=l[e].attributes.IsExcluded&&(i=l[e].attributes.IsExcluded.value),r.addLeaves("name",t,"displayname",i)}c.push(r)}for(let e=0;e<i.length;e++){let t=i[e].attributes.Revision.value,n=a.getRange("singlename",t,"displayname",!1);c.push(n)}r=(new XMLSerializer).serializeToString(o[e])}let d='<?xml version="1.0" encoding="UTF-8"?>';d+=l.startChangeXML(!0),d+='<XGraph HolderType="'+e[0].attributes.HolderType.value+'" HolderName="'+e[0].attributes.HolderName.value+'">'+r+"</XGraph>",d+=l.endChangeXML();let u='<?xml version="1.0" encoding="UTF-8"?>';u+=l.startxRevisionXML(),u+=l.buildXRevision(r),u+=l.endxRevisionXML();let p="";p=n.getDisplayExpressionUsingXSLT(d),""==r&&(p="");let g={},m="lblLabel";t={name:e[0].attributes.HolderName.value,label:m,modelId:"",holderType:e[0].attributes.HolderType.value,isUnsupportedForGraph:s,psJson:c,mpJson:[],viewJson:null,milestoneJson:[],milestoneXml:[],iDateJson:{DateRanges:[]},iUnitJson:[],xmlExpression:r,psXmlDesc:[],iDateXml:"",iUnitXml:"",impXml:"",mpXmlDesc:[],productstatecheckbox:!0,displayexpression:p,effExpressionXml:u},g.expression=t,g.displayexpression=p,g.noCritExpression=S,g.orExpression=E,h.push(g)}}}}return h},getHoldeInformation:function(e){let t={HolderName:" ",HolderDisplayName:" "};if(e){let i=e.replace("[","").replace("\r\n]",""),n=(new DOMParser).parseFromString(i,"text/xml").getElementsByTagName("CfgDictionary");n&&n.length>0&&(t.HolderName=n[0].attributes.HolderName.value,t.HolderDisplayName=n[0].attributes.HolderDisplayName.value)}return t},isxRevisionXML:function(e){let t=!1;if(e)if(e.indexOf("</XRevision>")>=0)t=!0;else{let i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression");if(i.length>0){0==i[0].getElementsByTagName("Context").length&&(t=!0)}}return t},EvolutionXMLtoJSONConvertorForxRevision:function(e){let t=[],i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression"),o=!1,s="",r=[],l={xRevXml:s,xRevJson:r,isUnsupportedForGraph:o};if(i.length>0)if(1==i[0].childNodes.length&&"Boolean"===i[0].childNodes[0].tagName){let e={expression:l,displayexpression:"false"==i[0].childNodes[0].textContent?"FALSE":"TRUE"};t.push(e)}else{let e=i[0],c=[];"OR"==e.firstChild.nodeName&&(o=!0),c=0==e.getElementsByTagName("AND").length?e.childNodes[0]&&"OR"==e.childNodes[0].nodeName?e.childNodes[0].childNodes:e.childNodes:e.getElementsByTagName("AND")[0].childNodes;let d=" ";for(let e=0;e<c.length;e++)if("OperationHandler"==c[e].nodeName)o=!1;else if("NOT"==c[e].nodeName)o=!0;else if("XRevision"==c[e].nodeName){let t=c[e].getElementsByTagName("Tree"),i=c[e].getElementsByTagName("Single");for(let e=0;e<t.length;e++){let i=t[e].getElementsByTagName("Root"),n=i[0].attributes.Revision.value,s=!1;null!=i[0].attributes.IsExcluded&&(s=i[0].attributes.IsExcluded.value),null!=s&&null!=s&&"true"==s&&(o=!0);let l=a.getRange("rootname",n,"displayname",!0,s),c=t[e].getElementsByTagName("Leaf");for(let e=0;e<c.length;e++){let t=c[e].attributes.Revision.value,i=!0;null!=c[e].attributes.IsExcluded&&(i=c[e].attributes.IsExcluded.value),l.addLeaves("",t,"",i)}r.push(l)}for(let e=0;e<i.length;e++){let t=i[e].attributes.Revision.value,n=a.getRange("",t,"",!1);r.push(n)}s=(new XMLSerializer).serializeToString(c[e])}if(""!=s){let e=this.startxRevisionXML()+s+this.endxRevisionXML();d=n.getDisplayExpressionUsingXSLT(e)}l.xRevXml=s,l.xRevJson=r,l.isUnsupportedForGraph=o;let u={};u.expression=l,u.displayexpression=d,t.push(u)}return t},getxRevXMLFromGlobalXML:function(e){let t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression")[0].getElementsByTagName("XRevision"),i=new XMLSerializer,n="";return t.length>0&&(n=i.serializeToString(t[0])),n},xRevisionXMLTOJsonConverter:function(e){let t=[],i=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression"),o=i[0].getElementsByTagName("XRevision");if(o.length>0){let e="",s=[];({xRevXml:e,xRevJson:s}=this.parseForXRevision(o[0]));let a={xRevXml:e,xRevJson:s},r={},l=this.startxRevisionXML()+e+this.endxRevisionXML();i[0]&&i[0].childNodes[0]&&"NOT"==i[0].childNodes[0].tagName&&(l=this.startxRevisionXML()+"<NOT>"+e+"</NOT>"+this.endxRevisionXML(),a.xRevJson=[]);let c=n.getDisplayExpressionUsingXSLT(l);r.expression=a,r.displayexpression=c,t.push(r)}return t},VariantJSONtoXMLConverter:function(i){let n="";for(var o=0;o<i.effectivity.length;o++){var s=i.effectivity[o];if(0==s.aCPformat.length)continue;var a=(n+='<Context HolderType = "Model" HolderName = "'+s.name+'">').length;let r=[a],c=a,d=[],u="";s.aCPformat.forEach(function(i){if(i.type===t.VARIANT){if(""!=u&&"BINARY"!=u&&"AND"!=u&&"OR"!=u&&"NOT"!=u&&"OPEN_SEPARATOR"!=u)return console.log("error in inline expression"),n="ERROR";var o=s.dicoMappedById[i.id].attributes._value;n=n+'<Feature Type="ConfigFeature" Name="'+o+'">',u="Feature",d.push("Feature")}else if(i.type===t.VARIABILITY_GROUP);else if(i.type===t.VALUE){if("Feature"==u){var p=s.dicoMappedById[i.id].attributes._value;n+=l.buildOption(p)}}else if(i.type===t.OPTION)if("VARIABILITY_GROUP"==u){var g=(m=s.dicoMappedById[i.id]).attributes._value;n+=l.buildOption(g)}else{if("BINARY"!=u&&""!=u&&"AND"!=u&&"OR"!=u&&"OPEN_SEPARATOR"!=u)return n="ERROR";g=(m=s.dicoMappedById[i.id]).attributes._value;var m,h=s.dicoMappedById[m.feature_id].attributes._value;n=n+'<Feature Type="ConfigFeature" Name="'+h+'">'+l.buildOption(g),u="Feature",d.push("Feature")}else if(i.type===e.binary_operator){let t="";if(i.id===e.and_id?t="AND":i.id===e.or_id&&(t="OR"),""===t)return console.log("error in inline expression"),n="ERROR";if(u!==t&&("OPEN_SEPARATOR"===u||void 0===u||"AND"==t&&"OR"==u||(n=n+"</"+u+">",d.pop(),"NOT"==(u=d[d.length-1])&&(n=n+"</"+u+">",d.pop(),u=d[d.length-1]),"AND"==u&&"OR"==t&&(n=n+"</"+u+">",d.pop(),u=d[d.length-1])),u!==t&&(c=a,r.length>0&&(c=r[r.length-1]),n=n.slice(0,c)+"<"+t+">"+n.slice(c),d.push(t)),u=t),"OR"==t){r.pop();let e=n.length;r.push(e)}}else if(i.type===e.unary_operator){if(i.id!==e.not_id)return console.log("error in inline expression"),n="ERROR";n+="<NOT>",d.push("NOT"),u="NOT"}else if(i.type===e.opening_separator){let e=n.length;r.push(e),d.push("OPEN_SEPARATOR"),u="OPEN_SEPARATOR"}else{if(i.type!==e.closing_separator)return console.log("error in inline expression"),n="ERROR";{let e=new Boolean(!1);for(let t=d.length-1;t>=0;t--){let i=d[t];if("OPEN_SEPARATOR"==i){d.pop(),e=!0;break}n=n+"</"+i+">",d.pop()}if(1!=e)return console.log("error in inline expression"),n="ERROR";"NOT"==(u=d[d.length-1])&&(n=n+"</"+u+">",d.pop(),u=d[d.length-1]),r.pop()}}console.log("expression XML = "+n)});for(let e=d.length-1;e>=0;e--){let t=d[e];"OPEN_SEPARATOR"!=t&&(n=n+"</"+t+">",d.pop())}n+="</Context>"}return""!=n&&(n=null!=i.effectivity&&i.effectivity.length>1?'<CfgEffectivityExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgEffectivityExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config"><Expression><MultiContextView>'+n+"</MultiContextView></Expression></CfgEffectivityExpression>":'<CfgEffectivityExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgEffectivityExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config"><Expression>'+n+"</Expression></CfgEffectivityExpression>"),console.log("expression XML = "+n),n},getValidXmlWithoutDisplayName:function(e){for(var t="<CfgFilterExpression>"+e+"</CfgFilterExpression>",i=(new DOMParser).parseFromString(t,"text/xml"),n=i.getElementsByTagName("Feature").length,o=0;o<n;o++)i.getElementsByTagName("Feature")[o].removeAttribute("DisplayName");return i.children[0]?i.children[0].innerHTML:""},getValidXmlWithoutDescId:function(e){for(var t=(new DOMParser).parseFromString(e,"text/xml"),i=t.getElementsByTagName("Context").length,n=0;n<i;n++)t.getElementsByTagName("Context")[n].removeAttribute("DescId");for(var o=t.getElementsByTagName("Root").length,s=0;s<o;s++)t.getElementsByTagName("Root")[s].removeAttribute("DescId");for(var a=t.getElementsByTagName("Leaf").length,r=0;r<a;r++)t.getElementsByTagName("Leaf")[r].removeAttribute("DescId");for(var l=t.getElementsByTagName("Single").length,c=0;c<l;c++)t.getElementsByTagName("Single")[c].removeAttribute("DescId");for(var d=t.getElementsByTagName("Date").length,u=0;u<d;u++)t.getElementsByTagName("Date")[u].removeAttribute("DescId");for(var p=t.getElementsByTagName("Feature").length,g=0;g<p;g++)t.getElementsByTagName("Feature")[g].removeAttribute("DescId");let m=t.getElementsByTagName("OperationHandler").length;for(let e=0;e<m;e++)t.getElementsByTagName("OperationHandler")[e].removeAttribute("DescId");var h=(new XMLSerializer).serializeToString(t);return h||""},VariantXMLToJSONConverter:function(e){for(var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Context"),i=new Array,n=0;n<t.length;n++)if(t[n].attributes.HolderName){var o=JSON.parse('{ "name" : "", "Combinations" : [] }');if(o.name=t[n].attributes.HolderName.value,1==t[n].childNodes.length&&"Boolean"===t[n].childNodes[0].tagName);else{var s=0,a=t[n].getElementsByTagName("OR");null==a||null!=a.length&&0!=a.length||((a=new Array)[0]=t[n]);for(var r=[],l=[],c=0;c<a[0].childNodes.length;c++){if("Feature"==a[0].childNodes[c].tagName){if(r=[],l=[],(S=(v=a[0].childNodes[c]).getElementsByTagName("Feature").length)>0){for(var d=0;d<S;d++){var u={};u.value=a[0].childNodes[c].childNodes[d].getAttribute("Name"),u.label="NOT_SET",u.DescId=a[0].childNodes[c].childNodes[d].getAttribute("DescId"),u.selection="S",l.push({Option:u})}var p={};p.value=v.getAttribute("Name"),p.label="NOT_SET",p.DescId=v.getAttribute("DescId"),r.push({Feature:p,Options:l})}o.Combinations.push({Id:s,Combination:r})}else{for(var g=[],m=(r=[],a[0].childNodes[c]),h=(m.childNodes.length,0);h<m.childNodes.length;h++){var f=[],v=m.childNodes[h];if("NOT"==m.tagName){if((S=(v=m.childNodes[h]).getElementsByTagName("Feature").length)>0){for(d=0;d<S;d++){var C={};C.value=v.childNodes[d].getAttribute("Name"),C.label="NOT_SET",C.DescId=v.childNodes[d].getAttribute("DescId"),C.selection="R",f.push({Option:C})}var y={};y.value=v.getAttribute("Name"),y.label="NOT_SET",y.DescId=v.getAttribute("DescId"),g.push({Feature:y,Options:f})}}else if("NOT"==m.childNodes[h].tagName){if((S=(v=m.childNodes[h].childNodes[0]).getElementsByTagName("Feature").length)>0){for(d=0;d<S;d++){var b={};b.value=v.childNodes[d].getAttribute("Name"),b.label="NOT_SET",b.DescId=v.childNodes[d].getAttribute("DescId"),b.selection="R",f.push({Option:b})}var x={};x.value=v.getAttribute("Name"),x.label="NOT_SET",x.DescId=v.getAttribute("DescId"),g.push({Feature:x,Options:f})}}else{var S;if((S=v.getElementsByTagName("Feature").length)>0){for(d=0;d<S;d++){var E={};E.value=v.childNodes[d].getAttribute("Name"),E.label="NOT_SET",E.DescId=v.childNodes[d].getAttribute("DescId"),E.selection="S",f.push({Option:E})}var D={};D.value=v.getAttribute("Name"),D.label="NOT_SET",D.DescId=v.getAttribute("DescId"),g.push({Feature:D,Options:f})}}}o.Combinations.push({Id:s,Combination:g})}s++}}i.push(JSON.stringify(o))}return i},VariantDescXMLtoJSONConverter:function(e){for(var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Description"),i=[],n=0;n<t.length;n++){for(var o=t[n].getElementsByTagName("Feature"),s=0;s<o.length;s++){var a={DescId:"",DisplayName:"",featureType:""};a.DescId=o[s].attributes.DescId.value,a.DisplayName=o[s].attributes.DisplayName.value,o[s].attributes.IsExclusive&&"true"===o[s].attributes.IsExclusive.value?a.featureType="Exclusive":o[s].attributes.IsExclusive&&"false"===o[s].attributes.IsExclusive.value&&(a.featureType="NonExclusive"),i.push(a)}for(var r=t[n].getElementsByTagName("Option"),l=0;l<r.length;l++){var c={DescId:"",DisplayName:""};c.DescId=r[l].attributes.DescId.value,c.DisplayName=r[l].attributes.DisplayName.value,i.push(c)}}return i},getExpressionView:function(e,t,i,o){var s=[],a=l.EvolutionXMLtoJSONConvertor(e),r=this.getEvolutionXmlByContext(e),c=l.EvolutionXMLtoJSONConvertor(t),d=this.getVariantXmlByContext(i);return a.forEach(function(e){var t={},i=n.getModelData(o,e.expression.name,e.expression.label),l=n.getVariantData(d,e.expression.name,e.expression.label),u=n.getEvolutionData(r,e.expression.name,e.expression.label),p=n.getEvolutionJSON(c,e.expression.name,e.expression.label),g=n.getEvolutionJSON(a,e.expression.name,e.expression.label);if(t.modelName=e.expression.name,t.modelLabel=e.expression.label,t.modelIcon=i.modelIcon,t.modelID=i.ID,t.variantExpression=l.variantExpression,t.variantDisplayExpression=l.variantDisplayExpression,t.isCAUnsupportedForGraph=e.expression.isCAUnsupportedForGraph,t.isUnsupportedForGraph=e.expression.isUnsupportedForGraph,1==t.isCAUnsupportedForGraph&&(t.caTooltipInfo=u.evolutionDisplayExpression),t.criteria=[],t.displayExpression=e.displayexpression,""!=e.expression.xmlExpression){var m={isCheckboxRequired:!1,isReadOnly:!0,name:"MV",value:e.expression.xmlExpression,valueJson:e.expression.psJson,xmlDesc:e.expression.psXmlDesc};t.criteria.push(m)}if(""!=e.expression.impXml){var h={isCheckboxRequired:!1,isReadOnly:!0,name:"MP",value:e.expression.impXml,valueJson:e.expression.mpJson,xmlDesc:e.expression.mpXmlDesc};t.criteria.push(h)}if(""!=e.expression.iUnitXml){var f={isCheckboxRequired:!1,isReadOnly:!0,name:"UNIT",value:e.expression.iUnitXml,valueJson:e.expression.iUnitJson};t.criteria.push(f)}if(""!=e.expression.iDateXml){var v={isCheckboxRequired:!1,isReadOnly:!0,name:"DATE",value:e.expression.iDateXml,valueJson:e.expression.iDateJson};t.criteria.push(v)}if(t.isOfficailUnsupportedForGraph=g.expression.isUnsupportedForGraph,1==t.isOfficailUnsupportedForGraph&&""!=g.noCritExpression&&(t.noCritOfficialExpression=n.getDisplayExpressionUsingXSLT(g.noCritExpression)),null!=p){if(t.projectedCriteria=[],t.projectedDisplayExpression=p.displayexpression,t.isProjectedUnsupportedForGraph=p.expression.isUnsupportedForGraph,1==t.isProjectedUnsupportedForGraph&&""!=p.noCritExpression&&(t.noCritProjectedExpression=n.getDisplayExpressionUsingXSLT(p.noCritExpression)),1==t.isProjectedUnsupportedForGraph&&""!=p.orExpression&&(t.orProjectedExpression=n.getDisplayExpressionUsingXSLT(p.orExpression)),""!=p.expression.xmlExpression){m={isCheckboxRequired:!1,isReadOnly:!0,name:"MV",value:p.expression.xmlExpression,valueJson:p.expression.psJson,xmlDesc:p.expression.psXmlDesc};t.projectedCriteria.push(m)}if(""!=p.expression.impXml){h={isCheckboxRequired:!1,isReadOnly:!0,name:"MP",value:p.expression.impXml,valueJson:p.expression.mpJson,xmlDesc:p.expression.mpXmlDesc};t.projectedCriteria.push(h)}if(""!=p.expression.iUnitXml){f={isCheckboxRequired:!1,isReadOnly:!0,name:"UNIT",value:p.expression.iUnitXml,valueJson:p.expression.iUnitJson};t.projectedCriteria.push(f)}if(""!=p.expression.iDateXml){v={isCheckboxRequired:!1,isReadOnly:!0,name:"DATE",value:p.expression.iDateXml,valueJson:p.expression.iDateJson};t.projectedCriteria.push(v)}}s.push(t)}),d.forEach(function(e){if(!1===n.checkIfModelExist(s,e.modelName,e.modelLabel)){var t={},i=n.getModelData(o,e.modelName,e.modelLabel);t.variantExpression=e.variantExpression,t.variantDisplayExpression=e.variantDisplayExpression,t.modelName=e.modelName,t.modelLabel=e.modelLabel,t.modelIcon=i.modelIcon,t.modelID=i.ID,t.displayExpression="",t.criteria=[],t.projectedDisplayExpression="",t.projectedCriteria=[],s.push(t)}}),s},getEvolutionXmlExpression:function(e){let t=new Array,i={evolutionExpression:"",evolutionDisplayExpression:""};if(null!=e&&null!=e&&""!=e){let o=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression");if(o.length>0)if(1==o[0].childNodes.length&&"Boolean"===o[0].childNodes[0].tagName)i.evolutionExpression="false"==o[0].childNodes[0].textContent?r.FALSE:r.TRUE,i.evolutionDisplayExpression="false"==o[0].childNodes[0].textContent?r.FALSE:r.TRUE,t.push(i);else{let e=this.startxRevisionXML()+o[0].innerHTML+this.endxRevisionXML(),s=n.getDisplayExpressionUsingXSLT(e);i.evolutionExpression=e,i.evolutionDisplayExpression=s,t.push(i)}}return t},getExpressionXRevisionView:function(e,t,i,n){let o=[];if(""!=e){let n=this.EvolutionXMLtoJSONConvertorForxRevision(e),s=this.getEvolutionXmlExpression(e),a=this.EvolutionXMLtoJSONConvertorForxRevision(t),r=this.getVariantXmlByContext(i);n.forEach(function(e){let t={modelName:"xrname",modelLabel:"xrlabel",modelIcon:" ",modelID:" "};if(t.variantExpression=r.length>0?r[0].variantExpression:" ",t.variantDisplayExpression=r.length>0?r[0].variantDisplayExpression:" ",t.criteria=[],t.displayExpression=s[0].evolutionDisplayExpression,""!=e.expression.xRevXml){let i={isCheckboxRequired:!1,isReadOnly:!0,name:"XR",value:e.expression.xRevXml,valueJson:e.expression.xRevJson,xmlDesc:e.psXmlDesc};t.criteria.push(i)}if(t.projectedCriteria=[],a.length>0){let e={isCheckboxRequired:!1,isReadOnly:!0,name:"XR",value:a[0].expression.xRevXml,valueJson:a[0].expression.xRevJson,xmlDesc:a[0].psXmlDesc};t.projectedCriteria.push(e)}o.push(t)})}return o},getEvolutionXmlByContext:function(e){var t=new Array;if(null!=e&&null!=e&&""!=e){var i=(new DOMParser).parseFromString(e,"text/xml"),o=i.getElementsByTagName("Context"),s=i.getElementsByTagName("Description")[0],a=null;null!=s&&(a=s.getElementsByTagName("Context"));for(var r=0;r<o.length;r++){var l={modelName:"",modelLabel:"",evolutionExpression:"",evolutionDisplayExpression:""};1==o[r].childNodes.length&&"Boolean"===o[r].childNodes[0].tagName?o[r].attributes.HolderName&&(l.modelName=o[r].attributes.HolderName.value,l.modelLabel=null==a?l.modelName:n.getModelLabelFromDescriptions(a,o[r].attributes.DescId.value),l.evolutionExpression="false"==o[r].childNodes[0].textContent?"FALSE":"TRUE",l.evolutionDisplayExpression="false"==o[r].childNodes[0].textContent?"FALSE":"TRUE",t.push(l)):o[r].attributes.HolderName&&(l.modelName=o[r].attributes.HolderName.value,null==a?(l.modelLabel=l.modelName,l.evolutionExpression='<CfgEffectivityExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgEffectivityExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config"><Expression>'+o[r].innerHTML+"</Expression></CfgEffectivityExpression>"):(l.modelLabel=n.getModelLabelFromDescriptions(a,o[r].attributes.DescId.value),l.evolutionExpression='<CfgEffectivityExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgEffectivityExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config"><Expression>'+o[r].innerHTML+"</Expression><Description>"+s.innerHTML+"</Description></CfgEffectivityExpression>"),l.evolutionDisplayExpression=n.getDisplayExpressionUsingXSLT(l.evolutionExpression,""),t.push(l))}}return t},getVariantXmlByContext:function(e){var t=new Array;if(null!=e&&null!=e&&""!=e)for(var i=(new DOMParser).parseFromString(e,"text/xml"),o=i.getElementsByTagName("Context"),s=i.getElementsByTagName("Description")[0],a=s.getElementsByTagName("Context"),l=0;l<o.length;l++){var c={modelName:"",modelLabel:"",variantExpression:"",variantDisplayExpression:""};1==o[l].childNodes.length&&"Boolean"===o[l].childNodes[0].tagName?o[l].attributes.HolderName&&(c.modelName=o[l].attributes.HolderName.value,c.modelLabel=n.getModelLabelFromDescriptions(a,o[l].attributes.DescId.value),c.variantExpression="FALSE",c.variantDisplayExpression="FALSE","true"==o[l].childNodes[0].innerHTML&&(c.variantExpression=r.TRUE,c.variantDisplayExpression=r.TRUE),t.push(c)):o[l].attributes.HolderName&&(c.modelName=o[l].attributes.HolderName.value,c.modelLabel=n.getModelLabelFromDescriptions(a,o[l].attributes.DescId.value),c.variantExpression='<CfgEffectivityExpression xs:schemaLocation = "urn:com:dassault_systemes:config CfgEffectivityExpression.xsd" xmlns:xs = "http://www.w3.org/2001/XMLSchema-instance" xmlns = "urn:com:dassault_systemes:config"><Expression>'+o[l].innerHTML+"</Expression><Description>"+s.innerHTML+"</Description></CfgEffectivityExpression>",c.variantDisplayExpression=n.getDisplayExpressionUsingXSLT(c.variantExpression),t.push(c))}return t},getModelsFromExpression:function(e,t){var i,o,s,a,r,l,c=[],d=new DOMParser;if(""!=e){o=(i=d.parseFromString(e,"text/xml")).getElementsByTagName("Expression")[0].getElementsByTagName("Context"),s=i.getElementsByTagName("Description")[0];for(var u=0;u<o.length;u++){var p=o[u];c.push({modelName:p.attributes.HolderName.value,modelLabel:n.getModelLabelFromDescriptions(s.getElementsByTagName("Context"),p.attributes.DescId.value)})}}if(""!=t){r=(a=d.parseFromString(t,"text/xml")).getElementsByTagName("Expression")[0].getElementsByTagName("Context"),l=a.getElementsByTagName("Description")[0];for(u=0;u<r.length;u++){var g=(p=r[u]).attributes.HolderName.value,m=n.getModelLabelFromDescriptions(l.getElementsByTagName("Context"),p.attributes.DescId.value);0==n.checkIfModelExist(c,g,m)&&c.push({modelName:g,modelLabel:m})}}return c},getXRevisionElementPIDFromExpression:function(e){if(""!=e){(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("Expression")[0].getElementsByTagName("XRevision")}return[]},buildJSDisplayExpression:function(e,t){var i=null,o="";if(this.isxRevisionXML(e)){let t=this.getEvolutionXmlExpression(e);o+='<div class="last-model-consolidated-section"><div class="section-label">'+r.RevisionControl+"</div>",o+='<div class="expression-text">'+t[0].evolutionDisplayExpression+"</div></div>"}else{"EVOLUTION"==t.toUpperCase()?i=this.getEvolutionXmlByContext(e):"VARIANT"==t.toUpperCase()&&(i=this.getVariantXmlByContext(e));for(var s=0;s<i.length;s++){var a=i[s],l="";l=s==i.length-1?'<div class="last-model-consolidated-section">':'<div class="model-consolidated-section">',l+='<div class="section-label">'+n.escapeSpecialCharacters(a.modelLabel)+"</div>",l+='<div class="expression-text">'+("EVOLUTION"==t.toUpperCase()?"FALSE"==a.evolutionDisplayExpression?r.FALSE:"TRUE"==a.evolutionDisplayExpression?r.TRUE:n.escapeSpecialCharacters(a.evolutionDisplayExpression):"FALSE"==a.variantDisplayExpression?r.FALSE:n.escapeSpecialCharacters(a.variantDisplayExpression))+"</div>",o+=l+="</div>"}}return o}};return l}),define("DS/CfgBaseUX/scripts/CfgColumnManager",["text!DS/CfgBaseUX/assets/CfgColumnManager.json","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","DS/TreeModel/DataModelSet","DS/DataGridView/DataGridView","DS/CfgBaseUX/scripts/CfgColumnManagerToolbar","DS/CfgBaseUX/scripts/CfgDialog","DS/CfgBaseUX/scripts/CfgUserSettings","DS/CfgBaseUX/scripts/CfgUtility"],function(e,t,i,n,o,s,a,r,l,c){var d={CfgColumnManagerObject:null,create:function(t){d.options=t,d.CfgColumnManagerObject=JSON.parse(e),d.render()},async getCustomAttributesForVarOpt(){var e=[],t=[];const i=await c.fetchExtension([{Variant:"Variant"},{"Variant Value":"Variant Value"},{"Variability Group":"Variability Group"},{"Variability Option":"Variability Option"}]);(console.log({finalInterfaceList:i}),i&&i.results)&&i.results.forEach(function(e){t[e.name]=[],e&&e.interfaces&&e.interfaces.length>0&&e.interfaces.forEach(function(i){t[e.name].push(i.name)})});const n=await this._getCustomAttributesFromExtension({classes:["Variant","Variant Value","Variability Group","Variability Option"]},t);var o=[];for(let t in n)n[t].forEach(t=>{o.includes(t.attrName)||(e.push(this.createColumnDefination(t.attrType,t.attrName,t.attrNameNLS)),o.push(t.attrName))});return e},_getCustomAttributesFromExtension:function(e,t){var i=[];return new UWA.Promise(function(n,o){var s=[];e.classes.forEach(function(e){t[e].forEach(function(t){i[e]=[],s.push(c.fetchCustomAttributes(t).then(function(t){if(t&&t.Attributes){var n=t.Name?t.Name:"",o=t.NLSName?t.NLSName:"";widget&&"OnPremise"!==widget.getValue("x3dPlatformId")&&(o=o.split("__")[0]),t.Attributes.forEach(function(t){if(t&&t.Name&&t.NLS){i[e].push({extName:n,extNameNLS:o,attrName:t.Name,attrNameNLS:t.NLS,attrType:t.Type});t.Name}})}},function(e){console.log("Err")}))})}),UWA.Promise.all(s).then(function(){n(i)},function(){o()})})},createColumnDefination:function(e,t,i,n){return{text:i||t,dataIndex:t,minWidth:"110",groupableFlag:!1,editableFlag:!1,selectableFlag:!1,sortableFlag:!1,width:"110",allowUnsafeHTMLContent:!0,visibleFlag:!1,pinned:n,typeRepresentation:e.toLowerCase(),getCellTypeRepresentation:function(e){return null!=e.cellModel?"string":"functionIcon"},getCellSemantics:function(e){if(null!=e.cellModel);else if("undefined"==e.cellModel||null==e.cellModel)return{icon:{iconName:"reload wux-ui-3ds-spin",fontIconFamily:WUXManagedFontIcons.Font3DS}}},getCellValue:function(e,i){return e.nodeModel.getAttributeValue(t)}}},createColumns:function(){return[{text:"",showTextFlag:!1,dataIndex:"checkbx",icon:"eye",typeRepresentation:"boolean",alwaysVisibleFlag:"true",allowResetToUndefinedByUIFlag:!1,editionPolicy:"EditionInPlace",width:"50",minWidth:"50",resizableFlag:"false"},{text:n.CFG_ColumnName,dataIndex:"Name",typeRepresentation:"string",alwaysVisibleFlag:"true",width:"270",minWidth:"270"}]},getTypeColumns:function(t){d.CfgColumnManagerObject=JSON.parse(e);var i=UWA.clone(d.CfgColumnManagerObject[t]);return d.processForColumnNLS(i),i},getTypeColumnsForDictionary:async function(t,i){Array.isArray(d.columnsForDictionary)||(d.varOptCustomAttr=await this.getCustomAttributesForVarOpt()),d.CfgColumnManagerObject=JSON.parse(e);let n=[],o=[],s=["type","name","description"];i&&i.results&&i.results.forEach(e=>{e&&e.basicData&&e.basicData.forEach(e=>{!e.hasOwnProperty("name")||s.includes(e.name)||o.includes(e.name)||(n.push(this.createColumnDefination(e.type,e.name,e.nls)),o.push(e.name))})}),d.CfgColumnManagerObject.VariantsAndOptionGroups=[...d.CfgColumnManagerObject.VariantsAndOptionGroups,...d.varOptCustomAttr,...n];var a=UWA.clone(d.CfgColumnManagerObject[t]);return d.processForColumnNLS(a),d.columnsForDictionary=a,d.columnsForDictionary},processForColumnNLS:function(e){for(var t=0;t<e.length;t++)e[t].text=n[e[t].dataIndex]||e[t].text},processForUserSettings:function(e){},getColumnIndexes:function(t){var i=[];d.CfgColumnManagerObject=JSON.parse(e);for(var n=UWA.clone(d.CfgColumnManagerObject[t]),o=0;o<n.length;o++)i.push(n[o].dataIndex);return i},createTreeDocument:async function(){var e=this.getTypeColumns(this.options.type),n=new o,s=new t({dataModelSet:n});s.prepareUpdate();for(var a=0;a<e.length;a++){var r={Name:"",checkbx:!1};r.Name=e[a].text;var c=l.UserSettings[d.options.viewId+"_"+d.options.type][e[a].dataIndex];null!=c&&(r.checkbx=c);var u=new i({label:e[a].text,grid:UWA.clone(r),data:e[a]});s.addRoot(u)}s.pushUpdate(),this.treeDocument=s},render:async function(){await this.createTreeDocument();var e={treeDocument:this.treeDocument,columns:this.createColumns(),defaultColumnDef:{width:"auto",typeRepresentation:"string",editableFlag:!0,editionPolicy:""}};null!=this.options.touchMode&&(e.touchMode=this.options.touchMode),this.columnManagerGridView=new s(e);var t=this.CfgColumnManagerObject[this.options.type];if(null!=t&&0==t.length){this.columnManagerGridView.placeholder=n.No_ColumnsToManage;this.columnManagerGridView.columns=[{text:"",dataIndex:"type",typeRepresentation:"string",alwaysVisibleFlag:"true",minWidth:"270"}]}return this.columnManagerGridView.showEditableFeedbackFlag=!1,this.columnManagerGridView.layout.rowsHeader=!1,this.columnManagerGridView.onContextualEvent=function(e){return null},this.ViewContainer=this.getContainerView(),this},getContainerView:function(){var e={className:"",title:n.ColumnPropertiesManagerHeader,parent:this.options.parent,body:this.columnManagerGridView,overlay:!0,mode:"",closable:!1,animate:!0,resizable:!0,footer:[],persistId:"",appNamePosition:0,modalFlag:!1,width:440,height:490,minHeight:100,minWidth:370,style:{"min-height":"350px"},dialogue:{header:n.ColumnPropertiesManagerHeader,buttonArray:[],target:this.options.parent}};this.CfgFloatingPanel=new r(e),this.columnManagerGridView.inject(this.CfgFloatingPanel.container),this.columnManagerGridView.getContent(".wux-layouts-collectionview").setStyle("top","55px"),a.toolbar=this.columnManagerGridView.setToolbar(a.writetoolbarDefination()),a.toolbar.onToolbarClickCallback=this.onToolbarClickCallback,a.toolbar.inject(this.CfgFloatingPanel.container),this.CfgFloatingPanel.render(),this.CfgFloatingPanel.WUXDialogObj.maximizedFlag=!0},onToolbarClickCallback:function(e){"SAVE"==e._event&&(d.onSave(e),d.CfgFloatingPanel.WUXDialogObj.destroy()),"CLOSE"==e._event&&(d.onClose(e),d.CfgFloatingPanel.WUXDialogObj.destroy())},getSettingsFromDGV:function(){var e={};if(null!=this.treeDocument){for(var t=this.treeDocument.getRoots(),i={},n=0;n<t.length;n++)i[t[n]._options.data.dataIndex]=t[n]._options.grid.checkbx;e=Object.assign(e,i)}return e},onSave:function(e){var t={};t[d.options.viewId+"_"+d.options.type]=d.getSettingsFromDGV(),l.saveUserSettings(t),d.options.onCloseCallback(e)},onClose:function(e){d.options.onCloseCallback(e)}};return d}),define("DS/CfgBaseUX/scripts/CfgModel",["UWA/Core","UWA/Class/Model","DS/CfgBaseUX/scripts/CfgXMLServices","DS/CfgBaseUX/scripts/CfgUtility"],function(e,t,i,n){return t.extend({defaults:function(){return{marketingName:"",name:"",image:"",icon:"",id:"",state:"",owner:"",expression:"",displayexpression:"",referenceRevision:" "}},getContextSessionExpression:function(){var e=[],t='<?xml version="1.0" encoding="UTF-8"?>';t+=i.startSessionXML();var o=this.get("expression"),s=this.get("name"),a=this.get("marketingName");null==window.DescriptionCount&&(window.DescriptionCount=1),window.DescriptionCount++,null!=o.psXmlDesc&&o.psXmlDesc.length>0&&e.push(o.psXmlDesc),null!=o.mpXmlDesc&&o.mpXmlDesc.length>0&&e.push(o.mpXmlDesc),t+=i.buildContext(s,o,!0);var r='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+s+'"></Context>';return null!=a&&" "!=a&&(r='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+n.escapeSpecialCharacters(a)+'"></Context>'),e.push(r),0==e.length?t+=i.endSessionXML():t+="</Expression><Description>"+e+"</Description></CfgEffectivityExpression>",t},getContextEvolutionExpression:function(){var e=[],t='<?xml version="1.0" encoding="UTF-8"?>';t+=i.startEvolutionXML();var o=this.get("expression"),s=this.get("name"),a=this.get("marketingName");null==window.DescriptionCount&&(window.DescriptionCount=1),window.DescriptionCount++,null!=o.psXmlDesc&&o.psXmlDesc.length>0&&e.push(o.psXmlDesc),null!=o.mpXmlDesc&&o.mpXmlDesc.length>0&&e.push(o.mpXmlDesc),t+=i.buildContext(s,o,!0);var r='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+s+'"></Context>';return null!=a&&" "!=a&&(r='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+n.escapeSpecialCharacters(a)+'"></Context>'),e.push(r),0==e.length?t+=i.endEvolutionXML():t+="</Expression><Description>"+e+"</Description></CfgEffectivityExpression>",t},clearExpression:function(e){var t=this.get("expression"),i=[];i=JSON.stringify({builds:i}),t.psJson=[],t.mpJson=[],t.iDateJson={DateRanges:[]},t.iUnitJson=i,t.xmlExpression="",t.iDateXml="",t.iUnitXml="",t.impXml="",t.milestoneJson=[],t.milestoneXml="",t.psXmlDesc=[],t.mpXmlDesc=[],t.displayexpression=e,this.set("displayexpression",t.displayexpression),this.set("expression",t)}})}),define("DS/CfgBaseUX/scripts/CfgCustomAttributeUtility",["DS/CfgBaseUX/scripts/CfgUtility","DS/CfgBaseUX/scripts/CfgColumnManager","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS"],function(e,t,i){"use strict";return{updateAsyncAttrColForDictionary:async function(t,i,n){try{const o=await e.getInstanceObjectsByReadService(i,"true","true");return this.updateAsyncAttrColumnValues(t,n,o),o}catch(e){console.log("Error updating the column asynchronously")}},updateAsyncAttrColumnValues:async function(e,t,i,n){try{var o=i.results;if(null!=o)for(let i=0;i<o.length;i++)for(let s=0;s<t.length;s++){let a=[...e],r=o[i];"instance"===n?r.physicalID==t[s].options.data.instance.instanceId&&this.updateTreeNodeModel(t[s],a,r):"reference"===n?r.physicalID==t[s].options.data.instance.referenceId&&this.updateTreeNodeModel(t[s],a,r,n):r.physicalID==t[s].options.data.self.physicalID&&this.updateTreeNodeModel(t[s],a,r)}}catch(e){console.log("Error updating the column asynchronously")}},updateTreeNodeModel:function(e,t,i,n){if(e.prepareUpdate(),"reference"===n)for(let n=0;n<t.length;n++){let o=i.data.find(e=>{if(t[n].includes(e.name)){if(t[n].replace("_"+i.type,"")===e.name)return e}});if(o&&Array.isArray(o.value))e.setAttribute(t[n],o.value[0]);else{let o=i.basicData.find(e=>{if(t[n].includes(e.name)){if(t[n].replace("_"+i.type,"")===e.name)return e}});o&&Array.isArray(o.value)?e.setAttribute(t[n],o.value[0]):e.setAttribute(t[n],"")}}else for(let n=0;n<t.length;n++){let o=i.data.find(e=>e.name===t[n]);if(o&&Array.isArray(o.value))e.setAttribute(t[n],o.value[0]);else{let o=i.basicData.find(e=>e.name===t[n]);o&&Array.isArray(o.value)?e.setAttribute(t[n],o.value[0]):e.setAttribute(t[n],"")}}e.pushUpdate()},getColumns:function(e,n,o){let s=o?new Set(o):new Set,a=[];e&&e.results.length>0&&e.results.forEach(e=>{e&&e.basicData&&e.basicData.forEach(o=>{"reference"===n&&o.hasOwnProperty("name")&&!s.has(o.name+"_"+e.type)?(s.add(o.name+"_"+e.type),a.push(t.createColumnDefination("string",o.name+"_"+e.type,o.nls+" ("+i.Reference+")","left"))):"instance"===n&&o.hasOwnProperty("name")&&!s.has(o.name)&&(s.add(o.name),a.push(t.createColumnDefination("string",o.name,o.nls,"left")))}),e&&e.data&&e.data.forEach(o=>{"reference"===n&&o.hasOwnProperty("name")&&!s.has(o.name+"_"+e.type)?(s.add(o.name+"_"+e.type),a.push(t.createColumnDefination("string",o.name+"_"+e.type,o.nls+" ("+i.Reference+")","left"))):"instance"===n&&o.hasOwnProperty("name")&&!s.has(o.name)&&(s.add(o.name),a.push(t.createColumnDefination("string",o.name,o.nls,"left")))})});let r=[...s];return o&&(r=r.filter(e=>!o.includes(e))),{inputPredicates:r,columnsList:JSON.parse(JSON.stringify(a))}}}}),define("DS/CfgBaseUX/scripts/CfgFeatureOptionsView",["UWA/Class/View","DS/DataGridView/DataGridView","DS/CfgBaseUX/scripts/CfgFeatureOptionViewsToolbar","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","DS/Core/PointerEvents","DS/Controls/Toggle","DS/CfgBaseUX/scripts/CfgColumnManager","DS/CfgBaseUX/scripts/CfgDialog","DS/CfgBaseUX/scripts/CfgUserSettings","DS/CfgBaseUX/scripts/CfgData","DS/CfgBaseUX/scripts/CfgCustomAttributeUtility","DS/CfgBaseUX/scripts/CfgUtility","DS/CfgBaseUX/scripts/CfgUXEnvVariables","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json"],function(e,t,i,n,o,s,a,r,l,c,d,u,p,g){var m=!0,h=e.extend({init:function(e){this._parent(e)},render:async function(){var e;if(h.CommonSpecific=JSON.parse(g).CfgConfigurationAnalysisCommonSpecifc,this.isCustomAttributesEnabled=p.getCfgUXEnvVariables().isCustomAttributesEnabled,this.readServiceLimit=p.getCfgUXEnvVariables().readServiceLimit,!0===this.isCustomAttributesEnabled){let t=[],i=[];this&&this.options&&this.options.treeDocument&&this.options.treeDocument.getAllDescendants()&&(i=this.options.treeDocument.getAllDescendants().slice(0,this.readServiceLimit)),i&&i.forEach(e=>{e&&e.options&&e.options.data&&e.options.data.self&&t.push(e.options.data.self.physicalID)});var o=t.slice(0,this.readServiceLimit),s=await u.getInstanceObjectsByReadService(o,"true","true");e=await this.createDictionaryColumn(s)}else e=await this.createDictionaryColumn();var a={treeDocument:this.options.treeDocument,columns:e,defaultColumnDef:{width:"auto",typeRepresentation:"string",editableFlag:!0,editionPolicy:""},identifier:"feature_Options_DictionaryView"};if(null!=this.options.touchMode&&(a.touchMode=this.options.touchMode),this.featureOptionGridView=new t(a),!0===this.isCustomAttributesEnabled){var r=this.featureOptionGridView.columns.map(e=>e.dataIndex);this.inputPredicates=r.filter(e=>"checkbx"!==e&&e),d.updateAsyncAttrColumnValues(this.inputPredicates,this.options.treeDocument.getAllDescendants().slice(0,this.readServiceLimit),s),this.objListDataPopulated=new Set(o),this.featureOptionGridView.onDelayedModelDataRequest=(async e=>{if("OnScrollEnd"===e.context||"OnReady"===e.context||"OnResize"===e.context){var t=e.collectionView;let i=[],n=[];if(-1!=e.endNodeIndex&&-1!=e.startNodeIndex){for(let o=e.startNodeIndex;o<=e.endNodeIndex;o++)this.objListDataPopulated&&this.objListDataPopulated.size>0&&!this.objListDataPopulated.has(t.model[o].options.data.self.physicalID)?(i.push(t.model[o].options.data.self.physicalID),n.push(t.model[o])):this.objListDataPopulated&&0===this.objListDataPopulated.size&&(i.push(t.model[o].options.data.self.physicalID),n.push(t.model[o]));if(i.length>0){if(n.length<=this.readServiceLimit){await d.updateAsyncAttrColForDictionary(this.inputPredicates,i,n)}else if(n.length>this.readServiceLimit){for(let e=0;e<n.length;e+=this.readServiceLimit){let t=i.slice(e,e+this.readServiceLimit),o=n.slice(e,e+this.readServiceLimit);await d.updateAsyncAttrColForDictionary(this.inputPredicates,t,o)}}this.objListDataPopulated=new Set([...i,...this.objListDataPopulated])}}}})}var l=this.options.features;if(null!=l&&0==l.length){this.featureOptionGridView.placeholder=n.No_Conf_Features_Title;this.featureOptionGridView.columns=[{text:"",dataIndex:"type",typeRepresentation:"string",alwaysVisibleFlag:"true",minWidth:"270"}]}return i.toolbar=this.featureOptionGridView.setToolbar(i.writetoolbarDefination()),this.toolbar=i.toolbar,i.toolbar.onToolbarClickCallback=this.options.onToolbarClickCallback,this.registerToolbarEvents(),h.onFeatureOptionSelectionChange=this.options.onFeatureOptionSelectionChange,this.featureOptionGridView.showEditableFeedbackFlag=!1,this.featureOptionGridView.layout.rowsHeader=!1,!1===this.isCustomAttributesEnabled&&(this.updateColumnsFromSettings(),this.featureOptionGridView.onContextualEvent=function(e){return null}),this},createDictionaryColumn:async function(e){var t=[{text:n.CFG_Names,dataIndex:"tree",typeRepresentation:"string",alwaysVisibleFlag:"true",width:"270",minWidth:"270",pinned:"left"}];if(!0===this.isCustomAttributesEnabled)var i=await a.getTypeColumnsForDictionary("VariantsAndOptionGroups",e);else i=a.getTypeColumns("VariantsAndOptionGroups");return t=(t=t.concat(i)).concat([{text:n.CFG_Selection,dataIndex:"checkbx",typeRepresentation:"boolean",alwaysVisibleFlag:"true",setCellValue:this.setCellValue,hasCellValue:this.hasCellValue,allowResetToUndefinedByUIFlag:!1,editionPolicy:"EditionInPlace",width:"110",minWidth:"50",pinned:"right",resizableFlag:"false"}])},setColumnRemoveWarningToShow:function(e){m=e},updateColumnsFromSettings:function(){for(var e=l.UserSettings.dictionaryView_VariantsAndOptionGroups,t=this.featureOptionGridView.columns,i=0;i<t.length;i++)"string"==t[i].typeRepresentation&&null!=t[i]&&null!=e[t[i].dataIndex]&&(t[i].visibleFlag=e[t[i].dataIndex]);this.featureOptionGridView.columns=UWA.clone(t)},hasCellValue:function(e){return null==c.configurationAnalysisMode&&null==c.configurationAnalysisMode||"specific"!=c.configurationAnalysisMode||"Variant"!=e.nodeModel.options.grid.type},setCellValue:function(e){null==c.configurationAnalysisMode&&null==c.configurationAnalysisMode||"specific"!=c.configurationAnalysisMode||0!=e.nodeModel._options.grid.checkbx||e.nodeModel.getParent().getAllDescendants().forEach(e=>{e.setAttribute("checkbx",!1)});var t=!0;if(!0===e.nodeModel._options.grid.checkbx){if(1==m)return void f(e);e.nodeModel.setAttribute("checkbx",!1),h.onFeatureOptionSelectionChange(e.nodeModel._options.data,!0),t=!1}else e.nodeModel.setAttribute("checkbx",!0),h.onFeatureOptionSelectionChange(e.nodeModel._options.data,!1);if(0!=(i=e.nodeModel.getAllDescendants()).length)i.forEach(function(e){e.setAttribute("checkbx",t)});else{let t=p.getCfgUXEnvVariables().isWebUXAutocompleteEnabled;var i=e.nodeModel.getParent().getAllDescendants();if(!1===t||void 0===t){if(0!=i.length){var n=!0;i.forEach(function(e){!0===e._options.grid.checkbx&&(n=!1)})}!0===n?e.nodeModel.getParent().setAttribute("checkbx",!1):e.nodeModel.getParent().setAttribute("checkbx",!0)}else{i.every(e=>!0===e._options.grid.checkbx)?e.nodeModel.getParent().setAttribute("checkbx",!0):e.nodeModel.getParent().setAttribute("checkbx",!1)}}},selectColumns:function(e){this.options.treeDocument.prepareUpdate();for(var t=this.options.treeDocument.getAllDescendants(),i={},n=0;n<e.length;n++)for(i[e[n].dataIndex]=!0,childrenCount=0;null!=e[n].children&&childrenCount<e[n].children.length;childrenCount++)i[e[n].children[childrenCount].dataIndex]=!0;for(n=0;n<t.length;n++)if(t[n].setAttribute("checkbx",!1),!0===i[t[n].options.data.self.physicalID])if(t[n].options&&t[n].options.children){t[n].options.children.map(e=>e.options.data.self.physicalID).every(e=>!0===i[e])&&t[n].setAttribute("checkbx",!0)}else t[n].setAttribute("checkbx",!0);this.options.treeDocument.pushUpdate()},setChecked:function(e){this.options.treeDocument.prepareUpdate();for(var t=this.options.treeDocument.getAllDescendants(),i={},n=0;n<e.length;n++)i[e[n]]=!0;for(n=0;n<t.length;n++)t[n].setAttribute("checkbx",!1),!0===i[t[n].options.grid.name]&&t[n].setAttribute("checkbx",!0);this.options.treeDocument.pushUpdate()},cssAdjustmentsForLayout:function(e,t){e?this.featureOptionGridView.getContent(".wux-layouts-collectionview").setStyle("top","48px"):this.featureOptionGridView.getContent(".wux-layouts-collectionview").setStyle("top","34px")},registerToolbarEvents:function(){if(void 0!==this.toolbar){var e=this;this.toolbar.addEventListener("liveChange",function(t){if(1==t.dsModel._properties.value.dirty){var i=l.UserSettings.dictionaryView_VariantsAndOptionGroups;e.options.treeDocument.prepareUpdate(),e.options.treeDocument.getAllDescendants().forEach(function(e){e.show()}),e.options.treeDocument.getRoots().forEach(function(e){e.expandAll()});var n=t.dsModel._properties.value.value;if(""==n)return void e.options.treeDocument.pushUpdate();for(var o=e.options.treeDocument.getRoots(),s=0;s<o.length;s++){var a=o[s],r=a.getAllDescendants();if(!e.isFeatureSearchCriteria(a,n,i)){for(var c=0,d=0;d<r.length;d++)e.isOptionSearchCriteria(r[d],n,i)&&(r[d].hide(),c++);c==r.length&&a.hide()}}}e.options.treeDocument.pushUpdate()}),!1!==this.isCustomAttributesEnabled&&void 0!==this.isCustomAttributesEnabled||this.toolbar.updateNodeModel("ID_ColumnManager",{visibleFlag:!0})}},isFeatureSearchCriteria:function(e,t,i){return-1!=e._options.label.toUpperCase().indexOf(t.toUpperCase())||-1!=e._options.grid.name.toUpperCase().indexOf(t.toUpperCase())||-1!=e._options.grid.type.toUpperCase().indexOf(t.toUpperCase())&&1==i.type||-1!=e._options.grid.description.toUpperCase().indexOf(t.toUpperCase())&&1==i.description},isOptionSearchCriteria:function(e,t,i){var n=!1,o=!1,s=!1,a=!1;return-1==e._options.label.toUpperCase().indexOf(t.toUpperCase())&&(n=!0),-1==e._options.grid.name.toUpperCase().indexOf(t.toUpperCase())&&(o=!0),-1==e._options.grid.type.toUpperCase().indexOf(t.toUpperCase())&&(s=!0),-1==e._options.grid.description.toUpperCase().indexOf(t.toUpperCase())&&(a=!0),0==s&&0==i.type&&(s=!0),0==a&&0==i.description&&(a=!0),n&&o&&s&&a}});function f(e){var t=function(){if(e.nodeModel.setAttribute("checkbx",!1),h.onFeatureOptionSelectionChange(e.nodeModel._options.data,!0),_value=!1,0!=(t=e.nodeModel.getAllDescendants()).length)t.forEach(function(e){e.setAttribute("checkbx",_value)});else{var t=e.nodeModel.getParent().getAllDescendants();let n=p.getCfgUXEnvVariables().isWebUXAutocompleteEnabled;if(!1===n||void 0===n){if(0!=t.length){var i=!0;t.forEach(function(e){!0===e._options.grid.checkbx&&(i=!1)})}!0===i?e.nodeModel.getParent().setAttribute("checkbx",!1):e.nodeModel.getParent().setAttribute("checkbx",!0)}else{t.every(e=>!0===e._options.grid.checkbx)?e.nodeModel.getParent().setAttribute("checkbx",!0):e.nodeModel.getParent().setAttribute("checkbx",!1)}}a.closeDialog()}.bind(e),i=function(){e.nodeModel.setAttribute("checkbx",!0),e.nodeModel.updateOptions(),a.closeDialog()}.bind(e),o={width:539,height:215,isResizable:!1,dialogue:{header:n.CFG_Remove_Column_Heading,buttonArray:[{label:"Ok",labelValue:n.Ok,handler:t,className:"primary"},{label:"Cancel",labelValue:n.Cancel,handler:i,className:"default"}],target:widget.body,object:null,postCrossHandler:i}},a=new r(o);a.render(),a.container.setStyle("overflow","auto"),a.container.setHTML(n.CFG_Remove_Column_Warning+"<br><br>"+n.CFG_Remove_Column_Question+"<br>"),a.footerButton.Ok.domId="cfgWarningOKBtn",a.footerButton.Cancel.domId="cfgWarningCloseBtn";var l=new s({label:n.CFG_Remove_Column_Preference_Warning,domId:"cfgWarningToggle"});l.addEventListener("change",function(e){m=1!=e.dsModel.checkFlag}),l.inject(a.container)}return h}),define("DS/CfgBaseUX/scripts/CfgCollection",["UWA/Core","UWA/Class/Collection","DS/CfgBaseUX/scripts/CfgModel","DS/CfgBaseUX/scripts/CfgXMLServices","DS/CfgBaseUX/scripts/CfgUtility","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX"],function(e,t,i,n,o,s){return t.extend({model:i,init:function(e){this._parent(e),this._options=e,this.imgUrlModelMed=enoviaServerFilterWidget.baseURL+"/common/images/I_Model_Thumbnail.png",this.imgUrlModelLarge=enoviaServerFilterWidget.baseURL+"/common/images/I_Model_Thumbnail.png",this.imgUrlModelSmall=enoviaServerFilterWidget.baseURL+"/common/images/iconSmallModel.png"},initialising:function(){for(var e=0;e<this._options.expressionArray.length;e++){var t=this._options.expressionArray[e],i="",n=this.imgUrlModelLarge,o=this.imgUrlModelSmall;null!=t.image&&"undefined"!=t.image&&""!=t.image&&(n=t.image),null!=t.icon&&"undefined"!=t.icon&&""!=t.icon&&(o=t.icon),t.displayexpression&&(i=t.displayexpression);var s={selectedDataType:t.selectedDataType,referenceRevision:t.referenceRevision,marketingName:t.marketingName,name:t.name,image:n,icon:o,id:t.id,state:t.state,owner:t.owner,expression:t.expression,displayexpression:i};this.addModel(s)}},addModel:function(e){var t="";t=e.displayexpression?e.displayexpression:this._options.emptyContextText;var i=this.imgUrlModelLarge,n=this.imgUrlModelSmall;null!=e.image&&"undefined"!=e.image&&""!=e.image&&(i=e.image),null!=e.icon&&"undefined"!=e.icon&&""!=e.icon&&(n=e.icon);var a={selectedDataType:e.selectedDataType,referenceRevision:e.referenceRevision,marketingName:e.marketingName,name:e.name,image:i,icon:n,id:e.id,state:e.state,owner:e.owner,expression:e.expression,displayexpression:t},r=this.get(e.id);null==r||null==r?this.push(a):"Dashboard"!=this._options.environment&&o.showwarning(e.marketingName+" "+s.Model_Exist,"error")},removeModel:function(e){this.remove(e.get("id"))},getselectedModelsIDs:function(){for(var e=[],t=0;t<this.length;t++){var i=this.at(t);e.push(i.get("id"))}return e},getGlobalChangeExpression:function(){var e='<?xml version="1.0" encoding="UTF-8"?>';e+=n.startChangeXML(),this.length>1&&(e+="<MultiContextView>");var t="";null==window.DescriptionCount&&(window.DescriptionCount=1);for(var i=0;i<this.length;i++){window.DescriptionCount++;var o=this.at(i),s=n.buildContext(o.get("name"),o.get("expression"));""==s&&(s+='<Context HolderType = "Model" HolderName = "'+o.get("name")+'">',s+="<Boolean>false</Boolean>",s+="</Context>"),t+=s}return e+=t,this.length>1&&(e+="</MultiContextView>"),e+=n.endChangeXML(),""==t&&(e=""),e},getGlobalEvolutionExpression:function(){var e='<?xml version="1.0" encoding="UTF-8"?>';e+=n.startEvolutionXML(),this.length>1&&(e+="<MultiContextView>");var t="";null==window.DescriptionCount&&(window.DescriptionCount=1);for(var i=0;i<this.length;i++){window.DescriptionCount++;var o=this.at(i),s=n.buildContext(o.get("name"),o.get("expression"));t+=s}return e+=t,this.length>1&&(e+="</MultiContextView>"),e+=n.endEvolutionXML(),""==t&&(e=""),e},getGlobalSessionExpression:function(){var e='<?xml version="1.0" encoding="UTF-8"?>';e+=n.startSessionXML();var t=[],i=[];const s=[];for(const e of this._models)0==o.isEmptyEvolutionExpressionForModel(e)&&s.push(e);s.length>1&&(e+="<MultiContextView>");var a="";null==window.DescriptionCount&&(window.DescriptionCount=1);for(var r=0;r<this.length;r++){window.DescriptionCount++;var l=this.at(r);if(0==o.isEmptyEvolutionExpressionForModel(l)){var c=l.get("expression"),d=l.get("name"),u=l.get("marketingName");a+=n.buildContext(d,c),null!=c.psXmlDesc&&c.psXmlDesc.length>0&&t.push(c.psXmlDesc),null!=c.mpXmlDesc&&c.mpXmlDesc.length>0&&t.push(c.mpXmlDesc);var p='<Context DescId = "'+window.DescriptionCount+'" DisplayName="'+o.escapeSpecialCharacters(u)+'"></Context>';i.push(p)}}return e+=a,s.length>1&&(e+="</MultiContextView>"),e+="</Expression><Description>",i.forEach(function(t){e+=t}),t.length>0&&t.forEach(function(t){var i="";t.forEach(function(e){i+=e}),e+=i}),e+="</Description></CfgEffectivityExpression>",""==a&&(e=""),e},getGlobalSessiondata:function(){var e=[];let t="";if("undefined"!=this._models)if(this._models.length>0&&"Model"!=this._models[0].get("selectedDataType"))0==o.isEmptyEvolutionExpressionForModel(this._models[0])&&e.push(this._models[0].id),t=this._models[0].get("expression").effExpressionXml;else{for(var i=0;i<this._models.length;i++)0==o.isEmptyEvolutionExpressionForModel(this._models[i])&&e.push(this._models[i].id);t=this.getGlobalSessionExpression()}return{"Dictionary Contexts":e,"Evolution Expression":t}},updatedisplayExpressionsAsPerDisplayNames:function(){for(var e=0;e<this.length;e++){var t=this.at(e),i=t.getContextEvolutionExpression(),n=o.getDisplayExpressionUsingXSLT(i);""==n?t.set("displayexpression",this._options.emptyContextText):t.set("displayexpression",n)}},getEffectivityModelsIDs:function(){for(var e=[],t=0;t<this.length;t++){var i=this.at(t);i.get("displayexpression")!=s.emptyContextText_Evo_Effectivity&&e.push(i.get("id"))}return e},getEffectivityxRevReferenceIDs:function(){let e=[];for(let t=0;t<this.length;t++){let i=this.at(t);i.get("displayexpression")!=s.emptyContextText_xRevision_SessionEffectivity&&i.get("displayexpression")!=s.emptyContextText_xRevision_Applicability&&i.get("expression")&&""!=i.get("expression").modelId&&e.push(i.get("expression").modelId)}return e}})}),define("DS/CfgBaseUX/scripts/CfgModelView",["UWA/Class/View","DS/W3DXComponents/Views/Item/SetView","DS/W3DXComponents/Views/Item/TileView","DS/W3DXComponents/Views/Layout/GridScrollView","DS/W3DXComponents/Collections/ActionsCollection","DS/W3DXComponents/Views/EmptyView","DS/WebappsUtils/WebappsUtils","DS/PlatformAPI/PlatformAPI","DS/UIKIT/Tooltip","DS/CfgBaseUX/scripts/CfgModelTileView","DS/CfgBaseUX/scripts/CfgModel","DS/CfgBaseUX/scripts/CfgCollection","DS/CfgBaseUX/scripts/CfgXMLServices","DS/CfgBaseUX/scripts/CfgUtility","DS/CfgBaseUX/scripts/CfgData","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","css!DS/CfgBaseUX/styles/CfgModelView.css"],function(e,t,i,n,o,s,a,r,l,c,d,u,p,g,m,h){"use strict";return e.extend({collection:null,modelSetView:null,modelSetViewDiv:null,imgUrlModelLarge:null,imgUrlModelMed:null,imgUrlModelSmall:null,contextualMenuActions:null,setup:function(e){m.evolutionModelItemClickCount=0,this._parent(e),this.imgUrlModelMed=enoviaServerFilterWidget.baseURL+"/common/images/I_Model_Thumbnail.png";var t=this,i={id:"Edit",text:this.options.editActionLabel,fonticon:"pencil",icon:"",handler:function(e){m.evolutionModelItemClickCount++,1===m.evolutionModelItemClickCount&&t.options.editActionCallback(e.model)}},n=(this.options.clearActionLabel,{id:"Remove",text:this.options.removeActionLabel,fonticon:"trash",icon:"",handler:function(e){t.options.removeModelCallback(e.model)}});this.contextualMenuActions=new Array,this.contextualMenuActions.push(i),"EditEvolution"!==this.options.mode&&this.contextualMenuActions.push(n)},render:function(e){this.collection=e;var i=this;this.modelSetView=new t({collection:i.collection,contents:{withMultisel:!1,useInfiniteScroll:!1,usePullToRefresh:!1,itemViewOptions:{className:"item-view",mapping:{title:function(){return new UWA.Element("div",{id:"title",html:"<span class=type>"+g.escapeSpecialCharacters(this.model.get("marketingName"))+"</span>",styles:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}}).innerHTML},image:function(){return this.model.get("image")},subtitle:function(){let e="",t="";null!=this.model&&(t="<span class=type>"+(e=this.model.get("name"))+"</span>");var i=new UWA.Element("div",{id:"subtitle",html:t,styles:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}});return i.getChildren().length>0&&i.getChildren()[0].setAttribute("title",e),i.innerHTML},content:function(){var e=this.model.get("state");"Preliminary"==e?e=h.Preliminary:"Marketing"==e?e=h.Marketing:"Review"==e?e=h.Review:"Active"==e?e=h.Active:"Inactive"==e&&(e=h.Inactive);var t=new UWA.Element("div",{id:"pcStatus",html:"<span class=type>"+h.Maturity+":"+e+"</span>"});t.getChildren().length>0&&t.getChildren()[0].setAttribute("title",e);let i=this.model.get("owner");var n=new UWA.Element("div",{id:"pcDesc",html:"<span class=type>"+h.Owner+":"+i+"</span>",styles:{"white-space":"nowrap","text-overflow":"ellipsis",overflow:"hidden"}}),o=new UWA.Element("div",{id:"pcCont"});return e&&""!=e&&o.appendChild(t),i&&""!=i&&o.appendChild(n),o.innerHTML},icon:function(){return this.model.get("icon")},expression:function(){var e="",t=g.escapeSpecialCharacters(this.model.get("displayexpression"));return"FALSE"==t&&(t=i.options.emptyContextText),t!==i.options.emptyContextText&&t!==h.emptyContextText_xRevision_Applicability&&t!==h.emptyContextText_xRevision_SessionEffectivity||(e+='<span style="color:orange;" class="fonticon fonticon-attention"></span>'),e+=t,e=(e+="").replace(/\n/gi,"<br/>"),new UWA.Element("div",{id:"expressionContent",html:e,styles:{}}).innerHTML}},contextualActions:i.contextualMenuActions},views:[{id:"tile",title:h.Model_Tile_Title,view:n,itemView:c,defaultView:!0}],emptyView:s.extend({defaultOptions:{title:'<div><div><img src="'+i.imgUrlModelMed+'"/></div><div class="noModelsErrorMessage">'+i.options.noModelsErrorMessage+"</div></div>"}}),events:{onItemViewClick:function(e,t){m.evolutionModelItemClickCount++,1===m.evolutionModelItemClickCount&&i.options.editActionCallback(i.collection.get(t.model.id))}}}}),this.modelSetViewDiv=this.modelSetView.render(),this.modelSetViewDiv.inject(this.options.parentElement),this.options.evolutionSpinner&&this.options.evolutionSpinner.hide(),this.adjustTileStyles(),i.adjustResponsiveView(),this.adjustTileFlexStyles(),this.options.parentElement.addEvent&&this.options.parentElement.addEvent("resize",function(){i.adjustResponsiveView()})},adjustTileStyles:function(){var e="calc(100% - 1px)";e=-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"calc(100% - 10px)":"calc(100% - 1px)",this.modelSetViewDiv.getElement(".set-header").setStyles({display:"none"}),"EditEvolution"===this.options.mode?(this.modelSetViewDiv.getElement(".set-contents").setStyles({height:"100%"}),this.modelSetViewDiv.getElement(".grid-container").setStyles({width:e})):"SessionEffectivity"===this.options.mode?(this.modelSetViewDiv.getElement(".set-contents").setStyles({height:"calc(100% - 50px)"}),this.modelSetViewDiv.getElement(".grid-container").setStyles({width:e})):"Applicability"===this.options.mode&&(this.modelSetViewDiv.getElement(".set-contents").setStyles({height:"calc(100% - 50px)"}),this.modelSetViewDiv.getElement(".grid-container").setStyles({width:"calc(100% - 10px)"})),(null==this.options.Access||"false"!=this.options.Access.SetApplicability&&"false"!=this.options.Access.SetSessionEffectvity&&"false"!=this.options.Access.SetEvolutionEffectvity)&&1!=this.options.readOnly||this.modelSetViewDiv.getElements(".CfgCustomModelTile-actions").forEach(function(e){e.setStyles({display:"none"})})},adjustTileFlexStyles:function(){for(var e=this.modelSetViewDiv.getElements(".CfgCustomModelTile-container"),t=0;t<e.length;t++)e[t].setStyles({flex:"0 0 100%"}),e[t].setStyles({outline:"none"}),e[t].setStyle("min-width","min-content")},adjustResponsiveView:function(){if(this.options.parentElement.getDimensions){var e=this.options.parentElement.getDimensions().width;e<750?this.responsiveHandler("small"):e>=750&&this.responsiveHandler("desktop")}},responsiveHandler:function(e){var t=null,i=null,n=null,o=null,s=null;"small"===e?(t="none !important;",i="5px",n="30px",o="10px",s="unset"):"desktop"===e&&(t="block !important;",i="230px",n="30px",o="0px",s="150px"),this.modelSetViewDiv.getElements(".CfgCustomModelTile-header").forEach(function(e){e.setAttribute("style","display:"+t)}),this.modelSetViewDiv.getElements(".CfgCustomModelTile-subtitle").forEach(function(e){e.setAttribute("style","display:"+t)}),this.modelSetViewDiv.getElements(".CfgCustomModelTile-content").forEach(function(e){e.setAttribute("style","display:"+t)}),this.modelSetViewDiv.getElements(".CfgCustomModelTile-body").forEach(function(e){e.setAttribute("style","max-width:"+s)}),this.modelSetViewDiv.getElements(".CfgCustomModelTile-expression-container").forEach(function(e){e.setStyles({left:i,right:n,top:o})}),this.modelSetViewDiv.getElements(".CfgCustomModelTile-expression").forEach(function(t){"small"===e?t.setStyles({border:"none","padding-left":"0px"}):"desktop"===e&&t.setStyles({"border-left":"1px solid lightgrey","padding-left":"10px"})})}})}),define("DS/CfgBaseUX/scripts/CfgCAListSummaryToolbar",["DS/PlatformAPI/PlatformAPI","DS/CoreEvents/ModelEvents","DS/CfgBaseUX/scripts/CfgData","DS/CfgBaseUX/scripts/CfgUXEnvVariables","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS","DS/CfgBaseUX/scripts/CfgToggleIconTypeRepresentation"],function(e,t,i,n,o,s,a){var r=Object.create(null);return r.toolbar=null,r.writeToolbarDefination=function(e){r.options=e,"showInherited"===e.filterView?r.showInherited=!0:r.showInherited=!1,r.cfgUXEnvVariablesJS=n.getCfgUXEnvVariables(),r.showImplicit="showImplicit"===e.filterImplicitView;var o=null;o=r.cfgUXEnvVariablesJS.showInheritedToggle?{entries:[{id:"CfgCASummaryListHeaderlabel",dataElements:{typeRepresentation:"string",readOnly:!0,value:e.toolbarHeaderLabel,visibleFlag:e.isHeaderVisible},touchMode:e.touchMode||!1},{id:"toggleInherited",dataElements:{typeRepresentation:"toggleCAIcon",value:r.showInherited,tooltip:s.CfgLabelInherited},onNodeUpdate:{module:"DS/CfgBaseUX/scripts/CfgCAListController",func:"onToggleInherited"},position:"far"}],typeRepresentations:{}}:{entries:[{id:"CfgCASummaryListHeaderlabel",dataElements:{typeRepresentation:"string",readOnly:!0,value:e.toolbarHeaderLabel,visibleFlag:e.isHeaderVisible},touchMode:e.touchMode||!1}],typeRepresentations:{}};var l={icon:"change-action-proposed",iconFamily:WUXManagedFontIcons.Font3DS,iconSize:"2x",customTypeRep:"toggleCAIcon",cssClasses:["toggle-icon"]};if(a.toggleIconInToolbar(l),e.isCFGRoleAvail){var c={id:"caSummaryAdd",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"plus",fontIconFamily:1},action:{module:"DS/CfgBaseUX/scripts/CfgCAListController",func:"oncaSummaryAdd"},tooltip:s.CfgLabelAddCA,visibleFlag:!e.isFrozenCR},disabled:!1,position:"far"},d={id:"caSummaryRemove",dataElements:{typeRepresentation:"functionIcon",icon:{iconName:"remove",fontIconFamily:1},action:{module:"DS/CfgBaseUX/scripts/CfgCAListController",func:"oncaSummaryRemove"},tooltip:s.CfgLabelRemoveCA,visibleFlag:!e.isFrozenCR},disabled:!0,position:"far"};o.entries.splice(1,0,c,d)}if(r.cfgUXEnvVariablesJS.showImplicitToggleForCA){let e={id:"toggleImplicitCAIcon",dataElements:{typeRepresentation:"toggleImplicitCAIcon",value:r.showImplicit,tooltip:s.CfgToggleImplicitTooltip},onNodeUpdate:{module:"DS/CfgBaseUX/scripts/CfgCAListController",func:"onToggleImplicit"},position:"far"};o.entries.push(e);let t={icon:"change-action-sync",iconFamily:WUXManagedFontIcons.Font3DS,iconSize:"2x",customTypeRep:"toggleImplicitCAIcon",cssClasses:["toggle-icon"]};a.toggleIconInToolbar(t)}return r.pubSubEvents(),i.clear(),i.cfgRevSummaryToolbarActionEvents=new t,r.subscribeCfgRevSummaryToolbarActionEvents(),JSON.stringify(o)},r.pubSubEvents=function(){e.subscribe("CfgCAListSelection",function(e){"caSummaryView"==e.mode&&r.enableDisableButton(e.flag)}),e.subscribe("CfgCAListUnselection",function(e){"caSummaryView"==e.mode&&r.enableDisableButton(e.flag)})},r.activeInactiveToggleInheritedCAIcon=function(e){r.toolbarActionBar.getNodeModelByID("toggleInherited").updateOptions({grid:{data:e}})},r.activeInactiveToggleImplicitCAIcon=function(e){r.toolbarActionBar.getNodeModelByID("toggleImplicitCAIcon").updateOptions({grid:{data:e}})},r.subscribeCfgRevSummaryToolbarActionEvents=function(){i.cfgRevSummaryToolbarActionEvents.subscribe({event:"CfgRevToggleInheritedDialogCancelClicked"},function(e){r.activeInactiveToggleInheritedCAIcon(e)}),i.cfgRevSummaryToolbarActionEvents.subscribe({event:"CfgRevToggleImplicitDialogCancelClicked"},function(e){r.activeInactiveToggleImplicitCAIcon(e)}),i.cfgRevSummaryToolbarActionEvents.subscribe({event:"updateTheCASummaryViewHeaderLabelWithTheCount"},e=>{r.toolbarActionBar.getNodeModelByID("CfgCASummaryListHeaderlabel").updateOptions({grid:{data:`${s.CfgLabelChangeActions} (${e})`}})})},r.enableDisableButton=function(e){r.toolbarActionBar,r.toolbarActionBar.updateNodeModel("caSummaryRemove",{disabled:e})},r}),define("DS/CfgBaseUX/scripts/CfgGenericAutocompleteUtility",["DS/CfgBaseUX/scripts/CfgUtility","DS/CfgBaseUX/scripts/CfgSearchConfiguration","DS/CfgBaseUX/scripts/CfgUXEnvVariables","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","css!DS/CfgBaseUX/styles/cfgAutocompleteControlUX.css"],function(e,t,i,n){"use strict";return{getAutocompleteSearchData:function(t,i,n,o,s,a){var r="";if(t&&(r=this.getObjectTypeQueryString(t)),a&&r?r="("+r+" OR "+a+') AND ( NOT current:"Inactive")':a&&(r+=a+' AND ( NOT current:"Inactive")'),"getUsingModelId"==i&&o){var l=o.map(function(e){return"physicalid : "+e}).join(" OR ");r+=r?" AND "+l:l}else if("getUsingString"==i){var c=this.getFormatedLogicalExpression(n,s);r+=c}return new Promise(function(t,i){var n={};n={with_indexing_date:!0,with_nls:!0,label:"cfgLabel",locale:"en",select_predicate:["ds6w:label","ds6w:type","ds6wg:revision","ds6w:description","ds6w:identifier","ds6w:modified","ds6w:created","ds6w:responsible","ds6w:lastModifiedBy","ds6wg:marketing_Name"],select_file:["icon","thumbnail_2d"],query:r,order_by:"desc",order_field:"relevance",nresults:1e3,start:"0",source:[],tenant:enoviaServerFilterWidget.tenant},n=JSON.stringify(n);e.makeWSCall("/search?xrequestedwith=xmlhttprequest","POST","enovia","application/json",n,function(e){t(e)},function(e){i(e)},!0,{isfederated:"true"})})},getObjectTypeQueryString:function(e){var t="";if(e)if(e instanceof Array){t="(";for(let i=0;i<e.length;i++)t+="(",t+='flattenedtaxonomies:"types/'+e[i]+'"',t+=") OR ";t=(t+=")").replace(") OR )","))")}else t='(flattenedtaxonomies:"types/'+e+'")';return t},getFormatedLogicalExpression:function(e,t){var i="";if(e){var n=e.trim(),o=n||null;i=" AND (([ds6w:label]:(*"+o+"*)) OR ([name]:(*"+o+"*)))"}t&&t.length>0&&(i+="AND ("+this.getQueryforPC(t)+")");return i},getQueryforPC:function(e){if(e&&e.length>0){return e.map(function(e){return"based_95_on_95_model_95_pid:"+e}).join(" OR ")}},activateDashboardSearch:function(e,i,o,s,a,r){var l=e.replace(/ /g,"_"),c=n["Cfg_Select_"+l],d=e,u=enoviaServerFilterWidget.myRole,p='( NOT current:"Inactive")'+this.getFormatedLogicalExpression(o,a),g=new t(!0,c),m=[];if(null!=s._models)for(var h=0;h<s._models.length;h++){var f=s._models[h];m.push(f.id)}g.activate(c,d,u,i,"",m,p,r)},activateDashboardSearchMultiTypes:function(e,i,o){let s=n.Cfg_Select_Multi_Types,a=e,r=enoviaServerFilterWidget.myRole,l='( NOT current:"Inactive")'+this.getFormatedLogicalExpression(o);new t(!1,s).activate(s,a,r,i,"",[],l)},activateNativeSearch:function(t,n,o,s,a){var r="",l="";s&&(l=this.getObjectTypeQueryString(s)),a&&l?l="("+l+" OR "+a+') AND ( NOT current:"Inactive")':a&&(l+=a+' AND ( NOT current:"Inactive")'),o&&(r=this.getFormatedLogicalExpression(o));let c=i.getCfgUXEnvVariables();if("Applicability"!=t||c.xRevisionActivation){var d={modelIds:n,precondition:r,queryString:l},u=JSON.stringify(d),p={eventName:{SessionEffectivity:"cfgEditEvolutionEffectivity",configurationcontext:"cfgConfigurationContext",Applicability:"cfgApplicability"}[t],operation:"ActivateSearch",operationVersion:"1.0",content:u};e.sendNotificationWebInWin(p)}else{for(var g="",m=0;m<n.length;m++)g+="NOT (physicalid:"+n[m]+")";g+=r,CATCefSendString("Add_Models="+g)}},activate3DSpaceSearch:function(e,t,i){if("Model"==e){var n="";i=i?"*"+i+"*":"*",null==enoviaServerFilterWidget.fixForSearchInOpener?n="../../common/emxFullSearch.jsp?field=TYPES=type_Model:label="+i+":CURRENT!=policy_Model.state_Inactive&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../effectivity/ModelSearch.jsp?fromOperation=search&txtExcludeOIDs="+t:1==enoviaServerFilterWidget.fixForSearchInOpener&&(n="../common/emxFullSearch.jsp?field=TYPES=type_Model:label="+i+":CURRENT!=policy_Model.state_Inactive&table=AEFGeneralSearchResults&selection=multiple&formName=BCform&submitAction=refreshCaller&hideHeader=true&HelpMarker=emxhelpfullsearch&submitURL=../effectivity/ModelSearch.jsp?fromOperation=search&txtExcludeOIDs="+t),showChooser(n,850,630)}}}}),define("DS/CfgBaseUX/scripts/CfgAutocompleteControl",["UWA/Core","DS/UIKIT/Autocomplete","UWA/Event","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUX","DS/CfgBaseUX/scripts/CfgGenericAutocompleteUtility","DS/Controls/TooltipModel","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json","css!DS/CfgBaseUX/styles/cfgAutocompleteControlUX.css"],function(e,t,i,n,o,s,a){"use strict";var r={8:"backspace",9:"tab",13:"enter",27:"escape",37:"left-arrow",38:"up-arrow",39:"right-arrow",40:"down-arrow",46:"del"};return t.extend({defaultOptions:{placeholder:n.Autocomplete_PlaceHolder,minLengthBeforeSearch:3,multiSelect:!1,closableItems:!0,floatingSuggestions:!0,targetTypes:[],sources:[],precondition:null,datasetName:"cfg_data",typeDelayBeforeSearch:500,objectMapper:null},init:function(e){this._parent(e),this.appCore=e.appCore,this.modelCollection=e.collection?e.collection:[],this.existingModelList=[],this.initCFGAutocomplete()},initCFGAutocomplete:function(){this.addDataset({name:this.options.datasetName,items:[],remoteSearchEngine:function(e,t){var i=this,n=t,s=i.options.typeOfObject,a=i.options.xRevQuery;return new Promise(function(t,r){var l=i.options.Models?i.options.Models:[];o.getAutocompleteSearchData(s,"getUsingString",n,[],l,a).then(function(n){i.createDataSet(n).then(function(i){var n={matchingItems:[]};i&&i.items&&(n.matchingItems=i.items),n.dataset=e,t(n)},function(e){console.log(e),r(e)})},function(t){t.type="error",t.dataset=e,r(t),console.log("Error : "+t)})})}},{templateEngine:function(t,i,o){var s,r="",l=JSON.parse(a);t.addClassName("cfg-itemContainer"),(s=e.createElement("span",{class:"cfgAutocomplete-item-label"})).setText(o.label),l.isAutocompleteNameEnabled&&(r=e.createElement("span",{class:"cfgAutocomplete-item-name"})).setText(" - "+o.name),o.disabled&&s.appendText(n.alreadyAddedLabel),t.setContent([e.createElement("img",{src:o.icon,class:"cfgAutocomplete-item-icon"}),s,r])},onError:function(){console.error(arguments)}})},createDataSet:function(e){var t=this;return new Promise(function(i,n){var o=[];if(t.existingModelList=[],t.modelCollection._models&&t.modelCollection._models.length>0&&(t.existingModelList=t.getselectedModelsIDs(t.modelCollection._models)),e.results&&e.results.length>0)for(var s=0;s<e.results.length;s++){var a="",r="",l="",c="",d="",u=!1;e.results[s].attributes.forEach(function(e){"ds6wg:marketing_Name"!=e.name&&"ds6w:label"!=e.name||(a=e.value),"ds6w:what/ds6w:status"==e.name&&(r=e.value),"preview_url"==e.name&&(l=e.value),"type_icon_url"==e.name&&(c=e.value),"ds6w:identifier"==e.name&&(d=e.value),t.existingModelList.indexOf(e.value)>-1&&(u=!0)});if("Model.Inactive"!=r){o.push({icon:c,image:l,label:a,name:d,value:e.results[s].attributes[0].value,subLabel:"",_attributes:e.results[s].attributes,disabled:u});var p={name:"Objects"};p.items=o}}i(p)})},onKeyUp:function(e){var t=i.getElement(e),n=r[e.keyCode],o="up-arrow"===n,s="down-arrow"===n,a="enter"===n,l="escape"===n,c="tab"===n;e.stopPropagation();var d=this.elements.input.value;if(o||s||a||l||c)a&&d.length>0&&d.length<this.options.minLengthBeforeSearch&&"3DSpace"!=this.options.environment&&(this.reset(),this.launchSearch(d));else{if(0===t.value.length)return this.onHideSuggests(),this.options.showSuggestsOnFocus&&this.showAll(),void(this.options.multiSelect||(this.selectedItems[0]&&this.onUnselect(this.selectedItems[0]),this.elements.container.toggleClassName(this.CLS_FILLED,!1)));t.value.length>0&&!this.options.multiSelect&&this.elements.container.toggleClassName(this.CLS_FILLED,!0),t.value.length>=this.options.minLengthBeforeSearch&&(clearTimeout(this.typeTimeout),this.typeTimeout=setTimeout(function(){this.getSuggestions(t.value)}.bind(this),this.options.typeDelayBeforeSearch))}},disableItem:function(e,t){return this._setItemDisabled(e,!0,t)},updateCollection:function(e){this.modelCollection=e},disableSelection:function(e){this.datasets[0].dataCache={}},onSelect:function(e,t){event.stopPropagation(),"Native"==this.options.environment&&"configurationcontext"==this.options.mode&&(e.environment="Native",e.mode="configurationcontext"),this.reset(),e.disabled=!0,this.options.onSelect(e),this.onHideSuggests(),this.datasets[0].dataCache={}},getselectedModelsIDs:function(e){var t=[];return e.forEach(function(e){t.push(e.get("id"))}),t},buildSkeleton:function(){var e=this;this._parent();var t=this.elements,i=this.name;t.inputWrapper=UWA.createElement("div",{class:i+"-cfg-autocomplete"}).inject(t.container,"top"),t.inputContainer.remove(),t.inputContainer.inject(t.inputWrapper),t.cfgSearch=this.addSearchButton(),t.cfgSearch.removeEvent("click"),t.cfgSearch.addEvent("click",function(t){var i=e.elements.input.value;e.reset(),e.onHideSuggests(),e.datasets[0].dataCache={},e.launchSearch(i)}),t.suggestsContainer.addEvent("resize",function(e,t,i){e.target.getDimensions().width<250?e.target.addClassName("cfgDisabledIcons"):e.target.hasClassName("cfgDisabledIcons")&&e.target.removeClassName("cfgDisabledIcons")}),t.cfgSearch.addEventListener("mouseover",function(){document.querySelector(".autocomplete-searchbox").classList.contains("autocomplete-searchbox-focus")||document.querySelector(".autocomplete-searchbox").classList.contains("autocomplete-searchbox-active")||document.querySelector(".autocomplete-searchbox").classList.add("active-searchbox")}),t.cfgSearch.addEventListener("mouseleave",function(){document.querySelector(".autocomplete-searchbox").classList.remove("active-searchbox")}),t.cfgSearch.inject(t.inputWrapper)},launchSearch:function(e){var t=this;t.eventRegistryKey=!1;var i=t.options.typeOfObject,n=t.options.Models?t.options.Models:[],s=function(e){if(e.storageArea===sessionStorage)if(null!=sessionStorage.searchList&&""!=sessionStorage.searchList){var n=sessionStorage.searchList.split(",");t.eventRegistryKey||(t.eventRegistryKey=!0,o.getAutocompleteSearchData(i,"getUsingModelId","",n,[],t.options.xRevQuery).then(function(e){var i=e.results;t.options.searchCallback(i)})),sessionStorage.searchList="",window.removeEventListener("storage",s)}else console.log("CFG : Else of storage event in 3DSpace")};if(window.addEventListener("storage",s),"Dashboard"==t.options.environment){i=t.options.typeOfObject;o.activateDashboardSearch(i,function(e){e.length>0&&t.options.searchCallback(e)},e,t.modelCollection,n,t.options.xRevQuery)}else if("3DSpace"==t.options.environment){i=t.options.typeOfObject;sessionStorage.removeItem("searchList"),a=(a=t.getselectedModelsIDs(t.modelCollection._models)).join(),o.activate3DSpaceSearch(i,a,e)}else if("Native"==t.options.environment){i=t.options.typeOfObject;var a=t.getselectedModelsIDs(t.modelCollection._models);o.activateNativeSearch(t.options.mode,a,e,i,t.options.xRevQuery)}},addSearchButton:function(){var e=UWA.createElement("div",{class:"Cfg-search-holder",html:UWA.createElement("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-search"})});return e.tooltipInfos=new s({shortHelp:n.Autocomplete_Search_ToolTip}),e}})}),define("DS/CfgBaseUX/scripts/CfgCAListController",["DS/CfgBaseUX/scripts/CfgData","DS/CfgBaseUX/scripts/CfgUtility","DS/CfgBaseUX/scripts/CfgController","DS/CfgBaseUX/scripts/CfgUXEnvVariables","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS"],function(e,t,i,n,o){"use strict";return{expandLeft:function(){e.cfgRevActionEvents.publish({event:"backButtonPressedToViewTheUpdatedCfgSummaryView"})},addToSummaryView:function(t){var i=[];("action"===t.calledFrom?t.context.nodeModel.getTreeDocument().getSelectedNodes():t.context.executionContext.treeDocument.getSelectedNodes()).forEach(function(e){"implicit"!=e.options.grid.type&&i.push(e.options.grid.id)}),i.length>0&&(e.cfgRevActionEvents.publish({event:"addSelectionToCfgRevSummaryView",data:{changeActionIds:i,calledFrom:t.calledFrom}}),"action"===t.calledFrom&&t.context.nodeModel.hide())},oncaSummaryAdd:function(t){e.cfgRevActionEvents.publish({event:"loadCfgRevSelectionView"})},oncaSummaryRemove:function(t){let i=n.getCfgUXEnvVariables();var s=[];if("action"!==t.calledFrom){t.context.executionContext.treeDocument.prepareUpdate(),t.context.executionContext.treeDocument.getSelectedNodes().forEach(function(e){if("implicit"!=e.options.grid.type){e.getAttributeValue("implicitObjects").forEach(e=>{if(i.isCRGroupByEnabled){let i=t.context.executionContext.executionContext.treeDocument.getRoots().find(e=>e._options.label.includes(o.CfgRevLabelImplicit));if(i){let n=i.getAllDescendants().find(t=>t._options.grid.id===e.id);n&&t.context.executionContext.executionContext.treeDocument.removeRoot(n)}}else{let i=t.context.executionContext.treeDocument.getRoots().find(t=>t._options.grid.id===e.id&&"implicit"===t._options.grid.type);i&&t.context.executionContext.treeDocument.removeRoot(i)}}),t.context.executionContext.treeDocument.removeRoot(e),s.push(e.options.grid.id)}}),t.context.executionContext.treeDocument.pushUpdate()}else{var a=t.context.nodeModel;a.prepareUpdate(),a.getTreeDocument().getSelectedNodes().forEach(function(e){if("implicit"!=e._options.grid.type){e.getAttributeValue("implicitObjects").forEach(e=>{if(i.isCRGroupByEnabled){let t=a.getTreeDocument().getRoots().find(e=>e._options.label.includes(o.CfgRevLabelImplicit));if(t){let i=t.getAllDescendants().find(t=>t._options.grid.id===e.id);i&&a.getTreeDocument().removeRoot(i)}}else{let t=a.getTreeDocument().getRoots().find(t=>t._options.grid.id===e.id&&"implicit"===t._options.grid.type);t&&a.getTreeDocument().removeRoot(t)}}),a.getTreeDocument().removeRoot(e),s.push(e._options.grid.id)}}),a.pushUpdate()}e.cfgRevActionEvents.publish({event:"removeSelectionFromCfgRevSummaryView",data:s})},onToggleInherited:function(t){t.context&&(1==t.context.value?e.cfgRevActionEvents.publish({event:"showInheritedOnCfgRevSummaryView"}):e.cfgRevActionEvents.publish({event:"hideInheritedOnCfgRevSummaryView"}))},onToggleImplicit:function(t){t.context&&(1==t.context.value?e.cfgRevActionEvents.publish({event:"showImplicitOnCfgRevSummaryView"}):e.cfgRevActionEvents.publish({event:"hideImplicitOnCfgRevSummaryView"}))},getDroppedCADetails:function(e){return new Promise(function(n,o){i.init(),widget.getValue("x3dPlatformId")?enoviaServerFilterWidget.tenant=widget.getValue("x3dPlatformId"):enoviaServerFilterWidget.tenant="OnPremise",t.populate3DSpaceURL().then(function(i){t.populateSecurityContext().then(function(i){t.getChangeActionsBySearchService(e,"").then(function(e){var i=t.getProcessedChangeActions(e);n(i)})})})})}}}),define("DS/CfgBaseUX/scripts/CfgCAListView",["UWA/Class/View","DS/TreeModel/TreeDocument","DS/TreeModel/TreeNodeModel","DS/DataGridView/DataGridView","DS/PlatformAPI/PlatformAPI","DS/CfgBaseUX/scripts/CfgUtility","DS/CollectionView/ResponsiveTilesCollectionView","DS/CfgBaseUX/scripts/CfgCAListViewToolbar","DS/CfgBaseUX/scripts/CfgCAListSummaryToolbar","DS/DataDragAndDrop/DataDragAndDrop","DS/CfgBaseUX/scripts/CfgCAListController","DS/Windows/ImmersiveFrame","DS/CfgBaseUX/scripts/CfgUXEnvVariables","text!DS/CfgBaseUX/assets/CfgUXEnvVariables.json","i18n!DS/CfgBaseUX/assets/nls/CfgBaseUXNLS","css!DS/CfgBaseUX/styles/CfgCAListView.css"],function(e,t,i,n,o,s,a,r,l,c,d,u,p,g,m){"use strict";return e.extend({init:function(e){this._parent(e)},render:function(){var e=this;return this.cfgUXEnvVariablesJS=p.getCfgUXEnvVariables(),e.caListViewContainer=UWA.createElement("div",{class:"calistview-container"}),c.droppable(e.caListViewContainer,{drop:function(t){e.postProcessDropped(t)},over:function(){e.caListViewContainer.addClassName("dropover-caview")},leave:function(){e.caListViewContainer.removeClassName("dropover-caview")}}),this.divToolbarContainer=UWA.createElement("div",{class:"cfgcalist-toolbaroontainer"}).inject(e.caListViewContainer),e.CreateCAListTreeDocument(this.options.modelData.changeActions),e.caListViewContainer},postProcessDropped:function(e){var t=this,i=[];(e=JSON.parse(e)).data.items.forEach(function(e){"Change Action"==e.objectType&&i.push(e.objectId)});var n=t.getParsedCAList(i,t.getAllCAIdsList());n.length>0&&d.getDroppedCADetails(n).then(function(e){t.addObjectsToView(e),console.log(i)})},getParsedCAList:function(e,t){return t.forEach(function(t){-1!=e.indexOf(t)&&e.splice(e.indexOf(t),1)}),e},CreateCAListTreeDocument:function(e){var i=e;this.model=new t({shouldBeSelected:function(e){return!1!==e._options.data.isSelectableCfgRevObject}}),this.addObjectsToView(i),this.createCAlistDataGridView(),"caSummaryView"!=this.options.mode&&this.createTileView(),this.createTileView(),this.createCAListToolbar(),this.pubSubEvents()},createCAlistDataGridView:function(){var e=this,t="";this.options.mode&&this.options.columns&&(t=this.options.columns),this.dataGridView=new n({treeDocument:e.model,identifier:"cfgCAListView-"+this.options.mode,columns:t,cellSelection:"none",rowSelection:"multiple",showRowIndexFlag:!1,showSelectionCheckBoxesFlag:!0,touchMode:e.options.touchMode||!1,defaultColumnDef:{editableFlag:!0},getCellTooltip:function(t){var i;if(t.rowID>-1)return"caSummaryView"!==e.options.mode&&5===t.columnID&&(i={shortHelp:m.CfgLabelAddtoCASummary,updateModel:!1}),"caSummaryView"!==e.options.mode||3!==t.columnID||"inherited"!==t.nodeModel._options.grid.type||e.cfgUXEnvVariablesJS.isCRGroupByEnabled||(i={shortHelp:m.CfgInheritedTooltip,updateModel:!1}),"caSummaryView"!==e.options.mode||6!==t.columnID||"local"!==t.nodeModel._options.grid.type||e.options.isFrozenRevision||(i={shortHelp:m.CfgLabelRemovesingleCA,updateModel:!1}),i}});var i=new u;i.setContentInBackgroundLayer(this.dataGridView.getContent()),i.reactToPointerEventsFlag=!1,i.inject(e.caListViewContainer),this.dataGridView.subscribeOnceToAllCellsRendered(()=>{let e=this.dataGridView.getCustomViewsManager();e.showCustomViewsDialog(),e._customViewsDialog.visibleFlag=!1;let t=document.querySelector(".wux-controls-selectionChips");t&&t.parentNode.removeChild(t)}),("caSummaryView"!=this.options.mode||this.options.isHeaderAllowed||!this.options.isFrozenRevision||this.cfgUXEnvVariablesJS.showInheritedToggle||this.cfgUXEnvVariablesJS.showImplicitToggleForCA)&&(i.getContent().style.top="38px"),0==e.options.isHeaderAllowed?e.caListViewContainer.getChildren()[1].setStyle("border-top","1px solid rgb(212, 212, 212)"):e.caListViewContainer.getChildren()[1].setStyle("border","1px solid rgb(212, 212, 212)")},getAllCAIdsList:function(){var e=[];return this.model.getAllDescendants().forEach(t=>{t.options.grid.id&&e.push(t.options.grid.id)}),e},createCAListToolbar:function(){"caSummaryView"==this.options.mode?this.applyCASummaryToolbar():this.applyDefaultToolbar()},addObjectsToView:function(e){this.model.prepareUpdate(),"caSelectorView"===this.options.mode&&this.addCAsToView(e),"caSummaryView"===this.options.mode&&(this.cfgUXEnvVariablesJS.isCRGroupByEnabled?this.addLocalAndInheritedObjectsAsGroupToView(e):this.addLocalAndInheritedObjectsAsFlatListToView(e)),this.model.pushUpdate()},addCAsToView:function(e){e.forEach(e=>{var t=e.toJson();this.addingCallbackFnToActionColumn(t);let n=new i({data:{isSelectableCfgRevObject:"local"===t.type&&!this.options.isFrozenRevision},label:t.title,name:t.name,subLabel:t.name+" | "+t.creator,thumbnail:t.thumbnail,icons:[t.icons],description:t.maturity,customTooltip:t.customTooltip,statusbarIcons:t.statusbaractions,statusbarIconsTooltips:t.statusbaractionsTooltips,grid:t});this.model.addRoot(n)})},addLocalAndInheritedObjectsAsFlatListToView:function(e){let t=[],i=[];e.forEach(e=>{"local"===e.toJson().type?t.push(e):i.push(e)});let n=[];e.forEach(e=>{e.toJson().implicitObjects.forEach(e=>n=[...n,e])}),this.model.prepareUpdate(),this.addCAsToView(t),"showImplicit"===this.options.filterImplicitView&&this.addCAsToView(n),this.addCAsToView(i),this.model.pushUpdate()},addLocalAndInheritedObjectsAsGroupToView:function(e){let[t,n,o]=this.getCAcount(e),s=new i({data:{isSelectableCfgRevObject:!1},label:`${m.CfgRevLabelUserDefined} (${t.length})`,grid:`${m.CfgRevLabelUserDefined}`}),a=new i({data:{isSelectableCfgRevObject:!1},label:`${m.CfgRevLabelInherited} (${n.length})`,grid:`${m.CfgRevLabelInherited}`}),r=new i({data:{isSelectableCfgRevObject:!1},label:`${m.CfgRevLabelImplicit}  (${o.length})`,grid:`${m.CfgRevLabelImplicit}`}),l=!1;this.cfgUXEnvVariablesJS.showInheritedToggle&&this.cfgUXEnvVariablesJS.showImplicitToggleForCA&&""===this.options.filterView&&""===this.options.filterImplicitView&&(l=!0),0!==e.length?(e.forEach(e=>{var t=e.toJson();this.addingCallbackFnToActionColumn(t);let n=new i({data:{isSelectableCfgRevObject:!("local"!==t.type||this.options.isFrozenRevision||!this.options.isCFGRoleAvail)},label:t.title,name:t.name,subLabel:t.name+" | "+t.creator,thumbnail:t.thumbnail,icons:[t.icons],description:t.maturity,customTooltip:t.customTooltip,statusbarIcons:t.statusbaractions,statusbarIconsTooltips:t.statusbaractionsTooltips,grid:t});t.implicitObjects&&t.implicitObjects.length>0&&this.addImplicitObjectsToView(r,t.implicitObjects);let o="local"===t.type?s:a;o.prepareUpdate(),o.addRoot(n),o===s&&l?this.model.addRoot(n):o.addRoot(n),o.pushUpdate()}),l||(this.model.addRoot(s),0!==s.getAllDescendants().length&&s.expand(),"showImplicit"===this.options.filterImplicitView&&this.model.addRoot(r),"showInherited"===this.options.filterView&&(this.model.addRoot(a),0!==a.getAllDescendants().length&&0===s.getAllDescendants().length&&a.expand()))):l||(this.model.addRoot(s),"showImplicit"===this.options.filterImplicitView&&this.model.addRoot(r),"showInherited"===this.options.filterView&&this.model.addRoot(a))},getCAcount:function(e){let t=e.filter(e=>"local"===e._attributes.type),i=e.filter(e=>"inherited"===e._attributes.type),n=[];return e.forEach(e=>{e._attributes.implicitObjects.forEach(e=>n.push(e))}),[t,i,n]},addingCallbackFnToActionColumn:function(e){let t=()=>s.showwarning(m.CfgMessageFrozenCRCannotRemoveLocalCA,"error"),i=()=>s.showwarning(m.CfgMessageCRCannotRemoveImplicitInheritCA,"error");this.options.action&&1===this.options.action.length&&"local"===e.type&&("caSummaryView"!==this.options.mode?e.action=this.options.isFrozenRevision?t:this.options.action[0].callback:e.functionToCall=this.options.isFrozenRevision?t:this.options.action[0].callback),this.options.action&&1===this.options.action.length&&"local"!==e.type&&"caSummaryView"===this.options.mode&&(e.functionToCall=i)},addImplicitObjectsToView:function(e,t){e.prepareUpdate(),t.forEach(t=>{var n=t.toJson();this.addingCallbackFnToActionColumn(n);let o=new i({data:{isSelectableCfgRevObject:!1},label:n.title,name:n.name,subLabel:n.name+" | "+n.creator,thumbnail:n.thumbnail,icons:[n.icons],description:n.maturity,customTooltip:n.customTooltip,statusbarIcons:n.statusbaractions,statusbarIconsTooltips:n.statusbaractionsTooltips,grid:n});e.addRoot(o)}),e.pushUpdate()},removeAllObjectsFromView:function(){this.model.prepareUpdate(),this.model.empty(),this.model.pushUpdate()},applyDefaultToolbar:function(){var e=this;this.dataGridView.getTypeRepresentationFactory().registerTypeRepresentations({sortingdropdown:{stdTemplate:"functionMenuIcon",semantics:{label:"action",icon:"sorting"}}});var t={toolbarHeaderLabel:this.options.headerLabel,touchMode:this.options.touchMode||!1,isFrozenCR:this.options.isFrozenRevision,isCFGRoleAvail:this.options.isCFGRoleAvail};r.toolbarActionBar=this.dataGridView.setToolbar(r.writetoolbarDefination(t)),e.toolbar=r.toolbarActionBar,this.divToolbarContainer.appendChild(e.toolbar.getContent()),e.toolbar.addEventListener("liveChange",function(t){if(1==t.dsModel._properties.value.dirty){e.model.prepareUpdate(),e.model.getAllDescendants().forEach(function(e){e.show()}),e.model.getRoots().forEach(function(e){e.expandAll()});var i=t.dsModel._properties.value.value;if(""==i)return void e.model.pushUpdate();for(var n=e.model.getRoots(),o=0;o<n.length;o++){var s=n[o],a=s.getAllDescendants();if(-1==s._options.label.toUpperCase().indexOf(i.toUpperCase())&&-1==s._options.grid.name.toUpperCase().indexOf(i.toUpperCase())){for(var r=0,l=0;l<a.length;l++)-1===a[l]._options.label.toUpperCase().indexOf(i.toUpperCase())&&-1===a[l]._options.grid.name.toUpperCase().indexOf(i.toUpperCase())&&(a[l].hide(),r++);r==a.length&&s.hide()}}}e.model.pushUpdate()})},applyCASummaryToolbar:function(){var e={toolbarHeaderLabel:this.options.headerLabel,touchMode:this.options.touchMode||!1,filterView:this.options.filterView,filterImplicitView:this.options.filterImplicitView,isFrozenCR:this.options.isFrozenRevision,isCFGRoleAvail:this.options.isCFGRoleAvail,isHeaderVisible:this.options.isHeaderAllowed};(this.options.isHeaderAllowed||!this.options.isFrozenRevision||this.cfgUXEnvVariablesJS.showInheritedToggle||this.cfgUXEnvVariablesJS.showImplicitToggleForCA)&&(l.toolbarActionBar=this.dataGridView.setToolbar(l.writeToolbarDefination(e)),this.toolbar=l.toolbarActionBar,this.divToolbarContainer.appendChild(this.toolbar.getContent()),this.options.isHeaderAllowed||this.divToolbarContainer.setStyle("border-top","1px solid rgb(212, 212, 212)"))},createTileView:function(){this.myResponsiveTilesCollectionView=new a({useDragAndDrop:!0,touchMode:this.options.touchMode||!1}).inject(this.caListViewContainer),this.myResponsiveTilesCollectionView.loadApplicativeModel(this.model),this.myResponsiveTilesCollectionView.getContent().style.top="48px",this.myResponsiveTilesCollectionView.hide()},pubSubEvents:function(){var e=this;this.options.isCFGRoleAvail&&(this.dataGridView.treeDocument.getXSO().onPostAdd(function(t){var i=e.dataGridView.treeDocument.getXSO().isEmpty();e.getSelectedCAList(),o.publish("CfgCAListSelection",{flag:i,mode:e.options.mode})}),this.dataGridView.treeDocument.getXSO().onPostRemove(function(t){var i=e.dataGridView.treeDocument.getXSO().isEmpty();e.getSelectedCAList(),o.publish("CfgCAListUnselection",{flag:i,mode:e.options.mode})}))},getSelectedCAList:function(){var e=this;this.selectedCAList=[],this.dataGridView.treeDocument.getSelectedNodes().forEach(function(t){e.selectedCAList.push(t.options.grid.physicalId)})}})});