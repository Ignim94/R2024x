define("DS/ENOXCADSearchUtils/utils/SearchUtils",["DS/ENOXCADUtils/utils/PlatformURL","UWA/Utils/InterCom","DS/Utilities/Utils"],function(e,t,n){"use strict";function i(){return"object"==typeof i.instance?i.instance:(i.instance=this,this)}return i.prototype.inAppsSearch=function(i){var s=Object.assign({mode:"furtive",default_with_precond:!0,widget_id:"default-widget-id",app_socket_id:"enosearchutils_default-widget-id",idcard_activated:!1,advanced_search:{showByDefault:!1},tenant:(new e).getPlatformId()},i),o=new t.Socket(s.app_socket_id,{dispacthRetryInterval:0});!0===i.debug_mode&&o.setDebugMode(!0),UWA.is(i.parent_window)?o.subscribeServer("SearchComServer",window):o.subscribeServer("SearchComServer"),o.dispatchEvent("RegisterContext",s),UWA.is(i.context_name)&&(s.context_title=i.context_name),s.default_search_criteria=i.fts_value,o.dispatchEvent("InContextSearch",s);var l=[];o.addListener("Selected_Objects_search",function(e){l=e});var a=n.debounce(function(e){switch(e.command_id){case"in_app_ok":i.callback.call(null,l);break;case"in_app_apply":i.apply?i.apply.call(null,l):i.callback.call(null,l);break;default:i.cancel&&i.cancel.call(null)}o.dispatchEvent("UnregisterContext",{widget_id:s.widget_id})},200);o.addListener("closeTransient",a),o.addListener("onCloseTransient",function(e){i.cancel&&i.cancel.call(null),o.dispatchEvent("UnregisterContext",{widget_id:s.widget_id})})},new i}),define("DS/ENOXCADSearchUtils/views/Search",["UWA/Core","DS/Utilities/Utils","DS/Controls/Abstract","DS/Controls/LineEditor","DS/Core/PointerEvents","DS/Utilities/Dom","i18n!DS/ENOXCADSearchUtils/assets/nls/XCADSearch"],function(e,t,n,i,s,o,l){"use strict";return n.inherit({name:"search",markForRecordFlag:!0,publishedProperties:{findStr:{defaultValue:"",type:"string",category:"Appearance"},disableSelectProxy:{defaultValue:!1,type:"boolean"},onSearchRequest:{defaultValue:void 0,type:"function"},onSearchIdRequest:{defaultValue:void 0,type:"function"},onSearchClose:{defaultValue:void 0,type:"function"}},buildView:function(){var t=this;this.elements.container.addClassName("enx-controls-search"),this.elements.findContainer=new e.Element("div",{class:"enx-controls-search-container"}).inject(this.elements.container),this.elements.findEditor=new i({placeholder:l.placeholder_search,selectAllOnFocus:!0,sizeInCharNumber:18,displayClearFieldButtonFlag:!0,displayStyle:"lite"}).inject(this.elements.findContainer),this.elements.findEditor.getContent().addClassName("enx-controls-search-editor"),o.addEventOnElement(this,this.elements.findEditor.getContent(),"keydown",function(n){var i=e.Event.whichKey(n);"return"===i?t.elements.findEditor.valueToCommit===t.findStr&&t._launchSearch():"esc"===i&&t.elements.findEditor.valueToCommit===t.findStr&&t.close()})},_launchSearch:function(e,n){var i=this;this.findStr=this.elements.findEditor.valueToCommit;var s=function(){i.onSearchRequest&&i.onSearchRequest(i.findStr,i.matchCase,e)},o=t.debounce(s,500);n?o():s()},_launchSearchId:function(){this.onSearchIdRequest&&this.rscIdToSearch&&(this.onSearchIdRequest(this.rscIdToSearch),delete this.rscIdToSearch)},_applyProperties:function(e){this._parent(e),this.isDirty("placeholder")&&this._applyPlaceholder(e.placeholder),this.isDirty("disableSelectProxy")&&this._applySelectProxy(e.disableSelectProxy)},_applySelectProxy:function(){this.disableSelectProxy&&this._cmdProxy&&(this._cmdProxy.destroy(),this._cmdProxy=null)},_applyFindStr:function(e){this.findStr!==e&&this.elements.findEditor.valueToCommit!==this.findStr&&(this.elements.findEditor.value=this.findStr)},_applyPlaceholder:function(){this.elements.findEditor&&(this.elements.findEditor.placeholder=this.placeholder)},handleEvents:function(){var e=this;o.addEventOnElement(this,this.elements.findEditor,"uncommittedChange",function(t){e.findStr=e.elements.findEditor.valueToCommit}),o.addEventOnElement(this,this.elements.findContainer,s.POINTERHIT,function(t){e._giveFocus()})},setCurrentValue:function(e){this.currentValue=e},close:function(){this.visibleFlag=!1,this.onSearchClose&&this.onSearchClose()},focus:function(){this._giveFocus()},_giveFocus:function(){this._parent(),this.elements.findEditor&&document.activeElement!==this.elements.findEditor._myInput&&this.elements.findEditor._giveFocus()}})}),define("DS/ENOXCADSearchUtils/views/XCADSearchModal",["DS/Utilities/Dom","DS/Controls/ModalContainer","DS/Windows/ImmersiveFrame","DS/Windows/Dialog"],function(e,t,n,i){"use strict";function s(s){this.elements={},this.options=s||{},this.options=Object.assign({target:null,events:{onClose:this.close.bind(this)}},this.options),this.elements.immframe=new n,this.elements.immframe.getContent().addClassName("enxmodal-immframe");var o=Object.assign({immersiveFrame:this.elements.immframe,resizableFlag:!0,position:{my:"top",at:"top"},height:"auto",width:"auto"},this.options);return this.elements.dialog=new i(o),this.elements.dialog.addEventListener("close",this.close.bind(this)),t.createModal(this.options.target,this.elements.immframe.getContent()),this.options.modalOpened=!0,document.querySelector(".wux-controls-modalContent").addEventListener("click",function(t){e.firstParentWithClass(t.target,"wux-windows-window-content")||"function"!=typeof this.options.events.onClickOutsideContent||this.options.events.onClickOutsideContent()}.bind(this)),this}return s.prototype.close=function(){this.options.modalOpened=!1,this.elements.dialog.destroy(),this.elements.dialog=null,delete this.elements.immframe,this.elements.immframe=null,t.removeModal(this.options.target)},s.prototype.destroy=function(){!0===this.options.modalOpened&&this.close(),delete this.options},s.prototype.getContent=function(){return this.elements.dialog.getContent()},s}),define("DS/ENOXCADSearchUtils/views/SearchView",["DS/ENOXCADSearchUtils/views/Search","DS/ENOXCADSearchUtils/views/XCADSearchModal"],function(e,t){"use strict";function n(e){return this.elements={},this.options=e||{},this.options=Object.assign({},this.options),this.__buildView(),this}return n.prototype.getContent=function(){return this.elements.container},n.prototype.__buildView=function(){var n=this;this.elements.findContainer=new e({placeholder:this.options.placeholder,onSearchRequest:function(e,t){n.options.events.onSearch&&n.options.events.onSearch({searchFts:e,matchCase:t}),n.close()},onSearchIdRequest:function(e){n.options.events.onSearch&&n.options.events.onSearch({rscId:e}),n.close()},onSearchClose:function(){n.close()}});var i=this.options.target.getBoundingClientRect(),s=i.left-this.options.position.x,o=i.top-this.options.position.y,l=document.querySelector(".findElement");this.elements.modalFts=new t({target:l,modalFlag:!0,resizableFlag:!1,closeButtonFlag:!1,titleBarVisibleFlag:!1,width:"auto",height:"auto",content:this.elements.findContainer.getContent(),position:{of:this.options.target,my:"top left",at:"top left",offsetX:s,offsetY:o},events:{onClickOutsideContent:function(){n.close()}}}),this.elements.modalFts.getContent().addClassName("enx-searchviewModal"),n.elements.modalFts.getContent().querySelector(".wux-windows-window-content").setStyle("padding","3px")},n.prototype.close=function(){this.options.events.onClose&&this.options.events.onClose(),this.elements.modalFts.close()},n});