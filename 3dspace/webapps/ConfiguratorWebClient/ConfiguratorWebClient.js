function editPCAction(){require(["DS/ConfiguratorWebClient/ConfiguratorWebClient"],function(e){var t=e.getActionURL("edit");parent.location.href=t})}function openConfiguratorHelp(){var e=emxUIConstants.BROWSER_LANGUAGE,t=emxUIConstants.STR_HELP_ONLINE_LANGUAGE;parent.openHelp("emxhelpproductconfigurationcreate","configuration",e,t,"","Configuration")}function viewPCAction(){require(["DS/ConfiguratorWebClient/ConfiguratorWebClient"],function(e){e.refreshParent()})}function cancelAction(e){require(["DS/ConfiguratorWebClient/ConfiguratorWebClient"],function(t){t.refreshParent(e),"true"==t.getParameterByName("fromPCComparePage")&&getTopWindow().closeWindow()})}function createUpdateProductConfiguration(e){require(["DS/ConfiguratorWebClient/ConfiguratorWebClient"],function(t){if(t.createUpdateProductConfiguration(e),"true"==t.getParameterByName("fromPCComparePage")){var r=window.parent.getTopWindow().getWindowOpener().parent;null!=r&&(r.editableTable.loadData(),r.rebuildView()),getTopWindow().closeWindow()}})}function createEmptyProductConfiguration(e,t){require(["DS/ConfiguratorWebClient/ConfiguratorWebClient"],function(r){r.createEmptyProductConfiguration(e,t)})}function releaseSolver(){require(["DS/ConfiguratorWebClient/ConfiguratorWebClient"],function(e){e.releaseSolver()})}define("DS/ConfiguratorWebClient/ConfiguratorWebClient",function(){var e,t={updateConfigServices:function(t){e=t},getHostURL:function(){var e=location.pathname.substring(0,location.pathname.indexOf("/",1));return window.location.origin?location.origin.concat(e):(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),window.location.origin.concat(e))},initData:function(){var e=this.getParameterByName("contextId"),t=this.getParameterByName("strProductContextId");console.log("load data ...."+e);var r,a=this.getHostURL(),o=this.getParameterByName("txtStartEffectivity"),n=this.getParameterByName("txtEndEffectivity"),i=this.getParameterByName("strMilestoneId");console.log("load data strStartEffectivityDate : "+o),console.log("load data strEndEffectivityDate : "+n),console.log("load data strMilestoneId : "+i);var s="",c=this.getParameterByName("strAction");""==o&&""==n&&""==i||(s='{"date":{"startDate":"'+o+'","endDate":"'+n+'"}, "milestone":{"id":"'+i+'"}, "productState":{"productRev":""}}');var l=a+"/resources/cfg/configurator/solver/initialization/context/"+e;return""==s&&(s="{}"),l=l+"?parentContextId="+t+"&random="+Math.random(),UWA.Data.request(l,{method:"POST",type:"json",async:!1,onComplete:function(e){r=e,console.log("Success getDictionary ="+r)},onFailure:function(e){console.log("failed while getting initData ="+e),alert(arguments[1].message)},data:{configurationCriteria:s,actionMode:c}}),r},getSelectedFeatureOptions:function(e,t){var r,a=e;""==a&&(a=t);var o=this.getHostURL()+"/resources/cfg/configurator/configuration/"+a+"?random="+Math.random();return UWA.Data.request(o,{method:"GET",type:"json",async:!1,onComplete:function(e){r=e,console.log("Success setConfigurationCriteria ="+r)},onFailure:function(e){console.log("failed while getting selected options ="+e),alert(arguments[1].message)}}),r},getHypervisorDetails:function(){var e,t=this.getHostURL();return url=t+"/resources/cfg/configurator/solver/hypervisordetails?random="+Math.random(),UWA.Data.request(url,{method:"GET",type:"json",async:!1,onComplete:function(t){console.log("Success getHypervisorDetais ="+t),e=t},onFailure:function(e){console.log("failed while getting getHypervisorDetais ="+e),alert(arguments[1].message)}}),e},getRuleParamDetails:function(e){var t,r=this.getHostURL();return url=r+"/resources/cfg/configurator/configuration/ruleparam/"+e+"?random="+Math.random(),UWA.Data.request(url,{method:"GET",type:"json",async:!1,onComplete:function(e){console.log("Success setAppRuleParams ="+e),t=e},onFailure:function(e){console.log("failed while getting initData ="+e),alert(arguments[1].message)}}),t},createUpdateProductConfiguration:function(t){if(!e.checkInvalidKeyInFeatures||e.checkInvalidKeyInFeatures()){var r=this.getParameterByName("strAction");if(console.log("call createupdate PC service strAction :"+r),"view"!=r){var a=this.getParameterByName("contextId"),o=this.getParameterByName("strProductContextId"),n=this.getParameterByName("txtProductConfigurationName"),i=this.getParameterByName("txtProductConfigurationMarketingName"),s=this.getParameterByName("txtProductConfigurationMarketingText"),c=this.getParameterByName("hidDefaultRevision"),l=null==localStorage.getItem("desc")?"":decodeURIComponent(localStorage.getItem("desc").replace(/\+/g," ")),u=this.getParameterByName("derivedFromId"),g=this.getParameterByName("topLevelPart"),d=this.getParameterByName("txtProductConfigurationPolicy"),f=(o=this.getParameterByName("strProductContextId"),this.getParameterByName("txtProductConfigurationVault\t")),m=this.getParameterByName("radProductConfigurationSalesIntentValue"),p=this.getParameterByName("radProductConfigurationPurposeValue"),C=this.getParameterByName("txtStartEffectivity"),h=this.getParameterByName("txtEndEffectivity"),P=this.getParameterByName("txtProductConfigurationOwner"),y=this.getParameterByName("strMilestoneId"),v="",S=this.getListPriceValue();"edit"==r&&(v=this.getParameterByName("pcId"));var N=JSON.stringify({contextid:a,strParentProductId:o,strName:n,strProductConfigurationOwner:P,strMarketingName:i,strMarketingText:s,strRevision:c,strDescription:l,strDerivedFromId:u,strTopLevelPart:g,strPolicy:d,strParentProductId:o,strVault:f,strSalesIntent:m,strPurpose:p,strStartEffectivityDate:C,strEndEffectivityDate:h,strMilestoneId:y,pcId:v,strListPriceValue:S,strAction:r}),R=this.getConfigurationCriteria();R=JSON.stringify(R),console.log("createProductConfiguration : selectedCriteria "+R);var D=this.getAppRuleParams();D=JSON.stringify(D),console.log("createProductConfiguration : appRuleParam "+D);var A=this.getHostURL()+"/resources/cfg/configurator/configuration?random="+Math.random(),O=this;UWA.Data.request(A,{headers:{"Content-Type":"application/json"},method:"POST",type:"json",async:!1,onComplete:function(e){localStorage.removeItem("desc");var r=findFrame(parent.getTopWindow(),"content");r.addStructureTreeNode&&r.addStructureTreeNode(e.PCId,a,void 0,"Products"),O.refreshParent(t)},onFailure:function(e){console.log("failed while creating pc ="+e),alert(arguments[1].message)},data:{productConfigDetails:N,selectedCriteria:R,appRuleParam:D}})}else window.getTopWindow().close()}},createEmptyProductConfiguration:function(e,t){var r=this.getHostURL();this.closing=!1;var a=this;e=JSON.parse(e);var o="",n="",i=r+"/resources/cfg/configurator/configuration?random="+Math.random(),s=!0,c=e.strDerivedFromId;if(null!=c&&""!=c){selectedCriteriaJSON=this.getSelectedFeatureOptions(e.pcId,c);var l=e.contextid,u=e.strParentProductId,g="",d=e.strStartEffectivityDate,f=e.strEndEffectivityDate,m=e.strMilestoneId;""==d&&""==f&&""==m||(g='{"date":{"startDate":"'+d+'","endDate":"'+f+'"}, "milestone":{"id":"'+m+'"}, "productState":{"productRev":""}}'),""==g&&(g="{}"),dictionaryData=this.getDictionary(l,u,g);for(var p=[],C=dictionaryData.features,h=0;h<C.length;h++){var P=C[h].keyInType;if("Blank"!=P){for(var y=void 0,v=0;v<selectedCriteriaJSON.configurationCriteria.length;v++)if(selectedCriteriaJSON.configurationCriteria[v].Id=="KeyIn_"+C[h].ruleId){y=selectedCriteriaJSON.configurationCriteria[v];break}if(!y)continue;var S=y.State;if("chosen"==S||"chosenInConflict"==S){var N,R=y.Value;"Integer"==P?N=this.inputNumberCheck(R,0,1):"Real"==P?N=this.inputNumberCheck(R,2,1):"Input"==P||"Text Area"==P?N=this.checkForBadChars(R,!1):"Date"==P&&(N=this.inputDateCheck(R,"M dd, yy")),N||p.push(C[h].displayName)}}}if(function e(t){var r=a.getHostURL()+"/webapps/ConfiguratorWebView/assets/nls/langWW_"+t+".json";var o=!0;UWA.Data.request(r,{type:"json",method:"GET",async:!1,onComplete:function(e){o=!1,UWA.i18n(e)},onFailure:function(e,t){o=!1,UWA.i18n(t)},onCancel:function(){},onTimeout:function(e){}});1==o&&"en"!=t&&e("en")}(widget.lang),p.length>0){s=!1;var D="";for(h=0;h<p.length;h++)D.length>0&&(D+=", "),D+=p[h];var A=UWA.i18n("KeyIn Type has been changed for #FEATURES#");A=A.replace("#FEATURES#",D),alert(A)}else s=!0;o=JSON.stringify(selectedCriteriaJSON.configurationCriteria),n=JSON.stringify(selectedCriteriaJSON.appRuleParam)}1==s&&UWA.Data.request(i,{headers:{"Content-Type":"application/json"},method:"POST",type:"json",async:!1,onComplete:function(t){var r=findFrame(parent.getTopWindow(),"content");r.addStructureTreeNode&&r.addStructureTreeNode(t.PCId,e.contextid,void 0,"Products");a.closing=!0},onFailure:function(e){console.log("Failed creating empty PC ="+e),a.closing=!1,alert(arguments[1].message)},data:{productConfigDetails:JSON.stringify(e),selectedCriteria:o,appRuleParam:n}}),t&&t(this.closing)},inputNumberCheck:function(e,t,r){var a,o=!1,n=0,i=!0;if(""==e)return i;if(r&&"-"==e.charAt(n)&&("-",n++),isNaN(e))return i=!1;for(;n<e.length;n++)"."==e.charAt(n)&&(o||(o=!0));return o&&0==t&&(i=!1),0==(a=e).length&&0==t?returnObj.message=UWA.i18n("Please Enter an Integer Value."):0==a.length&&2==t&&(returnObj.message=UWA.i18n("Please Enter a Decimal Value.")),i},inputDateCheck:function(e){var t=!1;if(e&&e.length>0){var r=e.split(",");if(2==r.length){var a=r[0].split(" ");if(2==a.length){var o=a[0],n=a[1],i=r[1],s=-1!=["January","February","March","April","May","June","July","August","September","October","November","December"].indexOf(o),c=this.inputNumberCheck(n,0).isValid,l=this.inputNumberCheck(i,0).isValid;s&&c&&l&&(t=!0)}}}else t=!0;return t},checkForBadChars:function(e,t){for(var r=!1,a=new Array("#","+","|"),o=!0,n="",i=0;i<a.length;i++)e.indexOf(a[i])>-1&&(n+=a[i]+" ");return n.length>0&&(r=!0),r?o=!1:o},getDictionary:function(e,t,r){var a,o=this.getHostURL()+"/resources/cfg/configurator/feature/context/"+e;return o=o+"?parentContextId="+t+"&random="+Math.random(),UWA.Data.request(o,{method:"GET",type:"json",async:!1,onComplete:function(e){a=e,console.log("Success getDictionary ="+a)},onFailure:function(e){console.log("failed while getting initData ="+e),alert(arguments[1].message)},data:{configurationCriteria:r}}),a},getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null==t?"":decodeURIComponent(t[1].replace(/\+/g," "))},getActionURL:function(e){var t=parent.location.href;if("create"==this.getParameterByName("strAction").toLowerCase())return t;var r="strAction",a=new RegExp("([?&])"+r+"=.*?(&|$)","i"),o=-1!==t.indexOf("?")?"&":"?";return t.match(a)?t.replace(a,"$1"+r+"="+e+"$2"):t+o+r+"="+e},releaseSolver:function(){var e=this.getHostURL()+"/resources/cfg/configurator/solver/release";UWA.Data.request(e,{method:"POST",type:"json",timeout:5e3,aysnc:!1,onComplete:function(){console.log("Release Solver")},onFailure:function(){console.log("Failed in Releasing Solver")}})},refreshParent:function(e){var t=this.getParameterByName("strAction");console.log("sAction ::"+t),"create"!=t.toLowerCase()&&(e=this.getActionURL("view")),e&&(parent.location.href=e)},getConfigurationCriteria:function(){var t=e.getActualConfigurationCriteria();return console.log("selectedCriteria -- > selectedCriteria : "+t),t},getListPriceValue:function(){return e.getListPrice()},getAppRuleParams:function(){var t=e.getAppRulesParam();return console.log("appRuleParam -- > appRuleParam : "+t),t},callSetServices:function(t){var r=this.initData(),a=this.getParameterByName("strAction"),o=this.getParameterByName("derivedFromId"),n=this.getParameterByName("radProductConfigurationPurposeValue"),i=this.getParameterByName("refineSelMode"),s=o,c=this.getParameterByName("pcId");if(e.setAction(a),e.setDictionaryJSON(r.dictionary),e.setPCPurpose(n),e.setRefineSelMode(i),null!=s&&""!=s||(s=c),"edit"==a.toLowerCase()||"view"==a.toLowerCase()||""!=s){var l=this.getSelectedFeatureOptions(c,o);e.setConfigurationCriteriaJSON(l.configurationCriteria),console.log("callSetservices -- > appRuleParamJSON.rulesMode      =  "+l.appRuleParam.rulesMode),console.log("callSetservices -- > appRuleParamJSON.multiSelection = "+l.appRuleParam.multiSelection),console.log("callSetservices -- > appRuleParamJSON.rules \t\t  = "+l.appRuleParam.rules);var u=JSON.parse('{"appRulesParam": '+JSON.stringify(l.appRuleParam)+"}");e.setAppRulesParamJSON(u);var g='{"app_Func": {"features": "yes","productState": "yes","manufacturingPlan": "yes","milestone": "yes","date": "yes","units": "yes","multiSelection": "yes","selectionMode_Build": "yes","selectionMode_Refine": "no","rulesMode_ProposeOptimizedConfiguration": "no","rulesMode_SelectCompleteConfiguration": "no","rulesMode_EnforceRequiredOptions": "yes","rulesMode_DisableIncompatibleOptions": "yes"}}';g=JSON.parse(g),e.setAppFuncJSON(g),e.initPanel(!1),console.log("callSetservices -- > init Panel  loaded!!")}else{var d='{"app_Func": {"features": "yes","productState": "yes","manufacturingPlan": "yes","milestone": "yes","date": "yes","units": "yes","multiSelection": "yes","selectionMode_Build": "yes","selectionMode_Refine": "yes","rulesMode_ProposeOptimizedConfiguration": "no","rulesMode_SelectCompleteConfiguration": "no","rulesMode_EnforceRequiredOptions": "yes","rulesMode_DisableIncompatibleOptions": "yes"}}';d=JSON.parse(d),e.setAppFuncJSON(d);u='{"appRulesParam": {"multiSelection": "false","selectionMode": "selectionMode_Build","rulesMode": "RulesMode_EnforceRequiredOptions","rulesActivation": "true","completenessStatus": "Unknown","rulesCompliancyStatus": "Unknown"}}';u=JSON.parse(u),e.setAppRulesParamJSON(u),e.initPanel(!0),console.log("callSetservices -- > init Panel  loaded!!")}}};return UWA.namespace("DS/ConfiguratorWebClient/ConfiguratorWebClient",t)});