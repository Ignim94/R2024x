define("DS/RgnPreviewSearch/InputUI",["require","exports","DS/RGNServices/FederatedSearch"],function(e,t,n){"use strict";function i(e){if(null==e)throw new Error("unexpected null");return e}function s(e){return function(e){return void 0!==e.message}(e)?e.message:String(e)}function l(e,t){const n=i(document.getElementById(e+"Query")),l=i(document.getElementById(e+"Select"));l.setAttribute("style","display: none"),l.innerHTML="";const o=e+"ErrorMessage";let r=document.getElementById(o);t?(r||((r=document.createElement("span")).setAttribute("id",o),n.appendChild(r)),r.className="fonticon fonticon-info",r.setAttribute("title",s(t))):r&&(r.className="",r.setAttribute("title","")),function(e,t){var n,s;const l=e+"Query",o=i(null===(n=document.getElementById(l))||void 0===n?void 0:n.querySelector(".preview-input-btn")),r=i(null===(s=document.getElementById(l))||void 0===s?void 0:s.querySelector(".preview-input-search-btn"));o.setAttribute("style",t?"display: block":"display: none"),r.setAttribute("style",t?"display: none":"display: block")}(e,!1)}function o(e){return 0!==e.length&&(e.startsWith('"')&&e.endsWith('"')?e=e.slice(1,e.length-1):(e.startsWith("*")||(e="*"+e),e.endsWith("*")||(e+="*"))),e}Object.defineProperty(t,"__esModule",{value:!0}),t.buildSearchPattern=t.displayResults=t.getMessage=void 0,t.getMessage=s,t.displayResults=async function(e){const t=document.getElementById(e.inputName+"Display"),i=t.disabled?"":t.value,s=2==(e.cardinality||0);n.init("layout-content",s);const r=i?o(i):i;try{const t={precond:'flattenedtaxonomies:"types/'+e.typeName+'"'+(r?' (name:"'+r+'" OR [ds6w:label]:"'+r+'")':""),mode:"furtive",multiSel:s};!function(e,t){const n=t.inputName,i=document.getElementById(n+"Display");document.getElementById(n+"OID").value=e.map(e=>e.id).join("|");const s=e.map(e=>{const t=e["ds6w:type"],n=e["ds6w:identifier"];return e["ds6w:label"]+" | "+t+" | "+e["ds6wg:revision"]+" | "+n});i.disabled=!0,i.value=s.join(),i.setAttribute("title",s.join("\n"))}(await n.search(t),e)}catch(t){console.error(t),t&&l(e.inputName,t)}n.destroy()},t.buildSearchPattern=o});