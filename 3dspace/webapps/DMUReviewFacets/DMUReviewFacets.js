define("DS/DMUReviewFacets/DMUR3MReviewController",["UWA/Core","UWA/Class","DS/Controls/Expander","DS/Controls/Button","DS/Menu/Menu","DS/DMUControls/DMUReviewExpander","DS/DMUBaseUIControllers/utils/OpenWithMenuBuilder","DS/DMUValidationPersistence/DMUValidationPersistenceServices","DS/PlatformAPI/PlatformAPI","i18n!DS/DMUReviewFacets/assets/nls/DMUReviewFacets","css!DS/DMUReviewFacets/DMUReviewFacets.css"],function(e,t,n,i,s,l,a,o,c,d){"use strict";var h=t.extend({init:function(t){this._parent(t);var h=[];h.statusOK={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-check",fonticonColor:"rgb(71,119,56)"},h.statusKO={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-wrong",fonticonColor:"rgb(234,79,55)"},h.statusUNK={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-i-question",fonticonColor:"#007DA3"},h.statusTBA={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-attention",fonticonColor:"#007DA3"},h.requirement={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-requirement",fonticonColor:"black"},h.highlight_urgent={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-alert",fonticonColor:"rgb(153, 7, 7)"},h.highlight_high={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-high",fonticonColor:"rgb(234,79,55)"},h.highlight_medium={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-medium",fonticonColor:"rgb(232,123,0)"},h.highlight_low={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-level-low",fonticonColor:"rgb(71,119,56)"},h.ca_high={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change",fonticonColor:"rgb(234,79,55)"},h.ca_medium={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change",fonticonColor:"rgb(232,123,0)"},h.ca_low={fonticonClass:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-change",fonticonColor:"rgb(71,119,56)"};var r,g,u,p,m=[h.statusUNK,h.statusOK,h.statusKO,h.requirement],f=[h.statusTBA,h.highlight_low,h.highlight_medium,h.highlight_high,h.statusOK,h.highlight_urgent],C=[],v=[],x=!1,w=!1,y=[],E=[],D=[],M=[],k=function(){},I=function(e){var t=!1;e.stopPropagation();var n,i=this.getParents();for(let e=0;e<i.length;e++){if(i[e].hasClassName("highlightsPanel-highlightsExpanders")){t=!0,n=i[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.expand()}if(i[e].hasClassName("checksPanel-checksExpanders")){t=!0,n=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.expand()}}if(!1===t)for(let e=0;e<i.length;e++){if(i[e].hasClassName("highlightsContent")){n=i[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.expand()}if(i[e].hasClassName("checksContent")){n=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.expand()}}},b=function(e){var t=!1;e.stopPropagation();var n,i=this.getParents();for(let e=0;e<i.length;e++){if(i[e].hasClassName("highlightsPanel-highlightsExpanders")){t=!0,n=i[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.collapse()}if(i[e].hasClassName("checksPanel-checksExpanders")){t=!0,n=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.collapse()}}if(!1===t)for(let e=0;e<i.length;e++){if(i[e].hasClassName("highlightsContent")){n=i[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.collapse()}if(i[e].hasClassName("checksContent")){n=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<n.length;e++)n[e].dsModel.collapse()}}},N=function(e,t,n){var i=[];t&&t.length>0&&t.forEach(function(e){var t=e.objectId;t||(t=e.object.getPlmID()),i.push({sObjectId:t,sListOfAttributesToModify:e.attributesList})}),o.updateAttributes({validationId:e,objectsToModify:i,platform:r,onAttributesSaveCompleted:function(e){var t,i,s,l=e.modifiedObjects[0];if(t=[l.pId],l.sName&&(t[l.pId]={title:l.sName},p(t)),l.sDescription&&(t[l.pId]={description:l.sDescription},p(t)),"Check"===n){l.iCheckState&&(t[l.pId]={iCheckState:l.iCheckState},p(t));for(let e=0;e<v.length;e++)v[e].updateImpactedCheckDisplay({id:l.pId,status:l.iCheckState?l.iCheckState:void 0,name:l.sName?l.sName:void 0});for(let e=0;e<E.length;e++){var a=D[E[e]].checks[l.pId];if(a&&l.iCheckState?a.status=l.iCheckState:a&&l.sName?a.name=l.sName:a&&l.sDescription&&(a.description=l.sDescription),y[E[e]]&&y[E[e]][l.pId].length){i=y[E[e]][l.pId];for(let t=0;t<i.length;t++){s=y[E[e]][i[t].id];for(let e=0;e<s.length;e++)s[e].id===l.pId&&(l.iCheckState?s[e].status=l.iCheckState:l.sName&&(s[e].name=l.sName))}}}}if("Highlight"===n){for(let e=0;e<C.length;e++)C[e].updateAssociatedHighlightsDisplay({id:l.pId,rating:l.iPresentationRating?l.iPresentationRating:void 0,name:l.sName?l.sName:void 0});for(let e=0;e<E.length;e++){var o=D[E[e]].highlights[l.pId];if(o&&l.iPresentationRating?o.rating=parseInt(l.iPresentationRating):o&&l.sName?o.name=l.sName:o&&l.sDescription&&(o.description=l.sDescription),y[E[e]]&&y[E[e]][l.pId].length){s=y[E[e]][l.pId];for(let t=0;t<s.length;t++){i=y[E[e]][s[t].id];for(let e=0;e<i.length;e++)i[e].id===l.pId&&(l.iPresentationRating?i[e].rating=l.iPresentationRating:l.sName&&(i[e].name=l.sName))}}}}},onAttributesSaveFailed:function(){}})},A=async function(e){if(e&&e.currentTarget&&e.currentTarget.id){var t;for(let n=0;n<E.length;n++){D[E[n]].checks[e.currentTarget.id]&&(t=D[E[n]].checks[e.currentTarget.id].requirements[0].id)}if(t){let l=await(i=t,new Promise((e,t)=>{var n={id:i,type:"Requirement"};a.openWithApps(n,r).then(function(t){e(t)}).catch(function(){t(new Error)})}));var n=e.event?e.event:e;n.stopPropagation();let o=n.pageX?{x:n.pageX,y:n.pageY}:null;o||(o=n.screenX?{x:n.screenX,y:n.screenY}:null),!o&&n.type&&-1!==n.type.indexOf("touch")&&n.changedTouches&&n.changedTouches[0]&&((o=(n=n.changedTouches[0]).pageX?{x:n.pageX,y:n.pageY}:null)||(o=n.screenX?{x:n.screenX,y:n.screenY}:null)),o||(o={x:0,y:0}),s.show(l,{position:{x:o.x,y:o.y}})}}var i},S=function(e,t,n){var i,s=[];"status"===t&&s.push({iCheckState:n}),"name"===t&&s.push({sName:n}),"description"===t&&s.push({sDescription:n});var l=[];l.push({attributesList:s,objectId:e});for(let t=0;t<E.length;t++)D[E[t]].checks[e]&&(i=E[t]);if(N(i,l,"Check"),"status"===t){let t;switch(n){case 1:t="InProgress";break;case 2:t="Passed";break;case 3:t="Failed"}c.publish("DS/PADUtils/PADCommandProxy/validationState",{validationId:i,checkId:e,checkStatus:t})}},j=function(e,t,n){var i,s=[];"rating"===t&&s.push({iPresentationRating:n}),"name"===t&&s.push({sName:n}),"description"===t&&s.push({sDescription:n});var l=[];l.push({attributesList:s,objectId:e});for(let t=0;t<E.length;t++)D[E[t]].highlights[e]&&(i=E[t]);N(i,l,"Highlight")},R=function(e){var t,n;if(e&&e.length)for(let i=0;i<e.length;i++)if(!D[e[i].id]){E.push(e[i].id),D[e[i].id]={highlights:[],checks:[],name:e[i].name},M[e[i].id]={highlights:[],checks:[]},t=e[i].children;for(let s=0;s<t.length;s++)n=t[s].id,"DMUValidationExposedPresentation"===t[s].type&&(D[e[i].id].highlights[n]={id:n,rating:parseInt(t[s].rating),name:t[s].name,description:t[s].description,associatedCheck:t[s].associatedCheck,issues:t[s].Issue,changeAction:t[s].ChangeAction},M[e[i].id].highlights.push({id:n,rating:parseInt(t[s].rating),name:t[s].name,description:t[s].description,associatedCheck:t[s].associatedCheck,issues:t[s].Issue,changeAction:t[s].ChangeAction})),"DMUValidationCheck"===t[s].type&&(D[e[i].id].checks[n]={id:n,status:parseInt(t[s].state),name:t[s].name,description:t[s].description,requirements:t[s].children?t[s].children:void 0},M[e[i].id].checks.push({id:n,status:parseInt(t[s].state),name:t[s].name,description:t[s].description,requirements:t[s].children?t[s].children:void 0}))}},U=function(e){var t,n,i,s;if(e&&e.length)for(let l=0;l<e.length;l++)if(n=e[l].id,!y[n]){t=M[n].highlights;for(let e=0;e<t.length;e++)if(i=t[e].id,t[e].associatedCheck&&t[e].associatedCheck.length){s=t[e].associatedCheck;for(let e=0;e<s.length;e++)y[n]||(y[n]=[]),y[n][i]||(y[n][i]=[]),y[n][s[e]]||(y[n][s[e]]=[]),y[n][i].push({id:D[n].checks[s[e]].id,status:D[n].checks[s[e]].status,name:D[n].checks[s[e]].name}),y[n][s[e]].push({id:D[n].highlights[i].id,rating:D[n].highlights[i].rating,name:D[n].highlights[i].name})}}},F=function(e,t){var n=new l({objectData:{id:e.id,rating:e.rating,name:e.name,description:e.description?e.description:"",changeAction:e.changeAction?e.changeAction:void 0,issues:e.issues?e.issues:void 0},editionMode:!1,readOnly:!1,onHighlightAttributeChanged:j,icons:f,checkIcons:m,impChecksInfos:y[t]?y[t]:[],type:"Highlight",panelType:{type:"facet"},highlightEditMode:B(t).highlight});return n.getMainDiv().getContent().addClassName("highlightFacetExpander"),n.getMainDiv().expand(),v.push(n),n},B=e=>{const t=(()=>JSON.parse(localStorage.getItem("r3mValidationObjects")))()[e];let n;const i=t.validState,s=t.maturityDisp;n=t.restrictedEdition?t.restrictedEdition:"Deactivated";const l={Deactivated:"stateEdit",Draft:"readOnly","In Work":"inprogress"===i.toLowerCase()&&(()=>{let e=window.widget.getValue("xPref_CREDENTIAL"),n=e.split(".");e=n[0]?n[0]:"";return(()=>{var e=c.getUser(),t="";return e&&(t=e.login),t})()===t.ownerid||["VPLMProjectLeader","VPLMAdmin"].includes(e)})()?"stateEdit":"readOnly",Frozen:"readOnly",Released:"readOnly",Obsolete:"readOnly"};let a=l[n]||l[s]||"readOnly";return{check:{canCreate:!1,canEditDef:!1,canEditState:"stateEdit"===a,canDelete:!1},highlight:{canCreate:!1,canEditDef:!1,canEditPriority:"stateEdit"===a,canDelete:!1}}},P=function(e,t){var n=new l({objectData:{id:e.id,status:e.status,name:e.name,description:e.description?e.description:"",requirements:e.requirements?e.requirements:void 0},editionMode:!1,readOnly:!1,onRequirementOpenWithClicked:A,onCheckAttributeChanged:S,icons:m,highlightIcons:f,impChecksInfos:y[t]?y[t]:[],type:"Check",panelType:{type:"facet"},checkEditMode:B(t).check});return n.getMainDiv().getContent().addClassName("checkFacetExpander"),n.getMainDiv().expand(),C.push(n),n};this.getValidations=function(t,s,l,a,o,h,m,f){r=a,p=o;var C=function(t){var s,a,o,c,h,r,g;u=new e.Element("div",{class:"highlightsContent"});var p,f=[];let C=d.noHighlight?d.noHighlight:"The selected Review does not contain any Highlight";if(t&&t.validations&&(R(t.validations),U(t.validations)),t.validations&&t.validations.length&&t.validations.length>1)for(let i=0;i<t.validations.length;i++){var v=new e.Element("div",{class:"highlightExpanderContent"});if(s=t.validations[i].id,l.length&&t.objects){a=[],g=!1;for(let e=0;e<t.objects.length;e++)(r=t.objects[e].validationId)===s&&(a.push(D[r].highlights[t.objects[e].highlightId]),g=!0);g||(a=M[s].highlights),g=!1}else a=M[s].highlights;if(0===a.length)new e.Element("div",{text:C,class:"noHighlight"}).inject(v).setStyles({"padding-top":"10px"});else for(let t=0;t<a.length;t++)w=!0,p=new e.Element("div",{class:"flowContainer"}).inject(v),F(a[t],s).inject(p).getContent().setStyles({"margin-left":"5px"});o=new e.Element("div",{class:"CollapseExpandAll"}),h=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-expand-all expandAllIcon"}).inject(o),(c=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collapse-all collapseAllIcon"}).inject(o)).onclick=b,h.onclick=I;var x=new n({header:D[s].name,body:v,style:"simple",customHeader:o}).inject(u);x.expand(),x.elements.bodyContainer.setStyles({"padding-top":"0px"}),x.getContent().setStyles({"padding-bottom":"8px"}),x.getContent().addClassName("highlightsPanel-highlightsExpanders")}else if(t.validations.length&&1===t.validations.length){if(l.length&&t.objects){a=[],g=!1;for(let e=0;e<t.objects.length;e++)r=t.objects[e].validationId,f.push(r),a.push(D[r].highlights[t.objects[e].highlightId])}else s=t.validations[0].id,a=M[s].highlights;if(a.length>0){var y=new e.Element("div",{class:"globalDiv"}).inject(u);o=new e.Element("div",{class:"CollapseExpandAll"}).inject(y);var E=new e.Element("div",{class:"expandIconPlaceholder"}).inject(o);(h=new i({displayStyle:"lite",label:"expand All",icon:{iconName:"expand-all",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(E)).getContent().addClassName("expandAllIcon");var k=new e.Element("div",{class:"expandIconPlaceholder"}).inject(o);(c=new i({displayStyle:"lite",label:"collapse All",icon:{iconName:"collapse-all",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(k)).getContent().addClassName("collapseAllIcon"),c.getContent().onclick=b,h.getContent().onclick=I}for(let t=0;t<a.length;t++)w=!0,p=new e.Element("div",{class:"flowContainer"}).inject(u),F(a[t],f.length?f[0]:s).inject(p).getContent().setStyles({"margin-left":"5px"})}w||new e.Element("div",{text:C,class:"noHighlight"}).inject(u),w=!1,m(u)},v=function(t){var l,a,o,c,h,r,u;g=new e.Element("div",{class:"checksContent"});var p,f=[];let C=d.noCheck?d.noCheck:"The selected Review does not contain any Check";if(t&&t.validations&&(R(t.validations),U(t.validations)),t.validations&&t.validations.length&&t.validations.length>1)for(let i=0;i<t.validations.length;i++){l=t.validations[i].id;var v=new e.Element("div",{class:"highlightExpanderContent"});if(s.length&&t.objects){a=[],u=!1;for(let e=0;e<t.objects.length;e++)(r=t.objects[e].validationId)===l&&(a.push(D[r].checks[t.objects[e].checkId]),u=!0);u||(a=M[l].checks)}else a=M[l].checks;if(0===a.length)new e.Element("div",{text:C,class:"noCheck"}).inject(v).setStyles({"padding-top":"10px"});else for(let t=0;t<a.length;t++)x=!0,p=new e.Element("div",{class:"flowContainer"}).inject(v),P(a[t],l).inject(p).getContent().setStyles({"margin-left":"5px"});o=new e.Element("div",{class:"CollapseExpandAll"}),h=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-expand-all expandAllIcon"}).inject(o),(c=new e.Element("span",{class:"wux-ui-3ds wux-ui-3ds-1x wux-ui-3ds-collapse-all collapseAllIcon"}).inject(o)).onclick=b,h.onclick=I;var w=new n({header:D[l].name,body:v,style:"simple",customHeader:o}).inject(g);w.expand(),w.elements.bodyContainer.setStyles({"padding-top":"0px"}),w.getContent().setStyles({"padding-bottom":"8px"}),w.getContent().addClassName("checksPanel-checksExpanders")}else if(t.validations&&t.validations.length&&1===t.validations.length){if(s.length&&t.objects){a=[];for(let e=0;e<t.objects.length;e++)r=t.objects[e].validationId,f.push(r),a.push(D[r].checks[t.objects[e].checkId])}else l=t.validations[0].id,a=M[l].checks;if(a.length>0){var y=new e.Element("div",{class:"globalDiv"}).inject(g);o=new e.Element("div",{class:"CollapseExpandAll"}).inject(y);var E=new e.Element("div",{class:"expandIconPlaceholder"}).inject(o);(h=new i({displayStyle:"lite",label:"expand All",icon:{iconName:"expand-all",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(E)).getContent().addClassName("expandAllIcon");var k=new e.Element("div",{class:"collapseIconPlaceholder"}).inject(o);(c=new i({displayStyle:"lite",label:"collapse All",icon:{iconName:"collapse-all",fontIconFamily:WUXManagedFontIcons.Font3DS},showLabelFlag:!1}).inject(k)).getContent().addClassName("collapseAllIcon"),c.getContent().onclick=b,h.getContent().onclick=I}for(let t=0;t<a.length;t++)x=!0,p=new e.Element("div",{class:"flowContainer"}).inject(g),P(a[t],f.length?f[0]:l).inject(p).getContent().setStyles({"margin-left":"5px"})}x||new e.Element("div",{text:C,class:"noCheck"}).inject(g),x=!1,m(g)};const y=()=>{require(["DS/DMUReadPersistence/DMUValidationReadServices"].concat([]),function(e){(new e).getValidationsFromObjectsIds({highlightIds:l,checkIds:s,validationIds:t,onSuccess:"Highlight"===h?C:v,onFailure:k,platform:a})})};c.subscribe("DS/DMUwebR3Mctrl/R3MObjectModified",e=>{"maturity"!==e.modified&&"validationState"!==e.modified||g&&g.destroy(),u&&u.destroy(),y()}),(l.length||s.length||t.length)&&y()},this.clearView=function(e){var t;if("Highlight"===e&&u){v=[];var n=u.getElementsByClassName("highlightsPanel-highlightsExpanders");if(n.length)for(let e=0;e<n.length;e++){n[e].getElementsByClassName("expandAllIcon").length&&n[e].getElementsByClassName("expandAllIcon")[0].destroy(),n[e].getElementsByClassName("collapseAllIcon").length&&n[e].getElementsByClassName("collapseAllIcon")[0].destroy(),t=n[e].getElementsByClassName("highlightFacetExpander");for(let e=0;e<t.length;e++)t[e].dsModel.clear(),t[e].destroy();n[e].getElementsByClassName("noHighlight").length&&n[e].getElementsByClassName("noHighlight")[0].destroy(),n[e].destroy()}else{u.getElementsByClassName("expandAllIcon").length&&u.getElementsByClassName("expandAllIcon")[0].destroy(),u.getElementsByClassName("collapseAllIcon").length&&u.getElementsByClassName("collapseAllIcon")[0].destroy(),t=u.getElementsByClassName("highlightFacetExpander");for(let e=0;e<t.length;e++)t[e].dsModel.clear(),t[e].destroy()}u.destroy()}if("Check"===e&&g){C=[];var i=g.getElementsByClassName("checksPanel-checksExpanders");if(i.length)for(let e=0;e<i.length;e++){i[e].getElementsByClassName("expandAllIcon").length&&i[e].getElementsByClassName("expandAllIcon")[0].destroy(),i[e].getElementsByClassName("collapseAllIcon").length&&i[e].getElementsByClassName("collapseAllIcon")[0].destroy(),t=i[e].getElementsByClassName("checkFacetExpander");for(let e=0;e<t.length;e++)t[e].dsModel.clear(),t[e].destroy();i[e].getElementsByClassName("noCheck").length&&i[e].getElementsByClassName("noCheck")[0].destroy(),i[e].destroy()}else{g.getElementsByClassName("expandAllIcon").length&&g.getElementsByClassName("expandAllIcon")[0].destroy(),g.getElementsByClassName("collapseAllIcon").length&&g.getElementsByClassName("collapseAllIcon")[0].destroy(),t=g.getElementsByClassName("checkFacetExpander");for(let e=0;e<t.length;e++)t[e].dsModel.clear(),t[e].destroy()}g.destroy()}E=[],M=[],D=[]}}}),r=[];return t.singleton({init:function(){},getDMUR3MReviewController:function(){for(var e,t=0;t<r.length;t++){r[t].counter++,e=r[t].reviewController;break}if(!e){var n=new h;e={getValidations:function(e,t,i,s,l,a,o){if(n)return n.getValidations(e,t,i,s,l,a,o)},clearView:function(e){if(n)return n.clearView(e)}},r.push({reviewController:e,counter:1})}return e?Object.freeze(e):e},giveDMUR3MReviewController:function(){for(var e,t=0;t<r.length;t++){e=r[t].reviewController;break}return e?Object.freeze(e):e},unreferenceDMUR3MReviewController:function(){for(var e=0;e<r.length;e++){r[e].counter--,r[e].counter<=0&&(r[e].reviewController.clear(),r.splice(e,1));break}}})}),define("DS/DMUReviewFacets/DMUwebR3MinfoRvwHighlightTab",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","UWA/Controls/ThemedScroller","DS/DMUReviewFacets/DMUR3MReviewController"],function(e,t,n,i){"use strict";return t.extend({init:function(t){this._parent(t);var s,l=t.requestUtils,a=this;this.elements={},this.elements.container=e.createElement("div",{class:"infoRvwHighlight"});var o=[],c=[],d=function(e){var t=e.getElementsByClassName("reviewExpander"),i=e.getElementsByClassName("highlightsPanel-highlightsExpanders");for(let e=0;e<t.length;e++)o.push(t[e].dsModel);for(let e=0;e<i.length;e++)c.push(i[e].dsModel);s||(s=(new n).inject(a.elements.container)).getContent().setStyle("height","100%"),s.getInnerElement().setContent(e),a.hideLoader()};this.updateFacet=function(){var e,n,s=this.getModel(),a=s.get("objectId"),o=s.get("_DS_ATTR_type");o=o&&o.valueDB?o.valueDB:s.get("_DS_ATTR_type");var c=[],h=[],r=[],g=i.giveDMUR3MReviewController();if(g||(g=i.getDMUR3MReviewController()),g.clearView("Highlight"),this.showLoader(),!s)return!1;if(s.getMergingModels){e=s.getMergedModelIds(),n=s.getMergingModels();for(let t=0;t<e.length;t++)"DMUValidationValidation"===(o=(o=n[e[t]].get("_DS_ATTR_type"))&&o.valueDB?o.valueDB:n[e[t]].get("_DS_ATTR_type"))?c.push(e[t]):"DMUValidationCheck"===o?h.push(e[t]):"DMUValidationExposedPresentation"===o&&r.push(e[t])}else"DMUValidationValidation"===o?c.push(a):"DMUValidationCheck"===o?h.push(a):"DMUValidationExposedPresentation"===o&&r.push(a);g.getValidations(c,h,r,l,t.onFacetModification,"Highlight",d)},this.destroyComponent=function(){},this.clearFacet=function(){for(let e=0;e<o.length;e++)o[e].destroy();for(let e=0;e<c.length;e++)c[e].destroy();o=[],c=[]},this.onResize=function(){},this.onRefresh=function(){this.clearFacet(),this.updateFacet()}}})}),define("DS/DMUReviewFacets/DMUwebR3MinfoRvwCheckTab",["UWA/Core","DS/EditPropWidget/facets/Common/FacetsBase","UWA/Controls/ThemedScroller","DS/DMUReviewFacets/DMUR3MReviewController"],function(e,t,n,i){"use strict";return t.extend({init:function(t){this._parent(t);var s,l=t.requestUtils,a=this;this.elements={},this.elements.container=e.createElement("div",{class:"infoRvwCheckTab"});var o=[],c=[],d=function(e){var t=e.getElementsByClassName("reviewExpander"),i=e.getElementsByClassName("checksPanel-checksExpanders");for(let e=0;e<t.length;e++)o.push(t[e].dsModel);for(let e=0;e<i.length;e++)c.push(i[e].dsModel);s||(s=(new n).inject(a.elements.container)).getContent().setStyle("height","100%"),s.getInnerElement().setContent(e),a.hideLoader()};this.updateFacet=function(){var e,n,s=this.getModel(),a=s.get("objectId"),o=s.get("_DS_ATTR_type");o=o&&o.valueDB?o.valueDB:s.get("_DS_ATTR_type");var c=[],h=[],r=[],g=i.giveDMUR3MReviewController();if(g||(g=i.getDMUR3MReviewController()),g.clearView("Check"),this.showLoader(),!s)return!1;if(s.getMergingModels){e=s.getMergedModelIds(),n=s.getMergingModels();for(let t=0;t<e.length;t++)"DMUValidationValidation"===(o=(o=n[e[t]].get("_DS_ATTR_type"))&&o.valueDB?o.valueDB:n[e[t]].get("_DS_ATTR_type"))?c.push(e[t]):"DMUValidationCheck"===o?h.push(e[t]):"DMUExposedPresentation"===o&&r.push(e[t])}else"DMUValidationValidation"===o?c.push(a):"DMUValidationCheck"===o?h.push(a):"DMUExposedPresentation"===o&&r.push(a);g.getValidations(c,h,r,l,t.onFacetModification,"Check",d)},this.destroyComponent=function(){},this.onResize=function(){},this.onRefresh=function(){this.updateFacet()}}})});